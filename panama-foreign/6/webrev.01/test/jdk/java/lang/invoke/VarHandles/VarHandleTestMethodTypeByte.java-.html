<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old test/jdk/java/lang/invoke/VarHandles/VarHandleTestMethodTypeByte.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
  <body>
    <pre>
   1 /*
   2  * Copyright (c) 2015, 2016, Oracle and/or its affiliates. All rights reserved.
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.
   8  *
   9  * This code is distributed in the hope that it will be useful, but WITHOUT
  10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  12  * version 2 for more details (a copy is included in the LICENSE file that
  13  * accompanied this code).
  14  *
  15  * You should have received a copy of the GNU General Public License version
  16  * 2 along with this work; if not, write to the Free Software Foundation,
  17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  18  *
  19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  20  * or visit www.oracle.com if you need additional information or have any
  21  * questions.
  22  */
  23 
  24 /*
  25  * @test
  26  * @bug 8156486
  27  * @run testng/othervm VarHandleTestMethodTypeByte
  28  * @run testng/othervm -Djava.lang.invoke.VarHandle.VAR_HANDLE_GUARDS=false VarHandleTestMethodTypeByte
  29  */
  30 
  31 import org.testng.annotations.BeforeClass;
  32 import org.testng.annotations.DataProvider;
  33 import org.testng.annotations.Test;
  34 
  35 import java.lang.invoke.MethodHandles;
  36 import java.lang.invoke.VarHandle;
  37 import java.util.ArrayList;
  38 import java.util.Arrays;
  39 import java.util.List;
  40 
  41 import static org.testng.Assert.*;
  42 
  43 import static java.lang.invoke.MethodType.*;
  44 
  45 public class VarHandleTestMethodTypeByte extends VarHandleBaseTest {
  46     static final byte static_final_v = (byte)0x01;
  47 
  48     static byte static_v = (byte)0x01;
  49 
  50     final byte final_v = (byte)0x01;
  51 
  52     byte v = (byte)0x01;
  53 
  54     VarHandle vhFinalField;
  55 
  56     VarHandle vhField;
  57 
  58     VarHandle vhStaticField;
  59 
  60     VarHandle vhStaticFinalField;
  61 
  62     VarHandle vhArray;
  63 
  64     @BeforeClass
  65     public void setup() throws Exception {
  66         vhFinalField = MethodHandles.lookup().findVarHandle(
  67                 VarHandleTestMethodTypeByte.class, &quot;final_v&quot;, byte.class);
  68 
  69         vhField = MethodHandles.lookup().findVarHandle(
  70                 VarHandleTestMethodTypeByte.class, &quot;v&quot;, byte.class);
  71 
  72         vhStaticFinalField = MethodHandles.lookup().findStaticVarHandle(
  73             VarHandleTestMethodTypeByte.class, &quot;static_final_v&quot;, byte.class);
  74 
  75         vhStaticField = MethodHandles.lookup().findStaticVarHandle(
  76             VarHandleTestMethodTypeByte.class, &quot;static_v&quot;, byte.class);
  77 
  78         vhArray = MethodHandles.arrayElementVarHandle(byte[].class);
  79     }
  80 
  81     @DataProvider
  82     public Object[][] accessTestCaseProvider() throws Exception {
  83         List&lt;AccessTestCase&lt;?&gt;&gt; cases = new ArrayList&lt;&gt;();
  84 
  85         cases.add(new VarHandleAccessTestCase(&quot;Instance field&quot;,
  86                                               vhField, vh -&gt; testInstanceFieldWrongMethodType(this, vh),
  87                                               false));
  88 
  89         cases.add(new VarHandleAccessTestCase(&quot;Static field&quot;,
  90                                               vhStaticField, VarHandleTestMethodTypeByte::testStaticFieldWrongMethodType,
  91                                               false));
  92 
  93         cases.add(new VarHandleAccessTestCase(&quot;Array&quot;,
  94                                               vhArray, VarHandleTestMethodTypeByte::testArrayWrongMethodType,
  95                                               false));
  96 
  97         for (VarHandleToMethodHandle f : VarHandleToMethodHandle.values()) {
  98             cases.add(new MethodHandleAccessTestCase(&quot;Instance field&quot;,
  99                                                      vhField, f, hs -&gt; testInstanceFieldWrongMethodType(this, hs),
 100                                                      false));
 101 
 102             cases.add(new MethodHandleAccessTestCase(&quot;Static field&quot;,
 103                                                      vhStaticField, f, VarHandleTestMethodTypeByte::testStaticFieldWrongMethodType,
 104                                                      false));
 105 
 106             cases.add(new MethodHandleAccessTestCase(&quot;Array&quot;,
 107                                                      vhArray, f, VarHandleTestMethodTypeByte::testArrayWrongMethodType,
 108                                                      false));
 109         }
 110         // Work around issue with jtreg summary reporting which truncates
 111         // the String result of Object.toString to 30 characters, hence
 112         // the first dummy argument
 113         return cases.stream().map(tc -&gt; new Object[]{tc.toString(), tc}).toArray(Object[][]::new);
 114     }
 115 
 116     @Test(dataProvider = &quot;accessTestCaseProvider&quot;)
 117     public &lt;T&gt; void testAccess(String desc, AccessTestCase&lt;T&gt; atc) throws Throwable {
 118         T t = atc.get();
 119         int iters = atc.requiresLoop() ? ITERS : 1;
 120         for (int c = 0; c &lt; iters; c++) {
 121             atc.testAccess(t);
 122         }
 123     }
 124 
 125 
 126     static void testInstanceFieldWrongMethodType(VarHandleTestMethodTypeByte recv, VarHandle vh) throws Throwable {
 127         // Get
 128         // Incorrect argument types
 129         checkNPE(() -&gt; { // null receiver
 130             byte x = (byte) vh.get(null);
 131         });
 132         checkCCE(() -&gt; { // receiver reference class
 133             byte x = (byte) vh.get(Void.class);
 134         });
 135         checkWMTE(() -&gt; { // receiver primitive class
 136             byte x = (byte) vh.get(0);
 137         });
 138         // Incorrect return type
 139         checkWMTE(() -&gt; { // reference class
 140             Void x = (Void) vh.get(recv);
 141         });
 142         checkWMTE(() -&gt; { // primitive class
 143             boolean x = (boolean) vh.get(recv);
 144         });
 145         // Incorrect arity
 146         checkWMTE(() -&gt; { // 0
 147             byte x = (byte) vh.get();
 148         });
 149         checkWMTE(() -&gt; { // &gt;
 150             byte x = (byte) vh.get(recv, Void.class);
 151         });
 152 
 153 
 154         // Set
 155         // Incorrect argument types
 156         checkNPE(() -&gt; { // null receiver
 157             vh.set(null, (byte)0x01);
 158         });
 159         checkCCE(() -&gt; { // receiver reference class
 160             vh.set(Void.class, (byte)0x01);
 161         });
 162         checkWMTE(() -&gt; { // value reference class
 163             vh.set(recv, Void.class);
 164         });
 165         checkWMTE(() -&gt; { // receiver primitive class
 166             vh.set(0, (byte)0x01);
 167         });
 168         // Incorrect arity
 169         checkWMTE(() -&gt; { // 0
 170             vh.set();
 171         });
 172         checkWMTE(() -&gt; { // &gt;
 173             vh.set(recv, (byte)0x01, Void.class);
 174         });
 175 
 176 
 177         // GetVolatile
 178         // Incorrect argument types
 179         checkNPE(() -&gt; { // null receiver
 180             byte x = (byte) vh.getVolatile(null);
 181         });
 182         checkCCE(() -&gt; { // receiver reference class
 183             byte x = (byte) vh.getVolatile(Void.class);
 184         });
 185         checkWMTE(() -&gt; { // receiver primitive class
 186             byte x = (byte) vh.getVolatile(0);
 187         });
 188         // Incorrect return type
 189         checkWMTE(() -&gt; { // reference class
 190             Void x = (Void) vh.getVolatile(recv);
 191         });
 192         checkWMTE(() -&gt; { // primitive class
 193             boolean x = (boolean) vh.getVolatile(recv);
 194         });
 195         // Incorrect arity
 196         checkWMTE(() -&gt; { // 0
 197             byte x = (byte) vh.getVolatile();
 198         });
 199         checkWMTE(() -&gt; { // &gt;
 200             byte x = (byte) vh.getVolatile(recv, Void.class);
 201         });
 202 
 203 
 204         // SetVolatile
 205         // Incorrect argument types
 206         checkNPE(() -&gt; { // null receiver
 207             vh.setVolatile(null, (byte)0x01);
 208         });
 209         checkCCE(() -&gt; { // receiver reference class
 210             vh.setVolatile(Void.class, (byte)0x01);
 211         });
 212         checkWMTE(() -&gt; { // value reference class
 213             vh.setVolatile(recv, Void.class);
 214         });
 215         checkWMTE(() -&gt; { // receiver primitive class
 216             vh.setVolatile(0, (byte)0x01);
 217         });
 218         // Incorrect arity
 219         checkWMTE(() -&gt; { // 0
 220             vh.setVolatile();
 221         });
 222         checkWMTE(() -&gt; { // &gt;
 223             vh.setVolatile(recv, (byte)0x01, Void.class);
 224         });
 225 
 226 
 227         // GetOpaque
 228         // Incorrect argument types
 229         checkNPE(() -&gt; { // null receiver
 230             byte x = (byte) vh.getOpaque(null);
 231         });
 232         checkCCE(() -&gt; { // receiver reference class
 233             byte x = (byte) vh.getOpaque(Void.class);
 234         });
 235         checkWMTE(() -&gt; { // receiver primitive class
 236             byte x = (byte) vh.getOpaque(0);
 237         });
 238         // Incorrect return type
 239         checkWMTE(() -&gt; { // reference class
 240             Void x = (Void) vh.getOpaque(recv);
 241         });
 242         checkWMTE(() -&gt; { // primitive class
 243             boolean x = (boolean) vh.getOpaque(recv);
 244         });
 245         // Incorrect arity
 246         checkWMTE(() -&gt; { // 0
 247             byte x = (byte) vh.getOpaque();
 248         });
 249         checkWMTE(() -&gt; { // &gt;
 250             byte x = (byte) vh.getOpaque(recv, Void.class);
 251         });
 252 
 253 
 254         // SetOpaque
 255         // Incorrect argument types
 256         checkNPE(() -&gt; { // null receiver
 257             vh.setOpaque(null, (byte)0x01);
 258         });
 259         checkCCE(() -&gt; { // receiver reference class
 260             vh.setOpaque(Void.class, (byte)0x01);
 261         });
 262         checkWMTE(() -&gt; { // value reference class
 263             vh.setOpaque(recv, Void.class);
 264         });
 265         checkWMTE(() -&gt; { // receiver primitive class
 266             vh.setOpaque(0, (byte)0x01);
 267         });
 268         // Incorrect arity
 269         checkWMTE(() -&gt; { // 0
 270             vh.setOpaque();
 271         });
 272         checkWMTE(() -&gt; { // &gt;
 273             vh.setOpaque(recv, (byte)0x01, Void.class);
 274         });
 275 
 276 
 277         // GetAcquire
 278         // Incorrect argument types
 279         checkNPE(() -&gt; { // null receiver
 280             byte x = (byte) vh.getAcquire(null);
 281         });
 282         checkCCE(() -&gt; { // receiver reference class
 283             byte x = (byte) vh.getAcquire(Void.class);
 284         });
 285         checkWMTE(() -&gt; { // receiver primitive class
 286             byte x = (byte) vh.getAcquire(0);
 287         });
 288         // Incorrect return type
 289         checkWMTE(() -&gt; { // reference class
 290             Void x = (Void) vh.getAcquire(recv);
 291         });
 292         checkWMTE(() -&gt; { // primitive class
 293             boolean x = (boolean) vh.getAcquire(recv);
 294         });
 295         // Incorrect arity
 296         checkWMTE(() -&gt; { // 0
 297             byte x = (byte) vh.getAcquire();
 298         });
 299         checkWMTE(() -&gt; { // &gt;
 300             byte x = (byte) vh.getAcquire(recv, Void.class);
 301         });
 302 
 303 
 304         // SetRelease
 305         // Incorrect argument types
 306         checkNPE(() -&gt; { // null receiver
 307             vh.setRelease(null, (byte)0x01);
 308         });
 309         checkCCE(() -&gt; { // receiver reference class
 310             vh.setRelease(Void.class, (byte)0x01);
 311         });
 312         checkWMTE(() -&gt; { // value reference class
 313             vh.setRelease(recv, Void.class);
 314         });
 315         checkWMTE(() -&gt; { // receiver primitive class
 316             vh.setRelease(0, (byte)0x01);
 317         });
 318         // Incorrect arity
 319         checkWMTE(() -&gt; { // 0
 320             vh.setRelease();
 321         });
 322         checkWMTE(() -&gt; { // &gt;
 323             vh.setRelease(recv, (byte)0x01, Void.class);
 324         });
 325 
 326 
 327         // CompareAndSet
 328         // Incorrect argument types
 329         checkNPE(() -&gt; { // null receiver
 330             boolean r = vh.compareAndSet(null, (byte)0x01, (byte)0x01);
 331         });
 332         checkCCE(() -&gt; { // receiver reference class
 333             boolean r = vh.compareAndSet(Void.class, (byte)0x01, (byte)0x01);
 334         });
 335         checkWMTE(() -&gt; { // expected reference class
 336             boolean r = vh.compareAndSet(recv, Void.class, (byte)0x01);
 337         });
 338         checkWMTE(() -&gt; { // actual reference class
 339             boolean r = vh.compareAndSet(recv, (byte)0x01, Void.class);
 340         });
 341         checkWMTE(() -&gt; { // receiver primitive class
 342             boolean r = vh.compareAndSet(0, (byte)0x01, (byte)0x01);
 343         });
 344         // Incorrect arity
 345         checkWMTE(() -&gt; { // 0
 346             boolean r = vh.compareAndSet();
 347         });
 348         checkWMTE(() -&gt; { // &gt;
 349             boolean r = vh.compareAndSet(recv, (byte)0x01, (byte)0x01, Void.class);
 350         });
 351 
 352 
 353         // WeakCompareAndSet
 354         // Incorrect argument types
 355         checkNPE(() -&gt; { // null receiver
 356             boolean r = vh.weakCompareAndSetPlain(null, (byte)0x01, (byte)0x01);
 357         });
 358         checkCCE(() -&gt; { // receiver reference class
 359             boolean r = vh.weakCompareAndSetPlain(Void.class, (byte)0x01, (byte)0x01);
 360         });
 361         checkWMTE(() -&gt; { // expected reference class
 362             boolean r = vh.weakCompareAndSetPlain(recv, Void.class, (byte)0x01);
 363         });
 364         checkWMTE(() -&gt; { // actual reference class
 365             boolean r = vh.weakCompareAndSetPlain(recv, (byte)0x01, Void.class);
 366         });
 367         checkWMTE(() -&gt; { // receiver primitive class
 368             boolean r = vh.weakCompareAndSetPlain(0, (byte)0x01, (byte)0x01);
 369         });
 370         // Incorrect arity
 371         checkWMTE(() -&gt; { // 0
 372             boolean r = vh.weakCompareAndSetPlain();
 373         });
 374         checkWMTE(() -&gt; { // &gt;
 375             boolean r = vh.weakCompareAndSetPlain(recv, (byte)0x01, (byte)0x01, Void.class);
 376         });
 377 
 378 
 379         // WeakCompareAndSetVolatile
 380         // Incorrect argument types
 381         checkNPE(() -&gt; { // null receiver
 382             boolean r = vh.weakCompareAndSet(null, (byte)0x01, (byte)0x01);
 383         });
 384         checkCCE(() -&gt; { // receiver reference class
 385             boolean r = vh.weakCompareAndSet(Void.class, (byte)0x01, (byte)0x01);
 386         });
 387         checkWMTE(() -&gt; { // expected reference class
 388             boolean r = vh.weakCompareAndSet(recv, Void.class, (byte)0x01);
 389         });
 390         checkWMTE(() -&gt; { // actual reference class
 391             boolean r = vh.weakCompareAndSet(recv, (byte)0x01, Void.class);
 392         });
 393         checkWMTE(() -&gt; { // receiver primitive class
 394             boolean r = vh.weakCompareAndSet(0, (byte)0x01, (byte)0x01);
 395         });
 396         // Incorrect arity
 397         checkWMTE(() -&gt; { // 0
 398             boolean r = vh.weakCompareAndSet();
 399         });
 400         checkWMTE(() -&gt; { // &gt;
 401             boolean r = vh.weakCompareAndSet(recv, (byte)0x01, (byte)0x01, Void.class);
 402         });
 403 
 404 
 405         // WeakCompareAndSetAcquire
 406         // Incorrect argument types
 407         checkNPE(() -&gt; { // null receiver
 408             boolean r = vh.weakCompareAndSetAcquire(null, (byte)0x01, (byte)0x01);
 409         });
 410         checkCCE(() -&gt; { // receiver reference class
 411             boolean r = vh.weakCompareAndSetAcquire(Void.class, (byte)0x01, (byte)0x01);
 412         });
 413         checkWMTE(() -&gt; { // expected reference class
 414             boolean r = vh.weakCompareAndSetAcquire(recv, Void.class, (byte)0x01);
 415         });
 416         checkWMTE(() -&gt; { // actual reference class
 417             boolean r = vh.weakCompareAndSetAcquire(recv, (byte)0x01, Void.class);
 418         });
 419         checkWMTE(() -&gt; { // receiver primitive class
 420             boolean r = vh.weakCompareAndSetAcquire(0, (byte)0x01, (byte)0x01);
 421         });
 422         // Incorrect arity
 423         checkWMTE(() -&gt; { // 0
 424             boolean r = vh.weakCompareAndSetAcquire();
 425         });
 426         checkWMTE(() -&gt; { // &gt;
 427             boolean r = vh.weakCompareAndSetAcquire(recv, (byte)0x01, (byte)0x01, Void.class);
 428         });
 429 
 430 
 431         // WeakCompareAndSetRelease
 432         // Incorrect argument types
 433         checkNPE(() -&gt; { // null receiver
 434             boolean r = vh.weakCompareAndSetRelease(null, (byte)0x01, (byte)0x01);
 435         });
 436         checkCCE(() -&gt; { // receiver reference class
 437             boolean r = vh.weakCompareAndSetRelease(Void.class, (byte)0x01, (byte)0x01);
 438         });
 439         checkWMTE(() -&gt; { // expected reference class
 440             boolean r = vh.weakCompareAndSetRelease(recv, Void.class, (byte)0x01);
 441         });
 442         checkWMTE(() -&gt; { // actual reference class
 443             boolean r = vh.weakCompareAndSetRelease(recv, (byte)0x01, Void.class);
 444         });
 445         checkWMTE(() -&gt; { // receiver primitive class
 446             boolean r = vh.weakCompareAndSetRelease(0, (byte)0x01, (byte)0x01);
 447         });
 448         // Incorrect arity
 449         checkWMTE(() -&gt; { // 0
 450             boolean r = vh.weakCompareAndSetRelease();
 451         });
 452         checkWMTE(() -&gt; { // &gt;
 453             boolean r = vh.weakCompareAndSetRelease(recv, (byte)0x01, (byte)0x01, Void.class);
 454         });
 455 
 456 
 457         // CompareAndExchange
 458         // Incorrect argument types
 459         checkNPE(() -&gt; { // null receiver
 460             byte x = (byte) vh.compareAndExchange(null, (byte)0x01, (byte)0x01);
 461         });
 462         checkCCE(() -&gt; { // receiver reference class
 463             byte x = (byte) vh.compareAndExchange(Void.class, (byte)0x01, (byte)0x01);
 464         });
 465         checkWMTE(() -&gt; { // expected reference class
 466             byte x = (byte) vh.compareAndExchange(recv, Void.class, (byte)0x01);
 467         });
 468         checkWMTE(() -&gt; { // actual reference class
 469             byte x = (byte) vh.compareAndExchange(recv, (byte)0x01, Void.class);
 470         });
 471         checkWMTE(() -&gt; { // reciever primitive class
 472             byte x = (byte) vh.compareAndExchange(0, (byte)0x01, (byte)0x01);
 473         });
 474         // Incorrect return type
 475         checkWMTE(() -&gt; { // reference class
 476             Void r = (Void) vh.compareAndExchange(recv, (byte)0x01, (byte)0x01);
 477         });
 478         checkWMTE(() -&gt; { // primitive class
 479             boolean x = (boolean) vh.compareAndExchange(recv, (byte)0x01, (byte)0x01);
 480         });
 481         // Incorrect arity
 482         checkWMTE(() -&gt; { // 0
 483             byte x = (byte) vh.compareAndExchange();
 484         });
 485         checkWMTE(() -&gt; { // &gt;
 486             byte x = (byte) vh.compareAndExchange(recv, (byte)0x01, (byte)0x01, Void.class);
 487         });
 488 
 489 
 490         // CompareAndExchangeAcquire
 491         // Incorrect argument types
 492         checkNPE(() -&gt; { // null receiver
 493             byte x = (byte) vh.compareAndExchangeAcquire(null, (byte)0x01, (byte)0x01);
 494         });
 495         checkCCE(() -&gt; { // receiver reference class
 496             byte x = (byte) vh.compareAndExchangeAcquire(Void.class, (byte)0x01, (byte)0x01);
 497         });
 498         checkWMTE(() -&gt; { // expected reference class
 499             byte x = (byte) vh.compareAndExchangeAcquire(recv, Void.class, (byte)0x01);
 500         });
 501         checkWMTE(() -&gt; { // actual reference class
 502             byte x = (byte) vh.compareAndExchangeAcquire(recv, (byte)0x01, Void.class);
 503         });
 504         checkWMTE(() -&gt; { // reciever primitive class
 505             byte x = (byte) vh.compareAndExchangeAcquire(0, (byte)0x01, (byte)0x01);
 506         });
 507         // Incorrect return type
 508         checkWMTE(() -&gt; { // reference class
 509             Void r = (Void) vh.compareAndExchangeAcquire(recv, (byte)0x01, (byte)0x01);
 510         });
 511         checkWMTE(() -&gt; { // primitive class
 512             boolean x = (boolean) vh.compareAndExchangeAcquire(recv, (byte)0x01, (byte)0x01);
 513         });
 514         // Incorrect arity
 515         checkWMTE(() -&gt; { // 0
 516             byte x = (byte) vh.compareAndExchangeAcquire();
 517         });
 518         checkWMTE(() -&gt; { // &gt;
 519             byte x = (byte) vh.compareAndExchangeAcquire(recv, (byte)0x01, (byte)0x01, Void.class);
 520         });
 521 
 522 
 523         // CompareAndExchangeRelease
 524         // Incorrect argument types
 525         checkNPE(() -&gt; { // null receiver
 526             byte x = (byte) vh.compareAndExchangeRelease(null, (byte)0x01, (byte)0x01);
 527         });
 528         checkCCE(() -&gt; { // receiver reference class
 529             byte x = (byte) vh.compareAndExchangeRelease(Void.class, (byte)0x01, (byte)0x01);
 530         });
 531         checkWMTE(() -&gt; { // expected reference class
 532             byte x = (byte) vh.compareAndExchangeRelease(recv, Void.class, (byte)0x01);
 533         });
 534         checkWMTE(() -&gt; { // actual reference class
 535             byte x = (byte) vh.compareAndExchangeRelease(recv, (byte)0x01, Void.class);
 536         });
 537         checkWMTE(() -&gt; { // reciever primitive class
 538             byte x = (byte) vh.compareAndExchangeRelease(0, (byte)0x01, (byte)0x01);
 539         });
 540         // Incorrect return type
 541         checkWMTE(() -&gt; { // reference class
 542             Void r = (Void) vh.compareAndExchangeRelease(recv, (byte)0x01, (byte)0x01);
 543         });
 544         checkWMTE(() -&gt; { // primitive class
 545             boolean x = (boolean) vh.compareAndExchangeRelease(recv, (byte)0x01, (byte)0x01);
 546         });
 547         // Incorrect arity
 548         checkWMTE(() -&gt; { // 0
 549             byte x = (byte) vh.compareAndExchangeRelease();
 550         });
 551         checkWMTE(() -&gt; { // &gt;
 552             byte x = (byte) vh.compareAndExchangeRelease(recv, (byte)0x01, (byte)0x01, Void.class);
 553         });
 554 
 555 
 556         // GetAndSet
 557         // Incorrect argument types
 558         checkNPE(() -&gt; { // null receiver
 559             byte x = (byte) vh.getAndSet(null, (byte)0x01);
 560         });
 561         checkCCE(() -&gt; { // receiver reference class
 562             byte x = (byte) vh.getAndSet(Void.class, (byte)0x01);
 563         });
 564         checkWMTE(() -&gt; { // value reference class
 565             byte x = (byte) vh.getAndSet(recv, Void.class);
 566         });
 567         checkWMTE(() -&gt; { // reciever primitive class
 568             byte x = (byte) vh.getAndSet(0, (byte)0x01);
 569         });
 570         // Incorrect return type
 571         checkWMTE(() -&gt; { // reference class
 572             Void r = (Void) vh.getAndSet(recv, (byte)0x01);
 573         });
 574         checkWMTE(() -&gt; { // primitive class
 575             boolean x = (boolean) vh.getAndSet(recv, (byte)0x01);
 576         });
 577         // Incorrect arity
 578         checkWMTE(() -&gt; { // 0
 579             byte x = (byte) vh.getAndSet();
 580         });
 581         checkWMTE(() -&gt; { // &gt;
 582             byte x = (byte) vh.getAndSet(recv, (byte)0x01, Void.class);
 583         });
 584 
 585         // GetAndSetAcquire
 586         // Incorrect argument types
 587         checkNPE(() -&gt; { // null receiver
 588             byte x = (byte) vh.getAndSetAcquire(null, (byte)0x01);
 589         });
 590         checkCCE(() -&gt; { // receiver reference class
 591             byte x = (byte) vh.getAndSetAcquire(Void.class, (byte)0x01);
 592         });
 593         checkWMTE(() -&gt; { // value reference class
 594             byte x = (byte) vh.getAndSetAcquire(recv, Void.class);
 595         });
 596         checkWMTE(() -&gt; { // reciever primitive class
 597             byte x = (byte) vh.getAndSetAcquire(0, (byte)0x01);
 598         });
 599         // Incorrect return type
 600         checkWMTE(() -&gt; { // reference class
 601             Void r = (Void) vh.getAndSetAcquire(recv, (byte)0x01);
 602         });
 603         checkWMTE(() -&gt; { // primitive class
 604             boolean x = (boolean) vh.getAndSetAcquire(recv, (byte)0x01);
 605         });
 606         // Incorrect arity
 607         checkWMTE(() -&gt; { // 0
 608             byte x = (byte) vh.getAndSetAcquire();
 609         });
 610         checkWMTE(() -&gt; { // &gt;
 611             byte x = (byte) vh.getAndSetAcquire(recv, (byte)0x01, Void.class);
 612         });
 613 
 614         // GetAndSetRelease
 615         // Incorrect argument types
 616         checkNPE(() -&gt; { // null receiver
 617             byte x = (byte) vh.getAndSetRelease(null, (byte)0x01);
 618         });
 619         checkCCE(() -&gt; { // receiver reference class
 620             byte x = (byte) vh.getAndSetRelease(Void.class, (byte)0x01);
 621         });
 622         checkWMTE(() -&gt; { // value reference class
 623             byte x = (byte) vh.getAndSetRelease(recv, Void.class);
 624         });
 625         checkWMTE(() -&gt; { // reciever primitive class
 626             byte x = (byte) vh.getAndSetRelease(0, (byte)0x01);
 627         });
 628         // Incorrect return type
 629         checkWMTE(() -&gt; { // reference class
 630             Void r = (Void) vh.getAndSetRelease(recv, (byte)0x01);
 631         });
 632         checkWMTE(() -&gt; { // primitive class
 633             boolean x = (boolean) vh.getAndSetRelease(recv, (byte)0x01);
 634         });
 635         // Incorrect arity
 636         checkWMTE(() -&gt; { // 0
 637             byte x = (byte) vh.getAndSetRelease();
 638         });
 639         checkWMTE(() -&gt; { // &gt;
 640             byte x = (byte) vh.getAndSetRelease(recv, (byte)0x01, Void.class);
 641         });
 642 
 643         // GetAndAdd
 644         // Incorrect argument types
 645         checkNPE(() -&gt; { // null receiver
 646             byte x = (byte) vh.getAndAdd(null, (byte)0x01);
 647         });
 648         checkCCE(() -&gt; { // receiver reference class
 649             byte x = (byte) vh.getAndAdd(Void.class, (byte)0x01);
 650         });
 651         checkWMTE(() -&gt; { // value reference class
 652             byte x = (byte) vh.getAndAdd(recv, Void.class);
 653         });
 654         checkWMTE(() -&gt; { // reciever primitive class
 655             byte x = (byte) vh.getAndAdd(0, (byte)0x01);
 656         });
 657         // Incorrect return type
 658         checkWMTE(() -&gt; { // reference class
 659             Void r = (Void) vh.getAndAdd(recv, (byte)0x01);
 660         });
 661         checkWMTE(() -&gt; { // primitive class
 662             boolean x = (boolean) vh.getAndAdd(recv, (byte)0x01);
 663         });
 664         // Incorrect arity
 665         checkWMTE(() -&gt; { // 0
 666             byte x = (byte) vh.getAndAdd();
 667         });
 668         checkWMTE(() -&gt; { // &gt;
 669             byte x = (byte) vh.getAndAdd(recv, (byte)0x01, Void.class);
 670         });
 671 
 672         // GetAndAddAcquire
 673         // Incorrect argument types
 674         checkNPE(() -&gt; { // null receiver
 675             byte x = (byte) vh.getAndAddAcquire(null, (byte)0x01);
 676         });
 677         checkCCE(() -&gt; { // receiver reference class
 678             byte x = (byte) vh.getAndAddAcquire(Void.class, (byte)0x01);
 679         });
 680         checkWMTE(() -&gt; { // value reference class
 681             byte x = (byte) vh.getAndAddAcquire(recv, Void.class);
 682         });
 683         checkWMTE(() -&gt; { // reciever primitive class
 684             byte x = (byte) vh.getAndAddAcquire(0, (byte)0x01);
 685         });
 686         // Incorrect return type
 687         checkWMTE(() -&gt; { // reference class
 688             Void r = (Void) vh.getAndAddAcquire(recv, (byte)0x01);
 689         });
 690         checkWMTE(() -&gt; { // primitive class
 691             boolean x = (boolean) vh.getAndAddAcquire(recv, (byte)0x01);
 692         });
 693         // Incorrect arity
 694         checkWMTE(() -&gt; { // 0
 695             byte x = (byte) vh.getAndAddAcquire();
 696         });
 697         checkWMTE(() -&gt; { // &gt;
 698             byte x = (byte) vh.getAndAddAcquire(recv, (byte)0x01, Void.class);
 699         });
 700 
 701         // GetAndAddRelease
 702         // Incorrect argument types
 703         checkNPE(() -&gt; { // null receiver
 704             byte x = (byte) vh.getAndAddRelease(null, (byte)0x01);
 705         });
 706         checkCCE(() -&gt; { // receiver reference class
 707             byte x = (byte) vh.getAndAddRelease(Void.class, (byte)0x01);
 708         });
 709         checkWMTE(() -&gt; { // value reference class
 710             byte x = (byte) vh.getAndAddRelease(recv, Void.class);
 711         });
 712         checkWMTE(() -&gt; { // reciever primitive class
 713             byte x = (byte) vh.getAndAddRelease(0, (byte)0x01);
 714         });
 715         // Incorrect return type
 716         checkWMTE(() -&gt; { // reference class
 717             Void r = (Void) vh.getAndAddRelease(recv, (byte)0x01);
 718         });
 719         checkWMTE(() -&gt; { // primitive class
 720             boolean x = (boolean) vh.getAndAddRelease(recv, (byte)0x01);
 721         });
 722         // Incorrect arity
 723         checkWMTE(() -&gt; { // 0
 724             byte x = (byte) vh.getAndAddRelease();
 725         });
 726         checkWMTE(() -&gt; { // &gt;
 727             byte x = (byte) vh.getAndAddRelease(recv, (byte)0x01, Void.class);
 728         });
 729 
 730         // GetAndBitwiseOr
 731         // Incorrect argument types
 732         checkNPE(() -&gt; { // null receiver
 733             byte x = (byte) vh.getAndBitwiseOr(null, (byte)0x01);
 734         });
 735         checkCCE(() -&gt; { // receiver reference class
 736             byte x = (byte) vh.getAndBitwiseOr(Void.class, (byte)0x01);
 737         });
 738         checkWMTE(() -&gt; { // value reference class
 739             byte x = (byte) vh.getAndBitwiseOr(recv, Void.class);
 740         });
 741         checkWMTE(() -&gt; { // reciever primitive class
 742             byte x = (byte) vh.getAndBitwiseOr(0, (byte)0x01);
 743         });
 744         // Incorrect return type
 745         checkWMTE(() -&gt; { // reference class
 746             Void r = (Void) vh.getAndBitwiseOr(recv, (byte)0x01);
 747         });
 748         checkWMTE(() -&gt; { // primitive class
 749             boolean x = (boolean) vh.getAndBitwiseOr(recv, (byte)0x01);
 750         });
 751         // Incorrect arity
 752         checkWMTE(() -&gt; { // 0
 753             byte x = (byte) vh.getAndBitwiseOr();
 754         });
 755         checkWMTE(() -&gt; { // &gt;
 756             byte x = (byte) vh.getAndBitwiseOr(recv, (byte)0x01, Void.class);
 757         });
 758 
 759 
 760         // GetAndBitwiseOrAcquire
 761         // Incorrect argument types
 762         checkNPE(() -&gt; { // null receiver
 763             byte x = (byte) vh.getAndBitwiseOrAcquire(null, (byte)0x01);
 764         });
 765         checkCCE(() -&gt; { // receiver reference class
 766             byte x = (byte) vh.getAndBitwiseOrAcquire(Void.class, (byte)0x01);
 767         });
 768         checkWMTE(() -&gt; { // value reference class
 769             byte x = (byte) vh.getAndBitwiseOrAcquire(recv, Void.class);
 770         });
 771         checkWMTE(() -&gt; { // reciever primitive class
 772             byte x = (byte) vh.getAndBitwiseOrAcquire(0, (byte)0x01);
 773         });
 774         // Incorrect return type
 775         checkWMTE(() -&gt; { // reference class
 776             Void r = (Void) vh.getAndBitwiseOrAcquire(recv, (byte)0x01);
 777         });
 778         checkWMTE(() -&gt; { // primitive class
 779             boolean x = (boolean) vh.getAndBitwiseOrAcquire(recv, (byte)0x01);
 780         });
 781         // Incorrect arity
 782         checkWMTE(() -&gt; { // 0
 783             byte x = (byte) vh.getAndBitwiseOrAcquire();
 784         });
 785         checkWMTE(() -&gt; { // &gt;
 786             byte x = (byte) vh.getAndBitwiseOrAcquire(recv, (byte)0x01, Void.class);
 787         });
 788 
 789 
 790         // GetAndBitwiseOrRelease
 791         // Incorrect argument types
 792         checkNPE(() -&gt; { // null receiver
 793             byte x = (byte) vh.getAndBitwiseOrRelease(null, (byte)0x01);
 794         });
 795         checkCCE(() -&gt; { // receiver reference class
 796             byte x = (byte) vh.getAndBitwiseOr(Void.class, (byte)0x01);
 797         });
 798         checkWMTE(() -&gt; { // value reference class
 799             byte x = (byte) vh.getAndBitwiseOr(recv, Void.class);
 800         });
 801         checkWMTE(() -&gt; { // reciever primitive class
 802             byte x = (byte) vh.getAndBitwiseOr(0, (byte)0x01);
 803         });
 804         // Incorrect return type
 805         checkWMTE(() -&gt; { // reference class
 806             Void r = (Void) vh.getAndBitwiseOr(recv, (byte)0x01);
 807         });
 808         checkWMTE(() -&gt; { // primitive class
 809             boolean x = (boolean) vh.getAndBitwiseOr(recv, (byte)0x01);
 810         });
 811         // Incorrect arity
 812         checkWMTE(() -&gt; { // 0
 813             byte x = (byte) vh.getAndBitwiseOr();
 814         });
 815         checkWMTE(() -&gt; { // &gt;
 816             byte x = (byte) vh.getAndBitwiseOr(recv, (byte)0x01, Void.class);
 817         });
 818 
 819 
 820         // GetAndBitwiseAnd
 821         // Incorrect argument types
 822         checkNPE(() -&gt; { // null receiver
 823             byte x = (byte) vh.getAndBitwiseAnd(null, (byte)0x01);
 824         });
 825         checkCCE(() -&gt; { // receiver reference class
 826             byte x = (byte) vh.getAndBitwiseAnd(Void.class, (byte)0x01);
 827         });
 828         checkWMTE(() -&gt; { // value reference class
 829             byte x = (byte) vh.getAndBitwiseAnd(recv, Void.class);
 830         });
 831         checkWMTE(() -&gt; { // reciever primitive class
 832             byte x = (byte) vh.getAndBitwiseAnd(0, (byte)0x01);
 833         });
 834         // Incorrect return type
 835         checkWMTE(() -&gt; { // reference class
 836             Void r = (Void) vh.getAndBitwiseAnd(recv, (byte)0x01);
 837         });
 838         checkWMTE(() -&gt; { // primitive class
 839             boolean x = (boolean) vh.getAndBitwiseAnd(recv, (byte)0x01);
 840         });
 841         // Incorrect arity
 842         checkWMTE(() -&gt; { // 0
 843             byte x = (byte) vh.getAndBitwiseAnd();
 844         });
 845         checkWMTE(() -&gt; { // &gt;
 846             byte x = (byte) vh.getAndBitwiseAnd(recv, (byte)0x01, Void.class);
 847         });
 848 
 849 
 850         // GetAndBitwiseAndAcquire
 851         // Incorrect argument types
 852         checkNPE(() -&gt; { // null receiver
 853             byte x = (byte) vh.getAndBitwiseAndAcquire(null, (byte)0x01);
 854         });
 855         checkCCE(() -&gt; { // receiver reference class
 856             byte x = (byte) vh.getAndBitwiseAndAcquire(Void.class, (byte)0x01);
 857         });
 858         checkWMTE(() -&gt; { // value reference class
 859             byte x = (byte) vh.getAndBitwiseAndAcquire(recv, Void.class);
 860         });
 861         checkWMTE(() -&gt; { // reciever primitive class
 862             byte x = (byte) vh.getAndBitwiseAndAcquire(0, (byte)0x01);
 863         });
 864         // Incorrect return type
 865         checkWMTE(() -&gt; { // reference class
 866             Void r = (Void) vh.getAndBitwiseAndAcquire(recv, (byte)0x01);
 867         });
 868         checkWMTE(() -&gt; { // primitive class
 869             boolean x = (boolean) vh.getAndBitwiseAndAcquire(recv, (byte)0x01);
 870         });
 871         // Incorrect arity
 872         checkWMTE(() -&gt; { // 0
 873             byte x = (byte) vh.getAndBitwiseAndAcquire();
 874         });
 875         checkWMTE(() -&gt; { // &gt;
 876             byte x = (byte) vh.getAndBitwiseAndAcquire(recv, (byte)0x01, Void.class);
 877         });
 878 
 879 
 880         // GetAndBitwiseAndRelease
 881         // Incorrect argument types
 882         checkNPE(() -&gt; { // null receiver
 883             byte x = (byte) vh.getAndBitwiseAndRelease(null, (byte)0x01);
 884         });
 885         checkCCE(() -&gt; { // receiver reference class
 886             byte x = (byte) vh.getAndBitwiseAnd(Void.class, (byte)0x01);
 887         });
 888         checkWMTE(() -&gt; { // value reference class
 889             byte x = (byte) vh.getAndBitwiseAnd(recv, Void.class);
 890         });
 891         checkWMTE(() -&gt; { // reciever primitive class
 892             byte x = (byte) vh.getAndBitwiseAnd(0, (byte)0x01);
 893         });
 894         // Incorrect return type
 895         checkWMTE(() -&gt; { // reference class
 896             Void r = (Void) vh.getAndBitwiseAnd(recv, (byte)0x01);
 897         });
 898         checkWMTE(() -&gt; { // primitive class
 899             boolean x = (boolean) vh.getAndBitwiseAnd(recv, (byte)0x01);
 900         });
 901         // Incorrect arity
 902         checkWMTE(() -&gt; { // 0
 903             byte x = (byte) vh.getAndBitwiseAnd();
 904         });
 905         checkWMTE(() -&gt; { // &gt;
 906             byte x = (byte) vh.getAndBitwiseAnd(recv, (byte)0x01, Void.class);
 907         });
 908 
 909 
 910         // GetAndBitwiseXor
 911         // Incorrect argument types
 912         checkNPE(() -&gt; { // null receiver
 913             byte x = (byte) vh.getAndBitwiseXor(null, (byte)0x01);
 914         });
 915         checkCCE(() -&gt; { // receiver reference class
 916             byte x = (byte) vh.getAndBitwiseXor(Void.class, (byte)0x01);
 917         });
 918         checkWMTE(() -&gt; { // value reference class
 919             byte x = (byte) vh.getAndBitwiseXor(recv, Void.class);
 920         });
 921         checkWMTE(() -&gt; { // reciever primitive class
 922             byte x = (byte) vh.getAndBitwiseXor(0, (byte)0x01);
 923         });
 924         // Incorrect return type
 925         checkWMTE(() -&gt; { // reference class
 926             Void r = (Void) vh.getAndBitwiseXor(recv, (byte)0x01);
 927         });
 928         checkWMTE(() -&gt; { // primitive class
 929             boolean x = (boolean) vh.getAndBitwiseXor(recv, (byte)0x01);
 930         });
 931         // Incorrect arity
 932         checkWMTE(() -&gt; { // 0
 933             byte x = (byte) vh.getAndBitwiseXor();
 934         });
 935         checkWMTE(() -&gt; { // &gt;
 936             byte x = (byte) vh.getAndBitwiseXor(recv, (byte)0x01, Void.class);
 937         });
 938 
 939 
 940         // GetAndBitwiseXorAcquire
 941         // Incorrect argument types
 942         checkNPE(() -&gt; { // null receiver
 943             byte x = (byte) vh.getAndBitwiseXorAcquire(null, (byte)0x01);
 944         });
 945         checkCCE(() -&gt; { // receiver reference class
 946             byte x = (byte) vh.getAndBitwiseXorAcquire(Void.class, (byte)0x01);
 947         });
 948         checkWMTE(() -&gt; { // value reference class
 949             byte x = (byte) vh.getAndBitwiseXorAcquire(recv, Void.class);
 950         });
 951         checkWMTE(() -&gt; { // reciever primitive class
 952             byte x = (byte) vh.getAndBitwiseXorAcquire(0, (byte)0x01);
 953         });
 954         // Incorrect return type
 955         checkWMTE(() -&gt; { // reference class
 956             Void r = (Void) vh.getAndBitwiseXorAcquire(recv, (byte)0x01);
 957         });
 958         checkWMTE(() -&gt; { // primitive class
 959             boolean x = (boolean) vh.getAndBitwiseXorAcquire(recv, (byte)0x01);
 960         });
 961         // Incorrect arity
 962         checkWMTE(() -&gt; { // 0
 963             byte x = (byte) vh.getAndBitwiseXorAcquire();
 964         });
 965         checkWMTE(() -&gt; { // &gt;
 966             byte x = (byte) vh.getAndBitwiseXorAcquire(recv, (byte)0x01, Void.class);
 967         });
 968 
 969 
 970         // GetAndBitwiseXorRelease
 971         // Incorrect argument types
 972         checkNPE(() -&gt; { // null receiver
 973             byte x = (byte) vh.getAndBitwiseXorRelease(null, (byte)0x01);
 974         });
 975         checkCCE(() -&gt; { // receiver reference class
 976             byte x = (byte) vh.getAndBitwiseXor(Void.class, (byte)0x01);
 977         });
 978         checkWMTE(() -&gt; { // value reference class
 979             byte x = (byte) vh.getAndBitwiseXor(recv, Void.class);
 980         });
 981         checkWMTE(() -&gt; { // reciever primitive class
 982             byte x = (byte) vh.getAndBitwiseXor(0, (byte)0x01);
 983         });
 984         // Incorrect return type
 985         checkWMTE(() -&gt; { // reference class
 986             Void r = (Void) vh.getAndBitwiseXor(recv, (byte)0x01);
 987         });
 988         checkWMTE(() -&gt; { // primitive class
 989             boolean x = (boolean) vh.getAndBitwiseXor(recv, (byte)0x01);
 990         });
 991         // Incorrect arity
 992         checkWMTE(() -&gt; { // 0
 993             byte x = (byte) vh.getAndBitwiseXor();
 994         });
 995         checkWMTE(() -&gt; { // &gt;
 996             byte x = (byte) vh.getAndBitwiseXor(recv, (byte)0x01, Void.class);
 997         });
 998     }
 999 
1000     static void testInstanceFieldWrongMethodType(VarHandleTestMethodTypeByte recv, Handles hs) throws Throwable {
1001         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET)) {
1002             // Incorrect argument types
1003             checkNPE(() -&gt; { // null receiver
1004                 byte x = (byte) hs.get(am, methodType(byte.class, VarHandleTestMethodTypeByte.class)).
1005                     invokeExact((VarHandleTestMethodTypeByte) null);
1006             });
1007             hs.checkWMTEOrCCE(() -&gt; { // receiver reference class
1008                 byte x = (byte) hs.get(am, methodType(byte.class, Class.class)).
1009                     invokeExact(Void.class);
1010             });
1011             checkWMTE(() -&gt; { // receiver primitive class
1012                 byte x = (byte) hs.get(am, methodType(byte.class, int.class)).
1013                     invokeExact(0);
1014             });
1015             // Incorrect return type
1016             checkWMTE(() -&gt; { // reference class
1017                 Void x = (Void) hs.get(am, methodType(Void.class, VarHandleTestMethodTypeByte.class)).
1018                     invokeExact(recv);
1019             });
1020             checkWMTE(() -&gt; { // primitive class
1021                 boolean x = (boolean) hs.get(am, methodType(boolean.class, VarHandleTestMethodTypeByte.class)).
1022                     invokeExact(recv);
1023             });
1024             // Incorrect arity
1025             checkWMTE(() -&gt; { // 0
1026                 byte x = (byte) hs.get(am, methodType(byte.class)).
1027                     invokeExact();
1028             });
1029             checkWMTE(() -&gt; { // &gt;
1030                 byte x = (byte) hs.get(am, methodType(byte.class, VarHandleTestMethodTypeByte.class, Class.class)).
1031                     invokeExact(recv, Void.class);
1032             });
1033         }
1034 
1035         for (TestAccessMode am : testAccessModesOfType(TestAccessType.SET)) {
1036             // Incorrect argument types
1037             checkNPE(() -&gt; { // null receiver
1038                 hs.get(am, methodType(void.class, VarHandleTestMethodTypeByte.class, byte.class)).
1039                     invokeExact((VarHandleTestMethodTypeByte) null, (byte)0x01);
1040             });
1041             hs.checkWMTEOrCCE(() -&gt; { // receiver reference class
1042                 hs.get(am, methodType(void.class, Class.class, byte.class)).
1043                     invokeExact(Void.class, (byte)0x01);
1044             });
1045             checkWMTE(() -&gt; { // value reference class
1046                 hs.get(am, methodType(void.class, VarHandleTestMethodTypeByte.class, Class.class)).
1047                     invokeExact(recv, Void.class);
1048             });
1049             checkWMTE(() -&gt; { // receiver primitive class
1050                 hs.get(am, methodType(void.class, int.class, byte.class)).
1051                     invokeExact(0, (byte)0x01);
1052             });
1053             // Incorrect arity
1054             checkWMTE(() -&gt; { // 0
1055                 hs.get(am, methodType(void.class)).
1056                     invokeExact();
1057             });
1058             checkWMTE(() -&gt; { // &gt;
1059                 hs.get(am, methodType(void.class, VarHandleTestMethodTypeByte.class, byte.class, Class.class)).
1060                     invokeExact(recv, (byte)0x01, Void.class);
1061             });
1062         }
1063 
1064         for (TestAccessMode am : testAccessModesOfType(TestAccessType.COMPARE_AND_SET)) {
1065             // Incorrect argument types
1066             checkNPE(() -&gt; { // null receiver
1067                 boolean r = (boolean) hs.get(am, methodType(boolean.class, VarHandleTestMethodTypeByte.class, byte.class, byte.class)).
1068                     invokeExact((VarHandleTestMethodTypeByte) null, (byte)0x01, (byte)0x01);
1069             });
1070             hs.checkWMTEOrCCE(() -&gt; { // receiver reference class
1071                 boolean r = (boolean) hs.get(am, methodType(boolean.class, Class.class, byte.class, byte.class)).
1072                     invokeExact(Void.class, (byte)0x01, (byte)0x01);
1073             });
1074             checkWMTE(() -&gt; { // expected reference class
1075                 boolean r = (boolean) hs.get(am, methodType(boolean.class, VarHandleTestMethodTypeByte.class, Class.class, byte.class)).
1076                     invokeExact(recv, Void.class, (byte)0x01);
1077             });
1078             checkWMTE(() -&gt; { // actual reference class
1079                 boolean r = (boolean) hs.get(am, methodType(boolean.class, VarHandleTestMethodTypeByte.class, byte.class, Class.class)).
1080                     invokeExact(recv, (byte)0x01, Void.class);
1081             });
1082             checkWMTE(() -&gt; { // receiver primitive class
1083                 boolean r = (boolean) hs.get(am, methodType(boolean.class, int.class , byte.class, byte.class)).
1084                     invokeExact(0, (byte)0x01, (byte)0x01);
1085             });
1086             // Incorrect arity
1087             checkWMTE(() -&gt; { // 0
1088                 boolean r = (boolean) hs.get(am, methodType(boolean.class)).
1089                     invokeExact();
1090             });
1091             checkWMTE(() -&gt; { // &gt;
1092                 boolean r = (boolean) hs.get(am, methodType(boolean.class, VarHandleTestMethodTypeByte.class, byte.class, byte.class, Class.class)).
1093                     invokeExact(recv, (byte)0x01, (byte)0x01, Void.class);
1094             });
1095         }
1096 
1097         for (TestAccessMode am : testAccessModesOfType(TestAccessType.COMPARE_AND_EXCHANGE)) {
1098             checkNPE(() -&gt; { // null receiver
1099                 byte x = (byte) hs.get(am, methodType(byte.class, VarHandleTestMethodTypeByte.class, byte.class, byte.class)).
1100                     invokeExact((VarHandleTestMethodTypeByte) null, (byte)0x01, (byte)0x01);
1101             });
1102             hs.checkWMTEOrCCE(() -&gt; { // receiver reference class
1103                 byte x = (byte) hs.get(am, methodType(byte.class, Class.class, byte.class, byte.class)).
1104                     invokeExact(Void.class, (byte)0x01, (byte)0x01);
1105             });
1106             checkWMTE(() -&gt; { // expected reference class
1107                 byte x = (byte) hs.get(am, methodType(byte.class, VarHandleTestMethodTypeByte.class, Class.class, byte.class)).
1108                     invokeExact(recv, Void.class, (byte)0x01);
1109             });
1110             checkWMTE(() -&gt; { // actual reference class
1111                 byte x = (byte) hs.get(am, methodType(byte.class, VarHandleTestMethodTypeByte.class, byte.class, Class.class)).
1112                     invokeExact(recv, (byte)0x01, Void.class);
1113             });
1114             checkWMTE(() -&gt; { // reciever primitive class
1115                 byte x = (byte) hs.get(am, methodType(byte.class, int.class , byte.class, byte.class)).
1116                     invokeExact(0, (byte)0x01, (byte)0x01);
1117             });
1118             // Incorrect return type
1119             checkWMTE(() -&gt; { // reference class
1120                 Void r = (Void) hs.get(am, methodType(Void.class, VarHandleTestMethodTypeByte.class , byte.class, byte.class)).
1121                     invokeExact(recv, (byte)0x01, (byte)0x01);
1122             });
1123             checkWMTE(() -&gt; { // primitive class
1124                 boolean x = (boolean) hs.get(am, methodType(boolean.class, VarHandleTestMethodTypeByte.class , byte.class, byte.class)).
1125                     invokeExact(recv, (byte)0x01, (byte)0x01);
1126             });
1127             // Incorrect arity
1128             checkWMTE(() -&gt; { // 0
1129                 byte x = (byte) hs.get(am, methodType(byte.class)).
1130                     invokeExact();
1131             });
1132             checkWMTE(() -&gt; { // &gt;
1133                 byte x = (byte) hs.get(am, methodType(byte.class, VarHandleTestMethodTypeByte.class, byte.class, byte.class, Class.class)).
1134                     invokeExact(recv, (byte)0x01, (byte)0x01, Void.class);
1135             });
1136         }
1137 
1138         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET_AND_SET)) {
1139             checkNPE(() -&gt; { // null receiver
1140                 byte x = (byte) hs.get(am, methodType(byte.class, VarHandleTestMethodTypeByte.class, byte.class)).
1141                     invokeExact((VarHandleTestMethodTypeByte) null, (byte)0x01);
1142             });
1143             hs.checkWMTEOrCCE(() -&gt; { // receiver reference class
1144                 byte x = (byte) hs.get(am, methodType(byte.class, Class.class, byte.class)).
1145                     invokeExact(Void.class, (byte)0x01);
1146             });
1147             checkWMTE(() -&gt; { // value reference class
1148                 byte x = (byte) hs.get(am, methodType(byte.class, VarHandleTestMethodTypeByte.class, Class.class)).
1149                     invokeExact(recv, Void.class);
1150             });
1151             checkWMTE(() -&gt; { // reciever primitive class
1152                 byte x = (byte) hs.get(am, methodType(byte.class, int.class, byte.class)).
1153                     invokeExact(0, (byte)0x01);
1154             });
1155             // Incorrect return type
1156             checkWMTE(() -&gt; { // reference class
1157                 Void r = (Void) hs.get(am, methodType(Void.class, VarHandleTestMethodTypeByte.class, byte.class)).
1158                     invokeExact(recv, (byte)0x01);
1159             });
1160             checkWMTE(() -&gt; { // primitive class
1161                 boolean x = (boolean) hs.get(am, methodType(boolean.class, VarHandleTestMethodTypeByte.class, byte.class)).
1162                     invokeExact(recv, (byte)0x01);
1163             });
1164             // Incorrect arity
1165             checkWMTE(() -&gt; { // 0
1166                 byte x = (byte) hs.get(am, methodType(byte.class)).
1167                     invokeExact();
1168             });
1169             checkWMTE(() -&gt; { // &gt;
1170                 byte x = (byte) hs.get(am, methodType(byte.class, VarHandleTestMethodTypeByte.class, byte.class)).
1171                     invokeExact(recv, (byte)0x01, Void.class);
1172             });
1173         }
1174 
1175         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET_AND_ADD)) {
1176             checkNPE(() -&gt; { // null receiver
1177                 byte x = (byte) hs.get(am, methodType(byte.class, VarHandleTestMethodTypeByte.class, byte.class)).
1178                     invokeExact((VarHandleTestMethodTypeByte) null, (byte)0x01);
1179             });
1180             hs.checkWMTEOrCCE(() -&gt; { // receiver reference class
1181                 byte x = (byte) hs.get(am, methodType(byte.class, Class.class, byte.class)).
1182                     invokeExact(Void.class, (byte)0x01);
1183             });
1184             checkWMTE(() -&gt; { // value reference class
1185                 byte x = (byte) hs.get(am, methodType(byte.class, VarHandleTestMethodTypeByte.class, Class.class)).
1186                     invokeExact(recv, Void.class);
1187             });
1188             checkWMTE(() -&gt; { // reciever primitive class
1189                 byte x = (byte) hs.get(am, methodType(byte.class, int.class, byte.class)).
1190                     invokeExact(0, (byte)0x01);
1191             });
1192             // Incorrect return type
1193             checkWMTE(() -&gt; { // reference class
1194                 Void r = (Void) hs.get(am, methodType(Void.class, VarHandleTestMethodTypeByte.class, byte.class)).
1195                     invokeExact(recv, (byte)0x01);
1196             });
1197             checkWMTE(() -&gt; { // primitive class
1198                 boolean x = (boolean) hs.get(am, methodType(boolean.class, VarHandleTestMethodTypeByte.class, byte.class)).
1199                     invokeExact(recv, (byte)0x01);
1200             });
1201             // Incorrect arity
1202             checkWMTE(() -&gt; { // 0
1203                 byte x = (byte) hs.get(am, methodType(byte.class)).
1204                     invokeExact();
1205             });
1206             checkWMTE(() -&gt; { // &gt;
1207                 byte x = (byte) hs.get(am, methodType(byte.class, VarHandleTestMethodTypeByte.class, byte.class)).
1208                     invokeExact(recv, (byte)0x01, Void.class);
1209             });
1210         }
1211 
1212         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET_AND_BITWISE)) {
1213             checkNPE(() -&gt; { // null receiver
1214                 byte x = (byte) hs.get(am, methodType(byte.class, VarHandleTestMethodTypeByte.class, byte.class)).
1215                     invokeExact((VarHandleTestMethodTypeByte) null, (byte)0x01);
1216             });
1217             hs.checkWMTEOrCCE(() -&gt; { // receiver reference class
1218                 byte x = (byte) hs.get(am, methodType(byte.class, Class.class, byte.class)).
1219                     invokeExact(Void.class, (byte)0x01);
1220             });
1221             checkWMTE(() -&gt; { // value reference class
1222                 byte x = (byte) hs.get(am, methodType(byte.class, VarHandleTestMethodTypeByte.class, Class.class)).
1223                     invokeExact(recv, Void.class);
1224             });
1225             checkWMTE(() -&gt; { // reciever primitive class
1226                 byte x = (byte) hs.get(am, methodType(byte.class, int.class, byte.class)).
1227                     invokeExact(0, (byte)0x01);
1228             });
1229             // Incorrect return type
1230             checkWMTE(() -&gt; { // reference class
1231                 Void r = (Void) hs.get(am, methodType(Void.class, VarHandleTestMethodTypeByte.class, byte.class)).
1232                     invokeExact(recv, (byte)0x01);
1233             });
1234             checkWMTE(() -&gt; { // primitive class
1235                 boolean x = (boolean) hs.get(am, methodType(boolean.class, VarHandleTestMethodTypeByte.class, byte.class)).
1236                     invokeExact(recv, (byte)0x01);
1237             });
1238             // Incorrect arity
1239             checkWMTE(() -&gt; { // 0
1240                 byte x = (byte) hs.get(am, methodType(byte.class)).
1241                     invokeExact();
1242             });
1243             checkWMTE(() -&gt; { // &gt;
1244                 byte x = (byte) hs.get(am, methodType(byte.class, VarHandleTestMethodTypeByte.class, byte.class)).
1245                     invokeExact(recv, (byte)0x01, Void.class);
1246             });
1247         }
1248     }
1249 
1250 
1251     static void testStaticFieldWrongMethodType(VarHandle vh) throws Throwable {
1252         // Get
1253         // Incorrect return type
1254         checkWMTE(() -&gt; { // reference class
1255             Void x = (Void) vh.get();
1256         });
1257         checkWMTE(() -&gt; { // primitive class
1258             boolean x = (boolean) vh.get();
1259         });
1260         // Incorrect arity
1261         checkWMTE(() -&gt; { // &gt;
1262             byte x = (byte) vh.get(Void.class);
1263         });
1264 
1265 
1266         // Set
1267         // Incorrect argument types
1268         checkWMTE(() -&gt; { // value reference class
1269             vh.set(Void.class);
1270         });
1271         // Incorrect arity
1272         checkWMTE(() -&gt; { // 0
1273             vh.set();
1274         });
1275         checkWMTE(() -&gt; { // &gt;
1276             vh.set((byte)0x01, Void.class);
1277         });
1278 
1279 
1280         // GetVolatile
1281         // Incorrect return type
1282         checkWMTE(() -&gt; { // reference class
1283             Void x = (Void) vh.getVolatile();
1284         });
1285         checkWMTE(() -&gt; { // primitive class
1286             boolean x = (boolean) vh.getVolatile();
1287         });
1288         checkWMTE(() -&gt; { // &gt;
1289             byte x = (byte) vh.getVolatile(Void.class);
1290         });
1291 
1292 
1293         // SetVolatile
1294         // Incorrect argument types
1295         checkWMTE(() -&gt; { // value reference class
1296             vh.setVolatile(Void.class);
1297         });
1298         // Incorrect arity
1299         checkWMTE(() -&gt; { // 0
1300             vh.setVolatile();
1301         });
1302         checkWMTE(() -&gt; { // &gt;
1303             vh.setVolatile((byte)0x01, Void.class);
1304         });
1305 
1306 
1307         // GetOpaque
1308         // Incorrect return type
1309         checkWMTE(() -&gt; { // reference class
1310             Void x = (Void) vh.getOpaque();
1311         });
1312         checkWMTE(() -&gt; { // primitive class
1313             boolean x = (boolean) vh.getOpaque();
1314         });
1315         checkWMTE(() -&gt; { // &gt;
1316             byte x = (byte) vh.getOpaque(Void.class);
1317         });
1318 
1319 
1320         // SetOpaque
1321         // Incorrect argument types
1322         checkWMTE(() -&gt; { // value reference class
1323             vh.setOpaque(Void.class);
1324         });
1325         // Incorrect arity
1326         checkWMTE(() -&gt; { // 0
1327             vh.setOpaque();
1328         });
1329         checkWMTE(() -&gt; { // &gt;
1330             vh.setOpaque((byte)0x01, Void.class);
1331         });
1332 
1333 
1334         // GetAcquire
1335         // Incorrect return type
1336         checkWMTE(() -&gt; { // reference class
1337             Void x = (Void) vh.getAcquire();
1338         });
1339         checkWMTE(() -&gt; { // primitive class
1340             boolean x = (boolean) vh.getAcquire();
1341         });
1342         checkWMTE(() -&gt; { // &gt;
1343             byte x = (byte) vh.getAcquire(Void.class);
1344         });
1345 
1346 
1347         // SetRelease
1348         // Incorrect argument types
1349         checkWMTE(() -&gt; { // value reference class
1350             vh.setRelease(Void.class);
1351         });
1352         // Incorrect arity
1353         checkWMTE(() -&gt; { // 0
1354             vh.setRelease();
1355         });
1356         checkWMTE(() -&gt; { // &gt;
1357             vh.setRelease((byte)0x01, Void.class);
1358         });
1359 
1360 
1361         // CompareAndSet
1362         // Incorrect argument types
1363         checkWMTE(() -&gt; { // expected reference class
1364             boolean r = vh.compareAndSet(Void.class, (byte)0x01);
1365         });
1366         checkWMTE(() -&gt; { // actual reference class
1367             boolean r = vh.compareAndSet((byte)0x01, Void.class);
1368         });
1369         // Incorrect arity
1370         checkWMTE(() -&gt; { // 0
1371             boolean r = vh.compareAndSet();
1372         });
1373         checkWMTE(() -&gt; { // &gt;
1374             boolean r = vh.compareAndSet((byte)0x01, (byte)0x01, Void.class);
1375         });
1376 
1377 
1378         // WeakCompareAndSet
1379         // Incorrect argument types
1380         checkWMTE(() -&gt; { // expected reference class
1381             boolean r = vh.weakCompareAndSetPlain(Void.class, (byte)0x01);
1382         });
1383         checkWMTE(() -&gt; { // actual reference class
1384             boolean r = vh.weakCompareAndSetPlain((byte)0x01, Void.class);
1385         });
1386         // Incorrect arity
1387         checkWMTE(() -&gt; { // 0
1388             boolean r = vh.weakCompareAndSetPlain();
1389         });
1390         checkWMTE(() -&gt; { // &gt;
1391             boolean r = vh.weakCompareAndSetPlain((byte)0x01, (byte)0x01, Void.class);
1392         });
1393 
1394 
1395         // WeakCompareAndSetVolatile
1396         // Incorrect argument types
1397         checkWMTE(() -&gt; { // expected reference class
1398             boolean r = vh.weakCompareAndSet(Void.class, (byte)0x01);
1399         });
1400         checkWMTE(() -&gt; { // actual reference class
1401             boolean r = vh.weakCompareAndSet((byte)0x01, Void.class);
1402         });
1403         // Incorrect arity
1404         checkWMTE(() -&gt; { // 0
1405             boolean r = vh.weakCompareAndSet();
1406         });
1407         checkWMTE(() -&gt; { // &gt;
1408             boolean r = vh.weakCompareAndSet((byte)0x01, (byte)0x01, Void.class);
1409         });
1410 
1411 
1412         // WeakCompareAndSetAcquire
1413         // Incorrect argument types
1414         checkWMTE(() -&gt; { // expected reference class
1415             boolean r = vh.weakCompareAndSetAcquire(Void.class, (byte)0x01);
1416         });
1417         checkWMTE(() -&gt; { // actual reference class
1418             boolean r = vh.weakCompareAndSetAcquire((byte)0x01, Void.class);
1419         });
1420         // Incorrect arity
1421         checkWMTE(() -&gt; { // 0
1422             boolean r = vh.weakCompareAndSetAcquire();
1423         });
1424         checkWMTE(() -&gt; { // &gt;
1425             boolean r = vh.weakCompareAndSetAcquire((byte)0x01, (byte)0x01, Void.class);
1426         });
1427 
1428 
1429         // WeakCompareAndSetRelease
1430         // Incorrect argument types
1431         checkWMTE(() -&gt; { // expected reference class
1432             boolean r = vh.weakCompareAndSetRelease(Void.class, (byte)0x01);
1433         });
1434         checkWMTE(() -&gt; { // actual reference class
1435             boolean r = vh.weakCompareAndSetRelease((byte)0x01, Void.class);
1436         });
1437         // Incorrect arity
1438         checkWMTE(() -&gt; { // 0
1439             boolean r = vh.weakCompareAndSetRelease();
1440         });
1441         checkWMTE(() -&gt; { // &gt;
1442             boolean r = vh.weakCompareAndSetRelease((byte)0x01, (byte)0x01, Void.class);
1443         });
1444 
1445 
1446         // CompareAndExchange
1447         // Incorrect argument types
1448         checkWMTE(() -&gt; { // expected reference class
1449             byte x = (byte) vh.compareAndExchange(Void.class, (byte)0x01);
1450         });
1451         checkWMTE(() -&gt; { // actual reference class
1452             byte x = (byte) vh.compareAndExchange((byte)0x01, Void.class);
1453         });
1454         // Incorrect return type
1455         checkWMTE(() -&gt; { // reference class
1456             Void r = (Void) vh.compareAndExchange((byte)0x01, (byte)0x01);
1457         });
1458         checkWMTE(() -&gt; { // primitive class
1459             boolean x = (boolean) vh.compareAndExchange((byte)0x01, (byte)0x01);
1460         });
1461         // Incorrect arity
1462         checkWMTE(() -&gt; { // 0
1463             byte x = (byte) vh.compareAndExchange();
1464         });
1465         checkWMTE(() -&gt; { // &gt;
1466             byte x = (byte) vh.compareAndExchange((byte)0x01, (byte)0x01, Void.class);
1467         });
1468 
1469 
1470         // CompareAndExchangeAcquire
1471         // Incorrect argument types
1472         checkWMTE(() -&gt; { // expected reference class
1473             byte x = (byte) vh.compareAndExchangeAcquire(Void.class, (byte)0x01);
1474         });
1475         checkWMTE(() -&gt; { // actual reference class
1476             byte x = (byte) vh.compareAndExchangeAcquire((byte)0x01, Void.class);
1477         });
1478         // Incorrect return type
1479         checkWMTE(() -&gt; { // reference class
1480             Void r = (Void) vh.compareAndExchangeAcquire((byte)0x01, (byte)0x01);
1481         });
1482         checkWMTE(() -&gt; { // primitive class
1483             boolean x = (boolean) vh.compareAndExchangeAcquire((byte)0x01, (byte)0x01);
1484         });
1485         // Incorrect arity
1486         checkWMTE(() -&gt; { // 0
1487             byte x = (byte) vh.compareAndExchangeAcquire();
1488         });
1489         checkWMTE(() -&gt; { // &gt;
1490             byte x = (byte) vh.compareAndExchangeAcquire((byte)0x01, (byte)0x01, Void.class);
1491         });
1492 
1493 
1494         // CompareAndExchangeRelease
1495         // Incorrect argument types
1496         checkWMTE(() -&gt; { // expected reference class
1497             byte x = (byte) vh.compareAndExchangeRelease(Void.class, (byte)0x01);
1498         });
1499         checkWMTE(() -&gt; { // actual reference class
1500             byte x = (byte) vh.compareAndExchangeRelease((byte)0x01, Void.class);
1501         });
1502         // Incorrect return type
1503         checkWMTE(() -&gt; { // reference class
1504             Void r = (Void) vh.compareAndExchangeRelease((byte)0x01, (byte)0x01);
1505         });
1506         checkWMTE(() -&gt; { // primitive class
1507             boolean x = (boolean) vh.compareAndExchangeRelease((byte)0x01, (byte)0x01);
1508         });
1509         // Incorrect arity
1510         checkWMTE(() -&gt; { // 0
1511             byte x = (byte) vh.compareAndExchangeRelease();
1512         });
1513         checkWMTE(() -&gt; { // &gt;
1514             byte x = (byte) vh.compareAndExchangeRelease((byte)0x01, (byte)0x01, Void.class);
1515         });
1516 
1517 
1518         // GetAndSet
1519         // Incorrect argument types
1520         checkWMTE(() -&gt; { // value reference class
1521             byte x = (byte) vh.getAndSet(Void.class);
1522         });
1523         // Incorrect return type
1524         checkWMTE(() -&gt; { // reference class
1525             Void r = (Void) vh.getAndSet((byte)0x01);
1526         });
1527         checkWMTE(() -&gt; { // primitive class
1528             boolean x = (boolean) vh.getAndSet((byte)0x01);
1529         });
1530         // Incorrect arity
1531         checkWMTE(() -&gt; { // 0
1532             byte x = (byte) vh.getAndSet();
1533         });
1534         checkWMTE(() -&gt; { // &gt;
1535             byte x = (byte) vh.getAndSet((byte)0x01, Void.class);
1536         });
1537 
1538 
1539         // GetAndSetAcquire
1540         // Incorrect argument types
1541         checkWMTE(() -&gt; { // value reference class
1542             byte x = (byte) vh.getAndSetAcquire(Void.class);
1543         });
1544         // Incorrect return type
1545         checkWMTE(() -&gt; { // reference class
1546             Void r = (Void) vh.getAndSetAcquire((byte)0x01);
1547         });
1548         checkWMTE(() -&gt; { // primitive class
1549             boolean x = (boolean) vh.getAndSetAcquire((byte)0x01);
1550         });
1551         // Incorrect arity
1552         checkWMTE(() -&gt; { // 0
1553             byte x = (byte) vh.getAndSetAcquire();
1554         });
1555         checkWMTE(() -&gt; { // &gt;
1556             byte x = (byte) vh.getAndSetAcquire((byte)0x01, Void.class);
1557         });
1558 
1559 
1560         // GetAndSetRelease
1561         // Incorrect argument types
1562         checkWMTE(() -&gt; { // value reference class
1563             byte x = (byte) vh.getAndSetRelease(Void.class);
1564         });
1565         // Incorrect return type
1566         checkWMTE(() -&gt; { // reference class
1567             Void r = (Void) vh.getAndSetRelease((byte)0x01);
1568         });
1569         checkWMTE(() -&gt; { // primitive class
1570             boolean x = (boolean) vh.getAndSetRelease((byte)0x01);
1571         });
1572         // Incorrect arity
1573         checkWMTE(() -&gt; { // 0
1574             byte x = (byte) vh.getAndSetRelease();
1575         });
1576         checkWMTE(() -&gt; { // &gt;
1577             byte x = (byte) vh.getAndSetRelease((byte)0x01, Void.class);
1578         });
1579 
1580         // GetAndAdd
1581         // Incorrect argument types
1582         checkWMTE(() -&gt; { // value reference class
1583             byte x = (byte) vh.getAndAdd(Void.class);
1584         });
1585         // Incorrect return type
1586         checkWMTE(() -&gt; { // reference class
1587             Void r = (Void) vh.getAndAdd((byte)0x01);
1588         });
1589         checkWMTE(() -&gt; { // primitive class
1590             boolean x = (boolean) vh.getAndAdd((byte)0x01);
1591         });
1592         // Incorrect arity
1593         checkWMTE(() -&gt; { // 0
1594             byte x = (byte) vh.getAndAdd();
1595         });
1596         checkWMTE(() -&gt; { // &gt;
1597             byte x = (byte) vh.getAndAdd((byte)0x01, Void.class);
1598         });
1599 
1600 
1601         // GetAndAddAcquire
1602         // Incorrect argument types
1603         checkWMTE(() -&gt; { // value reference class
1604             byte x = (byte) vh.getAndAddAcquire(Void.class);
1605         });
1606         // Incorrect return type
1607         checkWMTE(() -&gt; { // reference class
1608             Void r = (Void) vh.getAndAddAcquire((byte)0x01);
1609         });
1610         checkWMTE(() -&gt; { // primitive class
1611             boolean x = (boolean) vh.getAndAddAcquire((byte)0x01);
1612         });
1613         // Incorrect arity
1614         checkWMTE(() -&gt; { // 0
1615             byte x = (byte) vh.getAndAddAcquire();
1616         });
1617         checkWMTE(() -&gt; { // &gt;
1618             byte x = (byte) vh.getAndAddAcquire((byte)0x01, Void.class);
1619         });
1620 
1621 
1622         // GetAndAddRelease
1623         // Incorrect argument types
1624         checkWMTE(() -&gt; { // value reference class
1625             byte x = (byte) vh.getAndAddRelease(Void.class);
1626         });
1627         // Incorrect return type
1628         checkWMTE(() -&gt; { // reference class
1629             Void r = (Void) vh.getAndAddRelease((byte)0x01);
1630         });
1631         checkWMTE(() -&gt; { // primitive class
1632             boolean x = (boolean) vh.getAndAddRelease((byte)0x01);
1633         });
1634         // Incorrect arity
1635         checkWMTE(() -&gt; { // 0
1636             byte x = (byte) vh.getAndAddRelease();
1637         });
1638         checkWMTE(() -&gt; { // &gt;
1639             byte x = (byte) vh.getAndAddRelease((byte)0x01, Void.class);
1640         });
1641 
1642         // GetAndBitwiseOr
1643         // Incorrect argument types
1644         checkWMTE(() -&gt; { // value reference class
1645             byte x = (byte) vh.getAndBitwiseOr(Void.class);
1646         });
1647         // Incorrect return type
1648         checkWMTE(() -&gt; { // reference class
1649             Void r = (Void) vh.getAndBitwiseOr((byte)0x01);
1650         });
1651         checkWMTE(() -&gt; { // primitive class
1652             boolean x = (boolean) vh.getAndBitwiseOr((byte)0x01);
1653         });
1654         // Incorrect arity
1655         checkWMTE(() -&gt; { // 0
1656             byte x = (byte) vh.getAndBitwiseOr();
1657         });
1658         checkWMTE(() -&gt; { // &gt;
1659             byte x = (byte) vh.getAndBitwiseOr((byte)0x01, Void.class);
1660         });
1661 
1662 
1663         // GetAndBitwiseOrAcquire
1664         // Incorrect argument types
1665         checkWMTE(() -&gt; { // value reference class
1666             byte x = (byte) vh.getAndBitwiseOrAcquire(Void.class);
1667         });
1668         // Incorrect return type
1669         checkWMTE(() -&gt; { // reference class
1670             Void r = (Void) vh.getAndBitwiseOrAcquire((byte)0x01);
1671         });
1672         checkWMTE(() -&gt; { // primitive class
1673             boolean x = (boolean) vh.getAndBitwiseOrAcquire((byte)0x01);
1674         });
1675         // Incorrect arity
1676         checkWMTE(() -&gt; { // 0
1677             byte x = (byte) vh.getAndBitwiseOrAcquire();
1678         });
1679         checkWMTE(() -&gt; { // &gt;
1680             byte x = (byte) vh.getAndBitwiseOrAcquire((byte)0x01, Void.class);
1681         });
1682 
1683 
1684         // GetAndBitwiseOrReleaseRelease
1685         // Incorrect argument types
1686         checkWMTE(() -&gt; { // value reference class
1687             byte x = (byte) vh.getAndBitwiseOrRelease(Void.class);
1688         });
1689         // Incorrect return type
1690         checkWMTE(() -&gt; { // reference class
1691             Void r = (Void) vh.getAndBitwiseOrRelease((byte)0x01);
1692         });
1693         checkWMTE(() -&gt; { // primitive class
1694             boolean x = (boolean) vh.getAndBitwiseOrRelease((byte)0x01);
1695         });
1696         // Incorrect arity
1697         checkWMTE(() -&gt; { // 0
1698             byte x = (byte) vh.getAndBitwiseOrRelease();
1699         });
1700         checkWMTE(() -&gt; { // &gt;
1701             byte x = (byte) vh.getAndBitwiseOrRelease((byte)0x01, Void.class);
1702         });
1703 
1704 
1705         // GetAndBitwiseAnd
1706         // Incorrect argument types
1707         checkWMTE(() -&gt; { // value reference class
1708             byte x = (byte) vh.getAndBitwiseAnd(Void.class);
1709         });
1710         // Incorrect return type
1711         checkWMTE(() -&gt; { // reference class
1712             Void r = (Void) vh.getAndBitwiseAnd((byte)0x01);
1713         });
1714         checkWMTE(() -&gt; { // primitive class
1715             boolean x = (boolean) vh.getAndBitwiseAnd((byte)0x01);
1716         });
1717         // Incorrect arity
1718         checkWMTE(() -&gt; { // 0
1719             byte x = (byte) vh.getAndBitwiseAnd();
1720         });
1721         checkWMTE(() -&gt; { // &gt;
1722             byte x = (byte) vh.getAndBitwiseAnd((byte)0x01, Void.class);
1723         });
1724 
1725 
1726         // GetAndBitwiseAndAcquire
1727         // Incorrect argument types
1728         checkWMTE(() -&gt; { // value reference class
1729             byte x = (byte) vh.getAndBitwiseAndAcquire(Void.class);
1730         });
1731         // Incorrect return type
1732         checkWMTE(() -&gt; { // reference class
1733             Void r = (Void) vh.getAndBitwiseAndAcquire((byte)0x01);
1734         });
1735         checkWMTE(() -&gt; { // primitive class
1736             boolean x = (boolean) vh.getAndBitwiseAndAcquire((byte)0x01);
1737         });
1738         // Incorrect arity
1739         checkWMTE(() -&gt; { // 0
1740             byte x = (byte) vh.getAndBitwiseAndAcquire();
1741         });
1742         checkWMTE(() -&gt; { // &gt;
1743             byte x = (byte) vh.getAndBitwiseAndAcquire((byte)0x01, Void.class);
1744         });
1745 
1746 
1747         // GetAndBitwiseAndReleaseRelease
1748         // Incorrect argument types
1749         checkWMTE(() -&gt; { // value reference class
1750             byte x = (byte) vh.getAndBitwiseAndRelease(Void.class);
1751         });
1752         // Incorrect return type
1753         checkWMTE(() -&gt; { // reference class
1754             Void r = (Void) vh.getAndBitwiseAndRelease((byte)0x01);
1755         });
1756         checkWMTE(() -&gt; { // primitive class
1757             boolean x = (boolean) vh.getAndBitwiseAndRelease((byte)0x01);
1758         });
1759         // Incorrect arity
1760         checkWMTE(() -&gt; { // 0
1761             byte x = (byte) vh.getAndBitwiseAndRelease();
1762         });
1763         checkWMTE(() -&gt; { // &gt;
1764             byte x = (byte) vh.getAndBitwiseAndRelease((byte)0x01, Void.class);
1765         });
1766 
1767 
1768         // GetAndBitwiseXor
1769         // Incorrect argument types
1770         checkWMTE(() -&gt; { // value reference class
1771             byte x = (byte) vh.getAndBitwiseXor(Void.class);
1772         });
1773         // Incorrect return type
1774         checkWMTE(() -&gt; { // reference class
1775             Void r = (Void) vh.getAndBitwiseXor((byte)0x01);
1776         });
1777         checkWMTE(() -&gt; { // primitive class
1778             boolean x = (boolean) vh.getAndBitwiseXor((byte)0x01);
1779         });
1780         // Incorrect arity
1781         checkWMTE(() -&gt; { // 0
1782             byte x = (byte) vh.getAndBitwiseXor();
1783         });
1784         checkWMTE(() -&gt; { // &gt;
1785             byte x = (byte) vh.getAndBitwiseXor((byte)0x01, Void.class);
1786         });
1787 
1788 
1789         // GetAndBitwiseXorAcquire
1790         // Incorrect argument types
1791         checkWMTE(() -&gt; { // value reference class
1792             byte x = (byte) vh.getAndBitwiseXorAcquire(Void.class);
1793         });
1794         // Incorrect return type
1795         checkWMTE(() -&gt; { // reference class
1796             Void r = (Void) vh.getAndBitwiseXorAcquire((byte)0x01);
1797         });
1798         checkWMTE(() -&gt; { // primitive class
1799             boolean x = (boolean) vh.getAndBitwiseXorAcquire((byte)0x01);
1800         });
1801         // Incorrect arity
1802         checkWMTE(() -&gt; { // 0
1803             byte x = (byte) vh.getAndBitwiseXorAcquire();
1804         });
1805         checkWMTE(() -&gt; { // &gt;
1806             byte x = (byte) vh.getAndBitwiseXorAcquire((byte)0x01, Void.class);
1807         });
1808 
1809 
1810         // GetAndBitwiseXorReleaseRelease
1811         // Incorrect argument types
1812         checkWMTE(() -&gt; { // value reference class
1813             byte x = (byte) vh.getAndBitwiseXorRelease(Void.class);
1814         });
1815         // Incorrect return type
1816         checkWMTE(() -&gt; { // reference class
1817             Void r = (Void) vh.getAndBitwiseXorRelease((byte)0x01);
1818         });
1819         checkWMTE(() -&gt; { // primitive class
1820             boolean x = (boolean) vh.getAndBitwiseXorRelease((byte)0x01);
1821         });
1822         // Incorrect arity
1823         checkWMTE(() -&gt; { // 0
1824             byte x = (byte) vh.getAndBitwiseXorRelease();
1825         });
1826         checkWMTE(() -&gt; { // &gt;
1827             byte x = (byte) vh.getAndBitwiseXorRelease((byte)0x01, Void.class);
1828         });
1829     }
1830 
1831     static void testStaticFieldWrongMethodType(Handles hs) throws Throwable {
1832         int i = 0;
1833 
1834         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET)) {
1835             // Incorrect return type
1836             checkWMTE(() -&gt; { // reference class
1837                 Void x = (Void) hs.get(am, methodType(Void.class)).
1838                     invokeExact();
1839             });
1840             checkWMTE(() -&gt; { // primitive class
1841                 boolean x = (boolean) hs.get(am, methodType(boolean.class)).
1842                     invokeExact();
1843             });
1844             // Incorrect arity
1845             checkWMTE(() -&gt; { // &gt;
1846                 byte x = (byte) hs.get(am, methodType(Class.class)).
1847                     invokeExact(Void.class);
1848             });
1849         }
1850 
1851         for (TestAccessMode am : testAccessModesOfType(TestAccessType.SET)) {
1852             checkWMTE(() -&gt; { // value reference class
1853                 hs.get(am, methodType(void.class, Class.class)).
1854                     invokeExact(Void.class);
1855             });
1856             // Incorrect arity
1857             checkWMTE(() -&gt; { // 0
1858                 hs.get(am, methodType(void.class)).
1859                     invokeExact();
1860             });
1861             checkWMTE(() -&gt; { // &gt;
1862                 hs.get(am, methodType(void.class, byte.class, Class.class)).
1863                     invokeExact((byte)0x01, Void.class);
1864             });
1865         }
1866         for (TestAccessMode am : testAccessModesOfType(TestAccessType.COMPARE_AND_SET)) {
1867             // Incorrect argument types
1868             checkWMTE(() -&gt; { // expected reference class
1869                 boolean r = (boolean) hs.get(am, methodType(boolean.class, Class.class, byte.class)).
1870                     invokeExact(Void.class, (byte)0x01);
1871             });
1872             checkWMTE(() -&gt; { // actual reference class
1873                 boolean r = (boolean) hs.get(am, methodType(boolean.class, byte.class, Class.class)).
1874                     invokeExact((byte)0x01, Void.class);
1875             });
1876             // Incorrect arity
1877             checkWMTE(() -&gt; { // 0
1878                 boolean r = (boolean) hs.get(am, methodType(boolean.class)).
1879                     invokeExact();
1880             });
1881             checkWMTE(() -&gt; { // &gt;
1882                 boolean r = (boolean) hs.get(am, methodType(boolean.class, byte.class, byte.class, Class.class)).
1883                     invokeExact((byte)0x01, (byte)0x01, Void.class);
1884             });
1885         }
1886 
1887         for (TestAccessMode am : testAccessModesOfType(TestAccessType.COMPARE_AND_EXCHANGE)) {
1888             // Incorrect argument types
1889             checkWMTE(() -&gt; { // expected reference class
1890                 byte x = (byte) hs.get(am, methodType(byte.class, Class.class, byte.class)).
1891                     invokeExact(Void.class, (byte)0x01);
1892             });
1893             checkWMTE(() -&gt; { // actual reference class
1894                 byte x = (byte) hs.get(am, methodType(byte.class, byte.class, Class.class)).
1895                     invokeExact((byte)0x01, Void.class);
1896             });
1897             // Incorrect return type
1898             checkWMTE(() -&gt; { // reference class
1899                 Void r = (Void) hs.get(am, methodType(Void.class, byte.class, byte.class)).
1900                     invokeExact((byte)0x01, (byte)0x01);
1901             });
1902             checkWMTE(() -&gt; { // primitive class
1903                 boolean x = (boolean) hs.get(am, methodType(boolean.class, byte.class, byte.class)).
1904                     invokeExact((byte)0x01, (byte)0x01);
1905             });
1906             // Incorrect arity
1907             checkWMTE(() -&gt; { // 0
1908                 byte x = (byte) hs.get(am, methodType(byte.class)).
1909                     invokeExact();
1910             });
1911             checkWMTE(() -&gt; { // &gt;
1912                 byte x = (byte) hs.get(am, methodType(byte.class, byte.class, byte.class, Class.class)).
1913                     invokeExact((byte)0x01, (byte)0x01, Void.class);
1914             });
1915         }
1916 
1917         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET_AND_SET)) {
1918             // Incorrect argument types
1919             checkWMTE(() -&gt; { // value reference class
1920                 byte x = (byte) hs.get(am, methodType(byte.class, Class.class)).
1921                     invokeExact(Void.class);
1922             });
1923             // Incorrect return type
1924             checkWMTE(() -&gt; { // reference class
1925                 Void r = (Void) hs.get(am, methodType(Void.class, byte.class)).
1926                     invokeExact((byte)0x01);
1927             });
1928             checkWMTE(() -&gt; { // primitive class
1929                 boolean x = (boolean) hs.get(am, methodType(boolean.class, byte.class)).
1930                     invokeExact((byte)0x01);
1931             });
1932             // Incorrect arity
1933             checkWMTE(() -&gt; { // 0
1934                 byte x = (byte) hs.get(am, methodType(byte.class)).
1935                     invokeExact();
1936             });
1937             checkWMTE(() -&gt; { // &gt;
1938                 byte x = (byte) hs.get(am, methodType(byte.class, byte.class, Class.class)).
1939                     invokeExact((byte)0x01, Void.class);
1940             });
1941         }
1942 
1943         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET_AND_ADD)) {
1944             // Incorrect argument types
1945             checkWMTE(() -&gt; { // value reference class
1946                 byte x = (byte) hs.get(am, methodType(byte.class, Class.class)).
1947                     invokeExact(Void.class);
1948             });
1949             // Incorrect return type
1950             checkWMTE(() -&gt; { // reference class
1951                 Void r = (Void) hs.get(am, methodType(Void.class, byte.class)).
1952                     invokeExact((byte)0x01);
1953             });
1954             checkWMTE(() -&gt; { // primitive class
1955                 boolean x = (boolean) hs.get(am, methodType(boolean.class, byte.class)).
1956                     invokeExact((byte)0x01);
1957             });
1958             // Incorrect arity
1959             checkWMTE(() -&gt; { // 0
1960                 byte x = (byte) hs.get(am, methodType(byte.class)).
1961                     invokeExact();
1962             });
1963             checkWMTE(() -&gt; { // &gt;
1964                 byte x = (byte) hs.get(am, methodType(byte.class, byte.class, Class.class)).
1965                     invokeExact((byte)0x01, Void.class);
1966             });
1967         }
1968 
1969         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET_AND_BITWISE)) {
1970             // Incorrect argument types
1971             checkWMTE(() -&gt; { // value reference class
1972                 byte x = (byte) hs.get(am, methodType(byte.class, Class.class)).
1973                     invokeExact(Void.class);
1974             });
1975             // Incorrect return type
1976             checkWMTE(() -&gt; { // reference class
1977                 Void r = (Void) hs.get(am, methodType(Void.class, byte.class)).
1978                     invokeExact((byte)0x01);
1979             });
1980             checkWMTE(() -&gt; { // primitive class
1981                 boolean x = (boolean) hs.get(am, methodType(boolean.class, byte.class)).
1982                     invokeExact((byte)0x01);
1983             });
1984             // Incorrect arity
1985             checkWMTE(() -&gt; { // 0
1986                 byte x = (byte) hs.get(am, methodType(byte.class)).
1987                     invokeExact();
1988             });
1989             checkWMTE(() -&gt; { // &gt;
1990                 byte x = (byte) hs.get(am, methodType(byte.class, byte.class, Class.class)).
1991                     invokeExact((byte)0x01, Void.class);
1992             });
1993         }
1994     }
1995 
1996 
1997     static void testArrayWrongMethodType(VarHandle vh) throws Throwable {
1998         byte[] array = new byte[10];
1999         Arrays.fill(array, (byte)0x01);
2000 
2001         // Get
2002         // Incorrect argument types
2003         checkNPE(() -&gt; { // null array
2004             byte x = (byte) vh.get(null, 0);
2005         });
2006         checkCCE(() -&gt; { // array reference class
2007             byte x = (byte) vh.get(Void.class, 0);
2008         });
2009         checkWMTE(() -&gt; { // array primitive class
2010             byte x = (byte) vh.get(0, 0);
2011         });
2012         checkWMTE(() -&gt; { // index reference class
2013             byte x = (byte) vh.get(array, Void.class);
2014         });
2015         // Incorrect return type
2016         checkWMTE(() -&gt; { // reference class
2017             Void x = (Void) vh.get(array, 0);
2018         });
2019         checkWMTE(() -&gt; { // primitive class
2020             boolean x = (boolean) vh.get(array, 0);
2021         });
2022         // Incorrect arity
2023         checkWMTE(() -&gt; { // 0
2024             byte x = (byte) vh.get();
2025         });
2026         checkWMTE(() -&gt; { // &gt;
2027             byte x = (byte) vh.get(array, 0, Void.class);
2028         });
2029 
2030 
2031         // Set
2032         // Incorrect argument types
2033         checkNPE(() -&gt; { // null array
2034             vh.set(null, 0, (byte)0x01);
2035         });
2036         checkCCE(() -&gt; { // array reference class
2037             vh.set(Void.class, 0, (byte)0x01);
2038         });
2039         checkWMTE(() -&gt; { // value reference class
2040             vh.set(array, 0, Void.class);
2041         });
2042         checkWMTE(() -&gt; { // receiver primitive class
2043             vh.set(0, 0, (byte)0x01);
2044         });
2045         checkWMTE(() -&gt; { // index reference class
2046             vh.set(array, Void.class, (byte)0x01);
2047         });
2048         // Incorrect arity
2049         checkWMTE(() -&gt; { // 0
2050             vh.set();
2051         });
2052         checkWMTE(() -&gt; { // &gt;
2053             vh.set(array, 0, (byte)0x01, Void.class);
2054         });
2055 
2056 
2057         // GetVolatile
2058         // Incorrect argument types
2059         checkNPE(() -&gt; { // null array
2060             byte x = (byte) vh.getVolatile(null, 0);
2061         });
2062         checkCCE(() -&gt; { // array reference class
2063             byte x = (byte) vh.getVolatile(Void.class, 0);
2064         });
2065         checkWMTE(() -&gt; { // array primitive class
2066             byte x = (byte) vh.getVolatile(0, 0);
2067         });
2068         checkWMTE(() -&gt; { // index reference class
2069             byte x = (byte) vh.getVolatile(array, Void.class);
2070         });
2071         // Incorrect return type
2072         checkWMTE(() -&gt; { // reference class
2073             Void x = (Void) vh.getVolatile(array, 0);
2074         });
2075         checkWMTE(() -&gt; { // primitive class
2076             boolean x = (boolean) vh.getVolatile(array, 0);
2077         });
2078         // Incorrect arity
2079         checkWMTE(() -&gt; { // 0
2080             byte x = (byte) vh.getVolatile();
2081         });
2082         checkWMTE(() -&gt; { // &gt;
2083             byte x = (byte) vh.getVolatile(array, 0, Void.class);
2084         });
2085 
2086 
2087         // SetVolatile
2088         // Incorrect argument types
2089         checkNPE(() -&gt; { // null array
2090             vh.setVolatile(null, 0, (byte)0x01);
2091         });
2092         checkCCE(() -&gt; { // array reference class
2093             vh.setVolatile(Void.class, 0, (byte)0x01);
2094         });
2095         checkWMTE(() -&gt; { // value reference class
2096             vh.setVolatile(array, 0, Void.class);
2097         });
2098         checkWMTE(() -&gt; { // receiver primitive class
2099             vh.setVolatile(0, 0, (byte)0x01);
2100         });
2101         checkWMTE(() -&gt; { // index reference class
2102             vh.setVolatile(array, Void.class, (byte)0x01);
2103         });
2104         // Incorrect arity
2105         checkWMTE(() -&gt; { // 0
2106             vh.setVolatile();
2107         });
2108         checkWMTE(() -&gt; { // &gt;
2109             vh.setVolatile(array, 0, (byte)0x01, Void.class);
2110         });
2111 
2112 
2113         // GetOpaque
2114         // Incorrect argument types
2115         checkNPE(() -&gt; { // null array
2116             byte x = (byte) vh.getOpaque(null, 0);
2117         });
2118         checkCCE(() -&gt; { // array reference class
2119             byte x = (byte) vh.getOpaque(Void.class, 0);
2120         });
2121         checkWMTE(() -&gt; { // array primitive class
2122             byte x = (byte) vh.getOpaque(0, 0);
2123         });
2124         checkWMTE(() -&gt; { // index reference class
2125             byte x = (byte) vh.getOpaque(array, Void.class);
2126         });
2127         // Incorrect return type
2128         checkWMTE(() -&gt; { // reference class
2129             Void x = (Void) vh.getOpaque(array, 0);
2130         });
2131         checkWMTE(() -&gt; { // primitive class
2132             boolean x = (boolean) vh.getOpaque(array, 0);
2133         });
2134         // Incorrect arity
2135         checkWMTE(() -&gt; { // 0
2136             byte x = (byte) vh.getOpaque();
2137         });
2138         checkWMTE(() -&gt; { // &gt;
2139             byte x = (byte) vh.getOpaque(array, 0, Void.class);
2140         });
2141 
2142 
2143         // SetOpaque
2144         // Incorrect argument types
2145         checkNPE(() -&gt; { // null array
2146             vh.setOpaque(null, 0, (byte)0x01);
2147         });
2148         checkCCE(() -&gt; { // array reference class
2149             vh.setOpaque(Void.class, 0, (byte)0x01);
2150         });
2151         checkWMTE(() -&gt; { // value reference class
2152             vh.setOpaque(array, 0, Void.class);
2153         });
2154         checkWMTE(() -&gt; { // receiver primitive class
2155             vh.setOpaque(0, 0, (byte)0x01);
2156         });
2157         checkWMTE(() -&gt; { // index reference class
2158             vh.setOpaque(array, Void.class, (byte)0x01);
2159         });
2160         // Incorrect arity
2161         checkWMTE(() -&gt; { // 0
2162             vh.setOpaque();
2163         });
2164         checkWMTE(() -&gt; { // &gt;
2165             vh.setOpaque(array, 0, (byte)0x01, Void.class);
2166         });
2167 
2168 
2169         // GetAcquire
2170         // Incorrect argument types
2171         checkNPE(() -&gt; { // null array
2172             byte x = (byte) vh.getAcquire(null, 0);
2173         });
2174         checkCCE(() -&gt; { // array reference class
2175             byte x = (byte) vh.getAcquire(Void.class, 0);
2176         });
2177         checkWMTE(() -&gt; { // array primitive class
2178             byte x = (byte) vh.getAcquire(0, 0);
2179         });
2180         checkWMTE(() -&gt; { // index reference class
2181             byte x = (byte) vh.getAcquire(array, Void.class);
2182         });
2183         // Incorrect return type
2184         checkWMTE(() -&gt; { // reference class
2185             Void x = (Void) vh.getAcquire(array, 0);
2186         });
2187         checkWMTE(() -&gt; { // primitive class
2188             boolean x = (boolean) vh.getAcquire(array, 0);
2189         });
2190         // Incorrect arity
2191         checkWMTE(() -&gt; { // 0
2192             byte x = (byte) vh.getAcquire();
2193         });
2194         checkWMTE(() -&gt; { // &gt;
2195             byte x = (byte) vh.getAcquire(array, 0, Void.class);
2196         });
2197 
2198 
2199         // SetRelease
2200         // Incorrect argument types
2201         checkNPE(() -&gt; { // null array
2202             vh.setRelease(null, 0, (byte)0x01);
2203         });
2204         checkCCE(() -&gt; { // array reference class
2205             vh.setRelease(Void.class, 0, (byte)0x01);
2206         });
2207         checkWMTE(() -&gt; { // value reference class
2208             vh.setRelease(array, 0, Void.class);
2209         });
2210         checkWMTE(() -&gt; { // receiver primitive class
2211             vh.setRelease(0, 0, (byte)0x01);
2212         });
2213         checkWMTE(() -&gt; { // index reference class
2214             vh.setRelease(array, Void.class, (byte)0x01);
2215         });
2216         // Incorrect arity
2217         checkWMTE(() -&gt; { // 0
2218             vh.setRelease();
2219         });
2220         checkWMTE(() -&gt; { // &gt;
2221             vh.setRelease(array, 0, (byte)0x01, Void.class);
2222         });
2223 
2224 
2225         // CompareAndSet
2226         // Incorrect argument types
2227         checkNPE(() -&gt; { // null receiver
2228             boolean r = vh.compareAndSet(null, 0, (byte)0x01, (byte)0x01);
2229         });
2230         checkCCE(() -&gt; { // receiver reference class
2231             boolean r = vh.compareAndSet(Void.class, 0, (byte)0x01, (byte)0x01);
2232         });
2233         checkWMTE(() -&gt; { // expected reference class
2234             boolean r = vh.compareAndSet(array, 0, Void.class, (byte)0x01);
2235         });
2236         checkWMTE(() -&gt; { // actual reference class
2237             boolean r = vh.compareAndSet(array, 0, (byte)0x01, Void.class);
2238         });
2239         checkWMTE(() -&gt; { // receiver primitive class
2240             boolean r = vh.compareAndSet(0, 0, (byte)0x01, (byte)0x01);
2241         });
2242         checkWMTE(() -&gt; { // index reference class
2243             boolean r = vh.compareAndSet(array, Void.class, (byte)0x01, (byte)0x01);
2244         });
2245         // Incorrect arity
2246         checkWMTE(() -&gt; { // 0
2247             boolean r = vh.compareAndSet();
2248         });
2249         checkWMTE(() -&gt; { // &gt;
2250             boolean r = vh.compareAndSet(array, 0, (byte)0x01, (byte)0x01, Void.class);
2251         });
2252 
2253 
2254         // WeakCompareAndSet
2255         // Incorrect argument types
2256         checkNPE(() -&gt; { // null receiver
2257             boolean r = vh.weakCompareAndSetPlain(null, 0, (byte)0x01, (byte)0x01);
2258         });
2259         checkCCE(() -&gt; { // receiver reference class
2260             boolean r = vh.weakCompareAndSetPlain(Void.class, 0, (byte)0x01, (byte)0x01);
2261         });
2262         checkWMTE(() -&gt; { // expected reference class
2263             boolean r = vh.weakCompareAndSetPlain(array, 0, Void.class, (byte)0x01);
2264         });
2265         checkWMTE(() -&gt; { // actual reference class
2266             boolean r = vh.weakCompareAndSetPlain(array, 0, (byte)0x01, Void.class);
2267         });
2268         checkWMTE(() -&gt; { // receiver primitive class
2269             boolean r = vh.weakCompareAndSetPlain(0, 0, (byte)0x01, (byte)0x01);
2270         });
2271         checkWMTE(() -&gt; { // index reference class
2272             boolean r = vh.weakCompareAndSetPlain(array, Void.class, (byte)0x01, (byte)0x01);
2273         });
2274         // Incorrect arity
2275         checkWMTE(() -&gt; { // 0
2276             boolean r = vh.weakCompareAndSetPlain();
2277         });
2278         checkWMTE(() -&gt; { // &gt;
2279             boolean r = vh.weakCompareAndSetPlain(array, 0, (byte)0x01, (byte)0x01, Void.class);
2280         });
2281 
2282 
2283         // WeakCompareAndSetVolatile
2284         // Incorrect argument types
2285         checkNPE(() -&gt; { // null receiver
2286             boolean r = vh.weakCompareAndSet(null, 0, (byte)0x01, (byte)0x01);
2287         });
2288         checkCCE(() -&gt; { // receiver reference class
2289             boolean r = vh.weakCompareAndSet(Void.class, 0, (byte)0x01, (byte)0x01);
2290         });
2291         checkWMTE(() -&gt; { // expected reference class
2292             boolean r = vh.weakCompareAndSet(array, 0, Void.class, (byte)0x01);
2293         });
2294         checkWMTE(() -&gt; { // actual reference class
2295             boolean r = vh.weakCompareAndSet(array, 0, (byte)0x01, Void.class);
2296         });
2297         checkWMTE(() -&gt; { // receiver primitive class
2298             boolean r = vh.weakCompareAndSet(0, 0, (byte)0x01, (byte)0x01);
2299         });
2300         checkWMTE(() -&gt; { // index reference class
2301             boolean r = vh.weakCompareAndSet(array, Void.class, (byte)0x01, (byte)0x01);
2302         });
2303         // Incorrect arity
2304         checkWMTE(() -&gt; { // 0
2305             boolean r = vh.weakCompareAndSet();
2306         });
2307         checkWMTE(() -&gt; { // &gt;
2308             boolean r = vh.weakCompareAndSet(array, 0, (byte)0x01, (byte)0x01, Void.class);
2309         });
2310 
2311 
2312         // WeakCompareAndSetAcquire
2313         // Incorrect argument types
2314         checkNPE(() -&gt; { // null receiver
2315             boolean r = vh.weakCompareAndSetAcquire(null, 0, (byte)0x01, (byte)0x01);
2316         });
2317         checkCCE(() -&gt; { // receiver reference class
2318             boolean r = vh.weakCompareAndSetAcquire(Void.class, 0, (byte)0x01, (byte)0x01);
2319         });
2320         checkWMTE(() -&gt; { // expected reference class
2321             boolean r = vh.weakCompareAndSetAcquire(array, 0, Void.class, (byte)0x01);
2322         });
2323         checkWMTE(() -&gt; { // actual reference class
2324             boolean r = vh.weakCompareAndSetAcquire(array, 0, (byte)0x01, Void.class);
2325         });
2326         checkWMTE(() -&gt; { // receiver primitive class
2327             boolean r = vh.weakCompareAndSetAcquire(0, 0, (byte)0x01, (byte)0x01);
2328         });
2329         checkWMTE(() -&gt; { // index reference class
2330             boolean r = vh.weakCompareAndSetAcquire(array, Void.class, (byte)0x01, (byte)0x01);
2331         });
2332         // Incorrect arity
2333         checkWMTE(() -&gt; { // 0
2334             boolean r = vh.weakCompareAndSetAcquire();
2335         });
2336         checkWMTE(() -&gt; { // &gt;
2337             boolean r = vh.weakCompareAndSetAcquire(array, 0, (byte)0x01, (byte)0x01, Void.class);
2338         });
2339 
2340 
2341         // WeakCompareAndSetRelease
2342         // Incorrect argument types
2343         checkNPE(() -&gt; { // null receiver
2344             boolean r = vh.weakCompareAndSetRelease(null, 0, (byte)0x01, (byte)0x01);
2345         });
2346         checkCCE(() -&gt; { // receiver reference class
2347             boolean r = vh.weakCompareAndSetRelease(Void.class, 0, (byte)0x01, (byte)0x01);
2348         });
2349         checkWMTE(() -&gt; { // expected reference class
2350             boolean r = vh.weakCompareAndSetRelease(array, 0, Void.class, (byte)0x01);
2351         });
2352         checkWMTE(() -&gt; { // actual reference class
2353             boolean r = vh.weakCompareAndSetRelease(array, 0, (byte)0x01, Void.class);
2354         });
2355         checkWMTE(() -&gt; { // receiver primitive class
2356             boolean r = vh.weakCompareAndSetRelease(0, 0, (byte)0x01, (byte)0x01);
2357         });
2358         checkWMTE(() -&gt; { // index reference class
2359             boolean r = vh.weakCompareAndSetRelease(array, Void.class, (byte)0x01, (byte)0x01);
2360         });
2361         // Incorrect arity
2362         checkWMTE(() -&gt; { // 0
2363             boolean r = vh.weakCompareAndSetRelease();
2364         });
2365         checkWMTE(() -&gt; { // &gt;
2366             boolean r = vh.weakCompareAndSetRelease(array, 0, (byte)0x01, (byte)0x01, Void.class);
2367         });
2368 
2369 
2370         // CompareAndExchange
2371         // Incorrect argument types
2372         checkNPE(() -&gt; { // null receiver
2373             byte x = (byte) vh.compareAndExchange(null, 0, (byte)0x01, (byte)0x01);
2374         });
2375         checkCCE(() -&gt; { // array reference class
2376             byte x = (byte) vh.compareAndExchange(Void.class, 0, (byte)0x01, (byte)0x01);
2377         });
2378         checkWMTE(() -&gt; { // expected reference class
2379             byte x = (byte) vh.compareAndExchange(array, 0, Void.class, (byte)0x01);
2380         });
2381         checkWMTE(() -&gt; { // actual reference class
2382             byte x = (byte) vh.compareAndExchange(array, 0, (byte)0x01, Void.class);
2383         });
2384         checkWMTE(() -&gt; { // array primitive class
2385             byte x = (byte) vh.compareAndExchange(0, 0, (byte)0x01, (byte)0x01);
2386         });
2387         checkWMTE(() -&gt; { // index reference class
2388             byte x = (byte) vh.compareAndExchange(array, Void.class, (byte)0x01, (byte)0x01);
2389         });
2390         // Incorrect return type
2391         checkWMTE(() -&gt; { // reference class
2392             Void r = (Void) vh.compareAndExchange(array, 0, (byte)0x01, (byte)0x01);
2393         });
2394         checkWMTE(() -&gt; { // primitive class
2395             boolean x = (boolean) vh.compareAndExchange(array, 0, (byte)0x01, (byte)0x01);
2396         });
2397         // Incorrect arity
2398         checkWMTE(() -&gt; { // 0
2399             byte x = (byte) vh.compareAndExchange();
2400         });
2401         checkWMTE(() -&gt; { // &gt;
2402             byte x = (byte) vh.compareAndExchange(array, 0, (byte)0x01, (byte)0x01, Void.class);
2403         });
2404 
2405 
2406         // CompareAndExchangeAcquire
2407         // Incorrect argument types
2408         checkNPE(() -&gt; { // null receiver
2409             byte x = (byte) vh.compareAndExchangeAcquire(null, 0, (byte)0x01, (byte)0x01);
2410         });
2411         checkCCE(() -&gt; { // array reference class
2412             byte x = (byte) vh.compareAndExchangeAcquire(Void.class, 0, (byte)0x01, (byte)0x01);
2413         });
2414         checkWMTE(() -&gt; { // expected reference class
2415             byte x = (byte) vh.compareAndExchangeAcquire(array, 0, Void.class, (byte)0x01);
2416         });
2417         checkWMTE(() -&gt; { // actual reference class
2418             byte x = (byte) vh.compareAndExchangeAcquire(array, 0, (byte)0x01, Void.class);
2419         });
2420         checkWMTE(() -&gt; { // array primitive class
2421             byte x = (byte) vh.compareAndExchangeAcquire(0, 0, (byte)0x01, (byte)0x01);
2422         });
2423         checkWMTE(() -&gt; { // index reference class
2424             byte x = (byte) vh.compareAndExchangeAcquire(array, Void.class, (byte)0x01, (byte)0x01);
2425         });
2426         // Incorrect return type
2427         checkWMTE(() -&gt; { // reference class
2428             Void r = (Void) vh.compareAndExchangeAcquire(array, 0, (byte)0x01, (byte)0x01);
2429         });
2430         checkWMTE(() -&gt; { // primitive class
2431             boolean x = (boolean) vh.compareAndExchangeAcquire(array, 0, (byte)0x01, (byte)0x01);
2432         });
2433         // Incorrect arity
2434         checkWMTE(() -&gt; { // 0
2435             byte x = (byte) vh.compareAndExchangeAcquire();
2436         });
2437         checkWMTE(() -&gt; { // &gt;
2438             byte x = (byte) vh.compareAndExchangeAcquire(array, 0, (byte)0x01, (byte)0x01, Void.class);
2439         });
2440 
2441 
2442         // CompareAndExchangeRelease
2443         // Incorrect argument types
2444         checkNPE(() -&gt; { // null receiver
2445             byte x = (byte) vh.compareAndExchangeRelease(null, 0, (byte)0x01, (byte)0x01);
2446         });
2447         checkCCE(() -&gt; { // array reference class
2448             byte x = (byte) vh.compareAndExchangeRelease(Void.class, 0, (byte)0x01, (byte)0x01);
2449         });
2450         checkWMTE(() -&gt; { // expected reference class
2451             byte x = (byte) vh.compareAndExchangeRelease(array, 0, Void.class, (byte)0x01);
2452         });
2453         checkWMTE(() -&gt; { // actual reference class
2454             byte x = (byte) vh.compareAndExchangeRelease(array, 0, (byte)0x01, Void.class);
2455         });
2456         checkWMTE(() -&gt; { // array primitive class
2457             byte x = (byte) vh.compareAndExchangeRelease(0, 0, (byte)0x01, (byte)0x01);
2458         });
2459         checkWMTE(() -&gt; { // index reference class
2460             byte x = (byte) vh.compareAndExchangeRelease(array, Void.class, (byte)0x01, (byte)0x01);
2461         });
2462         // Incorrect return type
2463         checkWMTE(() -&gt; { // reference class
2464             Void r = (Void) vh.compareAndExchangeRelease(array, 0, (byte)0x01, (byte)0x01);
2465         });
2466         checkWMTE(() -&gt; { // primitive class
2467             boolean x = (boolean) vh.compareAndExchangeRelease(array, 0, (byte)0x01, (byte)0x01);
2468         });
2469         // Incorrect arity
2470         checkWMTE(() -&gt; { // 0
2471             byte x = (byte) vh.compareAndExchangeRelease();
2472         });
2473         checkWMTE(() -&gt; { // &gt;
2474             byte x = (byte) vh.compareAndExchangeRelease(array, 0, (byte)0x01, (byte)0x01, Void.class);
2475         });
2476 
2477 
2478         // GetAndSet
2479         // Incorrect argument types
2480         checkNPE(() -&gt; { // null array
2481             byte x = (byte) vh.getAndSet(null, 0, (byte)0x01);
2482         });
2483         checkCCE(() -&gt; { // array reference class
2484             byte x = (byte) vh.getAndSet(Void.class, 0, (byte)0x01);
2485         });
2486         checkWMTE(() -&gt; { // value reference class
2487             byte x = (byte) vh.getAndSet(array, 0, Void.class);
2488         });
2489         checkWMTE(() -&gt; { // reciarrayever primitive class
2490             byte x = (byte) vh.getAndSet(0, 0, (byte)0x01);
2491         });
2492         checkWMTE(() -&gt; { // index reference class
2493             byte x = (byte) vh.getAndSet(array, Void.class, (byte)0x01);
2494         });
2495         // Incorrect return type
2496         checkWMTE(() -&gt; { // reference class
2497             Void r = (Void) vh.getAndSet(array, 0, (byte)0x01);
2498         });
2499         checkWMTE(() -&gt; { // primitive class
2500             boolean x = (boolean) vh.getAndSet(array, 0, (byte)0x01);
2501         });
2502         // Incorrect arity
2503         checkWMTE(() -&gt; { // 0
2504             byte x = (byte) vh.getAndSet();
2505         });
2506         checkWMTE(() -&gt; { // &gt;
2507             byte x = (byte) vh.getAndSet(array, 0, (byte)0x01, Void.class);
2508         });
2509 
2510 
2511         // GetAndSetAcquire
2512         // Incorrect argument types
2513         checkNPE(() -&gt; { // null array
2514             byte x = (byte) vh.getAndSetAcquire(null, 0, (byte)0x01);
2515         });
2516         checkCCE(() -&gt; { // array reference class
2517             byte x = (byte) vh.getAndSetAcquire(Void.class, 0, (byte)0x01);
2518         });
2519         checkWMTE(() -&gt; { // value reference class
2520             byte x = (byte) vh.getAndSetAcquire(array, 0, Void.class);
2521         });
2522         checkWMTE(() -&gt; { // reciarrayever primitive class
2523             byte x = (byte) vh.getAndSetAcquire(0, 0, (byte)0x01);
2524         });
2525         checkWMTE(() -&gt; { // index reference class
2526             byte x = (byte) vh.getAndSetAcquire(array, Void.class, (byte)0x01);
2527         });
2528         // Incorrect return type
2529         checkWMTE(() -&gt; { // reference class
2530             Void r = (Void) vh.getAndSetAcquire(array, 0, (byte)0x01);
2531         });
2532         checkWMTE(() -&gt; { // primitive class
2533             boolean x = (boolean) vh.getAndSetAcquire(array, 0, (byte)0x01);
2534         });
2535         // Incorrect arity
2536         checkWMTE(() -&gt; { // 0
2537             byte x = (byte) vh.getAndSetAcquire();
2538         });
2539         checkWMTE(() -&gt; { // &gt;
2540             byte x = (byte) vh.getAndSetAcquire(array, 0, (byte)0x01, Void.class);
2541         });
2542 
2543 
2544         // GetAndSetRelease
2545         // Incorrect argument types
2546         checkNPE(() -&gt; { // null array
2547             byte x = (byte) vh.getAndSetRelease(null, 0, (byte)0x01);
2548         });
2549         checkCCE(() -&gt; { // array reference class
2550             byte x = (byte) vh.getAndSetRelease(Void.class, 0, (byte)0x01);
2551         });
2552         checkWMTE(() -&gt; { // value reference class
2553             byte x = (byte) vh.getAndSetRelease(array, 0, Void.class);
2554         });
2555         checkWMTE(() -&gt; { // reciarrayever primitive class
2556             byte x = (byte) vh.getAndSetRelease(0, 0, (byte)0x01);
2557         });
2558         checkWMTE(() -&gt; { // index reference class
2559             byte x = (byte) vh.getAndSetRelease(array, Void.class, (byte)0x01);
2560         });
2561         // Incorrect return type
2562         checkWMTE(() -&gt; { // reference class
2563             Void r = (Void) vh.getAndSetRelease(array, 0, (byte)0x01);
2564         });
2565         checkWMTE(() -&gt; { // primitive class
2566             boolean x = (boolean) vh.getAndSetRelease(array, 0, (byte)0x01);
2567         });
2568         // Incorrect arity
2569         checkWMTE(() -&gt; { // 0
2570             byte x = (byte) vh.getAndSetRelease();
2571         });
2572         checkWMTE(() -&gt; { // &gt;
2573             byte x = (byte) vh.getAndSetRelease(array, 0, (byte)0x01, Void.class);
2574         });
2575 
2576         // GetAndAdd
2577         // Incorrect argument types
2578         checkNPE(() -&gt; { // null array
2579             byte x = (byte) vh.getAndAdd(null, 0, (byte)0x01);
2580         });
2581         checkCCE(() -&gt; { // array reference class
2582             byte x = (byte) vh.getAndAdd(Void.class, 0, (byte)0x01);
2583         });
2584         checkWMTE(() -&gt; { // value reference class
2585             byte x = (byte) vh.getAndAdd(array, 0, Void.class);
2586         });
2587         checkWMTE(() -&gt; { // array primitive class
2588             byte x = (byte) vh.getAndAdd(0, 0, (byte)0x01);
2589         });
2590         checkWMTE(() -&gt; { // index reference class
2591             byte x = (byte) vh.getAndAdd(array, Void.class, (byte)0x01);
2592         });
2593         // Incorrect return type
2594         checkWMTE(() -&gt; { // reference class
2595             Void r = (Void) vh.getAndAdd(array, 0, (byte)0x01);
2596         });
2597         checkWMTE(() -&gt; { // primitive class
2598             boolean x = (boolean) vh.getAndAdd(array, 0, (byte)0x01);
2599         });
2600         // Incorrect arity
2601         checkWMTE(() -&gt; { // 0
2602             byte x = (byte) vh.getAndAdd();
2603         });
2604         checkWMTE(() -&gt; { // &gt;
2605             byte x = (byte) vh.getAndAdd(array, 0, (byte)0x01, Void.class);
2606         });
2607 
2608 
2609         // GetAndAddAcquire
2610         // Incorrect argument types
2611         checkNPE(() -&gt; { // null array
2612             byte x = (byte) vh.getAndAddAcquire(null, 0, (byte)0x01);
2613         });
2614         checkCCE(() -&gt; { // array reference class
2615             byte x = (byte) vh.getAndAddAcquire(Void.class, 0, (byte)0x01);
2616         });
2617         checkWMTE(() -&gt; { // value reference class
2618             byte x = (byte) vh.getAndAddAcquire(array, 0, Void.class);
2619         });
2620         checkWMTE(() -&gt; { // array primitive class
2621             byte x = (byte) vh.getAndAddAcquire(0, 0, (byte)0x01);
2622         });
2623         checkWMTE(() -&gt; { // index reference class
2624             byte x = (byte) vh.getAndAddAcquire(array, Void.class, (byte)0x01);
2625         });
2626         // Incorrect return type
2627         checkWMTE(() -&gt; { // reference class
2628             Void r = (Void) vh.getAndAddAcquire(array, 0, (byte)0x01);
2629         });
2630         checkWMTE(() -&gt; { // primitive class
2631             boolean x = (boolean) vh.getAndAddAcquire(array, 0, (byte)0x01);
2632         });
2633         // Incorrect arity
2634         checkWMTE(() -&gt; { // 0
2635             byte x = (byte) vh.getAndAddAcquire();
2636         });
2637         checkWMTE(() -&gt; { // &gt;
2638             byte x = (byte) vh.getAndAddAcquire(array, 0, (byte)0x01, Void.class);
2639         });
2640 
2641 
2642         // GetAndAddRelease
2643         // Incorrect argument types
2644         checkNPE(() -&gt; { // null array
2645             byte x = (byte) vh.getAndAddRelease(null, 0, (byte)0x01);
2646         });
2647         checkCCE(() -&gt; { // array reference class
2648             byte x = (byte) vh.getAndAddRelease(Void.class, 0, (byte)0x01);
2649         });
2650         checkWMTE(() -&gt; { // value reference class
2651             byte x = (byte) vh.getAndAddRelease(array, 0, Void.class);
2652         });
2653         checkWMTE(() -&gt; { // array primitive class
2654             byte x = (byte) vh.getAndAddRelease(0, 0, (byte)0x01);
2655         });
2656         checkWMTE(() -&gt; { // index reference class
2657             byte x = (byte) vh.getAndAddRelease(array, Void.class, (byte)0x01);
2658         });
2659         // Incorrect return type
2660         checkWMTE(() -&gt; { // reference class
2661             Void r = (Void) vh.getAndAddRelease(array, 0, (byte)0x01);
2662         });
2663         checkWMTE(() -&gt; { // primitive class
2664             boolean x = (boolean) vh.getAndAddRelease(array, 0, (byte)0x01);
2665         });
2666         // Incorrect arity
2667         checkWMTE(() -&gt; { // 0
2668             byte x = (byte) vh.getAndAddRelease();
2669         });
2670         checkWMTE(() -&gt; { // &gt;
2671             byte x = (byte) vh.getAndAddRelease(array, 0, (byte)0x01, Void.class);
2672         });
2673 
2674         // GetAndBitwiseOr
2675         // Incorrect argument types
2676         checkNPE(() -&gt; { // null array
2677             byte x = (byte) vh.getAndBitwiseOr(null, 0, (byte)0x01);
2678         });
2679         checkCCE(() -&gt; { // array reference class
2680             byte x = (byte) vh.getAndBitwiseOr(Void.class, 0, (byte)0x01);
2681         });
2682         checkWMTE(() -&gt; { // value reference class
2683             byte x = (byte) vh.getAndBitwiseOr(array, 0, Void.class);
2684         });
2685         checkWMTE(() -&gt; { // array primitive class
2686             byte x = (byte) vh.getAndBitwiseOr(0, 0, (byte)0x01);
2687         });
2688         checkWMTE(() -&gt; { // index reference class
2689             byte x = (byte) vh.getAndBitwiseOr(array, Void.class, (byte)0x01);
2690         });
2691         // Incorrect return type
2692         checkWMTE(() -&gt; { // reference class
2693             Void r = (Void) vh.getAndBitwiseOr(array, 0, (byte)0x01);
2694         });
2695         checkWMTE(() -&gt; { // primitive class
2696             boolean x = (boolean) vh.getAndBitwiseOr(array, 0, (byte)0x01);
2697         });
2698         // Incorrect arity
2699         checkWMTE(() -&gt; { // 0
2700             byte x = (byte) vh.getAndBitwiseOr();
2701         });
2702         checkWMTE(() -&gt; { // &gt;
2703             byte x = (byte) vh.getAndBitwiseOr(array, 0, (byte)0x01, Void.class);
2704         });
2705 
2706 
2707         // GetAndBitwiseOrAcquire
2708         // Incorrect argument types
2709         checkNPE(() -&gt; { // null array
2710             byte x = (byte) vh.getAndBitwiseOrAcquire(null, 0, (byte)0x01);
2711         });
2712         checkCCE(() -&gt; { // array reference class
2713             byte x = (byte) vh.getAndBitwiseOrAcquire(Void.class, 0, (byte)0x01);
2714         });
2715         checkWMTE(() -&gt; { // value reference class
2716             byte x = (byte) vh.getAndBitwiseOrAcquire(array, 0, Void.class);
2717         });
2718         checkWMTE(() -&gt; { // array primitive class
2719             byte x = (byte) vh.getAndBitwiseOrAcquire(0, 0, (byte)0x01);
2720         });
2721         checkWMTE(() -&gt; { // index reference class
2722             byte x = (byte) vh.getAndBitwiseOrAcquire(array, Void.class, (byte)0x01);
2723         });
2724         // Incorrect return type
2725         checkWMTE(() -&gt; { // reference class
2726             Void r = (Void) vh.getAndBitwiseOrAcquire(array, 0, (byte)0x01);
2727         });
2728         checkWMTE(() -&gt; { // primitive class
2729             boolean x = (boolean) vh.getAndBitwiseOrAcquire(array, 0, (byte)0x01);
2730         });
2731         // Incorrect arity
2732         checkWMTE(() -&gt; { // 0
2733             byte x = (byte) vh.getAndBitwiseOrAcquire();
2734         });
2735         checkWMTE(() -&gt; { // &gt;
2736             byte x = (byte) vh.getAndBitwiseOrAcquire(array, 0, (byte)0x01, Void.class);
2737         });
2738 
2739 
2740         // GetAndBitwiseOrRelease
2741         // Incorrect argument types
2742         checkNPE(() -&gt; { // null array
2743             byte x = (byte) vh.getAndBitwiseOrRelease(null, 0, (byte)0x01);
2744         });
2745         checkCCE(() -&gt; { // array reference class
2746             byte x = (byte) vh.getAndBitwiseOrRelease(Void.class, 0, (byte)0x01);
2747         });
2748         checkWMTE(() -&gt; { // value reference class
2749             byte x = (byte) vh.getAndBitwiseOrRelease(array, 0, Void.class);
2750         });
2751         checkWMTE(() -&gt; { // array primitive class
2752             byte x = (byte) vh.getAndBitwiseOrRelease(0, 0, (byte)0x01);
2753         });
2754         checkWMTE(() -&gt; { // index reference class
2755             byte x = (byte) vh.getAndBitwiseOrRelease(array, Void.class, (byte)0x01);
2756         });
2757         // Incorrect return type
2758         checkWMTE(() -&gt; { // reference class
2759             Void r = (Void) vh.getAndBitwiseOrRelease(array, 0, (byte)0x01);
2760         });
2761         checkWMTE(() -&gt; { // primitive class
2762             boolean x = (boolean) vh.getAndBitwiseOrRelease(array, 0, (byte)0x01);
2763         });
2764         // Incorrect arity
2765         checkWMTE(() -&gt; { // 0
2766             byte x = (byte) vh.getAndBitwiseOrRelease();
2767         });
2768         checkWMTE(() -&gt; { // &gt;
2769             byte x = (byte) vh.getAndBitwiseOrRelease(array, 0, (byte)0x01, Void.class);
2770         });
2771 
2772 
2773         // GetAndBitwiseAnd
2774         // Incorrect argument types
2775         checkNPE(() -&gt; { // null array
2776             byte x = (byte) vh.getAndBitwiseAnd(null, 0, (byte)0x01);
2777         });
2778         checkCCE(() -&gt; { // array reference class
2779             byte x = (byte) vh.getAndBitwiseAnd(Void.class, 0, (byte)0x01);
2780         });
2781         checkWMTE(() -&gt; { // value reference class
2782             byte x = (byte) vh.getAndBitwiseAnd(array, 0, Void.class);
2783         });
2784         checkWMTE(() -&gt; { // array primitive class
2785             byte x = (byte) vh.getAndBitwiseAnd(0, 0, (byte)0x01);
2786         });
2787         checkWMTE(() -&gt; { // index reference class
2788             byte x = (byte) vh.getAndBitwiseAnd(array, Void.class, (byte)0x01);
2789         });
2790         // Incorrect return type
2791         checkWMTE(() -&gt; { // reference class
2792             Void r = (Void) vh.getAndBitwiseAnd(array, 0, (byte)0x01);
2793         });
2794         checkWMTE(() -&gt; { // primitive class
2795             boolean x = (boolean) vh.getAndBitwiseAnd(array, 0, (byte)0x01);
2796         });
2797         // Incorrect arity
2798         checkWMTE(() -&gt; { // 0
2799             byte x = (byte) vh.getAndBitwiseAnd();
2800         });
2801         checkWMTE(() -&gt; { // &gt;
2802             byte x = (byte) vh.getAndBitwiseAnd(array, 0, (byte)0x01, Void.class);
2803         });
2804 
2805 
2806         // GetAndBitwiseAndAcquire
2807         // Incorrect argument types
2808         checkNPE(() -&gt; { // null array
2809             byte x = (byte) vh.getAndBitwiseAndAcquire(null, 0, (byte)0x01);
2810         });
2811         checkCCE(() -&gt; { // array reference class
2812             byte x = (byte) vh.getAndBitwiseAndAcquire(Void.class, 0, (byte)0x01);
2813         });
2814         checkWMTE(() -&gt; { // value reference class
2815             byte x = (byte) vh.getAndBitwiseAndAcquire(array, 0, Void.class);
2816         });
2817         checkWMTE(() -&gt; { // array primitive class
2818             byte x = (byte) vh.getAndBitwiseAndAcquire(0, 0, (byte)0x01);
2819         });
2820         checkWMTE(() -&gt; { // index reference class
2821             byte x = (byte) vh.getAndBitwiseAndAcquire(array, Void.class, (byte)0x01);
2822         });
2823         // Incorrect return type
2824         checkWMTE(() -&gt; { // reference class
2825             Void r = (Void) vh.getAndBitwiseAndAcquire(array, 0, (byte)0x01);
2826         });
2827         checkWMTE(() -&gt; { // primitive class
2828             boolean x = (boolean) vh.getAndBitwiseAndAcquire(array, 0, (byte)0x01);
2829         });
2830         // Incorrect arity
2831         checkWMTE(() -&gt; { // 0
2832             byte x = (byte) vh.getAndBitwiseAndAcquire();
2833         });
2834         checkWMTE(() -&gt; { // &gt;
2835             byte x = (byte) vh.getAndBitwiseAndAcquire(array, 0, (byte)0x01, Void.class);
2836         });
2837 
2838 
2839         // GetAndBitwiseAndRelease
2840         // Incorrect argument types
2841         checkNPE(() -&gt; { // null array
2842             byte x = (byte) vh.getAndBitwiseAndRelease(null, 0, (byte)0x01);
2843         });
2844         checkCCE(() -&gt; { // array reference class
2845             byte x = (byte) vh.getAndBitwiseAndRelease(Void.class, 0, (byte)0x01);
2846         });
2847         checkWMTE(() -&gt; { // value reference class
2848             byte x = (byte) vh.getAndBitwiseAndRelease(array, 0, Void.class);
2849         });
2850         checkWMTE(() -&gt; { // array primitive class
2851             byte x = (byte) vh.getAndBitwiseAndRelease(0, 0, (byte)0x01);
2852         });
2853         checkWMTE(() -&gt; { // index reference class
2854             byte x = (byte) vh.getAndBitwiseAndRelease(array, Void.class, (byte)0x01);
2855         });
2856         // Incorrect return type
2857         checkWMTE(() -&gt; { // reference class
2858             Void r = (Void) vh.getAndBitwiseAndRelease(array, 0, (byte)0x01);
2859         });
2860         checkWMTE(() -&gt; { // primitive class
2861             boolean x = (boolean) vh.getAndBitwiseAndRelease(array, 0, (byte)0x01);
2862         });
2863         // Incorrect arity
2864         checkWMTE(() -&gt; { // 0
2865             byte x = (byte) vh.getAndBitwiseAndRelease();
2866         });
2867         checkWMTE(() -&gt; { // &gt;
2868             byte x = (byte) vh.getAndBitwiseAndRelease(array, 0, (byte)0x01, Void.class);
2869         });
2870 
2871 
2872         // GetAndBitwiseXor
2873         // Incorrect argument types
2874         checkNPE(() -&gt; { // null array
2875             byte x = (byte) vh.getAndBitwiseXor(null, 0, (byte)0x01);
2876         });
2877         checkCCE(() -&gt; { // array reference class
2878             byte x = (byte) vh.getAndBitwiseXor(Void.class, 0, (byte)0x01);
2879         });
2880         checkWMTE(() -&gt; { // value reference class
2881             byte x = (byte) vh.getAndBitwiseXor(array, 0, Void.class);
2882         });
2883         checkWMTE(() -&gt; { // array primitive class
2884             byte x = (byte) vh.getAndBitwiseXor(0, 0, (byte)0x01);
2885         });
2886         checkWMTE(() -&gt; { // index reference class
2887             byte x = (byte) vh.getAndBitwiseXor(array, Void.class, (byte)0x01);
2888         });
2889         // Incorrect return type
2890         checkWMTE(() -&gt; { // reference class
2891             Void r = (Void) vh.getAndBitwiseXor(array, 0, (byte)0x01);
2892         });
2893         checkWMTE(() -&gt; { // primitive class
2894             boolean x = (boolean) vh.getAndBitwiseXor(array, 0, (byte)0x01);
2895         });
2896         // Incorrect arity
2897         checkWMTE(() -&gt; { // 0
2898             byte x = (byte) vh.getAndBitwiseXor();
2899         });
2900         checkWMTE(() -&gt; { // &gt;
2901             byte x = (byte) vh.getAndBitwiseXor(array, 0, (byte)0x01, Void.class);
2902         });
2903 
2904 
2905         // GetAndBitwiseXorAcquire
2906         // Incorrect argument types
2907         checkNPE(() -&gt; { // null array
2908             byte x = (byte) vh.getAndBitwiseXorAcquire(null, 0, (byte)0x01);
2909         });
2910         checkCCE(() -&gt; { // array reference class
2911             byte x = (byte) vh.getAndBitwiseXorAcquire(Void.class, 0, (byte)0x01);
2912         });
2913         checkWMTE(() -&gt; { // value reference class
2914             byte x = (byte) vh.getAndBitwiseXorAcquire(array, 0, Void.class);
2915         });
2916         checkWMTE(() -&gt; { // array primitive class
2917             byte x = (byte) vh.getAndBitwiseXorAcquire(0, 0, (byte)0x01);
2918         });
2919         checkWMTE(() -&gt; { // index reference class
2920             byte x = (byte) vh.getAndBitwiseXorAcquire(array, Void.class, (byte)0x01);
2921         });
2922         // Incorrect return type
2923         checkWMTE(() -&gt; { // reference class
2924             Void r = (Void) vh.getAndBitwiseXorAcquire(array, 0, (byte)0x01);
2925         });
2926         checkWMTE(() -&gt; { // primitive class
2927             boolean x = (boolean) vh.getAndBitwiseXorAcquire(array, 0, (byte)0x01);
2928         });
2929         // Incorrect arity
2930         checkWMTE(() -&gt; { // 0
2931             byte x = (byte) vh.getAndBitwiseXorAcquire();
2932         });
2933         checkWMTE(() -&gt; { // &gt;
2934             byte x = (byte) vh.getAndBitwiseXorAcquire(array, 0, (byte)0x01, Void.class);
2935         });
2936 
2937 
2938         // GetAndBitwiseXorRelease
2939         // Incorrect argument types
2940         checkNPE(() -&gt; { // null array
2941             byte x = (byte) vh.getAndBitwiseXorRelease(null, 0, (byte)0x01);
2942         });
2943         checkCCE(() -&gt; { // array reference class
2944             byte x = (byte) vh.getAndBitwiseXorRelease(Void.class, 0, (byte)0x01);
2945         });
2946         checkWMTE(() -&gt; { // value reference class
2947             byte x = (byte) vh.getAndBitwiseXorRelease(array, 0, Void.class);
2948         });
2949         checkWMTE(() -&gt; { // array primitive class
2950             byte x = (byte) vh.getAndBitwiseXorRelease(0, 0, (byte)0x01);
2951         });
2952         checkWMTE(() -&gt; { // index reference class
2953             byte x = (byte) vh.getAndBitwiseXorRelease(array, Void.class, (byte)0x01);
2954         });
2955         // Incorrect return type
2956         checkWMTE(() -&gt; { // reference class
2957             Void r = (Void) vh.getAndBitwiseXorRelease(array, 0, (byte)0x01);
2958         });
2959         checkWMTE(() -&gt; { // primitive class
2960             boolean x = (boolean) vh.getAndBitwiseXorRelease(array, 0, (byte)0x01);
2961         });
2962         // Incorrect arity
2963         checkWMTE(() -&gt; { // 0
2964             byte x = (byte) vh.getAndBitwiseXorRelease();
2965         });
2966         checkWMTE(() -&gt; { // &gt;
2967             byte x = (byte) vh.getAndBitwiseXorRelease(array, 0, (byte)0x01, Void.class);
2968         });
2969     }
2970 
2971     static void testArrayWrongMethodType(Handles hs) throws Throwable {
2972         byte[] array = new byte[10];
2973         Arrays.fill(array, (byte)0x01);
2974 
2975         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET)) {
2976             // Incorrect argument types
2977             checkNPE(() -&gt; { // null array
2978                 byte x = (byte) hs.get(am, methodType(byte.class, byte[].class, int.class)).
2979                     invokeExact((byte[]) null, 0);
2980             });
2981             hs.checkWMTEOrCCE(() -&gt; { // array reference class
2982                 byte x = (byte) hs.get(am, methodType(byte.class, Class.class, int.class)).
2983                     invokeExact(Void.class, 0);
2984             });
2985             checkWMTE(() -&gt; { // array primitive class
2986                 byte x = (byte) hs.get(am, methodType(byte.class, int.class, int.class)).
2987                     invokeExact(0, 0);
2988             });
2989             checkWMTE(() -&gt; { // index reference class
2990                 byte x = (byte) hs.get(am, methodType(byte.class, byte[].class, Class.class)).
2991                     invokeExact(array, Void.class);
2992             });
2993             // Incorrect return type
2994             checkWMTE(() -&gt; { // reference class
2995                 Void x = (Void) hs.get(am, methodType(Void.class, byte[].class, int.class)).
2996                     invokeExact(array, 0);
2997             });
2998             checkWMTE(() -&gt; { // primitive class
2999                 boolean x = (boolean) hs.get(am, methodType(boolean.class, byte[].class, int.class)).
3000                     invokeExact(array, 0);
3001             });
3002             // Incorrect arity
3003             checkWMTE(() -&gt; { // 0
3004                 byte x = (byte) hs.get(am, methodType(byte.class)).
3005                     invokeExact();
3006             });
3007             checkWMTE(() -&gt; { // &gt;
3008                 byte x = (byte) hs.get(am, methodType(byte.class, byte[].class, int.class, Class.class)).
3009                     invokeExact(array, 0, Void.class);
3010             });
3011         }
3012 
3013         for (TestAccessMode am : testAccessModesOfType(TestAccessType.SET)) {
3014             // Incorrect argument types
3015             checkNPE(() -&gt; { // null array
3016                 hs.get(am, methodType(void.class, byte[].class, int.class, byte.class)).
3017                     invokeExact((byte[]) null, 0, (byte)0x01);
3018             });
3019             hs.checkWMTEOrCCE(() -&gt; { // array reference class
3020                 hs.get(am, methodType(void.class, Class.class, int.class, byte.class)).
3021                     invokeExact(Void.class, 0, (byte)0x01);
3022             });
3023             checkWMTE(() -&gt; { // value reference class
3024                 hs.get(am, methodType(void.class, byte[].class, int.class, Class.class)).
3025                     invokeExact(array, 0, Void.class);
3026             });
3027             checkWMTE(() -&gt; { // receiver primitive class
3028                 hs.get(am, methodType(void.class, int.class, int.class, byte.class)).
3029                     invokeExact(0, 0, (byte)0x01);
3030             });
3031             checkWMTE(() -&gt; { // index reference class
3032                 hs.get(am, methodType(void.class, byte[].class, Class.class, byte.class)).
3033                     invokeExact(array, Void.class, (byte)0x01);
3034             });
3035             // Incorrect arity
3036             checkWMTE(() -&gt; { // 0
3037                 hs.get(am, methodType(void.class)).
3038                     invokeExact();
3039             });
3040             checkWMTE(() -&gt; { // &gt;
3041                 hs.get(am, methodType(void.class, byte[].class, int.class, Class.class)).
3042                     invokeExact(array, 0, (byte)0x01, Void.class);
3043             });
3044         }
3045         for (TestAccessMode am : testAccessModesOfType(TestAccessType.COMPARE_AND_SET)) {
3046             // Incorrect argument types
3047             checkNPE(() -&gt; { // null receiver
3048                 boolean r = (boolean) hs.get(am, methodType(boolean.class, byte[].class, int.class, byte.class, byte.class)).
3049                     invokeExact((byte[]) null, 0, (byte)0x01, (byte)0x01);
3050             });
3051             hs.checkWMTEOrCCE(() -&gt; { // receiver reference class
3052                 boolean r = (boolean) hs.get(am, methodType(boolean.class, Class.class, int.class, byte.class, byte.class)).
3053                     invokeExact(Void.class, 0, (byte)0x01, (byte)0x01);
3054             });
3055             checkWMTE(() -&gt; { // expected reference class
3056                 boolean r = (boolean) hs.get(am, methodType(boolean.class, byte[].class, int.class, Class.class, byte.class)).
3057                     invokeExact(array, 0, Void.class, (byte)0x01);
3058             });
3059             checkWMTE(() -&gt; { // actual reference class
3060                 boolean r = (boolean) hs.get(am, methodType(boolean.class, byte[].class, int.class, byte.class, Class.class)).
3061                     invokeExact(array, 0, (byte)0x01, Void.class);
3062             });
3063             checkWMTE(() -&gt; { // receiver primitive class
3064                 boolean r = (boolean) hs.get(am, methodType(boolean.class, int.class, int.class, byte.class, byte.class)).
3065                     invokeExact(0, 0, (byte)0x01, (byte)0x01);
3066             });
3067             checkWMTE(() -&gt; { // index reference class
3068                 boolean r = (boolean) hs.get(am, methodType(boolean.class, byte[].class, Class.class, byte.class, byte.class)).
3069                     invokeExact(array, Void.class, (byte)0x01, (byte)0x01);
3070             });
3071             // Incorrect arity
3072             checkWMTE(() -&gt; { // 0
3073                 boolean r = (boolean) hs.get(am, methodType(boolean.class)).
3074                     invokeExact();
3075             });
3076             checkWMTE(() -&gt; { // &gt;
3077                 boolean r = (boolean) hs.get(am, methodType(boolean.class, byte[].class, int.class, byte.class, byte.class, Class.class)).
3078                     invokeExact(array, 0, (byte)0x01, (byte)0x01, Void.class);
3079             });
3080         }
3081 
3082         for (TestAccessMode am : testAccessModesOfType(TestAccessType.COMPARE_AND_EXCHANGE)) {
3083             // Incorrect argument types
3084             checkNPE(() -&gt; { // null receiver
3085                 byte x = (byte) hs.get(am, methodType(byte.class, byte[].class, int.class, byte.class, byte.class)).
3086                     invokeExact((byte[]) null, 0, (byte)0x01, (byte)0x01);
3087             });
3088             hs.checkWMTEOrCCE(() -&gt; { // array reference class
3089                 byte x = (byte) hs.get(am, methodType(byte.class, Class.class, int.class, byte.class, byte.class)).
3090                     invokeExact(Void.class, 0, (byte)0x01, (byte)0x01);
3091             });
3092             checkWMTE(() -&gt; { // expected reference class
3093                 byte x = (byte) hs.get(am, methodType(byte.class, byte[].class, int.class, Class.class, byte.class)).
3094                     invokeExact(array, 0, Void.class, (byte)0x01);
3095             });
3096             checkWMTE(() -&gt; { // actual reference class
3097                 byte x = (byte) hs.get(am, methodType(byte.class, byte[].class, int.class, byte.class, Class.class)).
3098                     invokeExact(array, 0, (byte)0x01, Void.class);
3099             });
3100             checkWMTE(() -&gt; { // array primitive class
3101                 byte x = (byte) hs.get(am, methodType(byte.class, int.class, int.class, byte.class, byte.class)).
3102                     invokeExact(0, 0, (byte)0x01, (byte)0x01);
3103             });
3104             checkWMTE(() -&gt; { // index reference class
3105                 byte x = (byte) hs.get(am, methodType(byte.class, byte[].class, Class.class, byte.class, byte.class)).
3106                     invokeExact(array, Void.class, (byte)0x01, (byte)0x01);
3107             });
3108             // Incorrect return type
3109             checkWMTE(() -&gt; { // reference class
3110                 Void r = (Void) hs.get(am, methodType(Void.class, byte[].class, int.class, byte.class, byte.class)).
3111                     invokeExact(array, 0, (byte)0x01, (byte)0x01);
3112             });
3113             checkWMTE(() -&gt; { // primitive class
3114                 boolean x = (boolean) hs.get(am, methodType(boolean.class, byte[].class, int.class, byte.class, byte.class)).
3115                     invokeExact(array, 0, (byte)0x01, (byte)0x01);
3116             });
3117             // Incorrect arity
3118             checkWMTE(() -&gt; { // 0
3119                 byte x = (byte) hs.get(am, methodType(byte.class)).
3120                     invokeExact();
3121             });
3122             checkWMTE(() -&gt; { // &gt;
3123                 byte x = (byte) hs.get(am, methodType(byte.class, byte[].class, int.class, byte.class, byte.class, Class.class)).
3124                     invokeExact(array, 0, (byte)0x01, (byte)0x01, Void.class);
3125             });
3126         }
3127 
3128         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET_AND_SET)) {
3129             // Incorrect argument types
3130             checkNPE(() -&gt; { // null array
3131                 byte x = (byte) hs.get(am, methodType(byte.class, byte[].class, int.class, byte.class)).
3132                     invokeExact((byte[]) null, 0, (byte)0x01);
3133             });
3134             hs.checkWMTEOrCCE(() -&gt; { // array reference class
3135                 byte x = (byte) hs.get(am, methodType(byte.class, Class.class, int.class, byte.class)).
3136                     invokeExact(Void.class, 0, (byte)0x01);
3137             });
3138             checkWMTE(() -&gt; { // value reference class
3139                 byte x = (byte) hs.get(am, methodType(byte.class, byte[].class, int.class, Class.class)).
3140                     invokeExact(array, 0, Void.class);
3141             });
3142             checkWMTE(() -&gt; { // array primitive class
3143                 byte x = (byte) hs.get(am, methodType(byte.class, int.class, int.class, byte.class)).
3144                     invokeExact(0, 0, (byte)0x01);
3145             });
3146             checkWMTE(() -&gt; { // index reference class
3147                 byte x = (byte) hs.get(am, methodType(byte.class, byte[].class, Class.class, byte.class)).
3148                     invokeExact(array, Void.class, (byte)0x01);
3149             });
3150             // Incorrect return type
3151             checkWMTE(() -&gt; { // reference class
3152                 Void r = (Void) hs.get(am, methodType(Void.class, byte[].class, int.class, byte.class)).
3153                     invokeExact(array, 0, (byte)0x01);
3154             });
3155             checkWMTE(() -&gt; { // primitive class
3156                 boolean x = (boolean) hs.get(am, methodType(boolean.class, byte[].class, int.class, byte.class)).
3157                     invokeExact(array, 0, (byte)0x01);
3158             });
3159             // Incorrect arity
3160             checkWMTE(() -&gt; { // 0
3161                 byte x = (byte) hs.get(am, methodType(byte.class)).
3162                     invokeExact();
3163             });
3164             checkWMTE(() -&gt; { // &gt;
3165                 byte x = (byte) hs.get(am, methodType(byte.class, byte[].class, int.class, byte.class, Class.class)).
3166                     invokeExact(array, 0, (byte)0x01, Void.class);
3167             });
3168         }
3169 
3170         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET_AND_ADD)) {
3171             // Incorrect argument types
3172             checkNPE(() -&gt; { // null array
3173                 byte x = (byte) hs.get(am, methodType(byte.class, byte[].class, int.class, byte.class)).
3174                     invokeExact((byte[]) null, 0, (byte)0x01);
3175             });
3176             hs.checkWMTEOrCCE(() -&gt; { // array reference class
3177                 byte x = (byte) hs.get(am, methodType(byte.class, Class.class, int.class, byte.class)).
3178                     invokeExact(Void.class, 0, (byte)0x01);
3179             });
3180             checkWMTE(() -&gt; { // value reference class
3181                 byte x = (byte) hs.get(am, methodType(byte.class, byte[].class, int.class, Class.class)).
3182                     invokeExact(array, 0, Void.class);
3183             });
3184             checkWMTE(() -&gt; { // array primitive class
3185                 byte x = (byte) hs.get(am, methodType(byte.class, int.class, int.class, byte.class)).
3186                     invokeExact(0, 0, (byte)0x01);
3187             });
3188             checkWMTE(() -&gt; { // index reference class
3189                 byte x = (byte) hs.get(am, methodType(byte.class, byte[].class, Class.class, byte.class)).
3190                     invokeExact(array, Void.class, (byte)0x01);
3191             });
3192             // Incorrect return type
3193             checkWMTE(() -&gt; { // reference class
3194                 Void r = (Void) hs.get(am, methodType(Void.class, byte[].class, int.class, byte.class)).
3195                     invokeExact(array, 0, (byte)0x01);
3196             });
3197             checkWMTE(() -&gt; { // primitive class
3198                 boolean x = (boolean) hs.get(am, methodType(boolean.class, byte[].class, int.class, byte.class)).
3199                     invokeExact(array, 0, (byte)0x01);
3200             });
3201             // Incorrect arity
3202             checkWMTE(() -&gt; { // 0
3203                 byte x = (byte) hs.get(am, methodType(byte.class)).
3204                     invokeExact();
3205             });
3206             checkWMTE(() -&gt; { // &gt;
3207                 byte x = (byte) hs.get(am, methodType(byte.class, byte[].class, int.class, byte.class, Class.class)).
3208                     invokeExact(array, 0, (byte)0x01, Void.class);
3209             });
3210         }
3211 
3212         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET_AND_BITWISE)) {
3213             // Incorrect argument types
3214             checkNPE(() -&gt; { // null array
3215                 byte x = (byte) hs.get(am, methodType(byte.class, byte[].class, int.class, byte.class)).
3216                     invokeExact((byte[]) null, 0, (byte)0x01);
3217             });
3218             hs.checkWMTEOrCCE(() -&gt; { // array reference class
3219                 byte x = (byte) hs.get(am, methodType(byte.class, Class.class, int.class, byte.class)).
3220                     invokeExact(Void.class, 0, (byte)0x01);
3221             });
3222             checkWMTE(() -&gt; { // value reference class
3223                 byte x = (byte) hs.get(am, methodType(byte.class, byte[].class, int.class, Class.class)).
3224                     invokeExact(array, 0, Void.class);
3225             });
3226             checkWMTE(() -&gt; { // array primitive class
3227                 byte x = (byte) hs.get(am, methodType(byte.class, int.class, int.class, byte.class)).
3228                     invokeExact(0, 0, (byte)0x01);
3229             });
3230             checkWMTE(() -&gt; { // index reference class
3231                 byte x = (byte) hs.get(am, methodType(byte.class, byte[].class, Class.class, byte.class)).
3232                     invokeExact(array, Void.class, (byte)0x01);
3233             });
3234             // Incorrect return type
3235             checkWMTE(() -&gt; { // reference class
3236                 Void r = (Void) hs.get(am, methodType(Void.class, byte[].class, int.class, byte.class)).
3237                     invokeExact(array, 0, (byte)0x01);
3238             });
3239             checkWMTE(() -&gt; { // primitive class
3240                 boolean x = (boolean) hs.get(am, methodType(boolean.class, byte[].class, int.class, byte.class)).
3241                     invokeExact(array, 0, (byte)0x01);
3242             });
3243             // Incorrect arity
3244             checkWMTE(() -&gt; { // 0
3245                 byte x = (byte) hs.get(am, methodType(byte.class)).
3246                     invokeExact();
3247             });
3248             checkWMTE(() -&gt; { // &gt;
3249                 byte x = (byte) hs.get(am, methodType(byte.class, byte[].class, int.class, byte.class, Class.class)).
3250                     invokeExact(array, 0, (byte)0x01, Void.class);
3251             });
3252         }
3253     }
3254 }
    </pre>
  </body>
</html>
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff make/autoconf/flags-cflags.m4</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="../RunTests.gmk.cdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="flags.m4.cdiff.html" target="_top">next &gt;</a></center>    <h2>make/autoconf/flags-cflags.m4</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 596,12 ***</span>
    # Ideally we would have a common level across all toolchains so that all sources
    # are sure to conform to the same standard. Unfortunately neither our sources nor
    # our toolchains are in a condition to support that. But what we loosely aim for is
    # C99 level.
    if test &quot;x$TOOLCHAIN_TYPE&quot; = xgcc || test &quot;x$TOOLCHAIN_TYPE&quot; = xclang || test &quot;x$TOOLCHAIN_TYPE&quot; = xxlc; then
<span class="line-modified">!     # This raises the language level for older 4.8 gcc, while lowering it for later</span>
<span class="line-removed">-     # versions. clang and xlclang support the same flag.</span>
      LANGSTD_CFLAGS=&quot;-std=c99&quot;
    elif test &quot;x$TOOLCHAIN_TYPE&quot; = xsolstudio; then
      # We can&#39;t turn on -std=c99 without breaking compilation of the splashscreen/png
      # utilities. But we can enable c99 as below (previously achieved by using -Xa).
      # It is the no_lib that makes the difference.
<span class="line-new-header">--- 596,11 ---</span>
    # Ideally we would have a common level across all toolchains so that all sources
    # are sure to conform to the same standard. Unfortunately neither our sources nor
    # our toolchains are in a condition to support that. But what we loosely aim for is
    # C99 level.
    if test &quot;x$TOOLCHAIN_TYPE&quot; = xgcc || test &quot;x$TOOLCHAIN_TYPE&quot; = xclang || test &quot;x$TOOLCHAIN_TYPE&quot; = xxlc; then
<span class="line-modified">!     # Explicitly set C99. clang and xlclang support the same flag.</span>
      LANGSTD_CFLAGS=&quot;-std=c99&quot;
    elif test &quot;x$TOOLCHAIN_TYPE&quot; = xsolstudio; then
      # We can&#39;t turn on -std=c99 without breaking compilation of the splashscreen/png
      # utilities. But we can enable c99 as below (previously achieved by using -Xa).
      # It is the no_lib that makes the difference.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 814,11 ***</span>
        # for all archs except arm and ppc, prevent gcc to omit frame pointer
        $1_CFLAGS_CPU_JDK=&quot;${$1_CFLAGS_CPU_JDK} -fno-omit-frame-pointer&quot;
      fi
  
      $1_CXXSTD_CXXFLAG=&quot;-std=gnu++98&quot;
<span class="line-modified">!     FLAGS_CXX_COMPILER_CHECK_ARGUMENTS(ARGUMENT: [${$1_CXXSTD_CXXFLAG} -Werror],</span>
          PREFIX: $3, IF_FALSE: [$1_CXXSTD_CXXFLAG=&quot;&quot;])
      $1_TOOLCHAIN_CFLAGS_JDK_CXXONLY=&quot;${$1_CXXSTD_CXXFLAG}&quot;
      $1_TOOLCHAIN_CFLAGS_JVM=&quot;${$1_TOOLCHAIN_CFLAGS_JVM} ${$1_CXXSTD_CXXFLAG}&quot;
      $2ADLC_CXXFLAG=&quot;${$1_CXXSTD_CXXFLAG}&quot;
  
<span class="line-new-header">--- 813,11 ---</span>
        # for all archs except arm and ppc, prevent gcc to omit frame pointer
        $1_CFLAGS_CPU_JDK=&quot;${$1_CFLAGS_CPU_JDK} -fno-omit-frame-pointer&quot;
      fi
  
      $1_CXXSTD_CXXFLAG=&quot;-std=gnu++98&quot;
<span class="line-modified">!     FLAGS_CXX_COMPILER_CHECK_ARGUMENTS(ARGUMENT: [${$1_CXXSTD_CXXFLAG}],</span>
          PREFIX: $3, IF_FALSE: [$1_CXXSTD_CXXFLAG=&quot;&quot;])
      $1_TOOLCHAIN_CFLAGS_JDK_CXXONLY=&quot;${$1_CXXSTD_CXXFLAG}&quot;
      $1_TOOLCHAIN_CFLAGS_JVM=&quot;${$1_TOOLCHAIN_CFLAGS_JVM} ${$1_CXXSTD_CXXFLAG}&quot;
      $2ADLC_CXXFLAG=&quot;${$1_CXXSTD_CXXFLAG}&quot;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 941,14 ***</span>
    # These flags are required for GCC 6 builds as undefined behaviour in OpenJDK code
    # runs afoul of the more aggressive versions of these optimisations.
    # Notably, value range propagation now assumes that the this pointer of C++
    # member functions is non-null.
    NO_DELETE_NULL_POINTER_CHECKS_CFLAG=&quot;-fno-delete-null-pointer-checks&quot;
<span class="line-modified">!   FLAGS_COMPILER_CHECK_ARGUMENTS(ARGUMENT: [$NO_DELETE_NULL_POINTER_CHECKS_CFLAG -Werror],</span>
        PREFIX: $2, IF_FALSE: [NO_DELETE_NULL_POINTER_CHECKS_CFLAG=&quot;&quot;])
    NO_LIFETIME_DSE_CFLAG=&quot;-fno-lifetime-dse&quot;
<span class="line-modified">!   FLAGS_COMPILER_CHECK_ARGUMENTS(ARGUMENT: [$NO_LIFETIME_DSE_CFLAG -Werror],</span>
        PREFIX: $2, IF_FALSE: [NO_LIFETIME_DSE_CFLAG=&quot;&quot;])
    $1_GCC6_CFLAGS=&quot;${NO_DELETE_NULL_POINTER_CHECKS_CFLAG} ${NO_LIFETIME_DSE_CFLAG}&quot;
  ])
  
  # Documentation on common flags used for solstudio in HIGHEST.
<span class="line-new-header">--- 940,14 ---</span>
    # These flags are required for GCC 6 builds as undefined behaviour in OpenJDK code
    # runs afoul of the more aggressive versions of these optimisations.
    # Notably, value range propagation now assumes that the this pointer of C++
    # member functions is non-null.
    NO_DELETE_NULL_POINTER_CHECKS_CFLAG=&quot;-fno-delete-null-pointer-checks&quot;
<span class="line-modified">!   FLAGS_COMPILER_CHECK_ARGUMENTS(ARGUMENT: [$NO_DELETE_NULL_POINTER_CHECKS_CFLAG],</span>
        PREFIX: $2, IF_FALSE: [NO_DELETE_NULL_POINTER_CHECKS_CFLAG=&quot;&quot;])
    NO_LIFETIME_DSE_CFLAG=&quot;-fno-lifetime-dse&quot;
<span class="line-modified">!   FLAGS_COMPILER_CHECK_ARGUMENTS(ARGUMENT: [$NO_LIFETIME_DSE_CFLAG],</span>
        PREFIX: $2, IF_FALSE: [NO_LIFETIME_DSE_CFLAG=&quot;&quot;])
    $1_GCC6_CFLAGS=&quot;${NO_DELETE_NULL_POINTER_CHECKS_CFLAG} ${NO_LIFETIME_DSE_CFLAG}&quot;
  ])
  
  # Documentation on common flags used for solstudio in HIGHEST.
</pre>
<center><a href="../RunTests.gmk.cdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="flags.m4.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>
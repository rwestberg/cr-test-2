<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff make/autoconf/flags.m4</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="flags-cflags.m4.udiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="toolchain.m4.udiff.html" target="_top">next &gt;</a></center>    <h2>make/autoconf/flags.m4</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  #
<span class="udiff-line-modified-removed">- # Copyright (c) 2011, 2018, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+ # Copyright (c) 2011, 2020, Oracle and/or its affiliates. All rights reserved.</span>
  # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  #
  # This code is free software; you can redistribute it and/or modify it
  # under the terms of the GNU General Public License version 2 only, as
  # published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -47,11 +47,11 @@</span>
      AC_MSG_RESULT([$OPENJDK_TARGET_ABI_PROFILE])
  
      # --- Arm-sflt CFLAGS and ASFLAGS ---
      # Armv5te is required for assembler, because pld insn used in arm32 hotspot is only in v5E and above.
      # However, there is also a GCC bug which generates unaligned strd/ldrd instructions on armv5te:
<span class="udiff-line-modified-removed">-     # https://gcc.gnu.org/bugzilla/show_bug.cgi?id=82445, and it was fixed only quite recently.</span>
<span class="udiff-line-modified-added">+     # https://gcc.gnu.org/bugzilla/show_bug.cgi?id=82445, and it was fixed in gcc 7.1.</span>
      # The resulting compromise is to enable v5TE for assembler and let GCC generate code for v5T.
      if test &quot;x$OPENJDK_TARGET_ABI_PROFILE&quot; = xarm-vfp-sflt; then
        ARM_FLOAT_TYPE=vfp-sflt
        ARM_ARCH_TYPE_FLAGS=&#39;-march=armv7-a -mthumb&#39;
        ARM_ARCH_TYPE_ASFLAGS=&#39;-march=armv7-a -mthumb&#39;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -436,11 +436,11 @@</span>
    AC_MSG_CHECKING([if ARG_PREFIX[CC] supports &quot;ARG_ARGUMENT&quot;])
    supports=yes
  
    saved_cflags=&quot;$CFLAGS&quot;
    saved_cc=&quot;$CC&quot;
<span class="udiff-line-modified-removed">-   CFLAGS=&quot;$CFLAGS ARG_ARGUMENT&quot;</span>
<span class="udiff-line-modified-added">+   CFLAGS=&quot;$CFLAGS $CFLAGS_WARNINGS_ARE_ERRORS ARG_ARGUMENT&quot;</span>
    CC=&quot;$ARG_PREFIX[CC]&quot;
    AC_LANG_PUSH([C])
    AC_COMPILE_IFELSE([AC_LANG_SOURCE([[int i;]])], [],
        [supports=no])
    AC_LANG_POP([C])
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -467,11 +467,11 @@</span>
    AC_MSG_CHECKING([if ARG_PREFIX[CXX] supports &quot;ARG_ARGUMENT&quot;])
    supports=yes
  
    saved_cxxflags=&quot;$CXXFLAGS&quot;
    saved_cxx=&quot;$CXX&quot;
<span class="udiff-line-modified-removed">-   CXXFLAGS=&quot;$CXXFLAG ARG_ARGUMENT&quot;</span>
<span class="udiff-line-modified-added">+   CXXFLAGS=&quot;$CXXFLAG $CFLAGS_WARNINGS_ARE_ERRORS ARG_ARGUMENT&quot;</span>
    CXX=&quot;$ARG_PREFIX[CXX]&quot;
    AC_LANG_PUSH([C++])
    AC_COMPILE_IFELSE([AC_LANG_SOURCE([[int i;]])], [],
        [supports=no])
    AC_LANG_POP([C++])
</pre>
<center><a href="flags-cflags.m4.udiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="toolchain.m4.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old test/hotspot/jtreg/runtime/7162488/Test7162488.sh</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
  <body>
    <pre>
 1 #
 2 #  Copyright (c) 2012, 2014, Oracle and/or its affiliates. All rights reserved.
 3 #  DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 4 #
 5 #  This code is free software; you can redistribute it and/or modify it
 6 #  under the terms of the GNU General Public License version 2 only, as
 7 #  published by the Free Software Foundation.
 8 #
 9 #  This code is distributed in the hope that it will be useful, but WITHOUT
10 #  ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
11 #  FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
12 #  version 2 for more details (a copy is included in the LICENSE file that
13 #  accompanied this code).
14 #
15 #  You should have received a copy of the GNU General Public License version
16 #  2 along with this work; if not, write to the Free Software Foundation,
17 #  Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
18 #
19 #  Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
20 #  or visit www.oracle.com if you need additional information or have any
21 #  questions.
22 #
23 
24 
25 # @test Test7162488.sh
26 # @bug 7162488
27 # @summary VM not printing unknown -XX options
28 # @run shell Test7162488.sh
29 #
30 
31 if [ &quot;${TESTSRC}&quot; = &quot;&quot; ]
32 then
33   TESTSRC=${PWD}
34   echo &quot;TESTSRC not set.  Using &quot;${TESTSRC}&quot; as default&quot;
35 fi
36 echo &quot;TESTSRC=${TESTSRC}&quot;
37 ## Adding common setup Variables for running shell tests.
38 . ${TESTSRC}/../../test_env.sh
39 
40 JAVA=${TESTJAVA}${FS}bin${FS}java
41 
42 #
43 # Just run with an option we are confident will not be recognized,
44 # and check for the message:
45 #
46 OPTION=this_is_not_an_option
47 
48 ${JAVA} -showversion -XX:${OPTION} 2&gt;&amp;1 | grep &quot;Unrecognized VM option&quot; 
49 if [ &quot;$?&quot; != &quot;0&quot; ]
50 then
51   printf &quot;FAILED: option not flagged as unrecognized.\n&quot;
52   exit 1
53 fi
54 
55 ${JAVA} -showversion -XX:${OPTION} 2&gt;&amp;1 | grep ${OPTION}
56 if [ &quot;$?&quot; != &quot;0&quot; ]
57 then
58   printf &quot;FAILED: bad option not named as being bad.\n&quot;
59   exit 1
60 fi
61 
62 printf &quot;Passed.\n&quot;
63 
    </pre>
  </body>
</html>
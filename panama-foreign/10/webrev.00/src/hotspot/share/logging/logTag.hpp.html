<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New src/hotspot/share/logging/logTag.hpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (c) 2015, 2020, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  *
 23  */
 24 #ifndef SHARE_LOGGING_LOGTAG_HPP
 25 #define SHARE_LOGGING_LOGTAG_HPP
 26 
 27 #include &quot;memory/allocation.hpp&quot;
 28 #include &quot;utilities/globalDefinitions.hpp&quot;
 29 
 30 // List of available logging tags. New tags should be added here.
 31 // (The tags &#39;all&#39;, &#39;disable&#39; and &#39;help&#39; are special tags that can
 32 // not be used in log calls, and should not be listed below.)
 33 #define LOG_TAG_LIST \
 34   LOG_TAG(add) \
 35   LOG_TAG(age) \
 36   LOG_TAG(alloc) \
 37   LOG_TAG(aot) \
 38   LOG_TAG(annotation) \
 39   LOG_TAG(arguments) \
 40   LOG_TAG(attach) \
 41   LOG_TAG(barrier) \
 42   LOG_TAG(biasedlocking) \
 43   LOG_TAG(blocks) \
 44   LOG_TAG(bot) \
 45   LOG_TAG(breakpoint) \
 46   LOG_TAG(bytecode) \
 47   LOG_TAG(cds) \
 48   LOG_TAG(census) \
 49   LOG_TAG(class) \
 50   LOG_TAG(classhisto) \
 51   LOG_TAG(cleanup) \
 52   LOG_TAG(codecache) \
 53   LOG_TAG(compaction) \
 54   LOG_TAG(compilation) \
 55   LOG_TAG(constraints) \
 56   LOG_TAG(constantpool) \
 57   LOG_TAG(container) \
 58   LOG_TAG(coops) \
 59   LOG_TAG(cpu) \
 60   LOG_TAG(cset) \
 61   LOG_TAG(data) \
 62   LOG_TAG(datacreation) \
 63   LOG_TAG(dcmd) \
 64   LOG_TAG(decoder) \
 65   LOG_TAG(defaultmethods) \
 66   LOG_TAG(director) \
 67   LOG_TAG(dump) \
 68   LOG_TAG(dynamic) \
 69   LOG_TAG(ergo) \
 70   LOG_TAG(event) \
 71   LOG_TAG(exceptions) \
 72   LOG_TAG(exit) \
 73   LOG_TAG(fingerprint) \
 74   LOG_TAG(free) \
 75   LOG_TAG(freelist) \
 76   LOG_TAG(gc) \
 77   LOG_TAG(handshake) \
 78   LOG_TAG(hashtables) \
 79   LOG_TAG(heap) \
 80   LOG_TAG(humongous) \
 81   LOG_TAG(ihop) \
 82   LOG_TAG(iklass) \
 83   LOG_TAG(init) \
 84   LOG_TAG(inlining) \
 85   LOG_TAG(install) \
 86   LOG_TAG(interpreter) \
 87   LOG_TAG(itables) \
 88   LOG_TAG(jfr) \
 89   LOG_TAG(jit) \
 90   LOG_TAG(jni) \
 91   LOG_TAG(jvmti) \
 92   LOG_TAG(liveness) \
 93   LOG_TAG(load) /* Trace all classes loaded */ \
 94   LOG_TAG(loader) \
 95   LOG_TAG(logging) \
 96   LOG_TAG(malloc) \
 97   LOG_TAG(mark) \
 98   LOG_TAG(marking) \
 99   LOG_TAG(membername) \
100   LOG_TAG(memops) \
101   LOG_TAG(methodcomparator) \
102   LOG_TAG(metadata) \
103   LOG_TAG(metaspace) \
104   LOG_TAG(mmu) \
105   LOG_TAG(module) \
106   LOG_TAG(monitorinflation) \
107   LOG_TAG(monitormismatch) \
108   LOG_TAG(nestmates) \
109   LOG_TAG(nmethod) \
110   LOG_TAG(normalize) \
111   LOG_TAG(numa) \
112   LOG_TAG(objecttagging) \
113   LOG_TAG(obsolete) \
114   LOG_TAG(oldobject) \
115   LOG_TAG(oom) \
116   LOG_TAG(oopmap) \
117   LOG_TAG(oops) \
118   LOG_TAG(oopstorage) \
119   LOG_TAG(os) \
120   LOG_TAG(owner) \
121   LOG_TAG(pagesize) \
122   LOG_TAG(patch) \
123   LOG_TAG(path) \
124   LOG_TAG(perf) \
125   LOG_TAG(periodic) \
126   LOG_TAG(phases) \
127   LOG_TAG(plab) \
128   LOG_TAG(preview)   /* Trace loading of preview feature types */ \
129   LOG_TAG(promotion) \
130   LOG_TAG(preorder) /* Trace all classes loaded in order referenced (not loaded) */ \
131   LOG_TAG(protectiondomain) /* &quot;Trace protection domain verification&quot; */ \
132   LOG_TAG(ref) \
133   LOG_TAG(redefine) \
134   LOG_TAG(refine) \
135   LOG_TAG(region) \
136   LOG_TAG(reloc) \
137   LOG_TAG(remset) \
138   LOG_TAG(parser) \
139   LOG_TAG(ptrqueue) \
140   LOG_TAG(purge) \
141   LOG_TAG(record) \
142   LOG_TAG(resolve) \
143   LOG_TAG(safepoint) \
144   LOG_TAG(sampling) \
145   LOG_TAG(scavenge) \
146   LOG_TAG(setting) \
147   LOG_TAG(smr) \
148   LOG_TAG(stacktrace) \
149   LOG_TAG(stackwalk) \
150   LOG_TAG(start) \
151   LOG_TAG(startuptime) \
152   LOG_TAG(state) \
153   LOG_TAG(stats) \
154   LOG_TAG(streaming) \
155   LOG_TAG(stringdedup) \
156   LOG_TAG(stringtable) \
157   LOG_TAG(symboltable) \
158   LOG_TAG(stackmap) \
159   LOG_TAG(subclass) \
160   LOG_TAG(survivor) \
161   LOG_TAG(sweep) \
162   LOG_TAG(system) \
163   LOG_TAG(table) \
164   LOG_TAG(task) \
165   DEBUG_ONLY(LOG_TAG(test)) \
166   LOG_TAG(thread) \
167   LOG_TAG(tlab) \
168   LOG_TAG(time) \
169   LOG_TAG(timer) \
170   LOG_TAG(tracking) \
171   LOG_TAG(update) \
172   LOG_TAG(unload) /* Trace unloading of classes */ \
173   LOG_TAG(unshareable) \
174   LOG_TAG(mirror) \
175   LOG_TAG(verification) \
176   LOG_TAG(verify) \
177   LOG_TAG(vmmutex) \
178   LOG_TAG(vmoperation) \
179   LOG_TAG(vmthread) \
180   LOG_TAG(vtables) \
181   LOG_TAG(vtablestubs) \
182   LOG_TAG(workgang)
183 
184 #define PREFIX_LOG_TAG(T) (LogTag::_##T)
185 
186 // Expand a set of log tags to their prefixed names.
187 // For error detection purposes, the macro passes one more tag than what is supported.
188 // If too many tags are given, a static assert in the log class will fail.
189 #define LOG_TAGS_EXPANDED(T0, T1, T2, T3, T4, T5, ...)  PREFIX_LOG_TAG(T0), PREFIX_LOG_TAG(T1), PREFIX_LOG_TAG(T2), \
190                                                         PREFIX_LOG_TAG(T3), PREFIX_LOG_TAG(T4), PREFIX_LOG_TAG(T5)
191 // The EXPAND_VARARGS macro is required for MSVC, or it will resolve the LOG_TAGS_EXPANDED macro incorrectly.
192 #define EXPAND_VARARGS(x) x
193 #define LOG_TAGS(...) EXPAND_VARARGS(LOG_TAGS_EXPANDED(__VA_ARGS__, _NO_TAG, _NO_TAG, _NO_TAG, _NO_TAG, _NO_TAG, _NO_TAG))
194 
195 // Log tags are used to classify log messages.
196 // Each log message can be assigned between 1 to LogTag::MaxTags number of tags.
197 // Specifying multiple tags for a log message means that only outputs configured
198 // for those exact tags, or a subset of the tags with a wildcard, will see the logging.
199 // Multiple tags should be comma separated, e.g. log_error(tag1, tag2)(&quot;msg&quot;).
200 class LogTag : public AllStatic {
201  public:
202   // The maximum number of tags that a single log message can have.
203   // E.g. there might be hundreds of different tags available,
204   // but a specific log message can only be tagged with up to MaxTags of those.
205   static const size_t MaxTags = 5;
206 
207   enum type {
208     __NO_TAG,
209 #define LOG_TAG(name) _##name,
210     LOG_TAG_LIST
211 #undef LOG_TAG
212     Count
213   };
214 
215   static const char* name(LogTag::type tag) {
216     return _name[tag];
217   }
218 
219   static LogTag::type from_string(const char *str);
220   static LogTag::type fuzzy_match(const char *tag);
221   static void list_tags(outputStream* out);
222 
223  private:
224   static const char* _name[];
225 };
226 
227 typedef LogTag::type LogTagType;
228 
229 #endif // SHARE_LOGGING_LOGTAG_HPP
    </pre>
  </body>
</html>
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff doc/building.html</title>
    <link rel="stylesheet" href="../style.css" />
  </head>
<body>
<center><a href="../.hgtags.sdiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="building.md.sdiff.html" target="_top">next &gt;</a></center>    <h2>doc/building.html</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 284 &lt;tr class=&quot;odd&quot;&gt;
 285 &lt;td style=&quot;text-align: left;&quot;&gt;Linux&lt;/td&gt;
 286 &lt;td style=&quot;text-align: left;&quot;&gt;gcc 8.3.0&lt;/td&gt;
 287 &lt;/tr&gt;
 288 &lt;tr class=&quot;even&quot;&gt;
 289 &lt;td style=&quot;text-align: left;&quot;&gt;macOS&lt;/td&gt;
 290 &lt;td style=&quot;text-align: left;&quot;&gt;Apple Xcode 10.1 (using clang 10.0.0)&lt;/td&gt;
 291 &lt;/tr&gt;
 292 &lt;tr class=&quot;odd&quot;&gt;
 293 &lt;td style=&quot;text-align: left;&quot;&gt;Solaris&lt;/td&gt;
 294 &lt;td style=&quot;text-align: left;&quot;&gt;Oracle Solaris Studio 12.6 (with compiler version 5.15)&lt;/td&gt;
 295 &lt;/tr&gt;
 296 &lt;tr class=&quot;even&quot;&gt;
 297 &lt;td style=&quot;text-align: left;&quot;&gt;Windows&lt;/td&gt;
 298 &lt;td style=&quot;text-align: left;&quot;&gt;Microsoft Visual Studio 2017 update 15.9.16&lt;/td&gt;
 299 &lt;/tr&gt;
 300 &lt;/tbody&gt;
 301 &lt;/table&gt;
 302 &lt;p&gt;All compilers are expected to be able to compile to the C99 language standard, as some C99 features are used in the source code. Microsoft Visual Studio doesn&#39;t fully support C99 so in practice shared code is limited to using C99 features that it does support.&lt;/p&gt;
 303 &lt;h3 id=&quot;gcc&quot;&gt;gcc&lt;/h3&gt;
<span class="line-modified"> 304 &lt;p&gt;The minimum accepted version of gcc is 4.8. Older versions will generate a warning by &lt;code&gt;configure&lt;/code&gt; and are unlikely to work.&lt;/p&gt;</span>
 305 &lt;p&gt;The JDK is currently known to be able to compile with at least version 8.3 of gcc.&lt;/p&gt;
 306 &lt;p&gt;In general, any version between these two should be usable.&lt;/p&gt;
 307 &lt;h3 id=&quot;clang&quot;&gt;clang&lt;/h3&gt;
 308 &lt;p&gt;The minimum accepted version of clang is 3.2. Older versions will not be accepted by &lt;code&gt;configure&lt;/code&gt;.&lt;/p&gt;
 309 &lt;p&gt;To use clang instead of gcc on Linux, use &lt;code&gt;--with-toolchain-type=clang&lt;/code&gt;.&lt;/p&gt;
 310 &lt;h3 id=&quot;apple-xcode&quot;&gt;Apple Xcode&lt;/h3&gt;
 311 &lt;p&gt;The oldest supported version of Xcode is 8.&lt;/p&gt;
 312 &lt;p&gt;You will need the Xcode command lines developers tools to be able to build the JDK. (Actually, &lt;em&gt;only&lt;/em&gt; the command lines tools are needed, not the IDE.) The simplest way to install these is to run:&lt;/p&gt;
 313 &lt;pre&gt;&lt;code&gt;xcode-select --install&lt;/code&gt;&lt;/pre&gt;
 314 &lt;p&gt;It is advisable to keep an older version of Xcode for building the JDK when updating Xcode. This &lt;a href=&quot;http://iosdevelopertips.com/xcode/install-multiple-versions-of-xcode.html&quot;&gt;blog page&lt;/a&gt; has good suggestions on managing multiple Xcode versions. To use a specific version of Xcode, use &lt;code&gt;xcode-select -s&lt;/code&gt; before running &lt;code&gt;configure&lt;/code&gt;, or use &lt;code&gt;--with-toolchain-path&lt;/code&gt; to point to the version of Xcode to use, e.g. &lt;code&gt;configure --with-toolchain-path=/Applications/Xcode8.app/Contents/Developer/usr/bin&lt;/code&gt;&lt;/p&gt;
 315 &lt;p&gt;If you have recently (inadvertently) updated your OS and/or Xcode version, and the JDK can no longer be built, please see the section on &lt;a href=&quot;#problems-with-the-build-environment&quot;&gt;Problems with the Build Environment&lt;/a&gt;, and &lt;a href=&quot;#getting-help&quot;&gt;Getting Help&lt;/a&gt; to find out if there are any recent, non-merged patches available for this update.&lt;/p&gt;
 316 &lt;h3 id=&quot;oracle-solaris-studio&quot;&gt;Oracle Solaris Studio&lt;/h3&gt;
 317 &lt;p&gt;The minimum accepted version of the Solaris Studio compilers is 5.13 (corresponding to Solaris Studio 12.4). Older versions will not be accepted by configure.&lt;/p&gt;
 318 &lt;p&gt;The Solaris Studio installation should contain at least these packages:&lt;/p&gt;
 319 &lt;table&gt;
 320 &lt;thead&gt;
 321 &lt;tr class=&quot;header&quot;&gt;
 322 &lt;th style=&quot;text-align: left;&quot;&gt;Package&lt;/th&gt;
 323 &lt;th style=&quot;text-align: left;&quot;&gt;Version&lt;/th&gt;
 324 &lt;/tr&gt;
</pre>
<hr />
<pre>
 622 &lt;/tr&gt;
 623 &lt;/tbody&gt;
 624 &lt;/table&gt;
 625 &lt;p&gt;&lt;code&gt;BASE_OS&lt;/code&gt; must be one of &amp;quot;OEL6&amp;quot; for Oracle Enterprise Linux 6 or &amp;quot;Fedora&amp;quot; (if not specified &amp;quot;OEL6&amp;quot; will be the default). If the base OS is &amp;quot;Fedora&amp;quot; the corresponding Fedora release can be specified with the help of the &lt;code&gt;BASE_OS_VERSION&lt;/code&gt; option (with &amp;quot;27&amp;quot; as default version). If the build is successful, the new devkits can be found in the &lt;code&gt;build/devkit/result&lt;/code&gt; subdirectory:&lt;/p&gt;
 626 &lt;pre&gt;&lt;code&gt;cd make/devkit
 627 make TARGETS=&amp;quot;ppc64le-linux-gnu aarch64-linux-gnu&amp;quot; BASE_OS=Fedora BASE_OS_VERSION=21
 628 ls -1 ../../build/devkit/result/
 629 x86_64-linux-gnu-to-aarch64-linux-gnu
 630 x86_64-linux-gnu-to-ppc64le-linux-gnu&lt;/code&gt;&lt;/pre&gt;
 631 &lt;p&gt;Notice that devkits are not only useful for targeting different build platforms. Because they contain the full build dependencies for a system (i.e. compiler and root file system), they can easily be used to build well-known, reliable and reproducible build environments. You can for example create and use a devkit with GCC 7.3 and a Fedora 12 sysroot environment (with glibc 2.11) on Ubuntu 14.04 (which doesn&#39;t have GCC 7.3 by default) to produce OpenJDK binaries which will run on all Linux systems with runtime libraries newer than the ones from Fedora 12 (e.g. Ubuntu 16.04, SLES 11 or RHEL 6).&lt;/p&gt;
 632 &lt;h3 id=&quot;boot-jdk-and-build-jdk&quot;&gt;Boot JDK and Build JDK&lt;/h3&gt;
 633 &lt;p&gt;When cross-compiling, make sure you use a boot JDK that runs on the &lt;em&gt;build&lt;/em&gt; system, and not on the &lt;em&gt;target&lt;/em&gt; system.&lt;/p&gt;
 634 &lt;p&gt;To be able to build, we need a &amp;quot;Build JDK&amp;quot;, which is a JDK built from the current sources (that is, the same as the end result of the entire build process), but able to run on the &lt;em&gt;build&lt;/em&gt; system, and not the &lt;em&gt;target&lt;/em&gt; system. (In contrast, the Boot JDK should be from an older release, e.g. JDK 8 when building JDK 9.)&lt;/p&gt;
 635 &lt;p&gt;The build process will create a minimal Build JDK for you, as part of building. To speed up the build, you can use &lt;code&gt;--with-build-jdk&lt;/code&gt; to &lt;code&gt;configure&lt;/code&gt; to point to a pre-built Build JDK. Please note that the build result is unpredictable, and can possibly break in subtle ways, if the Build JDK does not &lt;strong&gt;exactly&lt;/strong&gt; match the current sources.&lt;/p&gt;
 636 &lt;h3 id=&quot;specifying-the-target-platform&quot;&gt;Specifying the Target Platform&lt;/h3&gt;
 637 &lt;p&gt;You &lt;em&gt;must&lt;/em&gt; specify the target platform when cross-compiling. Doing so will also automatically turn the build into a cross-compiling mode. The simplest way to do this is to use the &lt;code&gt;--openjdk-target&lt;/code&gt; argument, e.g. &lt;code&gt;--openjdk-target=arm-linux-gnueabihf&lt;/code&gt;. or &lt;code&gt;--openjdk-target=aarch64-oe-linux&lt;/code&gt;. This will automatically set the &lt;code&gt;--build&lt;/code&gt;, &lt;code&gt;--host&lt;/code&gt; and &lt;code&gt;--target&lt;/code&gt; options for autoconf, which can otherwise be confusing. (In autoconf terminology, the &amp;quot;target&amp;quot; is known as &amp;quot;host&amp;quot;, and &amp;quot;target&amp;quot; is used for building a Canadian cross-compiler.)&lt;/p&gt;
 638 &lt;h3 id=&quot;toolchain-considerations&quot;&gt;Toolchain Considerations&lt;/h3&gt;
 639 &lt;p&gt;You will need two copies of your toolchain, one which generates output that can run on the target system (the normal, or &lt;em&gt;target&lt;/em&gt;, toolchain), and one that generates output that can run on the build system (the &lt;em&gt;build&lt;/em&gt; toolchain). Note that cross-compiling is only supported for gcc at the time being. The gcc standard is to prefix cross-compiling toolchains with the target denominator. If you follow this standard, &lt;code&gt;configure&lt;/code&gt; is likely to pick up the toolchain correctly.&lt;/p&gt;
 640 &lt;p&gt;The &lt;em&gt;build&lt;/em&gt; toolchain will be autodetected just the same way the normal &lt;em&gt;build&lt;/em&gt;/&lt;em&gt;target&lt;/em&gt; toolchain will be autodetected when not cross-compiling. If this is not what you want, or if the autodetection fails, you can specify a devkit containing the &lt;em&gt;build&lt;/em&gt; toolchain using &lt;code&gt;--with-build-devkit&lt;/code&gt; to &lt;code&gt;configure&lt;/code&gt;, or by giving &lt;code&gt;BUILD_CC&lt;/code&gt; and &lt;code&gt;BUILD_CXX&lt;/code&gt; arguments.&lt;/p&gt;
 641 &lt;p&gt;It is often helpful to locate the cross-compilation tools, headers and libraries in a separate directory, outside the normal path, and point out that directory to &lt;code&gt;configure&lt;/code&gt;. Do this by setting the sysroot (&lt;code&gt;--with-sysroot&lt;/code&gt;) and appending the directory when searching for cross-compilations tools (&lt;code&gt;--with-toolchain-path&lt;/code&gt;). As a compact form, you can also use &lt;code&gt;--with-devkit&lt;/code&gt; to point to a single directory, if it is correctly setup. (See &lt;code&gt;basics.m4&lt;/code&gt; for details.)&lt;/p&gt;
<span class="line-removed"> 642 &lt;p&gt;If you are unsure what toolchain and versions to use, these have been proved working at the time of writing:&lt;/p&gt;</span>
<span class="line-removed"> 643 &lt;ul&gt;</span>
<span class="line-removed"> 644 &lt;li&gt;&lt;a href=&quot;https://releases.linaro.org/archive/13.11/components/toolchain/binaries/gcc-linaro-aarch64-linux-gnu-4.8-2013.11_linux.tar.xz&quot;&gt;aarch64&lt;/a&gt;&lt;/li&gt;</span>
<span class="line-removed"> 645 &lt;li&gt;&lt;a href=&quot;https://launchpad.net/linaro-toolchain-unsupported/trunk/2012.09/+download/gcc-linaro-arm-linux-gnueabihf-raspbian-2012.09-20120921_linux.tar.bz2&quot;&gt;arm 32-bit hardware floating point&lt;/a&gt;&lt;/li&gt;</span>
<span class="line-removed"> 646 &lt;/ul&gt;</span>
 647 &lt;h3 id=&quot;native-libraries&quot;&gt;Native Libraries&lt;/h3&gt;
 648 &lt;p&gt;You will need copies of external native libraries for the &lt;em&gt;target&lt;/em&gt; system, present on the &lt;em&gt;build&lt;/em&gt; machine while building.&lt;/p&gt;
 649 &lt;p&gt;Take care not to replace the &lt;em&gt;build&lt;/em&gt; system&#39;s version of these libraries by mistake, since that can render the &lt;em&gt;build&lt;/em&gt; machine unusable.&lt;/p&gt;
 650 &lt;p&gt;Make sure that the libraries you point to (ALSA, X11, etc) are for the &lt;em&gt;target&lt;/em&gt;, not the &lt;em&gt;build&lt;/em&gt;, platform.&lt;/p&gt;
 651 &lt;h4 id=&quot;alsa-1&quot;&gt;ALSA&lt;/h4&gt;
 652 &lt;p&gt;You will need alsa libraries suitable for your &lt;em&gt;target&lt;/em&gt; system. For most cases, using Debian&#39;s pre-built libraries work fine.&lt;/p&gt;
 653 &lt;p&gt;Note that alsa is needed even if you only want to build a headless JDK.&lt;/p&gt;
 654 &lt;ul&gt;
 655 &lt;li&gt;&lt;p&gt;Go to &lt;a href=&quot;https://www.debian.org/distrib/packages&quot;&gt;Debian Package Search&lt;/a&gt; and search for the &lt;code&gt;libasound2&lt;/code&gt; and &lt;code&gt;libasound2-dev&lt;/code&gt; packages for your &lt;em&gt;target&lt;/em&gt; system. Download them to /tmp.&lt;/p&gt;&lt;/li&gt;
 656 &lt;li&gt;Install the libraries into the cross-compilation toolchain. For instance:&lt;/li&gt;
 657 &lt;/ul&gt;
 658 &lt;pre&gt;&lt;code&gt;cd /tools/gcc-linaro-arm-linux-gnueabihf-raspbian-2012.09-20120921_linux/arm-linux-gnueabihf/libc
 659 dpkg-deb -x /tmp/libasound2_1.0.25-4_armhf.deb .
 660 dpkg-deb -x /tmp/libasound2-dev_1.0.25-4_armhf.deb .&lt;/code&gt;&lt;/pre&gt;
 661 &lt;ul&gt;
 662 &lt;li&gt;If alsa is not properly detected by &lt;code&gt;configure&lt;/code&gt;, you can point it out by &lt;code&gt;--with-alsa&lt;/code&gt;.&lt;/li&gt;
 663 &lt;/ul&gt;
 664 &lt;h4 id=&quot;x11-1&quot;&gt;X11&lt;/h4&gt;
 665 &lt;p&gt;You will need X11 libraries suitable for your &lt;em&gt;target&lt;/em&gt; system. For most cases, using Debian&#39;s pre-built libraries work fine.&lt;/p&gt;
 666 &lt;p&gt;Note that X11 is needed even if you only want to build a headless JDK.&lt;/p&gt;
</pre>
</td>
<td>
<hr />
<pre>
 284 &lt;tr class=&quot;odd&quot;&gt;
 285 &lt;td style=&quot;text-align: left;&quot;&gt;Linux&lt;/td&gt;
 286 &lt;td style=&quot;text-align: left;&quot;&gt;gcc 8.3.0&lt;/td&gt;
 287 &lt;/tr&gt;
 288 &lt;tr class=&quot;even&quot;&gt;
 289 &lt;td style=&quot;text-align: left;&quot;&gt;macOS&lt;/td&gt;
 290 &lt;td style=&quot;text-align: left;&quot;&gt;Apple Xcode 10.1 (using clang 10.0.0)&lt;/td&gt;
 291 &lt;/tr&gt;
 292 &lt;tr class=&quot;odd&quot;&gt;
 293 &lt;td style=&quot;text-align: left;&quot;&gt;Solaris&lt;/td&gt;
 294 &lt;td style=&quot;text-align: left;&quot;&gt;Oracle Solaris Studio 12.6 (with compiler version 5.15)&lt;/td&gt;
 295 &lt;/tr&gt;
 296 &lt;tr class=&quot;even&quot;&gt;
 297 &lt;td style=&quot;text-align: left;&quot;&gt;Windows&lt;/td&gt;
 298 &lt;td style=&quot;text-align: left;&quot;&gt;Microsoft Visual Studio 2017 update 15.9.16&lt;/td&gt;
 299 &lt;/tr&gt;
 300 &lt;/tbody&gt;
 301 &lt;/table&gt;
 302 &lt;p&gt;All compilers are expected to be able to compile to the C99 language standard, as some C99 features are used in the source code. Microsoft Visual Studio doesn&#39;t fully support C99 so in practice shared code is limited to using C99 features that it does support.&lt;/p&gt;
 303 &lt;h3 id=&quot;gcc&quot;&gt;gcc&lt;/h3&gt;
<span class="line-modified"> 304 &lt;p&gt;The minimum accepted version of gcc is 5.0. Older versions will generate a warning by &lt;code&gt;configure&lt;/code&gt; and are unlikely to work.&lt;/p&gt;</span>
 305 &lt;p&gt;The JDK is currently known to be able to compile with at least version 8.3 of gcc.&lt;/p&gt;
 306 &lt;p&gt;In general, any version between these two should be usable.&lt;/p&gt;
 307 &lt;h3 id=&quot;clang&quot;&gt;clang&lt;/h3&gt;
 308 &lt;p&gt;The minimum accepted version of clang is 3.2. Older versions will not be accepted by &lt;code&gt;configure&lt;/code&gt;.&lt;/p&gt;
 309 &lt;p&gt;To use clang instead of gcc on Linux, use &lt;code&gt;--with-toolchain-type=clang&lt;/code&gt;.&lt;/p&gt;
 310 &lt;h3 id=&quot;apple-xcode&quot;&gt;Apple Xcode&lt;/h3&gt;
 311 &lt;p&gt;The oldest supported version of Xcode is 8.&lt;/p&gt;
 312 &lt;p&gt;You will need the Xcode command lines developers tools to be able to build the JDK. (Actually, &lt;em&gt;only&lt;/em&gt; the command lines tools are needed, not the IDE.) The simplest way to install these is to run:&lt;/p&gt;
 313 &lt;pre&gt;&lt;code&gt;xcode-select --install&lt;/code&gt;&lt;/pre&gt;
 314 &lt;p&gt;It is advisable to keep an older version of Xcode for building the JDK when updating Xcode. This &lt;a href=&quot;http://iosdevelopertips.com/xcode/install-multiple-versions-of-xcode.html&quot;&gt;blog page&lt;/a&gt; has good suggestions on managing multiple Xcode versions. To use a specific version of Xcode, use &lt;code&gt;xcode-select -s&lt;/code&gt; before running &lt;code&gt;configure&lt;/code&gt;, or use &lt;code&gt;--with-toolchain-path&lt;/code&gt; to point to the version of Xcode to use, e.g. &lt;code&gt;configure --with-toolchain-path=/Applications/Xcode8.app/Contents/Developer/usr/bin&lt;/code&gt;&lt;/p&gt;
 315 &lt;p&gt;If you have recently (inadvertently) updated your OS and/or Xcode version, and the JDK can no longer be built, please see the section on &lt;a href=&quot;#problems-with-the-build-environment&quot;&gt;Problems with the Build Environment&lt;/a&gt;, and &lt;a href=&quot;#getting-help&quot;&gt;Getting Help&lt;/a&gt; to find out if there are any recent, non-merged patches available for this update.&lt;/p&gt;
 316 &lt;h3 id=&quot;oracle-solaris-studio&quot;&gt;Oracle Solaris Studio&lt;/h3&gt;
 317 &lt;p&gt;The minimum accepted version of the Solaris Studio compilers is 5.13 (corresponding to Solaris Studio 12.4). Older versions will not be accepted by configure.&lt;/p&gt;
 318 &lt;p&gt;The Solaris Studio installation should contain at least these packages:&lt;/p&gt;
 319 &lt;table&gt;
 320 &lt;thead&gt;
 321 &lt;tr class=&quot;header&quot;&gt;
 322 &lt;th style=&quot;text-align: left;&quot;&gt;Package&lt;/th&gt;
 323 &lt;th style=&quot;text-align: left;&quot;&gt;Version&lt;/th&gt;
 324 &lt;/tr&gt;
</pre>
<hr />
<pre>
 622 &lt;/tr&gt;
 623 &lt;/tbody&gt;
 624 &lt;/table&gt;
 625 &lt;p&gt;&lt;code&gt;BASE_OS&lt;/code&gt; must be one of &amp;quot;OEL6&amp;quot; for Oracle Enterprise Linux 6 or &amp;quot;Fedora&amp;quot; (if not specified &amp;quot;OEL6&amp;quot; will be the default). If the base OS is &amp;quot;Fedora&amp;quot; the corresponding Fedora release can be specified with the help of the &lt;code&gt;BASE_OS_VERSION&lt;/code&gt; option (with &amp;quot;27&amp;quot; as default version). If the build is successful, the new devkits can be found in the &lt;code&gt;build/devkit/result&lt;/code&gt; subdirectory:&lt;/p&gt;
 626 &lt;pre&gt;&lt;code&gt;cd make/devkit
 627 make TARGETS=&amp;quot;ppc64le-linux-gnu aarch64-linux-gnu&amp;quot; BASE_OS=Fedora BASE_OS_VERSION=21
 628 ls -1 ../../build/devkit/result/
 629 x86_64-linux-gnu-to-aarch64-linux-gnu
 630 x86_64-linux-gnu-to-ppc64le-linux-gnu&lt;/code&gt;&lt;/pre&gt;
 631 &lt;p&gt;Notice that devkits are not only useful for targeting different build platforms. Because they contain the full build dependencies for a system (i.e. compiler and root file system), they can easily be used to build well-known, reliable and reproducible build environments. You can for example create and use a devkit with GCC 7.3 and a Fedora 12 sysroot environment (with glibc 2.11) on Ubuntu 14.04 (which doesn&#39;t have GCC 7.3 by default) to produce OpenJDK binaries which will run on all Linux systems with runtime libraries newer than the ones from Fedora 12 (e.g. Ubuntu 16.04, SLES 11 or RHEL 6).&lt;/p&gt;
 632 &lt;h3 id=&quot;boot-jdk-and-build-jdk&quot;&gt;Boot JDK and Build JDK&lt;/h3&gt;
 633 &lt;p&gt;When cross-compiling, make sure you use a boot JDK that runs on the &lt;em&gt;build&lt;/em&gt; system, and not on the &lt;em&gt;target&lt;/em&gt; system.&lt;/p&gt;
 634 &lt;p&gt;To be able to build, we need a &amp;quot;Build JDK&amp;quot;, which is a JDK built from the current sources (that is, the same as the end result of the entire build process), but able to run on the &lt;em&gt;build&lt;/em&gt; system, and not the &lt;em&gt;target&lt;/em&gt; system. (In contrast, the Boot JDK should be from an older release, e.g. JDK 8 when building JDK 9.)&lt;/p&gt;
 635 &lt;p&gt;The build process will create a minimal Build JDK for you, as part of building. To speed up the build, you can use &lt;code&gt;--with-build-jdk&lt;/code&gt; to &lt;code&gt;configure&lt;/code&gt; to point to a pre-built Build JDK. Please note that the build result is unpredictable, and can possibly break in subtle ways, if the Build JDK does not &lt;strong&gt;exactly&lt;/strong&gt; match the current sources.&lt;/p&gt;
 636 &lt;h3 id=&quot;specifying-the-target-platform&quot;&gt;Specifying the Target Platform&lt;/h3&gt;
 637 &lt;p&gt;You &lt;em&gt;must&lt;/em&gt; specify the target platform when cross-compiling. Doing so will also automatically turn the build into a cross-compiling mode. The simplest way to do this is to use the &lt;code&gt;--openjdk-target&lt;/code&gt; argument, e.g. &lt;code&gt;--openjdk-target=arm-linux-gnueabihf&lt;/code&gt;. or &lt;code&gt;--openjdk-target=aarch64-oe-linux&lt;/code&gt;. This will automatically set the &lt;code&gt;--build&lt;/code&gt;, &lt;code&gt;--host&lt;/code&gt; and &lt;code&gt;--target&lt;/code&gt; options for autoconf, which can otherwise be confusing. (In autoconf terminology, the &amp;quot;target&amp;quot; is known as &amp;quot;host&amp;quot;, and &amp;quot;target&amp;quot; is used for building a Canadian cross-compiler.)&lt;/p&gt;
 638 &lt;h3 id=&quot;toolchain-considerations&quot;&gt;Toolchain Considerations&lt;/h3&gt;
 639 &lt;p&gt;You will need two copies of your toolchain, one which generates output that can run on the target system (the normal, or &lt;em&gt;target&lt;/em&gt;, toolchain), and one that generates output that can run on the build system (the &lt;em&gt;build&lt;/em&gt; toolchain). Note that cross-compiling is only supported for gcc at the time being. The gcc standard is to prefix cross-compiling toolchains with the target denominator. If you follow this standard, &lt;code&gt;configure&lt;/code&gt; is likely to pick up the toolchain correctly.&lt;/p&gt;
 640 &lt;p&gt;The &lt;em&gt;build&lt;/em&gt; toolchain will be autodetected just the same way the normal &lt;em&gt;build&lt;/em&gt;/&lt;em&gt;target&lt;/em&gt; toolchain will be autodetected when not cross-compiling. If this is not what you want, or if the autodetection fails, you can specify a devkit containing the &lt;em&gt;build&lt;/em&gt; toolchain using &lt;code&gt;--with-build-devkit&lt;/code&gt; to &lt;code&gt;configure&lt;/code&gt;, or by giving &lt;code&gt;BUILD_CC&lt;/code&gt; and &lt;code&gt;BUILD_CXX&lt;/code&gt; arguments.&lt;/p&gt;
 641 &lt;p&gt;It is often helpful to locate the cross-compilation tools, headers and libraries in a separate directory, outside the normal path, and point out that directory to &lt;code&gt;configure&lt;/code&gt;. Do this by setting the sysroot (&lt;code&gt;--with-sysroot&lt;/code&gt;) and appending the directory when searching for cross-compilations tools (&lt;code&gt;--with-toolchain-path&lt;/code&gt;). As a compact form, you can also use &lt;code&gt;--with-devkit&lt;/code&gt; to point to a single directory, if it is correctly setup. (See &lt;code&gt;basics.m4&lt;/code&gt; for details.)&lt;/p&gt;





 642 &lt;h3 id=&quot;native-libraries&quot;&gt;Native Libraries&lt;/h3&gt;
 643 &lt;p&gt;You will need copies of external native libraries for the &lt;em&gt;target&lt;/em&gt; system, present on the &lt;em&gt;build&lt;/em&gt; machine while building.&lt;/p&gt;
 644 &lt;p&gt;Take care not to replace the &lt;em&gt;build&lt;/em&gt; system&#39;s version of these libraries by mistake, since that can render the &lt;em&gt;build&lt;/em&gt; machine unusable.&lt;/p&gt;
 645 &lt;p&gt;Make sure that the libraries you point to (ALSA, X11, etc) are for the &lt;em&gt;target&lt;/em&gt;, not the &lt;em&gt;build&lt;/em&gt;, platform.&lt;/p&gt;
 646 &lt;h4 id=&quot;alsa-1&quot;&gt;ALSA&lt;/h4&gt;
 647 &lt;p&gt;You will need alsa libraries suitable for your &lt;em&gt;target&lt;/em&gt; system. For most cases, using Debian&#39;s pre-built libraries work fine.&lt;/p&gt;
 648 &lt;p&gt;Note that alsa is needed even if you only want to build a headless JDK.&lt;/p&gt;
 649 &lt;ul&gt;
 650 &lt;li&gt;&lt;p&gt;Go to &lt;a href=&quot;https://www.debian.org/distrib/packages&quot;&gt;Debian Package Search&lt;/a&gt; and search for the &lt;code&gt;libasound2&lt;/code&gt; and &lt;code&gt;libasound2-dev&lt;/code&gt; packages for your &lt;em&gt;target&lt;/em&gt; system. Download them to /tmp.&lt;/p&gt;&lt;/li&gt;
 651 &lt;li&gt;Install the libraries into the cross-compilation toolchain. For instance:&lt;/li&gt;
 652 &lt;/ul&gt;
 653 &lt;pre&gt;&lt;code&gt;cd /tools/gcc-linaro-arm-linux-gnueabihf-raspbian-2012.09-20120921_linux/arm-linux-gnueabihf/libc
 654 dpkg-deb -x /tmp/libasound2_1.0.25-4_armhf.deb .
 655 dpkg-deb -x /tmp/libasound2-dev_1.0.25-4_armhf.deb .&lt;/code&gt;&lt;/pre&gt;
 656 &lt;ul&gt;
 657 &lt;li&gt;If alsa is not properly detected by &lt;code&gt;configure&lt;/code&gt;, you can point it out by &lt;code&gt;--with-alsa&lt;/code&gt;.&lt;/li&gt;
 658 &lt;/ul&gt;
 659 &lt;h4 id=&quot;x11-1&quot;&gt;X11&lt;/h4&gt;
 660 &lt;p&gt;You will need X11 libraries suitable for your &lt;em&gt;target&lt;/em&gt; system. For most cases, using Debian&#39;s pre-built libraries work fine.&lt;/p&gt;
 661 &lt;p&gt;Note that X11 is needed even if you only want to build a headless JDK.&lt;/p&gt;
</pre>
</td>
</tr>
</table>
<center><a href="../.hgtags.sdiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="building.md.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>
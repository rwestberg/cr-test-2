<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New modules/javafx.web/src/main/java/com/sun/javafx/webkit/KeyCodeMap.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (c) 2011, 2014, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package com.sun.javafx.webkit;
 27 
 28 import com.sun.webkit.event.WCKeyEvent;
 29 import java.util.Map;
 30 import javafx.scene.input.KeyCode;
 31 
 32 /**
 33  * The static mapping from JavaFX {@code KeyCode}s to Windows virtual key
 34  * codes and WebKit key identifiers.
 35  * For why there is a need to map to Windows virtual key codes and WebKit
 36  * key identifiers, see Source/WebCore/platform/PlatformKeyboardEvent.h,
 37  * Source/WebKit/chromium/public/WebInputEvent.h
 38  * (WebKeyboardEvent::windowsKeyCode and WebKeyboardEvent::nativeKeyCode),
 39  * and Source/WebCore/platform/chromium/KeyboardCodes.h.
 40  */
 41 public final class KeyCodeMap {
 42 
 43     /**
 44      * The information associated with a {@code KeyCode}.
 45      */
 46     public static final class Entry {
 47         private final int windowsVirtualKeyCode;
 48         private final String keyIdentifier;
 49 
 50         private Entry(int windowsVirtualKeyCode, String keyIdentifier) {
 51             this.windowsVirtualKeyCode = windowsVirtualKeyCode;
 52             this.keyIdentifier = keyIdentifier;
 53         }
 54 
 55         public int getWindowsVirtualKeyCode() {
 56             return windowsVirtualKeyCode;
 57         }
 58 
 59         public String getKeyIdentifier() {
 60             return keyIdentifier;
 61         }
 62     };
 63 
 64     private static final Map&lt;KeyCode, Entry&gt; MAP = Map.ofEntries(
 65         put(KeyCode.ENTER,             WCKeyEvent.VK_RETURN, &quot;Enter&quot;),
 66         put(KeyCode.BACK_SPACE,        WCKeyEvent.VK_BACK),
 67         put(KeyCode.TAB,               WCKeyEvent.VK_TAB),
 68         put(KeyCode.CANCEL,            0x03),
 69         put(KeyCode.CLEAR,             0x0C, &quot;Clear&quot;),
 70         put(KeyCode.SHIFT,             0x10, &quot;Shift&quot;),
 71         put(KeyCode.CONTROL,           0x11, &quot;Control&quot;),
 72         put(KeyCode.ALT,               0x12, &quot;Alt&quot;),
 73         put(KeyCode.PAUSE,             0x13, &quot;Pause&quot;),
 74         put(KeyCode.CAPS,              0x14, &quot;CapsLock&quot;),
 75         put(KeyCode.ESCAPE,            WCKeyEvent.VK_ESCAPE),
 76         put(KeyCode.SPACE,             0x20),
 77         put(KeyCode.PAGE_UP,           WCKeyEvent.VK_PRIOR, &quot;PageUp&quot;),
 78         put(KeyCode.PAGE_DOWN,         WCKeyEvent.VK_NEXT, &quot;PageDown&quot;),
 79         put(KeyCode.END,               WCKeyEvent.VK_END, &quot;End&quot;),
 80         put(KeyCode.HOME,              WCKeyEvent.VK_HOME, &quot;Home&quot;),
 81         put(KeyCode.LEFT,              WCKeyEvent.VK_LEFT, &quot;Left&quot;),
 82         put(KeyCode.UP,                WCKeyEvent.VK_UP, &quot;Up&quot;),
 83         put(KeyCode.RIGHT,             WCKeyEvent.VK_RIGHT, &quot;Right&quot;),
 84         put(KeyCode.DOWN,              WCKeyEvent.VK_DOWN, &quot;Down&quot;),
 85         put(KeyCode.COMMA,             0xBC),
 86         put(KeyCode.MINUS,             0xBD),
 87         put(KeyCode.PERIOD,            WCKeyEvent.VK_OEM_PERIOD),
 88         put(KeyCode.SLASH,             0xBF),
 89         put(KeyCode.DIGIT0,            0x30),
 90         put(KeyCode.DIGIT1,            0x31),
 91         put(KeyCode.DIGIT2,            0x32),
 92         put(KeyCode.DIGIT3,            0x33),
 93         put(KeyCode.DIGIT4,            0x34),
 94         put(KeyCode.DIGIT5,            0x35),
 95         put(KeyCode.DIGIT6,            0x36),
 96         put(KeyCode.DIGIT7,            0x37),
 97         put(KeyCode.DIGIT8,            0x38),
 98         put(KeyCode.DIGIT9,            0x39),
 99         put(KeyCode.SEMICOLON,         0xBA),
100         put(KeyCode.EQUALS,            0xBB),
101         put(KeyCode.A,                 0x41),
102         put(KeyCode.B,                 0x42),
103         put(KeyCode.C,                 0x43),
104         put(KeyCode.D,                 0x44),
105         put(KeyCode.E,                 0x45),
106         put(KeyCode.F,                 0x46),
107         put(KeyCode.G,                 0x47),
108         put(KeyCode.H,                 0x48),
109         put(KeyCode.I,                 0x49),
110         put(KeyCode.J,                 0x4A),
111         put(KeyCode.K,                 0x4B),
112         put(KeyCode.L,                 0x4C),
113         put(KeyCode.M,                 0x4D),
114         put(KeyCode.N,                 0x4E),
115         put(KeyCode.O,                 0x4F),
116         put(KeyCode.P,                 0x50),
117         put(KeyCode.Q,                 0x51),
118         put(KeyCode.R,                 0x52),
119         put(KeyCode.S,                 0x53),
120         put(KeyCode.T,                 0x54),
121         put(KeyCode.U,                 0x55),
122         put(KeyCode.V,                 0x56),
123         put(KeyCode.W,                 0x57),
124         put(KeyCode.X,                 0x58),
125         put(KeyCode.Y,                 0x59),
126         put(KeyCode.Z,                 0x5A),
127         put(KeyCode.OPEN_BRACKET,      0xDB),
128         put(KeyCode.BACK_SLASH,        0xDC),
129         put(KeyCode.CLOSE_BRACKET,     0xDD),
130         put(KeyCode.NUMPAD0,           0x60),
131         put(KeyCode.NUMPAD1,           0x61),
132         put(KeyCode.NUMPAD2,           0x62),
133         put(KeyCode.NUMPAD3,           0x63),
134         put(KeyCode.NUMPAD4,           0x64),
135         put(KeyCode.NUMPAD5,           0x65),
136         put(KeyCode.NUMPAD6,           0x66),
137         put(KeyCode.NUMPAD7,           0x67),
138         put(KeyCode.NUMPAD8,           0x68),
139         put(KeyCode.NUMPAD9,           0x69),
140         put(KeyCode.MULTIPLY,          0x6A),
141         put(KeyCode.ADD,               0x6B),
142         put(KeyCode.SEPARATOR,         0x6C),
143         put(KeyCode.SUBTRACT,          0x6D),
144         put(KeyCode.DECIMAL,           0x6E),
145         put(KeyCode.DIVIDE,            0x6F),
146         put(KeyCode.DELETE,            WCKeyEvent.VK_DELETE, &quot;U+007F&quot;),
147         put(KeyCode.NUM_LOCK,          0x90),
148         put(KeyCode.SCROLL_LOCK,       0x91, &quot;Scroll&quot;),
149         put(KeyCode.F1,                0x70, &quot;F1&quot;),
150         put(KeyCode.F2,                0x71, &quot;F2&quot;),
151         put(KeyCode.F3,                0x72, &quot;F3&quot;),
152         put(KeyCode.F4,                0x73, &quot;F4&quot;),
153         put(KeyCode.F5,                0x74, &quot;F5&quot;),
154         put(KeyCode.F6,                0x75, &quot;F6&quot;),
155         put(KeyCode.F7,                0x76, &quot;F7&quot;),
156         put(KeyCode.F8,                0x77, &quot;F8&quot;),
157         put(KeyCode.F9,                0x78, &quot;F9&quot;),
158         put(KeyCode.F10,               0x79, &quot;F10&quot;),
159         put(KeyCode.F11,               0x7A, &quot;F11&quot;),
160         put(KeyCode.F12,               0x7B, &quot;F12&quot;),
161         put(KeyCode.F13,               0x7C, &quot;F13&quot;),
162         put(KeyCode.F14,               0x7D, &quot;F14&quot;),
163         put(KeyCode.F15,               0x7E, &quot;F15&quot;),
164         put(KeyCode.F16,               0x7F, &quot;F16&quot;),
165         put(KeyCode.F17,               0x80, &quot;F17&quot;),
166         put(KeyCode.F18,               0x81, &quot;F18&quot;),
167         put(KeyCode.F19,               0x82, &quot;F19&quot;),
168         put(KeyCode.F20,               0x83, &quot;F20&quot;),
169         put(KeyCode.F21,               0x84, &quot;F21&quot;),
170         put(KeyCode.F22,               0x85, &quot;F22&quot;),
171         put(KeyCode.F23,               0x86, &quot;F23&quot;),
172         put(KeyCode.F24,               0x87, &quot;F24&quot;),
173         put(KeyCode.PRINTSCREEN,       0x2C, &quot;PrintScreen&quot;),
174         put(KeyCode.INSERT,            WCKeyEvent.VK_INSERT, &quot;Insert&quot;),
175         put(KeyCode.HELP,              0x2F, &quot;Help&quot;),
176         put(KeyCode.META,              0x00, &quot;Meta&quot;),
177         put(KeyCode.BACK_QUOTE,        0xC0),
178         put(KeyCode.QUOTE,             0xDE),
179         put(KeyCode.KP_UP,             WCKeyEvent.VK_UP, &quot;Up&quot;),
180         put(KeyCode.KP_DOWN,           WCKeyEvent.VK_DOWN, &quot;Down&quot;),
181         put(KeyCode.KP_LEFT,           WCKeyEvent.VK_LEFT, &quot;Left&quot;),
182         put(KeyCode.KP_RIGHT,          WCKeyEvent.VK_RIGHT, &quot;Right&quot;),
183         put(KeyCode.AMPERSAND,         0x37),
184         put(KeyCode.ASTERISK,          0x38),
185         put(KeyCode.QUOTEDBL,          0xDE),
186         put(KeyCode.LESS,              0xBC),
187         put(KeyCode.GREATER,           WCKeyEvent.VK_OEM_PERIOD),
188         put(KeyCode.BRACELEFT,         0xDB),
189         put(KeyCode.BRACERIGHT,        0xDD),
190         put(KeyCode.AT,                0x32),
191         put(KeyCode.COLON,             0xBA),
192         put(KeyCode.CIRCUMFLEX,        0x36),
193         put(KeyCode.DOLLAR,            0x34),
194         put(KeyCode.EXCLAMATION_MARK,  0x31),
195         put(KeyCode.LEFT_PARENTHESIS,  0x39),
196         put(KeyCode.NUMBER_SIGN,       0x33),
197         put(KeyCode.PLUS,              0xBB),
198         put(KeyCode.RIGHT_PARENTHESIS, 0x30),
199         put(KeyCode.UNDERSCORE,        0xBD),
200         put(KeyCode.WINDOWS,           0x5B, &quot;Win&quot;),
201         put(KeyCode.CONTEXT_MENU,      0x5D),
202         put(KeyCode.FINAL,             0x18),
203         put(KeyCode.CONVERT,           0x1C),
204         put(KeyCode.NONCONVERT,        0x1D),
205         put(KeyCode.ACCEPT,            0x1E),
206         put(KeyCode.MODECHANGE,        0x1F),
207         put(KeyCode.KANA,              0x15),
208         put(KeyCode.KANJI,             0x19),
209         put(KeyCode.ALT_GRAPH,         0xA5),
210         put(KeyCode.PLAY,              0xFA),
211         put(KeyCode.TRACK_PREV,        0xB1),
212         put(KeyCode.TRACK_NEXT,        0xB0),
213         put(KeyCode.VOLUME_UP,         0xAF),
214         put(KeyCode.VOLUME_DOWN,       0xAE),
215         put(KeyCode.MUTE,              0xAD));
216 
217     private static Map.Entry&lt;KeyCode, Entry&gt; put(KeyCode keyCode, int windowsVirtualKeyCode, String keyIdentifier) {
218         return Map.entry(keyCode, new Entry(windowsVirtualKeyCode, keyIdentifier));
219     }
220 
221     private static Map.Entry&lt;KeyCode, Entry&gt; put(KeyCode keyCode, int windowsVirtualKeyCode) {
222         return put(keyCode, windowsVirtualKeyCode, null);
223     }
224 
225     /**
226      * Returns an {@link Entry} object containing the Windows
227      * virtual key code and the key identifier associated with
228      * a given {@link KeyCode}.
229      */
230     public static Entry lookup(KeyCode keyCode) {
231         Entry entry = MAP.get(keyCode);
232         if (entry == null || entry.getKeyIdentifier() == null) {
233             int windowsVirtualKeyCode = entry != null
234                     ? entry.getWindowsVirtualKeyCode() : 0;
235             String keyIdentifier =
236                     String.format(&quot;U+%04X&quot;, windowsVirtualKeyCode);
237             entry = new Entry(windowsVirtualKeyCode, keyIdentifier);
238         }
239         return entry;
240     }
241 }
    </pre>
  </body>
</html>
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.controls/src/test/java/test/javafx/scene/control/TableViewKeyInputTest.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../main/java/com/sun/javafx/scene/control/behavior/TableViewBehaviorBase.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>modules/javafx.controls/src/test/java/test/javafx/scene/control/TableViewKeyInputTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 2011, 2019, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 2011, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -33,10 +33,12 @@</span>
  import javafx.scene.Group;
  import javafx.scene.control.Button;
  import javafx.scene.input.KeyCode;
  import javafx.scene.layout.HBox;
  
<span class="udiff-line-added">+ import java.util.Arrays;</span>
<span class="udiff-line-added">+ import java.util.Collection;</span>
  import java.util.List;
  import java.util.function.Function;
  
  import com.sun.javafx.PlatformUtil;
  import com.sun.javafx.util.Utils;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -55,22 +57,35 @@</span>
  import javafx.scene.control.TableColumn;
  import javafx.scene.control.TableFocusModel;
  import javafx.scene.control.TablePosition;
  import javafx.scene.control.TableSelectionModel;
  import javafx.scene.control.TableView;
<span class="udiff-line-added">+ import javafx.geometry.NodeOrientation;</span>
  import org.junit.After;
  import org.junit.Before;
  import org.junit.Ignore;
  import org.junit.Test;
<span class="udiff-line-added">+ import org.junit.runner.RunWith;</span>
<span class="udiff-line-added">+ import org.junit.runners.Parameterized;</span>
<span class="udiff-line-added">+ </span>
  import static org.junit.Assert.assertEquals;
  import static org.junit.Assert.assertFalse;
  import static org.junit.Assert.assertNotSame;
  import static org.junit.Assert.assertNull;
  import static org.junit.Assert.assertTrue;
<span class="udiff-line-added">+ </span>
  import static org.junit.Assert.fail;
  
<span class="udiff-line-added">+ @RunWith(Parameterized.class)</span>
  public class TableViewKeyInputTest {
<span class="udiff-line-added">+     @Parameterized.Parameters public static Collection implementations() {</span>
<span class="udiff-line-added">+         return Arrays.asList(new Object[][]{</span>
<span class="udiff-line-added">+                 {NodeOrientation.LEFT_TO_RIGHT},</span>
<span class="udiff-line-added">+                 {NodeOrientation.RIGHT_TO_LEFT}</span>
<span class="udiff-line-added">+         });</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
      private TableView&lt;String&gt; tableView;
  //    private TableSelectionModel&lt;String&gt; sm;
      private TableView.TableViewSelectionModel&lt;String&gt; sm;
      private TableView.TableViewFocusModel&lt;String&gt; fm;
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -82,12 +97,19 @@</span>
      private TableColumn&lt;String, String&gt; col1;
      private TableColumn&lt;String, String&gt; col2;
      private TableColumn&lt;String, String&gt; col3;
      private TableColumn&lt;String, String&gt; col4;
  
<span class="udiff-line-added">+     private NodeOrientation orientation;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     public TableViewKeyInputTest(NodeOrientation val) {</span>
<span class="udiff-line-added">+         orientation = val;</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
      @Before public void setup() {
          tableView = new TableView&lt;String&gt;();
<span class="udiff-line-added">+         tableView.setNodeOrientation(orientation);</span>
          sm = tableView.getSelectionModel();
          fm = tableView.getFocusModel();
  
          sm.setSelectionMode(SelectionMode.MULTIPLE);
          sm.setCellSelectionEnabled(false);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1107,21 +1129,32 @@</span>
      // Test 1
      @Test public void test_rt18591_cell_1() {
          sm.setSelectionMode(SelectionMode.MULTIPLE);
          sm.setCellSelectionEnabled(true);
          sm.select(0, col0);
<span class="udiff-line-modified-removed">-         keyboard.doRightArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-modified-removed">-         keyboard.doRightArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-added">+             keyboard.doRightArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+             keyboard.doRightArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             keyboard.doLeftArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+             keyboard.doLeftArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+         }</span>
          keyboard.doKeyPress(KeyCode.SPACE,
                  KeyModifier.getShortcutKey(),
                  (Utils.isMac()  ? KeyModifier.CTRL : null));
          assertTrue(sm.isSelected(0,col0));
          assertTrue(sm.isSelected(0,col2));
          assertTrue(isAnchor(0,2));
  
<span class="udiff-line-modified-removed">-         keyboard.doRightArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-modified-removed">-         keyboard.doRightArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             keyboard.doRightArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+             keyboard.doRightArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             keyboard.doLeftArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+             keyboard.doLeftArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+         }</span>
          assertTrue(sm.isSelected(0,col0));
          assertTrue(sm.isSelected(0,col2));
          assertTrue(sm.isSelected(0,col3));
          assertTrue(sm.isSelected(0,col4));
          assertTrue(isAnchor(0,2));
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1130,21 +1163,31 @@</span>
      // Test 2
      @Test public void test_rt18591_cell_2() {
          sm.setSelectionMode(SelectionMode.MULTIPLE);
          sm.setCellSelectionEnabled(true);
          sm.select(0, col4);
<span class="udiff-line-modified-removed">-         keyboard.doLeftArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-modified-removed">-         keyboard.doLeftArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             keyboard.doLeftArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+             keyboard.doLeftArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             keyboard.doRightArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+             keyboard.doRightArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+         }</span>
          keyboard.doKeyPress(KeyCode.SPACE,
                  KeyModifier.getShortcutKey(),
                  (Utils.isMac()  ? KeyModifier.CTRL : null));
          assertTrue(sm.isSelected(0,col4));
          assertTrue(sm.isSelected(0,col2));
          assertTrue(isAnchor(0,2));
  
<span class="udiff-line-modified-removed">-         keyboard.doLeftArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-modified-removed">-         keyboard.doLeftArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             keyboard.doLeftArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+             keyboard.doLeftArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             keyboard.doRightArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+             keyboard.doRightArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+         }</span>
          assertTrue(sm.isSelected(0,col0));
          assertTrue(sm.isSelected(0,col1));
          assertTrue(sm.isSelected(0,col2));
          assertTrue(sm.isSelected(0,col4));
          assertTrue(isAnchor(0,2));
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1153,30 +1196,46 @@</span>
      // Test 3
      @Test public void test_rt18591_cell_3() {
          sm.setSelectionMode(SelectionMode.MULTIPLE);
          sm.setCellSelectionEnabled(true);
          sm.select(0, col0);
<span class="udiff-line-modified-removed">-         keyboard.doRightArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-modified-removed">-         keyboard.doRightArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             keyboard.doRightArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+             keyboard.doRightArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             keyboard.doLeftArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+             keyboard.doLeftArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+         }</span>
          keyboard.doKeyPress(KeyCode.SPACE,
                  KeyModifier.getShortcutKey(),
                  (Utils.isMac()  ? KeyModifier.CTRL : null));
          assertTrue(sm.isSelected(0,col0));
          assertTrue(sm.isSelected(0,col2));
          assertTrue(isAnchor(0,2));
  
<span class="udiff-line-modified-removed">-         keyboard.doRightArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-modified-removed">-         keyboard.doRightArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             keyboard.doRightArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+             keyboard.doRightArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             keyboard.doLeftArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+             keyboard.doLeftArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+         }</span>
          assertTrue(sm.isSelected(0,col0));
          assertTrue(sm.isSelected(0,col2));
          assertTrue(sm.isSelected(0,col3));
          assertTrue(sm.isSelected(0,col4));
          assertTrue(isAnchor(0,2));
  
<span class="udiff-line-modified-removed">-         keyboard.doLeftArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-modified-removed">-         keyboard.doLeftArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-modified-removed">-         keyboard.doLeftArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             keyboard.doLeftArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-modified-added">+             keyboard.doLeftArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+             keyboard.doLeftArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             keyboard.doRightArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+             keyboard.doRightArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+             keyboard.doRightArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+         }</span>
          assertTrue(sm.isSelected(0,col0));
          assertTrue(sm.isSelected(0,col1));
          assertTrue(sm.isSelected(0,col2));
          assertTrue(sm.isSelected(0,col3));
          assertTrue(sm.isSelected(0,col4));
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1186,30 +1245,47 @@</span>
      // Test 4
      @Test public void test_rt18591_cell_4() {
          sm.setSelectionMode(SelectionMode.MULTIPLE);
          sm.setCellSelectionEnabled(true);
          sm.select(0, col4);
<span class="udiff-line-modified-removed">-         keyboard.doLeftArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-modified-removed">-         keyboard.doLeftArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-added">+             keyboard.doLeftArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+             keyboard.doLeftArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             keyboard.doRightArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+             keyboard.doRightArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+         }</span>
          keyboard.doKeyPress(KeyCode.SPACE,
                  KeyModifier.getShortcutKey(),
                  (Utils.isMac()  ? KeyModifier.CTRL : null));
          assertTrue(sm.isSelected(0,col4));
          assertTrue(sm.isSelected(0,col2));
          assertTrue(isAnchor(0,2));
  
<span class="udiff-line-modified-removed">-         keyboard.doLeftArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-modified-removed">-         keyboard.doLeftArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             keyboard.doLeftArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+             keyboard.doLeftArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             keyboard.doRightArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+             keyboard.doRightArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+         }</span>
          assertTrue(sm.isSelected(0,col0));
          assertTrue(sm.isSelected(0,col1));
          assertTrue(sm.isSelected(0,col2));
          assertTrue(sm.isSelected(0,col4));
          assertTrue(isAnchor(0,2));
  
<span class="udiff-line-modified-removed">-         keyboard.doRightArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-modified-removed">-         keyboard.doRightArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-modified-removed">-         keyboard.doRightArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             keyboard.doRightArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-modified-added">+             keyboard.doRightArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+             keyboard.doRightArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             keyboard.doLeftArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+             keyboard.doLeftArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+             keyboard.doLeftArrowPress(KeyModifier.SHIFT, KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+         }</span>
          assertTrue(sm.isSelected(0,col0));
          assertTrue(sm.isSelected(0,col1));
          assertTrue(sm.isSelected(0,col2));
          assertTrue(sm.isSelected(0,col3));
          assertTrue(sm.isSelected(0,col4));
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1481,44 +1557,77 @@</span>
  
          keyboard.doLeftArrowPress(KeyModifier.SHIFT);   // select (1, col4)
          keyboard.doLeftArrowPress(KeyModifier.SHIFT);   // select (1, col3)
          keyboard.doLeftArrowPress(KeyModifier.SHIFT);   // select (1, col2)
          keyboard.doLeftArrowPress(KeyModifier.SHIFT);   // select (1, col1)
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col4));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col3));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col2));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col1));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col0));</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(1, col4));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(1, col3));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(1, col2));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col1));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col0));</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col4));</span>
<span class="udiff-line-added">+             assertFalse(sm.isSelected(1, col3));</span>
<span class="udiff-line-added">+             assertFalse(sm.isSelected(1, col2));</span>
<span class="udiff-line-added">+             assertFalse(sm.isSelected(1, col1));</span>
<span class="udiff-line-added">+             assertFalse(sm.isSelected(1, col0));</span>
<span class="udiff-line-added">+         }</span>
  
          keyboard.doRightArrowPress(KeyModifier.SHIFT);   // deselect (1, col1)
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col4));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col3));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col2));</span>
<span class="udiff-line-modified-removed">-         assertTrue(debug(), sm.isSelected(1, col1));</span>
<span class="udiff-line-modified-removed">-         assertFalse(sm.isSelected(1, col0));</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(1, col4));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(1, col3));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(1, col2));</span>
<span class="udiff-line-added">+             assertTrue(debug(), sm.isSelected(1, col1));</span>
<span class="udiff-line-added">+             assertFalse(sm.isSelected(1, col0));</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col4));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col3));</span>
<span class="udiff-line-added">+         }</span>
      }
  
      @Test public void test_rt18488_selectToRight() {
          sm.setCellSelectionEnabled(true);
          sm.clearAndSelect(1, col0);
  
          keyboard.doRightArrowPress(KeyModifier.SHIFT);   // select (1, col2)
          keyboard.doRightArrowPress(KeyModifier.SHIFT);   // select (1, col3)
          keyboard.doRightArrowPress(KeyModifier.SHIFT);   // select (1, col4)
          keyboard.doRightArrowPress(KeyModifier.SHIFT);   // select (1, col5)
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col4));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col3));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col2));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col1));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col0));</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(1, col4));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(1, col3));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(1, col2));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col1));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col0));</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             assertFalse(sm.isSelected(1, col4));</span>
<span class="udiff-line-added">+             assertFalse(sm.isSelected(1, col3));</span>
<span class="udiff-line-added">+             assertFalse(sm.isSelected(1, col2));</span>
<span class="udiff-line-added">+             assertFalse(sm.isSelected(1, col1));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col0));</span>
<span class="udiff-line-added">+         }</span>
  
          keyboard.doLeftArrowPress(KeyModifier.SHIFT);   // deselect (1, col5)
<span class="udiff-line-modified-removed">-         assertFalse(sm.isSelected(1, col4));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col3));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col2));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col1));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col0));</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             assertFalse(sm.isSelected(1, col4));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(1, col3));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(1, col2));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col1));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col0));</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             assertFalse(sm.isSelected(1, col4));</span>
<span class="udiff-line-added">+             assertFalse(sm.isSelected(1, col3));</span>
<span class="udiff-line-added">+             assertFalse(sm.isSelected(1, col2));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col1));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col0));</span>
<span class="udiff-line-added">+         }</span>
      }
  
      @Test public void test_rt18488_comment1() {
          sm.setCellSelectionEnabled(true);
          sm.clearAndSelect(1, col0);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1527,66 +1636,128 @@</span>
          keyboard.doRightArrowPress(KeyModifier.SHIFT);   // select (1, col3)
          keyboard.doRightArrowPress(KeyModifier.SHIFT);   // select (1, col4)
          keyboard.doRightArrowPress(KeyModifier.SHIFT);   // select (1, col5)
          keyboard.doDownArrowPress(KeyModifier.SHIFT);    // select (2, col5)
  
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(2, col4));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col4));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col3));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col2));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col1));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col0));</span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(2, col4));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(1, col4));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(1, col3));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(1, col2));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(1, col1));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col0));</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT)  {</span>
<span class="udiff-line-added">+             assertFalse(sm.isSelected(1, col4));</span>
<span class="udiff-line-added">+             assertFalse(sm.isSelected(1, col3));</span>
<span class="udiff-line-added">+             assertFalse(sm.isSelected(1, col2));</span>
<span class="udiff-line-added">+             assertFalse(sm.isSelected(1, col1));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col0));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(2, col0));</span>
<span class="udiff-line-added">+         }</span>
  
          keyboard.doUpArrowPress(KeyModifier.SHIFT);     // deselect (2, col5)
<span class="udiff-line-modified-removed">-         assertFalse(sm.isSelected(2, col4));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col4));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col3));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col2));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col1));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col0));</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             assertFalse(sm.isSelected(2, col4));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(1, col4));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(1, col3));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(1, col2));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col1));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col0));</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT)  {</span>
<span class="udiff-line-added">+             assertFalse(sm.isSelected(1, col4));</span>
<span class="udiff-line-added">+             assertFalse(sm.isSelected(1, col3));</span>
<span class="udiff-line-added">+             assertFalse(sm.isSelected(1, col2));</span>
<span class="udiff-line-added">+             assertFalse(sm.isSelected(1, col1));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col0));</span>
<span class="udiff-line-added">+             assertFalse(sm.isSelected(2, col0));</span>
<span class="udiff-line-added">+         }</span>
      }
  
      @Test public void test_rt18536_positive_horizontal() {
<span class="udiff-line-modified-removed">-         // Test shift selection when focus is elsewhere (so as to select a range)</span>
<span class="udiff-line-modified-removed">-         sm.setCellSelectionEnabled(true);</span>
<span class="udiff-line-modified-removed">-         sm.clearAndSelect(1, col0);</span>
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-modified-removed">-         // move focus by holding down ctrl button</span>
<span class="udiff-line-modified-removed">-         keyboard.doRightArrowPress(KeyModifier.getShortcutKey());   // move focus to (1, col2)</span>
<span class="udiff-line-modified-removed">-         keyboard.doRightArrowPress(KeyModifier.getShortcutKey());   // move focus to (1, col3)</span>
<span class="udiff-line-modified-removed">-         keyboard.doRightArrowPress(KeyModifier.getShortcutKey());   // move focus to (1, col4)</span>
<span class="udiff-line-modified-removed">-         keyboard.doRightArrowPress(KeyModifier.getShortcutKey());   // move focus to (1, col5)</span>
<span class="udiff-line-modified-removed">-         assertTrue(fm.isFocused(1, col4));</span>
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-modified-removed">-         // press shift + space to select all cells between (1, col1) and (1, col5)</span>
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.SPACE, KeyModifier.SHIFT);</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col4));</span>
<span class="udiff-line-modified-removed">-         assertTrue(debug(), sm.isSelected(1, col3));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col2));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col1));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col0));</span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             // Test shift selection when focus is elsewhere (so as to select a range)</span>
<span class="udiff-line-modified-added">+             sm.setCellSelectionEnabled(true);</span>
<span class="udiff-line-modified-added">+             sm.clearAndSelect(1, col0);</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+             // move focus by holding down ctrl button</span>
<span class="udiff-line-modified-added">+             keyboard.doRightArrowPress(KeyModifier.getShortcutKey());   // move focus to (1, col2)</span>
<span class="udiff-line-modified-added">+             keyboard.doRightArrowPress(KeyModifier.getShortcutKey());   // move focus to (1, col3)</span>
<span class="udiff-line-modified-added">+             keyboard.doRightArrowPress(KeyModifier.getShortcutKey());   // move focus to (1, col4)</span>
<span class="udiff-line-modified-added">+             keyboard.doRightArrowPress(KeyModifier.getShortcutKey());   // move focus to (1, col5)</span>
<span class="udiff-line-modified-added">+             assertTrue(fm.isFocused(1, col4));</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+             // press shift + space to select all cells between (1, col1) and (1, col5)</span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.SPACE, KeyModifier.SHIFT);</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(1, col4));</span>
<span class="udiff-line-modified-added">+             assertTrue(debug(), sm.isSelected(1, col3));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(1, col2));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(1, col1));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col0));</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             // Test shift selection when focus is elsewhere (so as to select a range)</span>
<span class="udiff-line-added">+             sm.setCellSelectionEnabled(true);</span>
<span class="udiff-line-added">+             sm.clearAndSelect(1, col4);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+             // move focus by holding down ctrl button</span>
<span class="udiff-line-added">+             keyboard.doRightArrowPress(KeyModifier.getShortcutKey());   // move focus to (1, col3)</span>
<span class="udiff-line-added">+             keyboard.doRightArrowPress(KeyModifier.getShortcutKey());   // move focus to (1, col2)</span>
<span class="udiff-line-added">+             keyboard.doRightArrowPress(KeyModifier.getShortcutKey());   // move focus to (1, col1)</span>
<span class="udiff-line-added">+             keyboard.doRightArrowPress(KeyModifier.getShortcutKey());   // move focus to (1, col0)</span>
<span class="udiff-line-added">+             assertTrue(fm.isFocused(1, col0));</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+             // press shift + space to select all cells between (1, col1) and (1, col5)</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.SPACE, KeyModifier.SHIFT);</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col0));</span>
<span class="udiff-line-added">+             assertTrue(debug(), sm.isSelected(1, col3));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col2));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col1));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col0));</span>
<span class="udiff-line-added">+         }</span>
      }
  
      @Test public void test_rt18536_negative_horizontal() {
<span class="udiff-line-removed">-         // Test shift selection when focus is elsewhere (so as to select a range)</span>
<span class="udiff-line-removed">-         sm.setCellSelectionEnabled(true);</span>
<span class="udiff-line-removed">-         sm.clearAndSelect(1, col4);</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-         // move focus by holding down ctrl button</span>
<span class="udiff-line-removed">-         keyboard.doLeftArrowPress(KeyModifier.getShortcutKey());   // move focus to (1, col4)</span>
<span class="udiff-line-removed">-         keyboard.doLeftArrowPress(KeyModifier.getShortcutKey());   // move focus to (1, col3)</span>
<span class="udiff-line-removed">-         keyboard.doLeftArrowPress(KeyModifier.getShortcutKey());   // move focus to (1, col2)</span>
<span class="udiff-line-removed">-         keyboard.doLeftArrowPress(KeyModifier.getShortcutKey());   // move focus to (1, col1)</span>
<span class="udiff-line-removed">-         assertTrue(fm.isFocused(1, col0));</span>
  
<span class="udiff-line-modified-removed">-         // press shift + space to select all cells between (1, col1) and (1, col5)</span>
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.SPACE, KeyModifier.SHIFT);</span>
<span class="udiff-line-modified-removed">-         assertTrue(debug(), sm.isSelected(1, col4));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col3));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col2));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col1));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col0));</span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             // Test shift selection when focus is elsewhere (so as to select a range)</span>
<span class="udiff-line-modified-added">+             sm.setCellSelectionEnabled(true);</span>
<span class="udiff-line-modified-added">+             sm.clearAndSelect(1, col4);</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+             // move focus by holding down ctrl button</span>
<span class="udiff-line-modified-added">+             keyboard.doLeftArrowPress(KeyModifier.getShortcutKey());   // move focus to (1, col4)</span>
<span class="udiff-line-added">+             keyboard.doLeftArrowPress(KeyModifier.getShortcutKey());   // move focus to (1, col3)</span>
<span class="udiff-line-added">+             keyboard.doLeftArrowPress(KeyModifier.getShortcutKey());   // move focus to (1, col2)</span>
<span class="udiff-line-added">+             keyboard.doLeftArrowPress(KeyModifier.getShortcutKey());   // move focus to (1, col1)</span>
<span class="udiff-line-added">+             assertTrue(fm.isFocused(1, col0));</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+             // press shift + space to select all cells between (1, col1) and (1, col5)</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.SPACE, KeyModifier.SHIFT);</span>
<span class="udiff-line-added">+             assertTrue(debug(), sm.isSelected(1, col4));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col3));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col2));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col1));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col0));</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             // Test shift selection when focus is elsewhere (so as to select a range)</span>
<span class="udiff-line-added">+             sm.setCellSelectionEnabled(true);</span>
<span class="udiff-line-added">+             sm.clearAndSelect(1, col0);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+             // move focus by holding down ctrl button</span>
<span class="udiff-line-added">+             keyboard.doLeftArrowPress(KeyModifier.getShortcutKey());   // move focus to (1, col1)</span>
<span class="udiff-line-added">+             keyboard.doLeftArrowPress(KeyModifier.getShortcutKey());   // move focus to (1, col2)</span>
<span class="udiff-line-added">+             keyboard.doLeftArrowPress(KeyModifier.getShortcutKey());   // move focus to (1, col3)</span>
<span class="udiff-line-added">+             keyboard.doLeftArrowPress(KeyModifier.getShortcutKey());   // move focus to (1, col4)</span>
<span class="udiff-line-added">+             assertTrue(fm.isFocused(1, col4));</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+             // press shift + space to select all cells between (1, col1) and (1, col5)</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.SPACE, KeyModifier.SHIFT);</span>
<span class="udiff-line-added">+             assertTrue(debug(), sm.isSelected(1, col0));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col3));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col2));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col1));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col0));</span>
<span class="udiff-line-added">+         }</span>
      }
  
      //
      @Test public void test_rt18536_positive_vertical() {
          // Test shift selection when focus is elsewhere (so as to select a range)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2630,34 +2801,48 @@</span>
              tableView.getItems().add(&quot;Row &quot; + i);
          }
  
          sm.setCellSelectionEnabled(true);
  
<span class="udiff-line-modified-removed">-         sm.clearAndSelect(6, col0);</span>
<span class="udiff-line-modified-added">+         sm.clearAndSelect(6, col1);</span>
          assertEquals(6, getAnchor().getRow());
<span class="udiff-line-modified-removed">-         assertEquals(0, getAnchor().getColumn());</span>
<span class="udiff-line-modified-removed">-         assertTrue(fm.isFocused(6, col0));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(6, col0));</span>
<span class="udiff-line-modified-added">+         assertEquals(1, getAnchor().getColumn());</span>
<span class="udiff-line-modified-added">+         assertTrue(fm.isFocused(6, col1));</span>
<span class="udiff-line-modified-added">+         assertTrue(sm.isSelected(6, col1));</span>
  
          keyboard.doKeyPress(KeyCode.UP, KeyModifier.getShortcutKey());
          keyboard.doKeyPress(KeyCode.UP, KeyModifier.getShortcutKey());
          keyboard.doKeyPress(KeyCode.UP, KeyModifier.getShortcutKey());
          keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.getShortcutKey());
          Toolkit.getToolkit().firePulse();
          assertEquals(6, getAnchor().getRow());
<span class="udiff-line-modified-removed">-         assertEquals(0, getAnchor().getColumn());</span>
<span class="udiff-line-modified-removed">-         assertTrue(fm.isFocused(3, col1));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(6, col0));</span>
<span class="udiff-line-modified-removed">-         assertFalse(sm.isSelected(3, col1));</span>
<span class="udiff-line-modified-added">+         assertEquals(1, getAnchor().getColumn());</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             assertTrue(fm.isFocused(3, col2));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(6, col1));</span>
<span class="udiff-line-added">+             assertFalse(sm.isSelected(3, col2));</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             assertTrue(fm.isFocused(3, col0));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(6, col1));</span>
<span class="udiff-line-added">+             assertFalse(sm.isSelected(3, col0));</span>
<span class="udiff-line-added">+         }</span>
  
          keyboard.doKeyPress(KeyCode.SPACE, KeyModifier.SHIFT);
          Toolkit.getToolkit().firePulse();
          assertEquals(6, getAnchor().getRow());
<span class="udiff-line-modified-removed">-         assertEquals(0, getAnchor().getColumn());</span>
<span class="udiff-line-modified-removed">-         assertTrue(fm.isFocused(3, col1));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(3, col1));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(6, col0));</span>
<span class="udiff-line-modified-added">+         assertEquals(1, getAnchor().getColumn());</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             assertTrue(fm.isFocused(3, col2));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(3, col2));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(6, col1));</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             assertTrue(fm.isFocused(3, col0));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(3, col0));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(6, col1));</span>
<span class="udiff-line-added">+         }</span>
      }
  
      @Test public void test_rt33613_up_multipleColumn_left() {
          final int items = 10;
          tableView.getItems().clear();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2678,21 +2863,35 @@</span>
          keyboard.doKeyPress(KeyCode.UP, KeyModifier.getShortcutKey());
          keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.getShortcutKey());
          Toolkit.getToolkit().firePulse();
          assertEquals(6, getAnchor().getRow());
          assertEquals(1, getAnchor().getColumn());
<span class="udiff-line-modified-removed">-         assertTrue(fm.isFocused(3, col0));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(6, col1));</span>
<span class="udiff-line-modified-removed">-         assertFalse(sm.isSelected(3, col0));</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             assertTrue(fm.isFocused(3, col0));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(6, col1));</span>
<span class="udiff-line-added">+             assertFalse(sm.isSelected(3, col0));</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             assertTrue(fm.isFocused(3, col2));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(6, col1));</span>
<span class="udiff-line-added">+             assertFalse(sm.isSelected(3, col2));</span>
<span class="udiff-line-added">+         }</span>
  
          keyboard.doKeyPress(KeyCode.SPACE, KeyModifier.SHIFT);
          Toolkit.getToolkit().firePulse();
          assertEquals(6, getAnchor().getRow());
          assertEquals(1, getAnchor().getColumn());
<span class="udiff-line-modified-removed">-         assertTrue(fm.isFocused(3, col0));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(3, col0));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(6, col1));</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             assertTrue(fm.isFocused(3, col0));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(3, col0));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(6, col1));</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             assertTrue(fm.isFocused(3, col2));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(3, col2));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(6, col1));</span>
<span class="udiff-line-added">+         }</span>
      }
  
      @Test public void test_rt33613_down_oneColumn() {
          final int items = 10;
          tableView.getItems().clear();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2732,34 +2931,48 @@</span>
              tableView.getItems().add(&quot;Row &quot; + i);
          }
  
          sm.setCellSelectionEnabled(true);
  
<span class="udiff-line-modified-removed">-         sm.clearAndSelect(3, col0);</span>
<span class="udiff-line-modified-added">+         sm.clearAndSelect(3, col1);</span>
          assertEquals(3, getAnchor().getRow());
<span class="udiff-line-modified-removed">-         assertEquals(0, getAnchor().getColumn());</span>
<span class="udiff-line-modified-removed">-         assertTrue(fm.isFocused(3, col0));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(3, col0));</span>
<span class="udiff-line-modified-added">+         assertEquals(1, getAnchor().getColumn());</span>
<span class="udiff-line-modified-added">+         assertTrue(fm.isFocused(3, col1));</span>
<span class="udiff-line-modified-added">+         assertTrue(sm.isSelected(3, col1));</span>
  
          keyboard.doKeyPress(KeyCode.DOWN, KeyModifier.getShortcutKey());
          keyboard.doKeyPress(KeyCode.DOWN, KeyModifier.getShortcutKey());
          keyboard.doKeyPress(KeyCode.DOWN, KeyModifier.getShortcutKey());
          keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.getShortcutKey());
          Toolkit.getToolkit().firePulse();
          assertEquals(3, getAnchor().getRow());
<span class="udiff-line-modified-removed">-         assertEquals(0, getAnchor().getColumn());</span>
<span class="udiff-line-modified-removed">-         assertTrue(fm.isFocused(6, col1));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(3, col0));</span>
<span class="udiff-line-modified-removed">-         assertFalse(sm.isSelected(6, col1));</span>
<span class="udiff-line-modified-added">+         assertEquals(1, getAnchor().getColumn());</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             assertTrue(fm.isFocused(6, col2));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(3, col1));</span>
<span class="udiff-line-added">+             assertFalse(sm.isSelected(6, col2));</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             assertTrue(fm.isFocused(6, col0));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(3, col1));</span>
<span class="udiff-line-added">+             assertFalse(sm.isSelected(6, col0));</span>
<span class="udiff-line-added">+         }</span>
  
          keyboard.doKeyPress(KeyCode.SPACE, KeyModifier.SHIFT);
          Toolkit.getToolkit().firePulse();
          assertEquals(3, getAnchor().getRow());
<span class="udiff-line-modified-removed">-         assertEquals(0, getAnchor().getColumn());</span>
<span class="udiff-line-modified-removed">-         assertTrue(fm.isFocused(6, col1));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(6, col1));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(3, col0));</span>
<span class="udiff-line-modified-added">+         assertEquals(1, getAnchor().getColumn());</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             assertTrue(fm.isFocused(6, col2));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(6, col2));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(3, col1));</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             assertTrue(fm.isFocused(6, col0));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(6, col0));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(3, col1));</span>
<span class="udiff-line-added">+         }</span>
      }
  
      @Test public void test_rt33613_down_multipleColumn_left() {
          final int items = 10;
          tableView.getItems().clear();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2779,96 +2992,179 @@</span>
          keyboard.doKeyPress(KeyCode.DOWN, KeyModifier.getShortcutKey());
          keyboard.doKeyPress(KeyCode.DOWN, KeyModifier.getShortcutKey());
          keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.getShortcutKey());
          assertEquals(3, getAnchor().getRow());
          assertEquals(1, getAnchor().getColumn());
<span class="udiff-line-modified-removed">-         assertTrue(fm.isFocused(6, col0));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(3, col1));</span>
<span class="udiff-line-modified-removed">-         assertFalse(sm.isSelected(6, col0));</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             assertTrue(fm.isFocused(6, col0));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(3, col1));</span>
<span class="udiff-line-added">+             assertFalse(sm.isSelected(6, col0));</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             assertTrue(fm.isFocused(6, col2));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(3, col1));</span>
<span class="udiff-line-added">+             assertFalse(sm.isSelected(6, col2));</span>
<span class="udiff-line-added">+         }</span>
  
          keyboard.doKeyPress(KeyCode.SPACE, KeyModifier.SHIFT);
          assertEquals(3, getAnchor().getRow());
          assertEquals(1, getAnchor().getColumn());
<span class="udiff-line-modified-removed">-         assertTrue(fm.isFocused(6, col0));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(6, col0));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(3, col1));</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             assertTrue(fm.isFocused(6, col0));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(6, col0));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(3, col1));</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             assertTrue(fm.isFocused(6, col2));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(6, col2));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(3, col1));</span>
<span class="udiff-line-added">+         }</span>
      }
  
      @Test public void test_rt18439() {
<span class="udiff-line-added">+ </span>
          final int items = 10;
          tableView.getItems().clear();
          for (int i = 0; i &lt; items; i++) {
              tableView.getItems().add(&quot;Row &quot; + i);
          }
  
          sm.setCellSelectionEnabled(true);
          sm.setSelectionMode(SelectionMode.MULTIPLE);
  
<span class="udiff-line-modified-removed">-         sm.clearAndSelect(0, col0);</span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-added">+             sm.clearAndSelect(0, col0);</span>
  
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 1</span>
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 2</span>
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 3</span>
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 4</span>
<span class="udiff-line-modified-removed">-         assertEquals(0, getAnchor().getRow());</span>
<span class="udiff-line-modified-removed">-         assertEquals(0, getAnchor().getColumn());              // anchor does not move</span>
<span class="udiff-line-modified-removed">-         assertTrue(fm.isFocused(0, col4));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(0, col0));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(0, col1));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(0, col2));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(0, col3));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(0, col4));</span>
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.DOWN, KeyModifier.SHIFT); // row 1</span>
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.DOWN, KeyModifier.SHIFT); // row 2</span>
<span class="udiff-line-modified-removed">-         assertEquals(0, getAnchor().getRow());</span>
<span class="udiff-line-modified-removed">-         assertEquals(0, getAnchor().getColumn());             // anchor does not move</span>
<span class="udiff-line-modified-removed">-         assertTrue(fm.isFocused(2, col4));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(0, col0));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(0, col1));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(0, col2));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(0, col3));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(0, col4));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col4));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(2, col4));</span>
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 3</span>
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 2</span>
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 1</span>
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 0</span>
<span class="udiff-line-modified-removed">-         assertEquals(0, getAnchor().getRow());</span>
<span class="udiff-line-modified-removed">-         assertEquals(0, getAnchor().getColumn());             // anchor does not move</span>
<span class="udiff-line-modified-removed">-         assertTrue(fm.isFocused(2, col0));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(0, col0));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(0, col1));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(0, col2));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(0, col3));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(0, col4));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col4));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(2, col4));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(2, col3));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(2, col2));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(2, col1));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(2, col0));</span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 1</span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 2</span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 3</span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 4</span>
<span class="udiff-line-modified-added">+             assertEquals(0, getAnchor().getRow());</span>
<span class="udiff-line-modified-added">+             assertEquals(0, getAnchor().getColumn());              // anchor does not move</span>
<span class="udiff-line-modified-added">+             assertTrue(fm.isFocused(0, col4));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(0, col0));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(0, col1));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(0, col2));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(0, col3));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(0, col4));</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.DOWN, KeyModifier.SHIFT); // row 1</span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.DOWN, KeyModifier.SHIFT); // row 2</span>
<span class="udiff-line-modified-added">+             assertEquals(0, getAnchor().getRow());</span>
<span class="udiff-line-modified-added">+             assertEquals(0, getAnchor().getColumn());             // anchor does not move</span>
<span class="udiff-line-modified-added">+             assertTrue(fm.isFocused(2, col4));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(0, col0));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(0, col1));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(0, col2));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(0, col3));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(0, col4));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(1, col4));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(2, col4));</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 3</span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 2</span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 1</span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 0</span>
<span class="udiff-line-modified-added">+             assertEquals(0, getAnchor().getRow());</span>
<span class="udiff-line-modified-added">+             assertEquals(0, getAnchor().getColumn());             // anchor does not move</span>
<span class="udiff-line-modified-added">+             assertTrue(fm.isFocused(2, col0));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(0, col0));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(0, col1));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(0, col2));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(0, col3));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(0, col4));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(1, col4));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(2, col4));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(2, col3));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(2, col2));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(2, col1));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(2, col0));</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.UP, KeyModifier.SHIFT); // row 1</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.UP, KeyModifier.SHIFT); // row 0</span>
<span class="udiff-line-added">+             assertEquals(0, getAnchor().getRow());</span>
<span class="udiff-line-added">+             assertEquals(0, getAnchor().getColumn());           // anchor does not move</span>
<span class="udiff-line-added">+             assertTrue(fm.isFocused(0, col0));</span>
<span class="udiff-line-added">+             assertFalse(sm.isSelected(0, col0));                // we&#39;ve gone right around - this cell is now unselected</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(0, col1));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(0, col2));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(0, col3));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(0, col4));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col4));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(2, col4));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(2, col3));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(2, col2));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(2, col1));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(2, col0));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col0));</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+         else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             sm.clearAndSelect(0, col4);</span>
  
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.UP, KeyModifier.SHIFT); // row 1</span>
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.UP, KeyModifier.SHIFT); // row 0</span>
<span class="udiff-line-modified-removed">-         assertEquals(0, getAnchor().getRow());</span>
<span class="udiff-line-modified-removed">-         assertEquals(0, getAnchor().getColumn());           // anchor does not move</span>
<span class="udiff-line-modified-removed">-         assertTrue(fm.isFocused(0, col0));</span>
<span class="udiff-line-modified-removed">-         assertFalse(sm.isSelected(0, col0));                // we&#39;ve gone right around - this cell is now unselected</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(0, col1));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(0, col2));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(0, col3));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(0, col4));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col4));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(2, col4));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(2, col3));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(2, col2));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(2, col1));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(2, col0));</span>
<span class="udiff-line-modified-removed">-         assertTrue(sm.isSelected(1, col0));</span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 3</span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 2</span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 1</span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 0</span>
<span class="udiff-line-modified-added">+             assertEquals(0, getAnchor().getRow());</span>
<span class="udiff-line-modified-added">+             assertEquals(4, getAnchor().getColumn());              // anchor does not move</span>
<span class="udiff-line-modified-added">+             assertTrue(fm.isFocused(0, col0));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(0, col4));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(0, col3));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(0, col2));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(0, col1));</span>
<span class="udiff-line-modified-added">+             assertTrue(sm.isSelected(0, col0));</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.DOWN, KeyModifier.SHIFT); // row 1</span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.DOWN, KeyModifier.SHIFT); // row 2</span>
<span class="udiff-line-modified-added">+             assertEquals(0, getAnchor().getRow());</span>
<span class="udiff-line-modified-added">+             assertEquals(4, getAnchor().getColumn());             // anchor does not move</span>
<span class="udiff-line-added">+             assertTrue(fm.isFocused(2, col0));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(0, col4));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(0, col3));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(0, col2));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(0, col1));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(0, col0));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col0));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(2, col0));</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 0</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 1</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 2</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 3</span>
<span class="udiff-line-added">+             assertEquals(0, getAnchor().getRow());</span>
<span class="udiff-line-added">+             assertEquals(4, getAnchor().getColumn());             // anchor does not move</span>
<span class="udiff-line-added">+             assertTrue(fm.isFocused(2, col4));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(0, col0));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(0, col1));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(0, col2));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(0, col3));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(0, col4));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col0));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(2, col4));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(2, col3));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(2, col2));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(2, col1));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(2, col0));</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.UP, KeyModifier.SHIFT); // row 0</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.UP, KeyModifier.SHIFT); // row 1</span>
<span class="udiff-line-added">+             assertEquals(0, getAnchor().getRow());</span>
<span class="udiff-line-added">+             assertEquals(4, getAnchor().getColumn());           // anchor does not move</span>
<span class="udiff-line-added">+             assertTrue(fm.isFocused(0, col4));</span>
<span class="udiff-line-added">+             assertFalse(sm.isSelected(0, col4));                // we&#39;ve gone right around - this cell is now unselected</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(0, col1));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(0, col2));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(0, col3));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(0, col0));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col4));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(2, col4));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(2, col3));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(2, col2));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(2, col1));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(2, col0));</span>
<span class="udiff-line-added">+             assertTrue(sm.isSelected(1, col0));</span>
<span class="udiff-line-added">+         }</span>
      }
  
      // this is an extension of the previous test, where we had a bug where going up resulted in all cells between the
      // anchor (at (0,0)) and the first selected cell in column 0 were being selected. This wasn&#39;t visible in the previous
      // test as we only went down two rows, so when we went up everything looked as expected
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2882,25 +3178,38 @@</span>
          sm.setCellSelectionEnabled(true);
          sm.setSelectionMode(SelectionMode.MULTIPLE);
  
          sm.clearAndSelect(0, col0);
  
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 1</span>
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 2</span>
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 3</span>
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 4</span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 1</span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 2</span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 3</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 4</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 1</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 2</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 3</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 4</span>
<span class="udiff-line-added">+         }</span>
  
          keyboard.doKeyPress(KeyCode.DOWN, KeyModifier.SHIFT); // row 1
          keyboard.doKeyPress(KeyCode.DOWN, KeyModifier.SHIFT); // row 2
          keyboard.doKeyPress(KeyCode.DOWN, KeyModifier.SHIFT); // row 3
          keyboard.doKeyPress(KeyCode.DOWN, KeyModifier.SHIFT); // row 4
  
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 3</span>
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 2</span>
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 1</span>
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 0</span>
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 3</span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 2</span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 1</span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 0</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 1</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 2</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 3</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 4</span>
<span class="udiff-line-added">+         }</span>
          keyboard.doKeyPress(KeyCode.UP, KeyModifier.SHIFT); // row 3
          assertEquals(0, getAnchor().getRow());
          assertEquals(0, getAnchor().getColumn());           // anchor does not move
          assertTrue(fm.isFocused(3, col0));
          assertTrue(sm.isSelected(0, col0));
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2938,21 +3247,32 @@</span>
          keyboard.doKeyPress(KeyCode.DOWN, KeyModifier.SHIFT); // row 1
          keyboard.doKeyPress(KeyCode.DOWN, KeyModifier.SHIFT); // row 2
          keyboard.doKeyPress(KeyCode.DOWN, KeyModifier.SHIFT); // row 3
          keyboard.doKeyPress(KeyCode.DOWN, KeyModifier.SHIFT); // row 4
  
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 3</span>
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 2</span>
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 1</span>
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 0</span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 3</span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 2</span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 1</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 0</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 3</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 2</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 1</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 0</span>
<span class="udiff-line-added">+         }</span>
  
          keyboard.doKeyPress(KeyCode.UP, KeyModifier.SHIFT);   // row 3
          keyboard.doKeyPress(KeyCode.UP, KeyModifier.SHIFT);   // row 2
          keyboard.doKeyPress(KeyCode.UP, KeyModifier.SHIFT);   // row 1
          keyboard.doKeyPress(KeyCode.UP, KeyModifier.SHIFT);   // row 0
  
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 1</span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 1</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 1</span>
<span class="udiff-line-added">+         }</span>
          assertEquals(0, getAnchor().getRow());
          assertEquals(4, getAnchor().getColumn());           // anchor does not move
          assertTrue(fm.isFocused(0, col1));
          assertTrue(sm.isSelected(0, col4));
          assertTrue(sm.isSelected(1, col4));
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2984,24 +3304,38 @@</span>
          sm.setCellSelectionEnabled(true);
          sm.setSelectionMode(SelectionMode.MULTIPLE);
  
          sm.clearAndSelect(4, col4);
  
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 3</span>
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 2</span>
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 1</span>
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 0</span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 3</span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 2</span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 1</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 0</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 3</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 2</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 1</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 0</span>
<span class="udiff-line-added">+         }</span>
  
          keyboard.doKeyPress(KeyCode.UP, KeyModifier.SHIFT);   // row 3
          keyboard.doKeyPress(KeyCode.UP, KeyModifier.SHIFT);   // row 2
          keyboard.doKeyPress(KeyCode.UP, KeyModifier.SHIFT);   // row 1
          keyboard.doKeyPress(KeyCode.UP, KeyModifier.SHIFT);   // row 0
  
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 1</span>
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 2</span>
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 3</span>
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 4</span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 1</span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 2</span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 3</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 4</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 1</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 2</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 3</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 4</span>
<span class="udiff-line-added">+         }</span>
  
          keyboard.doKeyPress(KeyCode.DOWN, KeyModifier.SHIFT); // row 1
          assertEquals(4, getAnchor().getRow());
          assertEquals(4, getAnchor().getColumn());           // anchor does not move
          assertTrue(fm.isFocused(1, col4));
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3040,21 +3374,32 @@</span>
          keyboard.doKeyPress(KeyCode.UP, KeyModifier.SHIFT); // row 3
          keyboard.doKeyPress(KeyCode.UP, KeyModifier.SHIFT); // row 2
          keyboard.doKeyPress(KeyCode.UP, KeyModifier.SHIFT); // row 1
          keyboard.doKeyPress(KeyCode.UP, KeyModifier.SHIFT); // row 0
  
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT);   // col 1</span>
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT);   // col 2</span>
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT);   // col 3</span>
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT);   // col 4</span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT);   // col 1</span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT);   // col 2</span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT);   // col 3</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT);   // col 4</span>
<span class="udiff-line-added">+         } if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT);   // col 1</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT);   // col 2</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT);   // col 3</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT);   // col 4</span>
<span class="udiff-line-added">+         }</span>
  
          keyboard.doKeyPress(KeyCode.DOWN, KeyModifier.SHIFT); // row 1
          keyboard.doKeyPress(KeyCode.DOWN, KeyModifier.SHIFT); // row 2
          keyboard.doKeyPress(KeyCode.DOWN, KeyModifier.SHIFT); // row 3
          keyboard.doKeyPress(KeyCode.DOWN, KeyModifier.SHIFT); // row 4
  
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 3</span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.LEFT, KeyModifier.SHIFT); // col 3</span>
<span class="udiff-line-added">+         } if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(KeyCode.RIGHT, KeyModifier.SHIFT); // col 3</span>
<span class="udiff-line-added">+         }</span>
          assertEquals(4, getAnchor().getRow());
          assertEquals(0, getAnchor().getColumn());           // anchor does not move
          assertTrue(fm.isFocused(4, col3));
          assertTrue(sm.isSelected(4, col0));
          assertTrue(sm.isSelected(3, col0));
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -4016,35 +4361,63 @@</span>
  
          sl.dispose();
      }
  
      @Test public void test_rt_18440_goLeft() {
<span class="udiff-line-modified-removed">-         test_rt_18440(KeyCode.LEFT, 3, false, colIndex -&gt; {</span>
<span class="udiff-line-modified-removed">-             keyboard.doLeftArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-modified-removed">-             return colIndex - 1;</span>
<span class="udiff-line-modified-removed">-         });</span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             test_rt_18440(KeyCode.LEFT, 3, false, colIndex -&gt; {</span>
<span class="udiff-line-modified-added">+                 keyboard.doLeftArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-modified-added">+                 return colIndex - 1;</span>
<span class="udiff-line-added">+             });</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             test_rt_18440(KeyCode.LEFT, 0, false, colIndex -&gt; {</span>
<span class="udiff-line-added">+                 keyboard.doLeftArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+                 return colIndex + 1;</span>
<span class="udiff-line-added">+             });</span>
<span class="udiff-line-added">+         }</span>
      }
  
      @Test public void test_rt_18440_goLeft_toEnd() {
<span class="udiff-line-modified-removed">-         test_rt_18440(KeyCode.LEFT, 3, true, colIndex -&gt; {</span>
<span class="udiff-line-modified-removed">-             keyboard.doLeftArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-modified-removed">-             return colIndex - 1;</span>
<span class="udiff-line-modified-removed">-         });</span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             test_rt_18440(KeyCode.LEFT, 3, true, colIndex -&gt; {</span>
<span class="udiff-line-modified-added">+                 keyboard.doLeftArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-modified-added">+                 return colIndex - 1;</span>
<span class="udiff-line-added">+             });</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             test_rt_18440(KeyCode.LEFT, 0, true, colIndex -&gt; {</span>
<span class="udiff-line-added">+                 keyboard.doLeftArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+                 return colIndex + 1;</span>
<span class="udiff-line-added">+             });</span>
<span class="udiff-line-added">+         }</span>
      }
  
      @Test public void test_rt_18440_goRight() {
<span class="udiff-line-modified-removed">-         test_rt_18440(KeyCode.RIGHT, 0, false, colIndex -&gt; {</span>
<span class="udiff-line-modified-removed">-             keyboard.doRightArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-modified-removed">-             return colIndex + 1;</span>
<span class="udiff-line-modified-removed">-         });</span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             test_rt_18440(KeyCode.RIGHT, 0, false, colIndex -&gt; {</span>
<span class="udiff-line-modified-added">+                 keyboard.doRightArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-modified-added">+                 return colIndex + 1;</span>
<span class="udiff-line-added">+             });</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             test_rt_18440(KeyCode.RIGHT, 3, false, colIndex -&gt; {</span>
<span class="udiff-line-added">+                 keyboard.doRightArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+                 return colIndex - 1;</span>
<span class="udiff-line-added">+             });</span>
<span class="udiff-line-added">+         }</span>
      }
  
      @Test public void test_rt_18440_goRight_toEnd() {
<span class="udiff-line-modified-removed">-         test_rt_18440(KeyCode.RIGHT, 0, true, colIndex -&gt; {</span>
<span class="udiff-line-modified-removed">-             keyboard.doRightArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-modified-removed">-             return colIndex + 1;</span>
<span class="udiff-line-modified-removed">-         });</span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             test_rt_18440(KeyCode.RIGHT, 0, true, colIndex -&gt; {</span>
<span class="udiff-line-modified-added">+                 keyboard.doRightArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-modified-added">+                 return colIndex + 1;</span>
<span class="udiff-line-added">+             });</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             test_rt_18440(KeyCode.RIGHT, 3, true, colIndex -&gt; {</span>
<span class="udiff-line-added">+                 keyboard.doRightArrowPress(KeyModifier.getShortcutKey());</span>
<span class="udiff-line-added">+                 return colIndex - 1;</span>
<span class="udiff-line-added">+             });</span>
<span class="udiff-line-added">+         }</span>
      }
  
      private void test_rt_18440(KeyCode direction, int startColumn, boolean goToEnd, Function&lt;Integer, Integer&gt; r) {
          ObservableList&lt;String&gt; itemsList = FXCollections.observableArrayList();
          for (int i = 0; i &lt; 10; i++) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -4097,17 +4470,25 @@</span>
              assertEquals(tableView.getColumns().get(startColumn), sm.getSelectedCells().get(0).getTableColumn());
              assertEquals(0, fm.getFocusedIndex());
              assertEquals(tableView.getColumns().get(expectedColumn), fm.getFocusedCell().getTableColumn());
          }
  
<span class="udiff-line-modified-removed">-         expectedColumn = direction == KeyCode.RIGHT ? 3 : 0;</span>
<span class="udiff-line-modified-removed">-         keyboard.doKeyPress(direction, KeyModifier.SHIFT);</span>
<span class="udiff-line-modified-removed">-         assertEquals(0, sm.getSelectedIndex());</span>
<span class="udiff-line-modified-removed">-         assertEquals(debug(), 4, sm.getSelectedCells().size());</span>
<span class="udiff-line-modified-removed">-         assertEquals(0, fm.getFocusedIndex());</span>
<span class="udiff-line-modified-removed">-         assertEquals(tableView.getColumns().get(expectedColumn), fm.getFocusedCell().getTableColumn());</span>
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             expectedColumn = direction == KeyCode.RIGHT ? 3 : 0;</span>
<span class="udiff-line-modified-added">+             keyboard.doKeyPress(direction, KeyModifier.SHIFT);</span>
<span class="udiff-line-modified-added">+             assertEquals(0, sm.getSelectedIndex());</span>
<span class="udiff-line-modified-added">+             assertEquals(debug(), 4, sm.getSelectedCells().size());</span>
<span class="udiff-line-modified-added">+             assertEquals(0, fm.getFocusedIndex());</span>
<span class="udiff-line-modified-added">+             assertEquals(tableView.getColumns().get(expectedColumn), fm.getFocusedCell().getTableColumn());</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             expectedColumn = direction == KeyCode.LEFT ? 3 : 0;</span>
<span class="udiff-line-added">+             keyboard.doKeyPress(direction, KeyModifier.SHIFT);</span>
<span class="udiff-line-added">+             assertEquals(0, sm.getSelectedIndex());</span>
<span class="udiff-line-added">+             assertEquals(debug(), 4, sm.getSelectedCells().size());</span>
<span class="udiff-line-added">+             assertEquals(0, fm.getFocusedIndex());</span>
<span class="udiff-line-added">+             assertEquals(tableView.getColumns().get(expectedColumn), fm.getFocusedCell().getTableColumn());</span>
<span class="udiff-line-added">+         }</span>
          sl.dispose();
      }
  
      @Test public void test_rt_24865_moveDownwards() {
          tableView.getItems().clear();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -4216,21 +4597,37 @@</span>
          assertTrue(fm.isFocused(50 - newSelectedRowCount + 1));
          assertEquals(50, ((TablePosition)TableCellBehavior.getAnchor(tableView, null)).getRow());
      }
  
      @Test public void test_rt_39792_goLeft_goPastEnd() {
<span class="udiff-line-modified-removed">-         test_rt_39792(3, colIndex -&gt; {</span>
<span class="udiff-line-modified-removed">-             keyboard.doLeftArrowPress(KeyModifier.SHIFT);</span>
<span class="udiff-line-modified-removed">-             return colIndex - 1;</span>
<span class="udiff-line-modified-removed">-         });</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             test_rt_39792(3, colIndex -&gt; {</span>
<span class="udiff-line-modified-added">+                 keyboard.doLeftArrowPress(KeyModifier.SHIFT);</span>
<span class="udiff-line-added">+                 return colIndex - 1;</span>
<span class="udiff-line-added">+             });</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             test_rt_39792(0, colIndex -&gt; {</span>
<span class="udiff-line-added">+                 keyboard.doLeftArrowPress(KeyModifier.SHIFT);</span>
<span class="udiff-line-added">+                 return colIndex + 1;</span>
<span class="udiff-line-added">+             });</span>
<span class="udiff-line-added">+         }</span>
      }
  
      @Test public void test_rt_39792_goRight_goPastEnd() {
<span class="udiff-line-modified-removed">-         test_rt_39792(0, colIndex -&gt; {</span>
<span class="udiff-line-modified-removed">-             keyboard.doRightArrowPress(KeyModifier.SHIFT);</span>
<span class="udiff-line-modified-removed">-             return colIndex + 1;</span>
<span class="udiff-line-modified-removed">-         });</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+         if (orientation == NodeOrientation.LEFT_TO_RIGHT) {</span>
<span class="udiff-line-modified-added">+             test_rt_39792(0, colIndex -&gt; {</span>
<span class="udiff-line-modified-added">+                 keyboard.doRightArrowPress(KeyModifier.SHIFT);</span>
<span class="udiff-line-added">+                 return colIndex + 1;</span>
<span class="udiff-line-added">+             });</span>
<span class="udiff-line-added">+         } else if (orientation == NodeOrientation.RIGHT_TO_LEFT) {</span>
<span class="udiff-line-added">+             test_rt_39792(3, colIndex -&gt; {</span>
<span class="udiff-line-added">+                 keyboard.doRightArrowPress(KeyModifier.SHIFT);</span>
<span class="udiff-line-added">+                 return colIndex - 1;</span>
<span class="udiff-line-added">+             });</span>
<span class="udiff-line-added">+         }</span>
      }
  
      private void test_rt_39792(int startColumn, Function&lt;Integer, Integer&gt; r) {
          ObservableList&lt;String&gt; itemsList = FXCollections.observableArrayList();
          for (int i = 0; i &lt; 10; i++) {
</pre>
<center><a href="../../../../../../main/java/com/sun/javafx/scene/control/behavior/TableViewBehaviorBase.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>
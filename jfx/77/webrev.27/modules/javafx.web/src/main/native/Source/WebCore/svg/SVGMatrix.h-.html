<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old modules/javafx.web/src/main/native/Source/WebCore/svg/SVGMatrix.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (C) 2016 Apple Inc. All rights reserved.
  3  *
  4  * Redistribution and use in source and binary forms, with or without
  5  * modification, are permitted provided that the following conditions
  6  * are met:
  7  * 1. Redistributions of source code must retain the above copyright
  8  *    notice, this list of conditions and the following disclaimer.
  9  * 2. Redistributions in binary form must reproduce the above copyright
 10  *    notice, this list of conditions and the following disclaimer in the
 11  *    documentation and/or other materials provided with the distribution.
 12  *
 13  * THIS SOFTWARE IS PROVIDED BY APPLE INC. AND ITS CONTRIBUTORS ``AS IS&#39;&#39;
 14  * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
 15  * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 16  * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL APPLE INC. OR ITS CONTRIBUTORS
 17  * BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 18  * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 19  * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 20  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 21  * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 22  * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF
 23  * THE POSSIBILITY OF SUCH DAMAGE.
 24  */
 25 
 26 #pragma once
 27 
 28 #include &quot;SVGMatrixValue.h&quot;
 29 #include &quot;SVGPropertyTearOff.h&quot;
 30 
 31 namespace WebCore {
 32 
 33 // FIXME: Remove this class once SVGMatrix becomes an alias to DOMMatrix.
 34 class SVGMatrix : public SVGPropertyTearOff&lt;SVGMatrixValue&gt; {
 35 public:
 36     static Ref&lt;SVGMatrix&gt; create(SVGAnimatedProperty&amp; animatedProperty, SVGPropertyRole role, SVGMatrixValue&amp; value)
 37     {
 38         return adoptRef(*new SVGMatrix(animatedProperty, role, value));
 39     }
 40 
 41     static Ref&lt;SVGMatrix&gt; create(const SVGMatrixValue&amp; initialValue = { })
 42     {
 43         return adoptRef(*new SVGMatrix(initialValue));
 44     }
 45 
 46     template&lt;typename T&gt; static ExceptionOr&lt;Ref&lt;SVGMatrix&gt;&gt; create(ExceptionOr&lt;T&gt;&amp;&amp; initialValue)
 47     {
 48         if (initialValue.hasException())
 49             return initialValue.releaseException();
 50         return create(initialValue.releaseReturnValue());
 51     }
 52 
 53     double a()
 54     {
 55         return propertyReference().a();
 56     }
 57 
 58     ExceptionOr&lt;void&gt; setA(double value)
 59     {
 60         if (isReadOnly())
 61             return Exception { NoModificationAllowedError };
 62 
 63         propertyReference().setA(value);
 64         commitChange();
 65 
 66         return { };
 67     }
 68 
 69     double b()
 70     {
 71         return propertyReference().b();
 72     }
 73 
 74     ExceptionOr&lt;void&gt; setB(double value)
 75     {
 76         if (isReadOnly())
 77             return Exception { NoModificationAllowedError };
 78 
 79         propertyReference().setB(value);
 80         commitChange();
 81 
 82         return { };
 83     }
 84 
 85     double c()
 86     {
 87         return propertyReference().c();
 88     }
 89 
 90     ExceptionOr&lt;void&gt; setC(double value)
 91     {
 92         if (isReadOnly())
 93             return Exception { NoModificationAllowedError };
 94 
 95         propertyReference().setC(value);
 96         commitChange();
 97 
 98         return { };
 99     }
100 
101     double d()
102     {
103         return propertyReference().d();
104     }
105 
106     ExceptionOr&lt;void&gt; setD(double value)
107     {
108         if (isReadOnly())
109             return Exception { NoModificationAllowedError };
110 
111         propertyReference().setD(value);
112         commitChange();
113 
114         return { };
115     }
116 
117     double e()
118     {
119         return propertyReference().e();
120     }
121 
122     ExceptionOr&lt;void&gt; setE(double value)
123     {
124         if (isReadOnly())
125             return Exception { NoModificationAllowedError };
126 
127         propertyReference().setE(value);
128         commitChange();
129 
130         return { };
131     }
132 
133     double f()
134     {
135         return propertyReference().f();
136     }
137 
138     ExceptionOr&lt;void&gt; setF(double value)
139     {
140         if (isReadOnly())
141             return Exception { NoModificationAllowedError };
142 
143         propertyReference().setF(value);
144         commitChange();
145 
146         return { };
147     }
148 
149     ExceptionOr&lt;Ref&lt;SVGMatrix&gt;&gt; multiply(SVGMatrix&amp; secondMatrix)
150     {
151         if (isReadOnly())
152             return Exception { NoModificationAllowedError };
153 
154         auto result = propertyReference().multiply(secondMatrix.propertyReference());
155         commitChange();
156 
157         return SVGMatrix::create(result);
158     }
159 
160     ExceptionOr&lt;Ref&lt;SVGMatrix&gt;&gt; inverse()
161     {
162         if (isReadOnly())
163             return Exception { NoModificationAllowedError };
164 
165         auto result = propertyReference().inverse();
166         if (result.hasException())
167             return result.releaseException();
168 
169         commitChange();
170         return SVGMatrix::create(result.releaseReturnValue());
171     }
172 
173     ExceptionOr&lt;Ref&lt;SVGMatrix&gt;&gt; translate(float x, float y)
174     {
175         if (isReadOnly())
176             return Exception { NoModificationAllowedError };
177 
178         auto result = propertyReference().translate(x, y);
179         commitChange();
180 
181         return SVGMatrix::create(result);
182     }
183 
184     ExceptionOr&lt;Ref&lt;SVGMatrix&gt;&gt; scale(float scaleFactor)
185     {
186         if (isReadOnly())
187             return Exception { NoModificationAllowedError };
188 
189         auto result = propertyReference().scale(scaleFactor);
190         commitChange();
191 
192         return SVGMatrix::create(result);
193     }
194 
195     ExceptionOr&lt;Ref&lt;SVGMatrix&gt;&gt; scaleNonUniform(float scaleFactorX, float scaleFactorY)
196     {
197         if (isReadOnly())
198             return Exception { NoModificationAllowedError };
199 
200         auto result = propertyReference().scaleNonUniform(scaleFactorX, scaleFactorY);
201         commitChange();
202 
203         return SVGMatrix::create(result);
204     }
205 
206     ExceptionOr&lt;Ref&lt;SVGMatrix&gt;&gt; rotate(float angle)
207     {
208         if (isReadOnly())
209             return Exception { NoModificationAllowedError };
210 
211         auto result = propertyReference().rotate(angle);
212         commitChange();
213 
214         return SVGMatrix::create(result);
215     }
216 
217     ExceptionOr&lt;Ref&lt;SVGMatrix&gt;&gt; rotateFromVector(float x, float y)
218     {
219         if (isReadOnly())
220             return Exception { NoModificationAllowedError };
221 
222         auto result = propertyReference().rotateFromVector(x, y);
223         if (result.hasException())
224             return result.releaseException();
225 
226         commitChange();
227         return SVGMatrix::create(result.releaseReturnValue());
228     }
229 
230     ExceptionOr&lt;Ref&lt;SVGMatrix&gt;&gt; flipX()
231     {
232         if (isReadOnly())
233             return Exception { NoModificationAllowedError };
234 
235         auto result = propertyReference().flipX();
236         commitChange();
237 
238         return SVGMatrix::create(result);
239     }
240 
241     ExceptionOr&lt;Ref&lt;SVGMatrix&gt;&gt; flipY()
242     {
243         if (isReadOnly())
244             return Exception { NoModificationAllowedError };
245 
246         auto result = propertyReference().flipY();
247         commitChange();
248 
249         return SVGMatrix::create(result);
250     }
251 
252     ExceptionOr&lt;Ref&lt;SVGMatrix&gt;&gt; skewX(float angle)
253     {
254         if (isReadOnly())
255             return Exception { NoModificationAllowedError };
256 
257         auto result = propertyReference().skewX(angle);
258         commitChange();
259 
260         return SVGMatrix::create(result);
261     }
262 
263     ExceptionOr&lt;Ref&lt;SVGMatrix&gt;&gt; skewY(float angle)
264     {
265         if (isReadOnly())
266             return Exception { NoModificationAllowedError };
267 
268         auto result = propertyReference().skewY(angle);
269         commitChange();
270 
271         return SVGMatrix::create(result);
272     }
273 
274 protected:
275     SVGMatrix(SVGAnimatedProperty&amp; animatedProperty, SVGPropertyRole role, SVGMatrixValue&amp; value)
276         : SVGPropertyTearOff&lt;SVGMatrixValue&gt;(&amp;animatedProperty, role, value)
277     {
278     }
279 
280     explicit SVGMatrix(const SVGMatrixValue&amp; initialValue)
281         : SVGPropertyTearOff&lt;SVGMatrixValue&gt;(initialValue)
282     {
283     }
284 
285     explicit SVGMatrix(const SVGMatrixValue* initialValue)
286         : SVGPropertyTearOff&lt;SVGMatrixValue&gt;(initialValue)
287     {
288     }
289 };
290 
291 } // namespace WebCore
    </pre>
  </body>
</html>
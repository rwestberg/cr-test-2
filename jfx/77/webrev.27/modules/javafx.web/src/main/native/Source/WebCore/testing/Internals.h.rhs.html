<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames modules/javafx.web/src/main/native/Source/WebCore/testing/Internals.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
  2  * Copyright (C) 2012 Google Inc. All rights reserved.
  3  * Copyright (C) 2013-2019 Apple Inc. All rights reserved.
  4  *
  5  * Redistribution and use in source and binary forms, with or without
  6  * modification, are permitted provided that the following conditions
  7  * are met:
  8  *
  9  * 1.  Redistributions of source code must retain the above copyright
 10  *     notice, this list of conditions and the following disclaimer.
 11  * 2.  Redistributions in binary form must reproduce the above copyright
 12  *     notice, this list of conditions and the following disclaimer in the
 13  *     documentation and/or other materials provided with the distribution.
 14  *
 15  * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS &quot;AS IS&quot; AND ANY
 16  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 17  * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 18  * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY
 19  * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 20  * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 21  * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 22  * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 23  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 24  * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 25  */
 26 
 27 #pragma once
 28 
 29 #include &quot;CSSComputedStyleDeclaration.h&quot;
 30 #include &quot;ContextDestructionObserver.h&quot;
 31 #include &quot;Cookie.h&quot;
 32 #include &quot;ExceptionOr.h&quot;
 33 #include &quot;HEVCUtilities.h&quot;
 34 #include &quot;JSDOMPromiseDeferred.h&quot;
 35 #include &quot;OrientationNotifier.h&quot;
 36 #include &quot;PageConsoleClient.h&quot;
 37 #include &quot;RealtimeMediaSource.h&quot;
<a name="1" id="anc1"></a><span class="line-added"> 38 #include &quot;TextIndicator.h&quot;</span>
 39 #include &lt;JavaScriptCore/Float32Array.h&gt;
 40 #include &lt;wtf/Optional.h&gt;
 41 
 42 #if ENABLE(MEDIA_SESSION)
 43 #include &quot;MediaSessionInterruptionProvider.h&quot;
 44 #endif
 45 
 46 #if ENABLE(VIDEO)
 47 #include &quot;MediaElementSession.h&quot;
 48 #endif
 49 
 50 namespace WebCore {
 51 
 52 class AnimationTimeline;
 53 class AudioContext;
 54 class CacheStorageConnection;
 55 class DOMRect;
 56 class DOMRectList;
<a name="2" id="anc2"></a><span class="line-added"> 57 class DOMRectReadOnly;</span>
 58 class DOMURL;
 59 class DOMWindow;
 60 class Document;
 61 class Element;
<a name="3" id="anc3"></a><span class="line-added"> 62 class EventListener;</span>
 63 class ExtendableEvent;
 64 class FetchResponse;
 65 class File;
 66 class Frame;
 67 class GCObservation;
 68 class HTMLAnchorElement;
 69 class HTMLImageElement;
 70 class HTMLInputElement;
 71 class HTMLLinkElement;
 72 class HTMLMediaElement;
 73 class HTMLPictureElement;
 74 class HTMLSelectElement;
 75 class ImageData;
 76 class InspectorStubFrontend;
 77 class InternalSettings;
 78 class MallocStatistics;
 79 class MediaSession;
 80 class MediaStream;
 81 class MediaStreamTrack;
 82 class MemoryInfo;
 83 class MockCDMFactory;
 84 class MockContentFilterSettings;
 85 class MockPageOverlay;
 86 class MockPaymentCoordinator;
 87 class NodeList;
 88 class Page;
 89 class RTCPeerConnection;
 90 class Range;
 91 class RenderedDocumentMarker;
 92 class SVGSVGElement;
 93 class SerializedScriptValue;
 94 class SourceBuffer;
 95 class StringCallback;
 96 class StyleSheet;
 97 class TimeRanges;
 98 class TypeConversions;
 99 class VoidCallback;
100 class WebGLRenderingContext;
101 class XMLHttpRequest;
102 
<a name="4" id="anc4"></a><span class="line-added">103 #if ENABLE(VIDEO_TRACK)</span>
<span class="line-added">104 class TextTrackCueGeneric;</span>
<span class="line-added">105 #endif</span>
<span class="line-added">106 </span>
107 #if ENABLE(SERVICE_WORKER)
108 class ServiceWorker;
109 #endif
110 
111 class Internals final : public RefCounted&lt;Internals&gt;, private ContextDestructionObserver
112 #if ENABLE(MEDIA_STREAM)
113     , private RealtimeMediaSource::Observer
114 #endif
115     {
116 public:
117     static Ref&lt;Internals&gt; create(Document&amp;);
118     virtual ~Internals();
119 
120     static void resetToConsistentState(Page&amp;);
121 
122     ExceptionOr&lt;String&gt; elementRenderTreeAsText(Element&amp;);
123     bool hasPausedImageAnimations(Element&amp;);
124 
125     bool isPaintingFrequently(Element&amp;);
126     void incrementFrequentPaintCounter(Element&amp;);
127 
128     String address(Node&amp;);
129     bool nodeNeedsStyleRecalc(Node&amp;);
130     String styleChangeType(Node&amp;);
131     String description(JSC::JSValue);
132 
133     bool isPreloaded(const String&amp; url);
134     bool isLoadingFromMemoryCache(const String&amp; url);
135     String fetchResponseSource(FetchResponse&amp;);
136     String xhrResponseSource(XMLHttpRequest&amp;);
137     bool isSharingStyleSheetContents(HTMLLinkElement&amp;, HTMLLinkElement&amp;);
138     bool isStyleSheetLoadingSubresources(HTMLLinkElement&amp;);
139     enum class CachePolicy { UseProtocolCachePolicy, ReloadIgnoringCacheData, ReturnCacheDataElseLoad, ReturnCacheDataDontLoad };
140     void setOverrideCachePolicy(CachePolicy);
141     ExceptionOr&lt;void&gt; setCanShowModalDialogOverride(bool allow);
142     enum class ResourceLoadPriority { ResourceLoadPriorityVeryLow, ResourceLoadPriorityLow, ResourceLoadPriorityMedium, ResourceLoadPriorityHigh, ResourceLoadPriorityVeryHigh };
143     void setOverrideResourceLoadPriority(ResourceLoadPriority);
144     void setStrictRawResourceValidationPolicyDisabled(bool);
145 
146     void clearMemoryCache();
147     void pruneMemoryCacheToSize(unsigned size);
148     void destroyDecodedDataForAllImages();
149     unsigned memoryCacheSize() const;
150 
151     unsigned imageFrameIndex(HTMLImageElement&amp;);
<a name="5" id="anc5"></a><span class="line-added">152     unsigned imageFrameCount(HTMLImageElement&amp;);</span>
<span class="line-added">153     float imageFrameDurationAtIndex(HTMLImageElement&amp;, unsigned index);</span>
154     void setImageFrameDecodingDuration(HTMLImageElement&amp;, float duration);
155     void resetImageAnimation(HTMLImageElement&amp;);
156     bool isImageAnimating(HTMLImageElement&amp;);
<a name="6" id="anc6"></a><span class="line-added">157     unsigned imagePendingDecodePromisesCountForTesting(HTMLImageElement&amp;);</span>
158     void setClearDecoderAfterAsyncFrameRequestForTesting(HTMLImageElement&amp;, bool enabled);
159     unsigned imageDecodeCount(HTMLImageElement&amp;);
160     unsigned pdfDocumentCachingCount(HTMLImageElement&amp;);
161     void setLargeImageAsyncDecodingEnabledForTesting(HTMLImageElement&amp;, bool enabled);
162     void setForceUpdateImageDataEnabledForTesting(HTMLImageElement&amp;, bool enabled);
163 
164     void setGridMaxTracksLimit(unsigned);
165 
166     void clearPageCache();
167     unsigned pageCacheSize() const;
168 
169     void disableTileSizeUpdateDelay();
170 
171     void setSpeculativeTilingDelayDisabledForTesting(bool);
172 
173     Ref&lt;CSSComputedStyleDeclaration&gt; computedStyleIncludingVisitedInfo(Element&amp;) const;
174 
175     Node* ensureUserAgentShadowRoot(Element&amp; host);
176     Node* shadowRoot(Element&amp; host);
177     ExceptionOr&lt;String&gt; shadowRootType(const Node&amp;) const;
178     String shadowPseudoId(Element&amp;);
179     void setShadowPseudoId(Element&amp;, const String&amp;);
180 
181     // CSS Deferred Parsing Testing
182     unsigned deferredStyleRulesCount(StyleSheet&amp;);
183     unsigned deferredGroupRulesCount(StyleSheet&amp;);
184     unsigned deferredKeyframesRulesCount(StyleSheet&amp;);
185 
186     // DOMTimers throttling testing.
187     ExceptionOr&lt;bool&gt; isTimerThrottled(int timeoutId);
188     bool isRequestAnimationFrameThrottled() const;
189     double requestAnimationFrameInterval() const;
190     bool scriptedAnimationsAreSuspended() const;
191     bool areTimersThrottled() const;
192 
193     enum EventThrottlingBehavior { Responsive, Unresponsive };
194     void setEventThrottlingBehaviorOverride(Optional&lt;EventThrottlingBehavior&gt;);
195     Optional&lt;EventThrottlingBehavior&gt; eventThrottlingBehaviorOverride() const;
196 
197     // Spatial Navigation testing.
198     ExceptionOr&lt;unsigned&gt; lastSpatialNavigationCandidateCount() const;
199 
200     // CSS Animation testing.
201     unsigned numberOfActiveAnimations() const;
202     ExceptionOr&lt;bool&gt; animationsAreSuspended() const;
203     ExceptionOr&lt;void&gt; suspendAnimations() const;
204     ExceptionOr&lt;void&gt; resumeAnimations() const;
205     ExceptionOr&lt;bool&gt; pauseAnimationAtTimeOnElement(const String&amp; animationName, double pauseTime, Element&amp;);
206     ExceptionOr&lt;bool&gt; pauseAnimationAtTimeOnPseudoElement(const String&amp; animationName, double pauseTime, Element&amp;, const String&amp; pseudoId);
207     double animationsInterval() const;
208 
209     // CSS Transition testing.
210     ExceptionOr&lt;bool&gt; pauseTransitionAtTimeOnElement(const String&amp; propertyName, double pauseTime, Element&amp;);
211     ExceptionOr&lt;bool&gt; pauseTransitionAtTimeOnPseudoElement(const String&amp; property, double pauseTime, Element&amp;, const String&amp; pseudoId);
212 
213     // Web Animations testing.
214     struct AcceleratedAnimation {
215         String property;
216         double speed;
217     };
218     Vector&lt;AcceleratedAnimation&gt; acceleratedAnimationsForElement(Element&amp;);
219     unsigned numberOfAnimationTimelineInvalidations() const;
220 
221     // For animations testing, we need a way to get at pseudo elements.
222     ExceptionOr&lt;RefPtr&lt;Element&gt;&gt; pseudoElement(Element&amp;, const String&amp;);
223 
224     Node* treeScopeRootNode(Node&amp;);
225     Node* parentTreeScope(Node&amp;);
226 
227     String visiblePlaceholder(Element&amp;);
228     void selectColorInColorChooser(HTMLInputElement&amp;, const String&amp; colorValue);
229     ExceptionOr&lt;Vector&lt;String&gt;&gt; formControlStateOfPreviousHistoryItem();
230     ExceptionOr&lt;void&gt; setFormControlStateOfPreviousHistoryItem(const Vector&lt;String&gt;&amp;);
231 
232     ExceptionOr&lt;Ref&lt;DOMRect&gt;&gt; absoluteCaretBounds();
233     ExceptionOr&lt;bool&gt; isCaretBlinkingSuspended();
234 
235     Ref&lt;DOMRect&gt; boundingBox(Element&amp;);
236 
237     ExceptionOr&lt;Ref&lt;DOMRectList&gt;&gt; inspectorHighlightRects();
<a name="7" id="anc7"></a>
238 
239     ExceptionOr&lt;unsigned&gt; markerCountForNode(Node&amp;, const String&amp;);
240     ExceptionOr&lt;RefPtr&lt;Range&gt;&gt; markerRangeForNode(Node&amp;, const String&amp; markerType, unsigned index);
241     ExceptionOr&lt;String&gt; markerDescriptionForNode(Node&amp;, const String&amp; markerType, unsigned index);
242     ExceptionOr&lt;String&gt; dumpMarkerRects(const String&amp; markerType);
243     void addTextMatchMarker(const Range&amp;, bool isActive);
244     ExceptionOr&lt;void&gt; setMarkedTextMatchesAreHighlighted(bool);
245 
246     void invalidateFontCache();
247     void setFontSmoothingEnabled(bool);
248 
249     ExceptionOr&lt;void&gt; setLowPowerModeEnabled(bool);
250 
251     ExceptionOr&lt;void&gt; setScrollViewPosition(int x, int y);
252     ExceptionOr&lt;void&gt; unconstrainedScrollTo(Element&amp;, double x, double y);
253 
254     ExceptionOr&lt;Ref&lt;DOMRect&gt;&gt; layoutViewportRect();
255     ExceptionOr&lt;Ref&lt;DOMRect&gt;&gt; visualViewportRect();
256 
257     ExceptionOr&lt;void&gt; setViewIsTransparent(bool);
258 
259     ExceptionOr&lt;String&gt; viewBaseBackgroundColor();
260     ExceptionOr&lt;void&gt; setViewBaseBackgroundColor(const String&amp; colorValue);
261 
262     ExceptionOr&lt;void&gt; setPagination(const String&amp; mode, int gap, int pageLength);
263     ExceptionOr&lt;void&gt; setPaginationLineGridEnabled(bool);
264     ExceptionOr&lt;String&gt; configurationForViewport(float devicePixelRatio, int deviceWidth, int deviceHeight, int availableWidth, int availableHeight);
265 
266     ExceptionOr&lt;bool&gt; wasLastChangeUserEdit(Element&amp; textField);
267     bool elementShouldAutoComplete(HTMLInputElement&amp;);
268     void setAutofilled(HTMLInputElement&amp;, bool enabled);
<a name="8" id="anc8"></a><span class="line-added">269     void setAutoFilledAndViewable(HTMLInputElement&amp;, bool enabled);</span>
270     enum class AutoFillButtonType { None, Contacts, Credentials, StrongPassword, CreditCard };
271     void setShowAutoFillButton(HTMLInputElement&amp;, AutoFillButtonType);
272     AutoFillButtonType autoFillButtonType(const HTMLInputElement&amp;);
273     AutoFillButtonType lastAutoFillButtonType(const HTMLInputElement&amp;);
274     ExceptionOr&lt;void&gt; scrollElementToRect(Element&amp;, int x, int y, int w, int h);
275 
276     ExceptionOr&lt;String&gt; autofillFieldName(Element&amp;);
277 
278     ExceptionOr&lt;void&gt; invalidateControlTints();
279 
280     RefPtr&lt;Range&gt; rangeFromLocationAndLength(Element&amp; scope, int rangeLocation, int rangeLength);
281     unsigned locationFromRange(Element&amp; scope, const Range&amp;);
282     unsigned lengthFromRange(Element&amp; scope, const Range&amp;);
283     String rangeAsText(const Range&amp;);
<a name="9" id="anc9"></a><span class="line-added">284     String rangeAsTextUsingBackwardsTextIterator(const Range&amp;);</span>
285     Ref&lt;Range&gt; subrange(Range&amp;, int rangeLocation, int rangeLength);
286     ExceptionOr&lt;RefPtr&lt;Range&gt;&gt; rangeForDictionaryLookupAtLocation(int x, int y);
287     RefPtr&lt;Range&gt; rangeOfStringNearLocation(const Range&amp;, const String&amp;, unsigned);
288 
289     ExceptionOr&lt;void&gt; setDelegatesScrolling(bool enabled);
290 
291     ExceptionOr&lt;int&gt; lastSpellCheckRequestSequence();
292     ExceptionOr&lt;int&gt; lastSpellCheckProcessedSequence();
293 
294     Vector&lt;String&gt; userPreferredLanguages() const;
295     void setUserPreferredLanguages(const Vector&lt;String&gt;&amp;);
296 
297     Vector&lt;String&gt; userPreferredAudioCharacteristics() const;
298     void setUserPreferredAudioCharacteristic(const String&amp;);
299 
300     ExceptionOr&lt;unsigned&gt; wheelEventHandlerCount();
301     ExceptionOr&lt;unsigned&gt; touchEventHandlerCount();
302 
303     ExceptionOr&lt;Ref&lt;DOMRectList&gt;&gt; touchEventRectsForEvent(const String&amp;);
304     ExceptionOr&lt;Ref&lt;DOMRectList&gt;&gt; passiveTouchEventListenerRects();
305 
306     ExceptionOr&lt;RefPtr&lt;NodeList&gt;&gt; nodesFromRect(Document&amp;, int x, int y, unsigned topPadding, unsigned rightPadding, unsigned bottomPadding, unsigned leftPadding, bool ignoreClipping, bool allowUserAgentShadowContent, bool allowChildFrameContent) const;
307 
308     String parserMetaData(JSC::JSValue = JSC::JSValue::JSUndefined);
309 
310     void updateEditorUINowIfScheduled();
311 
312     bool sentenceRetroCorrectionEnabled() const
313     {
314 #if PLATFORM(MAC) &amp;&amp; __MAC_OS_X_VERSION_MIN_REQUIRED &gt;= 101400
315         return true;
316 #else
317         return false;
318 #endif
319     }
320     bool hasSpellingMarker(int from, int length);
321     bool hasGrammarMarker(int from, int length);
322     bool hasAutocorrectedMarker(int from, int length);
323     void setContinuousSpellCheckingEnabled(bool);
324     void setAutomaticQuoteSubstitutionEnabled(bool);
325     void setAutomaticLinkDetectionEnabled(bool);
326     void setAutomaticDashSubstitutionEnabled(bool);
327     void setAutomaticTextReplacementEnabled(bool);
328     void setAutomaticSpellingCorrectionEnabled(bool);
329 
330     void handleAcceptedCandidate(const String&amp; candidate, unsigned location, unsigned length);
331     void changeSelectionListType();
332 
333     bool isOverwriteModeEnabled();
334     void toggleOverwriteModeEnabled();
335 
<a name="10" id="anc10"></a><span class="line-added">336     bool testProcessIncomingSyncMessagesWhenWaitingForSyncReply();</span>
<span class="line-added">337 </span>
338     ExceptionOr&lt;RefPtr&lt;Range&gt;&gt; rangeOfString(const String&amp;, RefPtr&lt;Range&gt;&amp;&amp;, const Vector&lt;String&gt;&amp; findOptions);
339     ExceptionOr&lt;unsigned&gt; countMatchesForText(const String&amp;, const Vector&lt;String&gt;&amp; findOptions, const String&amp; markMatches);
340     ExceptionOr&lt;unsigned&gt; countFindMatches(const String&amp;, const Vector&lt;String&gt;&amp; findOptions);
341 
342     unsigned numberOfScrollableAreas();
343 
344     ExceptionOr&lt;bool&gt; isPageBoxVisible(int pageNumber);
345 
346     static const char* internalsId;
347 
348     InternalSettings* settings() const;
349     unsigned workerThreadCount() const;
350     ExceptionOr&lt;bool&gt; areSVGAnimationsPaused() const;
351     ExceptionOr&lt;double&gt; svgAnimationsInterval(SVGSVGElement&amp;) const;
352 
353     enum {
354         // Values need to be kept in sync with Internals.idl.
355         LAYER_TREE_INCLUDES_VISIBLE_RECTS = 1,
356         LAYER_TREE_INCLUDES_TILE_CACHES = 2,
357         LAYER_TREE_INCLUDES_REPAINT_RECTS = 4,
358         LAYER_TREE_INCLUDES_PAINTING_PHASES = 8,
359         LAYER_TREE_INCLUDES_CONTENT_LAYERS = 16,
360         LAYER_TREE_INCLUDES_ACCELERATES_DRAWING = 32,
<a name="11" id="anc11"></a><span class="line-modified">361         LAYER_TREE_INCLUDES_CLIPPING = 64,</span>
<span class="line-modified">362         LAYER_TREE_INCLUDES_BACKING_STORE_ATTACHED = 128,</span>
<span class="line-added">363         LAYER_TREE_INCLUDES_ROOT_LAYER_PROPERTIES = 256,</span>
<span class="line-added">364         LAYER_TREE_INCLUDES_EVENT_REGION = 512,</span>
365     };
366     ExceptionOr&lt;String&gt; layerTreeAsText(Document&amp;, unsigned short flags) const;
367     ExceptionOr&lt;uint64_t&gt; layerIDForElement(Element&amp;);
368     ExceptionOr&lt;String&gt; repaintRectsAsText() const;
369 
370     ExceptionOr&lt;String&gt; scrollbarOverlayStyle(Node*) const;
371     ExceptionOr&lt;bool&gt; scrollbarUsingDarkAppearance(Node*) const;
372 
373     ExceptionOr&lt;String&gt; scrollingStateTreeAsText() const;
374     ExceptionOr&lt;String&gt; mainThreadScrollingReasons() const;
375     ExceptionOr&lt;Ref&lt;DOMRectList&gt;&gt; nonFastScrollableRects() const;
376 
377     ExceptionOr&lt;void&gt; setElementUsesDisplayListDrawing(Element&amp;, bool usesDisplayListDrawing);
378     ExceptionOr&lt;void&gt; setElementTracksDisplayListReplay(Element&amp;, bool isTrackingReplay);
379 
380     enum {
381         // Values need to be kept in sync with Internals.idl.
382         DISPLAY_LIST_INCLUDES_PLATFORM_OPERATIONS = 1,
383     };
384     ExceptionOr&lt;String&gt; displayListForElement(Element&amp;, unsigned short flags);
385     ExceptionOr&lt;String&gt; replayDisplayListForElement(Element&amp;, unsigned short flags);
386 
387     ExceptionOr&lt;void&gt; garbageCollectDocumentResources() const;
388 
389     void beginSimulatedMemoryPressure();
390     void endSimulatedMemoryPressure();
391     bool isUnderMemoryPressure();
392 
393     ExceptionOr&lt;void&gt; insertAuthorCSS(const String&amp;) const;
394     ExceptionOr&lt;void&gt; insertUserCSS(const String&amp;) const;
395 
<a name="12" id="anc12"></a><span class="line-added">396 #if ENABLE(INDEXED_DATABASE)</span>
397     unsigned numberOfIDBTransactions() const;
<a name="13" id="anc13"></a><span class="line-added">398 #endif</span>
399 
400     unsigned numberOfLiveNodes() const;
401     unsigned numberOfLiveDocuments() const;
402     unsigned referencingNodeCount(const Document&amp;) const;
403 
404 #if ENABLE(INTERSECTION_OBSERVER)
405     unsigned numberOfIntersectionObservers(const Document&amp;) const;
406 #endif
407 
408     uint64_t documentIdentifier(const Document&amp;) const;
409     bool isDocumentAlive(uint64_t documentIdentifier) const;
410 
411     bool isAnyWorkletGlobalScopeAlive() const;
412 
413     String serviceWorkerClientIdentifier(const Document&amp;) const;
414 
415     RefPtr&lt;WindowProxy&gt; openDummyInspectorFrontend(const String&amp; url);
416     void closeDummyInspectorFrontend();
417     ExceptionOr&lt;void&gt; setInspectorIsUnderTest(bool);
418 
419     String counterValue(Element&amp;);
420 
421     int pageNumber(Element&amp;, float pageWidth = 800, float pageHeight = 600);
422     Vector&lt;String&gt; shortcutIconURLs() const;
423 
424     int numberOfPages(float pageWidthInPixels = 800, float pageHeightInPixels = 600);
425     ExceptionOr&lt;String&gt; pageProperty(const String&amp; propertyName, int pageNumber) const;
426     ExceptionOr&lt;String&gt; pageSizeAndMarginsInPixels(int pageNumber, int width, int height, int marginTop, int marginRight, int marginBottom, int marginLeft) const;
427 
428     ExceptionOr&lt;float&gt; pageScaleFactor() const;
429 
430     ExceptionOr&lt;void&gt; setPageScaleFactor(float scaleFactor, int x, int y);
431     ExceptionOr&lt;void&gt; setPageZoomFactor(float);
432     ExceptionOr&lt;void&gt; setTextZoomFactor(float);
433 
434     ExceptionOr&lt;void&gt; setUseFixedLayout(bool);
435     ExceptionOr&lt;void&gt; setFixedLayoutSize(int width, int height);
436     ExceptionOr&lt;void&gt; setViewExposedRect(float left, float top, float width, float height);
437     void setPrinting(int width, int height);
438 
439     void setHeaderHeight(float);
440     void setFooterHeight(float);
441 
442     void setTopContentInset(float);
443 
444 #if ENABLE(FULLSCREEN_API)
445     void webkitWillEnterFullScreenForElement(Element&amp;);
446     void webkitDidEnterFullScreenForElement(Element&amp;);
447     void webkitWillExitFullScreenForElement(Element&amp;);
448     void webkitDidExitFullScreenForElement(Element&amp;);
449     bool isAnimatingFullScreen() const;
450 #endif
451 
452     struct FullscreenInsets {
453         float top { 0 };
454         float left { 0 };
455         float bottom { 0 };
456         float right { 0 };
457     };
458     void setFullscreenInsets(FullscreenInsets);
459     void setFullscreenAutoHideDuration(double);
460     void setFullscreenControlsHidden(bool);
461 
462     WEBCORE_TESTSUPPORT_EXPORT void setApplicationCacheOriginQuota(unsigned long long);
463 
464     void registerURLSchemeAsBypassingContentSecurityPolicy(const String&amp; scheme);
465     void removeURLSchemeRegisteredAsBypassingContentSecurityPolicy(const String&amp; scheme);
466 
467     void registerDefaultPortForProtocol(unsigned short port, const String&amp; protocol);
468 
469     Ref&lt;MallocStatistics&gt; mallocStatistics() const;
470     Ref&lt;TypeConversions&gt; typeConversions() const;
471     Ref&lt;MemoryInfo&gt; memoryInfo() const;
472 
473     Vector&lt;String&gt; getReferencedFilePaths() const;
474 
475     ExceptionOr&lt;void&gt; startTrackingRepaints();
476     ExceptionOr&lt;void&gt; stopTrackingRepaints();
477 
478     ExceptionOr&lt;void&gt; startTrackingLayerFlushes();
479     ExceptionOr&lt;unsigned&gt; layerFlushCount();
480 
481     ExceptionOr&lt;void&gt; startTrackingStyleRecalcs();
482     ExceptionOr&lt;unsigned&gt; styleRecalcCount();
483     unsigned lastStyleUpdateSize() const;
484 
485     ExceptionOr&lt;void&gt; startTrackingCompositingUpdates();
486     ExceptionOr&lt;unsigned&gt; compositingUpdateCount();
487 
488     enum CompositingPolicy { Normal, Conservative };
489     ExceptionOr&lt;void&gt; setCompositingPolicyOverride(Optional&lt;CompositingPolicy&gt;);
490     ExceptionOr&lt;Optional&lt;CompositingPolicy&gt;&gt; compositingPolicyOverride() const;
491 
492     ExceptionOr&lt;void&gt; updateLayoutIgnorePendingStylesheetsAndRunPostLayoutTasks(Node*);
493     unsigned layoutCount() const;
494 
495     Ref&lt;ArrayBuffer&gt; serializeObject(const RefPtr&lt;SerializedScriptValue&gt;&amp;) const;
496     Ref&lt;SerializedScriptValue&gt; deserializeBuffer(ArrayBuffer&amp;) const;
497 
498     bool isFromCurrentWorld(JSC::JSValue) const;
499 
500     void setUsesOverlayScrollbars(bool);
501     void setUsesMockScrollAnimator(bool);
502 
503     ExceptionOr&lt;String&gt; getCurrentCursorInfo();
504 
505     String markerTextForListItem(Element&amp;);
506 
507     String toolTipFromElement(Element&amp;) const;
508 
509     void forceReload(bool endToEnd);
510     void reloadExpiredOnly();
511 
<a name="14" id="anc14"></a><span class="line-modified">512     void enableAutoSizeMode(bool enabled, int width, int height);</span>
513 
514 #if ENABLE(LEGACY_ENCRYPTED_MEDIA)
515     void initializeMockCDM();
516 #endif
517 
518 #if ENABLE(ENCRYPTED_MEDIA)
519     Ref&lt;MockCDMFactory&gt; registerMockCDM();
520 #endif
521 
522     void enableMockMediaCapabilities();
523 
524 #if ENABLE(SPEECH_SYNTHESIS)
525     void enableMockSpeechSynthesizer();
526 #endif
527 
528 #if ENABLE(MEDIA_STREAM)
<a name="15" id="anc15"></a><span class="line-added">529     void setShouldInterruptAudioOnPageVisibilityChange(bool);</span>
530     void setMockMediaCaptureDevicesEnabled(bool);
531     void setMediaCaptureRequiresSecureConnection(bool);
532     void setCustomPrivateRecorderCreator();
533 #endif
534 
535 #if ENABLE(WEB_RTC)
536     void emulateRTCPeerConnectionPlatformEvent(RTCPeerConnection&amp;, const String&amp; action);
537     void useMockRTCPeerConnectionFactory(const String&amp;);
538     void setICECandidateFiltering(bool);
539     void setEnumeratingAllNetworkInterfacesEnabled(bool);
540     void stopPeerConnection(RTCPeerConnection&amp;);
541     void clearPeerConnectionFactory();
542     void applyRotationForOutgoingVideoSources(RTCPeerConnection&amp;);
<a name="16" id="anc16"></a><span class="line-added">543     void setEnableWebRTCEncryption(bool);</span>
544 #endif
545 
546     String getImageSourceURL(Element&amp;);
547 
548 #if ENABLE(VIDEO)
549     Vector&lt;String&gt; mediaResponseSources(HTMLMediaElement&amp;);
550     Vector&lt;String&gt; mediaResponseContentRanges(HTMLMediaElement&amp;);
551     void simulateAudioInterruption(HTMLMediaElement&amp;);
552     ExceptionOr&lt;bool&gt; mediaElementHasCharacteristic(HTMLMediaElement&amp;, const String&amp;);
553     void beginSimulatedHDCPError(HTMLMediaElement&amp;);
554     void endSimulatedHDCPError(HTMLMediaElement&amp;);
555 
556     bool elementShouldBufferData(HTMLMediaElement&amp;);
<a name="17" id="anc17"></a><span class="line-added">557     String elementBufferingPolicy(HTMLMediaElement&amp;);</span>
<span class="line-added">558     double privatePlayerVolume(const HTMLMediaElement&amp;);</span>
559 #endif
560 
561     bool isSelectPopupVisible(HTMLSelectElement&amp;);
562 
563     ExceptionOr&lt;String&gt; captionsStyleSheetOverride();
564     ExceptionOr&lt;void&gt; setCaptionsStyleSheetOverride(const String&amp;);
565     ExceptionOr&lt;void&gt; setPrimaryAudioTrackLanguageOverride(const String&amp;);
566     ExceptionOr&lt;void&gt; setCaptionDisplayMode(const String&amp;);
<a name="18" id="anc18"></a><span class="line-added">567 #if ENABLE(VIDEO_TRACK)</span>
<span class="line-added">568     RefPtr&lt;TextTrackCueGeneric&gt; createGenericCue(double startTime, double endTime, String text);</span>
<span class="line-added">569 #endif</span>
570 
571 #if ENABLE(VIDEO)
572     Ref&lt;TimeRanges&gt; createTimeRanges(Float32Array&amp; startTimes, Float32Array&amp; endTimes);
573     double closestTimeToTimeRanges(double time, TimeRanges&amp;);
574 #endif
575 
576     ExceptionOr&lt;Ref&lt;DOMRect&gt;&gt; selectionBounds();
577     void setSelectionWithoutValidation(Ref&lt;Node&gt; baseNode, unsigned baseOffset, RefPtr&lt;Node&gt; extentNode, unsigned extentOffset);
578 
579     ExceptionOr&lt;bool&gt; isPluginUnavailabilityIndicatorObscured(Element&amp;);
580     ExceptionOr&lt;String&gt; unavailablePluginReplacementText(Element&amp;);
581     bool isPluginSnapshotted(Element&amp;);
<a name="19" id="anc19"></a><span class="line-added">582     bool pluginIsBelowSizeThreshold(Element&amp;);</span>
583 
584 #if ENABLE(MEDIA_SOURCE)
585     WEBCORE_TESTSUPPORT_EXPORT void initializeMockMediaSource();
<a name="20" id="anc20"></a><span class="line-modified">586     Vector&lt;String&gt; bufferedSamplesForTrackID(SourceBuffer&amp;, const AtomString&amp;);</span>
<span class="line-modified">587     Vector&lt;String&gt; enqueuedSamplesForTrackID(SourceBuffer&amp;, const AtomString&amp;);</span>
<span class="line-added">588     double minimumUpcomingPresentationTimeForTrackID(SourceBuffer&amp;, const AtomString&amp;);</span>
589     void setShouldGenerateTimestamps(SourceBuffer&amp;, bool);
<a name="21" id="anc21"></a><span class="line-added">590     void setMaximumQueueDepthForTrackID(SourceBuffer&amp;, const AtomString&amp;, size_t);</span>
591 #endif
592 
593 #if ENABLE(VIDEO)
594     ExceptionOr&lt;void&gt; beginMediaSessionInterruption(const String&amp;);
595     void endMediaSessionInterruption(const String&amp;);
596     void applicationWillBecomeInactive();
597     void applicationDidBecomeActive();
598     void applicationWillEnterForeground(bool suspendedUnderLock) const;
599     void applicationDidEnterBackground(bool suspendedUnderLock) const;
600     ExceptionOr&lt;void&gt; setMediaSessionRestrictions(const String&amp; mediaType, StringView restrictionsString);
601     ExceptionOr&lt;String&gt; mediaSessionRestrictions(const String&amp; mediaType) const;
602     void setMediaElementRestrictions(HTMLMediaElement&amp;, StringView restrictionsString);
603     ExceptionOr&lt;void&gt; postRemoteControlCommand(const String&amp;, float argument);
604     bool elementIsBlockingDisplaySleep(HTMLMediaElement&amp;) const;
605 #endif
606 
607 #if ENABLE(MEDIA_SESSION)
608     void sendMediaSessionStartOfInterruptionNotification(MediaSessionInterruptingCategory);
609     void sendMediaSessionEndOfInterruptionNotification(MediaSessionInterruptingCategory);
610     String mediaSessionCurrentState(MediaSession&amp;) const;
611     double mediaElementPlayerVolume(HTMLMediaElement&amp;) const;
612     enum class MediaControlEvent { PlayPause, NextTrack, PreviousTrack };
613     void sendMediaControlEvent(MediaControlEvent);
614 #endif
615 
616 #if ENABLE(WIRELESS_PLAYBACK_TARGET)
617     void setMockMediaPlaybackTargetPickerEnabled(bool);
618     ExceptionOr&lt;void&gt; setMockMediaPlaybackTargetPickerState(const String&amp; deviceName, const String&amp; deviceState);
619 #endif
620 
621 #if ENABLE(WEB_AUDIO)
622     void setAudioContextRestrictions(AudioContext&amp;, StringView restrictionsString);
623 #endif
624 
625     void simulateSystemSleep() const;
626     void simulateSystemWake() const;
627 
628     enum class PageOverlayType { View, Document };
629     ExceptionOr&lt;Ref&lt;MockPageOverlay&gt;&gt; installMockPageOverlay(PageOverlayType);
630     ExceptionOr&lt;String&gt; pageOverlayLayerTreeAsText(unsigned short flags) const;
631 
632     void setPageMuted(StringView);
633     String pageMediaState();
634 
635     void setPageDefersLoading(bool);
636     ExceptionOr&lt;bool&gt; pageDefersLoading();
637 
638     RefPtr&lt;File&gt; createFile(const String&amp;);
639     void queueMicroTask(int);
640     bool testPreloaderSettingViewport();
641 
642 #if ENABLE(CONTENT_FILTERING)
643     MockContentFilterSettings&amp; mockContentFilterSettings();
644 #endif
645 
646 #if ENABLE(CSS_SCROLL_SNAP)
647     ExceptionOr&lt;String&gt; scrollSnapOffsets(Element&amp;);
648     void setPlatformMomentumScrollingPredictionEnabled(bool);
649 #endif
650 
651     ExceptionOr&lt;String&gt; pathStringWithShrinkWrappedRects(const Vector&lt;double&gt;&amp; rectComponents, double radius);
652 
653     String getCurrentMediaControlsStatusForElement(HTMLMediaElement&amp;);
654 
655     String userVisibleString(const DOMURL&amp;);
656     void setShowAllPlugins(bool);
657 
<a name="22" id="anc22"></a><span class="line-modified">658     String resourceLoadStatisticsForURL(const DOMURL&amp;);</span>
659     void setResourceLoadStatisticsEnabled(bool);
<a name="23" id="anc23"></a>
660 
661 #if ENABLE(STREAMS_API)
662     bool isReadableStreamDisturbed(JSC::ExecState&amp;, JSC::JSValue);
663     JSC::JSValue cloneArrayBuffer(JSC::ExecState&amp;, JSC::JSValue, JSC::JSValue, JSC::JSValue);
664 #endif
665 
666     String composedTreeAsText(Node&amp;);
667 
668     bool isProcessingUserGesture();
669     double lastHandledUserGestureTimestamp();
670 
671     void withUserGesture(RefPtr&lt;VoidCallback&gt;&amp;&amp;);
672 
<a name="24" id="anc24"></a><span class="line-added">673     bool userIsInteracting();</span>
<span class="line-added">674 </span>
675     RefPtr&lt;GCObservation&gt; observeGC(JSC::JSValue);
676 
677     enum class UserInterfaceLayoutDirection : uint8_t { LTR, RTL };
678     void setUserInterfaceLayoutDirection(UserInterfaceLayoutDirection);
679 
680     bool userPrefersReducedMotion() const;
681 
682     void reportBacktrace();
683 
684     enum class BaseWritingDirection { Natural, Ltr, Rtl };
685     void setBaseWritingDirection(BaseWritingDirection);
686 
687 #if ENABLE(POINTER_LOCK)
688     bool pageHasPendingPointerLock() const;
689     bool pageHasPointerLock() const;
690 #endif
691 
692     Vector&lt;String&gt; accessKeyModifiers() const;
693 
694     void setQuickLookPassword(const String&amp;);
695 
696     void setAsRunningUserScripts(Document&amp;);
<a name="25" id="anc25"></a><span class="line-added">697 #if ENABLE(APPLE_PAY)</span>
<span class="line-added">698     void setApplePayIsActive(Document&amp;);</span>
<span class="line-added">699 #endif</span>
700 
701 #if ENABLE(WEBGL)
702     void simulateWebGLContextChanged(WebGLRenderingContext&amp;);
703     void failNextGPUStatusCheck(WebGLRenderingContext&amp;);
704     bool hasLowAndHighPowerGPUs();
705 #endif
706 
707     void setPageVisibility(bool isVisible);
708     void setPageIsFocusedAndActive(bool);
709 
710 
711 #if ENABLE(WEB_RTC)
712     void setH264HardwareEncoderAllowed(bool allowed);
713 #endif
714 
715 #if ENABLE(MEDIA_STREAM)
<a name="26" id="anc26"></a><span class="line-added">716     void setMockAudioTrackChannelNumber(MediaStreamTrack&amp;, unsigned short);</span>
717     void setCameraMediaStreamTrackOrientation(MediaStreamTrack&amp;, int orientation);
718     unsigned long trackAudioSampleCount() const { return m_trackAudioSampleCount; }
719     unsigned long trackVideoSampleCount() const { return m_trackVideoSampleCount; }
720     void observeMediaStreamTrack(MediaStreamTrack&amp;);
721     using TrackFramePromise = DOMPromiseDeferred&lt;IDLInterface&lt;ImageData&gt;&gt;;
722     void grabNextMediaStreamTrackFrame(TrackFramePromise&amp;&amp;);
723     void delayMediaStreamTrackSamples(MediaStreamTrack&amp;, float);
724     void setMediaStreamTrackMuted(MediaStreamTrack&amp;, bool);
725     void removeMediaStreamTrack(MediaStream&amp;, MediaStreamTrack&amp;);
726     void simulateMediaStreamTrackCaptureSourceFailure(MediaStreamTrack&amp;);
727     void setMediaStreamTrackIdentifier(MediaStreamTrack&amp;, String&amp;&amp; id);
728     void setMediaStreamSourceInterrupted(MediaStreamTrack&amp;, bool);
<a name="27" id="anc27"></a><span class="line-added">729     void setDisableGetDisplayMediaUserGestureConstraint(bool);</span>
730 #endif
731 
732     String audioSessionCategory() const;
733     double preferredAudioBufferSize() const;
734     bool audioSessionActive() const;
735 
<a name="28" id="anc28"></a><span class="line-added">736     void storeRegistrationsOnDisk(DOMPromiseDeferred&lt;void&gt;&amp;&amp;);</span>
<span class="line-added">737 </span>
738     void clearCacheStorageMemoryRepresentation(DOMPromiseDeferred&lt;void&gt;&amp;&amp;);
739     void cacheStorageEngineRepresentation(DOMPromiseDeferred&lt;IDLDOMString&gt;&amp;&amp;);
740     void setResponseSizeWithPadding(FetchResponse&amp;, uint64_t size);
741     uint64_t responseSizeWithPadding(FetchResponse&amp;) const;
742 
<a name="29" id="anc29"></a><span class="line-added">743     void updateQuotaBasedOnSpaceUsage();</span>
<span class="line-added">744 </span>
745     void setConsoleMessageListener(RefPtr&lt;StringCallback&gt;&amp;&amp;);
746 
747 #if ENABLE(SERVICE_WORKER)
748     using HasRegistrationPromise = DOMPromiseDeferred&lt;IDLBoolean&gt;;
749     void hasServiceWorkerRegistration(const String&amp; clientURL, HasRegistrationPromise&amp;&amp;);
750     void terminateServiceWorker(ServiceWorker&amp;);
751     bool hasServiceWorkerConnection();
752 #endif
753 
754 #if ENABLE(APPLE_PAY)
755     MockPaymentCoordinator&amp; mockPaymentCoordinator(Document&amp;);
756 #endif
757 
758     bool isSystemPreviewLink(Element&amp;) const;
759     bool isSystemPreviewImage(Element&amp;) const;
760 
761     void postTask(RefPtr&lt;VoidCallback&gt;&amp;&amp;);
762     void markContextAsInsecure();
763 
764     bool usingAppleInternalSDK() const;
765 
766     struct NowPlayingState {
767         String title;
768         double duration;
769         double elapsedTime;
770         uint64_t uniqueIdentifier;
771         bool hasActiveSession;
772         bool registeredAsNowPlayingApplication;
773     };
774     ExceptionOr&lt;NowPlayingState&gt; nowPlayingState() const;
775 
776 #if ENABLE(VIDEO)
777     using PlaybackControlsPurpose = MediaElementSession::PlaybackControlsPurpose;
778     RefPtr&lt;HTMLMediaElement&gt; bestMediaElementForShowingPlaybackControlsManager(PlaybackControlsPurpose);
779 
780     using MediaSessionState = PlatformMediaSession::State;
781     MediaSessionState mediaSessionState(HTMLMediaElement&amp;);
782 #endif
783 
784     void setCaptureExtraNetworkLoadMetricsEnabled(bool);
785     String ongoingLoadsDescriptions() const;
786 
787     void reloadWithoutContentExtensions();
788 
789     void setUseSystemAppearance(bool);
790 
791     size_t pluginCount();
792 
793     void notifyResourceLoadObserver();
794 
795     unsigned primaryScreenDisplayID();
796 
797     bool capsLockIsOn();
798 
799     bool supportsVCPEncoder();
800 
801     using HEVCParameterSet = WebCore::HEVCParameterSet;
802     Optional&lt;HEVCParameterSet&gt; parseHEVCCodecParameters(const String&amp; codecString);
803 
804     struct CookieData {
805         String name;
806         String value;
807         String domain;
808         // Expiration dates are expressed as milliseconds since the UNIX epoch.
809         double expires { 0 };
810         bool isHttpOnly { false };
811         bool isSecure { false };
812         bool isSession { false };
813         bool isSameSiteLax { false };
814         bool isSameSiteStrict { false };
815 
816         CookieData(Cookie cookie)
817             : name(cookie.name)
818             , value(cookie.value)
819             , domain(cookie.domain)
820             , expires(cookie.expires)
821             , isHttpOnly(cookie.httpOnly)
822             , isSecure(cookie.secure)
823             , isSession(cookie.session)
824             , isSameSiteLax(cookie.sameSite == Cookie::SameSitePolicy::Lax)
825             , isSameSiteStrict(cookie.sameSite == Cookie::SameSitePolicy::Strict)
826         {
827             ASSERT(!(isSameSiteLax &amp;&amp; isSameSiteStrict));
828         }
829 
830         CookieData()
831         {
832         }
833     };
834     Vector&lt;CookieData&gt; getCookies() const;
835 
836     void setAlwaysAllowLocalWebarchive(bool);
<a name="30" id="anc30"></a><span class="line-added">837     void processWillSuspend();</span>
<span class="line-added">838     void processDidResume();</span>
<span class="line-added">839 </span>
<span class="line-added">840     void testDictionaryLogging();</span>
<span class="line-added">841 </span>
<span class="line-added">842     void setXHRMaximumIntervalForUserGestureForwarding(XMLHttpRequest&amp;, double);</span>
<span class="line-added">843 </span>
<span class="line-added">844     void setIsPlayingToAutomotiveHeadUnit(bool);</span>
<span class="line-added">845 </span>
<span class="line-added">846     struct TextIndicatorInfo {</span>
<span class="line-added">847         RefPtr&lt;DOMRectReadOnly&gt; textBoundingRectInRootViewCoordinates;</span>
<span class="line-added">848         RefPtr&lt;DOMRectList&gt; textRectsInBoundingRectCoordinates;</span>
<span class="line-added">849 </span>
<span class="line-added">850         TextIndicatorInfo();</span>
<span class="line-added">851         TextIndicatorInfo(const WebCore::TextIndicatorData&amp;);</span>
<span class="line-added">852         ~TextIndicatorInfo();</span>
<span class="line-added">853     };</span>
<span class="line-added">854 </span>
<span class="line-added">855     struct TextIndicatorOptions {</span>
<span class="line-added">856         bool useBoundingRectAndPaintAllContentForComplexRanges { false };</span>
<span class="line-added">857         bool computeEstimatedBackgroundColor { false };</span>
<span class="line-added">858         bool respectTextColor { false };</span>
<span class="line-added">859 </span>
<span class="line-added">860         WebCore::TextIndicatorOptions core()</span>
<span class="line-added">861         {</span>
<span class="line-added">862             WebCore::TextIndicatorOptions options = 0;</span>
<span class="line-added">863             if (useBoundingRectAndPaintAllContentForComplexRanges)</span>
<span class="line-added">864                 options = options | TextIndicatorOptionUseBoundingRectAndPaintAllContentForComplexRanges;</span>
<span class="line-added">865             if (computeEstimatedBackgroundColor)</span>
<span class="line-added">866                 options = options | TextIndicatorOptionComputeEstimatedBackgroundColor;</span>
<span class="line-added">867             if (respectTextColor)</span>
<span class="line-added">868                 options = options | TextIndicatorOptionRespectTextColor;</span>
<span class="line-added">869             return options;</span>
<span class="line-added">870         }</span>
<span class="line-added">871     };</span>
<span class="line-added">872 </span>
<span class="line-added">873     TextIndicatorInfo textIndicatorForRange(const Range&amp;, TextIndicatorOptions);</span>
<span class="line-added">874 </span>
<span class="line-added">875     void addPrefetchLoadEventListener(HTMLLinkElement&amp;, RefPtr&lt;EventListener&gt;&amp;&amp;);</span>
876 
877 private:
878     explicit Internals(Document&amp;);
879     Document* contextDocument() const;
880     Frame* frame() const;
881 
882     ExceptionOr&lt;RenderedDocumentMarker*&gt; markerAt(Node&amp;, const String&amp; markerType, unsigned index);
883 
884     // RealtimeMediaSource::Observer API
885 #if ENABLE(MEDIA_STREAM)
886     void videoSampleAvailable(MediaSample&amp;) final;
887     void audioSamplesAvailable(const MediaTime&amp;, const PlatformAudioData&amp;, const AudioStreamDescription&amp;, size_t) final { m_trackAudioSampleCount++; }
888 
889     OrientationNotifier m_orientationNotifier;
890     unsigned long m_trackVideoSampleCount { 0 };
891     unsigned long m_trackAudioSampleCount { 0 };
892     RefPtr&lt;MediaStreamTrack&gt; m_track;
893     Optional&lt;TrackFramePromise&gt; m_nextTrackFramePromise;
894 #endif
895 
896     std::unique_ptr&lt;InspectorStubFrontend&gt; m_inspectorFrontend;
897     RefPtr&lt;CacheStorageConnection&gt; m_cacheStorageConnection;
898 };
899 
900 } // namespace WebCore
<a name="31" id="anc31"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="31" type="hidden" />
</body>
</html>
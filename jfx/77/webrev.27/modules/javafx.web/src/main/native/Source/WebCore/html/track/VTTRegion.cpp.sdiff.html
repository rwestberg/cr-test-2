<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/html/track/VTTRegion.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="VTTCue.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="VTTRegion.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/html/track/VTTRegion.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
107     m_regionAnchor.setY(value);
108     return { };
109 }
110 
111 ExceptionOr&lt;void&gt; VTTRegion::setViewportAnchorX(double value)
112 {
113     if (!(value &gt;= 0 &amp;&amp; value &lt;= 100))
114         return Exception { IndexSizeError };
115     m_viewportAnchor.setX(value);
116     return { };
117 }
118 
119 ExceptionOr&lt;void&gt; VTTRegion::setViewportAnchorY(double value)
120 {
121     if (!(value &gt;= 0 &amp;&amp; value &lt;= 100))
122         return Exception { IndexSizeError };
123     m_viewportAnchor.setY(value);
124     return { };
125 }
126 
<span class="line-modified">127 static const AtomicString&amp; upKeyword()</span>
128 {
<span class="line-modified">129     static NeverDestroyed&lt;const AtomicString&gt; upKeyword(&quot;up&quot;, AtomicString::ConstructFromLiteral);</span>
130     return upKeyword;
131 }
132 
<span class="line-modified">133 const AtomicString&amp; VTTRegion::scroll() const</span>
134 {
135     return m_scroll ? upKeyword() : emptyAtom();
136 }
137 
<span class="line-modified">138 ExceptionOr&lt;void&gt; VTTRegion::setScroll(const AtomicString&amp; value)</span>
139 {
140     if (value.isEmpty()) {
141         m_scroll = false;
142         return { };
143     }
144     if (value == upKeyword()) {
145         m_scroll = true;
146         return { };
147     }
148     return Exception { SyntaxError };
149 }
150 
151 void VTTRegion::updateParametersFromRegion(const VTTRegion&amp; other)
152 {
153     m_lines = other.m_lines;
154     m_width = other.m_width;
155     m_regionAnchor = other.m_regionAnchor;
156     m_viewportAnchor = other.m_viewportAnchor;
157     m_scroll = other.m_scroll;
158 }
</pre>
<hr />
<pre>
243         FloatPoint anchor;
244         if (WebVTTParser::parseFloatPercentageValuePair(input, &#39;,&#39;, anchor) &amp;&amp; parsedEntireRun(input, valueRun))
245             m_viewportAnchor = anchor;
246         else
247             LOG(Media, &quot;VTTRegion::parseSettingValue, invalid ViewportAnchor&quot;);
248         break;
249     }
250     case Scroll:
251         if (input.scanRun(valueRun, upKeyword()))
252             m_scroll = true;
253         else
254             LOG(Media, &quot;VTTRegion::parseSettingValue, invalid Scroll&quot;);
255         break;
256     case None:
257         break;
258     }
259 
260     input.skipRun(valueRun);
261 }
262 
<span class="line-modified">263 const AtomicString&amp; VTTRegion::textTrackCueContainerScrollingClass()</span>
264 {
<span class="line-modified">265     static NeverDestroyed&lt;const AtomicString&gt; trackRegionCueContainerScrollingClass(&quot;scrolling&quot;, AtomicString::ConstructFromLiteral);</span>
266 
267     return trackRegionCueContainerScrollingClass;
268 }
269 
<span class="line-modified">270 const AtomicString&amp; VTTRegion::textTrackCueContainerShadowPseudoId()</span>
271 {
<span class="line-modified">272     static NeverDestroyed&lt;const AtomicString&gt; trackRegionCueContainerPseudoId(&quot;-webkit-media-text-track-region-container&quot;, AtomicString::ConstructFromLiteral);</span>
273 
274     return trackRegionCueContainerPseudoId;
275 }
276 
<span class="line-modified">277 const AtomicString&amp; VTTRegion::textTrackRegionShadowPseudoId()</span>
278 {
<span class="line-modified">279     static NeverDestroyed&lt;const AtomicString&gt; trackRegionShadowPseudoId(&quot;-webkit-media-text-track-region&quot;, AtomicString::ConstructFromLiteral);</span>
280 
281     return trackRegionShadowPseudoId;
282 }
283 
284 void VTTRegion::appendTextTrackCueBox(Ref&lt;VTTCueBox&gt;&amp;&amp; displayBox)
285 {
286     ASSERT(m_cueContainer);
287 
288     if (m_cueContainer-&gt;contains(displayBox.ptr()))
289         return;
290 
291     m_cueContainer-&gt;appendChild(displayBox);
292     displayLastTextTrackCueBox();
293 }
294 
295 void VTTRegion::displayLastTextTrackCueBox()
296 {
297     ASSERT(m_cueContainer);
298 
299     // The container needs to be rendered, if it is not empty and the region is not currently scrolling.
</pre>
</td>
<td>
<hr />
<pre>
107     m_regionAnchor.setY(value);
108     return { };
109 }
110 
111 ExceptionOr&lt;void&gt; VTTRegion::setViewportAnchorX(double value)
112 {
113     if (!(value &gt;= 0 &amp;&amp; value &lt;= 100))
114         return Exception { IndexSizeError };
115     m_viewportAnchor.setX(value);
116     return { };
117 }
118 
119 ExceptionOr&lt;void&gt; VTTRegion::setViewportAnchorY(double value)
120 {
121     if (!(value &gt;= 0 &amp;&amp; value &lt;= 100))
122         return Exception { IndexSizeError };
123     m_viewportAnchor.setY(value);
124     return { };
125 }
126 
<span class="line-modified">127 static const AtomString&amp; upKeyword()</span>
128 {
<span class="line-modified">129     static NeverDestroyed&lt;const AtomString&gt; upKeyword(&quot;up&quot;, AtomString::ConstructFromLiteral);</span>
130     return upKeyword;
131 }
132 
<span class="line-modified">133 const AtomString&amp; VTTRegion::scroll() const</span>
134 {
135     return m_scroll ? upKeyword() : emptyAtom();
136 }
137 
<span class="line-modified">138 ExceptionOr&lt;void&gt; VTTRegion::setScroll(const AtomString&amp; value)</span>
139 {
140     if (value.isEmpty()) {
141         m_scroll = false;
142         return { };
143     }
144     if (value == upKeyword()) {
145         m_scroll = true;
146         return { };
147     }
148     return Exception { SyntaxError };
149 }
150 
151 void VTTRegion::updateParametersFromRegion(const VTTRegion&amp; other)
152 {
153     m_lines = other.m_lines;
154     m_width = other.m_width;
155     m_regionAnchor = other.m_regionAnchor;
156     m_viewportAnchor = other.m_viewportAnchor;
157     m_scroll = other.m_scroll;
158 }
</pre>
<hr />
<pre>
243         FloatPoint anchor;
244         if (WebVTTParser::parseFloatPercentageValuePair(input, &#39;,&#39;, anchor) &amp;&amp; parsedEntireRun(input, valueRun))
245             m_viewportAnchor = anchor;
246         else
247             LOG(Media, &quot;VTTRegion::parseSettingValue, invalid ViewportAnchor&quot;);
248         break;
249     }
250     case Scroll:
251         if (input.scanRun(valueRun, upKeyword()))
252             m_scroll = true;
253         else
254             LOG(Media, &quot;VTTRegion::parseSettingValue, invalid Scroll&quot;);
255         break;
256     case None:
257         break;
258     }
259 
260     input.skipRun(valueRun);
261 }
262 
<span class="line-modified">263 const AtomString&amp; VTTRegion::textTrackCueContainerScrollingClass()</span>
264 {
<span class="line-modified">265     static NeverDestroyed&lt;const AtomString&gt; trackRegionCueContainerScrollingClass(&quot;scrolling&quot;, AtomString::ConstructFromLiteral);</span>
266 
267     return trackRegionCueContainerScrollingClass;
268 }
269 
<span class="line-modified">270 const AtomString&amp; VTTRegion::textTrackCueContainerShadowPseudoId()</span>
271 {
<span class="line-modified">272     static NeverDestroyed&lt;const AtomString&gt; trackRegionCueContainerPseudoId(&quot;-webkit-media-text-track-region-container&quot;, AtomString::ConstructFromLiteral);</span>
273 
274     return trackRegionCueContainerPseudoId;
275 }
276 
<span class="line-modified">277 const AtomString&amp; VTTRegion::textTrackRegionShadowPseudoId()</span>
278 {
<span class="line-modified">279     static NeverDestroyed&lt;const AtomString&gt; trackRegionShadowPseudoId(&quot;-webkit-media-text-track-region&quot;, AtomString::ConstructFromLiteral);</span>
280 
281     return trackRegionShadowPseudoId;
282 }
283 
284 void VTTRegion::appendTextTrackCueBox(Ref&lt;VTTCueBox&gt;&amp;&amp; displayBox)
285 {
286     ASSERT(m_cueContainer);
287 
288     if (m_cueContainer-&gt;contains(displayBox.ptr()))
289         return;
290 
291     m_cueContainer-&gt;appendChild(displayBox);
292     displayLastTextTrackCueBox();
293 }
294 
295 void VTTRegion::displayLastTextTrackCueBox()
296 {
297     ASSERT(m_cueContainer);
298 
299     // The container needs to be rendered, if it is not empty and the region is not currently scrolling.
</pre>
</td>
</tr>
</table>
<center><a href="VTTCue.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="VTTRegion.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>
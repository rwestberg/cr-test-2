<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/inspector/JSInjectedScriptHostPrototype.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="JSInjectedScriptHost.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="JSJavaScriptCallFrame.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/inspector/JSInjectedScriptHostPrototype.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 41,44 ***</span>
  static EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionSubtype(ExecState*);
  static EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionFunctionDetails(ExecState*);
  static EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionGetInternalProperties(ExecState*);
  static EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionInternalConstructorName(ExecState*);
  static EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionIsHTMLAllCollection(ExecState*);
  static EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionProxyTargetValue(ExecState*);
  static EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionWeakMapSize(ExecState*);
  static EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionWeakMapEntries(ExecState*);
  static EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionWeakSetSize(ExecState*);
  static EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionWeakSetEntries(ExecState*);
  static EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionIteratorEntries(ExecState*);
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionQueryObjects(ExecState*);</span>
  static EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionEvaluateWithScopeExtension(ExecState*);
  
  static EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeAttributeEvaluate(ExecState*);
  
  const ClassInfo JSInjectedScriptHostPrototype::s_info = { &quot;InjectedScriptHost&quot;, &amp;Base::s_info, nullptr, nullptr, CREATE_METHOD_TABLE(JSInjectedScriptHostPrototype) };
  
  void JSInjectedScriptHostPrototype::finishCreation(VM&amp; vm, JSGlobalObject* globalObject)
  {
      Base::finishCreation(vm);
      ASSERT(inherits(vm, info()));
<span class="line-removed">-     didBecomePrototype();</span>
  
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;subtype&quot;, jsInjectedScriptHostPrototypeFunctionSubtype, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;functionDetails&quot;, jsInjectedScriptHostPrototypeFunctionFunctionDetails, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;getInternalProperties&quot;, jsInjectedScriptHostPrototypeFunctionGetInternalProperties, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;internalConstructorName&quot;, jsInjectedScriptHostPrototypeFunctionInternalConstructorName, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;isHTMLAllCollection&quot;, jsInjectedScriptHostPrototypeFunctionIsHTMLAllCollection, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;proxyTargetValue&quot;, jsInjectedScriptHostPrototypeFunctionProxyTargetValue, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;weakMapSize&quot;, jsInjectedScriptHostPrototypeFunctionWeakMapSize, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;weakMapEntries&quot;, jsInjectedScriptHostPrototypeFunctionWeakMapEntries, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;weakSetSize&quot;, jsInjectedScriptHostPrototypeFunctionWeakSetSize, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;weakSetEntries&quot;, jsInjectedScriptHostPrototypeFunctionWeakSetEntries, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;iteratorEntries&quot;, jsInjectedScriptHostPrototypeFunctionIteratorEntries, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);
<span class="line-modified">!     JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;queryObjects&quot;, jsInjectedScriptHostPrototypeFunctionQueryObjects, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);</span>
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;evaluateWithScopeExtension&quot;, jsInjectedScriptHostPrototypeFunctionEvaluateWithScopeExtension, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);
  
<span class="line-modified">!     JSC_NATIVE_GETTER(&quot;evaluate&quot;, jsInjectedScriptHostPrototypeAttributeEvaluate, PropertyAttribute::DontEnum | PropertyAttribute::Accessor);</span>
  }
  
  EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeAttributeEvaluate(ExecState* exec)
  {
      VM&amp; vm = exec-&gt;vm();
<span class="line-new-header">--- 41,49 ---</span>
  static EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionSubtype(ExecState*);
  static EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionFunctionDetails(ExecState*);
  static EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionGetInternalProperties(ExecState*);
  static EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionInternalConstructorName(ExecState*);
  static EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionIsHTMLAllCollection(ExecState*);
<span class="line-added">+ static EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionIsPromiseRejectedWithNativeGetterTypeError(ExecState*);</span>
  static EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionProxyTargetValue(ExecState*);
  static EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionWeakMapSize(ExecState*);
  static EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionWeakMapEntries(ExecState*);
  static EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionWeakSetSize(ExecState*);
  static EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionWeakSetEntries(ExecState*);
  static EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionIteratorEntries(ExecState*);
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionQueryInstances(ExecState*);</span>
<span class="line-added">+ static EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionQueryHolders(ExecState*);</span>
  static EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionEvaluateWithScopeExtension(ExecState*);
  
  static EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeAttributeEvaluate(ExecState*);
<span class="line-added">+ static EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeAttributeSavedResultAlias(ExecState*);</span>
  
  const ClassInfo JSInjectedScriptHostPrototype::s_info = { &quot;InjectedScriptHost&quot;, &amp;Base::s_info, nullptr, nullptr, CREATE_METHOD_TABLE(JSInjectedScriptHostPrototype) };
  
  void JSInjectedScriptHostPrototype::finishCreation(VM&amp; vm, JSGlobalObject* globalObject)
  {
      Base::finishCreation(vm);
      ASSERT(inherits(vm, info()));
  
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;subtype&quot;, jsInjectedScriptHostPrototypeFunctionSubtype, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;functionDetails&quot;, jsInjectedScriptHostPrototypeFunctionFunctionDetails, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;getInternalProperties&quot;, jsInjectedScriptHostPrototypeFunctionGetInternalProperties, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;internalConstructorName&quot;, jsInjectedScriptHostPrototypeFunctionInternalConstructorName, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;isHTMLAllCollection&quot;, jsInjectedScriptHostPrototypeFunctionIsHTMLAllCollection, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);
<span class="line-added">+     JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;isPromiseRejectedWithNativeGetterTypeError&quot;, jsInjectedScriptHostPrototypeFunctionIsPromiseRejectedWithNativeGetterTypeError, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);</span>
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;proxyTargetValue&quot;, jsInjectedScriptHostPrototypeFunctionProxyTargetValue, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;weakMapSize&quot;, jsInjectedScriptHostPrototypeFunctionWeakMapSize, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;weakMapEntries&quot;, jsInjectedScriptHostPrototypeFunctionWeakMapEntries, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;weakSetSize&quot;, jsInjectedScriptHostPrototypeFunctionWeakSetSize, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;weakSetEntries&quot;, jsInjectedScriptHostPrototypeFunctionWeakSetEntries, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;iteratorEntries&quot;, jsInjectedScriptHostPrototypeFunctionIteratorEntries, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);
<span class="line-modified">!     JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;queryInstances&quot;, jsInjectedScriptHostPrototypeFunctionQueryInstances, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);</span>
<span class="line-added">+     JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;queryHolders&quot;, jsInjectedScriptHostPrototypeFunctionQueryHolders, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);</span>
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;evaluateWithScopeExtension&quot;, jsInjectedScriptHostPrototypeFunctionEvaluateWithScopeExtension, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);
  
<span class="line-modified">!     JSC_NATIVE_GETTER_WITHOUT_TRANSITION(&quot;evaluate&quot;, jsInjectedScriptHostPrototypeAttributeEvaluate, PropertyAttribute::DontEnum | PropertyAttribute::Accessor);</span>
<span class="line-added">+     JSC_NATIVE_GETTER_WITHOUT_TRANSITION(&quot;savedResultAlias&quot;, jsInjectedScriptHostPrototypeAttributeSavedResultAlias, PropertyAttribute::DontEnum | PropertyAttribute::Accessor);</span>
  }
  
  EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeAttributeEvaluate(ExecState* exec)
  {
      VM&amp; vm = exec-&gt;vm();
</pre>
<hr />
<pre>
<span class="line-old-header">*** 90,10 ***</span>
<span class="line-new-header">--- 95,23 ---</span>
          return throwVMTypeError(exec, scope);
  
      return JSValue::encode(castedThis-&gt;evaluate(exec));
  }
  
<span class="line-added">+ EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeAttributeSavedResultAlias(ExecState* exec)</span>
<span class="line-added">+ {</span>
<span class="line-added">+     VM&amp; vm = exec-&gt;vm();</span>
<span class="line-added">+     auto scope = DECLARE_THROW_SCOPE(vm);</span>
<span class="line-added">+ </span>
<span class="line-added">+     JSValue thisValue = exec-&gt;thisValue();</span>
<span class="line-added">+     JSInjectedScriptHost* castedThis = jsDynamicCast&lt;JSInjectedScriptHost*&gt;(vm, thisValue);</span>
<span class="line-added">+     if (!castedThis)</span>
<span class="line-added">+         return throwVMTypeError(exec, scope);</span>
<span class="line-added">+ </span>
<span class="line-added">+     return JSValue::encode(castedThis-&gt;savedResultAlias(exec));</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
  EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionInternalConstructorName(ExecState* exec)
  {
      VM&amp; vm = exec-&gt;vm();
      auto scope = DECLARE_THROW_SCOPE(vm);
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 116,10 ***</span>
<span class="line-new-header">--- 134,23 ---</span>
          return throwVMTypeError(exec, scope);
  
      return JSValue::encode(castedThis-&gt;isHTMLAllCollection(exec));
  }
  
<span class="line-added">+ EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionIsPromiseRejectedWithNativeGetterTypeError(ExecState* exec)</span>
<span class="line-added">+ {</span>
<span class="line-added">+     VM&amp; vm = exec-&gt;vm();</span>
<span class="line-added">+     auto scope = DECLARE_THROW_SCOPE(vm);</span>
<span class="line-added">+ </span>
<span class="line-added">+     JSValue thisValue = exec-&gt;thisValue();</span>
<span class="line-added">+     JSInjectedScriptHost* castedThis = jsDynamicCast&lt;JSInjectedScriptHost*&gt;(vm, thisValue);</span>
<span class="line-added">+     if (!castedThis)</span>
<span class="line-added">+         return throwVMTypeError(exec, scope);</span>
<span class="line-added">+ </span>
<span class="line-added">+     return JSValue::encode(castedThis-&gt;isPromiseRejectedWithNativeGetterTypeError(exec));</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
  EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionProxyTargetValue(ExecState* exec)
  {
      VM&amp; vm = exec-&gt;vm();
      auto scope = DECLARE_THROW_SCOPE(vm);
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 194,21 ***</span>
          return throwVMTypeError(exec, scope);
  
      return JSValue::encode(castedThis-&gt;iteratorEntries(exec));
  }
  
<span class="line-modified">! EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionQueryObjects(ExecState* exec)</span>
  {
      VM&amp; vm = exec-&gt;vm();
      auto scope = DECLARE_THROW_SCOPE(vm);
  
      JSValue thisValue = exec-&gt;thisValue();
      JSInjectedScriptHost* castedThis = jsDynamicCast&lt;JSInjectedScriptHost*&gt;(vm, thisValue);
      if (!castedThis)
          return throwVMTypeError(exec, scope);
  
<span class="line-modified">!     return JSValue::encode(castedThis-&gt;queryObjects(exec));</span>
  }
  
  EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionEvaluateWithScopeExtension(ExecState* exec)
  {
      VM&amp; vm = exec-&gt;vm();
<span class="line-new-header">--- 225,34 ---</span>
          return throwVMTypeError(exec, scope);
  
      return JSValue::encode(castedThis-&gt;iteratorEntries(exec));
  }
  
<span class="line-modified">! EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionQueryInstances(ExecState* exec)</span>
<span class="line-added">+ {</span>
<span class="line-added">+     VM&amp; vm = exec-&gt;vm();</span>
<span class="line-added">+     auto scope = DECLARE_THROW_SCOPE(vm);</span>
<span class="line-added">+ </span>
<span class="line-added">+     JSValue thisValue = exec-&gt;thisValue();</span>
<span class="line-added">+     JSInjectedScriptHost* castedThis = jsDynamicCast&lt;JSInjectedScriptHost*&gt;(vm, thisValue);</span>
<span class="line-added">+     if (!castedThis)</span>
<span class="line-added">+         return throwVMTypeError(exec, scope);</span>
<span class="line-added">+ </span>
<span class="line-added">+     return JSValue::encode(castedThis-&gt;queryInstances(exec));</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionQueryHolders(ExecState* exec)</span>
  {
      VM&amp; vm = exec-&gt;vm();
      auto scope = DECLARE_THROW_SCOPE(vm);
  
      JSValue thisValue = exec-&gt;thisValue();
      JSInjectedScriptHost* castedThis = jsDynamicCast&lt;JSInjectedScriptHost*&gt;(vm, thisValue);
      if (!castedThis)
          return throwVMTypeError(exec, scope);
  
<span class="line-modified">!     return JSValue::encode(castedThis-&gt;queryHolders(exec));</span>
  }
  
  EncodedJSValue JSC_HOST_CALL jsInjectedScriptHostPrototypeFunctionEvaluateWithScopeExtension(ExecState* exec)
  {
      VM&amp; vm = exec-&gt;vm();
</pre>
<center><a href="JSInjectedScriptHost.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="JSJavaScriptCallFrame.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/runtime/ClassInfo.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="CatchScope.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="ClonedArguments.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/runtime/ClassInfo.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,9 ***</span>
  /*
   *  Copyright (C) 1999-2001 Harri Porten (porten@kde.org)
   *  Copyright (C) 2001 Peter Kelly (pmk@post.com)
<span class="line-modified">!  *  Copyright (C) 2003-2018 Apple Inc. All rights reserved.</span>
   *
   *  This library is free software; you can redistribute it and/or
   *  modify it under the terms of the GNU Library General Public
   *  License as published by the Free Software Foundation; either
   *  version 2 of the License, or (at your option) any later version.
<span class="line-new-header">--- 1,9 ---</span>
  /*
   *  Copyright (C) 1999-2001 Harri Porten (porten@kde.org)
   *  Copyright (C) 2001 Peter Kelly (pmk@post.com)
<span class="line-modified">!  *  Copyright (C) 2003-2019 Apple Inc. All rights reserved.</span>
   *
   *  This library is free software; you can redistribute it and/or
   *  modify it under the terms of the GNU Library General Public
   *  License as published by the Free Software Foundation; either
   *  version 2 of the License, or (at your option) any later version.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 23,109 ***</span>
  #pragma once
  
  #include &quot;CallFrame.h&quot;
  #include &quot;ConstructData.h&quot;
  #include &quot;JSCast.h&quot;
  
  namespace WTF {
  class PrintStream;
  };
  
  namespace JSC {
  
<span class="line-modified">! class HeapSnapshotBuilder;</span>
  class JSArrayBufferView;
  class Snippet;
  struct HashTable;
  
  struct MethodTable {
      using DestroyFunctionPtr = void (*)(JSCell*);
<span class="line-modified">!     DestroyFunctionPtr WTF_METHOD_TABLE_ENTRY(destroy);</span>
  
      using VisitChildrenFunctionPtr = void (*)(JSCell*, SlotVisitor&amp;);
<span class="line-modified">!     VisitChildrenFunctionPtr WTF_METHOD_TABLE_ENTRY(visitChildren);</span>
  
      using GetCallDataFunctionPtr = CallType (*)(JSCell*, CallData&amp;);
<span class="line-modified">!     GetCallDataFunctionPtr WTF_METHOD_TABLE_ENTRY(getCallData);</span>
  
      using GetConstructDataFunctionPtr = ConstructType (*)(JSCell*, ConstructData&amp;);
<span class="line-modified">!     GetConstructDataFunctionPtr WTF_METHOD_TABLE_ENTRY(getConstructData);</span>
  
      using PutFunctionPtr = bool (*)(JSCell*, ExecState*, PropertyName propertyName, JSValue, PutPropertySlot&amp;);
<span class="line-modified">!     PutFunctionPtr WTF_METHOD_TABLE_ENTRY(put);</span>
  
      using PutByIndexFunctionPtr = bool (*)(JSCell*, ExecState*, unsigned propertyName, JSValue, bool shouldThrow);
<span class="line-modified">!     PutByIndexFunctionPtr WTF_METHOD_TABLE_ENTRY(putByIndex);</span>
  
      using DeletePropertyFunctionPtr = bool (*)(JSCell*, ExecState*, PropertyName);
<span class="line-modified">!     DeletePropertyFunctionPtr WTF_METHOD_TABLE_ENTRY(deleteProperty);</span>
  
      using DeletePropertyByIndexFunctionPtr = bool (*)(JSCell*, ExecState*, unsigned);
<span class="line-modified">!     DeletePropertyByIndexFunctionPtr WTF_METHOD_TABLE_ENTRY(deletePropertyByIndex);</span>
  
      using GetOwnPropertySlotFunctionPtr = bool (*)(JSObject*, ExecState*, PropertyName, PropertySlot&amp;);
<span class="line-modified">!     GetOwnPropertySlotFunctionPtr WTF_METHOD_TABLE_ENTRY(getOwnPropertySlot);</span>
  
      using GetOwnPropertySlotByIndexFunctionPtr = bool (*)(JSObject*, ExecState*, unsigned, PropertySlot&amp;);
<span class="line-modified">!     GetOwnPropertySlotByIndexFunctionPtr WTF_METHOD_TABLE_ENTRY(getOwnPropertySlotByIndex);</span>
  
      using ToThisFunctionPtr = JSValue (*)(JSCell*, ExecState*, ECMAMode);
<span class="line-modified">!     ToThisFunctionPtr WTF_METHOD_TABLE_ENTRY(toThis);</span>
  
      using DefaultValueFunctionPtr = JSValue (*)(const JSObject*, ExecState*, PreferredPrimitiveType);
<span class="line-modified">!     DefaultValueFunctionPtr WTF_METHOD_TABLE_ENTRY(defaultValue);</span>
  
      using GetOwnPropertyNamesFunctionPtr = void (*)(JSObject*, ExecState*, PropertyNameArray&amp;, EnumerationMode);
<span class="line-modified">!     GetOwnPropertyNamesFunctionPtr WTF_METHOD_TABLE_ENTRY(getOwnPropertyNames);</span>
  
      using GetOwnNonIndexPropertyNamesFunctionPtr = void (*)(JSObject*, ExecState*, PropertyNameArray&amp;, EnumerationMode);
<span class="line-modified">!     GetOwnNonIndexPropertyNamesFunctionPtr WTF_METHOD_TABLE_ENTRY(getOwnNonIndexPropertyNames);</span>
  
      using GetPropertyNamesFunctionPtr = void (*)(JSObject*, ExecState*, PropertyNameArray&amp;, EnumerationMode);
<span class="line-modified">!     GetPropertyNamesFunctionPtr WTF_METHOD_TABLE_ENTRY(getPropertyNames);</span>
  
      using GetEnumerableLengthFunctionPtr = uint32_t (*)(ExecState*, JSObject*);
<span class="line-modified">!     GetEnumerableLengthFunctionPtr WTF_METHOD_TABLE_ENTRY(getEnumerableLength);</span>
  
<span class="line-modified">!     GetPropertyNamesFunctionPtr WTF_METHOD_TABLE_ENTRY(getStructurePropertyNames);</span>
<span class="line-modified">!     GetPropertyNamesFunctionPtr WTF_METHOD_TABLE_ENTRY(getGenericPropertyNames);</span>
  
      using ClassNameFunctionPtr = String (*)(const JSObject*, VM&amp;);
<span class="line-modified">!     ClassNameFunctionPtr WTF_METHOD_TABLE_ENTRY(className);</span>
  
      using ToStringNameFunctionPtr = String (*)(const JSObject*, ExecState*);
<span class="line-modified">!     ToStringNameFunctionPtr WTF_METHOD_TABLE_ENTRY(toStringName);</span>
  
      using CustomHasInstanceFunctionPtr = bool (*)(JSObject*, ExecState*, JSValue);
<span class="line-modified">!     CustomHasInstanceFunctionPtr WTF_METHOD_TABLE_ENTRY(customHasInstance);</span>
  
      using DefineOwnPropertyFunctionPtr = bool (*)(JSObject*, ExecState*, PropertyName, const PropertyDescriptor&amp;, bool);
<span class="line-modified">!     DefineOwnPropertyFunctionPtr WTF_METHOD_TABLE_ENTRY(defineOwnProperty);</span>
  
      using PreventExtensionsFunctionPtr = bool (*)(JSObject*, ExecState*);
<span class="line-modified">!     PreventExtensionsFunctionPtr WTF_METHOD_TABLE_ENTRY(preventExtensions);</span>
  
      using IsExtensibleFunctionPtr = bool (*)(JSObject*, ExecState*);
<span class="line-modified">!     IsExtensibleFunctionPtr WTF_METHOD_TABLE_ENTRY(isExtensible);</span>
  
      using SetPrototypeFunctionPtr = bool (*)(JSObject*, ExecState*, JSValue, bool shouldThrowIfCantSet);
<span class="line-modified">!     SetPrototypeFunctionPtr WTF_METHOD_TABLE_ENTRY(setPrototype);</span>
  
      using GetPrototypeFunctionPtr = JSValue (*)(JSObject*, ExecState*);
<span class="line-modified">!     GetPrototypeFunctionPtr WTF_METHOD_TABLE_ENTRY(getPrototype);</span>
  
      using DumpToStreamFunctionPtr = void (*)(const JSCell*, PrintStream&amp;);
<span class="line-modified">!     DumpToStreamFunctionPtr WTF_METHOD_TABLE_ENTRY(dumpToStream);</span>
  
<span class="line-modified">!     using HeapSnapshotFunctionPtr = void (*)(JSCell*, HeapSnapshotBuilder&amp;);</span>
<span class="line-modified">!     HeapSnapshotFunctionPtr WTF_METHOD_TABLE_ENTRY(heapSnapshot);</span>
  
      using EstimatedSizeFunctionPtr = size_t (*)(JSCell*, VM&amp;);
<span class="line-modified">!     EstimatedSizeFunctionPtr WTF_METHOD_TABLE_ENTRY(estimatedSize);</span>
  
      using VisitOutputConstraintsPtr = void (*)(JSCell*, SlotVisitor&amp;);
<span class="line-modified">!     VisitOutputConstraintsPtr WTF_METHOD_TABLE_ENTRY(visitOutputConstraints);</span>
  };
  
  #define CREATE_MEMBER_CHECKER(member) \
      template &lt;typename T&gt; \
      struct MemberCheck##member { \
<span class="line-new-header">--- 23,116 ---</span>
  #pragma once
  
  #include &quot;CallFrame.h&quot;
  #include &quot;ConstructData.h&quot;
  #include &quot;JSCast.h&quot;
<span class="line-added">+ #include &lt;wtf/PtrTag.h&gt;</span>
  
  namespace WTF {
  class PrintStream;
  };
  
  namespace JSC {
  
<span class="line-modified">! class HeapAnalyzer;</span>
  class JSArrayBufferView;
  class Snippet;
  struct HashTable;
  
<span class="line-added">+ #define METHOD_TABLE_ENTRY(method) \</span>
<span class="line-added">+     WTF_VTBL_FUNCPTR_PTRAUTH_STR(&quot;MethodTable.&quot; #method) method</span>
<span class="line-added">+ </span>
  struct MethodTable {
      using DestroyFunctionPtr = void (*)(JSCell*);
<span class="line-modified">!     DestroyFunctionPtr METHOD_TABLE_ENTRY(destroy);</span>
  
      using VisitChildrenFunctionPtr = void (*)(JSCell*, SlotVisitor&amp;);
<span class="line-modified">!     VisitChildrenFunctionPtr METHOD_TABLE_ENTRY(visitChildren);</span>
  
      using GetCallDataFunctionPtr = CallType (*)(JSCell*, CallData&amp;);
<span class="line-modified">!     GetCallDataFunctionPtr METHOD_TABLE_ENTRY(getCallData);</span>
  
      using GetConstructDataFunctionPtr = ConstructType (*)(JSCell*, ConstructData&amp;);
<span class="line-modified">!     GetConstructDataFunctionPtr METHOD_TABLE_ENTRY(getConstructData);</span>
  
      using PutFunctionPtr = bool (*)(JSCell*, ExecState*, PropertyName propertyName, JSValue, PutPropertySlot&amp;);
<span class="line-modified">!     PutFunctionPtr METHOD_TABLE_ENTRY(put);</span>
  
      using PutByIndexFunctionPtr = bool (*)(JSCell*, ExecState*, unsigned propertyName, JSValue, bool shouldThrow);
<span class="line-modified">!     PutByIndexFunctionPtr METHOD_TABLE_ENTRY(putByIndex);</span>
  
      using DeletePropertyFunctionPtr = bool (*)(JSCell*, ExecState*, PropertyName);
<span class="line-modified">!     DeletePropertyFunctionPtr METHOD_TABLE_ENTRY(deleteProperty);</span>
  
      using DeletePropertyByIndexFunctionPtr = bool (*)(JSCell*, ExecState*, unsigned);
<span class="line-modified">!     DeletePropertyByIndexFunctionPtr METHOD_TABLE_ENTRY(deletePropertyByIndex);</span>
  
      using GetOwnPropertySlotFunctionPtr = bool (*)(JSObject*, ExecState*, PropertyName, PropertySlot&amp;);
<span class="line-modified">!     GetOwnPropertySlotFunctionPtr METHOD_TABLE_ENTRY(getOwnPropertySlot);</span>
  
      using GetOwnPropertySlotByIndexFunctionPtr = bool (*)(JSObject*, ExecState*, unsigned, PropertySlot&amp;);
<span class="line-modified">!     GetOwnPropertySlotByIndexFunctionPtr METHOD_TABLE_ENTRY(getOwnPropertySlotByIndex);</span>
<span class="line-added">+ </span>
<span class="line-added">+     using DoPutPropertySecurityCheckFunctionPtr = void (*)(JSObject*, ExecState*, PropertyName, PutPropertySlot&amp;);</span>
<span class="line-added">+     DoPutPropertySecurityCheckFunctionPtr METHOD_TABLE_ENTRY(doPutPropertySecurityCheck);</span>
  
      using ToThisFunctionPtr = JSValue (*)(JSCell*, ExecState*, ECMAMode);
<span class="line-modified">!     ToThisFunctionPtr METHOD_TABLE_ENTRY(toThis);</span>
  
      using DefaultValueFunctionPtr = JSValue (*)(const JSObject*, ExecState*, PreferredPrimitiveType);
<span class="line-modified">!     DefaultValueFunctionPtr METHOD_TABLE_ENTRY(defaultValue);</span>
  
      using GetOwnPropertyNamesFunctionPtr = void (*)(JSObject*, ExecState*, PropertyNameArray&amp;, EnumerationMode);
<span class="line-modified">!     GetOwnPropertyNamesFunctionPtr METHOD_TABLE_ENTRY(getOwnPropertyNames);</span>
  
      using GetOwnNonIndexPropertyNamesFunctionPtr = void (*)(JSObject*, ExecState*, PropertyNameArray&amp;, EnumerationMode);
<span class="line-modified">!     GetOwnNonIndexPropertyNamesFunctionPtr METHOD_TABLE_ENTRY(getOwnNonIndexPropertyNames);</span>
  
      using GetPropertyNamesFunctionPtr = void (*)(JSObject*, ExecState*, PropertyNameArray&amp;, EnumerationMode);
<span class="line-modified">!     GetPropertyNamesFunctionPtr METHOD_TABLE_ENTRY(getPropertyNames);</span>
  
      using GetEnumerableLengthFunctionPtr = uint32_t (*)(ExecState*, JSObject*);
<span class="line-modified">!     GetEnumerableLengthFunctionPtr METHOD_TABLE_ENTRY(getEnumerableLength);</span>
  
<span class="line-modified">!     GetPropertyNamesFunctionPtr METHOD_TABLE_ENTRY(getStructurePropertyNames);</span>
<span class="line-modified">!     GetPropertyNamesFunctionPtr METHOD_TABLE_ENTRY(getGenericPropertyNames);</span>
  
      using ClassNameFunctionPtr = String (*)(const JSObject*, VM&amp;);
<span class="line-modified">!     ClassNameFunctionPtr METHOD_TABLE_ENTRY(className);</span>
  
      using ToStringNameFunctionPtr = String (*)(const JSObject*, ExecState*);
<span class="line-modified">!     ToStringNameFunctionPtr METHOD_TABLE_ENTRY(toStringName);</span>
  
      using CustomHasInstanceFunctionPtr = bool (*)(JSObject*, ExecState*, JSValue);
<span class="line-modified">!     CustomHasInstanceFunctionPtr METHOD_TABLE_ENTRY(customHasInstance);</span>
  
      using DefineOwnPropertyFunctionPtr = bool (*)(JSObject*, ExecState*, PropertyName, const PropertyDescriptor&amp;, bool);
<span class="line-modified">!     DefineOwnPropertyFunctionPtr METHOD_TABLE_ENTRY(defineOwnProperty);</span>
  
      using PreventExtensionsFunctionPtr = bool (*)(JSObject*, ExecState*);
<span class="line-modified">!     PreventExtensionsFunctionPtr METHOD_TABLE_ENTRY(preventExtensions);</span>
  
      using IsExtensibleFunctionPtr = bool (*)(JSObject*, ExecState*);
<span class="line-modified">!     IsExtensibleFunctionPtr METHOD_TABLE_ENTRY(isExtensible);</span>
  
      using SetPrototypeFunctionPtr = bool (*)(JSObject*, ExecState*, JSValue, bool shouldThrowIfCantSet);
<span class="line-modified">!     SetPrototypeFunctionPtr METHOD_TABLE_ENTRY(setPrototype);</span>
  
      using GetPrototypeFunctionPtr = JSValue (*)(JSObject*, ExecState*);
<span class="line-modified">!     GetPrototypeFunctionPtr METHOD_TABLE_ENTRY(getPrototype);</span>
  
      using DumpToStreamFunctionPtr = void (*)(const JSCell*, PrintStream&amp;);
<span class="line-modified">!     DumpToStreamFunctionPtr METHOD_TABLE_ENTRY(dumpToStream);</span>
  
<span class="line-modified">!     using AnalyzeHeapFunctionPtr = void (*)(JSCell*, HeapAnalyzer&amp;);</span>
<span class="line-modified">!     AnalyzeHeapFunctionPtr METHOD_TABLE_ENTRY(analyzeHeap);</span>
  
      using EstimatedSizeFunctionPtr = size_t (*)(JSCell*, VM&amp;);
<span class="line-modified">!     EstimatedSizeFunctionPtr METHOD_TABLE_ENTRY(estimatedSize);</span>
  
      using VisitOutputConstraintsPtr = void (*)(JSCell*, SlotVisitor&amp;);
<span class="line-modified">!     VisitOutputConstraintsPtr METHOD_TABLE_ENTRY(visitOutputConstraints);</span>
  };
  
  #define CREATE_MEMBER_CHECKER(member) \
      template &lt;typename T&gt; \
      struct MemberCheck##member { \
</pre>
<hr />
<pre>
<span class="line-old-header">*** 154,10 ***</span>
<span class="line-new-header">--- 161,11 ---</span>
          &amp;ClassName::putByIndex, \
          &amp;ClassName::deleteProperty, \
          &amp;ClassName::deletePropertyByIndex, \
          &amp;ClassName::getOwnPropertySlot, \
          &amp;ClassName::getOwnPropertySlotByIndex, \
<span class="line-added">+         &amp;ClassName::doPutPropertySecurityCheck, \</span>
          &amp;ClassName::toThis, \
          &amp;ClassName::defaultValue, \
          &amp;ClassName::getOwnPropertyNames, \
          &amp;ClassName::getOwnNonIndexPropertyNames, \
          &amp;ClassName::getPropertyNames, \
</pre>
<hr />
<pre>
<span class="line-old-header">*** 171,11 ***</span>
          &amp;ClassName::preventExtensions, \
          &amp;ClassName::isExtensible, \
          &amp;ClassName::setPrototype, \
          &amp;ClassName::getPrototype, \
          &amp;ClassName::dumpToStream, \
<span class="line-modified">!         &amp;ClassName::heapSnapshot, \</span>
          &amp;ClassName::estimatedSize, \
          &amp;ClassName::visitOutputConstraints, \
      }, \
      ClassName::TypedArrayStorageType
  
<span class="line-new-header">--- 179,11 ---</span>
          &amp;ClassName::preventExtensions, \
          &amp;ClassName::isExtensible, \
          &amp;ClassName::setPrototype, \
          &amp;ClassName::getPrototype, \
          &amp;ClassName::dumpToStream, \
<span class="line-modified">!         &amp;ClassName::analyzeHeap, \</span>
          &amp;ClassName::estimatedSize, \
          &amp;ClassName::visitOutputConstraints, \
      }, \
      ClassName::TypedArrayStorageType
  
</pre>
<center><a href="CatchScope.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="ClonedArguments.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>
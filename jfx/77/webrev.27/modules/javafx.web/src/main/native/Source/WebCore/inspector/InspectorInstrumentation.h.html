<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New modules/javafx.web/src/main/native/Source/WebCore/inspector/InspectorInstrumentation.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
   1 /*
   2 * Copyright (C) 2010 Google Inc. All rights reserved.
   3 * Copyright (C) 2014-2016 Apple Inc. All rights reserved.
   4 *
   5 * Redistribution and use in source and binary forms, with or without
   6 * modification, are permitted provided that the following conditions are
   7 * met:
   8 *
   9 *     * Redistributions of source code must retain the above copyright
  10 * notice, this list of conditions and the following disclaimer.
  11 *     * Redistributions in binary form must reproduce the above
  12 * copyright notice, this list of conditions and the following disclaimer
  13 * in the documentation and/or other materials provided with the
  14 * distribution.
  15 *     * Neither the name of Google Inc. nor the names of its
  16 * contributors may be used to endorse or promote products derived from
  17 * this software without specific prior written permission.
  18 *
  19 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
  20 * &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
  21 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
  22 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
  23 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
  24 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
  25 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
  26 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
  27 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  28 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
  29 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  30 */
  31 
  32 #pragma once
  33 
  34 #include &quot;CSSSelector.h&quot;
  35 #include &quot;CallTracerTypes.h&quot;
  36 #include &quot;CanvasBase.h&quot;
  37 #include &quot;CanvasRenderingContext.h&quot;
  38 #include &quot;Database.h&quot;
  39 #include &quot;DocumentThreadableLoader.h&quot;
  40 #include &quot;Element.h&quot;
  41 #include &quot;EventTarget.h&quot;
  42 #include &quot;FormData.h&quot;
  43 #include &quot;Frame.h&quot;
  44 #include &quot;HitTestResult.h&quot;
  45 #include &quot;InspectorController.h&quot;
  46 #include &quot;InspectorInstrumentationCookie.h&quot;
  47 #include &quot;OffscreenCanvas.h&quot;
  48 #include &quot;Page.h&quot;
  49 #include &quot;StorageArea.h&quot;
  50 #include &quot;WorkerGlobalScope.h&quot;
  51 #include &quot;WorkerInspectorController.h&quot;
  52 #include &lt;JavaScriptCore/JSCInlines.h&gt;
  53 #include &lt;initializer_list&gt;
  54 #include &lt;wtf/MemoryPressureHandler.h&gt;
  55 #include &lt;wtf/RefPtr.h&gt;
  56 
  57 #if ENABLE(WEBGL)
  58 #include &quot;WebGLRenderingContextBase.h&quot;
  59 #endif
  60 
  61 namespace Inspector {
  62 class ConsoleMessage;
  63 class ScriptArguments;
  64 class ScriptCallStack;
  65 }
  66 
  67 namespace WebCore {
  68 
  69 class CachedResource;
  70 class CharacterData;
  71 class DOMWindow;
  72 class DOMWrapperWorld;
  73 class Document;
  74 class DocumentLoader;
  75 class EventListener;
  76 class HTTPHeaderMap;
  77 class InspectorTimelineAgent;
  78 class InstrumentingAgents;
  79 class NetworkLoadMetrics;
  80 class Node;
  81 class PseudoElement;
  82 class RegisteredEventListener;
  83 class RenderLayer;
  84 class RenderObject;
  85 class ResourceLoader;
  86 class ResourceRequest;
  87 class ResourceResponse;
  88 class ScriptExecutionContext;
  89 class SecurityOrigin;
  90 class ShadowRoot;
  91 class TimerBase;
  92 #if ENABLE(WEBGL)
  93 class WebGLProgram;
  94 #endif
  95 class WebKitNamedFlow;
  96 class WorkerInspectorProxy;
  97 
  98 enum class StorageType;
  99 
 100 struct WebSocketFrame;
 101 
 102 #define FAST_RETURN_IF_NO_FRONTENDS(value) if (LIKELY(!InspectorInstrumentation::hasFrontends())) return value;
 103 
 104 class InspectorInstrumentation {
 105 public:
 106     static void didClearWindowObjectInWorld(Frame&amp;, DOMWrapperWorld&amp;);
 107     static bool isDebuggerPaused(Frame*);
 108 
 109     static int identifierForNode(Node&amp;);
 110     static void addEventListenersToNode(Node&amp;);
 111     static void willInsertDOMNode(Document&amp;, Node&amp; parent);
 112     static void didInsertDOMNode(Document&amp;, Node&amp;);
 113     static void willRemoveDOMNode(Document&amp;, Node&amp;);
 114     static void didRemoveDOMNode(Document&amp;, Node&amp;);
 115     static void willModifyDOMAttr(Document&amp;, Element&amp;, const AtomString&amp; oldValue, const AtomString&amp; newValue);
 116     static void didModifyDOMAttr(Document&amp;, Element&amp;, const AtomString&amp; name, const AtomString&amp; value);
 117     static void didRemoveDOMAttr(Document&amp;, Element&amp;, const AtomString&amp; name);
 118     static void characterDataModified(Document&amp;, CharacterData&amp;);
 119     static void willInvalidateStyleAttr(Element&amp;);
 120     static void didInvalidateStyleAttr(Element&amp;);
 121     static void documentDetached(Document&amp;);
 122     static void frameWindowDiscarded(Frame&amp;, DOMWindow*);
 123     static void mediaQueryResultChanged(Document&amp;);
 124     static void activeStyleSheetsUpdated(Document&amp;);
 125     static void didPushShadowRoot(Element&amp; host, ShadowRoot&amp;);
 126     static void willPopShadowRoot(Element&amp; host, ShadowRoot&amp;);
 127     static void didChangeCustomElementState(Element&amp;);
 128     static void pseudoElementCreated(Page*, PseudoElement&amp;);
 129     static void pseudoElementDestroyed(Page*, PseudoElement&amp;);
 130     static void didCreateNamedFlow(Document*, WebKitNamedFlow&amp;);
 131     static void willRemoveNamedFlow(Document*, WebKitNamedFlow&amp;);
 132     static void didChangeRegionOverset(Document&amp;, WebKitNamedFlow&amp;);
 133     static void didRegisterNamedFlowContentElement(Document&amp;, WebKitNamedFlow&amp;, Node&amp; contentElement, Node* nextContentElement = nullptr);
 134     static void didUnregisterNamedFlowContentElement(Document&amp;, WebKitNamedFlow&amp;, Node&amp; contentElement);
 135 
 136     static void mouseDidMoveOverElement(Page&amp;, const HitTestResult&amp;, unsigned modifierFlags);
 137     static bool handleMousePress(Frame&amp;);
 138     static bool handleTouchEvent(Frame&amp;, Node&amp;);
 139     static bool forcePseudoState(const Element&amp;, CSSSelector::PseudoClassType);
 140 
 141     static void willSendXMLHttpRequest(ScriptExecutionContext*, const String&amp; url);
 142     static void willFetch(ScriptExecutionContext&amp;, const String&amp; url);
 143     static void didInstallTimer(ScriptExecutionContext&amp;, int timerId, Seconds timeout, bool singleShot);
 144     static void didRemoveTimer(ScriptExecutionContext&amp;, int timerId);
 145 
 146     static void didPostMessage(Frame&amp;, TimerBase&amp;, JSC::ExecState&amp;);
 147     static void didFailPostMessage(Frame&amp;, TimerBase&amp;);
 148     static void willDispatchPostMessage(Frame&amp;, TimerBase&amp;);
 149     static void didDispatchPostMessage(Frame&amp;, TimerBase&amp;);
 150 
 151     static InspectorInstrumentationCookie willCallFunction(ScriptExecutionContext*, const String&amp; scriptName, int scriptLine, int scriptColumn);
 152     static void didCallFunction(const InspectorInstrumentationCookie&amp;, ScriptExecutionContext*);
 153     static void didAddEventListener(EventTarget&amp;, const AtomString&amp; eventType, EventListener&amp;, bool capture);
 154     static void willRemoveEventListener(EventTarget&amp;, const AtomString&amp; eventType, EventListener&amp;, bool capture);
 155     static bool isEventListenerDisabled(EventTarget&amp;, const AtomString&amp; eventType, EventListener&amp;, bool capture);
 156     static InspectorInstrumentationCookie willDispatchEvent(Document&amp;, const Event&amp;, bool hasEventListeners);
 157     static void didDispatchEvent(const InspectorInstrumentationCookie&amp;, bool defaultPrevented);
 158     static void willHandleEvent(ScriptExecutionContext&amp;, Event&amp;, const RegisteredEventListener&amp;);
 159     static void didHandleEvent(ScriptExecutionContext&amp;);
 160     static InspectorInstrumentationCookie willDispatchEventOnWindow(Frame*, const Event&amp;, DOMWindow&amp;);
 161     static void didDispatchEventOnWindow(const InspectorInstrumentationCookie&amp;, bool defaultPrevented);
 162     static void eventDidResetAfterDispatch(const Event&amp;);
 163     static InspectorInstrumentationCookie willEvaluateScript(Frame&amp;, const String&amp; url, int lineNumber, int columnNumber);
 164     static void didEvaluateScript(const InspectorInstrumentationCookie&amp;, Frame&amp;);
 165     static InspectorInstrumentationCookie willFireTimer(ScriptExecutionContext&amp;, int timerId, bool oneShot);
 166     static void didFireTimer(const InspectorInstrumentationCookie&amp;);
 167     static void didInvalidateLayout(Frame&amp;);
 168     static InspectorInstrumentationCookie willLayout(Frame&amp;);
 169     static void didLayout(const InspectorInstrumentationCookie&amp;, RenderObject&amp;);
 170     static void didScroll(Page&amp;);
 171     static void willComposite(Frame&amp;);
 172     static void didComposite(Frame&amp;);
 173     static void willPaint(RenderObject&amp;);
 174     static void didPaint(RenderObject&amp;, const LayoutRect&amp;);
 175     static InspectorInstrumentationCookie willRecalculateStyle(Document&amp;);
 176     static void didRecalculateStyle(const InspectorInstrumentationCookie&amp;);
 177     static void didScheduleStyleRecalculation(Document&amp;);
 178     static void applyUserAgentOverride(Frame&amp;, String&amp;);
 179     static void applyEmulatedMedia(Frame&amp;, String&amp;);
 180 
 181     static void willSendRequest(Frame*, unsigned long identifier, DocumentLoader*, ResourceRequest&amp;, const ResourceResponse&amp; redirectResponse);
 182     static void didLoadResourceFromMemoryCache(Page&amp;, DocumentLoader*, CachedResource*);
 183     static void didReceiveResourceResponse(Frame&amp;, unsigned long identifier, DocumentLoader*, const ResourceResponse&amp;, ResourceLoader*);
 184     static void didReceiveThreadableLoaderResponse(DocumentThreadableLoader&amp;, unsigned long identifier);
 185     static void didReceiveData(Frame*, unsigned long identifier, const char* data, int dataLength, int encodedDataLength);
 186     static void didFinishLoading(Frame*, DocumentLoader*, unsigned long identifier, const NetworkLoadMetrics&amp;, ResourceLoader*);
 187     static void didFailLoading(Frame*, DocumentLoader*, unsigned long identifier, const ResourceError&amp;);
 188 
 189     static void willSendRequest(WorkerGlobalScope&amp;, unsigned long identifier, ResourceRequest&amp;);
 190     static void didReceiveResourceResponse(WorkerGlobalScope&amp;, unsigned long identifier, const ResourceResponse&amp;);
 191     static void didReceiveData(WorkerGlobalScope&amp;, unsigned long identifier, const char* data, int dataLength);
 192     static void didFinishLoading(WorkerGlobalScope&amp;, unsigned long identifier, const NetworkLoadMetrics&amp;);
 193     static void didFailLoading(WorkerGlobalScope&amp;, unsigned long identifier, const ResourceError&amp;);
 194 
 195     // Some network requests do not go through the normal network loading path.
 196     // These network requests have to issue their own willSendRequest / didReceiveResponse / didFinishLoading / didFailLoading
 197     // instrumentation calls. Some of these loads are for resources that lack a CachedResource::Type.
 198     enum class LoadType { Ping, Beacon };
 199     static void willSendRequestOfType(Frame*, unsigned long identifier, DocumentLoader*, ResourceRequest&amp;, LoadType);
 200 
 201     static void continueAfterXFrameOptionsDenied(Frame&amp;, unsigned long identifier, DocumentLoader&amp;, const ResourceResponse&amp;);
 202     static void continueWithPolicyDownload(Frame&amp;, unsigned long identifier, DocumentLoader&amp;, const ResourceResponse&amp;);
 203     static void continueWithPolicyIgnore(Frame&amp;, unsigned long identifier, DocumentLoader&amp;, const ResourceResponse&amp;);
 204     static void willLoadXHRSynchronously(ScriptExecutionContext*);
 205     static void didLoadXHRSynchronously(ScriptExecutionContext*);
 206     static void scriptImported(ScriptExecutionContext&amp;, unsigned long identifier, const String&amp; sourceString);
 207     static void scriptExecutionBlockedByCSP(ScriptExecutionContext*, const String&amp; directiveText);
 208     static void didReceiveScriptResponse(ScriptExecutionContext*, unsigned long identifier);
 209     static void domContentLoadedEventFired(Frame&amp;);
 210     static void loadEventFired(Frame*);
 211     static void frameDetachedFromParent(Frame&amp;);
 212     static void didCommitLoad(Frame&amp;, DocumentLoader*);
 213     static void frameDocumentUpdated(Frame&amp;);
 214     static void loaderDetachedFromFrame(Frame&amp;, DocumentLoader&amp;);
 215     static void frameStartedLoading(Frame&amp;);
 216     static void frameStoppedLoading(Frame&amp;);
 217     static void frameScheduledNavigation(Frame&amp;, Seconds delay);
 218     static void frameClearedScheduledNavigation(Frame&amp;);
 219     static void defaultAppearanceDidChange(Page&amp;, bool useDarkAppearance);
 220     static void willDestroyCachedResource(CachedResource&amp;);
 221 
 222     static void addMessageToConsole(Page&amp;, std::unique_ptr&lt;Inspector::ConsoleMessage&gt;);
 223     static void addMessageToConsole(WorkerGlobalScope&amp;, std::unique_ptr&lt;Inspector::ConsoleMessage&gt;);
 224 
 225     static void consoleCount(Page&amp;, JSC::ExecState*, const String&amp; label);
 226     static void consoleCount(WorkerGlobalScope&amp;, JSC::ExecState*, const String&amp; label);
 227     static void consoleCountReset(Page&amp;, JSC::ExecState*, const String&amp; label);
 228     static void consoleCountReset(WorkerGlobalScope&amp;, JSC::ExecState*, const String&amp; label);
 229 
 230     static void takeHeapSnapshot(Frame&amp;, const String&amp; title);
 231     static void startConsoleTiming(Frame&amp;, JSC::ExecState*, const String&amp; label);
 232     static void startConsoleTiming(WorkerGlobalScope&amp;, JSC::ExecState*, const String&amp; label);
 233     static void logConsoleTiming(Frame&amp;, JSC::ExecState*, const String&amp; label, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp;);
 234     static void logConsoleTiming(WorkerGlobalScope&amp;, JSC::ExecState*, const String&amp; label, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp;);
 235     static void stopConsoleTiming(Frame&amp;, JSC::ExecState*, const String&amp; label);
 236     static void stopConsoleTiming(WorkerGlobalScope&amp;, JSC::ExecState*, const String&amp; label);
 237     static void consoleTimeStamp(Frame&amp;, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp;);
 238     static void startProfiling(Page&amp;, JSC::ExecState*, const String&amp; title);
 239     static void stopProfiling(Page&amp;, JSC::ExecState*, const String&amp; title);
 240     static void consoleStartRecordingCanvas(CanvasRenderingContext&amp;, JSC::ExecState&amp;, JSC::JSObject* options);
 241 
 242     static void didRequestAnimationFrame(Document&amp;, int callbackId);
 243     static void didCancelAnimationFrame(Document&amp;, int callbackId);
 244     static InspectorInstrumentationCookie willFireAnimationFrame(Document&amp;, int callbackId);
 245     static void didFireAnimationFrame(const InspectorInstrumentationCookie&amp;);
 246 
 247     static InspectorInstrumentationCookie willFireObserverCallback(ScriptExecutionContext&amp;, const String&amp; callbackType);
 248     static void didFireObserverCallback(const InspectorInstrumentationCookie&amp;);
 249 
 250     static void didOpenDatabase(Database&amp;);
 251 
 252     static void didDispatchDOMStorageEvent(Page&amp;, const String&amp; key, const String&amp; oldValue, const String&amp; newValue, StorageType, SecurityOrigin*);
 253 
 254     static bool shouldWaitForDebuggerOnStart(ScriptExecutionContext&amp;);
 255     static void workerStarted(ScriptExecutionContext&amp;, WorkerInspectorProxy*, const URL&amp;);
 256     static void workerTerminated(ScriptExecutionContext&amp;, WorkerInspectorProxy*);
 257 
 258     static void didCreateWebSocket(Document*, unsigned long identifier, const URL&amp; requestURL);
 259     static void willSendWebSocketHandshakeRequest(Document*, unsigned long identifier, const ResourceRequest&amp;);
 260     static void didReceiveWebSocketHandshakeResponse(Document*, unsigned long identifier, const ResourceResponse&amp;);
 261     static void didCloseWebSocket(Document*, unsigned long identifier);
 262     static void didReceiveWebSocketFrame(Document*, unsigned long identifier, const WebSocketFrame&amp;);
 263     static void didSendWebSocketFrame(Document*, unsigned long identifier, const WebSocketFrame&amp;);
 264     static void didReceiveWebSocketFrameError(Document*, unsigned long identifier, const String&amp; errorMessage);
 265 
 266 #if ENABLE(RESOURCE_USAGE)
 267     static void didHandleMemoryPressure(Page&amp;, Critical);
 268 #endif
 269 
 270     static void didChangeCSSCanvasClientNodes(CanvasBase&amp;);
 271     static void didCreateCanvasRenderingContext(CanvasRenderingContext&amp;);
 272     static void didChangeCanvasMemory(CanvasRenderingContext&amp;);
 273     static void recordCanvasAction(CanvasRenderingContext&amp;, const String&amp;, std::initializer_list&lt;RecordCanvasActionVariant&gt;&amp;&amp; = { });
 274     static void didFinishRecordingCanvasFrame(CanvasRenderingContext&amp;, bool forceDispatch = false);
 275 #if ENABLE(WEBGL)
 276     static void didEnableExtension(WebGLRenderingContextBase&amp;, const String&amp;);
 277     static void didCreateProgram(WebGLRenderingContextBase&amp;, WebGLProgram&amp;);
 278     static void willDeleteProgram(WebGLRenderingContextBase&amp;, WebGLProgram&amp;);
 279     static bool isShaderProgramDisabled(WebGLRenderingContextBase&amp;, WebGLProgram&amp;);
 280     static bool isShaderProgramHighlighted(WebGLRenderingContextBase&amp;, WebGLProgram&amp;);
 281 #endif
 282 
 283     static void networkStateChanged(Page&amp;);
 284     static void updateApplicationCacheStatus(Frame*);
 285 
 286     static void layerTreeDidChange(Page*);
 287     static void renderLayerDestroyed(Page*, const RenderLayer&amp;);
 288 
 289     static void frontendCreated();
 290     static void frontendDeleted();
 291     static bool hasFrontends() { return s_frontendCounter; }
 292 
 293     static void firstFrontendCreated();
 294     static void lastFrontendDeleted();
 295 
 296     static bool consoleAgentEnabled(ScriptExecutionContext*);
 297     static bool timelineAgentTracking(ScriptExecutionContext*);
 298 
 299     static InstrumentingAgents* instrumentingAgentsForPage(Page*);
 300 
 301     static void registerInstrumentingAgents(InstrumentingAgents&amp;);
 302     static void unregisterInstrumentingAgents(InstrumentingAgents&amp;);
 303 
 304 private:
 305     static void didClearWindowObjectInWorldImpl(InstrumentingAgents&amp;, Frame&amp;, DOMWrapperWorld&amp;);
 306     static bool isDebuggerPausedImpl(InstrumentingAgents&amp;);
 307 
 308     static int identifierForNodeImpl(InstrumentingAgents&amp;, Node&amp;);
 309     static void addEventListenersToNodeImpl(InstrumentingAgents&amp;, Node&amp;);
 310     static void willInsertDOMNodeImpl(InstrumentingAgents&amp;, Node&amp; parent);
 311     static void didInsertDOMNodeImpl(InstrumentingAgents&amp;, Node&amp;);
 312     static void willRemoveDOMNodeImpl(InstrumentingAgents&amp;, Node&amp;);
 313     static void didRemoveDOMNodeImpl(InstrumentingAgents&amp;, Node&amp;);
 314     static void willModifyDOMAttrImpl(InstrumentingAgents&amp;, Element&amp;, const AtomString&amp; oldValue, const AtomString&amp; newValue);
 315     static void didModifyDOMAttrImpl(InstrumentingAgents&amp;, Element&amp;, const AtomString&amp; name, const AtomString&amp; value);
 316     static void didRemoveDOMAttrImpl(InstrumentingAgents&amp;, Element&amp;, const AtomString&amp; name);
 317     static void characterDataModifiedImpl(InstrumentingAgents&amp;, CharacterData&amp;);
 318     static void willInvalidateStyleAttrImpl(InstrumentingAgents&amp;, Element&amp;);
 319     static void didInvalidateStyleAttrImpl(InstrumentingAgents&amp;, Element&amp;);
 320     static void documentDetachedImpl(InstrumentingAgents&amp;, Document&amp;);
 321     static void frameWindowDiscardedImpl(InstrumentingAgents&amp;, DOMWindow*);
 322     static void mediaQueryResultChangedImpl(InstrumentingAgents&amp;);
 323     static void activeStyleSheetsUpdatedImpl(InstrumentingAgents&amp;, Document&amp;);
 324     static void didPushShadowRootImpl(InstrumentingAgents&amp;, Element&amp; host, ShadowRoot&amp;);
 325     static void willPopShadowRootImpl(InstrumentingAgents&amp;, Element&amp; host, ShadowRoot&amp;);
 326     static void didChangeCustomElementStateImpl(InstrumentingAgents&amp;, Element&amp;);
 327     static void pseudoElementCreatedImpl(InstrumentingAgents&amp;, PseudoElement&amp;);
 328     static void pseudoElementDestroyedImpl(InstrumentingAgents&amp;, PseudoElement&amp;);
 329     static void didCreateNamedFlowImpl(InstrumentingAgents&amp;, Document*, WebKitNamedFlow&amp;);
 330     static void willRemoveNamedFlowImpl(InstrumentingAgents&amp;, Document*, WebKitNamedFlow&amp;);
 331     static void didChangeRegionOversetImpl(InstrumentingAgents&amp;, Document&amp;, WebKitNamedFlow&amp;);
 332     static void didRegisterNamedFlowContentElementImpl(InstrumentingAgents&amp;, Document&amp;, WebKitNamedFlow&amp;, Node&amp; contentElement, Node* nextContentElement = nullptr);
 333     static void didUnregisterNamedFlowContentElementImpl(InstrumentingAgents&amp;, Document&amp;, WebKitNamedFlow&amp;, Node&amp; contentElement);
 334 
 335     static void mouseDidMoveOverElementImpl(InstrumentingAgents&amp;, const HitTestResult&amp;, unsigned modifierFlags);
 336     static bool handleMousePressImpl(InstrumentingAgents&amp;);
 337     static bool handleTouchEventImpl(InstrumentingAgents&amp;, Node&amp;);
 338     static bool forcePseudoStateImpl(InstrumentingAgents&amp;, const Element&amp;, CSSSelector::PseudoClassType);
 339 
 340     static void willSendXMLHttpRequestImpl(InstrumentingAgents&amp;, const String&amp; url);
 341     static void willFetchImpl(InstrumentingAgents&amp;, const String&amp; url);
 342     static void didInstallTimerImpl(InstrumentingAgents&amp;, int timerId, Seconds timeout, bool singleShot, ScriptExecutionContext&amp;);
 343     static void didRemoveTimerImpl(InstrumentingAgents&amp;, int timerId, ScriptExecutionContext&amp;);
 344 
 345     static void didPostMessageImpl(InstrumentingAgents&amp;, const TimerBase&amp;, JSC::ExecState&amp;);
 346     static void didFailPostMessageImpl(InstrumentingAgents&amp;, const TimerBase&amp;);
 347     static void willDispatchPostMessageImpl(InstrumentingAgents&amp;, const TimerBase&amp;);
 348     static void didDispatchPostMessageImpl(InstrumentingAgents&amp;, const TimerBase&amp;);
 349 
 350     static InspectorInstrumentationCookie willCallFunctionImpl(InstrumentingAgents&amp;, const String&amp; scriptName, int scriptLine, int scriptColumn, ScriptExecutionContext*);
 351     static void didCallFunctionImpl(const InspectorInstrumentationCookie&amp;, ScriptExecutionContext*);
 352     static void didAddEventListenerImpl(InstrumentingAgents&amp;, EventTarget&amp;, const AtomString&amp; eventType, EventListener&amp;, bool capture);
 353     static void willRemoveEventListenerImpl(InstrumentingAgents&amp;, EventTarget&amp;, const AtomString&amp; eventType, EventListener&amp;, bool capture);
 354     static bool isEventListenerDisabledImpl(InstrumentingAgents&amp;, EventTarget&amp;, const AtomString&amp; eventType, EventListener&amp;, bool capture);
 355     static InspectorInstrumentationCookie willDispatchEventImpl(InstrumentingAgents&amp;, Document&amp;, const Event&amp;, bool hasEventListeners);
 356     static void willHandleEventImpl(InstrumentingAgents&amp;, Event&amp;, const RegisteredEventListener&amp;);
 357     static void didHandleEventImpl(InstrumentingAgents&amp;);
 358     static void didDispatchEventImpl(const InspectorInstrumentationCookie&amp;, bool defaultPrevented);
 359     static InspectorInstrumentationCookie willDispatchEventOnWindowImpl(InstrumentingAgents&amp;, const Event&amp;, DOMWindow&amp;);
 360     static void didDispatchEventOnWindowImpl(const InspectorInstrumentationCookie&amp;, bool defaultPrevented);
 361     static void eventDidResetAfterDispatchImpl(InstrumentingAgents&amp;, const Event&amp;);
 362     static InspectorInstrumentationCookie willEvaluateScriptImpl(InstrumentingAgents&amp;, Frame&amp;, const String&amp; url, int lineNumber, int columnNumber);
 363     static void didEvaluateScriptImpl(const InspectorInstrumentationCookie&amp;, Frame&amp;);
 364     static InspectorInstrumentationCookie willFireTimerImpl(InstrumentingAgents&amp;, int timerId, bool oneShot, ScriptExecutionContext&amp;);
 365     static void didFireTimerImpl(const InspectorInstrumentationCookie&amp;);
 366     static void didInvalidateLayoutImpl(InstrumentingAgents&amp;, Frame&amp;);
 367     static InspectorInstrumentationCookie willLayoutImpl(InstrumentingAgents&amp;, Frame&amp;);
 368     static void didLayoutImpl(const InspectorInstrumentationCookie&amp;, RenderObject&amp;);
 369     static void didScrollImpl(InstrumentingAgents&amp;);
 370     static void willCompositeImpl(InstrumentingAgents&amp;, Frame&amp;);
 371     static void didCompositeImpl(InstrumentingAgents&amp;);
 372     static void willPaintImpl(InstrumentingAgents&amp;, RenderObject&amp;);
 373     static void didPaintImpl(InstrumentingAgents&amp;, RenderObject&amp;, const LayoutRect&amp;);
 374     static InspectorInstrumentationCookie willRecalculateStyleImpl(InstrumentingAgents&amp;, Document&amp;);
 375     static void didRecalculateStyleImpl(const InspectorInstrumentationCookie&amp;);
 376     static void didScheduleStyleRecalculationImpl(InstrumentingAgents&amp;, Document&amp;);
 377     static void applyUserAgentOverrideImpl(InstrumentingAgents&amp;, String&amp;);
 378     static void applyEmulatedMediaImpl(InstrumentingAgents&amp;, String&amp;);
 379 
 380     static void willSendRequestImpl(InstrumentingAgents&amp;, unsigned long identifier, DocumentLoader*, ResourceRequest&amp;, const ResourceResponse&amp; redirectResponse);
 381     static void willSendRequestOfTypeImpl(InstrumentingAgents&amp;, unsigned long identifier, DocumentLoader*, ResourceRequest&amp;, LoadType);
 382     static void markResourceAsCachedImpl(InstrumentingAgents&amp;, unsigned long identifier);
 383     static void didLoadResourceFromMemoryCacheImpl(InstrumentingAgents&amp;, DocumentLoader*, CachedResource*);
 384     static void didReceiveResourceResponseImpl(InstrumentingAgents&amp;, unsigned long identifier, DocumentLoader*, const ResourceResponse&amp;, ResourceLoader*);
 385     static void didReceiveThreadableLoaderResponseImpl(InstrumentingAgents&amp;, DocumentThreadableLoader&amp;, unsigned long identifier);
 386     static void didReceiveDataImpl(InstrumentingAgents&amp;, unsigned long identifier, const char* data, int dataLength, int encodedDataLength);
 387     static void didFinishLoadingImpl(InstrumentingAgents&amp;, unsigned long identifier, DocumentLoader*, const NetworkLoadMetrics&amp;, ResourceLoader*);
 388     static void didFailLoadingImpl(InstrumentingAgents&amp;, unsigned long identifier, DocumentLoader*, const ResourceError&amp;);
 389     static void willLoadXHRSynchronouslyImpl(InstrumentingAgents&amp;);
 390     static void didLoadXHRSynchronouslyImpl(InstrumentingAgents&amp;);
 391     static void scriptImportedImpl(InstrumentingAgents&amp;, unsigned long identifier, const String&amp; sourceString);
 392     static void scriptExecutionBlockedByCSPImpl(InstrumentingAgents&amp;, const String&amp; directiveText);
 393     static void didReceiveScriptResponseImpl(InstrumentingAgents&amp;, unsigned long identifier);
 394     static void domContentLoadedEventFiredImpl(InstrumentingAgents&amp;, Frame&amp;);
 395     static void loadEventFiredImpl(InstrumentingAgents&amp;, Frame*);
 396     static void frameDetachedFromParentImpl(InstrumentingAgents&amp;, Frame&amp;);
 397     static void didCommitLoadImpl(InstrumentingAgents&amp;, Frame&amp;, DocumentLoader*);
 398     static void frameDocumentUpdatedImpl(InstrumentingAgents&amp;, Frame&amp;);
 399     static void loaderDetachedFromFrameImpl(InstrumentingAgents&amp;, DocumentLoader&amp;);
 400     static void frameStartedLoadingImpl(InstrumentingAgents&amp;, Frame&amp;);
 401     static void frameStoppedLoadingImpl(InstrumentingAgents&amp;, Frame&amp;);
 402     static void frameScheduledNavigationImpl(InstrumentingAgents&amp;, Frame&amp;, Seconds delay);
 403     static void frameClearedScheduledNavigationImpl(InstrumentingAgents&amp;, Frame&amp;);
 404     static void defaultAppearanceDidChangeImpl(InstrumentingAgents&amp;, bool useDarkAppearance);
 405     static void willDestroyCachedResourceImpl(CachedResource&amp;);
 406 
 407     static void addMessageToConsoleImpl(InstrumentingAgents&amp;, std::unique_ptr&lt;Inspector::ConsoleMessage&gt;);
 408 
 409     static void consoleCountImpl(InstrumentingAgents&amp;, JSC::ExecState*, const String&amp; label);
 410     static void consoleCountResetImpl(InstrumentingAgents&amp;, JSC::ExecState*, const String&amp; label);
 411     static void takeHeapSnapshotImpl(InstrumentingAgents&amp;, const String&amp; title);
 412     static void startConsoleTimingImpl(InstrumentingAgents&amp;, Frame&amp;, JSC::ExecState*, const String&amp; label);
 413     static void startConsoleTimingImpl(InstrumentingAgents&amp;, JSC::ExecState*, const String&amp; label);
 414     static void logConsoleTimingImpl(InstrumentingAgents&amp;, JSC::ExecState*, const String&amp; label, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp;);
 415     static void stopConsoleTimingImpl(InstrumentingAgents&amp;, Frame&amp;, JSC::ExecState*, const String&amp; label);
 416     static void stopConsoleTimingImpl(InstrumentingAgents&amp;, JSC::ExecState*, const String&amp; label);
 417     static void consoleTimeStampImpl(InstrumentingAgents&amp;, Frame&amp;, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp;);
 418     static void startProfilingImpl(InstrumentingAgents&amp;, JSC::ExecState*, const String&amp; title);
 419     static void stopProfilingImpl(InstrumentingAgents&amp;, JSC::ExecState*, const String&amp; title);
 420     static void consoleStartRecordingCanvasImpl(InstrumentingAgents&amp;, CanvasRenderingContext&amp;, JSC::ExecState&amp;, JSC::JSObject* options);
 421 
 422     static void didRequestAnimationFrameImpl(InstrumentingAgents&amp;, int callbackId, Document&amp;);
 423     static void didCancelAnimationFrameImpl(InstrumentingAgents&amp;, int callbackId, Document&amp;);
 424     static InspectorInstrumentationCookie willFireAnimationFrameImpl(InstrumentingAgents&amp;, int callbackId, Document&amp;);
 425     static void didFireAnimationFrameImpl(const InspectorInstrumentationCookie&amp;);
 426 
 427     static InspectorInstrumentationCookie willFireObserverCallbackImpl(InstrumentingAgents&amp;, const String&amp;, ScriptExecutionContext&amp;);
 428     static void didFireObserverCallbackImpl(const InspectorInstrumentationCookie&amp;);
 429 
 430     static void didOpenDatabaseImpl(InstrumentingAgents&amp;, Database&amp;);
 431 
 432     static void didDispatchDOMStorageEventImpl(InstrumentingAgents&amp;, const String&amp; key, const String&amp; oldValue, const String&amp; newValue, StorageType, SecurityOrigin*);
 433 
 434     static bool shouldWaitForDebuggerOnStartImpl(InstrumentingAgents&amp;);
 435     static void workerStartedImpl(InstrumentingAgents&amp;, WorkerInspectorProxy*, const URL&amp;);
 436     static void workerTerminatedImpl(InstrumentingAgents&amp;, WorkerInspectorProxy*);
 437 
 438     static void didCreateWebSocketImpl(InstrumentingAgents&amp;, unsigned long identifier, const URL&amp; requestURL);
 439     static void willSendWebSocketHandshakeRequestImpl(InstrumentingAgents&amp;, unsigned long identifier, const ResourceRequest&amp;);
 440     static void didReceiveWebSocketHandshakeResponseImpl(InstrumentingAgents&amp;, unsigned long identifier, const ResourceResponse&amp;);
 441     static void didCloseWebSocketImpl(InstrumentingAgents&amp;, unsigned long identifier);
 442     static void didReceiveWebSocketFrameImpl(InstrumentingAgents&amp;, unsigned long identifier, const WebSocketFrame&amp;);
 443     static void didSendWebSocketFrameImpl(InstrumentingAgents&amp;, unsigned long identifier, const WebSocketFrame&amp;);
 444     static void didReceiveWebSocketFrameErrorImpl(InstrumentingAgents&amp;, unsigned long identifier, const String&amp;);
 445 
 446 #if ENABLE(RESOURCE_USAGE)
 447     static void didHandleMemoryPressureImpl(InstrumentingAgents&amp;, Critical);
 448 #endif
 449 
 450     static void networkStateChangedImpl(InstrumentingAgents&amp;);
 451     static void updateApplicationCacheStatusImpl(InstrumentingAgents&amp;, Frame&amp;);
 452 
 453     static void didChangeCSSCanvasClientNodesImpl(InstrumentingAgents&amp;, CanvasBase&amp;);
 454     static void didCreateCanvasRenderingContextImpl(InstrumentingAgents&amp;, CanvasRenderingContext&amp;);
 455     static void didChangeCanvasMemoryImpl(InstrumentingAgents&amp;, CanvasRenderingContext&amp;);
 456     static void recordCanvasActionImpl(InstrumentingAgents&amp;, CanvasRenderingContext&amp;, const String&amp;, std::initializer_list&lt;RecordCanvasActionVariant&gt;&amp;&amp; = { });
 457     static void didFinishRecordingCanvasFrameImpl(InstrumentingAgents&amp;, CanvasRenderingContext&amp;, bool forceDispatch = false);
 458 #if ENABLE(WEBGL)
 459     static void didEnableExtensionImpl(InstrumentingAgents&amp;, WebGLRenderingContextBase&amp;, const String&amp;);
 460     static void didCreateProgramImpl(InstrumentingAgents&amp;, WebGLRenderingContextBase&amp;, WebGLProgram&amp;);
 461     static void willDeleteProgramImpl(InstrumentingAgents&amp;, WebGLProgram&amp;);
 462     static bool isShaderProgramDisabledImpl(InstrumentingAgents&amp;, WebGLProgram&amp;);
 463     static bool isShaderProgramHighlightedImpl(InstrumentingAgents&amp;, WebGLProgram&amp;);
 464 #endif
 465 
 466     static void layerTreeDidChangeImpl(InstrumentingAgents&amp;);
 467     static void renderLayerDestroyedImpl(InstrumentingAgents&amp;, const RenderLayer&amp;);
 468 
 469     static InstrumentingAgents&amp; instrumentingAgentsForPage(Page&amp;);
 470     static InstrumentingAgents&amp; instrumentingAgentsForWorkerGlobalScope(WorkerGlobalScope&amp;);
 471 
 472     static InstrumentingAgents* instrumentingAgentsForFrame(Frame&amp;);
 473     static InstrumentingAgents* instrumentingAgentsForFrame(Frame*);
 474     static InstrumentingAgents* instrumentingAgentsForContext(ScriptExecutionContext*);
 475     static InstrumentingAgents* instrumentingAgentsForContext(ScriptExecutionContext&amp;);
 476     static InstrumentingAgents* instrumentingAgentsForDocument(Document&amp;);
 477     static InstrumentingAgents* instrumentingAgentsForDocument(Document*);
 478     static InstrumentingAgents* instrumentingAgentsForRenderer(RenderObject&amp;);
 479     static InstrumentingAgents* instrumentingAgentsForWorkerGlobalScope(WorkerGlobalScope*);
 480 
 481     static InspectorTimelineAgent* retrieveTimelineAgent(const InspectorInstrumentationCookie&amp;);
 482 
 483     WEBCORE_EXPORT static int s_frontendCounter;
 484 };
 485 
 486 inline void InspectorInstrumentation::didClearWindowObjectInWorld(Frame&amp; frame, DOMWrapperWorld&amp; world)
 487 {
 488     FAST_RETURN_IF_NO_FRONTENDS(void());
 489     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 490         didClearWindowObjectInWorldImpl(*instrumentingAgents, frame, world);
 491 }
 492 
 493 inline bool InspectorInstrumentation::isDebuggerPaused(Frame* frame)
 494 {
 495     FAST_RETURN_IF_NO_FRONTENDS(false);
 496     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 497         return isDebuggerPausedImpl(*instrumentingAgents);
 498     return false;
 499 }
 500 
 501 inline int InspectorInstrumentation::identifierForNode(Node&amp; node)
 502 {
 503     FAST_RETURN_IF_NO_FRONTENDS(0);
 504     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(node.document()))
 505         return identifierForNodeImpl(*instrumentingAgents, node);
 506     return 0;
 507 }
 508 
 509 inline void InspectorInstrumentation::addEventListenersToNode(Node&amp; node)
 510 {
 511     FAST_RETURN_IF_NO_FRONTENDS(void());
 512     if (auto* instrumentingAgents = instrumentingAgentsForDocument(node.document()))
 513         addEventListenersToNodeImpl(*instrumentingAgents, node);
 514 }
 515 
 516 inline void InspectorInstrumentation::willInsertDOMNode(Document&amp; document, Node&amp; parent)
 517 {
 518     FAST_RETURN_IF_NO_FRONTENDS(void());
 519     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 520         willInsertDOMNodeImpl(*instrumentingAgents, parent);
 521 }
 522 
 523 inline void InspectorInstrumentation::didInsertDOMNode(Document&amp; document, Node&amp; node)
 524 {
 525     FAST_RETURN_IF_NO_FRONTENDS(void());
 526     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 527         didInsertDOMNodeImpl(*instrumentingAgents, node);
 528 }
 529 
 530 inline void InspectorInstrumentation::willRemoveDOMNode(Document&amp; document, Node&amp; node)
 531 {
 532     FAST_RETURN_IF_NO_FRONTENDS(void());
 533     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 534         willRemoveDOMNodeImpl(*instrumentingAgents, node);
 535 }
 536 
 537 inline void InspectorInstrumentation::didRemoveDOMNode(Document&amp; document, Node&amp; node)
 538 {
 539     FAST_RETURN_IF_NO_FRONTENDS(void());
 540     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 541         didRemoveDOMNodeImpl(*instrumentingAgents, node);
 542 }
 543 
 544 inline void InspectorInstrumentation::willModifyDOMAttr(Document&amp; document, Element&amp; element, const AtomString&amp; oldValue, const AtomString&amp; newValue)
 545 {
 546     FAST_RETURN_IF_NO_FRONTENDS(void());
 547     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 548         willModifyDOMAttrImpl(*instrumentingAgents, element, oldValue, newValue);
 549 }
 550 
 551 inline void InspectorInstrumentation::didModifyDOMAttr(Document&amp; document, Element&amp; element, const AtomString&amp; name, const AtomString&amp; value)
 552 {
 553     FAST_RETURN_IF_NO_FRONTENDS(void());
 554     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 555         didModifyDOMAttrImpl(*instrumentingAgents, element, name, value);
 556 }
 557 
 558 inline void InspectorInstrumentation::didRemoveDOMAttr(Document&amp; document, Element&amp; element, const AtomString&amp; name)
 559 {
 560     FAST_RETURN_IF_NO_FRONTENDS(void());
 561     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 562         didRemoveDOMAttrImpl(*instrumentingAgents, element, name);
 563 }
 564 
 565 inline void InspectorInstrumentation::willInvalidateStyleAttr(Element&amp; element)
 566 {
 567     FAST_RETURN_IF_NO_FRONTENDS(void());
 568     if (auto* instrumentingAgents = instrumentingAgentsForDocument(element.document()))
 569         willInvalidateStyleAttrImpl(*instrumentingAgents, element);
 570 }
 571 
 572 inline void InspectorInstrumentation::didInvalidateStyleAttr(Element&amp; element)
 573 {
 574     FAST_RETURN_IF_NO_FRONTENDS(void());
 575     if (auto* instrumentingAgents = instrumentingAgentsForDocument(element.document()))
 576         didInvalidateStyleAttrImpl(*instrumentingAgents, element);
 577 }
 578 
 579 inline void InspectorInstrumentation::documentDetached(Document&amp; document)
 580 {
 581     FAST_RETURN_IF_NO_FRONTENDS(void());
 582     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 583         documentDetachedImpl(*instrumentingAgents, document);
 584 }
 585 
 586 inline void InspectorInstrumentation::frameWindowDiscarded(Frame&amp; frame, DOMWindow* domWindow)
 587 {
 588     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 589         frameWindowDiscardedImpl(*instrumentingAgents, domWindow);
 590 }
 591 
 592 inline void InspectorInstrumentation::mediaQueryResultChanged(Document&amp; document)
 593 {
 594     FAST_RETURN_IF_NO_FRONTENDS(void());
 595     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 596         mediaQueryResultChangedImpl(*instrumentingAgents);
 597 }
 598 
 599 inline void InspectorInstrumentation::activeStyleSheetsUpdated(Document&amp; document)
 600 {
 601     FAST_RETURN_IF_NO_FRONTENDS(void());
 602     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 603         activeStyleSheetsUpdatedImpl(*instrumentingAgents, document);
 604 }
 605 
 606 inline void InspectorInstrumentation::didPushShadowRoot(Element&amp; host, ShadowRoot&amp; root)
 607 {
 608     FAST_RETURN_IF_NO_FRONTENDS(void());
 609     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(host.document()))
 610         didPushShadowRootImpl(*instrumentingAgents, host, root);
 611 }
 612 
 613 inline void InspectorInstrumentation::willPopShadowRoot(Element&amp; host, ShadowRoot&amp; root)
 614 {
 615     FAST_RETURN_IF_NO_FRONTENDS(void());
 616     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(host.document()))
 617         willPopShadowRootImpl(*instrumentingAgents, host, root);
 618 }
 619 
 620 inline void InspectorInstrumentation::didChangeCustomElementState(Element&amp; element)
 621 {
 622     FAST_RETURN_IF_NO_FRONTENDS(void());
 623     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(element.document()))
 624         didChangeCustomElementStateImpl(*instrumentingAgents, element);
 625 }
 626 
 627 inline void InspectorInstrumentation::pseudoElementCreated(Page* page, PseudoElement&amp; pseudoElement)
 628 {
 629     FAST_RETURN_IF_NO_FRONTENDS(void());
 630     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForPage(page))
 631         pseudoElementCreatedImpl(*instrumentingAgents, pseudoElement);
 632 }
 633 
 634 inline void InspectorInstrumentation::pseudoElementDestroyed(Page* page, PseudoElement&amp; pseudoElement)
 635 {
 636     FAST_RETURN_IF_NO_FRONTENDS(void());
 637     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForPage(page))
 638         pseudoElementDestroyedImpl(*instrumentingAgents, pseudoElement);
 639 }
 640 
 641 inline void InspectorInstrumentation::didCreateNamedFlow(Document* document, WebKitNamedFlow&amp; namedFlow)
 642 {
 643     FAST_RETURN_IF_NO_FRONTENDS(void());
 644     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 645         didCreateNamedFlowImpl(*instrumentingAgents, document, namedFlow);
 646 }
 647 
 648 inline void InspectorInstrumentation::willRemoveNamedFlow(Document* document, WebKitNamedFlow&amp; namedFlow)
 649 {
 650     FAST_RETURN_IF_NO_FRONTENDS(void());
 651     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 652         willRemoveNamedFlowImpl(*instrumentingAgents, document, namedFlow);
 653 }
 654 
 655 inline void InspectorInstrumentation::didChangeRegionOverset(Document&amp; document, WebKitNamedFlow&amp; namedFlow)
 656 {
 657     FAST_RETURN_IF_NO_FRONTENDS(void());
 658     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 659         didChangeRegionOversetImpl(*instrumentingAgents, document, namedFlow);
 660 }
 661 
 662 inline void InspectorInstrumentation::didRegisterNamedFlowContentElement(Document&amp; document, WebKitNamedFlow&amp; namedFlow, Node&amp; contentElement, Node* nextContentElement)
 663 {
 664     FAST_RETURN_IF_NO_FRONTENDS(void());
 665     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 666         didRegisterNamedFlowContentElementImpl(*instrumentingAgents, document, namedFlow, contentElement, nextContentElement);
 667 }
 668 
 669 inline void InspectorInstrumentation::didUnregisterNamedFlowContentElement(Document&amp; document, WebKitNamedFlow&amp; namedFlow, Node&amp; contentElement)
 670 {
 671     FAST_RETURN_IF_NO_FRONTENDS(void());
 672     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 673         didUnregisterNamedFlowContentElementImpl(*instrumentingAgents, document, namedFlow, contentElement);
 674 }
 675 
 676 inline void InspectorInstrumentation::mouseDidMoveOverElement(Page&amp; page, const HitTestResult&amp; result, unsigned modifierFlags)
 677 {
 678     FAST_RETURN_IF_NO_FRONTENDS(void());
 679     mouseDidMoveOverElementImpl(instrumentingAgentsForPage(page), result, modifierFlags);
 680 }
 681 
 682 inline bool InspectorInstrumentation::handleTouchEvent(Frame&amp; frame, Node&amp; node)
 683 {
 684     FAST_RETURN_IF_NO_FRONTENDS(false);
 685     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 686         return handleTouchEventImpl(*instrumentingAgents, node);
 687     return false;
 688 }
 689 
 690 inline bool InspectorInstrumentation::handleMousePress(Frame&amp; frame)
 691 {
 692     FAST_RETURN_IF_NO_FRONTENDS(false);
 693     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 694         return handleMousePressImpl(*instrumentingAgents);
 695     return false;
 696 }
 697 
 698 inline bool InspectorInstrumentation::forcePseudoState(const Element&amp; element, CSSSelector::PseudoClassType pseudoState)
 699 {
 700     FAST_RETURN_IF_NO_FRONTENDS(false);
 701     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(element.document()))
 702         return forcePseudoStateImpl(*instrumentingAgents, element, pseudoState);
 703     return false;
 704 }
 705 
 706 inline void InspectorInstrumentation::characterDataModified(Document&amp; document, CharacterData&amp; characterData)
 707 {
 708     FAST_RETURN_IF_NO_FRONTENDS(void());
 709     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 710         characterDataModifiedImpl(*instrumentingAgents, characterData);
 711 }
 712 
 713 inline void InspectorInstrumentation::willSendXMLHttpRequest(ScriptExecutionContext* context, const String&amp; url)
 714 {
 715     FAST_RETURN_IF_NO_FRONTENDS(void());
 716     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
 717         willSendXMLHttpRequestImpl(*instrumentingAgents, url);
 718 }
 719 
 720 inline void InspectorInstrumentation::willFetch(ScriptExecutionContext&amp; context, const String&amp; url)
 721 {
 722     FAST_RETURN_IF_NO_FRONTENDS(void());
 723     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
 724         willFetchImpl(*instrumentingAgents, url);
 725 }
 726 
 727 inline void InspectorInstrumentation::didInstallTimer(ScriptExecutionContext&amp; context, int timerId, Seconds timeout, bool singleShot)
 728 {
 729     FAST_RETURN_IF_NO_FRONTENDS(void());
 730     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
 731         didInstallTimerImpl(*instrumentingAgents, timerId, timeout, singleShot, context);
 732 }
 733 
 734 inline void InspectorInstrumentation::didRemoveTimer(ScriptExecutionContext&amp; context, int timerId)
 735 {
 736     FAST_RETURN_IF_NO_FRONTENDS(void());
 737     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
 738         didRemoveTimerImpl(*instrumentingAgents, timerId, context);
 739 }
 740 
 741 inline void InspectorInstrumentation::didAddEventListener(EventTarget&amp; target, const AtomString&amp; eventType, EventListener&amp; listener, bool capture)
 742 {
 743     FAST_RETURN_IF_NO_FRONTENDS(void());
 744     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(target.scriptExecutionContext()))
 745         didAddEventListenerImpl(*instrumentingAgents, target, eventType, listener, capture);
 746 }
 747 
 748 inline void InspectorInstrumentation::willRemoveEventListener(EventTarget&amp; target, const AtomString&amp; eventType, EventListener&amp; listener, bool capture)
 749 {
 750     FAST_RETURN_IF_NO_FRONTENDS(void());
 751     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(target.scriptExecutionContext()))
 752         willRemoveEventListenerImpl(*instrumentingAgents, target, eventType, listener, capture);
 753 }
 754 
 755 inline bool InspectorInstrumentation::isEventListenerDisabled(EventTarget&amp; target, const AtomString&amp; eventType, EventListener&amp; listener, bool capture)
 756 {
 757     FAST_RETURN_IF_NO_FRONTENDS(false);
 758     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(target.scriptExecutionContext()))
 759         return isEventListenerDisabledImpl(*instrumentingAgents, target, eventType, listener, capture);
 760     return false;
 761 }
 762 
 763 inline void InspectorInstrumentation::didPostMessage(Frame&amp; frame, TimerBase&amp; timer, JSC::ExecState&amp; state)
 764 {
 765     FAST_RETURN_IF_NO_FRONTENDS(void());
 766     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 767         didPostMessageImpl(*instrumentingAgents, timer, state);
 768 }
 769 
 770 inline void InspectorInstrumentation::didFailPostMessage(Frame&amp; frame, TimerBase&amp; timer)
 771 {
 772     FAST_RETURN_IF_NO_FRONTENDS(void());
 773     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 774         didFailPostMessageImpl(*instrumentingAgents, timer);
 775 }
 776 
 777 inline void InspectorInstrumentation::willDispatchPostMessage(Frame&amp; frame, TimerBase&amp; timer)
 778 {
 779     FAST_RETURN_IF_NO_FRONTENDS(void());
 780     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 781         willDispatchPostMessageImpl(*instrumentingAgents, timer);
 782 }
 783 
 784 inline void InspectorInstrumentation::didDispatchPostMessage(Frame&amp; frame, TimerBase&amp; timer)
 785 {
 786     FAST_RETURN_IF_NO_FRONTENDS(void());
 787     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 788         didDispatchPostMessageImpl(*instrumentingAgents, timer);
 789 }
 790 
 791 inline InspectorInstrumentationCookie InspectorInstrumentation::willCallFunction(ScriptExecutionContext* context, const String&amp; scriptName, int scriptLine, int scriptColumn)
 792 {
 793     FAST_RETURN_IF_NO_FRONTENDS(InspectorInstrumentationCookie());
 794     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
 795         return willCallFunctionImpl(*instrumentingAgents, scriptName, scriptLine, scriptColumn, context);
 796     return InspectorInstrumentationCookie();
 797 }
 798 
 799 inline void InspectorInstrumentation::didCallFunction(const InspectorInstrumentationCookie&amp; cookie, ScriptExecutionContext* context)
 800 {
 801     FAST_RETURN_IF_NO_FRONTENDS(void());
 802     if (cookie.isValid())
 803         didCallFunctionImpl(cookie, context);
 804 }
 805 
 806 inline InspectorInstrumentationCookie InspectorInstrumentation::willDispatchEvent(Document&amp; document, const Event&amp; event, bool hasEventListeners)
 807 {
 808     FAST_RETURN_IF_NO_FRONTENDS(InspectorInstrumentationCookie());
 809     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 810         return willDispatchEventImpl(*instrumentingAgents, document, event, hasEventListeners);
 811     return InspectorInstrumentationCookie();
 812 }
 813 
 814 inline void InspectorInstrumentation::didDispatchEvent(const InspectorInstrumentationCookie&amp; cookie, bool defaultPrevented)
 815 {
 816     FAST_RETURN_IF_NO_FRONTENDS(void());
 817     if (cookie.isValid())
 818         didDispatchEventImpl(cookie, defaultPrevented);
 819 }
 820 
 821 inline void InspectorInstrumentation::willHandleEvent(ScriptExecutionContext&amp; context, Event&amp; event, const RegisteredEventListener&amp; listener)
 822 {
 823     FAST_RETURN_IF_NO_FRONTENDS(void());
 824     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
 825         return willHandleEventImpl(*instrumentingAgents, event, listener);
 826 }
 827 
 828 inline void InspectorInstrumentation::didHandleEvent(ScriptExecutionContext&amp; context)
 829 {
 830     FAST_RETURN_IF_NO_FRONTENDS(void());
 831     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
 832         return didHandleEventImpl(*instrumentingAgents);
 833 }
 834 
 835 inline InspectorInstrumentationCookie InspectorInstrumentation::willDispatchEventOnWindow(Frame* frame, const Event&amp; event, DOMWindow&amp; window)
 836 {
 837     FAST_RETURN_IF_NO_FRONTENDS(InspectorInstrumentationCookie());
 838     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 839         return willDispatchEventOnWindowImpl(*instrumentingAgents, event, window);
 840     return InspectorInstrumentationCookie();
 841 }
 842 
 843 inline void InspectorInstrumentation::didDispatchEventOnWindow(const InspectorInstrumentationCookie&amp; cookie, bool defaultPrevented)
 844 {
 845     FAST_RETURN_IF_NO_FRONTENDS(void());
 846     if (cookie.isValid())
 847         didDispatchEventOnWindowImpl(cookie, defaultPrevented);
 848 }
 849 
 850 inline void InspectorInstrumentation::eventDidResetAfterDispatch(const Event&amp; event)
 851 {
 852     FAST_RETURN_IF_NO_FRONTENDS(void());
 853 
 854     if (!is&lt;Node&gt;(event.target()))
 855         return;
 856 
 857     auto* node = downcast&lt;Node&gt;(event.target());
 858     if (auto* instrumentingAgents = instrumentingAgentsForContext(node-&gt;scriptExecutionContext()))
 859         return eventDidResetAfterDispatchImpl(*instrumentingAgents, event);
 860 }
 861 
 862 inline InspectorInstrumentationCookie InspectorInstrumentation::willEvaluateScript(Frame&amp; frame, const String&amp; url, int lineNumber, int columnNumber)
 863 {
 864     FAST_RETURN_IF_NO_FRONTENDS(InspectorInstrumentationCookie());
 865     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 866         return willEvaluateScriptImpl(*instrumentingAgents, frame, url, lineNumber, columnNumber);
 867     return InspectorInstrumentationCookie();
 868 }
 869 
 870 inline void InspectorInstrumentation::didEvaluateScript(const InspectorInstrumentationCookie&amp; cookie, Frame&amp; frame)
 871 {
 872     FAST_RETURN_IF_NO_FRONTENDS(void());
 873     if (cookie.isValid())
 874         didEvaluateScriptImpl(cookie, frame);
 875 }
 876 
 877 inline InspectorInstrumentationCookie InspectorInstrumentation::willFireTimer(ScriptExecutionContext&amp; context, int timerId, bool oneShot)
 878 {
 879     FAST_RETURN_IF_NO_FRONTENDS(InspectorInstrumentationCookie());
 880     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
 881         return willFireTimerImpl(*instrumentingAgents, timerId, oneShot, context);
 882     return InspectorInstrumentationCookie();
 883 }
 884 
 885 inline void InspectorInstrumentation::didFireTimer(const InspectorInstrumentationCookie&amp; cookie)
 886 {
 887     FAST_RETURN_IF_NO_FRONTENDS(void());
 888     if (cookie.isValid())
 889         didFireTimerImpl(cookie);
 890 }
 891 
 892 inline void InspectorInstrumentation::didInvalidateLayout(Frame&amp; frame)
 893 {
 894     FAST_RETURN_IF_NO_FRONTENDS(void());
 895     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 896         didInvalidateLayoutImpl(*instrumentingAgents, frame);
 897 }
 898 
 899 inline InspectorInstrumentationCookie InspectorInstrumentation::willLayout(Frame&amp; frame)
 900 {
 901     FAST_RETURN_IF_NO_FRONTENDS(InspectorInstrumentationCookie());
 902     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 903         return willLayoutImpl(*instrumentingAgents, frame);
 904     return InspectorInstrumentationCookie();
 905 }
 906 
 907 inline void InspectorInstrumentation::didLayout(const InspectorInstrumentationCookie&amp; cookie, RenderObject&amp; root)
 908 {
 909     FAST_RETURN_IF_NO_FRONTENDS(void());
 910     if (cookie.isValid())
 911         didLayoutImpl(cookie, root);
 912 }
 913 
 914 inline void InspectorInstrumentation::didScroll(Page&amp; page)
 915 {
 916     FAST_RETURN_IF_NO_FRONTENDS(void());
 917     didScrollImpl(instrumentingAgentsForPage(page));
 918 }
 919 
 920 inline void InspectorInstrumentation::willComposite(Frame&amp; frame)
 921 {
 922     FAST_RETURN_IF_NO_FRONTENDS(void());
 923     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 924         willCompositeImpl(*instrumentingAgents, frame);
 925 }
 926 
 927 inline void InspectorInstrumentation::didComposite(Frame&amp; frame)
 928 {
 929     FAST_RETURN_IF_NO_FRONTENDS(void());
 930     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 931         didCompositeImpl(*instrumentingAgents);
 932 }
 933 
 934 inline void InspectorInstrumentation::willPaint(RenderObject&amp; renderer)
 935 {
 936     FAST_RETURN_IF_NO_FRONTENDS(void());
 937     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForRenderer(renderer))
 938         return willPaintImpl(*instrumentingAgents, renderer);
 939 }
 940 
 941 inline void InspectorInstrumentation::didPaint(RenderObject&amp; renderer, const LayoutRect&amp; rect)
 942 {
 943     FAST_RETURN_IF_NO_FRONTENDS(void());
 944     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForRenderer(renderer))
 945         didPaintImpl(*instrumentingAgents, renderer, rect);
 946 }
 947 
 948 inline InspectorInstrumentationCookie InspectorInstrumentation::willRecalculateStyle(Document&amp; document)
 949 {
 950     FAST_RETURN_IF_NO_FRONTENDS(InspectorInstrumentationCookie());
 951     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 952         return willRecalculateStyleImpl(*instrumentingAgents, document);
 953     return InspectorInstrumentationCookie();
 954 }
 955 
 956 inline void InspectorInstrumentation::didRecalculateStyle(const InspectorInstrumentationCookie&amp; cookie)
 957 {
 958     FAST_RETURN_IF_NO_FRONTENDS(void());
 959     if (cookie.isValid())
 960         didRecalculateStyleImpl(cookie);
 961 }
 962 
 963 inline void InspectorInstrumentation::didScheduleStyleRecalculation(Document&amp; document)
 964 {
 965     FAST_RETURN_IF_NO_FRONTENDS(void());
 966     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 967         didScheduleStyleRecalculationImpl(*instrumentingAgents, document);
 968 }
 969 
 970 inline void InspectorInstrumentation::applyUserAgentOverride(Frame&amp; frame, String&amp; userAgent)
 971 {
 972     FAST_RETURN_IF_NO_FRONTENDS(void());
 973     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 974         applyUserAgentOverrideImpl(*instrumentingAgents, userAgent);
 975 }
 976 
 977 inline void InspectorInstrumentation::applyEmulatedMedia(Frame&amp; frame, String&amp; media)
 978 {
 979     FAST_RETURN_IF_NO_FRONTENDS(void());
 980     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 981         applyEmulatedMediaImpl(*instrumentingAgents, media);
 982 }
 983 
 984 inline void InspectorInstrumentation::willSendRequest(Frame* frame, unsigned long identifier, DocumentLoader* loader, ResourceRequest&amp; request, const ResourceResponse&amp; redirectResponse)
 985 {
 986     FAST_RETURN_IF_NO_FRONTENDS(void());
 987     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 988         willSendRequestImpl(*instrumentingAgents, identifier, loader, request, redirectResponse);
 989 }
 990 
 991 inline void InspectorInstrumentation::willSendRequest(WorkerGlobalScope&amp; workerGlobalScope, unsigned long identifier, ResourceRequest&amp; request)
 992 {
 993     FAST_RETURN_IF_NO_FRONTENDS(void());
 994     willSendRequestImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), identifier, nullptr, request, ResourceResponse { });
 995 }
 996 
 997 inline void InspectorInstrumentation::willSendRequestOfType(Frame* frame, unsigned long identifier, DocumentLoader* loader, ResourceRequest&amp; request, LoadType loadType)
 998 {
 999     FAST_RETURN_IF_NO_FRONTENDS(void());
1000     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1001         willSendRequestOfTypeImpl(*instrumentingAgents, identifier, loader, request, loadType);
1002 }
1003 
1004 inline void InspectorInstrumentation::didLoadResourceFromMemoryCache(Page&amp; page, DocumentLoader* loader, CachedResource* resource)
1005 {
1006     FAST_RETURN_IF_NO_FRONTENDS(void());
1007     didLoadResourceFromMemoryCacheImpl(instrumentingAgentsForPage(page), loader, resource);
1008 }
1009 
1010 inline void InspectorInstrumentation::didReceiveResourceResponse(Frame&amp; frame, unsigned long identifier, DocumentLoader* loader, const ResourceResponse&amp; response, ResourceLoader* resourceLoader)
1011 {
1012     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1013         didReceiveResourceResponseImpl(*instrumentingAgents, identifier, loader, response, resourceLoader);
1014 }
1015 
1016 inline void InspectorInstrumentation::didReceiveResourceResponse(WorkerGlobalScope&amp; workerGlobalScope, unsigned long identifier, const ResourceResponse&amp; response)
1017 {
1018     didReceiveResourceResponseImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), identifier, nullptr, response, nullptr);
1019 }
1020 
1021 inline void InspectorInstrumentation::didReceiveThreadableLoaderResponse(DocumentThreadableLoader&amp; documentThreadableLoader, unsigned long identifier)
1022 {
1023     FAST_RETURN_IF_NO_FRONTENDS(void());
1024     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(documentThreadableLoader.document()))
1025         didReceiveThreadableLoaderResponseImpl(*instrumentingAgents, documentThreadableLoader, identifier);
1026 }
1027 
1028 inline void InspectorInstrumentation::didReceiveData(Frame* frame, unsigned long identifier, const char* data, int dataLength, int encodedDataLength)
1029 {
1030     FAST_RETURN_IF_NO_FRONTENDS(void());
1031     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1032         didReceiveDataImpl(*instrumentingAgents, identifier, data, dataLength, encodedDataLength);
1033 }
1034 
1035 inline void InspectorInstrumentation::didReceiveData(WorkerGlobalScope&amp; workerGlobalScope, unsigned long identifier, const char* data, int dataLength)
1036 {
1037     FAST_RETURN_IF_NO_FRONTENDS(void());
1038     didReceiveDataImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), identifier, data, dataLength, dataLength);
1039 }
1040 
1041 inline void InspectorInstrumentation::didFinishLoading(Frame* frame, DocumentLoader* loader, unsigned long identifier, const NetworkLoadMetrics&amp; networkLoadMetrics, ResourceLoader* resourceLoader)
1042 {
1043     FAST_RETURN_IF_NO_FRONTENDS(void());
1044     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1045         didFinishLoadingImpl(*instrumentingAgents, identifier, loader, networkLoadMetrics, resourceLoader);
1046 }
1047 
1048 inline void InspectorInstrumentation::didFinishLoading(WorkerGlobalScope&amp; workerGlobalScope, unsigned long identifier, const NetworkLoadMetrics&amp; networkLoadMetrics)
1049 {
1050     FAST_RETURN_IF_NO_FRONTENDS(void());
1051     didFinishLoadingImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), identifier, nullptr, networkLoadMetrics, nullptr);
1052 }
1053 
1054 inline void InspectorInstrumentation::didFailLoading(Frame* frame, DocumentLoader* loader, unsigned long identifier, const ResourceError&amp; error)
1055 {
1056     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1057         didFailLoadingImpl(*instrumentingAgents, identifier, loader, error);
1058 }
1059 
1060 inline void InspectorInstrumentation::didFailLoading(WorkerGlobalScope&amp; workerGlobalScope, unsigned long identifier, const ResourceError&amp; error)
1061 {
1062     didFailLoadingImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), identifier, nullptr, error);
1063 }
1064 
1065 inline void InspectorInstrumentation::continueAfterXFrameOptionsDenied(Frame&amp; frame, unsigned long identifier, DocumentLoader&amp; loader, const ResourceResponse&amp; response)
1066 {
1067     // Treat the same as didReceiveResponse.
1068     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1069         didReceiveResourceResponseImpl(*instrumentingAgents, identifier, &amp;loader, response, nullptr);
1070 }
1071 
1072 inline void InspectorInstrumentation::continueWithPolicyDownload(Frame&amp; frame, unsigned long identifier, DocumentLoader&amp; loader, const ResourceResponse&amp; response)
1073 {
1074     // Treat the same as didReceiveResponse.
1075     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1076         didReceiveResourceResponseImpl(*instrumentingAgents, identifier, &amp;loader, response, nullptr);
1077 }
1078 
1079 inline void InspectorInstrumentation::continueWithPolicyIgnore(Frame&amp; frame, unsigned long identifier, DocumentLoader&amp; loader, const ResourceResponse&amp; response)
1080 {
1081     // Treat the same as didReceiveResponse.
1082     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1083         didReceiveResourceResponseImpl(*instrumentingAgents, identifier, &amp;loader, response, nullptr);
1084 }
1085 
1086 inline void InspectorInstrumentation::willLoadXHRSynchronously(ScriptExecutionContext* context)
1087 {
1088     FAST_RETURN_IF_NO_FRONTENDS(void());
1089     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
1090         willLoadXHRSynchronouslyImpl(*instrumentingAgents);
1091 }
1092 
1093 inline void InspectorInstrumentation::didLoadXHRSynchronously(ScriptExecutionContext* context)
1094 {
1095     FAST_RETURN_IF_NO_FRONTENDS(void());
1096     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
1097         didLoadXHRSynchronouslyImpl(*instrumentingAgents);
1098 }
1099 
1100 inline void InspectorInstrumentation::scriptImported(ScriptExecutionContext&amp; context, unsigned long identifier, const String&amp; sourceString)
1101 {
1102     FAST_RETURN_IF_NO_FRONTENDS(void());
1103     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
1104         scriptImportedImpl(*instrumentingAgents, identifier, sourceString);
1105 }
1106 
1107 inline void InspectorInstrumentation::scriptExecutionBlockedByCSP(ScriptExecutionContext* context, const String&amp; directiveText)
1108 {
1109     FAST_RETURN_IF_NO_FRONTENDS(void());
1110     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
1111         scriptExecutionBlockedByCSPImpl(*instrumentingAgents, directiveText);
1112 }
1113 
1114 inline void InspectorInstrumentation::didReceiveScriptResponse(ScriptExecutionContext* context, unsigned long identifier)
1115 {
1116     FAST_RETURN_IF_NO_FRONTENDS(void());
1117     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
1118         didReceiveScriptResponseImpl(*instrumentingAgents, identifier);
1119 }
1120 
1121 inline void InspectorInstrumentation::domContentLoadedEventFired(Frame&amp; frame)
1122 {
1123     FAST_RETURN_IF_NO_FRONTENDS(void());
1124     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1125         domContentLoadedEventFiredImpl(*instrumentingAgents, frame);
1126 }
1127 
1128 inline void InspectorInstrumentation::loadEventFired(Frame* frame)
1129 {
1130     FAST_RETURN_IF_NO_FRONTENDS(void());
1131     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1132         loadEventFiredImpl(*instrumentingAgents, frame);
1133 }
1134 
1135 inline void InspectorInstrumentation::frameDetachedFromParent(Frame&amp; frame)
1136 {
1137     FAST_RETURN_IF_NO_FRONTENDS(void());
1138     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1139         frameDetachedFromParentImpl(*instrumentingAgents, frame);
1140 }
1141 
1142 inline void InspectorInstrumentation::didCommitLoad(Frame&amp; frame, DocumentLoader* loader)
1143 {
1144     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1145         didCommitLoadImpl(*instrumentingAgents, frame, loader);
1146 }
1147 
1148 inline void InspectorInstrumentation::frameDocumentUpdated(Frame&amp; frame)
1149 {
1150     FAST_RETURN_IF_NO_FRONTENDS(void());
1151     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1152         frameDocumentUpdatedImpl(*instrumentingAgents, frame);
1153 }
1154 
1155 inline void InspectorInstrumentation::loaderDetachedFromFrame(Frame&amp; frame, DocumentLoader&amp; loader)
1156 {
1157     FAST_RETURN_IF_NO_FRONTENDS(void());
1158     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1159         loaderDetachedFromFrameImpl(*instrumentingAgents, loader);
1160 }
1161 
1162 inline void InspectorInstrumentation::frameStartedLoading(Frame&amp; frame)
1163 {
1164     FAST_RETURN_IF_NO_FRONTENDS(void());
1165     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1166         frameStartedLoadingImpl(*instrumentingAgents, frame);
1167 }
1168 
1169 inline void InspectorInstrumentation::frameStoppedLoading(Frame&amp; frame)
1170 {
1171     FAST_RETURN_IF_NO_FRONTENDS(void());
1172     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1173         frameStoppedLoadingImpl(*instrumentingAgents, frame);
1174 }
1175 
1176 inline void InspectorInstrumentation::frameScheduledNavigation(Frame&amp; frame, Seconds delay)
1177 {
1178     FAST_RETURN_IF_NO_FRONTENDS(void());
1179     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1180         frameScheduledNavigationImpl(*instrumentingAgents, frame, delay);
1181 }
1182 
1183 inline void InspectorInstrumentation::frameClearedScheduledNavigation(Frame&amp; frame)
1184 {
1185     FAST_RETURN_IF_NO_FRONTENDS(void());
1186     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1187         frameClearedScheduledNavigationImpl(*instrumentingAgents, frame);
1188 }
1189 
1190 inline void InspectorInstrumentation::defaultAppearanceDidChange(Page&amp; page, bool useDarkAppearance)
1191 {
1192     FAST_RETURN_IF_NO_FRONTENDS(void());
1193     defaultAppearanceDidChangeImpl(instrumentingAgentsForPage(page), useDarkAppearance);
1194 }
1195 
1196 inline void InspectorInstrumentation::willDestroyCachedResource(CachedResource&amp; cachedResource)
1197 {
1198     FAST_RETURN_IF_NO_FRONTENDS(void());
1199     willDestroyCachedResourceImpl(cachedResource);
1200 }
1201 
1202 inline void InspectorInstrumentation::didOpenDatabase(Database&amp; database)
1203 {
1204     FAST_RETURN_IF_NO_FRONTENDS(void());
1205     if (auto* instrumentingAgents = instrumentingAgentsForContext(database.document()))
1206         didOpenDatabaseImpl(*instrumentingAgents, database);
1207 }
1208 
1209 inline void InspectorInstrumentation::didDispatchDOMStorageEvent(Page&amp; page, const String&amp; key, const String&amp; oldValue, const String&amp; newValue, StorageType storageType, SecurityOrigin* securityOrigin)
1210 {
1211     FAST_RETURN_IF_NO_FRONTENDS(void());
1212     didDispatchDOMStorageEventImpl(instrumentingAgentsForPage(page), key, oldValue, newValue, storageType, securityOrigin);
1213 }
1214 
1215 inline bool InspectorInstrumentation::shouldWaitForDebuggerOnStart(ScriptExecutionContext&amp; context)
1216 {
1217     FAST_RETURN_IF_NO_FRONTENDS(false);
1218     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
1219         return shouldWaitForDebuggerOnStartImpl(*instrumentingAgents);
1220     return false;
1221 }
1222 
1223 inline void InspectorInstrumentation::workerStarted(ScriptExecutionContext&amp; context, WorkerInspectorProxy* proxy, const URL&amp; url)
1224 {
1225     FAST_RETURN_IF_NO_FRONTENDS(void());
1226     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
1227         workerStartedImpl(*instrumentingAgents, proxy, url);
1228 }
1229 
1230 inline void InspectorInstrumentation::workerTerminated(ScriptExecutionContext&amp; context, WorkerInspectorProxy* proxy)
1231 {
1232     FAST_RETURN_IF_NO_FRONTENDS(void());
1233     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
1234         workerTerminatedImpl(*instrumentingAgents, proxy);
1235 }
1236 
1237 inline void InspectorInstrumentation::didCreateWebSocket(Document* document, unsigned long identifier, const URL&amp; requestURL)
1238 {
1239     FAST_RETURN_IF_NO_FRONTENDS(void());
1240     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1241         didCreateWebSocketImpl(*instrumentingAgents, identifier, requestURL);
1242 }
1243 
1244 inline void InspectorInstrumentation::willSendWebSocketHandshakeRequest(Document* document, unsigned long identifier, const ResourceRequest&amp; request)
1245 {
1246     FAST_RETURN_IF_NO_FRONTENDS(void());
1247     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1248         willSendWebSocketHandshakeRequestImpl(*instrumentingAgents, identifier, request);
1249 }
1250 
1251 inline void InspectorInstrumentation::didReceiveWebSocketHandshakeResponse(Document* document, unsigned long identifier, const ResourceResponse&amp; response)
1252 {
1253     FAST_RETURN_IF_NO_FRONTENDS(void());
1254     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1255         didReceiveWebSocketHandshakeResponseImpl(*instrumentingAgents, identifier, response);
1256 }
1257 
1258 inline void InspectorInstrumentation::didCloseWebSocket(Document* document, unsigned long identifier)
1259 {
1260     FAST_RETURN_IF_NO_FRONTENDS(void());
1261     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1262         didCloseWebSocketImpl(*instrumentingAgents, identifier);
1263 }
1264 
1265 inline void InspectorInstrumentation::didReceiveWebSocketFrame(Document* document, unsigned long identifier, const WebSocketFrame&amp; frame)
1266 {
1267     FAST_RETURN_IF_NO_FRONTENDS(void());
1268     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1269         didReceiveWebSocketFrameImpl(*instrumentingAgents, identifier, frame);
1270 }
1271 
1272 inline void InspectorInstrumentation::didReceiveWebSocketFrameError(Document* document, unsigned long identifier, const String&amp; errorMessage)
1273 {
1274     FAST_RETURN_IF_NO_FRONTENDS(void());
1275     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1276         didReceiveWebSocketFrameErrorImpl(*instrumentingAgents, identifier, errorMessage);
1277 }
1278 
1279 inline void InspectorInstrumentation::didSendWebSocketFrame(Document* document, unsigned long identifier, const WebSocketFrame&amp; frame)
1280 {
1281     FAST_RETURN_IF_NO_FRONTENDS(void());
1282     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1283         didSendWebSocketFrameImpl(*instrumentingAgents, identifier, frame);
1284 }
1285 
1286 #if ENABLE(RESOURCE_USAGE)
1287 inline void InspectorInstrumentation::didHandleMemoryPressure(Page&amp; page, Critical critical)
1288 {
1289     FAST_RETURN_IF_NO_FRONTENDS(void());
1290     didHandleMemoryPressureImpl(instrumentingAgentsForPage(page), critical);
1291 }
1292 #endif
1293 
1294 inline void InspectorInstrumentation::didChangeCSSCanvasClientNodes(CanvasBase&amp; canvasBase)
1295 {
1296     FAST_RETURN_IF_NO_FRONTENDS(void());
1297     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(canvasBase.scriptExecutionContext()))
1298         didChangeCSSCanvasClientNodesImpl(*instrumentingAgents, canvasBase);
1299 }
1300 
1301 inline void InspectorInstrumentation::didCreateCanvasRenderingContext(CanvasRenderingContext&amp; context)
1302 {
1303     FAST_RETURN_IF_NO_FRONTENDS(void());
1304     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context.canvasBase().scriptExecutionContext()))
1305         didCreateCanvasRenderingContextImpl(*instrumentingAgents, context);
1306 }
1307 
1308 inline void InspectorInstrumentation::didChangeCanvasMemory(CanvasRenderingContext&amp; context)
1309 {
1310     FAST_RETURN_IF_NO_FRONTENDS(void());
1311     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context.canvasBase().scriptExecutionContext()))
1312         didChangeCanvasMemoryImpl(*instrumentingAgents, context);
1313 }
1314 
1315 inline void InspectorInstrumentation::recordCanvasAction(CanvasRenderingContext&amp; context, const String&amp; name, std::initializer_list&lt;RecordCanvasActionVariant&gt;&amp;&amp; parameters)
1316 {
1317     FAST_RETURN_IF_NO_FRONTENDS(void());
1318     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context.canvasBase().scriptExecutionContext()))
1319         recordCanvasActionImpl(*instrumentingAgents, context, name, WTFMove(parameters));
1320 }
1321 
1322 inline void InspectorInstrumentation::didFinishRecordingCanvasFrame(CanvasRenderingContext&amp; context, bool forceDispatch)
1323 {
1324     FAST_RETURN_IF_NO_FRONTENDS(void());
1325     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context.canvasBase().scriptExecutionContext()))
1326         didFinishRecordingCanvasFrameImpl(*instrumentingAgents, context, forceDispatch);
1327 }
1328 
1329 #if ENABLE(WEBGL)
1330 inline void InspectorInstrumentation::didEnableExtension(WebGLRenderingContextBase&amp; contextWebGLBase, const String&amp; extension)
1331 {
1332     FAST_RETURN_IF_NO_FRONTENDS(void());
1333     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(contextWebGLBase.canvasBase().scriptExecutionContext()))
1334         didEnableExtensionImpl(*instrumentingAgents, contextWebGLBase, extension);
1335 }
1336 
1337 inline void InspectorInstrumentation::didCreateProgram(WebGLRenderingContextBase&amp; contextWebGLBase, WebGLProgram&amp; program)
1338 {
1339     FAST_RETURN_IF_NO_FRONTENDS(void());
1340     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(contextWebGLBase.canvasBase().scriptExecutionContext()))
1341         didCreateProgramImpl(*instrumentingAgents, contextWebGLBase, program);
1342 }
1343 
1344 inline void InspectorInstrumentation::willDeleteProgram(WebGLRenderingContextBase&amp; contextWebGLBase, WebGLProgram&amp; program)
1345 {
1346     FAST_RETURN_IF_NO_FRONTENDS(void());
1347     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(contextWebGLBase.canvasBase().scriptExecutionContext()))
1348         willDeleteProgramImpl(*instrumentingAgents, program);
1349 }
1350 
1351 inline bool InspectorInstrumentation::isShaderProgramDisabled(WebGLRenderingContextBase&amp; contextWebGLBase, WebGLProgram&amp; program)
1352 {
1353     FAST_RETURN_IF_NO_FRONTENDS(false);
1354     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(contextWebGLBase.canvasBase().scriptExecutionContext()))
1355         return isShaderProgramDisabledImpl(*instrumentingAgents, program);
1356     return false;
1357 }
1358 
1359 inline bool InspectorInstrumentation::isShaderProgramHighlighted(WebGLRenderingContextBase&amp; contextWebGLBase, WebGLProgram&amp; program)
1360 {
1361     FAST_RETURN_IF_NO_FRONTENDS(false);
1362     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(contextWebGLBase.canvasBase().scriptExecutionContext()))
1363         return isShaderProgramHighlightedImpl(*instrumentingAgents, program);
1364     return false;
1365 }
1366 #endif
1367 
1368 inline void InspectorInstrumentation::networkStateChanged(Page&amp; page)
1369 {
1370     FAST_RETURN_IF_NO_FRONTENDS(void());
1371     networkStateChangedImpl(instrumentingAgentsForPage(page));
1372 }
1373 
1374 inline void InspectorInstrumentation::updateApplicationCacheStatus(Frame* frame)
1375 {
1376     FAST_RETURN_IF_NO_FRONTENDS(void());
1377     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))
1378         updateApplicationCacheStatusImpl(*instrumentingAgents, *frame);
1379 }
1380 
1381 inline void InspectorInstrumentation::addMessageToConsole(Page&amp; page, std::unique_ptr&lt;Inspector::ConsoleMessage&gt; message)
1382 {
1383     addMessageToConsoleImpl(instrumentingAgentsForPage(page), WTFMove(message));
1384 }
1385 
1386 inline void InspectorInstrumentation::addMessageToConsole(WorkerGlobalScope&amp; workerGlobalScope, std::unique_ptr&lt;Inspector::ConsoleMessage&gt; message)
1387 {
1388     addMessageToConsoleImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), WTFMove(message));
1389 }
1390 
1391 inline void InspectorInstrumentation::consoleCount(Page&amp; page, JSC::ExecState* state, const String&amp; label)
1392 {
1393     consoleCountImpl(instrumentingAgentsForPage(page), state, label);
1394 }
1395 
1396 inline void InspectorInstrumentation::consoleCount(WorkerGlobalScope&amp; workerGlobalScope, JSC::ExecState* state, const String&amp; label)
1397 {
1398     consoleCountImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), state, label);
1399 }
1400 
1401 inline void InspectorInstrumentation::consoleCountReset(Page&amp; page, JSC::ExecState* state, const String&amp; label)
1402 {
1403     consoleCountResetImpl(instrumentingAgentsForPage(page), state, label);
1404 }
1405 
1406 inline void InspectorInstrumentation::consoleCountReset(WorkerGlobalScope&amp; workerGlobalScope, JSC::ExecState* state, const String&amp; label)
1407 {
1408     consoleCountResetImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), state, label);
1409 }
1410 
1411 inline void InspectorInstrumentation::takeHeapSnapshot(Frame&amp; frame, const String&amp; title)
1412 {
1413     FAST_RETURN_IF_NO_FRONTENDS(void());
1414     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1415         takeHeapSnapshotImpl(*instrumentingAgents, title);
1416 }
1417 
1418 inline void InspectorInstrumentation::startConsoleTiming(Frame&amp; frame, JSC::ExecState* exec, const String&amp; label)
1419 {
1420     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))
1421         startConsoleTimingImpl(*instrumentingAgents, frame, exec, label);
1422 }
1423 
1424 inline void InspectorInstrumentation::startConsoleTiming(WorkerGlobalScope&amp; workerGlobalScope, JSC::ExecState* exec, const String&amp; label)
1425 {
1426     startConsoleTimingImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), exec, label);
1427 }
1428 
1429 inline void InspectorInstrumentation::logConsoleTiming(Frame&amp; frame, JSC::ExecState* exec, const String&amp; label, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp; arguments)
1430 {
1431     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))
1432         logConsoleTimingImpl(*instrumentingAgents, exec, label, WTFMove(arguments));
1433 }
1434 
1435 inline void InspectorInstrumentation::logConsoleTiming(WorkerGlobalScope&amp; workerGlobalScope, JSC::ExecState* exec, const String&amp; label, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp; arguments)
1436 {
1437     logConsoleTimingImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), exec, label, WTFMove(arguments));
1438 }
1439 
1440 inline void InspectorInstrumentation::stopConsoleTiming(Frame&amp; frame, JSC::ExecState* exec, const String&amp; label)
1441 {
1442     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))
1443         stopConsoleTimingImpl(*instrumentingAgents, frame, exec, label);
1444 }
1445 
1446 inline void InspectorInstrumentation::stopConsoleTiming(WorkerGlobalScope&amp; workerGlobalScope, JSC::ExecState* exec, const String&amp; label)
1447 {
1448     stopConsoleTimingImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), exec, label);
1449 }
1450 
1451 inline void InspectorInstrumentation::consoleTimeStamp(Frame&amp; frame, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp; arguments)
1452 {
1453     FAST_RETURN_IF_NO_FRONTENDS(void());
1454     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1455         consoleTimeStampImpl(*instrumentingAgents, frame, WTFMove(arguments));
1456 }
1457 
1458 inline void InspectorInstrumentation::startProfiling(Page&amp; page, JSC::ExecState* exec, const String &amp;title)
1459 {
1460     FAST_RETURN_IF_NO_FRONTENDS(void());
1461     startProfilingImpl(instrumentingAgentsForPage(page), exec, title);
1462 }
1463 
1464 inline void InspectorInstrumentation::stopProfiling(Page&amp; page, JSC::ExecState* exec, const String &amp;title)
1465 {
1466     FAST_RETURN_IF_NO_FRONTENDS(void());
1467     stopProfilingImpl(instrumentingAgentsForPage(page), exec, title);
1468 }
1469 
1470 inline void InspectorInstrumentation::consoleStartRecordingCanvas(CanvasRenderingContext&amp; context, JSC::ExecState&amp; exec, JSC::JSObject* options)
1471 {
1472     FAST_RETURN_IF_NO_FRONTENDS(void());
1473     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context.canvasBase().scriptExecutionContext()))
1474         consoleStartRecordingCanvasImpl(*instrumentingAgents, context, exec, options);
1475 }
1476 
1477 inline void InspectorInstrumentation::didRequestAnimationFrame(Document&amp; document, int callbackId)
1478 {
1479     FAST_RETURN_IF_NO_FRONTENDS(void());
1480     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1481         didRequestAnimationFrameImpl(*instrumentingAgents, callbackId, document);
1482 }
1483 
1484 inline void InspectorInstrumentation::didCancelAnimationFrame(Document&amp; document, int callbackId)
1485 {
1486     FAST_RETURN_IF_NO_FRONTENDS(void());
1487     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1488         didCancelAnimationFrameImpl(*instrumentingAgents, callbackId, document);
1489 }
1490 
1491 inline InspectorInstrumentationCookie InspectorInstrumentation::willFireAnimationFrame(Document&amp; document, int callbackId)
1492 {
1493     FAST_RETURN_IF_NO_FRONTENDS(InspectorInstrumentationCookie());
1494     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1495         return willFireAnimationFrameImpl(*instrumentingAgents, callbackId, document);
1496     return InspectorInstrumentationCookie();
1497 }
1498 
1499 inline void InspectorInstrumentation::didFireAnimationFrame(const InspectorInstrumentationCookie&amp; cookie)
1500 {
1501     FAST_RETURN_IF_NO_FRONTENDS(void());
1502     if (cookie.isValid())
1503         didFireAnimationFrameImpl(cookie);
1504 }
1505 
1506 inline InspectorInstrumentationCookie InspectorInstrumentation::willFireObserverCallback(ScriptExecutionContext&amp; context, const String&amp; callbackType)
1507 {
1508     FAST_RETURN_IF_NO_FRONTENDS(InspectorInstrumentationCookie());
1509     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
1510         return willFireObserverCallbackImpl(*instrumentingAgents, callbackType, context);
1511     return InspectorInstrumentationCookie();
1512 }
1513 
1514 inline void InspectorInstrumentation::didFireObserverCallback(const InspectorInstrumentationCookie&amp; cookie)
1515 {
1516     FAST_RETURN_IF_NO_FRONTENDS(void());
1517     if (cookie.isValid())
1518         didFireObserverCallbackImpl(cookie);
1519 }
1520 
1521 inline void InspectorInstrumentation::layerTreeDidChange(Page* page)
1522 {
1523     FAST_RETURN_IF_NO_FRONTENDS(void());
1524     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForPage(page))
1525         layerTreeDidChangeImpl(*instrumentingAgents);
1526 }
1527 
1528 inline void InspectorInstrumentation::renderLayerDestroyed(Page* page, const RenderLayer&amp; renderLayer)
1529 {
1530     FAST_RETURN_IF_NO_FRONTENDS(void());
1531     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForPage(page))
1532         renderLayerDestroyedImpl(*instrumentingAgents, renderLayer);
1533 }
1534 
1535 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForContext(ScriptExecutionContext* context)
1536 {
1537     return context ? instrumentingAgentsForContext(*context) : nullptr;
1538 }
1539 
1540 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForContext(ScriptExecutionContext&amp; context)
1541 {
1542     if (is&lt;Document&gt;(context))
1543         return instrumentingAgentsForPage(downcast&lt;Document&gt;(context).page());
1544     if (is&lt;WorkerGlobalScope&gt;(context))
1545         return &amp;instrumentingAgentsForWorkerGlobalScope(downcast&lt;WorkerGlobalScope&gt;(context));
1546     return nullptr;
1547 }
1548 
1549 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForFrame(Frame* frame)
1550 {
1551     return frame ? instrumentingAgentsForFrame(*frame) : nullptr;
1552 }
1553 
1554 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForFrame(Frame&amp; frame)
1555 {
1556     return instrumentingAgentsForPage(frame.page());
1557 }
1558 
1559 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForDocument(Document* document)
1560 {
1561     return document ? instrumentingAgentsForDocument(*document) : nullptr;
1562 }
1563 
1564 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForDocument(Document&amp; document)
1565 {
1566     Page* page = document.page();
1567     if (!page &amp;&amp; document.templateDocumentHost())
1568         page = document.templateDocumentHost()-&gt;page();
1569     return instrumentingAgentsForPage(page);
1570 }
1571 
1572 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForPage(Page* page)
1573 {
1574     return page ? &amp;instrumentingAgentsForPage(*page) : nullptr;
1575 }
1576 
1577 inline InstrumentingAgents&amp; InspectorInstrumentation::instrumentingAgentsForPage(Page&amp; page)
1578 {
1579     ASSERT(isMainThread());
1580     return page.inspectorController().m_instrumentingAgents.get();
1581 }
1582 
1583 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForWorkerGlobalScope(WorkerGlobalScope* workerGlobalScope)
1584 {
1585     return workerGlobalScope ? &amp;instrumentingAgentsForWorkerGlobalScope(*workerGlobalScope) : nullptr;
1586 }
1587 
1588 inline InstrumentingAgents&amp; InspectorInstrumentation::instrumentingAgentsForWorkerGlobalScope(WorkerGlobalScope&amp; workerGlobalScope)
1589 {
1590     return workerGlobalScope.inspectorController().m_instrumentingAgents;
1591 }
1592 
1593 inline void InspectorInstrumentation::frontendCreated()
1594 {
1595     ASSERT(isMainThread());
1596     s_frontendCounter++;
1597 
1598     if (s_frontendCounter == 1)
1599         InspectorInstrumentation::firstFrontendCreated();
1600 }
1601 
1602 inline void InspectorInstrumentation::frontendDeleted()
1603 {
1604     ASSERT(isMainThread());
1605     s_frontendCounter--;
1606 
1607     if (!s_frontendCounter)
1608         InspectorInstrumentation::lastFrontendDeleted();
1609 }
1610 
1611 } // namespace WebCore
    </pre>
  </body>
</html>
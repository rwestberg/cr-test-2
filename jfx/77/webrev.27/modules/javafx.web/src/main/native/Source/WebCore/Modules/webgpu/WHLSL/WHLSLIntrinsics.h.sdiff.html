<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/Modules/webgpu/WHLSL/WHLSLIntrinsics.h</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="WHLSLIntrinsics.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="WHLSLLexer.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/Modules/webgpu/WHLSL/WHLSLIntrinsics.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 41 
 42 class Intrinsics {
 43 public:
 44     Intrinsics();
 45 
 46     void add(AST::NativeFunctionDeclaration&amp;);
 47     void add(AST::NativeTypeDeclaration&amp;);
 48 
 49     AST::NativeTypeDeclaration&amp; voidType() const
 50     {
 51         ASSERT(m_voidType);
 52         return *m_voidType;
 53     }
 54 
 55     AST::NativeTypeDeclaration&amp; boolType() const
 56     {
 57         ASSERT(m_boolType);
 58         return *m_boolType;
 59     }
 60 






 61     AST::NativeTypeDeclaration&amp; intType() const
 62     {
 63         ASSERT(m_intType);
 64         return *m_intType;
 65     }
 66 
<span class="line-modified"> 67     AST::NativeTypeDeclaration&amp; uintType() const</span>
 68     {
<span class="line-modified"> 69         ASSERT(m_uintType);</span>
<span class="line-modified"> 70         return *m_uintType;</span>


















 71     }
 72 
 73     AST::NativeTypeDeclaration&amp; samplerType() const
 74     {
 75         ASSERT(m_samplerType);
 76         return *m_samplerType;
 77     }
 78 
 79     AST::NativeTypeDeclaration&amp; floatType() const
 80     {
 81         ASSERT(m_floatType);
 82         return *m_floatType;
 83     }
 84 






 85     AST::NativeTypeDeclaration&amp; float3Type() const
 86     {
 87         ASSERT(m_vectorFloat[1]);
 88         return *m_vectorFloat[1];
 89     }
 90 
 91     AST::NativeTypeDeclaration&amp; float4Type() const
 92     {
 93         ASSERT(m_vectorFloat[2]);
 94         return *m_vectorFloat[2];
 95     }
 96 
<span class="line-modified"> 97     AST::NativeFunctionDeclaration&amp; ddx() const</span>

 98     {
<span class="line-modified"> 99         ASSERT(m_ddx);</span>
<span class="line-removed">100         return *m_ddx;</span>
101     }
102 
<span class="line-modified">103     AST::NativeFunctionDeclaration&amp; ddy() const</span>
104     {
<span class="line-modified">105         ASSERT(m_ddy);</span>
<span class="line-removed">106         return *m_ddy;</span>
107     }
108 
<span class="line-modified">109     AST::NativeFunctionDeclaration&amp; allMemoryBarrier() const</span>
110     {
<span class="line-modified">111         ASSERT(m_allMemoryBarrier);</span>
<span class="line-removed">112         return *m_allMemoryBarrier;</span>
113     }
114 
<span class="line-modified">115     AST::NativeFunctionDeclaration&amp; deviceMemoryBarrier() const</span>
116     {
<span class="line-modified">117         ASSERT(m_deviceMemoryBarrier);</span>
<span class="line-removed">118         return *m_deviceMemoryBarrier;</span>
119     }
120 
<span class="line-modified">121     AST::NativeFunctionDeclaration&amp; groupMemoryBarrier() const</span>
122     {
<span class="line-modified">123         ASSERT(m_groupMemoryBarrier);</span>
<span class="line-removed">124         return *m_groupMemoryBarrier;</span>
125     }
126 
127 private:
128     bool addPrimitive(AST::NativeTypeDeclaration&amp;);
129     bool addVector(AST::NativeTypeDeclaration&amp;);
130     bool addMatrix(AST::NativeTypeDeclaration&amp;);
131     bool addFullTexture(AST::NativeTypeDeclaration&amp;, AST::TypeReference&amp;);
<span class="line-modified">132     bool addDepthTexture(AST::NativeTypeDeclaration&amp;, AST::TypeReference&amp;);</span>
133     void addTexture(AST::NativeTypeDeclaration&amp;);
134 
135     HashSet&lt;const AST::NativeTypeDeclaration*&gt; m_textureSet;
136 
137     AST::NativeTypeDeclaration* m_voidType { nullptr };
138     AST::NativeTypeDeclaration* m_boolType { nullptr };
<span class="line-removed">139     AST::NativeTypeDeclaration* m_ucharType { nullptr };</span>
<span class="line-removed">140     AST::NativeTypeDeclaration* m_ushortType { nullptr };</span>
141     AST::NativeTypeDeclaration* m_uintType { nullptr };
<span class="line-removed">142     AST::NativeTypeDeclaration* m_charType { nullptr };</span>
<span class="line-removed">143     AST::NativeTypeDeclaration* m_shortType { nullptr };</span>
144     AST::NativeTypeDeclaration* m_intType { nullptr };
<span class="line-removed">145     AST::NativeTypeDeclaration* m_halfType { nullptr };</span>
146     AST::NativeTypeDeclaration* m_floatType { nullptr };
147     AST::NativeTypeDeclaration* m_atomicIntType { nullptr };
148     AST::NativeTypeDeclaration* m_atomicUintType { nullptr };
149     AST::NativeTypeDeclaration* m_samplerType { nullptr };
150 
151     AST::NativeTypeDeclaration* m_vectorBool[3] { 0 };
<span class="line-removed">152     AST::NativeTypeDeclaration* m_vectorUchar[3] { 0 };</span>
<span class="line-removed">153     AST::NativeTypeDeclaration* m_vectorUshort[3] { 0 };</span>
154     AST::NativeTypeDeclaration* m_vectorUint[3] { 0 };
<span class="line-removed">155     AST::NativeTypeDeclaration* m_vectorChar[3] { 0 };</span>
<span class="line-removed">156     AST::NativeTypeDeclaration* m_vectorShort[3] { 0 };</span>
157     AST::NativeTypeDeclaration* m_vectorInt[3] { 0 };
<span class="line-removed">158     AST::NativeTypeDeclaration* m_vectorHalf[3] { 0 };</span>
159     AST::NativeTypeDeclaration* m_vectorFloat[3] { 0 };
160 
<span class="line-modified">161     AST::NativeTypeDeclaration* m_matrixHalf[3][3] {{ 0 }};</span>
<span class="line-removed">162     AST::NativeTypeDeclaration* m_matrixFloat[3][3] {{ 0 }};</span>
<span class="line-removed">163 </span>
<span class="line-removed">164     static constexpr const char* m_textureTypeNames[] = { &quot;Texture1D&quot;, &quot;RWTexture1D&quot;, &quot;Texture1DArray&quot;, &quot;RWTexture1DArray&quot;, &quot;Texture2D&quot;, &quot;RWTexture2D&quot;, &quot;Texture2DArray&quot;, &quot;RWTexture2DArray&quot;, &quot;Texture3D&quot;, &quot;RWTexture3D&quot;, &quot;TextureCube&quot; };</span>
165 
<span class="line-modified">166     static constexpr const char* m_textureInnerTypeNames[] = { &quot;uchar&quot;, &quot;ushort&quot;,  &quot;uint&quot;, &quot;char&quot;, &quot;short&quot;, &quot;int&quot;, &quot;half&quot;, &quot;float&quot; };</span>
167 
168     AST::NativeTypeDeclaration* m_fullTextures[WTF_ARRAY_LENGTH(m_textureTypeNames)][WTF_ARRAY_LENGTH(m_textureInnerTypeNames)][4] {{{ 0 }}};
169 
<span class="line-modified">170     static constexpr const char* m_depthTextureInnerTypes[] =  { &quot;half&quot;, &quot;float&quot; };</span>
171 
172     AST::NativeTypeDeclaration* m_textureDepth2D[WTF_ARRAY_LENGTH(m_depthTextureInnerTypes)] { 0 };
<span class="line-removed">173     AST::NativeTypeDeclaration* m_rwTextureDepth2D[WTF_ARRAY_LENGTH(m_depthTextureInnerTypes)] { 0 };</span>
174     AST::NativeTypeDeclaration* m_textureDepth2DArray[WTF_ARRAY_LENGTH(m_depthTextureInnerTypes)] { 0 };
<span class="line-removed">175     AST::NativeTypeDeclaration* m_rwTextureDepth2DArray[WTF_ARRAY_LENGTH(m_depthTextureInnerTypes)] { 0 };</span>
176     AST::NativeTypeDeclaration* m_textureDepthCube[WTF_ARRAY_LENGTH(m_depthTextureInnerTypes)] { 0 };
177 
178     AST::NativeFunctionDeclaration* m_ddx { nullptr };
179     AST::NativeFunctionDeclaration* m_ddy { nullptr };
180     AST::NativeFunctionDeclaration* m_allMemoryBarrier { nullptr };
181     AST::NativeFunctionDeclaration* m_deviceMemoryBarrier { nullptr };
182     AST::NativeFunctionDeclaration* m_groupMemoryBarrier { nullptr };
183 };
184 
185 } // namespace WHLSL
186 
187 } // namespace WebCore
188 
189 #endif // ENABLE(WEBGPU)
</pre>
</td>
<td>
<hr />
<pre>
 41 
 42 class Intrinsics {
 43 public:
 44     Intrinsics();
 45 
 46     void add(AST::NativeFunctionDeclaration&amp;);
 47     void add(AST::NativeTypeDeclaration&amp;);
 48 
 49     AST::NativeTypeDeclaration&amp; voidType() const
 50     {
 51         ASSERT(m_voidType);
 52         return *m_voidType;
 53     }
 54 
 55     AST::NativeTypeDeclaration&amp; boolType() const
 56     {
 57         ASSERT(m_boolType);
 58         return *m_boolType;
 59     }
 60 
<span class="line-added"> 61     AST::NativeTypeDeclaration&amp; uintType() const</span>
<span class="line-added"> 62     {</span>
<span class="line-added"> 63         ASSERT(m_uintType);</span>
<span class="line-added"> 64         return *m_uintType;</span>
<span class="line-added"> 65     }</span>
<span class="line-added"> 66 </span>
 67     AST::NativeTypeDeclaration&amp; intType() const
 68     {
 69         ASSERT(m_intType);
 70         return *m_intType;
 71     }
 72 
<span class="line-modified"> 73     AST::NativeTypeDeclaration&amp; uint2Type() const</span>
 74     {
<span class="line-modified"> 75         ASSERT(m_vectorUint[0]);</span>
<span class="line-modified"> 76         return *m_vectorUint[0];</span>
<span class="line-added"> 77     }</span>
<span class="line-added"> 78 </span>
<span class="line-added"> 79     AST::NativeTypeDeclaration&amp; uint4Type() const</span>
<span class="line-added"> 80     {</span>
<span class="line-added"> 81         ASSERT(m_vectorUint[2]);</span>
<span class="line-added"> 82         return *m_vectorUint[2];</span>
<span class="line-added"> 83     }</span>
<span class="line-added"> 84 </span>
<span class="line-added"> 85     AST::NativeTypeDeclaration&amp; int2Type() const</span>
<span class="line-added"> 86     {</span>
<span class="line-added"> 87         ASSERT(m_vectorInt[0]);</span>
<span class="line-added"> 88         return *m_vectorInt[0];</span>
<span class="line-added"> 89     }</span>
<span class="line-added"> 90 </span>
<span class="line-added"> 91     AST::NativeTypeDeclaration&amp; int4Type() const</span>
<span class="line-added"> 92     {</span>
<span class="line-added"> 93         ASSERT(m_vectorInt[2]);</span>
<span class="line-added"> 94         return *m_vectorInt[2];</span>
 95     }
 96 
 97     AST::NativeTypeDeclaration&amp; samplerType() const
 98     {
 99         ASSERT(m_samplerType);
100         return *m_samplerType;
101     }
102 
103     AST::NativeTypeDeclaration&amp; floatType() const
104     {
105         ASSERT(m_floatType);
106         return *m_floatType;
107     }
108 
<span class="line-added">109     AST::NativeTypeDeclaration&amp; float2Type() const</span>
<span class="line-added">110     {</span>
<span class="line-added">111         ASSERT(m_vectorFloat[0]);</span>
<span class="line-added">112         return *m_vectorFloat[0];</span>
<span class="line-added">113     }</span>
<span class="line-added">114 </span>
115     AST::NativeTypeDeclaration&amp; float3Type() const
116     {
117         ASSERT(m_vectorFloat[1]);
118         return *m_vectorFloat[1];
119     }
120 
121     AST::NativeTypeDeclaration&amp; float4Type() const
122     {
123         ASSERT(m_vectorFloat[2]);
124         return *m_vectorFloat[2];
125     }
126 
<span class="line-modified">127     // These functions may have been pruned from the AST if they are unused.</span>
<span class="line-added">128     AST::NativeFunctionDeclaration* ddx() const</span>
129     {
<span class="line-modified">130         return m_ddx;</span>

131     }
132 
<span class="line-modified">133     AST::NativeFunctionDeclaration* ddy() const</span>
134     {
<span class="line-modified">135         return m_ddy;</span>

136     }
137 
<span class="line-modified">138     AST::NativeFunctionDeclaration* allMemoryBarrier() const</span>
139     {
<span class="line-modified">140         return m_allMemoryBarrier;</span>

141     }
142 
<span class="line-modified">143     AST::NativeFunctionDeclaration* deviceMemoryBarrier() const</span>
144     {
<span class="line-modified">145         return m_deviceMemoryBarrier;</span>

146     }
147 
<span class="line-modified">148     AST::NativeFunctionDeclaration* groupMemoryBarrier() const</span>
149     {
<span class="line-modified">150         return m_groupMemoryBarrier;</span>

151     }
152 
153 private:
154     bool addPrimitive(AST::NativeTypeDeclaration&amp;);
155     bool addVector(AST::NativeTypeDeclaration&amp;);
156     bool addMatrix(AST::NativeTypeDeclaration&amp;);
157     bool addFullTexture(AST::NativeTypeDeclaration&amp;, AST::TypeReference&amp;);
<span class="line-modified">158     void addDepthTexture(AST::NativeTypeDeclaration&amp;, AST::TypeReference&amp;);</span>
159     void addTexture(AST::NativeTypeDeclaration&amp;);
160 
161     HashSet&lt;const AST::NativeTypeDeclaration*&gt; m_textureSet;
162 
163     AST::NativeTypeDeclaration* m_voidType { nullptr };
164     AST::NativeTypeDeclaration* m_boolType { nullptr };


165     AST::NativeTypeDeclaration* m_uintType { nullptr };


166     AST::NativeTypeDeclaration* m_intType { nullptr };

167     AST::NativeTypeDeclaration* m_floatType { nullptr };
168     AST::NativeTypeDeclaration* m_atomicIntType { nullptr };
169     AST::NativeTypeDeclaration* m_atomicUintType { nullptr };
170     AST::NativeTypeDeclaration* m_samplerType { nullptr };
171 
172     AST::NativeTypeDeclaration* m_vectorBool[3] { 0 };


173     AST::NativeTypeDeclaration* m_vectorUint[3] { 0 };


174     AST::NativeTypeDeclaration* m_vectorInt[3] { 0 };

175     AST::NativeTypeDeclaration* m_vectorFloat[3] { 0 };
176 
<span class="line-modified">177     static constexpr const char* m_textureTypeNames[] = { &quot;Texture1D&quot;, &quot;RWTexture1D&quot;, &quot;Texture2D&quot;, &quot;RWTexture2D&quot;, &quot;Texture3D&quot;, &quot;RWTexture3D&quot;, &quot;TextureCube&quot;, &quot;Texture1DArray&quot;, &quot;RWTexture1DArray&quot;, &quot;Texture2DArray&quot;, &quot;RWTexture2DArray&quot; };</span>



178 
<span class="line-modified">179     static constexpr const char* m_textureInnerTypeNames[] = { &quot;uint&quot;, &quot;int&quot;, &quot;float&quot; };</span>
180 
181     AST::NativeTypeDeclaration* m_fullTextures[WTF_ARRAY_LENGTH(m_textureTypeNames)][WTF_ARRAY_LENGTH(m_textureInnerTypeNames)][4] {{{ 0 }}};
182 
<span class="line-modified">183     static constexpr const char* m_depthTextureInnerTypes[] =  { &quot;float&quot; };</span>
184 
185     AST::NativeTypeDeclaration* m_textureDepth2D[WTF_ARRAY_LENGTH(m_depthTextureInnerTypes)] { 0 };

186     AST::NativeTypeDeclaration* m_textureDepth2DArray[WTF_ARRAY_LENGTH(m_depthTextureInnerTypes)] { 0 };

187     AST::NativeTypeDeclaration* m_textureDepthCube[WTF_ARRAY_LENGTH(m_depthTextureInnerTypes)] { 0 };
188 
189     AST::NativeFunctionDeclaration* m_ddx { nullptr };
190     AST::NativeFunctionDeclaration* m_ddy { nullptr };
191     AST::NativeFunctionDeclaration* m_allMemoryBarrier { nullptr };
192     AST::NativeFunctionDeclaration* m_deviceMemoryBarrier { nullptr };
193     AST::NativeFunctionDeclaration* m_groupMemoryBarrier { nullptr };
194 };
195 
196 } // namespace WHLSL
197 
198 } // namespace WebCore
199 
200 #endif // ENABLE(WEBGPU)
</pre>
</td>
</tr>
</table>
<center><a href="WHLSLIntrinsics.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="WHLSLLexer.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>
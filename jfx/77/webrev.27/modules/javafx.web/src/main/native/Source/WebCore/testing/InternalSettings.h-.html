<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old modules/javafx.web/src/main/native/Source/WebCore/testing/InternalSettings.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (C) 2012 Google Inc. All rights reserved.
  3  * Copyright (C) 2013-2016 Apple Inc. All rights reserved.
  4  *
  5  * Redistribution and use in source and binary forms, with or without
  6  * modification, are permitted provided that the following conditions
  7  * are met:
  8  *
  9  * 1.  Redistributions of source code must retain the above copyright
 10  *     notice, this list of conditions and the following disclaimer.
 11  * 2.  Redistributions in binary form must reproduce the above copyright
 12  *     notice, this list of conditions and the following disclaimer in the
 13  *     documentation and/or other materials provided with the distribution.
 14  *
 15  * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS &quot;AS IS&quot; AND ANY
 16  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 17  * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 18  * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY
 19  * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 20  * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 21  * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 22  * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 23  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 24  * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 25  */
 26 
 27 #pragma once
 28 
 29 // FIXME (121927): This include should not be needed.
 30 #include &lt;wtf/text/AtomicStringHash.h&gt;
 31 
 32 #include &quot;EditingBehaviorTypes.h&quot;
 33 #include &quot;ExceptionOr.h&quot;
 34 #include &quot;FontGenericFamilies.h&quot;
 35 #include &quot;IntSize.h&quot;
 36 #include &quot;InternalSettingsGenerated.h&quot;
 37 #include &quot;SecurityOrigin.h&quot;
 38 #include &quot;Settings.h&quot;
 39 #include &quot;WritingMode.h&quot;
 40 
 41 namespace WebCore {
 42 
 43 class Page;
 44 class Settings;
 45 
 46 class InternalSettings : public InternalSettingsGenerated {
 47 public:
 48     static Ref&lt;InternalSettings&gt; create(Page*);
 49     static InternalSettings* from(Page*);
 50     void hostDestroyed();
 51     void resetToConsistentState();
 52 
 53     ExceptionOr&lt;void&gt; setUsesOverlayScrollbars(bool);
 54     ExceptionOr&lt;void&gt; setTouchEventEmulationEnabled(bool);
 55     ExceptionOr&lt;void&gt; setStandardFontFamily(const String&amp; family, const String&amp; script);
 56     ExceptionOr&lt;void&gt; setSerifFontFamily(const String&amp; family, const String&amp; script);
 57     ExceptionOr&lt;void&gt; setSansSerifFontFamily(const String&amp; family, const String&amp; script);
 58     ExceptionOr&lt;void&gt; setFixedFontFamily(const String&amp; family, const String&amp; script);
 59     ExceptionOr&lt;void&gt; setCursiveFontFamily(const String&amp; family, const String&amp; script);
 60     ExceptionOr&lt;void&gt; setFantasyFontFamily(const String&amp; family, const String&amp; script);
 61     ExceptionOr&lt;void&gt; setPictographFontFamily(const String&amp; family, const String&amp; script);
 62     ExceptionOr&lt;void&gt; setTextAutosizingEnabled(bool);
 63     ExceptionOr&lt;void&gt; setTextAutosizingWindowSizeOverride(int width, int height);
 64     ExceptionOr&lt;void&gt; setTextAutosizingFontScaleFactor(float);
 65     ExceptionOr&lt;void&gt; setMediaTypeOverride(const String&amp;);
 66     ExceptionOr&lt;void&gt; setCanStartMedia(bool);
 67     ExceptionOr&lt;void&gt; setAllowsAirPlayForMediaPlayback(bool);
 68     ExceptionOr&lt;void&gt; setMediaCaptureRequiresSecureConnection(bool);
 69 
 70     ExceptionOr&lt;void&gt; setEditingBehavior(const String&amp;);
 71     ExceptionOr&lt;void&gt; setPreferMIMETypeForImages(bool);
 72     ExceptionOr&lt;void&gt; setPDFImageCachingPolicy(const String&amp;);
 73     ExceptionOr&lt;void&gt; setShouldDisplayTrackKind(const String&amp; kind, bool enabled);
 74     ExceptionOr&lt;bool&gt; shouldDisplayTrackKind(const String&amp; kind);
 75     ExceptionOr&lt;void&gt; setUseDarkAppearance(bool);
 76     ExceptionOr&lt;void&gt; setStorageBlockingPolicy(const String&amp;);
 77     ExceptionOr&lt;void&gt; setImagesEnabled(bool);
 78     ExceptionOr&lt;void&gt; setMinimumTimerInterval(double intervalInSeconds);
 79     ExceptionOr&lt;void&gt; setDefaultVideoPosterURL(const String&amp;);
 80     ExceptionOr&lt;void&gt; setForcePendingWebGLPolicy(bool);
 81     ExceptionOr&lt;void&gt; setTimeWithoutMouseMovementBeforeHidingControls(double);
 82     ExceptionOr&lt;void&gt; setUseLegacyBackgroundSizeShorthandBehavior(bool);
 83     ExceptionOr&lt;void&gt; setAutoscrollForDragAndDropEnabled(bool);
 84     ExceptionOr&lt;void&gt; setFontFallbackPrefersPictographs(bool);
 85     enum class FontLoadTimingOverride { Block, Swap, Failure };
 86     ExceptionOr&lt;void&gt; setFontLoadTimingOverride(const FontLoadTimingOverride&amp;);
 87     ExceptionOr&lt;void&gt; setShouldIgnoreFontLoadCompletions(bool);
 88     ExceptionOr&lt;void&gt; setQuickTimePluginReplacementEnabled(bool);
 89     ExceptionOr&lt;void&gt; setYouTubeFlashPluginReplacementEnabled(bool);
 90     ExceptionOr&lt;void&gt; setBackgroundShouldExtendBeyondPage(bool);
 91     ExceptionOr&lt;void&gt; setShouldConvertPositionStyleOnCopy(bool);
 92     ExceptionOr&lt;void&gt; setScrollingTreeIncludesFrames(bool);
 93     ExceptionOr&lt;void&gt; setAllowUnclampedScrollPosition(bool);
 94     ExceptionOr&lt;void&gt; setAllowsInlineMediaPlayback(bool);
 95     ExceptionOr&lt;void&gt; setAllowsInlineMediaPlaybackAfterFullscreen(bool);
 96     ExceptionOr&lt;void&gt; setInlineMediaPlaybackRequiresPlaysInlineAttribute(bool);
 97     ExceptionOr&lt;String&gt; userInterfaceDirectionPolicy();
 98     ExceptionOr&lt;void&gt; setUserInterfaceDirectionPolicy(const String&amp;);
 99     ExceptionOr&lt;String&gt; systemLayoutDirection();
100     ExceptionOr&lt;void&gt; setSystemLayoutDirection(const String&amp;);
101     ExceptionOr&lt;void&gt; setShouldMockBoldSystemFontForAccessibility(bool);
102     ExceptionOr&lt;void&gt; setShouldManageAudioSessionCategory(bool);
103     ExceptionOr&lt;void&gt; setCustomPasteboardDataEnabled(bool);
104     ExceptionOr&lt;void&gt; setAccessibilityEventsEnabled(bool);
105     ExceptionOr&lt;void&gt; setIncompleteImageBorderEnabled(bool);
106 
107     using FrameFlatteningValue = FrameFlattening;
108     ExceptionOr&lt;void&gt; setFrameFlattening(FrameFlatteningValue);
109 
110     static void setAllowsAnySSLCertificate(bool);
111 
112     ExceptionOr&lt;bool&gt; deferredCSSParserEnabled();
113     ExceptionOr&lt;void&gt; setDeferredCSSParserEnabled(bool);
114 
115     enum class ForcedAccessibilityValue { System, On, Off };
116     ForcedAccessibilityValue forcedColorsAreInvertedAccessibilityValue() const;
117     void setForcedColorsAreInvertedAccessibilityValue(ForcedAccessibilityValue);
118     ForcedAccessibilityValue forcedDisplayIsMonochromeAccessibilityValue() const;
119     void setForcedDisplayIsMonochromeAccessibilityValue(ForcedAccessibilityValue);
120     ForcedAccessibilityValue forcedPrefersReducedMotionAccessibilityValue() const;
121     void setForcedPrefersReducedMotionAccessibilityValue(ForcedAccessibilityValue);
122 
123     // RuntimeEnabledFeatures.
124     static void setIndexedDBWorkersEnabled(bool);
125     static void setWebGL2Enabled(bool);
126     static void setWebMetalEnabled(bool);
127     static void setWebVREnabled(bool);
128     static void setScreenCaptureEnabled(bool);
129 
130     static bool webAnimationsCSSIntegrationEnabled();
131 
132     static void setStorageAccessPromptsEnabled(bool);
133 
134 private:
135     explicit InternalSettings(Page*);
136 
137     Settings&amp; settings() const;
138     static const char* supplementName();
139 
140     class Backup {
141     public:
142         explicit Backup(Settings&amp;);
143         void restoreTo(Settings&amp;);
144 
145         EditingBehaviorType m_originalEditingBehavior;
146 
147         // Initially empty, only used if changed by a test.
148         ScriptFontFamilyMap m_standardFontFamilies;
149         ScriptFontFamilyMap m_fixedFontFamilies;
150         ScriptFontFamilyMap m_serifFontFamilies;
151         ScriptFontFamilyMap m_sansSerifFontFamilies;
152         ScriptFontFamilyMap m_cursiveFontFamilies;
153         ScriptFontFamilyMap m_fantasyFontFamilies;
154         ScriptFontFamilyMap m_pictographFontFamilies;
155 
156 #if ENABLE(TEXT_AUTOSIZING)
157         bool m_originalTextAutosizingEnabled;
158         IntSize m_originalTextAutosizingWindowSizeOverride;
159 #endif
160 
161         String m_originalMediaTypeOverride;
162         bool m_originalCanvasUsesAcceleratedDrawing;
163         bool m_originalMockScrollbarsEnabled;
164         bool m_originalUsesOverlayScrollbars;
165         bool m_imagesEnabled;
166         bool m_preferMIMETypeForImages;
167         Seconds m_minimumDOMTimerInterval;
168 #if ENABLE(VIDEO_TRACK)
169         bool m_shouldDisplaySubtitles;
170         bool m_shouldDisplayCaptions;
171         bool m_shouldDisplayTextDescriptions;
172 #endif
173         String m_defaultVideoPosterURL;
174         bool m_forcePendingWebGLPolicy;
175         Seconds m_originalTimeWithoutMouseMovementBeforeHidingControls;
176         bool m_useLegacyBackgroundSizeShorthandBehavior;
177         bool m_autoscrollForDragAndDropEnabled;
178         bool m_quickTimePluginReplacementEnabled;
179         bool m_youTubeFlashPluginReplacementEnabled;
180         bool m_shouldConvertPositionStyleOnCopy;
181         bool m_fontFallbackPrefersPictographs;
182         bool m_shouldIgnoreFontLoadCompletions;
183         bool m_backgroundShouldExtendBeyondPage;
184         SecurityOrigin::StorageBlockingPolicy m_storageBlockingPolicy;
185         bool m_scrollingTreeIncludesFrames;
186 #if ENABLE(TOUCH_EVENTS)
187         bool m_touchEventEmulationEnabled;
188 #endif
189 #if ENABLE(WIRELESS_PLAYBACK_TARGET)
190         bool m_allowsAirPlayForMediaPlayback;
191 #endif
192         bool m_allowsInlineMediaPlayback;
193         bool m_allowsInlineMediaPlaybackAfterFullscreen;
194         bool m_inlineMediaPlaybackRequiresPlaysInlineAttribute;
195         bool m_deferredCSSParserEnabled;
196         bool m_inputEventsEnabled;
197         bool m_incompleteImageBorderEnabled;
198 #if ENABLE(ACCESSIBILITY_EVENTS)
199         bool m_accessibilityEventsEnabled;
200 #endif
201         UserInterfaceDirectionPolicy m_userInterfaceDirectionPolicy;
202         TextDirection m_systemLayoutDirection;
203         PDFImageCachingPolicy m_pdfImageCachingPolicy;
204         Settings::ForcedAccessibilityValue m_forcedColorsAreInvertedAccessibilityValue;
205         Settings::ForcedAccessibilityValue m_forcedDisplayIsMonochromeAccessibilityValue;
206         Settings::ForcedAccessibilityValue m_forcedPrefersReducedMotionAccessibilityValue;
207         Settings::FontLoadTimingOverride m_fontLoadTimingOverride;
208         FrameFlattening m_frameFlattening;
209 
210         // Runtime enabled settings.
211         bool m_indexedDBWorkersEnabled;
212         bool m_webGL2Enabled;
213         bool m_webMetalEnabled;
214         bool m_webVREnabled;
215         bool m_setScreenCaptureEnabled;
216 
217         bool m_shouldMockBoldSystemFontForAccessibility;
218 #if USE(AUDIO_SESSION)
219         bool m_shouldManageAudioSessionCategory;
220 #endif
221         bool m_customPasteboardDataEnabled;
222         bool m_promptForStorageAccessAPIEnabled { false };
223     };
224 
225     Page* m_page;
226     Backup m_backup;
227 };
228 
229 } // namespace WebCore
    </pre>
  </body>
</html>
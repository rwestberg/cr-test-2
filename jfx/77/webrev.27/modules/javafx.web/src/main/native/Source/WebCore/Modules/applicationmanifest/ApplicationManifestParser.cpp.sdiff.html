<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/Modules/applicationmanifest/ApplicationManifestParser.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../applepay/paymentrequest/ApplePayPaymentHandler.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../beacon/NavigatorBeacon.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/Modules/applicationmanifest/ApplicationManifestParser.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 74     parsedManifest.description = parseDescription(*manifest);
 75     parsedManifest.shortName = parseShortName(*manifest);
 76     parsedManifest.scope = parseScope(*manifest, documentURL, parsedManifest.startURL);
 77 
 78     return parsedManifest;
 79 }
 80 
 81 void ApplicationManifestParser::logManifestPropertyNotAString(const String&amp; propertyName)
 82 {
 83     logDeveloperWarning(makeString(&quot;The value of \&quot;&quot;_s, propertyName, &quot;\&quot; is not a string.&quot;_s));
 84 }
 85 
 86 void ApplicationManifestParser::logManifestPropertyInvalidURL(const String&amp; propertyName)
 87 {
 88     logDeveloperWarning(makeString(&quot;The value of \&quot;&quot;_s, propertyName, &quot;\&quot; is not a valid URL.&quot;_s));
 89 }
 90 
 91 void ApplicationManifestParser::logDeveloperWarning(const String&amp; message)
 92 {
 93     if (m_consoleContext)
<span class="line-modified"> 94         m_consoleContext-&gt;addConsoleMessage(std::make_unique&lt;Inspector::ConsoleMessage&gt;(JSC::MessageSource::Other, JSC::MessageType::Log, JSC::MessageLevel::Warning, makeString(&quot;Parsing application manifest &quot;_s, m_manifestURL.string(), &quot;: &quot;_s, message)));</span>
 95 }
 96 
 97 URL ApplicationManifestParser::parseStartURL(const JSON::Object&amp; manifest, const URL&amp; documentURL)
 98 {
 99     RefPtr&lt;JSON::Value&gt; value;
100     if (!manifest.getValue(&quot;start_url&quot;, value))
101         return documentURL;
102 
103     String stringValue;
104     if (!value-&gt;asString(stringValue)) {
105         logManifestPropertyNotAString(&quot;start_url&quot;_s);
106         return documentURL;
107     }
108 
109     if (stringValue.isEmpty())
110         return documentURL;
111 
112     URL startURL(m_manifestURL, stringValue);
113     if (!startURL.isValid()) {
114         logManifestPropertyInvalidURL(&quot;start_url&quot;_s);
</pre>
</td>
<td>
<hr />
<pre>
 74     parsedManifest.description = parseDescription(*manifest);
 75     parsedManifest.shortName = parseShortName(*manifest);
 76     parsedManifest.scope = parseScope(*manifest, documentURL, parsedManifest.startURL);
 77 
 78     return parsedManifest;
 79 }
 80 
 81 void ApplicationManifestParser::logManifestPropertyNotAString(const String&amp; propertyName)
 82 {
 83     logDeveloperWarning(makeString(&quot;The value of \&quot;&quot;_s, propertyName, &quot;\&quot; is not a string.&quot;_s));
 84 }
 85 
 86 void ApplicationManifestParser::logManifestPropertyInvalidURL(const String&amp; propertyName)
 87 {
 88     logDeveloperWarning(makeString(&quot;The value of \&quot;&quot;_s, propertyName, &quot;\&quot; is not a valid URL.&quot;_s));
 89 }
 90 
 91 void ApplicationManifestParser::logDeveloperWarning(const String&amp; message)
 92 {
 93     if (m_consoleContext)
<span class="line-modified"> 94         m_consoleContext-&gt;addConsoleMessage(makeUnique&lt;Inspector::ConsoleMessage&gt;(JSC::MessageSource::Other, JSC::MessageType::Log, JSC::MessageLevel::Warning, makeString(&quot;Parsing application manifest &quot;_s, m_manifestURL.string(), &quot;: &quot;_s, message)));</span>
 95 }
 96 
 97 URL ApplicationManifestParser::parseStartURL(const JSON::Object&amp; manifest, const URL&amp; documentURL)
 98 {
 99     RefPtr&lt;JSON::Value&gt; value;
100     if (!manifest.getValue(&quot;start_url&quot;, value))
101         return documentURL;
102 
103     String stringValue;
104     if (!value-&gt;asString(stringValue)) {
105         logManifestPropertyNotAString(&quot;start_url&quot;_s);
106         return documentURL;
107     }
108 
109     if (stringValue.isEmpty())
110         return documentURL;
111 
112     URL startURL(m_manifestURL, stringValue);
113     if (!startURL.isValid()) {
114         logManifestPropertyInvalidURL(&quot;start_url&quot;_s);
</pre>
</td>
</tr>
</table>
<center><a href="../applepay/paymentrequest/ApplePayPaymentHandler.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../beacon/NavigatorBeacon.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>
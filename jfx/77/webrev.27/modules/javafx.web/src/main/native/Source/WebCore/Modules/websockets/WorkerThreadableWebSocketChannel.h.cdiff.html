<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/WebCore/Modules/websockets/WorkerThreadableWebSocketChannel.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="WorkerThreadableWebSocketChannel.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../webvr/NavigatorWebVR.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/Modules/websockets/WorkerThreadableWebSocketChannel.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 43,42 ***</span>
  class ThreadableWebSocketChannelClientWrapper;
  class WorkerGlobalScope;
  class WorkerLoaderProxy;
  class WorkerRunLoop;
  
<span class="line-modified">! class WorkerThreadableWebSocketChannel : public RefCounted&lt;WorkerThreadableWebSocketChannel&gt;, public ThreadableWebSocketChannel {</span>
      WTF_MAKE_FAST_ALLOCATED;
  public:
      static Ref&lt;ThreadableWebSocketChannel&gt; create(WorkerGlobalScope&amp; workerGlobalScope, WebSocketChannelClient&amp; client, const String&amp; taskMode, SocketProvider&amp; provider)
      {
          return adoptRef(*new WorkerThreadableWebSocketChannel(workerGlobalScope, client, taskMode, provider));
      }
      virtual ~WorkerThreadableWebSocketChannel();
  
      // ThreadableWebSocketChannel functions.
<span class="line-modified">!     void connect(const URL&amp;, const String&amp; protocol) override;</span>
<span class="line-modified">!     String subprotocol() override;</span>
<span class="line-modified">!     String extensions() override;</span>
<span class="line-modified">!     ThreadableWebSocketChannel::SendResult send(const String&amp; message) override;</span>
<span class="line-modified">!     ThreadableWebSocketChannel::SendResult send(const JSC::ArrayBuffer&amp;, unsigned byteOffset, unsigned byteLength) override;</span>
<span class="line-modified">!     ThreadableWebSocketChannel::SendResult send(Blob&amp;) override;</span>
<span class="line-modified">!     unsigned bufferedAmount() const override;</span>
<span class="line-modified">!     void close(int code, const String&amp; reason) override;</span>
<span class="line-modified">!     void fail(const String&amp; reason) override;</span>
<span class="line-modified">!     void disconnect() override; // Will suppress didClose().</span>
<span class="line-modified">!     void suspend() override;</span>
<span class="line-modified">!     void resume() override;</span>
  
      // Generated by the bridge.  The Peer and its bridge should have identical
      // lifetimes.
      class Peer : public WebSocketChannelClient {
          WTF_MAKE_NONCOPYABLE(Peer); WTF_MAKE_FAST_ALLOCATED;
      public:
          Peer(Ref&lt;ThreadableWebSocketChannelClientWrapper&gt;&amp;&amp;, WorkerLoaderProxy&amp;, ScriptExecutionContext&amp;, const String&amp; taskMode, SocketProvider&amp;);
          ~Peer();
  
<span class="line-modified">!         void connect(const URL&amp;, const String&amp; protocol);</span>
          void send(const String&amp; message);
          void send(const JSC::ArrayBuffer&amp;);
          void send(Blob&amp;);
          void bufferedAmount();
          void close(int code, const String&amp; reason);
<span class="line-new-header">--- 43,42 ---</span>
  class ThreadableWebSocketChannelClientWrapper;
  class WorkerGlobalScope;
  class WorkerLoaderProxy;
  class WorkerRunLoop;
  
<span class="line-modified">! class WorkerThreadableWebSocketChannel final : public RefCounted&lt;WorkerThreadableWebSocketChannel&gt;, public ThreadableWebSocketChannel {</span>
      WTF_MAKE_FAST_ALLOCATED;
  public:
      static Ref&lt;ThreadableWebSocketChannel&gt; create(WorkerGlobalScope&amp; workerGlobalScope, WebSocketChannelClient&amp; client, const String&amp; taskMode, SocketProvider&amp; provider)
      {
          return adoptRef(*new WorkerThreadableWebSocketChannel(workerGlobalScope, client, taskMode, provider));
      }
      virtual ~WorkerThreadableWebSocketChannel();
  
      // ThreadableWebSocketChannel functions.
<span class="line-modified">!     ConnectStatus connect(const URL&amp;, const String&amp; protocol) final;</span>
<span class="line-modified">!     String subprotocol() final;</span>
<span class="line-modified">!     String extensions() final;</span>
<span class="line-modified">!     ThreadableWebSocketChannel::SendResult send(const String&amp; message) final;</span>
<span class="line-modified">!     ThreadableWebSocketChannel::SendResult send(const JSC::ArrayBuffer&amp;, unsigned byteOffset, unsigned byteLength) final;</span>
<span class="line-modified">!     ThreadableWebSocketChannel::SendResult send(Blob&amp;) final;</span>
<span class="line-modified">!     unsigned bufferedAmount() const final;</span>
<span class="line-modified">!     void close(int code, const String&amp; reason) final;</span>
<span class="line-modified">!     void fail(const String&amp; reason) final;</span>
<span class="line-modified">!     void disconnect() final; // Will suppress didClose().</span>
<span class="line-modified">!     void suspend() final;</span>
<span class="line-modified">!     void resume() final;</span>
  
      // Generated by the bridge.  The Peer and its bridge should have identical
      // lifetimes.
      class Peer : public WebSocketChannelClient {
          WTF_MAKE_NONCOPYABLE(Peer); WTF_MAKE_FAST_ALLOCATED;
      public:
          Peer(Ref&lt;ThreadableWebSocketChannelClientWrapper&gt;&amp;&amp;, WorkerLoaderProxy&amp;, ScriptExecutionContext&amp;, const String&amp; taskMode, SocketProvider&amp;);
          ~Peer();
  
<span class="line-modified">!         ConnectStatus connect(const URL&amp;, const String&amp; protocol);</span>
          void send(const String&amp; message);
          void send(const JSC::ArrayBuffer&amp;);
          void send(Blob&amp;);
          void bufferedAmount();
          void close(int code, const String&amp; reason);
</pre>
<center><a href="WorkerThreadableWebSocketChannel.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../webvr/NavigatorWebVR.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>
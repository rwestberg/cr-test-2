<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New modules/javafx.web/src/main/native/Tools/DumpRenderTree/AccessibilityUIElement.cpp</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
  <body>
    <pre>
   1 /*
   2  * Copyright (C) 2008, 2009 Apple Inc. All Rights Reserved.
   3  *
   4  * Redistribution and use in source and binary forms, with or without
   5  * modification, are permitted provided that the following conditions
   6  * are met:
   7  * 1. Redistributions of source code must retain the above copyright
   8  *    notice, this list of conditions and the following disclaimer.
   9  * 2. Redistributions in binary form must reproduce the above copyright
  10  *    notice, this list of conditions and the following disclaimer in the
  11  *    documentation and/or other materials provided with the distribution.
  12  *
  13  * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS&#39;&#39; AND ANY
  14  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  15  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  16  * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR
  17  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  18  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  19  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  20  * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
  21  * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  22  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
  23  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  24  */
  25 
  26 #include &quot;config.h&quot;
  27 
  28 #if HAVE(ACCESSIBILITY)
  29 
  30 #include &quot;AccessibilityUIElement.h&quot;
  31 
  32 #include &lt;JavaScriptCore/JSObjectRef.h&gt;
  33 #include &lt;limits.h&gt;
  34 
  35 // Static Functions
  36 
  37 static inline AccessibilityUIElement* toAXElement(JSObjectRef object)
  38 {
  39     // FIXME: We should ASSERT that it is the right class here.
  40     return static_cast&lt;AccessibilityUIElement*&gt;(JSObjectGetPrivate(object));
  41 }
  42 
  43 static JSValueRef allAttributesCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
  44 {
  45     auto attributes = toAXElement(thisObject)-&gt;allAttributes();
  46     return JSValueMakeString(context, attributes.get());
  47 }
  48 
  49 static JSValueRef attributesOfLinkedUIElementsCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
  50 {
  51     auto linkedUIDescription = toAXElement(thisObject)-&gt;attributesOfLinkedUIElements();
  52     return JSValueMakeString(context, linkedUIDescription.get());
  53 }
  54 
  55 static JSValueRef attributesOfDocumentLinksCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
  56 {
  57     auto linkedUIDescription = toAXElement(thisObject)-&gt;attributesOfDocumentLinks();
  58     return JSValueMakeString(context, linkedUIDescription.get());
  59 }
  60 
  61 static JSValueRef attributesOfChildrenCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
  62 {
  63     auto childrenDescription = toAXElement(thisObject)-&gt;attributesOfChildren();
  64     return JSValueMakeString(context, childrenDescription.get());
  65 }
  66 
  67 static JSValueRef parameterizedAttributeNamesCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
  68 {
  69     auto parameterizedAttributeNames = toAXElement(thisObject)-&gt;parameterizedAttributeNames();
  70     return JSValueMakeString(context, parameterizedAttributeNames.get());
  71 }
  72 
  73 static JSValueRef attributesOfColumnHeadersCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
  74 {
  75     auto attributesOfColumnHeaders = toAXElement(thisObject)-&gt;attributesOfColumnHeaders();
  76     return JSValueMakeString(context, attributesOfColumnHeaders.get());
  77 }
  78 
  79 static JSValueRef attributesOfRowHeadersCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
  80 {
  81     auto attributesOfRowHeaders = toAXElement(thisObject)-&gt;attributesOfRowHeaders();
  82     return JSValueMakeString(context, attributesOfRowHeaders.get());
  83 }
  84 
  85 static JSValueRef attributesOfColumnsCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
  86 {
  87     auto attributesOfColumns = toAXElement(thisObject)-&gt;attributesOfColumns();
  88     return JSValueMakeString(context, attributesOfColumns.get());
  89 }
  90 
  91 static JSValueRef attributesOfRowsCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
  92 {
  93     auto attributesOfRows = toAXElement(thisObject)-&gt;attributesOfRows();
  94     return JSValueMakeString(context, attributesOfRows.get());
  95 }
  96 
  97 static JSValueRef attributesOfVisibleCellsCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
  98 {
  99     auto attributesOfVisibleCells = toAXElement(thisObject)-&gt;attributesOfVisibleCells();
 100     return JSValueMakeString(context, attributesOfVisibleCells.get());
 101 }
 102 
 103 static JSValueRef attributesOfHeaderCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 104 {
 105     auto attributesOfHeader = toAXElement(thisObject)-&gt;attributesOfHeader();
 106     return JSValueMakeString(context, attributesOfHeader.get());
 107 }
 108 
 109 static JSValueRef indexInTableCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 110 {
 111     return JSValueMakeNumber(context, toAXElement(thisObject)-&gt;indexInTable());
 112 }
 113 
 114 static JSValueRef rowIndexRangeCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 115 {
 116     auto rowIndexRange = toAXElement(thisObject)-&gt;rowIndexRange();
 117     return JSValueMakeString(context, rowIndexRange.get());
 118 }
 119 
 120 static JSValueRef columnIndexRangeCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 121 {
 122     auto columnIndexRange = toAXElement(thisObject)-&gt;columnIndexRange();
 123     return JSValueMakeString(context, columnIndexRange.get());
 124 }
 125 
 126 static JSValueRef lineForIndexCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 127 {
 128     int indexNumber = -1;
 129     if (argumentCount == 1)
 130         indexNumber = JSValueToNumber(context, arguments[0], exception);
 131 
 132     return JSValueMakeNumber(context, toAXElement(thisObject)-&gt;lineForIndex(indexNumber));
 133 }
 134 
 135 static JSValueRef rangeForLineCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 136 {
 137     int indexNumber = -1;
 138     if (argumentCount == 1)
 139         indexNumber = JSValueToNumber(context, arguments[0], exception);
 140 
 141     auto rangeLine = toAXElement(thisObject)-&gt;rangeForLine(indexNumber);
 142     return JSValueMakeString(context, rangeLine.get());
 143 }
 144 
 145 static JSValueRef boundsForRangeCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 146 {
 147     unsigned location = UINT_MAX, length = 0;
 148     if (argumentCount == 2) {
 149         location = JSValueToNumber(context, arguments[0], exception);
 150         length = JSValueToNumber(context, arguments[1], exception);
 151     }
 152 
 153     auto boundsDescription = toAXElement(thisObject)-&gt;boundsForRange(location, length);
 154     return JSValueMakeString(context, boundsDescription.get());
 155 }
 156 
 157 static JSValueRef rangeForPositionCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 158 {
 159     int x = 0, y = 0;
 160     if (argumentCount == 2) {
 161         x = JSValueToNumber(context, arguments[0], exception);
 162         y = JSValueToNumber(context, arguments[1], exception);
 163     }
 164 
 165     auto rangeDescription = toAXElement(thisObject)-&gt;rangeForPosition(x, y);
 166     return JSValueMakeString(context, rangeDescription.get());
 167 }
 168 
 169 static JSValueRef stringForRangeCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 170 {
 171     unsigned location = UINT_MAX, length = 0;
 172     if (argumentCount == 2) {
 173         location = JSValueToNumber(context, arguments[0], exception);
 174         length = JSValueToNumber(context, arguments[1], exception);
 175     }
 176 
 177     auto stringDescription = toAXElement(thisObject)-&gt;stringForRange(location, length);
 178     return JSValueMakeString(context, stringDescription.get());
 179 }
 180 
 181 static JSValueRef attributedStringForRangeCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 182 {
 183     unsigned location = UINT_MAX, length = 0;
 184     if (argumentCount == 2) {
 185         location = JSValueToNumber(context, arguments[0], exception);
 186         length = JSValueToNumber(context, arguments[1], exception);
 187     }
 188 
 189     auto stringDescription = toAXElement(thisObject)-&gt;attributedStringForRange(location, length);
 190     return JSValueMakeString(context, stringDescription.get());
 191 }
 192 
 193 static JSValueRef attributedStringRangeIsMisspelledCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 194 {
 195     unsigned location = UINT_MAX, length = 0;
 196     if (argumentCount == 2) {
 197         location = JSValueToNumber(context, arguments[0], exception);
 198         length = JSValueToNumber(context, arguments[1], exception);
 199     }
 200 
 201     return JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;attributedStringRangeIsMisspelled(location, length));
 202 }
 203 
 204 static JSValueRef uiElementCountForSearchPredicateCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 205 {
 206     AccessibilityUIElement* startElement = nullptr;
 207     bool isDirectionNext = true;
 208     JSValueRef searchKey = nullptr;
 209     JSRetainPtr&lt;JSStringRef&gt; searchText = nullptr;
 210     bool visibleOnly = false;
 211     bool immediateDescendantsOnly = false;
 212     if (argumentCount &gt;= 5 &amp;&amp; argumentCount &lt;= 6) {
 213         if (JSValueIsObject(context, arguments[0]))
 214             startElement = toAXElement(JSValueToObject(context, arguments[0], exception));
 215 
 216         isDirectionNext = JSValueToBoolean(context, arguments[1]);
 217 
 218         searchKey = arguments[2];
 219 
 220         if (JSValueIsString(context, arguments[3]))
 221             searchText = adopt(JSValueToStringCopy(context, arguments[3], exception));
 222 
 223         visibleOnly = JSValueToBoolean(context, arguments[4]);
 224 
 225         if (argumentCount == 6)
 226             immediateDescendantsOnly = JSValueToBoolean(context, arguments[5]);
 227     }
 228 
 229     return JSValueMakeNumber(context, toAXElement(thisObject)-&gt;uiElementCountForSearchPredicate(context, startElement, isDirectionNext, searchKey, searchText.get(), visibleOnly, immediateDescendantsOnly));
 230 }
 231 
 232 static JSValueRef uiElementForSearchPredicateCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 233 {
 234     AccessibilityUIElement* startElement = nullptr;
 235     bool isDirectionNext = true;
 236     JSValueRef searchKey = nullptr;
 237     JSRetainPtr&lt;JSStringRef&gt; searchText = nullptr;
 238     bool visibleOnly = false;
 239     bool immediateDescendantsOnly = false;
 240     if (argumentCount &gt;= 5 &amp;&amp; argumentCount &lt;= 6) {
 241         if (JSValueIsObject(context, arguments[0]))
 242             startElement = toAXElement(JSValueToObject(context, arguments[0], exception));
 243 
 244         isDirectionNext = JSValueToBoolean(context, arguments[1]);
 245 
 246         searchKey = arguments[2];
 247 
 248         if (JSValueIsString(context, arguments[3]))
 249             searchText = adopt(JSValueToStringCopy(context, arguments[3], exception));
 250 
 251         visibleOnly = JSValueToBoolean(context, arguments[4]);
 252 
 253         if (argumentCount == 6)
 254             immediateDescendantsOnly = JSValueToBoolean(context, arguments[5]);
 255     }
 256 
 257     return AccessibilityUIElement::makeJSAccessibilityUIElement(context, toAXElement(thisObject)-&gt;uiElementForSearchPredicate(context, startElement, isDirectionNext, searchKey, searchText.get(), visibleOnly, immediateDescendantsOnly));
 258 }
 259 
 260 static JSValueRef selectTextWithCriteriaCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 261 {
 262     if (argumentCount &lt; 2 || argumentCount &gt; 4)
 263         return JSValueMakeUndefined(context);
 264 
 265     auto ambiguityResolution = adopt(JSValueToStringCopy(context, arguments[0], exception));
 266     JSValueRef searchStrings = arguments[1];
 267     JSStringRef replacementString = nullptr;
 268     if (argumentCount == 3)
 269         replacementString = JSValueToStringCopy(context, arguments[2], exception);
 270     JSStringRef activityString = nullptr;
 271     if (argumentCount == 4)
 272         activityString = JSValueToStringCopy(context, arguments[3], exception);
 273 
 274     auto result = toAXElement(thisObject)-&gt;selectTextWithCriteria(context, ambiguityResolution.get(), searchStrings, replacementString, activityString);
 275     if (replacementString)
 276         JSStringRelease(replacementString);
 277     if (activityString)
 278         JSStringRelease(activityString);
 279     return JSValueMakeString(context, result.get());
 280 }
 281 
 282 #if PLATFORM(MAC)
 283 static JSValueRef searchTextWithCriteriaCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 284 {
 285     if (argumentCount &lt; 1)
 286         return JSValueMakeUndefined(context);
 287 
 288     JSValueRef searchStrings = arguments[0];
 289     JSRetainPtr&lt;JSStringRef&gt; startFrom;
 290     if (argumentCount &gt; 1)
 291         startFrom = adopt(JSValueToStringCopy(context, arguments[1], exception));
 292     JSRetainPtr&lt;JSStringRef&gt; direction;
 293     if (argumentCount &gt; 2)
 294         direction = adopt(JSValueToStringCopy(context, arguments[2], exception));
 295 
 296     return toAXElement(thisObject)-&gt;searchTextWithCriteria(context, searchStrings, startFrom.get(), direction.get());
 297 }
 298 #endif
 299 
 300 static JSValueRef indexOfChildCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 301 {
 302     if (argumentCount != 1)
 303         return 0;
 304 
 305     JSObjectRef otherElement = JSValueToObject(context, arguments[0], exception);
 306     AccessibilityUIElement* childElement = toAXElement(otherElement);
 307     return JSValueMakeNumber(context, (double)toAXElement(thisObject)-&gt;indexOfChild(childElement));
 308 }
 309 
 310 #if PLATFORM(IOS_FAMILY)
 311 
 312 static JSValueRef headerElementAtIndexCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 313 {
 314     if (argumentCount != 1)
 315         return 0;
 316 
 317     unsigned index = JSValueToNumber(context, arguments[0], exception);
 318     return AccessibilityUIElement::makeJSAccessibilityUIElement(context, toAXElement(thisObject)-&gt;headerElementAtIndex(index));
 319 }
 320 
 321 static JSValueRef linkedElementCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 322 {
 323     return AccessibilityUIElement::makeJSAccessibilityUIElement(context, toAXElement(thisObject)-&gt;linkedElement());
 324 }
 325 
 326 static JSValueRef elementsForRangeCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 327 {
 328     if (argumentCount != 2)
 329         return 0;
 330 
 331     unsigned location = JSValueToNumber(context, arguments[0], exception);
 332     unsigned length = JSValueToNumber(context, arguments[1], exception);
 333 
 334     Vector&lt;AccessibilityUIElement&gt; elements;
 335     toAXElement(thisObject)-&gt;elementsForRange(location, length, elements);
 336 
 337     JSValueRef arrayResult = JSObjectMakeArray(context, 0, 0, 0);
 338     JSObjectRef arrayObj = JSValueToObject(context, arrayResult, 0);
 339     unsigned elementsSize = elements.size();
 340     for (unsigned k = 0; k &lt; elementsSize; ++k)
 341         JSObjectSetPropertyAtIndex(context, arrayObj, k, AccessibilityUIElement::makeJSAccessibilityUIElement(context, elements[k]), 0);
 342 
 343     return arrayResult;
 344 }
 345 
 346 static JSValueRef increaseTextSelectionCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 347 {
 348     toAXElement(thisObject)-&gt;increaseTextSelection();
 349     return JSValueMakeUndefined(context);
 350 }
 351 
 352 static JSValueRef scrollPageUpCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 353 {
 354     return JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;scrollPageUp());
 355 }
 356 
 357 static JSValueRef scrollPageDownCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 358 {
 359     return JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;scrollPageDown());
 360 }
 361 
 362 static JSValueRef scrollPageLeftCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 363 {
 364     return JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;scrollPageLeft());
 365 }
 366 
 367 static JSValueRef scrollPageRightCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 368 {
 369     return JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;scrollPageRight());
 370 }
 371 
 372 static JSValueRef decreaseTextSelectionCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 373 {
 374     toAXElement(thisObject)-&gt;decreaseTextSelection();
 375     return JSValueMakeUndefined(context);
 376 }
 377 
 378 static JSValueRef assistiveTechnologySimulatedFocusCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 379 {
 380     toAXElement(thisObject)-&gt;assistiveTechnologySimulatedFocus();
 381     return JSValueMakeUndefined(context);
 382 }
 383 
 384 static JSValueRef fieldsetAncestorElementCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 385 {
 386     return AccessibilityUIElement::makeJSAccessibilityUIElement(context, toAXElement(thisObject)-&gt;fieldsetAncestorElement());
 387 }
 388 
 389 static JSValueRef attributedStringForElementCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 390 {
 391     auto stringDescription = toAXElement(thisObject)-&gt;attributedStringForElement();
 392     return JSValueMakeString(context, stringDescription.get());
 393 }
 394 
 395 #endif
 396 
 397 static JSValueRef childAtIndexCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 398 {
 399     int indexNumber = -1;
 400     if (argumentCount == 1)
 401         indexNumber = JSValueToNumber(context, arguments[0], exception);
 402 
 403     return AccessibilityUIElement::makeJSAccessibilityUIElement(context, toAXElement(thisObject)-&gt;getChildAtIndex(indexNumber));
 404 }
 405 
 406 static JSValueRef selectedChildAtIndexCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 407 {
 408     int indexNumber = -1;
 409     if (argumentCount == 1)
 410         indexNumber = JSValueToNumber(context, arguments[0], exception);
 411 
 412     return AccessibilityUIElement::makeJSAccessibilityUIElement(context, toAXElement(thisObject)-&gt;selectedChildAtIndex(indexNumber));
 413 }
 414 
 415 static JSValueRef linkedUIElementAtIndexCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 416 {
 417     int indexNumber = -1;
 418     if (argumentCount == 1)
 419         indexNumber = JSValueToNumber(context, arguments[0], exception);
 420 
 421     return AccessibilityUIElement::makeJSAccessibilityUIElement(context, toAXElement(thisObject)-&gt;linkedUIElementAtIndex(indexNumber));
 422 }
 423 
 424 static JSValueRef disclosedRowAtIndexCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 425 {
 426     int indexNumber = 0;
 427     if (argumentCount == 1)
 428         indexNumber = JSValueToNumber(context, arguments[0], exception);
 429 
 430     return AccessibilityUIElement::makeJSAccessibilityUIElement(context, toAXElement(thisObject)-&gt;disclosedRowAtIndex(indexNumber));
 431 }
 432 
 433 static JSValueRef ariaOwnsElementAtIndexCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 434 {
 435     int indexNumber = 0;
 436     if (argumentCount == 1)
 437         indexNumber = JSValueToNumber(context, arguments[0], exception);
 438 
 439     return AccessibilityUIElement::makeJSAccessibilityUIElement(context, toAXElement(thisObject)-&gt;ariaOwnsElementAtIndex(indexNumber));
 440 }
 441 
 442 static JSValueRef ariaFlowToElementAtIndexCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 443 {
 444     int indexNumber = 0;
 445     if (argumentCount == 1)
 446         indexNumber = JSValueToNumber(context, arguments[0], exception);
 447 
 448     return AccessibilityUIElement::makeJSAccessibilityUIElement(context, toAXElement(thisObject)-&gt;ariaFlowToElementAtIndex(indexNumber));
 449 }
 450 
 451 static JSValueRef ariaControlsElementAtIndexCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 452 {
 453     int indexNumber = 0;
 454     if (argumentCount == 1)
 455         indexNumber = JSValueToNumber(context, arguments[0], exception);
 456 
 457     return AccessibilityUIElement::makeJSAccessibilityUIElement(context, toAXElement(thisObject)-&gt;ariaControlsElementAtIndex(indexNumber));
 458 }
 459 
 460 static JSValueRef selectedRowAtIndexCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 461 {
 462     int indexNumber = 0;
 463     if (argumentCount == 1)
 464         indexNumber = JSValueToNumber(context, arguments[0], exception);
 465 
 466     return AccessibilityUIElement::makeJSAccessibilityUIElement(context, toAXElement(thisObject)-&gt;selectedRowAtIndex(indexNumber));
 467 }
 468 
 469 static JSValueRef rowAtIndexCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 470 {
 471     int indexNumber = 0;
 472     if (argumentCount == 1)
 473         indexNumber = JSValueToNumber(context, arguments[0], exception);
 474 
 475     return AccessibilityUIElement::makeJSAccessibilityUIElement(context, toAXElement(thisObject)-&gt;rowAtIndex(indexNumber));
 476 }
 477 
 478 static JSValueRef isEqualCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 479 {
 480     JSObjectRef otherElement = 0;
 481     if (argumentCount == 1)
 482         otherElement = JSValueToObject(context, arguments[0], exception);
 483     else
 484         return JSValueMakeBoolean(context, false);
 485 
 486     return JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;isEqual(toAXElement(otherElement)));
 487 }
 488 
 489 static JSValueRef setValueCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 490 {
 491     JSRetainPtr&lt;JSStringRef&gt; valueText = 0;
 492     if (argumentCount == 1) {
 493         if (JSValueIsString(context, arguments[0]))
 494             valueText = adopt(JSValueToStringCopy(context, arguments[0], exception));
 495     }
 496 
 497     toAXElement(thisObject)-&gt;setValue(valueText.get());
 498 
 499     return JSValueMakeUndefined(context);
 500 }
 501 
 502 static JSValueRef setSelectedChildCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 503 {
 504     JSObjectRef element = 0;
 505     if (argumentCount == 1)
 506         element = JSValueToObject(context, arguments[0], exception);
 507 
 508     toAXElement(thisObject)-&gt;setSelectedChild(toAXElement(element));
 509 
 510     return JSValueMakeUndefined(context);
 511 }
 512 
 513 static JSValueRef setSelectedChildAtIndexCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 514 {
 515     if (argumentCount == 1) {
 516         unsigned indexNumber = JSValueToNumber(context, arguments[0], exception);
 517         toAXElement(thisObject)-&gt;setSelectedChildAtIndex(indexNumber);
 518     }
 519     return JSValueMakeUndefined(context);
 520 }
 521 
 522 static JSValueRef removeSelectionAtIndexCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 523 {
 524     if (argumentCount == 1) {
 525         unsigned indexNumber = JSValueToNumber(context, arguments[0], exception);
 526         toAXElement(thisObject)-&gt;removeSelectionAtIndex(indexNumber);
 527     }
 528     return JSValueMakeUndefined(context);
 529 }
 530 
 531 static JSValueRef elementAtPointCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 532 {
 533     int x = 0;
 534     int y = 0;
 535     if (argumentCount == 2) {
 536         x = JSValueToNumber(context, arguments[0], exception);
 537         y = JSValueToNumber(context, arguments[1], exception);
 538     }
 539 
 540     return AccessibilityUIElement::makeJSAccessibilityUIElement(context, toAXElement(thisObject)-&gt;elementAtPoint(x, y));
 541 }
 542 
 543 static JSValueRef isAttributeSupportedCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 544 {
 545     JSStringRef attribute = 0;
 546     if (argumentCount == 1)
 547         attribute = JSValueToStringCopy(context, arguments[0], exception);
 548     JSValueRef result = JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;isAttributeSupported(attribute));
 549     if (attribute)
 550         JSStringRelease(attribute);
 551     return result;
 552 }
 553 
 554 static JSValueRef isAttributeSettableCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 555 {
 556     JSStringRef attribute = 0;
 557     if (argumentCount == 1)
 558         attribute = JSValueToStringCopy(context, arguments[0], exception);
 559     JSValueRef result = JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;isAttributeSettable(attribute));
 560     if (attribute)
 561         JSStringRelease(attribute);
 562     return result;
 563 }
 564 
 565 static JSValueRef isPressActionSupportedCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 566 {
 567     return JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;isPressActionSupported());
 568 }
 569 
 570 static JSValueRef isIncrementActionSupportedCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 571 {
 572     return JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;isIncrementActionSupported());
 573 }
 574 
 575 static JSValueRef isDecrementActionSupportedCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 576 {
 577     return JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;isDecrementActionSupported());
 578 }
 579 
 580 static JSValueRef boolAttributeValueCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 581 {
 582     JSStringRef attribute = 0;
 583     if (argumentCount == 1)
 584         attribute = JSValueToStringCopy(context, arguments[0], exception);
 585     bool val = toAXElement(thisObject)-&gt;boolAttributeValue(attribute);
 586     JSValueRef result = JSValueMakeBoolean(context, val);
 587     if (attribute)
 588         JSStringRelease(attribute);
 589     return result;
 590 }
 591 
 592 static JSValueRef setBoolAttributeValueCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 593 {
 594     JSStringRef attribute = nullptr;
 595     bool value = false;
 596     if (argumentCount == 2) {
 597         attribute = JSValueToStringCopy(context, arguments[0], exception);
 598         value = JSValueToBoolean(context, arguments[1]);
 599     }
 600     toAXElement(thisObject)-&gt;setBoolAttributeValue(attribute, value);
 601     if (attribute)
 602         JSStringRelease(attribute);
 603     return JSValueMakeUndefined(context);
 604 }
 605 
 606 static JSValueRef stringAttributeValueCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 607 {
 608     JSStringRef attribute = 0;
 609     if (argumentCount == 1)
 610         attribute = JSValueToStringCopy(context, arguments[0], exception);
 611     auto stringAttributeValue = toAXElement(thisObject)-&gt;stringAttributeValue(attribute);
 612     JSValueRef result = JSValueMakeString(context, stringAttributeValue.get());
 613     if (attribute)
 614         JSStringRelease(attribute);
 615     return result;
 616 }
 617 
 618 static JSValueRef convertElementsToObjectArray(JSContextRef context, Vector&lt;AccessibilityUIElement&gt;&amp; elements, JSValueRef* exception)
 619 {
 620     JSValueRef arrayResult = JSObjectMakeArray(context, 0, 0, 0);
 621     JSObjectRef arrayObj = JSValueToObject(context, arrayResult, 0);
 622 
 623     size_t elementCount = elements.size();
 624     for (size_t i = 0; i &lt; elementCount; ++i)
 625         JSObjectSetPropertyAtIndex(context, arrayObj, i, AccessibilityUIElement::makeJSAccessibilityUIElement(context, elements[i]), 0);
 626 
 627     return arrayResult;
 628 }
 629 
 630 static JSValueRef columnHeadersCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 631 {
 632     Vector&lt;AccessibilityUIElement&gt; elements;
 633     toAXElement(thisObject)-&gt;columnHeaders(elements);
 634     return convertElementsToObjectArray(context, elements, exception);
 635 }
 636 
 637 static JSValueRef rowHeadersCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 638 {
 639     Vector&lt;AccessibilityUIElement&gt; elements;
 640     toAXElement(thisObject)-&gt;rowHeaders(elements);
 641     return convertElementsToObjectArray(context, elements, exception);
 642 }
 643 
 644 static JSValueRef uiElementArrayAttributeValueCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 645 {
 646     if (argumentCount != 1)
 647         return JSValueMakeUndefined(context);
 648 
 649     auto attribute = adopt(JSValueToStringCopy(context, arguments[0], exception));
 650 
 651     Vector&lt;AccessibilityUIElement&gt; elements;
 652     toAXElement(thisObject)-&gt;uiElementArrayAttributeValue(attribute.get(), elements);
 653     return convertElementsToObjectArray(context, elements, exception);
 654 }
 655 
 656 static JSValueRef uiElementAttributeValueCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 657 {
 658     JSRetainPtr&lt;JSStringRef&gt; attribute;
 659     if (argumentCount == 1)
 660         attribute = adopt(JSValueToStringCopy(context, arguments[0], exception));
 661 
 662     return AccessibilityUIElement::makeJSAccessibilityUIElement(context, toAXElement(thisObject)-&gt;uiElementAttributeValue(attribute.get()));
 663 }
 664 
 665 static JSValueRef numberAttributeValueCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 666 {
 667     JSStringRef attribute = 0;
 668     if (argumentCount == 1)
 669         attribute = JSValueToStringCopy(context, arguments[0], exception);
 670     double val = toAXElement(thisObject)-&gt;numberAttributeValue(attribute);
 671     JSValueRef result = JSValueMakeNumber(context, val);
 672     if (attribute)
 673         JSStringRelease(attribute);
 674     return result;
 675 }
 676 
 677 static JSValueRef cellForColumnAndRowCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 678 {
 679     unsigned column = 0, row = 0;
 680     if (argumentCount == 2) {
 681         column = JSValueToNumber(context, arguments[0], exception);
 682         row = JSValueToNumber(context, arguments[1], exception);
 683     }
 684 
 685     return AccessibilityUIElement::makeJSAccessibilityUIElement(context, toAXElement(thisObject)-&gt;cellForColumnAndRow(column, row));
 686 }
 687 
 688 static JSValueRef titleUIElementCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 689 {
 690     return AccessibilityUIElement::makeJSAccessibilityUIElement(context, toAXElement(thisObject)-&gt;titleUIElement());
 691 }
 692 
 693 static JSValueRef parentElementCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 694 {
 695     return AccessibilityUIElement::makeJSAccessibilityUIElement(context, toAXElement(thisObject)-&gt;parentElement());
 696 }
 697 
 698 static JSValueRef disclosedByRowCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 699 {
 700     return AccessibilityUIElement::makeJSAccessibilityUIElement(context, toAXElement(thisObject)-&gt;disclosedByRow());
 701 }
 702 
 703 static JSValueRef setSelectedTextRangeCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 704 {
 705     unsigned location = UINT_MAX, length = 0;
 706     if (argumentCount == 2) {
 707         location = JSValueToNumber(context, arguments[0], exception);
 708         length = JSValueToNumber(context, arguments[1], exception);
 709     }
 710 
 711     toAXElement(thisObject)-&gt;setSelectedTextRange(location, length);
 712     return JSValueMakeUndefined(context);
 713 }
 714 
 715 static JSValueRef incrementCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 716 {
 717     toAXElement(thisObject)-&gt;increment();
 718     return JSValueMakeUndefined(context);
 719 }
 720 
 721 static JSValueRef decrementCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 722 {
 723     toAXElement(thisObject)-&gt;decrement();
 724     return JSValueMakeUndefined(context);
 725 }
 726 
 727 static JSValueRef showMenuCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 728 {
 729     toAXElement(thisObject)-&gt;showMenu();
 730     return JSValueMakeUndefined(context);
 731 }
 732 
 733 static JSValueRef pressCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 734 {
 735     toAXElement(thisObject)-&gt;press();
 736     return JSValueMakeUndefined(context);
 737 }
 738 
 739 static JSValueRef scrollToMakeVisibleWithSubFocusCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 740 {
 741     unsigned x = 0;
 742     unsigned y = 0;
 743     unsigned width = 0;
 744     unsigned height = 0;
 745     if (argumentCount == 4) {
 746         x = JSValueToNumber(context, arguments[0], exception);
 747         y = JSValueToNumber(context, arguments[1], exception);
 748         width = JSValueToNumber(context, arguments[2], exception);
 749         height = JSValueToNumber(context, arguments[3], exception);
 750     }
 751 
 752     toAXElement(thisObject)-&gt;scrollToMakeVisibleWithSubFocus(x, y, width, height);
 753     return JSValueMakeUndefined(context);
 754 }
 755 
 756 static JSValueRef scrollToGlobalPointCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 757 {
 758     unsigned x = 0;
 759     unsigned y = 0;
 760     if (argumentCount == 2) {
 761         x = JSValueToNumber(context, arguments[0], exception);
 762         y = JSValueToNumber(context, arguments[1], exception);
 763     }
 764 
 765     toAXElement(thisObject)-&gt;scrollToGlobalPoint(x, y);
 766     return JSValueMakeUndefined(context);
 767 }
 768 
 769 static JSValueRef scrollToMakeVisibleCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 770 {
 771     toAXElement(thisObject)-&gt;scrollToMakeVisible();
 772     return JSValueMakeUndefined(context);
 773 }
 774 
 775 static JSValueRef takeFocusCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 776 {
 777     toAXElement(thisObject)-&gt;takeFocus();
 778     return JSValueMakeUndefined(context);
 779 }
 780 
 781 static JSValueRef takeSelectionCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 782 {
 783     toAXElement(thisObject)-&gt;takeSelection();
 784     return JSValueMakeUndefined(context);
 785 }
 786 
 787 static JSValueRef addSelectionCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 788 {
 789     toAXElement(thisObject)-&gt;addSelection();
 790     return JSValueMakeUndefined(context);
 791 }
 792 
 793 static JSValueRef removeSelectionCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 794 {
 795     toAXElement(thisObject)-&gt;removeSelection();
 796     return JSValueMakeUndefined(context);
 797 }
 798 
 799 static JSValueRef lineTextMarkerRangeForTextMarkerCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 800 {
 801     AccessibilityTextMarker* textMarker = nullptr;
 802     if (argumentCount == 1)
 803         textMarker = toTextMarker(JSValueToObject(context, arguments[0], exception));
 804     return AccessibilityTextMarkerRange::makeJSAccessibilityTextMarkerRange(context, toAXElement(thisObject)-&gt;lineTextMarkerRangeForTextMarker(textMarker));
 805 }
 806 
 807 static JSValueRef textMarkerRangeForElementCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 808 {
 809     AccessibilityUIElement* uiElement = 0;
 810     if (argumentCount == 1)
 811         uiElement = toAXElement(JSValueToObject(context, arguments[0], exception));
 812 
 813     return AccessibilityTextMarkerRange::makeJSAccessibilityTextMarkerRange(context, toAXElement(thisObject)-&gt;textMarkerRangeForElement(uiElement));
 814 }
 815 
 816 static JSValueRef selectedTextMarkerRangeCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 817 {
 818     return AccessibilityTextMarkerRange::makeJSAccessibilityTextMarkerRange(context, toAXElement(thisObject)-&gt;selectedTextMarkerRange());
 819 }
 820 
 821 static JSValueRef resetSelectedTextMarkerRangeCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 822 {
 823     toAXElement(thisObject)-&gt;resetSelectedTextMarkerRange();
 824     return JSValueMakeUndefined(context);
 825 }
 826 
 827 static JSValueRef replaceTextInRangeCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 828 {
 829     if (argumentCount &lt; 3)
 830         return JSValueMakeUndefined(context);
 831 
 832     auto text = adopt(JSValueToStringCopy(context, arguments[0], exception));
 833     int position = JSValueToNumber(context, arguments[1], exception);
 834     int length = JSValueToNumber(context, arguments[2], exception);
 835 
 836     return JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;replaceTextInRange(text.get(), position, length));
 837 }
 838 
 839 static JSValueRef insertTextCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 840 {
 841     if (!argumentCount)
 842         return JSValueMakeUndefined(context);
 843 
 844     auto text = adopt(JSValueToStringCopy(context, arguments[0], exception));
 845     return JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;insertText(text.get()));
 846 }
 847 
 848 static JSValueRef attributedStringForTextMarkerRangeContainsAttributeCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 849 {
 850     AccessibilityTextMarkerRange* markerRange = 0;
 851     JSStringRef attribute = 0;
 852     if (argumentCount == 2) {
 853         attribute = JSValueToStringCopy(context, arguments[0], exception);
 854         markerRange = toTextMarkerRange(JSValueToObject(context, arguments[1], exception));
 855     }
 856 
 857     JSValueRef result = JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;attributedStringForTextMarkerRangeContainsAttribute(attribute, markerRange));
 858     if (attribute)
 859         JSStringRelease(attribute);
 860 
 861     return result;
 862 }
 863 
 864 static JSValueRef indexForTextMarkerCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 865 {
 866     AccessibilityTextMarker* marker = 0;
 867     if (argumentCount == 1)
 868         marker = toTextMarker(JSValueToObject(context, arguments[0], exception));
 869 
 870     return JSValueMakeNumber(context, toAXElement(thisObject)-&gt;indexForTextMarker(marker));
 871 }
 872 
 873 static JSValueRef isTextMarkerValidCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 874 {
 875     AccessibilityTextMarker* marker = 0;
 876     if (argumentCount == 1)
 877         marker = toTextMarker(JSValueToObject(context, arguments[0], exception));
 878 
 879     return JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;isTextMarkerValid(marker));
 880 }
 881 
 882 static JSValueRef textMarkerForIndexCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 883 {
 884     int textIndex = 0;
 885     if (argumentCount == 1)
 886         textIndex = JSValueToNumber(context, arguments[0], exception);
 887 
 888     return AccessibilityTextMarker::makeJSAccessibilityTextMarker(context, toAXElement(thisObject)-&gt;textMarkerForIndex(textIndex));
 889 }
 890 
 891 static JSValueRef textMarkerRangeLengthCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 892 {
 893     AccessibilityTextMarkerRange* range = 0;
 894     if (argumentCount == 1)
 895         range = toTextMarkerRange(JSValueToObject(context, arguments[0], exception));
 896 
 897     return JSValueMakeNumber(context, (int)toAXElement(thisObject)-&gt;textMarkerRangeLength(range));
 898 }
 899 
 900 static JSValueRef nextTextMarkerCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 901 {
 902     AccessibilityTextMarker* marker = 0;
 903     if (argumentCount == 1)
 904         marker = toTextMarker(JSValueToObject(context, arguments[0], exception));
 905 
 906     return AccessibilityTextMarker::makeJSAccessibilityTextMarker(context, toAXElement(thisObject)-&gt;nextTextMarker(marker));
 907 }
 908 
 909 static JSValueRef previousTextMarkerCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 910 {
 911     AccessibilityTextMarker* marker = 0;
 912     if (argumentCount == 1)
 913         marker = toTextMarker(JSValueToObject(context, arguments[0], exception));
 914 
 915     return AccessibilityTextMarker::makeJSAccessibilityTextMarker(context, toAXElement(thisObject)-&gt;previousTextMarker(marker));
 916 }
 917 
 918 static JSValueRef stringForTextMarkerRangeCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 919 {
 920     AccessibilityTextMarkerRange* markerRange = 0;
 921     if (argumentCount == 1)
 922         markerRange = toTextMarkerRange(JSValueToObject(context, arguments[0], exception));
 923 
 924     auto markerRangeString = toAXElement(thisObject)-&gt;stringForTextMarkerRange(markerRange);
 925     return JSValueMakeString(context, markerRangeString.get());
 926 }
 927 
 928 static JSValueRef attributedStringForTextMarkerRangeCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 929 {
 930     AccessibilityTextMarkerRange* markerRange = 0;
 931     if (argumentCount == 1)
 932         markerRange = toTextMarkerRange(JSValueToObject(context, arguments[0], exception));
 933 
 934     auto markerRangeString = toAXElement(thisObject)-&gt;attributedStringForTextMarkerRange(markerRange);
 935     return JSValueMakeString(context, markerRangeString.get());
 936 }
 937 
 938 static JSValueRef attributedStringForTextMarkerRangeWithOptionsCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 939 {
 940     AccessibilityTextMarkerRange* markerRange = nullptr;
 941     bool includeSpellCheck = false;
 942     if (argumentCount == 2) {
 943         markerRange = toTextMarkerRange(JSValueToObject(context, arguments[0], exception));
 944         includeSpellCheck = JSValueToBoolean(context, arguments[1]);
 945     }
 946 
 947     auto markerRangeString = toAXElement(thisObject)-&gt;attributedStringForTextMarkerRangeWithOptions(markerRange, includeSpellCheck);
 948     return JSValueMakeString(context, markerRangeString.get());
 949 }
 950 
 951 static JSValueRef endTextMarkerForBoundsCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 952 {
 953     int x = 0;
 954     int y = 0;
 955     int width = 0;
 956     int height = 0;
 957     if (argumentCount == 4) {
 958         x = JSValueToNumber(context, arguments[0], exception);
 959         y = JSValueToNumber(context, arguments[1], exception);
 960         width = JSValueToNumber(context, arguments[2], exception);
 961         height = JSValueToNumber(context, arguments[3], exception);
 962     }
 963 
 964     return AccessibilityTextMarker::makeJSAccessibilityTextMarker(context, toAXElement(thisObject)-&gt;endTextMarkerForBounds(x, y, width, height));
 965 }
 966 
 967 static JSValueRef startTextMarkerForBoundsCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 968 {
 969     int x = 0;
 970     int y = 0;
 971     int width = 0;
 972     int height = 0;
 973     if (argumentCount == 4) {
 974         x = JSValueToNumber(context, arguments[0], exception);
 975         y = JSValueToNumber(context, arguments[1], exception);
 976         width = JSValueToNumber(context, arguments[2], exception);
 977         height = JSValueToNumber(context, arguments[3], exception);
 978     }
 979 
 980     return AccessibilityTextMarker::makeJSAccessibilityTextMarker(context, toAXElement(thisObject)-&gt;startTextMarkerForBounds(x, y, width, height));
 981 }
 982 
 983 static JSValueRef textMarkerForPointCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 984 {
 985     int x = 0;
 986     int y = 0;
 987     if (argumentCount == 2) {
 988         x = JSValueToNumber(context, arguments[0], exception);
 989         y = JSValueToNumber(context, arguments[1], exception);
 990     }
 991 
 992     return AccessibilityTextMarker::makeJSAccessibilityTextMarker(context, toAXElement(thisObject)-&gt;textMarkerForPoint(x, y));
 993 }
 994 
 995 static JSValueRef textMarkerRangeForMarkersCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
 996 {
 997     AccessibilityTextMarker* startMarker = nullptr;
 998     AccessibilityTextMarker* endMarker = nullptr;
 999     if (argumentCount == 2) {
1000         startMarker = toTextMarker(JSValueToObject(context, arguments[0], exception));
1001         endMarker = toTextMarker(JSValueToObject(context, arguments[1], exception));
1002     }
1003 
1004     return AccessibilityTextMarkerRange::makeJSAccessibilityTextMarkerRange(context, toAXElement(thisObject)-&gt;textMarkerRangeForMarkers(startMarker, endMarker));
1005 }
1006 
1007 static JSValueRef startTextMarkerForTextMarkerRangeCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
1008 {
1009     AccessibilityTextMarkerRange* markerRange = 0;
1010     if (argumentCount == 1)
1011         markerRange = toTextMarkerRange(JSValueToObject(context, arguments[0], exception));
1012 
1013     return AccessibilityTextMarker::makeJSAccessibilityTextMarker(context, toAXElement(thisObject)-&gt;startTextMarkerForTextMarkerRange(markerRange));
1014 }
1015 
1016 static JSValueRef endTextMarkerForTextMarkerRangeCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
1017 {
1018     AccessibilityTextMarkerRange* markerRange = 0;
1019     if (argumentCount == 1)
1020         markerRange = toTextMarkerRange(JSValueToObject(context, arguments[0], exception));
1021 
1022     return AccessibilityTextMarker::makeJSAccessibilityTextMarker(context, toAXElement(thisObject)-&gt;endTextMarkerForTextMarkerRange(markerRange));
1023 }
1024 
1025 static JSValueRef accessibilityElementForTextMarkerCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
1026 {
1027     AccessibilityTextMarker* marker = nullptr;
1028     if (argumentCount == 1)
1029         marker = toTextMarker(JSValueToObject(context, arguments[0], exception));
1030 
1031     return AccessibilityUIElement::makeJSAccessibilityUIElement(context, toAXElement(thisObject)-&gt;accessibilityElementForTextMarker(marker));
1032 }
1033 
1034 static JSValueRef startTextMarkerCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef, JSValueRef*)
1035 {
1036     return AccessibilityTextMarker::makeJSAccessibilityTextMarker(context, toAXElement(thisObject)-&gt;startTextMarker());
1037 }
1038 
1039 static JSValueRef endTextMarkerCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef, JSValueRef*)
1040 {
1041     return AccessibilityTextMarker::makeJSAccessibilityTextMarker(context, toAXElement(thisObject)-&gt;endTextMarker());
1042 }
1043 
1044 static JSValueRef leftWordTextMarkerRangeForTextMarkerCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
1045 {
1046     AccessibilityTextMarker* marker = nullptr;
1047     if (argumentCount == 1)
1048         marker = toTextMarker(JSValueToObject(context, arguments[0], exception));
1049 
1050     return AccessibilityTextMarkerRange::makeJSAccessibilityTextMarkerRange(context, toAXElement(thisObject)-&gt;leftWordTextMarkerRangeForTextMarker(marker));
1051 }
1052 
1053 static JSValueRef rightWordTextMarkerRangeForTextMarkerCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
1054 {
1055     AccessibilityTextMarker* marker = nullptr;
1056     if (argumentCount == 1)
1057         marker = toTextMarker(JSValueToObject(context, arguments[0], exception));
1058 
1059     return AccessibilityTextMarkerRange::makeJSAccessibilityTextMarkerRange(context, toAXElement(thisObject)-&gt;rightWordTextMarkerRangeForTextMarker(marker));
1060 }
1061 
1062 static JSValueRef previousWordStartTextMarkerForTextMarkerCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
1063 {
1064     AccessibilityTextMarker* marker = nullptr;
1065     if (argumentCount == 1)
1066         marker = toTextMarker(JSValueToObject(context, arguments[0], exception));
1067 
1068     return AccessibilityTextMarker::makeJSAccessibilityTextMarker(context, toAXElement(thisObject)-&gt;previousWordStartTextMarkerForTextMarker(marker));
1069 }
1070 
1071 static JSValueRef nextWordEndTextMarkerForTextMarkerCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
1072 {
1073     AccessibilityTextMarker* marker = nullptr;
1074     if (argumentCount == 1)
1075         marker = toTextMarker(JSValueToObject(context, arguments[0], exception));
1076 
1077     return AccessibilityTextMarker::makeJSAccessibilityTextMarker(context, toAXElement(thisObject)-&gt;nextWordEndTextMarkerForTextMarker(marker));
1078 }
1079 
1080 static JSValueRef paragraphTextMarkerRangeForTextMarkerCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
1081 {
1082     AccessibilityTextMarker* marker = nullptr;
1083     if (argumentCount == 1)
1084         marker = toTextMarker(JSValueToObject(context, arguments[0], exception));
1085 
1086     return AccessibilityTextMarkerRange::makeJSAccessibilityTextMarkerRange(context, toAXElement(thisObject)-&gt;paragraphTextMarkerRangeForTextMarker(marker));
1087 }
1088 
1089 static JSValueRef previousParagraphStartTextMarkerForTextMarkerCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
1090 {
1091     AccessibilityTextMarker* marker = nullptr;
1092     if (argumentCount == 1)
1093         marker = toTextMarker(JSValueToObject(context, arguments[0], exception));
1094 
1095     return AccessibilityTextMarker::makeJSAccessibilityTextMarker(context, toAXElement(thisObject)-&gt;previousParagraphStartTextMarkerForTextMarker(marker));
1096 }
1097 
1098 static JSValueRef nextParagraphEndTextMarkerForTextMarkerCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
1099 {
1100     AccessibilityTextMarker* marker = nullptr;
1101     if (argumentCount == 1)
1102         marker = toTextMarker(JSValueToObject(context, arguments[0], exception));
1103 
1104     return AccessibilityTextMarker::makeJSAccessibilityTextMarker(context, toAXElement(thisObject)-&gt;nextParagraphEndTextMarkerForTextMarker(marker));
1105 }
1106 
1107 static JSValueRef sentenceTextMarkerRangeForTextMarkerCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
1108 {
1109     AccessibilityTextMarker* marker = nullptr;
1110     if (argumentCount == 1)
1111         marker = toTextMarker(JSValueToObject(context, arguments[0], exception));
1112 
1113     return AccessibilityTextMarkerRange::makeJSAccessibilityTextMarkerRange(context, toAXElement(thisObject)-&gt;sentenceTextMarkerRangeForTextMarker(marker));
1114 }
1115 
1116 static JSValueRef previousSentenceStartTextMarkerForTextMarkerCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
1117 {
1118     AccessibilityTextMarker* marker = nullptr;
1119     if (argumentCount == 1)
1120         marker = toTextMarker(JSValueToObject(context, arguments[0], exception));
1121 
1122     return AccessibilityTextMarker::makeJSAccessibilityTextMarker(context, toAXElement(thisObject)-&gt;previousSentenceStartTextMarkerForTextMarker(marker));
1123 }
1124 
1125 static JSValueRef nextSentenceEndTextMarkerForTextMarkerCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
1126 {
1127     AccessibilityTextMarker* marker = nullptr;
1128     if (argumentCount == 1)
1129         marker = toTextMarker(JSValueToObject(context, arguments[0], exception));
1130 
1131     return AccessibilityTextMarker::makeJSAccessibilityTextMarker(context, toAXElement(thisObject)-&gt;nextSentenceEndTextMarkerForTextMarker(marker));
1132 }
1133 
1134 static JSValueRef setSelectedVisibleTextRangeCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
1135 {
1136     AccessibilityUIElement* uiElement = toAXElement(thisObject);
1137     AccessibilityTextMarkerRange* textMarkerRange = nullptr;
1138     if (argumentCount == 1)
1139         textMarkerRange = toTextMarkerRange(JSValueToObject(context, arguments[0], exception));
1140 
1141     if (uiElement)
1142         return JSValueMakeBoolean(context, uiElement-&gt;setSelectedVisibleTextRange(textMarkerRange));
1143 
1144     return JSValueMakeBoolean(context, false);
1145 }
1146 
1147 // Static Value Getters
1148 
1149 static JSValueRef getARIADropEffectsCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1150 {
1151     auto dropEffects = toAXElement(thisObject)-&gt;ariaDropEffects();
1152     return JSValueMakeString(context, dropEffects.get());
1153 }
1154 
1155 static JSValueRef getClassListCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1156 {
1157     auto classList = toAXElement(thisObject)-&gt;classList();
1158     return JSValueMakeString(context, classList.get());
1159 }
1160 
1161 static JSValueRef getARIAIsGrabbedCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1162 {
1163     return JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;ariaIsGrabbed());
1164 }
1165 
1166 static JSValueRef getIsValidCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1167 {
1168     AccessibilityUIElement* uiElement = toAXElement(thisObject);
1169     if (!uiElement-&gt;platformUIElement())
1170         return JSValueMakeBoolean(context, false);
1171 
1172     // There might be other platform logic that one could check here...
1173 
1174     return JSValueMakeBoolean(context, true);
1175 }
1176 
1177 static JSValueRef getRoleCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1178 {
1179     auto role = toAXElement(thisObject)-&gt;role();
1180     return JSValueMakeString(context, role.get());
1181 }
1182 
1183 static JSValueRef getSubroleCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1184 {
1185     auto role = toAXElement(thisObject)-&gt;subrole();
1186     return JSValueMakeString(context, role.get());
1187 }
1188 
1189 static JSValueRef getRoleDescriptionCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1190 {
1191     auto roleDesc = toAXElement(thisObject)-&gt;roleDescription();
1192     return JSValueMakeString(context, roleDesc.get());
1193 }
1194 
1195 static JSValueRef getComputedRoleStringCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1196 {
1197     auto compRole = toAXElement(thisObject)-&gt;computedRoleString();
1198     return JSValueMakeString(context, compRole.get());
1199 }
1200 
1201 static JSValueRef getTitleCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1202 {
1203     auto title = toAXElement(thisObject)-&gt;title();
1204     return JSValueMakeString(context, title.get());
1205 }
1206 
1207 static JSValueRef getDescriptionCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1208 {
1209     auto description = toAXElement(thisObject)-&gt;description();
1210     return JSValueMakeString(context, description.get());
1211 }
1212 
1213 static JSValueRef getStringValueCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1214 {
1215     auto stringValue = toAXElement(thisObject)-&gt;stringValue();
1216     return JSValueMakeString(context, stringValue.get());
1217 }
1218 
1219 static JSValueRef getLanguageCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1220 {
1221     auto language = toAXElement(thisObject)-&gt;language();
1222     return JSValueMakeString(context, language.get());
1223 }
1224 
1225 static JSValueRef getHelpTextCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1226 {
1227     auto language = toAXElement(thisObject)-&gt;helpText();
1228     return JSValueMakeString(context, language.get());
1229 }
1230 
1231 static JSValueRef getOrientationCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1232 {
1233     auto orientation = toAXElement(thisObject)-&gt;orientation();
1234     return JSValueMakeString(context, orientation.get());
1235 }
1236 
1237 static JSValueRef getChildrenCountCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1238 {
1239     return JSValueMakeNumber(context, toAXElement(thisObject)-&gt;childrenCount());
1240 }
1241 
1242 static JSValueRef rowCountCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1243 {
1244     return JSValueMakeNumber(context, toAXElement(thisObject)-&gt;rowCount());
1245 }
1246 
1247 static JSValueRef columnCountCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1248 {
1249     return JSValueMakeNumber(context, toAXElement(thisObject)-&gt;columnCount());
1250 }
1251 
1252 static JSValueRef getXCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1253 {
1254     return JSValueMakeNumber(context, toAXElement(thisObject)-&gt;x());
1255 }
1256 
1257 static JSValueRef getYCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1258 {
1259     return JSValueMakeNumber(context, toAXElement(thisObject)-&gt;y());
1260 }
1261 
1262 static JSValueRef getWidthCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1263 {
1264     return JSValueMakeNumber(context, toAXElement(thisObject)-&gt;width());
1265 }
1266 
1267 static JSValueRef getHeightCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1268 {
1269     return JSValueMakeNumber(context, toAXElement(thisObject)-&gt;height());
1270 }
1271 
1272 static JSValueRef getClickPointXCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1273 {
1274     return JSValueMakeNumber(context, toAXElement(thisObject)-&gt;clickPointX());
1275 }
1276 
1277 static JSValueRef getClickPointYCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1278 {
1279     return JSValueMakeNumber(context, toAXElement(thisObject)-&gt;clickPointY());
1280 }
1281 
1282 static JSValueRef getIntValueCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1283 {
1284     return JSValueMakeNumber(context, toAXElement(thisObject)-&gt;intValue());
1285 }
1286 
1287 static JSValueRef getMinValueCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1288 {
1289     return JSValueMakeNumber(context, toAXElement(thisObject)-&gt;minValue());
1290 }
1291 
1292 static JSValueRef getMaxValueCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1293 {
1294     return JSValueMakeNumber(context, toAXElement(thisObject)-&gt;maxValue());
1295 }
1296 
1297 static JSValueRef getInsertionPointLineNumberCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1298 {
1299     return JSValueMakeNumber(context, toAXElement(thisObject)-&gt;insertionPointLineNumber());
1300 }
1301 
1302 static JSValueRef getPathDescriptionCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1303 {
1304     auto pathDescription = toAXElement(thisObject)-&gt;pathDescription();
1305     return JSValueMakeString(context, pathDescription.get());
1306 }
1307 
1308 static JSValueRef getSelectedTextRangeCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1309 {
1310     auto selectedTextRange = toAXElement(thisObject)-&gt;selectedTextRange();
1311     return JSValueMakeString(context, selectedTextRange.get());
1312 }
1313 
1314 static JSValueRef getIsEnabledCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1315 {
1316     return JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;isEnabled());
1317 }
1318 
1319 static JSValueRef getIsRequiredCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef, JSValueRef*)
1320 {
1321     return JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;isRequired());
1322 }
1323 
1324 static JSValueRef getIsFocusedCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef, JSValueRef*)
1325 {
1326     return JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;isFocused());
1327 }
1328 
1329 static JSValueRef getIsFocusableCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef, JSValueRef*)
1330 {
1331     return JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;isFocusable());
1332 }
1333 
1334 static JSValueRef getIsSelectedCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef, JSValueRef*)
1335 {
1336     return JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;isSelected());
1337 }
1338 
1339 static JSValueRef getIsSelectableCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef, JSValueRef*)
1340 {
1341     return JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;isSelectable());
1342 }
1343 
1344 static JSValueRef getIsMultiSelectableCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef, JSValueRef*)
1345 {
1346     return JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;isMultiSelectable());
1347 }
1348 
1349 static JSValueRef getIsSelectedOptionActiveCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef, JSValueRef*)
1350 {
1351     return JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;isSelectedOptionActive());
1352 }
1353 
1354 static JSValueRef getIsExpandedCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef, JSValueRef*)
1355 {
1356     return JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;isExpanded());
1357 }
1358 
1359 static JSValueRef getIsCheckedCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef, JSValueRef*)
1360 {
1361     return JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;isChecked());
1362 }
1363 
1364 static JSValueRef getIsIndeterminate(JSContextRef context, JSObjectRef thisObject, JSStringRef, JSValueRef*)
1365 {
1366     return JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;isIndeterminate());
1367 }
1368 
1369 static JSValueRef getIsVisibleCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef, JSValueRef*)
1370 {
1371     return JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;isVisible());
1372 }
1373 
1374 static JSValueRef getIsOffScreenCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef, JSValueRef*)
1375 {
1376     return JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;isOffScreen());
1377 }
1378 
1379 static JSValueRef getIsCollapsedCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef, JSValueRef*)
1380 {
1381     return JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;isCollapsed());
1382 }
1383 
1384 static JSValueRef isIgnoredCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef, JSValueRef*)
1385 {
1386     return JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;isIgnored());
1387 }
1388 
1389 static JSValueRef speakAsCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef, JSValueRef*)
1390 {
1391     auto speakAsString = toAXElement(thisObject)-&gt;speakAs();
1392     return JSValueMakeString(context, speakAsString.get());
1393 }
1394 
1395 static JSValueRef selectedChildrenCountCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1396 {
1397     return JSValueMakeNumber(context, toAXElement(thisObject)-&gt;selectedChildrenCount());
1398 }
1399 
1400 static JSValueRef horizontalScrollbarCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1401 {
1402     return AccessibilityUIElement::makeJSAccessibilityUIElement(context, toAXElement(thisObject)-&gt;horizontalScrollbar());
1403 }
1404 
1405 static JSValueRef verticalScrollbarCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1406 {
1407     return AccessibilityUIElement::makeJSAccessibilityUIElement(context, toAXElement(thisObject)-&gt;verticalScrollbar());
1408 }
1409 
1410 static JSValueRef getHasPopupCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef, JSValueRef*)
1411 {
1412     return JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;hasPopup());
1413 }
1414 
1415 static JSValueRef getPopupValueCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef, JSValueRef*)
1416 {
1417     return JSValueMakeString(context, toAXElement(thisObject)-&gt;popupValue().get());
1418 }
1419 
1420 static JSValueRef hierarchicalLevelCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef, JSValueRef*)
1421 {
1422     return JSValueMakeNumber(context, toAXElement(thisObject)-&gt;hierarchicalLevel());
1423 }
1424 
1425 static JSValueRef getValueDescriptionCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1426 {
1427     auto valueDescription = toAXElement(thisObject)-&gt;valueDescription();
1428     return JSValueMakeString(context, valueDescription.get());
1429 }
1430 
1431 static JSValueRef getAccessibilityValueCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1432 {
1433     auto accessibilityValue = toAXElement(thisObject)-&gt;accessibilityValue();
1434     return JSValueMakeString(context, accessibilityValue.get());
1435 }
1436 
1437 static JSValueRef getDocumentEncodingCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1438 {
1439     auto documentEncoding = toAXElement(thisObject)-&gt;documentEncoding();
1440     return JSValueMakeString(context, documentEncoding.get());
1441 }
1442 
1443 static JSValueRef getDocumentURICallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1444 {
1445     auto documentURI = toAXElement(thisObject)-&gt;documentURI();
1446     return JSValueMakeString(context, documentURI.get());
1447 }
1448 
1449 static JSValueRef getURLCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1450 {
1451     auto url = toAXElement(thisObject)-&gt;url();
1452     return JSValueMakeString(context, url.get());
1453 }
1454 
1455 static JSValueRef addNotificationListenerCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
1456 {
1457     if (argumentCount != 1)
1458         return JSValueMakeBoolean(context, false);
1459 
1460     JSObjectRef callback = JSValueToObject(context, arguments[0], exception);
1461     bool succeeded = toAXElement(thisObject)-&gt;addNotificationListener(callback);
1462     return JSValueMakeBoolean(context, succeeded);
1463 }
1464 
1465 static JSValueRef removeNotificationListenerCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
1466 {
1467     toAXElement(thisObject)-&gt;removeNotificationListener();
1468     return JSValueMakeUndefined(context);
1469 }
1470 
1471 #if PLATFORM(GTK)
1472 static JSValueRef characterAtOffsetCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
1473 {
1474     int offset = -1;
1475     if (argumentCount == 1)
1476         offset = JSValueToNumber(context, arguments[0], exception);
1477 
1478     auto characterAtOffset = toAXElement(thisObject)-&gt;characterAtOffset(offset);
1479     return JSValueMakeString(context, characterAtOffset.get());
1480 }
1481 
1482 static JSValueRef wordAtOffsetCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
1483 {
1484     int offset = -1;
1485     if (argumentCount == 1)
1486         offset = JSValueToNumber(context, arguments[0], exception);
1487 
1488     auto wordAtOffset = toAXElement(thisObject)-&gt;wordAtOffset(offset);
1489     return JSValueMakeString(context, wordAtOffset.get());
1490 }
1491 
1492 static JSValueRef lineAtOffsetCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
1493 {
1494     int offset = -1;
1495     if (argumentCount == 1)
1496         offset = JSValueToNumber(context, arguments[0], exception);
1497 
1498     auto lineAtOffset = toAXElement(thisObject)-&gt;lineAtOffset(offset);
1499     return JSValueMakeString(context, lineAtOffset.get());
1500 }
1501 
1502 static JSValueRef sentenceAtOffsetCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
1503 {
1504     int offset = -1;
1505     if (argumentCount == 1)
1506         offset = JSValueToNumber(context, arguments[0], exception);
1507 
1508     auto sentenceAtOffset = toAXElement(thisObject)-&gt;sentenceAtOffset(offset);
1509     return JSValueMakeString(context, sentenceAtOffset.get());
1510 }
1511 
1512 #elif PLATFORM(IOS_FAMILY)
1513 
1514 static JSValueRef getIsSearchFieldCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1515 {
1516     return JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;isSearchField());
1517 }
1518 
1519 static JSValueRef getIsTextAreaCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1520 {
1521     return JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;isTextArea());
1522 }
1523 
1524 static JSValueRef stringForSelectionCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1525 {
1526     auto labelString = toAXElement(thisObject)-&gt;stringForSelection();
1527     return JSValueMakeString(context, labelString.get());
1528 }
1529 
1530 static JSValueRef getIdentifierCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1531 {
1532     auto valueString = toAXElement(thisObject)-&gt;identifier();
1533     return JSValueMakeString(context, valueString.get());
1534 }
1535 
1536 
1537 static JSValueRef getTraitsCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1538 {
1539     auto valueString = toAXElement(thisObject)-&gt;traits();
1540     return JSValueMakeString(context, valueString.get());
1541 }
1542 
1543 static JSValueRef getElementTextPositionCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1544 {
1545     return JSValueMakeNumber(context, toAXElement(thisObject)-&gt;elementTextPosition());
1546 }
1547 
1548 static JSValueRef getElementTextLengthCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1549 {
1550     return JSValueMakeNumber(context, toAXElement(thisObject)-&gt;elementTextLength());
1551 }
1552 
1553 static JSValueRef hasContainedByFieldsetTraitCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef, JSValueRef*)
1554 {
1555     return JSValueMakeBoolean(context, toAXElement(thisObject)-&gt;hasContainedByFieldsetTrait());
1556 }
1557 
1558 static JSValueRef textMarkerRangeMatchesTextNearMarkersCallback(JSContextRef context, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception)
1559 {
1560     JSStringRef searchText = nullptr;
1561     AccessibilityTextMarker* startMarker = nullptr;
1562     AccessibilityTextMarker* endMarker = nullptr;
1563     if (argumentCount == 3) {
1564         searchText = JSValueToStringCopy(context, arguments[0], exception);
1565         startMarker = toTextMarker(JSValueToObject(context, arguments[1], exception));
1566         endMarker = toTextMarker(JSValueToObject(context, arguments[2], exception));
1567     }
1568 
1569     JSValueRef result = AccessibilityTextMarkerRange::makeJSAccessibilityTextMarkerRange(context, toAXElement(thisObject)-&gt;textMarkerRangeMatchesTextNearMarkers(searchText, startMarker, endMarker));
1570     if (searchText)
1571         JSStringRelease(searchText);
1572     return result;
1573 }
1574 
1575 #endif // PLATFORM(IOS_FAMILY)
1576 
1577 #if PLATFORM(MAC) &amp;&amp; !PLATFORM(IOS_FAMILY)
1578 static JSValueRef supportedActionsCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1579 {
1580     auto valueString = toAXElement(thisObject)-&gt;supportedActions();
1581     return JSValueMakeString(context, valueString.get());
1582 }
1583 
1584 static JSValueRef mathPostscriptsDescriptionCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1585 {
1586     auto valueString = toAXElement(thisObject)-&gt;mathPostscriptsDescription();
1587     return JSValueMakeString(context, valueString.get());
1588 }
1589 
1590 static JSValueRef mathPrescriptsDescriptionCallback(JSContextRef context, JSObjectRef thisObject, JSStringRef propertyName, JSValueRef* exception)
1591 {
1592     auto valueString = toAXElement(thisObject)-&gt;mathPrescriptsDescription();
1593     return JSValueMakeString(context, valueString.get());
1594 }
1595 
1596 #endif
1597 
1598 // Implementation
1599 
1600 // Unsupported methods on various platforms.
1601 #if !PLATFORM(MAC) || PLATFORM(IOS_FAMILY)
1602 JSRetainPtr&lt;JSStringRef&gt; AccessibilityUIElement::rangeForLine(int line) { return 0; }
1603 JSRetainPtr&lt;JSStringRef&gt; AccessibilityUIElement::rangeForPosition(int, int) { return 0; }
1604 void AccessibilityUIElement::setSelectedChild(AccessibilityUIElement*) const { }
1605 void AccessibilityUIElement::setSelectedChildAtIndex(unsigned) const { }
1606 void AccessibilityUIElement::removeSelectionAtIndex(unsigned) const { }
1607 AccessibilityUIElement AccessibilityUIElement::horizontalScrollbar() const { return { nullptr }; }
1608 AccessibilityUIElement AccessibilityUIElement::verticalScrollbar() const { return { nullptr }; }
1609 AccessibilityUIElement AccessibilityUIElement::uiElementAttributeValue(JSStringRef) const { return { nullptr }; }
1610 #endif
1611 
1612 #if !PLATFORM(MAC) &amp;&amp; !PLATFORM(IOS_FAMILY)
1613 JSRetainPtr&lt;JSStringRef&gt; AccessibilityUIElement::speakAs() { return nullptr; }
1614 JSRetainPtr&lt;JSStringRef&gt; AccessibilityUIElement::pathDescription() const { return 0; }
1615 void AccessibilityUIElement::setValue(JSStringRef) { }
1616 #endif
1617 
1618 #if !PLATFORM(COCOA)
1619 void AccessibilityUIElement::uiElementArrayAttributeValue(JSStringRef, Vector&lt;AccessibilityUIElement&gt;&amp;) const { }
1620 #endif
1621 
1622 #if !PLATFORM(WIN)
1623 bool AccessibilityUIElement::isEqual(AccessibilityUIElement* otherElement)
1624 {
1625     if (!otherElement)
1626         return false;
1627     return platformUIElement() == otherElement-&gt;platformUIElement();
1628 }
1629 #endif
1630 
1631 #if !PLATFORM(MAC)
1632 void AccessibilityUIElement::setBoolAttributeValue(JSStringRef, bool) { }
1633 #endif
1634 
1635 #if !SUPPORTS_AX_TEXTMARKERS
1636 
1637 AccessibilityTextMarkerRange AccessibilityUIElement::lineTextMarkerRangeForTextMarker(AccessibilityTextMarker*)
1638 {
1639     return nullptr;
1640 }
1641 
1642 AccessibilityTextMarkerRange AccessibilityUIElement::textMarkerRangeForElement(AccessibilityUIElement*)
1643 {
1644     return 0;
1645 }
1646 
1647 AccessibilityTextMarkerRange AccessibilityUIElement::selectedTextMarkerRange()
1648 {
1649     return nullptr;
1650 }
1651 
1652 void AccessibilityUIElement::resetSelectedTextMarkerRange()
1653 {
1654 }
1655 
1656 bool AccessibilityUIElement::replaceTextInRange(JSStringRef, int, int)
1657 {
1658     return false;
1659 }
1660 
1661 bool AccessibilityUIElement::insertText(JSStringRef)
1662 {
1663     return false;
1664 }
1665 
1666 int AccessibilityUIElement::textMarkerRangeLength(AccessibilityTextMarkerRange*)
1667 {
1668     return 0;
1669 }
1670 
1671 AccessibilityTextMarkerRange AccessibilityUIElement::textMarkerRangeForMarkers(AccessibilityTextMarker*, AccessibilityTextMarker*)
1672 {
1673     return 0;
1674 }
1675 
1676 AccessibilityTextMarker AccessibilityUIElement::startTextMarkerForTextMarkerRange(AccessibilityTextMarkerRange*)
1677 {
1678     return 0;
1679 }
1680 
1681 AccessibilityTextMarker AccessibilityUIElement::endTextMarkerForTextMarkerRange(AccessibilityTextMarkerRange*)
1682 {
1683     return 0;
1684 }
1685 
1686 AccessibilityUIElement AccessibilityUIElement::accessibilityElementForTextMarker(AccessibilityTextMarker*)
1687 {
1688     return { nullptr };
1689 }
1690 
1691 AccessibilityTextMarker AccessibilityUIElement::endTextMarkerForBounds(int x, int y, int width, int height)
1692 {
1693     return 0;
1694 }
1695 
1696 AccessibilityTextMarker AccessibilityUIElement::startTextMarkerForBounds(int x, int y, int width, int height)
1697 {
1698     return 0;
1699 }
1700 
1701 AccessibilityTextMarker AccessibilityUIElement::textMarkerForPoint(int x, int y)
1702 {
1703     return 0;
1704 }
1705 
1706 AccessibilityTextMarker AccessibilityUIElement::previousTextMarker(AccessibilityTextMarker*)
1707 {
1708     return 0;
1709 }
1710 
1711 AccessibilityTextMarker AccessibilityUIElement::nextTextMarker(AccessibilityTextMarker*)
1712 {
1713     return 0;
1714 }
1715 
1716 JSRetainPtr&lt;JSStringRef&gt; AccessibilityUIElement::stringForTextMarkerRange(AccessibilityTextMarkerRange*)
1717 {
1718     return 0;
1719 }
1720 
1721 JSRetainPtr&lt;JSStringRef&gt; AccessibilityUIElement::attributedStringForTextMarkerRange(AccessibilityTextMarkerRange*)
1722 {
1723     return nullptr;
1724 }
1725 
1726 JSRetainPtr&lt;JSStringRef&gt; AccessibilityUIElement::attributedStringForTextMarkerRangeWithOptions(AccessibilityTextMarkerRange*, bool includeSpellCheck)
1727 {
1728     return nullptr;
1729 }
1730 
1731 bool AccessibilityUIElement::attributedStringForTextMarkerRangeContainsAttribute(JSStringRef, AccessibilityTextMarkerRange*)
1732 {
1733     return false;
1734 }
1735 
1736 int AccessibilityUIElement::indexForTextMarker(AccessibilityTextMarker*)
1737 {
1738     return -1;
1739 }
1740 
1741 bool AccessibilityUIElement::isTextMarkerValid(AccessibilityTextMarker*)
1742 {
1743     return false;
1744 }
1745 
1746 AccessibilityTextMarker AccessibilityUIElement::textMarkerForIndex(int)
1747 {
1748     return 0;
1749 }
1750 
1751 AccessibilityTextMarker AccessibilityUIElement::startTextMarker()
1752 {
1753     return nullptr;
1754 }
1755 
1756 AccessibilityTextMarker AccessibilityUIElement::endTextMarker()
1757 {
1758     return nullptr;
1759 }
1760 
1761 bool AccessibilityUIElement::setSelectedVisibleTextRange(AccessibilityTextMarkerRange*)
1762 {
1763     return false;
1764 }
1765 
1766 AccessibilityTextMarkerRange AccessibilityUIElement::leftWordTextMarkerRangeForTextMarker(AccessibilityTextMarker*)
1767 {
1768     return nullptr;
1769 }
1770 
1771 AccessibilityTextMarkerRange AccessibilityUIElement::rightWordTextMarkerRangeForTextMarker(AccessibilityTextMarker*)
1772 {
1773     return nullptr;
1774 }
1775 
1776 AccessibilityTextMarker AccessibilityUIElement::previousWordStartTextMarkerForTextMarker(AccessibilityTextMarker*)
1777 {
1778     return nullptr;
1779 }
1780 
1781 AccessibilityTextMarker AccessibilityUIElement::nextWordEndTextMarkerForTextMarker(AccessibilityTextMarker*)
1782 {
1783     return nullptr;
1784 }
1785 
1786 AccessibilityTextMarkerRange AccessibilityUIElement::paragraphTextMarkerRangeForTextMarker(AccessibilityTextMarker*)
1787 {
1788     return nullptr;
1789 }
1790 
1791 AccessibilityTextMarker AccessibilityUIElement::previousParagraphStartTextMarkerForTextMarker(AccessibilityTextMarker*)
1792 {
1793     return nullptr;
1794 }
1795 
1796 AccessibilityTextMarker AccessibilityUIElement::nextParagraphEndTextMarkerForTextMarker(AccessibilityTextMarker*)
1797 {
1798     return nullptr;
1799 }
1800 
1801 AccessibilityTextMarkerRange AccessibilityUIElement::sentenceTextMarkerRangeForTextMarker(AccessibilityTextMarker*)
1802 {
1803     return nullptr;
1804 }
1805 
1806 AccessibilityTextMarker AccessibilityUIElement::previousSentenceStartTextMarkerForTextMarker(AccessibilityTextMarker*)
1807 {
1808     return nullptr;
1809 }
1810 
1811 AccessibilityTextMarker AccessibilityUIElement::nextSentenceEndTextMarkerForTextMarker(AccessibilityTextMarker*)
1812 {
1813     return nullptr;
1814 }
1815 
1816 #if PLATFORM(IOS_FAMILY)
1817 AccessibilityTextMarkerRange AccessibilityUIElement::textMarkerRangeMatchesTextNearMarkers(JSStringRef, AccessibilityTextMarker*, AccessibilityTextMarker*)
1818 {
1819     return nullptr;
1820 }
1821 #endif
1822 
1823 #endif
1824 
1825 // Destruction
1826 
1827 static void finalize(JSObjectRef thisObject)
1828 {
1829     delete toAXElement(thisObject);
1830 }
1831 
1832 // Object Creation
1833 
1834 JSObjectRef AccessibilityUIElement::makeJSAccessibilityUIElement(JSContextRef context, const AccessibilityUIElement&amp; element)
1835 {
1836     if (!element.platformUIElement())
1837         return nullptr;
1838 
1839     return JSObjectMake(context, AccessibilityUIElement::getJSClass(), new AccessibilityUIElement(element));
1840 }
1841 
1842 JSClassRef AccessibilityUIElement::getJSClass()
1843 {
1844     static JSStaticValue staticValues[] = {
1845         { &quot;accessibilityValue&quot;, getAccessibilityValueCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1846         { &quot;role&quot;, getRoleCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1847         { &quot;subrole&quot;, getSubroleCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1848         { &quot;roleDescription&quot;, getRoleDescriptionCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1849         { &quot;computedRoleString&quot;, getComputedRoleStringCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1850         { &quot;title&quot;, getTitleCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1851         { &quot;description&quot;, getDescriptionCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1852         { &quot;language&quot;, getLanguageCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1853         { &quot;helpText&quot;, getHelpTextCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1854         { &quot;stringValue&quot;, getStringValueCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1855         { &quot;x&quot;, getXCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1856         { &quot;y&quot;, getYCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1857         { &quot;width&quot;, getWidthCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1858         { &quot;height&quot;, getHeightCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1859         { &quot;clickPointX&quot;, getClickPointXCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1860         { &quot;clickPointY&quot;, getClickPointYCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1861         { &quot;intValue&quot;, getIntValueCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1862         { &quot;minValue&quot;, getMinValueCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1863         { &quot;maxValue&quot;, getMaxValueCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1864         { &quot;pathDescription&quot;, getPathDescriptionCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1865         { &quot;childrenCount&quot;, getChildrenCountCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1866         { &quot;rowCount&quot;, rowCountCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1867         { &quot;columnCount&quot;, columnCountCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1868         { &quot;insertionPointLineNumber&quot;, getInsertionPointLineNumberCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1869         { &quot;selectedTextRange&quot;, getSelectedTextRangeCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1870         { &quot;isEnabled&quot;, getIsEnabledCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1871         { &quot;isRequired&quot;, getIsRequiredCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1872         { &quot;isFocused&quot;, getIsFocusedCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1873         { &quot;isFocusable&quot;, getIsFocusableCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1874         { &quot;isSelected&quot;, getIsSelectedCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1875         { &quot;isSelectable&quot;, getIsSelectableCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1876         { &quot;isMultiSelectable&quot;, getIsMultiSelectableCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1877         { &quot;isSelectedOptionActive&quot;, getIsSelectedOptionActiveCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1878         { &quot;isExpanded&quot;, getIsExpandedCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1879         { &quot;isChecked&quot;, getIsCheckedCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1880         { &quot;isIndeterminate&quot;, getIsIndeterminate, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1881         { &quot;isVisible&quot;, getIsVisibleCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1882         { &quot;isOffScreen&quot;, getIsOffScreenCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1883         { &quot;isCollapsed&quot;, getIsCollapsedCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1884         { &quot;hasPopup&quot;, getHasPopupCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1885         { &quot;popupValue&quot;, getPopupValueCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1886         { &quot;valueDescription&quot;, getValueDescriptionCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1887         { &quot;hierarchicalLevel&quot;, hierarchicalLevelCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1888         { &quot;documentEncoding&quot;, getDocumentEncodingCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1889         { &quot;documentURI&quot;, getDocumentURICallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1890         { &quot;url&quot;, getURLCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1891         { &quot;isValid&quot;, getIsValidCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1892         { &quot;orientation&quot;, getOrientationCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1893         { &quot;ariaIsGrabbed&quot;, getARIAIsGrabbedCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1894         { &quot;ariaDropEffects&quot;, getARIADropEffectsCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1895         { &quot;classList&quot;, getClassListCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1896         { &quot;isIgnored&quot;, isIgnoredCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1897         { &quot;speakAs&quot;, speakAsCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1898         { &quot;selectedChildrenCount&quot;, selectedChildrenCountCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1899         { &quot;horizontalScrollbar&quot;, horizontalScrollbarCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1900         { &quot;verticalScrollbar&quot;, verticalScrollbarCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1901         { &quot;startTextMarker&quot;, startTextMarkerCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1902         { &quot;endTextMarker&quot;, endTextMarkerCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1903 #if PLATFORM(IOS_FAMILY)
1904         { &quot;identifier&quot;, getIdentifierCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1905         { &quot;traits&quot;, getTraitsCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1906         { &quot;elementTextPosition&quot;, getElementTextPositionCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1907         { &quot;elementTextLength&quot;, getElementTextLengthCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1908         { &quot;stringForSelection&quot;, stringForSelectionCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1909         { &quot;hasContainedByFieldsetTrait&quot;, hasContainedByFieldsetTraitCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1910         { &quot;isSearchField&quot;, getIsSearchFieldCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1911         { &quot;isTextArea&quot;, getIsTextAreaCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1912 #endif // PLATFORM(IOS_FAMILY)
1913 #if PLATFORM(MAC) &amp;&amp; !PLATFORM(IOS_FAMILY)
1914         { &quot;supportedActions&quot;, supportedActionsCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1915         { &quot;mathPostscriptsDescription&quot;, mathPostscriptsDescriptionCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1916         { &quot;mathPrescriptsDescription&quot;, mathPrescriptsDescriptionCallback, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1917 #endif
1918         { 0, 0, 0, 0 }
1919     };
1920 
1921     static JSStaticFunction staticFunctions[] = {
1922         { &quot;allAttributes&quot;, allAttributesCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1923         { &quot;attributesOfLinkedUIElements&quot;, attributesOfLinkedUIElementsCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1924         { &quot;attributesOfDocumentLinks&quot;, attributesOfDocumentLinksCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1925         { &quot;attributesOfChildren&quot;, attributesOfChildrenCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1926         { &quot;parameterizedAttributeNames&quot;, parameterizedAttributeNamesCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1927         { &quot;lineForIndex&quot;, lineForIndexCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1928         { &quot;rangeForLine&quot;, rangeForLineCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1929         { &quot;boundsForRange&quot;, boundsForRangeCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1930         { &quot;rangeForPosition&quot;, rangeForPositionCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1931         { &quot;stringForRange&quot;, stringForRangeCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1932         { &quot;attributedStringForRange&quot;, attributedStringForRangeCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1933         { &quot;attributedStringRangeIsMisspelled&quot;, attributedStringRangeIsMisspelledCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1934         { &quot;uiElementCountForSearchPredicate&quot;, uiElementCountForSearchPredicateCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1935         { &quot;uiElementForSearchPredicate&quot;, uiElementForSearchPredicateCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1936         { &quot;selectTextWithCriteria&quot;, selectTextWithCriteriaCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1937 #if PLATFORM(MAC)
1938         { &quot;searchTextWithCriteria&quot;, searchTextWithCriteriaCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1939 #endif
1940         { &quot;childAtIndex&quot;, childAtIndexCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1941         { &quot;linkedUIElementAtIndex&quot;, linkedUIElementAtIndexCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1942         { &quot;indexOfChild&quot;, indexOfChildCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1943         { &quot;elementAtPoint&quot;, elementAtPointCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1944         { &quot;attributesOfColumnHeaders&quot;, attributesOfColumnHeadersCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1945         { &quot;attributesOfRowHeaders&quot;, attributesOfRowHeadersCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1946         { &quot;attributesOfColumns&quot;, attributesOfColumnsCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1947         { &quot;attributesOfRows&quot;, attributesOfRowsCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1948         { &quot;attributesOfVisibleCells&quot;, attributesOfVisibleCellsCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1949         { &quot;attributesOfHeader&quot;, attributesOfHeaderCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1950         { &quot;indexInTable&quot;, indexInTableCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1951         { &quot;rowIndexRange&quot;, rowIndexRangeCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1952         { &quot;columnIndexRange&quot;, columnIndexRangeCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1953         { &quot;cellForColumnAndRow&quot;, cellForColumnAndRowCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1954         { &quot;titleUIElement&quot;, titleUIElementCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1955         { &quot;setSelectedTextRange&quot;, setSelectedTextRangeCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1956         { &quot;stringAttributeValue&quot;, stringAttributeValueCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1957         { &quot;uiElementArrayAttributeValue&quot;, uiElementArrayAttributeValueCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1958         { &quot;rowHeaders&quot;, rowHeadersCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1959         { &quot;columnHeaders&quot;, columnHeadersCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1960         { &quot;uiElementAttributeValue&quot;, uiElementAttributeValueCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1961         { &quot;numberAttributeValue&quot;, numberAttributeValueCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1962         { &quot;boolAttributeValue&quot;, boolAttributeValueCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1963         { &quot;setBoolAttributeValue&quot;, setBoolAttributeValueCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1964         { &quot;isAttributeSupported&quot;, isAttributeSupportedCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1965         { &quot;isAttributeSettable&quot;, isAttributeSettableCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1966         { &quot;isPressActionSupported&quot;, isPressActionSupportedCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1967         { &quot;isIncrementActionSupported&quot;, isIncrementActionSupportedCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1968         { &quot;isDecrementActionSupported&quot;, isDecrementActionSupportedCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1969         { &quot;parentElement&quot;, parentElementCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1970         { &quot;disclosedByRow&quot;, disclosedByRowCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1971         { &quot;increment&quot;, incrementCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1972         { &quot;decrement&quot;, decrementCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1973         { &quot;showMenu&quot;, showMenuCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1974         { &quot;press&quot;, pressCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1975         { &quot;disclosedRowAtIndex&quot;, disclosedRowAtIndexCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1976         { &quot;ariaOwnsElementAtIndex&quot;, ariaOwnsElementAtIndexCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1977         { &quot;ariaFlowToElementAtIndex&quot;, ariaFlowToElementAtIndexCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1978         { &quot;ariaControlsElementAtIndex&quot;, ariaControlsElementAtIndexCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1979         { &quot;selectedRowAtIndex&quot;, selectedRowAtIndexCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1980         { &quot;rowAtIndex&quot;, rowAtIndexCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1981         { &quot;isEqual&quot;, isEqualCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1982         { &quot;addNotificationListener&quot;, addNotificationListenerCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1983         { &quot;removeNotificationListener&quot;, removeNotificationListenerCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1984         { &quot;takeFocus&quot;, takeFocusCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1985         { &quot;takeSelection&quot;, takeSelectionCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1986         { &quot;addSelection&quot;, addSelectionCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1987         { &quot;removeSelection&quot;, removeSelectionCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1988         { &quot;lineTextMarkerRangeForTextMarker&quot;, lineTextMarkerRangeForTextMarkerCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1989         { &quot;textMarkerRangeForElement&quot;, textMarkerRangeForElementCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1990         { &quot;selectedTextMarkerRange&quot;, selectedTextMarkerRangeCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1991         { &quot;resetSelectedTextMarkerRange&quot;, resetSelectedTextMarkerRangeCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1992         { &quot;replaceTextInRange&quot;, replaceTextInRangeCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1993         { &quot;insertText&quot;, insertTextCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1994         { &quot;attributedStringForTextMarkerRangeContainsAttribute&quot;, attributedStringForTextMarkerRangeContainsAttributeCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1995         { &quot;indexForTextMarker&quot;, indexForTextMarkerCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1996         { &quot;isTextMarkerValid&quot;, isTextMarkerValidCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1997         { &quot;textMarkerRangeForMarkers&quot;, textMarkerRangeForMarkersCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1998         { &quot;textMarkerForIndex&quot;, textMarkerForIndexCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
1999         { &quot;startTextMarkerForTextMarkerRange&quot;, startTextMarkerForTextMarkerRangeCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2000         { &quot;endTextMarkerForTextMarkerRange&quot;, endTextMarkerForTextMarkerRangeCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2001         { &quot;accessibilityElementForTextMarker&quot;, accessibilityElementForTextMarkerCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2002         { &quot;textMarkerRangeLength&quot;, textMarkerRangeLengthCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2003         { &quot;endTextMarkerForBounds&quot;, endTextMarkerForBoundsCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2004         { &quot;startTextMarkerForBounds&quot;, startTextMarkerForBoundsCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2005         { &quot;textMarkerForPoint&quot;, textMarkerForPointCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2006         { &quot;nextTextMarker&quot;, nextTextMarkerCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2007         { &quot;previousTextMarker&quot;, previousTextMarkerCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2008         { &quot;stringForTextMarkerRange&quot;, stringForTextMarkerRangeCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2009         { &quot;attributedStringForTextMarkerRange&quot;, attributedStringForTextMarkerRangeCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2010         { &quot;attributedStringForTextMarkerRangeWithOptions&quot;, attributedStringForTextMarkerRangeWithOptionsCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2011         { &quot;leftWordTextMarkerRangeForTextMarker&quot;, leftWordTextMarkerRangeForTextMarkerCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2012         { &quot;rightWordTextMarkerRangeForTextMarker&quot;, rightWordTextMarkerRangeForTextMarkerCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2013         { &quot;previousWordStartTextMarkerForTextMarker&quot;, previousWordStartTextMarkerForTextMarkerCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2014         { &quot;nextWordEndTextMarkerForTextMarker&quot;, nextWordEndTextMarkerForTextMarkerCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2015         { &quot;paragraphTextMarkerRangeForTextMarker&quot;, paragraphTextMarkerRangeForTextMarkerCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2016         { &quot;previousParagraphStartTextMarkerForTextMarker&quot;, previousParagraphStartTextMarkerForTextMarkerCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2017         { &quot;nextParagraphEndTextMarkerForTextMarker&quot;, nextParagraphEndTextMarkerForTextMarkerCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2018         { &quot;sentenceTextMarkerRangeForTextMarker&quot;, sentenceTextMarkerRangeForTextMarkerCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2019         { &quot;previousSentenceStartTextMarkerForTextMarker&quot;, previousSentenceStartTextMarkerForTextMarkerCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2020         { &quot;nextSentenceEndTextMarkerForTextMarker&quot;, nextSentenceEndTextMarkerForTextMarkerCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2021         { &quot;setSelectedChild&quot;, setSelectedChildCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2022         { &quot;setSelectedChildAtIndex&quot;, setSelectedChildAtIndexCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2023         { &quot;removeSelectionAtIndex&quot;, removeSelectionAtIndexCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2024         { &quot;setValue&quot;, setValueCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2025         { &quot;setSelectedVisibleTextRange&quot;, setSelectedVisibleTextRangeCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2026         { &quot;selectedChildAtIndex&quot;, selectedChildAtIndexCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2027         { &quot;scrollToMakeVisible&quot;, scrollToMakeVisibleCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2028         { &quot;scrollToGlobalPoint&quot;, scrollToGlobalPointCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2029         { &quot;scrollToMakeVisibleWithSubFocus&quot;, scrollToMakeVisibleWithSubFocusCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2030 #if PLATFORM(GTK)
2031         { &quot;characterAtOffset&quot;, characterAtOffsetCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2032         { &quot;wordAtOffset&quot;, wordAtOffsetCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2033         { &quot;lineAtOffset&quot;, lineAtOffsetCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2034         { &quot;sentenceAtOffset&quot;, sentenceAtOffsetCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2035 #elif PLATFORM(IOS_FAMILY)
2036         { &quot;linkedElement&quot;, linkedElementCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2037         { &quot;headerElementAtIndex&quot;, headerElementAtIndexCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2038         { &quot;elementsForRange&quot;, elementsForRangeCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2039         { &quot;increaseTextSelection&quot;, increaseTextSelectionCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2040         { &quot;decreaseTextSelection&quot;, decreaseTextSelectionCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2041         { &quot;scrollPageUp&quot;, scrollPageUpCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2042         { &quot;scrollPageDown&quot;, scrollPageDownCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2043         { &quot;scrollPageLeft&quot;, scrollPageLeftCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2044         { &quot;scrollPageRight&quot;, scrollPageRightCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2045         { &quot;assistiveTechnologySimulatedFocus&quot;, assistiveTechnologySimulatedFocusCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2046         { &quot;fieldsetAncestorElement&quot;, fieldsetAncestorElementCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2047         { &quot;textMarkerRangeMatchesTextNearMarkers&quot;, textMarkerRangeMatchesTextNearMarkersCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2048         { &quot;attributedStringForElement&quot;, attributedStringForElementCallback, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },
2049 #endif
2050         { 0, 0, 0 }
2051     };
2052 
2053     static JSClassDefinition classDefinition = {
2054         0, kJSClassAttributeNone, &quot;AccessibilityUIElement&quot;, 0, staticValues, staticFunctions,
2055         0, finalize, 0, 0, 0, 0, 0, 0, 0, 0, 0
2056     };
2057 
2058     static JSClassRef accessibilityUIElementClass = JSClassCreate(&amp;classDefinition);
2059     return accessibilityUIElementClass;
2060 }
2061 #endif
    </pre>
  </body>
</html>
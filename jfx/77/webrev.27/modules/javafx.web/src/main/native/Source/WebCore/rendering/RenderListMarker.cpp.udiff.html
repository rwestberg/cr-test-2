<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/WebCore/rendering/RenderListMarker.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="RenderListBox.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="RenderMarquee.cpp.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/rendering/RenderListMarker.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,9 +1,9 @@</span>
  /*
   * Copyright (C) 1999 Lars Knoll (knoll@kde.org)
   *           (C) 1999 Antti Koivisto (koivisto@kde.org)
<span class="udiff-line-modified-removed">-  * Copyright (C) 2003, 2004, 2005, 2006, 2007, 2008 Apple Inc. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (C) 2003-2019 Apple Inc. All rights reserved.</span>
   * Copyright (C) 2006 Andrew Wellington (proton@wiretapped.net)
   * Copyright (C) 2010 Daniel Bates (dbates@intudata.com)
   *
   * This library is free software; you can redistribute it and/or
   * modify it under the terms of the GNU Library General Public
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -32,39 +32,40 @@</span>
  #include &quot;RenderLayer.h&quot;
  #include &quot;RenderListItem.h&quot;
  #include &quot;RenderView.h&quot;
  #include &lt;wtf/IsoMallocInlines.h&gt;
  #include &lt;wtf/StackStats.h&gt;
<span class="udiff-line-modified-removed">- #include &lt;wtf/text/StringBuilder.h&gt;</span>
<span class="udiff-line-modified-added">+ #include &lt;wtf/text/StringConcatenateNumbers.h&gt;</span>
  #include &lt;wtf/unicode/CharacterNames.h&gt;
  
  namespace WebCore {
  
  using namespace WTF::Unicode;
  
  WTF_MAKE_ISO_ALLOCATED_IMPL(RenderListMarker);
  
  const int cMarkerPadding = 7;
  
<span class="udiff-line-modified-removed">- enum SequenceType { NumericSequence, AlphabeticSequence };</span>
<span class="udiff-line-modified-added">+ enum class LetterCase { Lower, Upper };</span>
<span class="udiff-line-added">+ enum class SequenceType { Numeric, Alphabetic };</span>
  
<span class="udiff-line-modified-removed">- static NEVER_INLINE void toRoman(StringBuilder&amp; builder, int number, bool upper)</span>
<span class="udiff-line-modified-added">+ static NEVER_INLINE String toRoman(int number, LetterCase letterCase)</span>
  {
      // FIXME: CSS3 describes how to make this work for much larger numbers,
      // using overbars and special characters. It also specifies the characters
      // in the range U+2160 to U+217F instead of standard ASCII ones.
      ASSERT(number &gt;= 1 &amp;&amp; number &lt;= 3999);
  
      // Big enough to store largest roman number less than 3999 which
      // is 3888 (MMMDCCCLXXXVIII)
<span class="udiff-line-modified-removed">-     const int lettersSize = 15;</span>
<span class="udiff-line-modified-added">+     constexpr unsigned lettersSize = 15;</span>
      LChar letters[lettersSize];
  
<span class="udiff-line-modified-removed">-     int length = 0;</span>
<span class="udiff-line-modified-added">+     unsigned length = 0;</span>
      const LChar ldigits[] = { &#39;i&#39;, &#39;v&#39;, &#39;x&#39;, &#39;l&#39;, &#39;c&#39;, &#39;d&#39;, &#39;m&#39; };
      const LChar udigits[] = { &#39;I&#39;, &#39;V&#39;, &#39;X&#39;, &#39;L&#39;, &#39;C&#39;, &#39;D&#39;, &#39;M&#39; };
<span class="udiff-line-modified-removed">-     const LChar* digits = upper ? udigits : ldigits;</span>
<span class="udiff-line-modified-added">+     const LChar* digits = letterCase == LetterCase::Upper ? udigits : ldigits;</span>
      int d = 0;
      do {
          int num = number % 10;
          if (num % 5 &lt; 4)
              for (int i = num % 5; i &gt; 0; i--)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -78,36 +79,36 @@</span>
          number /= 10;
          d += 2;
      } while (number);
  
      ASSERT(length &lt;= lettersSize);
<span class="udiff-line-modified-removed">-     builder.append(&amp;letters[lettersSize - length], length);</span>
<span class="udiff-line-modified-added">+     return String { &amp;letters[lettersSize - length], length };</span>
  }
  
<span class="udiff-line-modified-removed">- template &lt;typename CharacterType&gt;</span>
<span class="udiff-line-modified-removed">- static inline void toAlphabeticOrNumeric(StringBuilder&amp; builder, int number, const CharacterType* sequence, unsigned sequenceSize, SequenceType type)</span>
<span class="udiff-line-modified-added">+ template&lt;typename CharacterType&gt;</span>
<span class="udiff-line-modified-added">+ static inline String toAlphabeticOrNumeric(int number, const CharacterType* sequence, unsigned sequenceSize, SequenceType type)</span>
  {
      ASSERT(sequenceSize &gt;= 2);
  
      // Taking sizeof(number) in the expression below doesn&#39;t work with some compilers.
<span class="udiff-line-modified-removed">-     const int lettersSize = sizeof(int) * 8 + 1; // Binary is the worst case; requires one character per bit plus a minus sign.</span>
<span class="udiff-line-modified-added">+     constexpr unsigned lettersSize = sizeof(int) * 8 + 1; // Binary is the worst case; requires one character per bit plus a minus sign.</span>
  
      CharacterType letters[lettersSize];
  
      bool isNegativeNumber = false;
      unsigned numberShadow = number;
<span class="udiff-line-modified-removed">-     if (type == AlphabeticSequence) {</span>
<span class="udiff-line-modified-added">+     if (type == SequenceType::Alphabetic) {</span>
          ASSERT(number &gt; 0);
          --numberShadow;
      } else if (number &lt; 0) {
          numberShadow = -number;
          isNegativeNumber = true;
      }
      letters[lettersSize - 1] = sequence[numberShadow % sequenceSize];
<span class="udiff-line-modified-removed">-     int length = 1;</span>
<span class="udiff-line-modified-added">+     unsigned length = 1;</span>
  
<span class="udiff-line-modified-removed">-     if (type == AlphabeticSequence) {</span>
<span class="udiff-line-modified-added">+     if (type == SequenceType::Alphabetic) {</span>
          while ((numberShadow /= sequenceSize) &gt; 0) {
              --numberShadow;
              letters[lettersSize - ++length] = sequence[numberShadow % sequenceSize];
          }
      } else {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -116,56 +117,58 @@</span>
      }
      if (isNegativeNumber)
          letters[lettersSize - ++length] = hyphenMinus;
  
      ASSERT(length &lt;= lettersSize);
<span class="udiff-line-modified-removed">-     builder.append(&amp;letters[lettersSize - length], length);</span>
<span class="udiff-line-modified-added">+     return String { &amp;letters[lettersSize - length], length };</span>
  }
  
<span class="udiff-line-modified-removed">- template &lt;typename CharacterType&gt;</span>
<span class="udiff-line-modified-removed">- static NEVER_INLINE void toSymbolic(StringBuilder&amp; builder, int number, const CharacterType* symbols, unsigned symbolsSize)</span>
<span class="udiff-line-modified-added">+ template&lt;typename CharacterType&gt;</span>
<span class="udiff-line-modified-added">+ static NEVER_INLINE String toSymbolic(int number, const CharacterType* symbols, unsigned symbolsSize)</span>
  {
      ASSERT(number &gt; 0);
      ASSERT(symbolsSize &gt;= 1);
<span class="udiff-line-removed">-     unsigned numberShadow = number;</span>
<span class="udiff-line-removed">-     --numberShadow;</span>
  
<span class="udiff-line-modified-removed">-     // The asterisks list-style-type is the worst case; we show |numberShadow| asterisks.</span>
<span class="udiff-line-modified-removed">-     builder.append(symbols[numberShadow % symbolsSize]);</span>
<span class="udiff-line-modified-removed">-     unsigned numSymbols = numberShadow / symbolsSize;</span>
<span class="udiff-line-modified-removed">-     while (numSymbols--)</span>
<span class="udiff-line-modified-removed">-         builder.append(symbols[numberShadow % symbolsSize]);</span>
<span class="udiff-line-modified-added">+     // The asterisks list-style-type is the worst case; we show |number| asterisks.</span>
<span class="udiff-line-modified-added">+     CharacterType symbol = symbols[(number - 1) % symbolsSize];</span>
<span class="udiff-line-modified-added">+     unsigned count = (number - 1) / symbolsSize + 1;</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+     CharacterType* characters;</span>
<span class="udiff-line-added">+     String result = String::createUninitialized(count, characters);</span>
<span class="udiff-line-added">+     for (unsigned i = 0; i &lt; count; ++i)</span>
<span class="udiff-line-added">+         characters[i] = symbol;</span>
<span class="udiff-line-added">+     return result;</span>
  }
  
<span class="udiff-line-modified-removed">- template &lt;typename CharacterType&gt;</span>
<span class="udiff-line-modified-removed">- static NEVER_INLINE void toAlphabetic(StringBuilder&amp; builder, int number, const CharacterType* alphabet, unsigned alphabetSize)</span>
<span class="udiff-line-modified-added">+ template&lt;typename CharacterType&gt;</span>
<span class="udiff-line-modified-added">+ static NEVER_INLINE String toAlphabetic(int number, const CharacterType* alphabet, unsigned alphabetSize)</span>
  {
<span class="udiff-line-modified-removed">-     toAlphabeticOrNumeric(builder, number, alphabet, alphabetSize, AlphabeticSequence);</span>
<span class="udiff-line-modified-added">+     return toAlphabeticOrNumeric(number, alphabet, alphabetSize, SequenceType::Alphabetic);</span>
  }
  
<span class="udiff-line-modified-removed">- template &lt;typename CharacterType&gt;</span>
<span class="udiff-line-modified-removed">- static NEVER_INLINE void toNumeric(StringBuilder&amp; builder, int number, const CharacterType* numerals, unsigned numeralsSize)</span>
<span class="udiff-line-modified-added">+ template&lt;typename CharacterType&gt;</span>
<span class="udiff-line-modified-added">+ static NEVER_INLINE String toNumeric(int number, const CharacterType* numerals, unsigned numeralsSize)</span>
  {
<span class="udiff-line-modified-removed">-     toAlphabeticOrNumeric(builder, number, numerals, numeralsSize, NumericSequence);</span>
<span class="udiff-line-modified-added">+     return toAlphabeticOrNumeric(number, numerals, numeralsSize, SequenceType::Numeric);</span>
  }
  
<span class="udiff-line-modified-removed">- template &lt;typename CharacterType, size_t size&gt;</span>
<span class="udiff-line-modified-removed">- static inline void toAlphabetic(StringBuilder&amp; builder, int number, const CharacterType(&amp;alphabet)[size])</span>
<span class="udiff-line-modified-added">+ template&lt;typename CharacterType, size_t size&gt;</span>
<span class="udiff-line-modified-added">+ static inline String toAlphabetic(int number, const CharacterType(&amp;alphabet)[size])</span>
  {
<span class="udiff-line-modified-removed">-     toAlphabetic(builder, number, alphabet, size);</span>
<span class="udiff-line-modified-added">+     return toAlphabetic(number, alphabet, size);</span>
  }
  
<span class="udiff-line-modified-removed">- template &lt;typename CharacterType, size_t size&gt;</span>
<span class="udiff-line-modified-removed">- static inline void toNumeric(StringBuilder&amp; builder, int number, const CharacterType(&amp;alphabet)[size])</span>
<span class="udiff-line-modified-added">+ template&lt;typename CharacterType, size_t size&gt;</span>
<span class="udiff-line-modified-added">+ static inline String toNumeric(int number, const CharacterType(&amp;alphabet)[size])</span>
  {
<span class="udiff-line-modified-removed">-     toNumeric(builder, number, alphabet, size);</span>
<span class="udiff-line-modified-added">+     return toNumeric(number, alphabet, size);</span>
  }
  
<span class="udiff-line-modified-removed">- template &lt;typename CharacterType, size_t size&gt;</span>
<span class="udiff-line-modified-removed">- static inline void toSymbolic(StringBuilder&amp; builder, int number, const CharacterType(&amp;alphabet)[size])</span>
<span class="udiff-line-modified-added">+ template&lt;typename CharacterType, size_t size&gt;</span>
<span class="udiff-line-modified-added">+ static inline String toSymbolic(int number, const CharacterType(&amp;alphabet)[size])</span>
  {
<span class="udiff-line-modified-removed">-     toSymbolic(builder, number, alphabet, size);</span>
<span class="udiff-line-modified-added">+     return toSymbolic(number, alphabet, size);</span>
  }
  
  static NEVER_INLINE int toHebrewUnder1000(int number, UChar letters[5])
  {
      // FIXME: CSS3 mentions various refinements not implemented here.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -192,44 +195,43 @@</span>
      }
      ASSERT(length &lt;= 5);
      return length;
  }
  
<span class="udiff-line-modified-removed">- static NEVER_INLINE void toHebrew(StringBuilder&amp; builder, int number)</span>
<span class="udiff-line-modified-added">+ static NEVER_INLINE String toHebrew(int number)</span>
  {
      // FIXME: CSS3 mentions ways to make this work for much larger numbers.
      ASSERT(number &gt;= 0 &amp;&amp; number &lt;= 999999);
  
      if (number == 0) {
          static const UChar hebrewZero[3] = { 0x05D0, 0x05E4, 0x05E1 };
<span class="udiff-line-modified-removed">-         builder.append(hebrewZero, 3);</span>
<span class="udiff-line-removed">-         return;</span>
<span class="udiff-line-modified-added">+         return String { hebrewZero, 3 };</span>
      }
  
<span class="udiff-line-modified-removed">-     const int lettersSize = 11; // big enough for two 5-digit sequences plus a quote mark between</span>
<span class="udiff-line-modified-added">+     constexpr unsigned lettersSize = 11; // big enough for two 5-digit sequences plus a quote mark between</span>
      UChar letters[lettersSize];
  
<span class="udiff-line-modified-removed">-     int length;</span>
<span class="udiff-line-modified-added">+     unsigned length;</span>
      if (number &lt; 1000)
          length = 0;
      else {
          length = toHebrewUnder1000(number / 1000, letters);
          letters[length++] = &#39;\&#39;&#39;;
          number = number % 1000;
      }
      length += toHebrewUnder1000(number, letters + length);
  
      ASSERT(length &lt;= lettersSize);
<span class="udiff-line-modified-removed">-     builder.append(letters, length);</span>
<span class="udiff-line-modified-added">+     return String { letters, length };</span>
  }
  
<span class="udiff-line-modified-removed">- static NEVER_INLINE int toArmenianUnder10000(int number, bool upper, bool addCircumflex, UChar letters[9])</span>
<span class="udiff-line-modified-added">+ static NEVER_INLINE unsigned toArmenianUnder10000(int number, LetterCase letterCase, bool addCircumflex, UChar letters[9])</span>
  {
      ASSERT(number &gt;= 0 &amp;&amp; number &lt; 10000);
<span class="udiff-line-modified-removed">-     int length = 0;</span>
<span class="udiff-line-modified-added">+     unsigned length = 0;</span>
  
<span class="udiff-line-modified-removed">-     int lowerOffset = upper ? 0 : 0x0030;</span>
<span class="udiff-line-modified-added">+     int lowerOffset = letterCase == LetterCase::Upper ? 0 : 0x0030;</span>
  
      if (int thousands = number / 1000) {
          if (thousands == 7) {
              letters[length++] = 0x0552 + lowerOffset;
              if (addCircumflex)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -260,32 +262,32 @@</span>
      }
  
      return length;
  }
  
<span class="udiff-line-modified-removed">- static NEVER_INLINE void toArmenian(StringBuilder&amp; builder, int number, bool upper)</span>
<span class="udiff-line-modified-added">+ static NEVER_INLINE String toArmenian(int number, LetterCase letterCase)</span>
  {
      ASSERT(number &gt;= 1 &amp;&amp; number &lt;= 99999999);
  
<span class="udiff-line-modified-removed">-     const int lettersSize = 18; // twice what toArmenianUnder10000 needs</span>
<span class="udiff-line-modified-added">+     constexpr unsigned lettersSize = 18; // twice what toArmenianUnder10000 needs</span>
      UChar letters[lettersSize];
  
<span class="udiff-line-modified-removed">-     int length = toArmenianUnder10000(number / 10000, upper, true, letters);</span>
<span class="udiff-line-modified-removed">-     length += toArmenianUnder10000(number % 10000, upper, false, letters + length);</span>
<span class="udiff-line-modified-added">+     unsigned length = toArmenianUnder10000(number / 10000, letterCase, true, letters);</span>
<span class="udiff-line-modified-added">+     length += toArmenianUnder10000(number % 10000, letterCase, false, letters + length);</span>
  
      ASSERT(length &lt;= lettersSize);
<span class="udiff-line-modified-removed">-     builder.append(letters, length);</span>
<span class="udiff-line-modified-added">+     return String { letters, length };</span>
  }
  
<span class="udiff-line-modified-removed">- static NEVER_INLINE void toGeorgian(StringBuilder&amp; builder, int number)</span>
<span class="udiff-line-modified-added">+ static NEVER_INLINE String toGeorgian(int number)</span>
  {
      ASSERT(number &gt;= 1 &amp;&amp; number &lt;= 19999);
  
<span class="udiff-line-modified-removed">-     const int lettersSize = 5;</span>
<span class="udiff-line-modified-added">+     constexpr unsigned lettersSize = 5;</span>
      UChar letters[lettersSize];
  
<span class="udiff-line-modified-removed">-     int length = 0;</span>
<span class="udiff-line-modified-added">+     unsigned length = 0;</span>
  
      if (number &gt; 9999)
          letters[length++] = 0x10F5;
  
      if (int thousands = (number / 1000) % 10) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -315,16 +317,16 @@</span>
          };
          letters[length++] = georgianOnes[ones - 1];
      }
  
      ASSERT(length &lt;= lettersSize);
<span class="udiff-line-modified-removed">-     builder.append(letters, length);</span>
<span class="udiff-line-modified-added">+     return String { letters, length };</span>
  }
  
  // The table uses the order from the CSS3 specification:
  // first 3 group markers, then 3 digit markers, then ten digits.
<span class="udiff-line-modified-removed">- static NEVER_INLINE void toCJKIdeographic(StringBuilder&amp; builder, int number, const UChar table[16])</span>
<span class="udiff-line-modified-added">+ static NEVER_INLINE String toCJKIdeographic(int number, const UChar table[16])</span>
  {
      ASSERT(number &gt;= 0);
  
      enum AbstractCJKChar {
          noChar,
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -332,17 +334,15 @@</span>
          secondDigitMarker, thirdDigitMarker, fourthDigitMarker,
          digit0, digit1, digit2, digit3, digit4,
          digit5, digit6, digit7, digit8, digit9
      };
  
<span class="udiff-line-modified-removed">-     if (number == 0) {</span>
<span class="udiff-line-modified-removed">-         builder.append(table[digit0 - 1]);</span>
<span class="udiff-line-removed">-         return;</span>
<span class="udiff-line-removed">-     }</span>
<span class="udiff-line-modified-added">+     if (!number)</span>
<span class="udiff-line-modified-added">+         return String { &amp;table[digit0 - 1] , 1 };</span>
  
<span class="udiff-line-modified-removed">-     const int groupLength = 8; // 4 digits, 3 digit markers, and a group marker</span>
<span class="udiff-line-modified-removed">-     const int bufferLength = 4 * groupLength;</span>
<span class="udiff-line-modified-added">+     constexpr unsigned groupLength = 8; // 4 digits, 3 digit markers, and a group marker</span>
<span class="udiff-line-modified-added">+     constexpr unsigned bufferLength = 4 * groupLength;</span>
      AbstractCJKChar buffer[bufferLength] = { noChar };
  
      for (int i = 0; i &lt; 4; ++i) {
          int groupValue = number % 10000;
          number /= 10000;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -379,31 +379,30 @@</span>
          if (groupValue &lt; 20) {
              ASSERT(group[4] == noChar || group[4] == digit0 || group[4] == digit1);
              group[4] = noChar;
          }
  
<span class="udiff-line-modified-removed">-         if (number == 0)</span>
<span class="udiff-line-modified-added">+         if (!number)</span>
              break;
      }
  
<span class="udiff-line-modified-removed">-     // Convert into characters, omitting consecutive runs of digit0 and</span>
<span class="udiff-line-modified-removed">-     // any trailing digit0.</span>
<span class="udiff-line-removed">-     int length = 0;</span>
<span class="udiff-line-modified-added">+     // Convert into characters, omitting consecutive runs of digit0 and trailing digit0.</span>
<span class="udiff-line-modified-added">+     unsigned length = 0;</span>
      UChar characters[bufferLength];
      AbstractCJKChar last = noChar;
<span class="udiff-line-modified-removed">-     for (int i = 0; i &lt; bufferLength; ++i) {</span>
<span class="udiff-line-modified-added">+     for (unsigned i = 0; i &lt; bufferLength; ++i) {</span>
          AbstractCJKChar a = buffer[i];
          if (a != noChar) {
              if (a != digit0 || last != digit0)
                  characters[length++] = table[a - 1];
              last = a;
          }
      }
      if (last == digit0)
          --length;
  
<span class="udiff-line-modified-removed">-     builder.append(characters, length);</span>
<span class="udiff-line-modified-added">+     return String { characters, length };</span>
  }
  
  static ListStyleType effectiveListMarkerType(ListStyleType type, int value)
  {
      // Note, the following switch statement has been explicitly grouped
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -504,11 +503,11 @@</span>
  }
  
  static UChar listMarkerSuffix(ListStyleType type, int value)
  {
      // If the list-style-type cannot represent |value| because it&#39;s outside its
<span class="udiff-line-modified-removed">-     // ordinal range then we fall back to some list style that can represent |value|.</span>
<span class="udiff-line-modified-added">+     // ordinal range then we fall back to another list style that can represent |value|.</span>
      ListStyleType effectiveType = effectiveListMarkerType(type, value);
  
      // Note, the following switch statement has been explicitly
      // grouped by list-style-type suffix.
      switch (effectiveType) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -602,230 +601,196 @@</span>
      return &#39;.&#39;;
  }
  
  String listMarkerText(ListStyleType type, int value)
  {
<span class="udiff-line-modified-removed">-     StringBuilder builder;</span>
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-removed">-     // If the list-style-type, say hebrew, cannot represent |value| because it&#39;s outside</span>
<span class="udiff-line-removed">-     // its ordinal range then we fallback to some list style that can represent |value|.</span>
<span class="udiff-line-modified-added">+     // If the list-style-type cannot represent |value| because it&#39;s outside its</span>
<span class="udiff-line-modified-added">+     // ordinal range then we fall back to another list style that can represent |value|.</span>
      switch (effectiveListMarkerType(type, value)) {
      case ListStyleType::None:
          return emptyString();
  
      case ListStyleType::Asterisks: {
          static const LChar asterisksSymbols[1] = { 0x2A };
<span class="udiff-line-modified-removed">-         toSymbolic(builder, value, asterisksSymbols);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toSymbolic(value, asterisksSymbols);</span>
      }
      // We use the same characters for text security.
      // See RenderText::setInternalString.
      case ListStyleType::Circle:
<span class="udiff-line-modified-removed">-         builder.append(whiteBullet);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return String { &amp;whiteBullet, 1 };</span>
      case ListStyleType::Disc:
<span class="udiff-line-modified-removed">-         builder.append(bullet);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return String { &amp;bullet, 1 };</span>
      case ListStyleType::Footnotes: {
          static const UChar footnotesSymbols[4] = { 0x002A, 0x2051, 0x2020, 0x2021 };
<span class="udiff-line-modified-removed">-         toSymbolic(builder, value, footnotesSymbols);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toSymbolic(value, footnotesSymbols);</span>
      }
      case ListStyleType::Square:
<span class="udiff-line-modified-removed">-         // The CSS 2.1 test suite uses U+25EE BLACK MEDIUM SMALL SQUARE</span>
<span class="udiff-line-modified-removed">-         // instead, but I think this looks better.</span>
<span class="udiff-line-modified-removed">-         builder.append(blackSquare);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         // The CSS 2.1 test suite uses U+25EE BLACK MEDIUM SMALL SQUARE instead,</span>
<span class="udiff-line-modified-added">+         // but we used this because we thought it looked better.</span>
<span class="udiff-line-modified-added">+         return String { &amp;blackSquare, 1 };</span>
  
      case ListStyleType::Decimal:
<span class="udiff-line-modified-removed">-         builder.appendNumber(value);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return String::number(value);</span>
  
      case ListStyleType::DecimalLeadingZero:
<span class="udiff-line-modified-removed">-         if (value &lt; -9 || value &gt; 9) {</span>
<span class="udiff-line-modified-removed">-             builder.appendNumber(value);</span>
<span class="udiff-line-modified-removed">-             break;</span>
<span class="udiff-line-modified-added">+         if (value &gt;= 0 &amp;&amp; value &lt;= 9) {</span>
<span class="udiff-line-modified-added">+             LChar characters[2] = { &#39;0&#39;, static_cast&lt;LChar&gt;(&#39;0&#39; + value) }; // 00 to 09</span>
<span class="udiff-line-modified-added">+             return String { characters, 2 };</span>
          }
<span class="udiff-line-modified-removed">-         if (value &lt; 0) {</span>
<span class="udiff-line-modified-removed">-             builder.appendLiteral(&quot;-0&quot;);</span>
<span class="udiff-line-modified-removed">-             builder.appendNumber(-value); // -01 to -09</span>
<span class="udiff-line-removed">-             break;</span>
<span class="udiff-line-modified-added">+         if (value &gt;= -9 &amp;&amp; value &lt;= -1) {</span>
<span class="udiff-line-modified-added">+             LChar characters[3] = { &#39;-&#39;, &#39;0&#39;, static_cast&lt;LChar&gt;(&#39;0&#39; - value) }; // -01 to -09</span>
<span class="udiff-line-modified-added">+             return String { characters, 3 };</span>
          }
<span class="udiff-line-modified-removed">-         builder.append(&#39;0&#39;);</span>
<span class="udiff-line-removed">-         builder.appendNumber(value); // 00 to 09</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return String::number(value);</span>
  
      case ListStyleType::ArabicIndic: {
          static const UChar arabicIndicNumerals[10] = {
              0x0660, 0x0661, 0x0662, 0x0663, 0x0664, 0x0665, 0x0666, 0x0667, 0x0668, 0x0669
          };
<span class="udiff-line-modified-removed">-         toNumeric(builder, value, arabicIndicNumerals);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toNumeric(value, arabicIndicNumerals);</span>
      }
  
      case ListStyleType::Binary: {
          static const LChar binaryNumerals[2] = { &#39;0&#39;, &#39;1&#39; };
<span class="udiff-line-modified-removed">-         toNumeric(builder, value, binaryNumerals);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toNumeric(value, binaryNumerals);</span>
      }
  
      case ListStyleType::Bengali: {
          static const UChar bengaliNumerals[10] = {
              0x09E6, 0x09E7, 0x09E8, 0x09E9, 0x09EA, 0x09EB, 0x09EC, 0x09ED, 0x09EE, 0x09EF
          };
<span class="udiff-line-modified-removed">-         toNumeric(builder, value, bengaliNumerals);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toNumeric(value, bengaliNumerals);</span>
      }
  
      case ListStyleType::Cambodian:
      case ListStyleType::Khmer: {
          static const UChar khmerNumerals[10] = {
              0x17E0, 0x17E1, 0x17E2, 0x17E3, 0x17E4, 0x17E5, 0x17E6, 0x17E7, 0x17E8, 0x17E9
          };
<span class="udiff-line-modified-removed">-         toNumeric(builder, value, khmerNumerals);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toNumeric(value, khmerNumerals);</span>
      }
      case ListStyleType::Devanagari: {
          static const UChar devanagariNumerals[10] = {
              0x0966, 0x0967, 0x0968, 0x0969, 0x096A, 0x096B, 0x096C, 0x096D, 0x096E, 0x096F
          };
<span class="udiff-line-modified-removed">-         toNumeric(builder, value, devanagariNumerals);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toNumeric(value, devanagariNumerals);</span>
      }
      case ListStyleType::Gujarati: {
          static const UChar gujaratiNumerals[10] = {
              0x0AE6, 0x0AE7, 0x0AE8, 0x0AE9, 0x0AEA, 0x0AEB, 0x0AEC, 0x0AED, 0x0AEE, 0x0AEF
          };
<span class="udiff-line-modified-removed">-         toNumeric(builder, value, gujaratiNumerals);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toNumeric(value, gujaratiNumerals);</span>
      }
      case ListStyleType::Gurmukhi: {
          static const UChar gurmukhiNumerals[10] = {
              0x0A66, 0x0A67, 0x0A68, 0x0A69, 0x0A6A, 0x0A6B, 0x0A6C, 0x0A6D, 0x0A6E, 0x0A6F
          };
<span class="udiff-line-modified-removed">-         toNumeric(builder, value, gurmukhiNumerals);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toNumeric(value, gurmukhiNumerals);</span>
      }
      case ListStyleType::Kannada: {
          static const UChar kannadaNumerals[10] = {
              0x0CE6, 0x0CE7, 0x0CE8, 0x0CE9, 0x0CEA, 0x0CEB, 0x0CEC, 0x0CED, 0x0CEE, 0x0CEF
          };
<span class="udiff-line-modified-removed">-         toNumeric(builder, value, kannadaNumerals);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toNumeric(value, kannadaNumerals);</span>
      }
      case ListStyleType::LowerHexadecimal: {
          static const LChar lowerHexadecimalNumerals[16] = {
              &#39;0&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;5&#39;, &#39;6&#39;, &#39;7&#39;, &#39;8&#39;, &#39;9&#39;, &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39;
          };
<span class="udiff-line-modified-removed">-         toNumeric(builder, value, lowerHexadecimalNumerals);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toNumeric(value, lowerHexadecimalNumerals);</span>
      }
      case ListStyleType::Lao: {
          static const UChar laoNumerals[10] = {
              0x0ED0, 0x0ED1, 0x0ED2, 0x0ED3, 0x0ED4, 0x0ED5, 0x0ED6, 0x0ED7, 0x0ED8, 0x0ED9
          };
<span class="udiff-line-modified-removed">-         toNumeric(builder, value, laoNumerals);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toNumeric(value, laoNumerals);</span>
      }
      case ListStyleType::Malayalam: {
          static const UChar malayalamNumerals[10] = {
              0x0D66, 0x0D67, 0x0D68, 0x0D69, 0x0D6A, 0x0D6B, 0x0D6C, 0x0D6D, 0x0D6E, 0x0D6F
          };
<span class="udiff-line-modified-removed">-         toNumeric(builder, value, malayalamNumerals);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toNumeric(value, malayalamNumerals);</span>
      }
      case ListStyleType::Mongolian: {
          static const UChar mongolianNumerals[10] = {
              0x1810, 0x1811, 0x1812, 0x1813, 0x1814, 0x1815, 0x1816, 0x1817, 0x1818, 0x1819
          };
<span class="udiff-line-modified-removed">-         toNumeric(builder, value, mongolianNumerals);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toNumeric(value, mongolianNumerals);</span>
      }
      case ListStyleType::Myanmar: {
          static const UChar myanmarNumerals[10] = {
              0x1040, 0x1041, 0x1042, 0x1043, 0x1044, 0x1045, 0x1046, 0x1047, 0x1048, 0x1049
          };
<span class="udiff-line-modified-removed">-         toNumeric(builder, value, myanmarNumerals);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toNumeric(value, myanmarNumerals);</span>
      }
      case ListStyleType::Octal: {
          static const LChar octalNumerals[8] = {
              &#39;0&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;5&#39;, &#39;6&#39;, &#39;7&#39;
          };
<span class="udiff-line-modified-removed">-         toNumeric(builder, value, octalNumerals);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toNumeric(value, octalNumerals);</span>
      }
      case ListStyleType::Oriya: {
          static const UChar oriyaNumerals[10] = {
              0x0B66, 0x0B67, 0x0B68, 0x0B69, 0x0B6A, 0x0B6B, 0x0B6C, 0x0B6D, 0x0B6E, 0x0B6F
          };
<span class="udiff-line-modified-removed">-         toNumeric(builder, value, oriyaNumerals);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toNumeric(value, oriyaNumerals);</span>
      }
      case ListStyleType::Persian:
      case ListStyleType::Urdu: {
          static const UChar urduNumerals[10] = {
              0x06F0, 0x06F1, 0x06F2, 0x06F3, 0x06F4, 0x06F5, 0x06F6, 0x06F7, 0x06F8, 0x06F9
          };
<span class="udiff-line-modified-removed">-         toNumeric(builder, value, urduNumerals);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toNumeric(value, urduNumerals);</span>
      }
      case ListStyleType::Telugu: {
          static const UChar teluguNumerals[10] = {
              0x0C66, 0x0C67, 0x0C68, 0x0C69, 0x0C6A, 0x0C6B, 0x0C6C, 0x0C6D, 0x0C6E, 0x0C6F
          };
<span class="udiff-line-modified-removed">-         toNumeric(builder, value, teluguNumerals);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toNumeric(value, teluguNumerals);</span>
      }
      case ListStyleType::Tibetan: {
          static const UChar tibetanNumerals[10] = {
              0x0F20, 0x0F21, 0x0F22, 0x0F23, 0x0F24, 0x0F25, 0x0F26, 0x0F27, 0x0F28, 0x0F29
          };
<span class="udiff-line-modified-removed">-         toNumeric(builder, value, tibetanNumerals);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toNumeric(value, tibetanNumerals);</span>
      }
      case ListStyleType::Thai: {
          static const UChar thaiNumerals[10] = {
              0x0E50, 0x0E51, 0x0E52, 0x0E53, 0x0E54, 0x0E55, 0x0E56, 0x0E57, 0x0E58, 0x0E59
          };
<span class="udiff-line-modified-removed">-         toNumeric(builder, value, thaiNumerals);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toNumeric(value, thaiNumerals);</span>
      }
      case ListStyleType::UpperHexadecimal: {
          static const LChar upperHexadecimalNumerals[16] = {
              &#39;0&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;5&#39;, &#39;6&#39;, &#39;7&#39;, &#39;8&#39;, &#39;9&#39;, &#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;, &#39;F&#39;
          };
<span class="udiff-line-modified-removed">-         toNumeric(builder, value, upperHexadecimalNumerals);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toNumeric(value, upperHexadecimalNumerals);</span>
      }
  
      case ListStyleType::LowerAlpha:
      case ListStyleType::LowerLatin: {
          static const LChar lowerLatinAlphabet[26] = {
              &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39;, &#39;g&#39;, &#39;h&#39;, &#39;i&#39;, &#39;j&#39;, &#39;k&#39;, &#39;l&#39;, &#39;m&#39;,
              &#39;n&#39;, &#39;o&#39;, &#39;p&#39;, &#39;q&#39;, &#39;r&#39;, &#39;s&#39;, &#39;t&#39;, &#39;u&#39;, &#39;v&#39;, &#39;w&#39;, &#39;x&#39;, &#39;y&#39;, &#39;z&#39;
          };
<span class="udiff-line-modified-removed">-         toAlphabetic(builder, value, lowerLatinAlphabet);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toAlphabetic(value, lowerLatinAlphabet);</span>
      }
      case ListStyleType::UpperAlpha:
      case ListStyleType::UpperLatin: {
          static const LChar upperLatinAlphabet[26] = {
              &#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;, &#39;F&#39;, &#39;G&#39;, &#39;H&#39;, &#39;I&#39;, &#39;J&#39;, &#39;K&#39;, &#39;L&#39;, &#39;M&#39;,
              &#39;N&#39;, &#39;O&#39;, &#39;P&#39;, &#39;Q&#39;, &#39;R&#39;, &#39;S&#39;, &#39;T&#39;, &#39;U&#39;, &#39;V&#39;, &#39;W&#39;, &#39;X&#39;, &#39;Y&#39;, &#39;Z&#39;
          };
<span class="udiff-line-modified-removed">-         toAlphabetic(builder, value, upperLatinAlphabet);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toAlphabetic(value, upperLatinAlphabet);</span>
      }
      case ListStyleType::LowerGreek: {
          static const UChar lowerGreekAlphabet[24] = {
              0x03B1, 0x03B2, 0x03B3, 0x03B4, 0x03B5, 0x03B6, 0x03B7, 0x03B8,
              0x03B9, 0x03BA, 0x03BB, 0x03BC, 0x03BD, 0x03BE, 0x03BF, 0x03C0,
              0x03C1, 0x03C3, 0x03C4, 0x03C5, 0x03C6, 0x03C7, 0x03C8, 0x03C9
          };
<span class="udiff-line-modified-removed">-         toAlphabetic(builder, value, lowerGreekAlphabet);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toAlphabetic(value, lowerGreekAlphabet);</span>
      }
  
      case ListStyleType::Hiragana: {
          // FIXME: This table comes from the CSS3 draft, and is probably
          // incorrect, given the comments in that draft.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -835,12 +800,11 @@</span>
              0x3061, 0x3064, 0x3066, 0x3068, 0x306A, 0x306B, 0x306C, 0x306D,
              0x306E, 0x306F, 0x3072, 0x3075, 0x3078, 0x307B, 0x307E, 0x307F,
              0x3080, 0x3081, 0x3082, 0x3084, 0x3086, 0x3088, 0x3089, 0x308A,
              0x308B, 0x308C, 0x308D, 0x308F, 0x3090, 0x3091, 0x3092, 0x3093
          };
<span class="udiff-line-modified-removed">-         toAlphabetic(builder, value, hiraganaAlphabet);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toAlphabetic(value, hiraganaAlphabet);</span>
      }
      case ListStyleType::HiraganaIroha: {
          // FIXME: This table comes from the CSS3 draft, and is probably
          // incorrect, given the comments in that draft.
          static const UChar hiraganaIrohaAlphabet[47] = {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -849,12 +813,11 @@</span>
              0x308C, 0x305D, 0x3064, 0x306D, 0x306A, 0x3089, 0x3080, 0x3046,
              0x3090, 0x306E, 0x304A, 0x304F, 0x3084, 0x307E, 0x3051, 0x3075,
              0x3053, 0x3048, 0x3066, 0x3042, 0x3055, 0x304D, 0x3086, 0x3081,
              0x307F, 0x3057, 0x3091, 0x3072, 0x3082, 0x305B, 0x3059
          };
<span class="udiff-line-modified-removed">-         toAlphabetic(builder, value, hiraganaIrohaAlphabet);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toAlphabetic(value, hiraganaIrohaAlphabet);</span>
      }
      case ListStyleType::Katakana: {
          // FIXME: This table comes from the CSS3 draft, and is probably
          // incorrect, given the comments in that draft.
          static const UChar katakanaAlphabet[48] = {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -863,12 +826,11 @@</span>
              0x30C1, 0x30C4, 0x30C6, 0x30C8, 0x30CA, 0x30CB, 0x30CC, 0x30CD,
              0x30CE, 0x30CF, 0x30D2, 0x30D5, 0x30D8, 0x30DB, 0x30DE, 0x30DF,
              0x30E0, 0x30E1, 0x30E2, 0x30E4, 0x30E6, 0x30E8, 0x30E9, 0x30EA,
              0x30EB, 0x30EC, 0x30ED, 0x30EF, 0x30F0, 0x30F1, 0x30F2, 0x30F3
          };
<span class="udiff-line-modified-removed">-         toAlphabetic(builder, value, katakanaAlphabet);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toAlphabetic(value, katakanaAlphabet);</span>
      }
      case ListStyleType::KatakanaIroha: {
          // FIXME: This table comes from the CSS3 draft, and is probably
          // incorrect, given the comments in that draft.
          static const UChar katakanaIrohaAlphabet[47] = {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -877,248 +839,221 @@</span>
              0x30EC, 0x30BD, 0x30C4, 0x30CD, 0x30CA, 0x30E9, 0x30E0, 0x30A6,
              0x30F0, 0x30CE, 0x30AA, 0x30AF, 0x30E4, 0x30DE, 0x30B1, 0x30D5,
              0x30B3, 0x30A8, 0x30C6, 0x30A2, 0x30B5, 0x30AD, 0x30E6, 0x30E1,
              0x30DF, 0x30B7, 0x30F1, 0x30D2, 0x30E2, 0x30BB, 0x30B9
          };
<span class="udiff-line-modified-removed">-         toAlphabetic(builder, value, katakanaIrohaAlphabet);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toAlphabetic(value, katakanaIrohaAlphabet);</span>
      }
  
      case ListStyleType::Afar:
      case ListStyleType::EthiopicHalehameAaEt:
      case ListStyleType::EthiopicHalehameAaEr: {
          static const UChar ethiopicHalehameAaErAlphabet[18] = {
              0x1200, 0x1208, 0x1210, 0x1218, 0x1228, 0x1230, 0x1260, 0x1270, 0x1290,
              0x12A0, 0x12A8, 0x12C8, 0x12D0, 0x12E8, 0x12F0, 0x1308, 0x1338, 0x1348
          };
<span class="udiff-line-modified-removed">-         toAlphabetic(builder, value, ethiopicHalehameAaErAlphabet);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toAlphabetic(value, ethiopicHalehameAaErAlphabet);</span>
      }
      case ListStyleType::Amharic:
      case ListStyleType::EthiopicHalehameAmEt: {
          static const UChar ethiopicHalehameAmEtAlphabet[33] = {
              0x1200, 0x1208, 0x1210, 0x1218, 0x1220, 0x1228, 0x1230, 0x1238, 0x1240,
              0x1260, 0x1270, 0x1278, 0x1280, 0x1290, 0x1298, 0x12A0, 0x12A8, 0x12B8,
              0x12C8, 0x12D0, 0x12D8, 0x12E0, 0x12E8, 0x12F0, 0x1300, 0x1308, 0x1320,
              0x1328, 0x1330, 0x1338, 0x1340, 0x1348, 0x1350
          };
<span class="udiff-line-modified-removed">-         toAlphabetic(builder, value, ethiopicHalehameAmEtAlphabet);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toAlphabetic(value, ethiopicHalehameAmEtAlphabet);</span>
      }
      case ListStyleType::AmharicAbegede:
      case ListStyleType::EthiopicAbegedeAmEt: {
          static const UChar ethiopicAbegedeAmEtAlphabet[33] = {
              0x12A0, 0x1260, 0x1308, 0x12F0, 0x1300, 0x1200, 0x12C8, 0x12D8, 0x12E0,
              0x1210, 0x1320, 0x1328, 0x12E8, 0x12A8, 0x12B8, 0x1208, 0x1218, 0x1290,
              0x1298, 0x1220, 0x12D0, 0x1348, 0x1338, 0x1240, 0x1228, 0x1230, 0x1238,
              0x1270, 0x1278, 0x1280, 0x1340, 0x1330, 0x1350
          };
<span class="udiff-line-modified-removed">-         toAlphabetic(builder, value, ethiopicAbegedeAmEtAlphabet);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toAlphabetic(value, ethiopicAbegedeAmEtAlphabet);</span>
      }
      case ListStyleType::CjkEarthlyBranch: {
          static const UChar cjkEarthlyBranchAlphabet[12] = {
              0x5B50, 0x4E11, 0x5BC5, 0x536F, 0x8FB0, 0x5DF3, 0x5348, 0x672A, 0x7533,
              0x9149, 0x620C, 0x4EA5
          };
<span class="udiff-line-modified-removed">-         toAlphabetic(builder, value, cjkEarthlyBranchAlphabet);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toAlphabetic(value, cjkEarthlyBranchAlphabet);</span>
      }
      case ListStyleType::CjkHeavenlyStem: {
          static const UChar cjkHeavenlyStemAlphabet[10] = {
              0x7532, 0x4E59, 0x4E19, 0x4E01, 0x620A, 0x5DF1, 0x5E9A, 0x8F9B, 0x58EC,
              0x7678
          };
<span class="udiff-line-modified-removed">-         toAlphabetic(builder, value, cjkHeavenlyStemAlphabet);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toAlphabetic(value, cjkHeavenlyStemAlphabet);</span>
      }
      case ListStyleType::Ethiopic:
      case ListStyleType::EthiopicHalehameGez: {
          static const UChar ethiopicHalehameGezAlphabet[26] = {
              0x1200, 0x1208, 0x1210, 0x1218, 0x1220, 0x1228, 0x1230, 0x1240, 0x1260,
              0x1270, 0x1280, 0x1290, 0x12A0, 0x12A8, 0x12C8, 0x12D0, 0x12D8, 0x12E8,
              0x12F0, 0x1308, 0x1320, 0x1330, 0x1338, 0x1340, 0x1348, 0x1350
          };
<span class="udiff-line-modified-removed">-         toAlphabetic(builder, value, ethiopicHalehameGezAlphabet);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toAlphabetic(value, ethiopicHalehameGezAlphabet);</span>
      }
      case ListStyleType::EthiopicAbegede:
      case ListStyleType::EthiopicAbegedeGez: {
          static const UChar ethiopicAbegedeGezAlphabet[26] = {
              0x12A0, 0x1260, 0x1308, 0x12F0, 0x1200, 0x12C8, 0x12D8, 0x1210, 0x1320,
              0x12E8, 0x12A8, 0x1208, 0x1218, 0x1290, 0x1220, 0x12D0, 0x1348, 0x1338,
              0x1240, 0x1228, 0x1230, 0x1270, 0x1280, 0x1340, 0x1330, 0x1350
          };
<span class="udiff-line-modified-removed">-         toAlphabetic(builder, value, ethiopicAbegedeGezAlphabet);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toAlphabetic(value, ethiopicAbegedeGezAlphabet);</span>
      }
      case ListStyleType::HangulConsonant: {
          static const UChar hangulConsonantAlphabet[14] = {
              0x3131, 0x3134, 0x3137, 0x3139, 0x3141, 0x3142, 0x3145, 0x3147, 0x3148,
              0x314A, 0x314B, 0x314C, 0x314D, 0x314E
          };
<span class="udiff-line-modified-removed">-         toAlphabetic(builder, value, hangulConsonantAlphabet);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toAlphabetic(value, hangulConsonantAlphabet);</span>
      }
      case ListStyleType::Hangul: {
          static const UChar hangulAlphabet[14] = {
              0xAC00, 0xB098, 0xB2E4, 0xB77C, 0xB9C8, 0xBC14, 0xC0AC, 0xC544, 0xC790,
              0xCC28, 0xCE74, 0xD0C0, 0xD30C, 0xD558
          };
<span class="udiff-line-modified-removed">-         toAlphabetic(builder, value, hangulAlphabet);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toAlphabetic(value, hangulAlphabet);</span>
      }
      case ListStyleType::Oromo:
      case ListStyleType::EthiopicHalehameOmEt: {
          static const UChar ethiopicHalehameOmEtAlphabet[25] = {
              0x1200, 0x1208, 0x1218, 0x1228, 0x1230, 0x1238, 0x1240, 0x1260, 0x1270,
              0x1278, 0x1290, 0x1298, 0x12A0, 0x12A8, 0x12C8, 0x12E8, 0x12F0, 0x12F8,
              0x1300, 0x1308, 0x1320, 0x1328, 0x1338, 0x1330, 0x1348
          };
<span class="udiff-line-modified-removed">-         toAlphabetic(builder, value, ethiopicHalehameOmEtAlphabet);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toAlphabetic(value, ethiopicHalehameOmEtAlphabet);</span>
      }
      case ListStyleType::Sidama:
      case ListStyleType::EthiopicHalehameSidEt: {
          static const UChar ethiopicHalehameSidEtAlphabet[26] = {
              0x1200, 0x1208, 0x1210, 0x1218, 0x1228, 0x1230, 0x1238, 0x1240, 0x1260,
              0x1270, 0x1278, 0x1290, 0x1298, 0x12A0, 0x12A8, 0x12C8, 0x12E8, 0x12F0,
              0x12F8, 0x1300, 0x1308, 0x1320, 0x1328, 0x1338, 0x1330, 0x1348
          };
<span class="udiff-line-modified-removed">-         toAlphabetic(builder, value, ethiopicHalehameSidEtAlphabet);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toAlphabetic(value, ethiopicHalehameSidEtAlphabet);</span>
      }
      case ListStyleType::Somali:
      case ListStyleType::EthiopicHalehameSoEt: {
          static const UChar ethiopicHalehameSoEtAlphabet[22] = {
              0x1200, 0x1208, 0x1210, 0x1218, 0x1228, 0x1230, 0x1238, 0x1240, 0x1260,
              0x1270, 0x1290, 0x12A0, 0x12A8, 0x12B8, 0x12C8, 0x12D0, 0x12E8, 0x12F0,
              0x1300, 0x1308, 0x1338, 0x1348
          };
<span class="udiff-line-modified-removed">-         toAlphabetic(builder, value, ethiopicHalehameSoEtAlphabet);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toAlphabetic(value, ethiopicHalehameSoEtAlphabet);</span>
      }
      case ListStyleType::Tigre:
      case ListStyleType::EthiopicHalehameTig: {
          static const UChar ethiopicHalehameTigAlphabet[27] = {
              0x1200, 0x1208, 0x1210, 0x1218, 0x1228, 0x1230, 0x1238, 0x1240, 0x1260,
              0x1270, 0x1278, 0x1290, 0x12A0, 0x12A8, 0x12C8, 0x12D0, 0x12D8, 0x12E8,
              0x12F0, 0x1300, 0x1308, 0x1320, 0x1328, 0x1338, 0x1330, 0x1348, 0x1350
          };
<span class="udiff-line-modified-removed">-         toAlphabetic(builder, value, ethiopicHalehameTigAlphabet);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toAlphabetic(value, ethiopicHalehameTigAlphabet);</span>
      }
      case ListStyleType::TigrinyaEr:
      case ListStyleType::EthiopicHalehameTiEr: {
          static const UChar ethiopicHalehameTiErAlphabet[31] = {
              0x1200, 0x1208, 0x1210, 0x1218, 0x1228, 0x1230, 0x1238, 0x1240, 0x1250,
              0x1260, 0x1270, 0x1278, 0x1290, 0x1298, 0x12A0, 0x12A8, 0x12B8, 0x12C8,
              0x12D0, 0x12D8, 0x12E0, 0x12E8, 0x12F0, 0x1300, 0x1308, 0x1320, 0x1328,
              0x1330, 0x1338, 0x1348, 0x1350
          };
<span class="udiff-line-modified-removed">-         toAlphabetic(builder, value, ethiopicHalehameTiErAlphabet);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toAlphabetic(value, ethiopicHalehameTiErAlphabet);</span>
      }
      case ListStyleType::TigrinyaErAbegede:
      case ListStyleType::EthiopicAbegedeTiEr: {
          static const UChar ethiopicAbegedeTiErAlphabet[31] = {
              0x12A0, 0x1260, 0x1308, 0x12F0, 0x1300, 0x1200, 0x12C8, 0x12D8, 0x12E0,
              0x1210, 0x1320, 0x1328, 0x12E8, 0x12A8, 0x12B8, 0x1208, 0x1218, 0x1290,
              0x1298, 0x12D0, 0x1348, 0x1338, 0x1240, 0x1250, 0x1228, 0x1230, 0x1238,
              0x1270, 0x1278, 0x1330, 0x1350
          };
<span class="udiff-line-modified-removed">-         toAlphabetic(builder, value, ethiopicAbegedeTiErAlphabet);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toAlphabetic(value, ethiopicAbegedeTiErAlphabet);</span>
      }
      case ListStyleType::TigrinyaEt:
      case ListStyleType::EthiopicHalehameTiEt: {
          static const UChar ethiopicHalehameTiEtAlphabet[34] = {
              0x1200, 0x1208, 0x1210, 0x1218, 0x1220, 0x1228, 0x1230, 0x1238, 0x1240,
              0x1250, 0x1260, 0x1270, 0x1278, 0x1280, 0x1290, 0x1298, 0x12A0, 0x12A8,
              0x12B8, 0x12C8, 0x12D0, 0x12D8, 0x12E0, 0x12E8, 0x12F0, 0x1300, 0x1308,
              0x1320, 0x1328, 0x1330, 0x1338, 0x1340, 0x1348, 0x1350
          };
<span class="udiff-line-modified-removed">-         toAlphabetic(builder, value, ethiopicHalehameTiEtAlphabet);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toAlphabetic(value, ethiopicHalehameTiEtAlphabet);</span>
      }
      case ListStyleType::TigrinyaEtAbegede:
      case ListStyleType::EthiopicAbegedeTiEt: {
          static const UChar ethiopicAbegedeTiEtAlphabet[34] = {
              0x12A0, 0x1260, 0x1308, 0x12F0, 0x1300, 0x1200, 0x12C8, 0x12D8, 0x12E0,
              0x1210, 0x1320, 0x1328, 0x12E8, 0x12A8, 0x12B8, 0x1208, 0x1218, 0x1290,
              0x1298, 0x1220, 0x12D0, 0x1348, 0x1338, 0x1240, 0x1250, 0x1228, 0x1230,
              0x1238, 0x1270, 0x1278, 0x1280, 0x1340, 0x1330, 0x1350
          };
<span class="udiff-line-modified-removed">-         toAlphabetic(builder, value, ethiopicAbegedeTiEtAlphabet);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toAlphabetic(value, ethiopicAbegedeTiEtAlphabet);</span>
      }
      case ListStyleType::UpperGreek: {
          static const UChar upperGreekAlphabet[24] = {
              0x0391, 0x0392, 0x0393, 0x0394, 0x0395, 0x0396, 0x0397, 0x0398, 0x0399,
              0x039A, 0x039B, 0x039C, 0x039D, 0x039E, 0x039F, 0x03A0, 0x03A1, 0x03A3,
              0x03A4, 0x03A5, 0x03A6, 0x03A7, 0x03A8, 0x03A9
          };
<span class="udiff-line-modified-removed">-         toAlphabetic(builder, value, upperGreekAlphabet);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toAlphabetic(value, upperGreekAlphabet);</span>
      }
      case ListStyleType::LowerNorwegian: {
          static const LChar lowerNorwegianAlphabet[29] = {
              0x61, 0x62, 0x63, 0x64, 0x65, 0x66, 0x67, 0x68, 0x69,
              0x6A, 0x6B, 0x6C, 0x6D, 0x6E, 0x6F, 0x70, 0x71, 0x72,
              0x73, 0x74, 0x75, 0x76, 0x77, 0x78, 0x79, 0x7A, 0xE6,
              0xF8, 0xE5
          };
<span class="udiff-line-modified-removed">-         toAlphabetic(builder, value, lowerNorwegianAlphabet);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toAlphabetic(value, lowerNorwegianAlphabet);</span>
      }
      case ListStyleType::UpperNorwegian: {
          static const LChar upperNorwegianAlphabet[29] = {
              0x41, 0x42, 0x43, 0x44, 0x45, 0x46, 0x47, 0x48, 0x49,
              0x4A, 0x4B, 0x4C, 0x4D, 0x4E, 0x4F, 0x50, 0x51, 0x52,
              0x53, 0x54, 0x55, 0x56, 0x57, 0x58, 0x59, 0x5A, 0xC6,
              0xD8, 0xC5
          };
<span class="udiff-line-modified-removed">-         toAlphabetic(builder, value, upperNorwegianAlphabet);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toAlphabetic(value, upperNorwegianAlphabet);</span>
      }
      case ListStyleType::CJKIdeographic: {
          static const UChar traditionalChineseInformalTable[16] = {
              0x842C, 0x5104, 0x5146,
              0x5341, 0x767E, 0x5343,
              0x96F6, 0x4E00, 0x4E8C, 0x4E09, 0x56DB,
              0x4E94, 0x516D, 0x4E03, 0x516B, 0x4E5D
          };
<span class="udiff-line-modified-removed">-         toCJKIdeographic(builder, value, traditionalChineseInformalTable);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toCJKIdeographic(value, traditionalChineseInformalTable);</span>
      }
  
      case ListStyleType::LowerRoman:
<span class="udiff-line-modified-removed">-         toRoman(builder, value, false);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toRoman(value, LetterCase::Lower);</span>
      case ListStyleType::UpperRoman:
<span class="udiff-line-modified-removed">-         toRoman(builder, value, true);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toRoman(value, LetterCase::Upper);</span>
  
<span class="udiff-line-added">+     // A CSS3 draft said that &quot;armenian&quot; means &quot;lower-armenian&quot;. But the CSS2.1 test</span>
<span class="udiff-line-added">+     // suite contains uppercase test results for &quot;armenian&quot;; our behavior matches that.</span>
      case ListStyleType::Armenian:
      case ListStyleType::UpperArmenian:
<span class="udiff-line-modified-removed">-         // CSS3 says &quot;armenian&quot; means &quot;lower-armenian&quot;.</span>
<span class="udiff-line-removed">-         // But the CSS2.1 test suite contains uppercase test results for &quot;armenian&quot;,</span>
<span class="udiff-line-removed">-         // so we&#39;ll match the test suite.</span>
<span class="udiff-line-removed">-         toArmenian(builder, value, true);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toArmenian(value, LetterCase::Upper);</span>
      case ListStyleType::LowerArmenian:
<span class="udiff-line-modified-removed">-         toArmenian(builder, value, false);</span>
<span class="udiff-line-modified-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toArmenian(value, LetterCase::Lower);</span>
<span class="udiff-line-modified-added">+ </span>
      case ListStyleType::Georgian:
<span class="udiff-line-modified-removed">-         toGeorgian(builder, value);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toGeorgian(value);</span>
      case ListStyleType::Hebrew:
<span class="udiff-line-modified-removed">-         toHebrew(builder, value);</span>
<span class="udiff-line-removed">-         break;</span>
<span class="udiff-line-modified-added">+         return toHebrew(value);</span>
      }
  
<span class="udiff-line-modified-removed">-     return builder.toString();</span>
<span class="udiff-line-modified-added">+     ASSERT_NOT_REACHED();</span>
<span class="udiff-line-added">+     return emptyString();</span>
  }
  
  RenderListMarker::RenderListMarker(RenderListItem&amp; listItem, RenderStyle&amp;&amp; style)
      : RenderBox(listItem.document(), WTFMove(style), 0)
      , m_listItem(makeWeakPtr(listItem))
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1144,11 +1079,11 @@</span>
  {
      RenderBox::styleDidChange(diff, oldStyle);
  
      if (oldStyle) {
          if (style().listStylePosition() != oldStyle-&gt;listStylePosition() || style().listStyleType() != oldStyle-&gt;listStyleType())
<span class="udiff-line-modified-removed">-         setNeedsLayoutAndPrefWidthsRecalc();</span>
<span class="udiff-line-modified-added">+             setNeedsLayoutAndPrefWidthsRecalc();</span>
          if (oldStyle-&gt;isDisplayInlineType() &amp;&amp; !style().isDisplayInlineType()) {
              delete m_inlineBoxWrapper;
              m_inlineBoxWrapper = nullptr;
          }
      }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1178,11 +1113,11 @@</span>
  {
      InlineBox* box = inlineBoxWrapper();
      if (!box)
          return LayoutRect(LayoutPoint(), size());
      const RootInlineBox&amp; rootBox = m_inlineBoxWrapper-&gt;root();
<span class="udiff-line-modified-removed">-     LayoutUnit newLogicalTop = rootBox.blockFlow().style().isFlippedBlocksWritingMode() ? m_inlineBoxWrapper-&gt;logicalBottom() - rootBox.selectionBottom() : rootBox.selectionTop() - m_inlineBoxWrapper-&gt;logicalTop();</span>
<span class="udiff-line-modified-added">+     LayoutUnit newLogicalTop { rootBox.blockFlow().style().isFlippedBlocksWritingMode() ? m_inlineBoxWrapper-&gt;logicalBottom() - rootBox.selectionBottom() : rootBox.selectionTop() - m_inlineBoxWrapper-&gt;logicalTop() };</span>
      if (rootBox.blockFlow().style().isHorizontalWritingMode())
          return LayoutRect(0_lu, newLogicalTop, width(), rootBox.selectionHeight());
      return LayoutRect(newLogicalTop, 0_lu, rootBox.selectionHeight(), height());
  }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1348,36 +1283,39 @@</span>
      if (type == ListStyleType::Asterisks || type == ListStyleType::Footnotes)
          context.drawText(font, textRun, textOrigin);
      else {
          const UChar suffix = listMarkerSuffix(type, m_listItem-&gt;value());
  
<span class="udiff-line-modified-removed">-         // Text is not arbitrary. We can judge whether it&#39;s RTL from the first character,</span>
<span class="udiff-line-modified-removed">-         // and we only need to handle the direction U_RIGHT_TO_LEFT for now.</span>
<span class="udiff-line-modified-removed">-         bool textNeedsReversing = u_charDirection(m_text[0]) == U_RIGHT_TO_LEFT;</span>
<span class="udiff-line-modified-removed">-         String toDraw;</span>
<span class="udiff-line-modified-removed">-         if (textNeedsReversing) {</span>
<span class="udiff-line-modified-added">+         // FIXME: Could use a Vector with inline capacity instead of String to avoid</span>
<span class="udiff-line-modified-added">+         // memory allocation here.</span>
<span class="udiff-line-modified-added">+         String textToDraw;</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+         // Since marker text is not arbitrary, we can judge its direction just by</span>
<span class="udiff-line-added">+         // checking the first character, and only need to handle U_RIGHT_TO_LEFT.</span>
<span class="udiff-line-added">+         // FIXME: Could check more efficiently than u_charDirection, since we know</span>
<span class="udiff-line-added">+         // only certain characters are used and only need to check for U_RIGHT_TO_LEFT.</span>
<span class="udiff-line-added">+         if (u_charDirection(m_text[0]) == U_RIGHT_TO_LEFT) {</span>
              unsigned length = m_text.length();
<span class="udiff-line-modified-removed">-             StringBuilder buffer;</span>
<span class="udiff-line-modified-removed">-             buffer.reserveCapacity(length + 2);</span>
<span class="udiff-line-modified-added">+             UChar* characters;</span>
<span class="udiff-line-modified-added">+             textToDraw = String::createUninitialized(length + 2, characters);</span>
              if (!style().isLeftToRightDirection()) {
<span class="udiff-line-modified-removed">-                 buffer.append(space);</span>
<span class="udiff-line-modified-removed">-                 buffer.append(suffix);</span>
<span class="udiff-line-modified-added">+                 *characters++ = space;</span>
<span class="udiff-line-modified-added">+                 *characters++ = suffix;</span>
              }
              for (unsigned i = 0; i &lt; length; ++i)
<span class="udiff-line-modified-removed">-                 buffer.append(m_text[length - i - 1]);</span>
<span class="udiff-line-modified-added">+                 *characters++ = m_text[length - i - 1];</span>
              if (style().isLeftToRightDirection()) {
<span class="udiff-line-modified-removed">-                 buffer.append(suffix);</span>
<span class="udiff-line-modified-removed">-                 buffer.append(space);</span>
<span class="udiff-line-modified-added">+                 *characters++ = suffix;</span>
<span class="udiff-line-modified-added">+                 *characters++ = space;</span>
              }
<span class="udiff-line-removed">-             toDraw = buffer.toString();</span>
          } else {
              if (style().isLeftToRightDirection())
<span class="udiff-line-modified-removed">-                 toDraw = m_text + String(&amp;suffix, 1) + String(&amp;space, 1);</span>
<span class="udiff-line-modified-added">+                 textToDraw = makeString(m_text, suffix, space);</span>
              else
<span class="udiff-line-modified-removed">-                 toDraw = String(&amp;space, 1) + String(&amp;suffix, 1) + m_text;</span>
<span class="udiff-line-modified-added">+                 textToDraw = makeString(space, suffix, m_text);</span>
          }
<span class="udiff-line-modified-removed">-         textRun.setText(StringView(toDraw));</span>
<span class="udiff-line-modified-added">+         textRun.setText(textToDraw);</span>
  
          context.drawText(font, textRun, textOrigin);
      }
  }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1407,13 +1345,13 @@</span>
      setMarginEnd(0);
  
      Length startMargin = style().marginStart();
      Length endMargin = style().marginEnd();
      if (startMargin.isFixed())
<span class="udiff-line-modified-removed">-         setMarginStart(startMargin.value());</span>
<span class="udiff-line-modified-added">+         setMarginStart(LayoutUnit(startMargin.value()));</span>
      if (endMargin.isFixed())
<span class="udiff-line-modified-removed">-         setMarginEnd(endMargin.value());</span>
<span class="udiff-line-modified-added">+         setMarginEnd(LayoutUnit(endMargin.value()));</span>
  
      clearNeedsLayout();
  }
  
  void RenderListMarker::imageChanged(WrappedImagePtr o, const IntRect*)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1566,12 +1504,12 @@</span>
          break;
      case ListStyleType::Asterisks:
      case ListStyleType::Footnotes: {
          TextRun run = RenderBlock::constructTextRun(m_text, style());
          logicalWidth = font.width(run); // no suffix for these types
<span class="udiff-line-removed">-     }</span>
          break;
<span class="udiff-line-added">+     }</span>
      case ListStyleType::Circle:
      case ListStyleType::Disc:
      case ListStyleType::Square:
          logicalWidth = (font.fontMetrics().ascent() * 2 / 3 + 1) / 2 + 2;
          break;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1652,13 +1590,13 @@</span>
      case ListStyleType::Urdu:
          if (m_text.isEmpty())
              logicalWidth = 0;
          else {
              TextRun run = RenderBlock::constructTextRun(m_text, style());
<span class="udiff-line-modified-removed">-             LayoutUnit itemWidth = font.width(run);</span>
<span class="udiff-line-modified-added">+             LayoutUnit itemWidth { font.width(run) };</span>
              UChar suffixSpace[2] = { listMarkerSuffix(type, m_listItem-&gt;value()), &#39; &#39; };
<span class="udiff-line-modified-removed">-             LayoutUnit suffixSpaceWidth = font.width(RenderBlock::constructTextRun(suffixSpace, 2, style()));</span>
<span class="udiff-line-modified-added">+             LayoutUnit suffixSpaceWidth { font.width(RenderBlock::constructTextRun(suffixSpace, 2, style())) };</span>
              logicalWidth = itemWidth + suffixSpaceWidth;
          }
          break;
      }
  
</pre>
<center><a href="RenderListBox.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="RenderMarquee.cpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>
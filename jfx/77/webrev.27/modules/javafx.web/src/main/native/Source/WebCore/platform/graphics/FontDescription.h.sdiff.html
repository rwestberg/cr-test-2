<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/FontDescription.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="FontDescription.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="FontFamilySpecificationNull.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/FontDescription.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 14  * but WITHOUT ANY WARRANTY; without even the implied warranty of
 15  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 16  * Library General Public License for more details.
 17  *
 18  * You should have received a copy of the GNU Library General Public License
 19  * along with this library; see the file COPYING.LIother.m_  If not, write to
 20  * the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
 21  * Boston, MA 02110-1301, USm_
 22  *
 23  */
 24 
 25 #pragma once
 26 
 27 #include &quot;FontSelectionAlgorithm.h&quot;
 28 #include &quot;FontTaggedSettings.h&quot;
 29 #include &quot;TextFlags.h&quot;
 30 #include &quot;WebKitFontFamilyNames.h&quot;
 31 #include &lt;unicode/uscript.h&gt;
 32 #include &lt;wtf/MathExtras.h&gt;
 33 
<span class="line-removed"> 34 #define USE_PLATFORM_SYSTEM_FALLBACK_LIST ((PLATFORM(IOS_FAMILY) &amp;&amp; __IPHONE_OS_VERSION_MIN_REQUIRED &gt;= 110000) || (PLATFORM(MAC) &amp;&amp; __MAC_OS_X_VERSION_MIN_REQUIRED &gt;= 101300))</span>
<span class="line-removed"> 35 </span>
 36 namespace WebCore {
 37 
 38 using namespace WebKitFontFamilyNames;
 39 
 40 class FontDescription {
 41 public:
 42     WEBCORE_EXPORT FontDescription();
 43 
 44     bool operator==(const FontDescription&amp;) const;
 45     bool operator!=(const FontDescription&amp; other) const { return !(*this == other); }
 46 
 47     float computedSize() const { return m_computedSize; }
 48     unsigned computedPixelSize() const { return unsigned(m_computedSize + 0.5f); }
 49     Optional&lt;FontSelectionValue&gt; italic() const { return m_fontSelectionRequest.slope; }
 50     FontSelectionValue stretch() const { return m_fontSelectionRequest.width; }
 51     FontSelectionValue weight() const { return m_fontSelectionRequest.weight; }
 52     FontSelectionRequest fontSelectionRequest() const { return m_fontSelectionRequest; }
 53     FontRenderingMode renderingMode() const { return static_cast&lt;FontRenderingMode&gt;(m_renderingMode); }
 54     TextRenderingMode textRenderingMode() const { return static_cast&lt;TextRenderingMode&gt;(m_textRendering); }
 55     UScriptCode script() const { return static_cast&lt;UScriptCode&gt;(m_script); }
<span class="line-modified"> 56     const AtomicString&amp; locale() const { return m_locale; }</span>
 57 
 58     FontOrientation orientation() const { return static_cast&lt;FontOrientation&gt;(m_orientation); }
 59     NonCJKGlyphOrientation nonCJKGlyphOrientation() const { return static_cast&lt;NonCJKGlyphOrientation&gt;(m_nonCJKGlyphOrientation); }
 60     FontWidthVariant widthVariant() const { return static_cast&lt;FontWidthVariant&gt;(m_widthVariant); }
 61     const FontFeatureSettings&amp; featureSettings() const { return m_featureSettings; }
 62     const FontVariationSettings&amp; variationSettings() const { return m_variationSettings; }
 63     FontSynthesis fontSynthesis() const { return static_cast&lt;FontSynthesis&gt;(m_fontSynthesis); }
 64     FontVariantLigatures variantCommonLigatures() const { return static_cast&lt;FontVariantLigatures&gt;(m_variantCommonLigatures); }
 65     FontVariantLigatures variantDiscretionaryLigatures() const { return static_cast&lt;FontVariantLigatures&gt;(m_variantDiscretionaryLigatures); }
 66     FontVariantLigatures variantHistoricalLigatures() const { return static_cast&lt;FontVariantLigatures&gt;(m_variantHistoricalLigatures); }
 67     FontVariantLigatures variantContextualAlternates() const { return static_cast&lt;FontVariantLigatures&gt;(m_variantContextualAlternates); }
 68     FontVariantPosition variantPosition() const { return static_cast&lt;FontVariantPosition&gt;(m_variantPosition); }
 69     FontVariantCaps variantCaps() const { return static_cast&lt;FontVariantCaps&gt;(m_variantCaps); }
 70     FontVariantNumericFigure variantNumericFigure() const { return static_cast&lt;FontVariantNumericFigure&gt;(m_variantNumericFigure); }
 71     FontVariantNumericSpacing variantNumericSpacing() const { return static_cast&lt;FontVariantNumericSpacing&gt;(m_variantNumericSpacing); }
 72     FontVariantNumericFraction variantNumericFraction() const { return static_cast&lt;FontVariantNumericFraction&gt;(m_variantNumericFraction); }
 73     FontVariantNumericOrdinal variantNumericOrdinal() const { return static_cast&lt;FontVariantNumericOrdinal&gt;(m_variantNumericOrdinal); }
 74     FontVariantNumericSlashedZero variantNumericSlashedZero() const { return static_cast&lt;FontVariantNumericSlashedZero&gt;(m_variantNumericSlashedZero); }
 75     FontVariantAlternates variantAlternates() const { return static_cast&lt;FontVariantAlternates&gt;(m_variantAlternates); }
 76     FontVariantEastAsianVariant variantEastAsianVariant() const { return static_cast&lt;FontVariantEastAsianVariant&gt;(m_variantEastAsianVariant); }
</pre>
<hr />
<pre>
 80     {
 81         return { variantCommonLigatures(),
 82             variantDiscretionaryLigatures(),
 83             variantHistoricalLigatures(),
 84             variantContextualAlternates(),
 85             variantPosition(),
 86             variantCaps(),
 87             variantNumericFigure(),
 88             variantNumericSpacing(),
 89             variantNumericFraction(),
 90             variantNumericOrdinal(),
 91             variantNumericSlashedZero(),
 92             variantAlternates(),
 93             variantEastAsianVariant(),
 94             variantEastAsianWidth(),
 95             variantEastAsianRuby() };
 96     }
 97     FontOpticalSizing opticalSizing() const { return static_cast&lt;FontOpticalSizing&gt;(m_opticalSizing); }
 98     FontStyleAxis fontStyleAxis() const { return m_fontStyleAxis ? FontStyleAxis::ital : FontStyleAxis::slnt; }
 99     AllowUserInstalledFonts shouldAllowUserInstalledFonts() const { return static_cast&lt;AllowUserInstalledFonts&gt;(m_shouldAllowUserInstalledFonts); }

100 
101     void setComputedSize(float s) { m_computedSize = clampToFloat(s); }
102     void setItalic(Optional&lt;FontSelectionValue&gt; italic) { m_fontSelectionRequest.slope = italic; }
103     void setStretch(FontSelectionValue stretch) { m_fontSelectionRequest.width = stretch; }
104     void setIsItalic(bool isItalic) { setItalic(isItalic ? Optional&lt;FontSelectionValue&gt; { italicValue() } : Optional&lt;FontSelectionValue&gt; { }); }
105     void setWeight(FontSelectionValue weight) { m_fontSelectionRequest.weight = weight; }
106     void setRenderingMode(FontRenderingMode mode) { m_renderingMode = static_cast&lt;unsigned&gt;(mode); }
107     void setTextRenderingMode(TextRenderingMode rendering) { m_textRendering = static_cast&lt;unsigned&gt;(rendering); }
108     void setOrientation(FontOrientation orientation) { m_orientation = static_cast&lt;unsigned&gt;(orientation); }
109     void setNonCJKGlyphOrientation(NonCJKGlyphOrientation orientation) { m_nonCJKGlyphOrientation = static_cast&lt;unsigned&gt;(orientation); }
110     void setWidthVariant(FontWidthVariant widthVariant) { m_widthVariant = static_cast&lt;unsigned&gt;(widthVariant); } // Make sure new callers of this sync with FontPlatformData::isForTextCombine()!
<span class="line-modified">111     void setLocale(const AtomicString&amp;);</span>
112     void setFeatureSettings(FontFeatureSettings&amp;&amp; settings) { m_featureSettings = WTFMove(settings); }
113 #if ENABLE(VARIATION_FONTS)
114     void setVariationSettings(FontVariationSettings&amp;&amp; settings) { m_variationSettings = WTFMove(settings); }
115 #endif
116     void setFontSynthesis(FontSynthesis fontSynthesis) { m_fontSynthesis = fontSynthesis; }
117     void setVariantCommonLigatures(FontVariantLigatures variant) { m_variantCommonLigatures = static_cast&lt;unsigned&gt;(variant); }
118     void setVariantDiscretionaryLigatures(FontVariantLigatures variant) { m_variantDiscretionaryLigatures = static_cast&lt;unsigned&gt;(variant); }
119     void setVariantHistoricalLigatures(FontVariantLigatures variant) { m_variantHistoricalLigatures = static_cast&lt;unsigned&gt;(variant); }
120     void setVariantContextualAlternates(FontVariantLigatures variant) { m_variantContextualAlternates = static_cast&lt;unsigned&gt;(variant); }
121     void setVariantPosition(FontVariantPosition variant) { m_variantPosition = static_cast&lt;unsigned&gt;(variant); }
122     void setVariantCaps(FontVariantCaps variant) { m_variantCaps = static_cast&lt;unsigned&gt;(variant); }
123     void setVariantNumericFigure(FontVariantNumericFigure variant) { m_variantNumericFigure = static_cast&lt;unsigned&gt;(variant); }
124     void setVariantNumericSpacing(FontVariantNumericSpacing variant) { m_variantNumericSpacing = static_cast&lt;unsigned&gt;(variant); }
125     void setVariantNumericFraction(FontVariantNumericFraction variant) { m_variantNumericFraction = static_cast&lt;unsigned&gt;(variant); }
126     void setVariantNumericOrdinal(FontVariantNumericOrdinal variant) { m_variantNumericOrdinal = static_cast&lt;unsigned&gt;(variant); }
127     void setVariantNumericSlashedZero(FontVariantNumericSlashedZero variant) { m_variantNumericSlashedZero = static_cast&lt;unsigned&gt;(variant); }
128     void setVariantAlternates(FontVariantAlternates variant) { m_variantAlternates = static_cast&lt;unsigned&gt;(variant); }
129     void setVariantEastAsianVariant(FontVariantEastAsianVariant variant) { m_variantEastAsianVariant = static_cast&lt;unsigned&gt;(variant); }
130     void setVariantEastAsianWidth(FontVariantEastAsianWidth variant) { m_variantEastAsianWidth = static_cast&lt;unsigned&gt;(variant); }
131     void setVariantEastAsianRuby(FontVariantEastAsianRuby variant) { m_variantEastAsianRuby = static_cast&lt;unsigned&gt;(variant); }
132     void setOpticalSizing(FontOpticalSizing sizing) { m_opticalSizing = static_cast&lt;unsigned&gt;(sizing); }
133     void setFontStyleAxis(FontStyleAxis axis) { m_fontStyleAxis = axis == FontStyleAxis::ital; }
134     void setShouldAllowUserInstalledFonts(AllowUserInstalledFonts shouldAllowUserInstalledFonts) { m_shouldAllowUserInstalledFonts = static_cast&lt;unsigned&gt;(shouldAllowUserInstalledFonts); }

135 
<span class="line-modified">136     static AtomicString platformResolveGenericFamily(UScriptCode, const AtomicString&amp; locale, const AtomicString&amp; familyName);</span>
137 
138 private:
139     // FIXME: Investigate moving these into their own object on the heap (to save memory).
140     FontFeatureSettings m_featureSettings;
141     FontVariationSettings m_variationSettings;
<span class="line-modified">142     AtomicString m_locale;</span>
143 
144     FontSelectionRequest m_fontSelectionRequest;
145     float m_computedSize { 0 }; // Computed size adjusted for the minimum font size and the zoom factor.
146     unsigned m_orientation : 1; // FontOrientation - Whether the font is rendering on a horizontal line or a vertical line.
147     unsigned m_nonCJKGlyphOrientation : 1; // NonCJKGlyphOrientation - Only used by vertical text. Determines the default orientation for non-ideograph glyphs.
148     unsigned m_widthVariant : 2; // FontWidthVariant
149     unsigned m_renderingMode : 1; // Used to switch between CG and GDI text on Windows.
150     unsigned m_textRendering : 2; // TextRenderingMode
151     unsigned m_script : 7; // Used to help choose an appropriate font for generic font families.
152     unsigned m_fontSynthesis : 3; // FontSynthesis type
153     unsigned m_variantCommonLigatures : 2; // FontVariantLigatures
154     unsigned m_variantDiscretionaryLigatures : 2; // FontVariantLigatures
155     unsigned m_variantHistoricalLigatures : 2; // FontVariantLigatures
156     unsigned m_variantContextualAlternates : 2; // FontVariantLigatures
157     unsigned m_variantPosition : 2; // FontVariantPosition
158     unsigned m_variantCaps : 3; // FontVariantCaps
159     unsigned m_variantNumericFigure : 2; // FontVariantNumericFigure
160     unsigned m_variantNumericSpacing : 2; // FontVariantNumericSpacing
161     unsigned m_variantNumericFraction : 2; // FontVariantNumericFraction
162     unsigned m_variantNumericOrdinal : 1; // FontVariantNumericOrdinal
163     unsigned m_variantNumericSlashedZero : 1; // FontVariantNumericSlashedZero
164     unsigned m_variantAlternates : 1; // FontVariantAlternates
165     unsigned m_variantEastAsianVariant : 3; // FontVariantEastAsianVariant
166     unsigned m_variantEastAsianWidth : 2; // FontVariantEastAsianWidth
167     unsigned m_variantEastAsianRuby : 1; // FontVariantEastAsianRuby
168     unsigned m_opticalSizing : 1; // FontOpticalSizing
169     unsigned m_fontStyleAxis : 1; // Whether &quot;font-style: italic&quot; or &quot;font-style: oblique 20deg&quot; was specified
170     unsigned m_shouldAllowUserInstalledFonts : 1; // AllowUserInstalledFonts: If this description is allowed to match a user-installed font

171 };
172 
173 inline bool FontDescription::operator==(const FontDescription&amp; other) const
174 {
175     return m_computedSize == other.m_computedSize
176         &amp;&amp; m_fontSelectionRequest == other.m_fontSelectionRequest
177         &amp;&amp; m_renderingMode == other.m_renderingMode
178         &amp;&amp; m_textRendering == other.m_textRendering
179         &amp;&amp; m_orientation == other.m_orientation
180         &amp;&amp; m_nonCJKGlyphOrientation == other.m_nonCJKGlyphOrientation
181         &amp;&amp; m_widthVariant == other.m_widthVariant
182         &amp;&amp; m_locale == other.m_locale
183         &amp;&amp; m_featureSettings == other.m_featureSettings
184 #if ENABLE(VARIATION_FONTS)
185         &amp;&amp; m_variationSettings == other.m_variationSettings
186 #endif
187         &amp;&amp; m_fontSynthesis == other.m_fontSynthesis
188         &amp;&amp; m_variantCommonLigatures == other.m_variantCommonLigatures
189         &amp;&amp; m_variantDiscretionaryLigatures == other.m_variantDiscretionaryLigatures
190         &amp;&amp; m_variantHistoricalLigatures == other.m_variantHistoricalLigatures
191         &amp;&amp; m_variantContextualAlternates == other.m_variantContextualAlternates
192         &amp;&amp; m_variantPosition == other.m_variantPosition
193         &amp;&amp; m_variantCaps == other.m_variantCaps
194         &amp;&amp; m_variantNumericFigure == other.m_variantNumericFigure
195         &amp;&amp; m_variantNumericSpacing == other.m_variantNumericSpacing
196         &amp;&amp; m_variantNumericFraction == other.m_variantNumericFraction
197         &amp;&amp; m_variantNumericOrdinal == other.m_variantNumericOrdinal
198         &amp;&amp; m_variantNumericSlashedZero == other.m_variantNumericSlashedZero
199         &amp;&amp; m_variantAlternates == other.m_variantAlternates
200         &amp;&amp; m_variantEastAsianVariant == other.m_variantEastAsianVariant
201         &amp;&amp; m_variantEastAsianWidth == other.m_variantEastAsianWidth
202         &amp;&amp; m_variantEastAsianRuby == other.m_variantEastAsianRuby
203         &amp;&amp; m_opticalSizing == other.m_opticalSizing
204         &amp;&amp; m_fontStyleAxis == other.m_fontStyleAxis
<span class="line-modified">205         &amp;&amp; m_shouldAllowUserInstalledFonts == other.m_shouldAllowUserInstalledFonts;</span>

206 }
207 
208 }
</pre>
</td>
<td>
<hr />
<pre>
 14  * but WITHOUT ANY WARRANTY; without even the implied warranty of
 15  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 16  * Library General Public License for more details.
 17  *
 18  * You should have received a copy of the GNU Library General Public License
 19  * along with this library; see the file COPYING.LIother.m_  If not, write to
 20  * the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
 21  * Boston, MA 02110-1301, USm_
 22  *
 23  */
 24 
 25 #pragma once
 26 
 27 #include &quot;FontSelectionAlgorithm.h&quot;
 28 #include &quot;FontTaggedSettings.h&quot;
 29 #include &quot;TextFlags.h&quot;
 30 #include &quot;WebKitFontFamilyNames.h&quot;
 31 #include &lt;unicode/uscript.h&gt;
 32 #include &lt;wtf/MathExtras.h&gt;
 33 


 34 namespace WebCore {
 35 
 36 using namespace WebKitFontFamilyNames;
 37 
 38 class FontDescription {
 39 public:
 40     WEBCORE_EXPORT FontDescription();
 41 
 42     bool operator==(const FontDescription&amp;) const;
 43     bool operator!=(const FontDescription&amp; other) const { return !(*this == other); }
 44 
 45     float computedSize() const { return m_computedSize; }
 46     unsigned computedPixelSize() const { return unsigned(m_computedSize + 0.5f); }
 47     Optional&lt;FontSelectionValue&gt; italic() const { return m_fontSelectionRequest.slope; }
 48     FontSelectionValue stretch() const { return m_fontSelectionRequest.width; }
 49     FontSelectionValue weight() const { return m_fontSelectionRequest.weight; }
 50     FontSelectionRequest fontSelectionRequest() const { return m_fontSelectionRequest; }
 51     FontRenderingMode renderingMode() const { return static_cast&lt;FontRenderingMode&gt;(m_renderingMode); }
 52     TextRenderingMode textRenderingMode() const { return static_cast&lt;TextRenderingMode&gt;(m_textRendering); }
 53     UScriptCode script() const { return static_cast&lt;UScriptCode&gt;(m_script); }
<span class="line-modified"> 54     const AtomString&amp; locale() const { return m_locale; }</span>
 55 
 56     FontOrientation orientation() const { return static_cast&lt;FontOrientation&gt;(m_orientation); }
 57     NonCJKGlyphOrientation nonCJKGlyphOrientation() const { return static_cast&lt;NonCJKGlyphOrientation&gt;(m_nonCJKGlyphOrientation); }
 58     FontWidthVariant widthVariant() const { return static_cast&lt;FontWidthVariant&gt;(m_widthVariant); }
 59     const FontFeatureSettings&amp; featureSettings() const { return m_featureSettings; }
 60     const FontVariationSettings&amp; variationSettings() const { return m_variationSettings; }
 61     FontSynthesis fontSynthesis() const { return static_cast&lt;FontSynthesis&gt;(m_fontSynthesis); }
 62     FontVariantLigatures variantCommonLigatures() const { return static_cast&lt;FontVariantLigatures&gt;(m_variantCommonLigatures); }
 63     FontVariantLigatures variantDiscretionaryLigatures() const { return static_cast&lt;FontVariantLigatures&gt;(m_variantDiscretionaryLigatures); }
 64     FontVariantLigatures variantHistoricalLigatures() const { return static_cast&lt;FontVariantLigatures&gt;(m_variantHistoricalLigatures); }
 65     FontVariantLigatures variantContextualAlternates() const { return static_cast&lt;FontVariantLigatures&gt;(m_variantContextualAlternates); }
 66     FontVariantPosition variantPosition() const { return static_cast&lt;FontVariantPosition&gt;(m_variantPosition); }
 67     FontVariantCaps variantCaps() const { return static_cast&lt;FontVariantCaps&gt;(m_variantCaps); }
 68     FontVariantNumericFigure variantNumericFigure() const { return static_cast&lt;FontVariantNumericFigure&gt;(m_variantNumericFigure); }
 69     FontVariantNumericSpacing variantNumericSpacing() const { return static_cast&lt;FontVariantNumericSpacing&gt;(m_variantNumericSpacing); }
 70     FontVariantNumericFraction variantNumericFraction() const { return static_cast&lt;FontVariantNumericFraction&gt;(m_variantNumericFraction); }
 71     FontVariantNumericOrdinal variantNumericOrdinal() const { return static_cast&lt;FontVariantNumericOrdinal&gt;(m_variantNumericOrdinal); }
 72     FontVariantNumericSlashedZero variantNumericSlashedZero() const { return static_cast&lt;FontVariantNumericSlashedZero&gt;(m_variantNumericSlashedZero); }
 73     FontVariantAlternates variantAlternates() const { return static_cast&lt;FontVariantAlternates&gt;(m_variantAlternates); }
 74     FontVariantEastAsianVariant variantEastAsianVariant() const { return static_cast&lt;FontVariantEastAsianVariant&gt;(m_variantEastAsianVariant); }
</pre>
<hr />
<pre>
 78     {
 79         return { variantCommonLigatures(),
 80             variantDiscretionaryLigatures(),
 81             variantHistoricalLigatures(),
 82             variantContextualAlternates(),
 83             variantPosition(),
 84             variantCaps(),
 85             variantNumericFigure(),
 86             variantNumericSpacing(),
 87             variantNumericFraction(),
 88             variantNumericOrdinal(),
 89             variantNumericSlashedZero(),
 90             variantAlternates(),
 91             variantEastAsianVariant(),
 92             variantEastAsianWidth(),
 93             variantEastAsianRuby() };
 94     }
 95     FontOpticalSizing opticalSizing() const { return static_cast&lt;FontOpticalSizing&gt;(m_opticalSizing); }
 96     FontStyleAxis fontStyleAxis() const { return m_fontStyleAxis ? FontStyleAxis::ital : FontStyleAxis::slnt; }
 97     AllowUserInstalledFonts shouldAllowUserInstalledFonts() const { return static_cast&lt;AllowUserInstalledFonts&gt;(m_shouldAllowUserInstalledFonts); }
<span class="line-added"> 98     bool shouldAllowDesignSystemUIFonts() const { return m_shouldAllowDesignSystemUIFonts; }</span>
 99 
100     void setComputedSize(float s) { m_computedSize = clampToFloat(s); }
101     void setItalic(Optional&lt;FontSelectionValue&gt; italic) { m_fontSelectionRequest.slope = italic; }
102     void setStretch(FontSelectionValue stretch) { m_fontSelectionRequest.width = stretch; }
103     void setIsItalic(bool isItalic) { setItalic(isItalic ? Optional&lt;FontSelectionValue&gt; { italicValue() } : Optional&lt;FontSelectionValue&gt; { }); }
104     void setWeight(FontSelectionValue weight) { m_fontSelectionRequest.weight = weight; }
105     void setRenderingMode(FontRenderingMode mode) { m_renderingMode = static_cast&lt;unsigned&gt;(mode); }
106     void setTextRenderingMode(TextRenderingMode rendering) { m_textRendering = static_cast&lt;unsigned&gt;(rendering); }
107     void setOrientation(FontOrientation orientation) { m_orientation = static_cast&lt;unsigned&gt;(orientation); }
108     void setNonCJKGlyphOrientation(NonCJKGlyphOrientation orientation) { m_nonCJKGlyphOrientation = static_cast&lt;unsigned&gt;(orientation); }
109     void setWidthVariant(FontWidthVariant widthVariant) { m_widthVariant = static_cast&lt;unsigned&gt;(widthVariant); } // Make sure new callers of this sync with FontPlatformData::isForTextCombine()!
<span class="line-modified">110     void setLocale(const AtomString&amp;);</span>
111     void setFeatureSettings(FontFeatureSettings&amp;&amp; settings) { m_featureSettings = WTFMove(settings); }
112 #if ENABLE(VARIATION_FONTS)
113     void setVariationSettings(FontVariationSettings&amp;&amp; settings) { m_variationSettings = WTFMove(settings); }
114 #endif
115     void setFontSynthesis(FontSynthesis fontSynthesis) { m_fontSynthesis = fontSynthesis; }
116     void setVariantCommonLigatures(FontVariantLigatures variant) { m_variantCommonLigatures = static_cast&lt;unsigned&gt;(variant); }
117     void setVariantDiscretionaryLigatures(FontVariantLigatures variant) { m_variantDiscretionaryLigatures = static_cast&lt;unsigned&gt;(variant); }
118     void setVariantHistoricalLigatures(FontVariantLigatures variant) { m_variantHistoricalLigatures = static_cast&lt;unsigned&gt;(variant); }
119     void setVariantContextualAlternates(FontVariantLigatures variant) { m_variantContextualAlternates = static_cast&lt;unsigned&gt;(variant); }
120     void setVariantPosition(FontVariantPosition variant) { m_variantPosition = static_cast&lt;unsigned&gt;(variant); }
121     void setVariantCaps(FontVariantCaps variant) { m_variantCaps = static_cast&lt;unsigned&gt;(variant); }
122     void setVariantNumericFigure(FontVariantNumericFigure variant) { m_variantNumericFigure = static_cast&lt;unsigned&gt;(variant); }
123     void setVariantNumericSpacing(FontVariantNumericSpacing variant) { m_variantNumericSpacing = static_cast&lt;unsigned&gt;(variant); }
124     void setVariantNumericFraction(FontVariantNumericFraction variant) { m_variantNumericFraction = static_cast&lt;unsigned&gt;(variant); }
125     void setVariantNumericOrdinal(FontVariantNumericOrdinal variant) { m_variantNumericOrdinal = static_cast&lt;unsigned&gt;(variant); }
126     void setVariantNumericSlashedZero(FontVariantNumericSlashedZero variant) { m_variantNumericSlashedZero = static_cast&lt;unsigned&gt;(variant); }
127     void setVariantAlternates(FontVariantAlternates variant) { m_variantAlternates = static_cast&lt;unsigned&gt;(variant); }
128     void setVariantEastAsianVariant(FontVariantEastAsianVariant variant) { m_variantEastAsianVariant = static_cast&lt;unsigned&gt;(variant); }
129     void setVariantEastAsianWidth(FontVariantEastAsianWidth variant) { m_variantEastAsianWidth = static_cast&lt;unsigned&gt;(variant); }
130     void setVariantEastAsianRuby(FontVariantEastAsianRuby variant) { m_variantEastAsianRuby = static_cast&lt;unsigned&gt;(variant); }
131     void setOpticalSizing(FontOpticalSizing sizing) { m_opticalSizing = static_cast&lt;unsigned&gt;(sizing); }
132     void setFontStyleAxis(FontStyleAxis axis) { m_fontStyleAxis = axis == FontStyleAxis::ital; }
133     void setShouldAllowUserInstalledFonts(AllowUserInstalledFonts shouldAllowUserInstalledFonts) { m_shouldAllowUserInstalledFonts = static_cast&lt;unsigned&gt;(shouldAllowUserInstalledFonts); }
<span class="line-added">134     void setShouldAllowDesignSystemUIFonts(bool allow) { m_shouldAllowDesignSystemUIFonts = allow; }</span>
135 
<span class="line-modified">136     static AtomString platformResolveGenericFamily(UScriptCode, const AtomString&amp; locale, const AtomString&amp; familyName);</span>
137 
138 private:
139     // FIXME: Investigate moving these into their own object on the heap (to save memory).
140     FontFeatureSettings m_featureSettings;
141     FontVariationSettings m_variationSettings;
<span class="line-modified">142     AtomString m_locale;</span>
143 
144     FontSelectionRequest m_fontSelectionRequest;
145     float m_computedSize { 0 }; // Computed size adjusted for the minimum font size and the zoom factor.
146     unsigned m_orientation : 1; // FontOrientation - Whether the font is rendering on a horizontal line or a vertical line.
147     unsigned m_nonCJKGlyphOrientation : 1; // NonCJKGlyphOrientation - Only used by vertical text. Determines the default orientation for non-ideograph glyphs.
148     unsigned m_widthVariant : 2; // FontWidthVariant
149     unsigned m_renderingMode : 1; // Used to switch between CG and GDI text on Windows.
150     unsigned m_textRendering : 2; // TextRenderingMode
151     unsigned m_script : 7; // Used to help choose an appropriate font for generic font families.
152     unsigned m_fontSynthesis : 3; // FontSynthesis type
153     unsigned m_variantCommonLigatures : 2; // FontVariantLigatures
154     unsigned m_variantDiscretionaryLigatures : 2; // FontVariantLigatures
155     unsigned m_variantHistoricalLigatures : 2; // FontVariantLigatures
156     unsigned m_variantContextualAlternates : 2; // FontVariantLigatures
157     unsigned m_variantPosition : 2; // FontVariantPosition
158     unsigned m_variantCaps : 3; // FontVariantCaps
159     unsigned m_variantNumericFigure : 2; // FontVariantNumericFigure
160     unsigned m_variantNumericSpacing : 2; // FontVariantNumericSpacing
161     unsigned m_variantNumericFraction : 2; // FontVariantNumericFraction
162     unsigned m_variantNumericOrdinal : 1; // FontVariantNumericOrdinal
163     unsigned m_variantNumericSlashedZero : 1; // FontVariantNumericSlashedZero
164     unsigned m_variantAlternates : 1; // FontVariantAlternates
165     unsigned m_variantEastAsianVariant : 3; // FontVariantEastAsianVariant
166     unsigned m_variantEastAsianWidth : 2; // FontVariantEastAsianWidth
167     unsigned m_variantEastAsianRuby : 1; // FontVariantEastAsianRuby
168     unsigned m_opticalSizing : 1; // FontOpticalSizing
169     unsigned m_fontStyleAxis : 1; // Whether &quot;font-style: italic&quot; or &quot;font-style: oblique 20deg&quot; was specified
170     unsigned m_shouldAllowUserInstalledFonts : 1; // AllowUserInstalledFonts: If this description is allowed to match a user-installed font
<span class="line-added">171     unsigned m_shouldAllowDesignSystemUIFonts : 1; // Whether -apple-system-ui-serif, -apple-system-ui-monospaced, and -apple-system-ui-rounded are supported</span>
172 };
173 
174 inline bool FontDescription::operator==(const FontDescription&amp; other) const
175 {
176     return m_computedSize == other.m_computedSize
177         &amp;&amp; m_fontSelectionRequest == other.m_fontSelectionRequest
178         &amp;&amp; m_renderingMode == other.m_renderingMode
179         &amp;&amp; m_textRendering == other.m_textRendering
180         &amp;&amp; m_orientation == other.m_orientation
181         &amp;&amp; m_nonCJKGlyphOrientation == other.m_nonCJKGlyphOrientation
182         &amp;&amp; m_widthVariant == other.m_widthVariant
183         &amp;&amp; m_locale == other.m_locale
184         &amp;&amp; m_featureSettings == other.m_featureSettings
185 #if ENABLE(VARIATION_FONTS)
186         &amp;&amp; m_variationSettings == other.m_variationSettings
187 #endif
188         &amp;&amp; m_fontSynthesis == other.m_fontSynthesis
189         &amp;&amp; m_variantCommonLigatures == other.m_variantCommonLigatures
190         &amp;&amp; m_variantDiscretionaryLigatures == other.m_variantDiscretionaryLigatures
191         &amp;&amp; m_variantHistoricalLigatures == other.m_variantHistoricalLigatures
192         &amp;&amp; m_variantContextualAlternates == other.m_variantContextualAlternates
193         &amp;&amp; m_variantPosition == other.m_variantPosition
194         &amp;&amp; m_variantCaps == other.m_variantCaps
195         &amp;&amp; m_variantNumericFigure == other.m_variantNumericFigure
196         &amp;&amp; m_variantNumericSpacing == other.m_variantNumericSpacing
197         &amp;&amp; m_variantNumericFraction == other.m_variantNumericFraction
198         &amp;&amp; m_variantNumericOrdinal == other.m_variantNumericOrdinal
199         &amp;&amp; m_variantNumericSlashedZero == other.m_variantNumericSlashedZero
200         &amp;&amp; m_variantAlternates == other.m_variantAlternates
201         &amp;&amp; m_variantEastAsianVariant == other.m_variantEastAsianVariant
202         &amp;&amp; m_variantEastAsianWidth == other.m_variantEastAsianWidth
203         &amp;&amp; m_variantEastAsianRuby == other.m_variantEastAsianRuby
204         &amp;&amp; m_opticalSizing == other.m_opticalSizing
205         &amp;&amp; m_fontStyleAxis == other.m_fontStyleAxis
<span class="line-modified">206         &amp;&amp; m_shouldAllowUserInstalledFonts == other.m_shouldAllowUserInstalledFonts</span>
<span class="line-added">207         &amp;&amp; m_shouldAllowDesignSystemUIFonts == other.m_shouldAllowDesignSystemUIFonts;</span>
208 }
209 
210 }
</pre>
</td>
</tr>
</table>
<center><a href="FontDescription.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="FontFamilySpecificationNull.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>
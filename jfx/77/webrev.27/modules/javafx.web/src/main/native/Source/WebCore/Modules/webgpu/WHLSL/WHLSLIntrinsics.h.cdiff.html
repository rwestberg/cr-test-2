<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/WebCore/Modules/webgpu/WHLSL/WHLSLIntrinsics.h</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="WHLSLIntrinsics.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="WHLSLLexer.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/Modules/webgpu/WHLSL/WHLSLIntrinsics.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 56,20 ***</span>
      {
          ASSERT(m_boolType);
          return *m_boolType;
      }
  
      AST::NativeTypeDeclaration&amp; intType() const
      {
          ASSERT(m_intType);
          return *m_intType;
      }
  
<span class="line-modified">!     AST::NativeTypeDeclaration&amp; uintType() const</span>
      {
<span class="line-modified">!         ASSERT(m_uintType);</span>
<span class="line-modified">!         return *m_uintType;</span>
      }
  
      AST::NativeTypeDeclaration&amp; samplerType() const
      {
          ASSERT(m_samplerType);
<span class="line-new-header">--- 56,44 ---</span>
      {
          ASSERT(m_boolType);
          return *m_boolType;
      }
  
<span class="line-added">+     AST::NativeTypeDeclaration&amp; uintType() const</span>
<span class="line-added">+     {</span>
<span class="line-added">+         ASSERT(m_uintType);</span>
<span class="line-added">+         return *m_uintType;</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
      AST::NativeTypeDeclaration&amp; intType() const
      {
          ASSERT(m_intType);
          return *m_intType;
      }
  
<span class="line-modified">!     AST::NativeTypeDeclaration&amp; uint2Type() const</span>
      {
<span class="line-modified">!         ASSERT(m_vectorUint[0]);</span>
<span class="line-modified">!         return *m_vectorUint[0];</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     AST::NativeTypeDeclaration&amp; uint4Type() const</span>
<span class="line-added">+     {</span>
<span class="line-added">+         ASSERT(m_vectorUint[2]);</span>
<span class="line-added">+         return *m_vectorUint[2];</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     AST::NativeTypeDeclaration&amp; int2Type() const</span>
<span class="line-added">+     {</span>
<span class="line-added">+         ASSERT(m_vectorInt[0]);</span>
<span class="line-added">+         return *m_vectorInt[0];</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     AST::NativeTypeDeclaration&amp; int4Type() const</span>
<span class="line-added">+     {</span>
<span class="line-added">+         ASSERT(m_vectorInt[2]);</span>
<span class="line-added">+         return *m_vectorInt[2];</span>
      }
  
      AST::NativeTypeDeclaration&amp; samplerType() const
      {
          ASSERT(m_samplerType);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 80,10 ***</span>
<span class="line-new-header">--- 104,16 ---</span>
      {
          ASSERT(m_floatType);
          return *m_floatType;
      }
  
<span class="line-added">+     AST::NativeTypeDeclaration&amp; float2Type() const</span>
<span class="line-added">+     {</span>
<span class="line-added">+         ASSERT(m_vectorFloat[0]);</span>
<span class="line-added">+         return *m_vectorFloat[0];</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
      AST::NativeTypeDeclaration&amp; float3Type() const
      {
          ASSERT(m_vectorFloat[1]);
          return *m_vectorFloat[1];
      }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 92,89 ***</span>
      {
          ASSERT(m_vectorFloat[2]);
          return *m_vectorFloat[2];
      }
  
<span class="line-modified">!     AST::NativeFunctionDeclaration&amp; ddx() const</span>
      {
<span class="line-modified">!         ASSERT(m_ddx);</span>
<span class="line-removed">-         return *m_ddx;</span>
      }
  
<span class="line-modified">!     AST::NativeFunctionDeclaration&amp; ddy() const</span>
      {
<span class="line-modified">!         ASSERT(m_ddy);</span>
<span class="line-removed">-         return *m_ddy;</span>
      }
  
<span class="line-modified">!     AST::NativeFunctionDeclaration&amp; allMemoryBarrier() const</span>
      {
<span class="line-modified">!         ASSERT(m_allMemoryBarrier);</span>
<span class="line-removed">-         return *m_allMemoryBarrier;</span>
      }
  
<span class="line-modified">!     AST::NativeFunctionDeclaration&amp; deviceMemoryBarrier() const</span>
      {
<span class="line-modified">!         ASSERT(m_deviceMemoryBarrier);</span>
<span class="line-removed">-         return *m_deviceMemoryBarrier;</span>
      }
  
<span class="line-modified">!     AST::NativeFunctionDeclaration&amp; groupMemoryBarrier() const</span>
      {
<span class="line-modified">!         ASSERT(m_groupMemoryBarrier);</span>
<span class="line-removed">-         return *m_groupMemoryBarrier;</span>
      }
  
  private:
      bool addPrimitive(AST::NativeTypeDeclaration&amp;);
      bool addVector(AST::NativeTypeDeclaration&amp;);
      bool addMatrix(AST::NativeTypeDeclaration&amp;);
      bool addFullTexture(AST::NativeTypeDeclaration&amp;, AST::TypeReference&amp;);
<span class="line-modified">!     bool addDepthTexture(AST::NativeTypeDeclaration&amp;, AST::TypeReference&amp;);</span>
      void addTexture(AST::NativeTypeDeclaration&amp;);
  
      HashSet&lt;const AST::NativeTypeDeclaration*&gt; m_textureSet;
  
      AST::NativeTypeDeclaration* m_voidType { nullptr };
      AST::NativeTypeDeclaration* m_boolType { nullptr };
<span class="line-removed">-     AST::NativeTypeDeclaration* m_ucharType { nullptr };</span>
<span class="line-removed">-     AST::NativeTypeDeclaration* m_ushortType { nullptr };</span>
      AST::NativeTypeDeclaration* m_uintType { nullptr };
<span class="line-removed">-     AST::NativeTypeDeclaration* m_charType { nullptr };</span>
<span class="line-removed">-     AST::NativeTypeDeclaration* m_shortType { nullptr };</span>
      AST::NativeTypeDeclaration* m_intType { nullptr };
<span class="line-removed">-     AST::NativeTypeDeclaration* m_halfType { nullptr };</span>
      AST::NativeTypeDeclaration* m_floatType { nullptr };
      AST::NativeTypeDeclaration* m_atomicIntType { nullptr };
      AST::NativeTypeDeclaration* m_atomicUintType { nullptr };
      AST::NativeTypeDeclaration* m_samplerType { nullptr };
  
      AST::NativeTypeDeclaration* m_vectorBool[3] { 0 };
<span class="line-removed">-     AST::NativeTypeDeclaration* m_vectorUchar[3] { 0 };</span>
<span class="line-removed">-     AST::NativeTypeDeclaration* m_vectorUshort[3] { 0 };</span>
      AST::NativeTypeDeclaration* m_vectorUint[3] { 0 };
<span class="line-removed">-     AST::NativeTypeDeclaration* m_vectorChar[3] { 0 };</span>
<span class="line-removed">-     AST::NativeTypeDeclaration* m_vectorShort[3] { 0 };</span>
      AST::NativeTypeDeclaration* m_vectorInt[3] { 0 };
<span class="line-removed">-     AST::NativeTypeDeclaration* m_vectorHalf[3] { 0 };</span>
      AST::NativeTypeDeclaration* m_vectorFloat[3] { 0 };
  
<span class="line-modified">!     AST::NativeTypeDeclaration* m_matrixHalf[3][3] {{ 0 }};</span>
<span class="line-removed">-     AST::NativeTypeDeclaration* m_matrixFloat[3][3] {{ 0 }};</span>
<span class="line-removed">- </span>
<span class="line-removed">-     static constexpr const char* m_textureTypeNames[] = { &quot;Texture1D&quot;, &quot;RWTexture1D&quot;, &quot;Texture1DArray&quot;, &quot;RWTexture1DArray&quot;, &quot;Texture2D&quot;, &quot;RWTexture2D&quot;, &quot;Texture2DArray&quot;, &quot;RWTexture2DArray&quot;, &quot;Texture3D&quot;, &quot;RWTexture3D&quot;, &quot;TextureCube&quot; };</span>
  
<span class="line-modified">!     static constexpr const char* m_textureInnerTypeNames[] = { &quot;uchar&quot;, &quot;ushort&quot;,  &quot;uint&quot;, &quot;char&quot;, &quot;short&quot;, &quot;int&quot;, &quot;half&quot;, &quot;float&quot; };</span>
  
      AST::NativeTypeDeclaration* m_fullTextures[WTF_ARRAY_LENGTH(m_textureTypeNames)][WTF_ARRAY_LENGTH(m_textureInnerTypeNames)][4] {{{ 0 }}};
  
<span class="line-modified">!     static constexpr const char* m_depthTextureInnerTypes[] =  { &quot;half&quot;, &quot;float&quot; };</span>
  
      AST::NativeTypeDeclaration* m_textureDepth2D[WTF_ARRAY_LENGTH(m_depthTextureInnerTypes)] { 0 };
<span class="line-removed">-     AST::NativeTypeDeclaration* m_rwTextureDepth2D[WTF_ARRAY_LENGTH(m_depthTextureInnerTypes)] { 0 };</span>
      AST::NativeTypeDeclaration* m_textureDepth2DArray[WTF_ARRAY_LENGTH(m_depthTextureInnerTypes)] { 0 };
<span class="line-removed">-     AST::NativeTypeDeclaration* m_rwTextureDepth2DArray[WTF_ARRAY_LENGTH(m_depthTextureInnerTypes)] { 0 };</span>
      AST::NativeTypeDeclaration* m_textureDepthCube[WTF_ARRAY_LENGTH(m_depthTextureInnerTypes)] { 0 };
  
      AST::NativeFunctionDeclaration* m_ddx { nullptr };
      AST::NativeFunctionDeclaration* m_ddy { nullptr };
      AST::NativeFunctionDeclaration* m_allMemoryBarrier { nullptr };
<span class="line-new-header">--- 122,70 ---</span>
      {
          ASSERT(m_vectorFloat[2]);
          return *m_vectorFloat[2];
      }
  
<span class="line-modified">!     // These functions may have been pruned from the AST if they are unused.</span>
<span class="line-added">+     AST::NativeFunctionDeclaration* ddx() const</span>
      {
<span class="line-modified">!         return m_ddx;</span>
      }
  
<span class="line-modified">!     AST::NativeFunctionDeclaration* ddy() const</span>
      {
<span class="line-modified">!         return m_ddy;</span>
      }
  
<span class="line-modified">!     AST::NativeFunctionDeclaration* allMemoryBarrier() const</span>
      {
<span class="line-modified">!         return m_allMemoryBarrier;</span>
      }
  
<span class="line-modified">!     AST::NativeFunctionDeclaration* deviceMemoryBarrier() const</span>
      {
<span class="line-modified">!         return m_deviceMemoryBarrier;</span>
      }
  
<span class="line-modified">!     AST::NativeFunctionDeclaration* groupMemoryBarrier() const</span>
      {
<span class="line-modified">!         return m_groupMemoryBarrier;</span>
      }
  
  private:
      bool addPrimitive(AST::NativeTypeDeclaration&amp;);
      bool addVector(AST::NativeTypeDeclaration&amp;);
      bool addMatrix(AST::NativeTypeDeclaration&amp;);
      bool addFullTexture(AST::NativeTypeDeclaration&amp;, AST::TypeReference&amp;);
<span class="line-modified">!     void addDepthTexture(AST::NativeTypeDeclaration&amp;, AST::TypeReference&amp;);</span>
      void addTexture(AST::NativeTypeDeclaration&amp;);
  
      HashSet&lt;const AST::NativeTypeDeclaration*&gt; m_textureSet;
  
      AST::NativeTypeDeclaration* m_voidType { nullptr };
      AST::NativeTypeDeclaration* m_boolType { nullptr };
      AST::NativeTypeDeclaration* m_uintType { nullptr };
      AST::NativeTypeDeclaration* m_intType { nullptr };
      AST::NativeTypeDeclaration* m_floatType { nullptr };
      AST::NativeTypeDeclaration* m_atomicIntType { nullptr };
      AST::NativeTypeDeclaration* m_atomicUintType { nullptr };
      AST::NativeTypeDeclaration* m_samplerType { nullptr };
  
      AST::NativeTypeDeclaration* m_vectorBool[3] { 0 };
      AST::NativeTypeDeclaration* m_vectorUint[3] { 0 };
      AST::NativeTypeDeclaration* m_vectorInt[3] { 0 };
      AST::NativeTypeDeclaration* m_vectorFloat[3] { 0 };
  
<span class="line-modified">!     static constexpr const char* m_textureTypeNames[] = { &quot;Texture1D&quot;, &quot;RWTexture1D&quot;, &quot;Texture2D&quot;, &quot;RWTexture2D&quot;, &quot;Texture3D&quot;, &quot;RWTexture3D&quot;, &quot;TextureCube&quot;, &quot;Texture1DArray&quot;, &quot;RWTexture1DArray&quot;, &quot;Texture2DArray&quot;, &quot;RWTexture2DArray&quot; };</span>
  
<span class="line-modified">!     static constexpr const char* m_textureInnerTypeNames[] = { &quot;uint&quot;, &quot;int&quot;, &quot;float&quot; };</span>
  
      AST::NativeTypeDeclaration* m_fullTextures[WTF_ARRAY_LENGTH(m_textureTypeNames)][WTF_ARRAY_LENGTH(m_textureInnerTypeNames)][4] {{{ 0 }}};
  
<span class="line-modified">!     static constexpr const char* m_depthTextureInnerTypes[] =  { &quot;float&quot; };</span>
  
      AST::NativeTypeDeclaration* m_textureDepth2D[WTF_ARRAY_LENGTH(m_depthTextureInnerTypes)] { 0 };
      AST::NativeTypeDeclaration* m_textureDepth2DArray[WTF_ARRAY_LENGTH(m_depthTextureInnerTypes)] { 0 };
      AST::NativeTypeDeclaration* m_textureDepthCube[WTF_ARRAY_LENGTH(m_depthTextureInnerTypes)] { 0 };
  
      AST::NativeFunctionDeclaration* m_ddx { nullptr };
      AST::NativeFunctionDeclaration* m_ddy { nullptr };
      AST::NativeFunctionDeclaration* m_allMemoryBarrier { nullptr };
</pre>
<center><a href="WHLSLIntrinsics.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="WHLSLLexer.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>
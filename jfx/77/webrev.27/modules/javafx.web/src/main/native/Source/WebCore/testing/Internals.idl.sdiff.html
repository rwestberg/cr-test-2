<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/testing/Internals.idl</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Internals.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="LegacyMockCDM.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/testing/Internals.idl</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
142 ] dictionary AcceleratedAnimation {
143     DOMString property;
144     double speed;
145 };
146 
147 [
148     ExportMacro=WEBCORE_TESTSUPPORT_EXPORT,
149     JSGenerateToJSObject,
150 ] dictionary CookieData {
151     DOMString name;
152     DOMString value;
153     DOMString domain;
154     double expires;
155     boolean isHttpOnly;
156     boolean isSecure;
157     boolean isSession;
158     boolean isSameSiteLax;
159     boolean isSameSiteStrict;
160 };
161 

















162 [
163     ExportMacro=WEBCORE_TESTSUPPORT_EXPORT,
164     NoInterfaceObject,
165 ] interface Internals {
166     DOMString address(Node node);
167     boolean nodeNeedsStyleRecalc(Node node);
168     DOMString styleChangeType(Node node);
169     DOMString description(any value);
170 
171     // Animated image pausing testing.
172     boolean hasPausedImageAnimations(Element element);
173 
174     // Must be called on an element whose enclosingLayer() is self-painting.
175     boolean isPaintingFrequently(Element element);
176     void incrementFrequentPaintCounter(Element element);
177 
178     [MayThrowException] DOMString elementRenderTreeAsText(Element element);
179     boolean isPreloaded(DOMString url);
180     boolean isLoadingFromMemoryCache(DOMString url);
181     DOMString fetchResponseSource(FetchResponse response);
</pre>
<hr />
<pre>
226     [MayThrowException] boolean pauseTransitionAtTimeOnPseudoElement(DOMString property, unrestricted double pauseTime, Element element, DOMString pseudoId);
227 
228     // Web Animations testing.
229     sequence&lt;AcceleratedAnimation&gt; acceleratedAnimationsForElement(Element element);
230     unsigned long numberOfAnimationTimelineInvalidations();
231 
232     // For animations testing, we need a way to get at pseudo elements.
233     [MayThrowException] Element? pseudoElement(Element element, DOMString pseudoId);
234 
235     DOMString visiblePlaceholder(Element element);
236     void selectColorInColorChooser(HTMLInputElement element, DOMString colorValue);
237     [MayThrowException] sequence&lt;DOMString&gt; formControlStateOfPreviousHistoryItem();
238     [MayThrowException] void setFormControlStateOfPreviousHistoryItem(sequence&lt;DOMString&gt; values);
239 
240     [MayThrowException] DOMRect absoluteCaretBounds();
241     [MayThrowException] boolean isCaretBlinkingSuspended();
242 
243     DOMRect boundingBox(Element element);
244 
245     [MayThrowException] DOMRectList inspectorHighlightRects();
<span class="line-removed">246     [MayThrowException] DOMString inspectorHighlightObject();</span>
247 
248     [MayThrowException] unsigned long markerCountForNode(Node node, DOMString markerType);
249     [MayThrowException] Range? markerRangeForNode(Node node, DOMString markerType, unsigned long index);
250     [MayThrowException] DOMString markerDescriptionForNode(Node node, DOMString markerType, unsigned long index);
251     [MayThrowException] DOMString dumpMarkerRects(DOMString markerType);
252     void addTextMatchMarker(Range range, boolean isActive);
253     [MayThrowException] void setMarkedTextMatchesAreHighlighted(boolean flag);
254 
255     void invalidateFontCache();
256     void setFontSmoothingEnabled(boolean enabled);
257 
258     [MayThrowException] void setScrollViewPosition(long x, long y);
259 
260     // Like Element.scrollTo(), but without constaints, for testing rubber-banding.
261     [MayThrowException] void unconstrainedScrollTo(Element element, unrestricted double x, unrestricted double y);
262 
263     [MayThrowException] DOMRect layoutViewportRect();
264     [MayThrowException] DOMRect visualViewportRect();
265 
266     [MayThrowException] void setViewIsTransparent(boolean trnasparent);
267 
268     [MayThrowException] DOMString viewBaseBackgroundColor();
269     [MayThrowException] void setViewBaseBackgroundColor(DOMString colorValue);
270 
271     [MayThrowException] void setPagination(DOMString mode, long gap, optional long pageLength = 0);
272     [MayThrowException] void setPaginationLineGridEnabled(boolean enabled);
273 
274     [MayThrowException] DOMString configurationForViewport(unrestricted float devicePixelRatio, long deviceWidth, long deviceHeight, long availableWidth, long availableHeight);
275 
276     [MayThrowException] boolean wasLastChangeUserEdit(Element textField);
277     boolean elementShouldAutoComplete(HTMLInputElement inputElement);
278     void setAutofilled(HTMLInputElement inputElement, boolean enabled);

279     void setShowAutoFillButton(HTMLInputElement inputElement, AutoFillButtonType autoFillButtonType);
280     AutoFillButtonType autoFillButtonType(HTMLInputElement inputElement);
281     AutoFillButtonType lastAutoFillButtonType(HTMLInputElement inputElement);
282 
283     [MayThrowException] Range? rangeOfString(DOMString text, Range? referenceRange, sequence&lt;DOMString&gt; findOptions);
284     [MayThrowException] unsigned long countMatchesForText(DOMString text, sequence&lt;DOMString&gt; findOptions, DOMString markMatches);
285     [MayThrowException] unsigned long countFindMatches(DOMString text, sequence&lt;DOMString&gt; findOptions);
286 
287     [MayThrowException] DOMString autofillFieldName(Element formControlElement);
288 
289     [MayThrowException] void invalidateControlTints();
290 
291     [MayThrowException] void scrollElementToRect(Element element, long x, long y, long w, long h);
292 
293     Range? rangeFromLocationAndLength(Element scope, long rangeLocation, long rangeLength);
294     unsigned long locationFromRange(Element scope, Range range);
295     unsigned long lengthFromRange(Element scope, Range range);
296     DOMString rangeAsText(Range range);

297     Range subrange(Range range, long rangeLocation, long rangeLength);
298     [MayThrowException] Range? rangeForDictionaryLookupAtLocation(long x, long y);
299     Range? rangeOfStringNearLocation(Range range, DOMString text, long targetOffset);
300 
301     [MayThrowException] void setDelegatesScrolling(boolean enabled);
302 
303     [MayThrowException] long lastSpellCheckRequestSequence();
304     [MayThrowException] long lastSpellCheckProcessedSequence();
305 
306     sequence&lt;DOMString&gt; userPreferredLanguages();
307     void setUserPreferredLanguages(sequence&lt;DOMString&gt; languages);
308 
309     sequence&lt;DOMString&gt; userPreferredAudioCharacteristics();
310     void setUserPreferredAudioCharacteristic(DOMString characteristic);
311 
312     [MayThrowException] unsigned long wheelEventHandlerCount();
313     [MayThrowException] unsigned long touchEventHandlerCount();
314 
315     [MayThrowException] DOMRectList touchEventRectsForEvent(DOMString eventName);
316     [MayThrowException] DOMRectList passiveTouchEventListenerRects();
</pre>
<hr />
<pre>
329     boolean hasGrammarMarker(long from, long length);
330     boolean hasAutocorrectedMarker(long from, long length);
331     void setContinuousSpellCheckingEnabled(boolean enabled);
332     void setAutomaticQuoteSubstitutionEnabled(boolean enabled);
333     void setAutomaticLinkDetectionEnabled(boolean enabled);
334     void setAutomaticDashSubstitutionEnabled(boolean enabled);
335     void setAutomaticTextReplacementEnabled(boolean enabled);
336     void setAutomaticSpellingCorrectionEnabled(boolean enabled);
337 
338     void handleAcceptedCandidate(DOMString candidate, unsigned long location, unsigned long length);
339     void changeSelectionListType();
340 
341     boolean isOverwriteModeEnabled();
342     void toggleOverwriteModeEnabled();
343 
344     unsigned long numberOfScrollableAreas();
345 
346     [MayThrowException] boolean isPageBoxVisible(long pageNumber);
347 
348     unsigned long imageFrameIndex(HTMLImageElement element);


349     void setImageFrameDecodingDuration(HTMLImageElement element, unrestricted float duration);
350     void resetImageAnimation(HTMLImageElement element);
351     boolean isImageAnimating(HTMLImageElement element);

352     void setClearDecoderAfterAsyncFrameRequestForTesting(HTMLImageElement element, boolean enabled);
353     unsigned long imageDecodeCount(HTMLImageElement element);
354     unsigned long pdfDocumentCachingCount(HTMLImageElement element);
355     void setLargeImageAsyncDecodingEnabledForTesting(HTMLImageElement element, boolean enabled);
356     void setForceUpdateImageDataEnabledForTesting(HTMLImageElement element, boolean enabled);
357 
358     void setGridMaxTracksLimit(unsigned long maxTracksLimit);
359 
360     readonly attribute InternalSettings settings;
361     readonly attribute unsigned long workerThreadCount;
362 
363     [MayThrowException] readonly attribute boolean areSVGAnimationsPaused;
364     [MayThrowException] double svgAnimationsInterval(SVGSVGElement element);
365 


366     // Flags for layerTreeAsText.
367     const unsigned short LAYER_TREE_INCLUDES_VISIBLE_RECTS = 1;
368     const unsigned short LAYER_TREE_INCLUDES_TILE_CACHES = 2;
369     const unsigned short LAYER_TREE_INCLUDES_REPAINT_RECTS = 4;
370     const unsigned short LAYER_TREE_INCLUDES_PAINTING_PHASES = 8;
371     const unsigned short LAYER_TREE_INCLUDES_CONTENT_LAYERS = 16;
372     const unsigned short LAYER_TREE_INCLUDES_ACCELERATES_DRAWING = 32;
<span class="line-modified">373     const unsigned short LAYER_TREE_INCLUDES_BACKING_STORE_ATTACHED = 64;</span>
<span class="line-modified">374     const unsigned short LAYER_TREE_INCLUDES_ROOT_LAYER_PROPERTIES = 128;</span>


375     [MayThrowException] DOMString layerTreeAsText(Document document, optional unsigned short flags = 0);
376 
377     [MayThrowException] unsigned long long layerIDForElement(Element element);
378 
379     [MayThrowException] DOMString scrollbarOverlayStyle(optional Node? node = null);
380     [MayThrowException] boolean scrollbarUsingDarkAppearance(optional Node? node = null);
381 
382     [MayThrowException] DOMString scrollingStateTreeAsText();
383     [MayThrowException] DOMString mainThreadScrollingReasons(); // FIXME: rename to synchronousScrollingReasons().
384     [MayThrowException] DOMRectList nonFastScrollableRects();
385 
386     [MayThrowException] DOMString repaintRectsAsText();
387 
388     // These throw if the element does not have a compositing layer.
389     [MayThrowException] void setElementUsesDisplayListDrawing(Element element, boolean usesDisplayListDrawing);
390     [MayThrowException] void setElementTracksDisplayListReplay(Element element, boolean trackReplay);
391 
392     // Flags for displayListForElement.
393     const unsigned short DISPLAY_LIST_INCLUDES_PLATFORM_OPERATIONS = 1;
394     // Returns the recorded display list.
395     [MayThrowException] DOMString displayListForElement(Element element, optional unsigned short flags = 0);
396     // Returns the display list that was actually painted.
397     [MayThrowException] DOMString replayDisplayListForElement(Element element, optional unsigned short flags = 0);
398 
399     [MayThrowException] void garbageCollectDocumentResources();
400 
401     [MayThrowException] void insertAuthorCSS(DOMString css);
402     [MayThrowException] void insertUserCSS(DOMString css);
403 
404     readonly attribute boolean isUnderMemoryPressure;
405     void beginSimulatedMemoryPressure();
406     void endSimulatedMemoryPressure();
407 
<span class="line-modified">408     unsigned long numberOfIDBTransactions();</span>
409 
410     unsigned long numberOfLiveNodes();
411     unsigned long numberOfLiveDocuments();
412     unsigned long referencingNodeCount(Document document);
413     [Conditional=INTERSECTION_OBSERVER] unsigned long numberOfIntersectionObservers(Document document);
414     WindowProxy? openDummyInspectorFrontend(DOMString url);
415     void closeDummyInspectorFrontend();
416     [MayThrowException] void setInspectorIsUnderTest(boolean isUnderTest);
417 
418     DOMString counterValue(Element element);
419     long pageNumber(Element element, optional unrestricted float pageWidth = 800, optional unrestricted float pageHeight = 600);
420     sequence&lt;DOMString&gt; shortcutIconURLs();
421     long numberOfPages(optional unrestricted double pageWidthInPixels = 800, optional unrestricted double pageHeightInPixels = 600);
422     [MayThrowException] DOMString pageProperty(DOMString propertyName, long pageNumber);
423     [MayThrowException] DOMString pageSizeAndMarginsInPixels(long pageIndex, long width, long height, long marginTop, long marginRight, long marginBottom, long marginLeft);
424 
425     [MayThrowException] void setPageScaleFactor(unrestricted float scaleFactor, long x, long y);
426     [MayThrowException] float pageScaleFactor();
427 
428     [MayThrowException] void setPageZoomFactor(unrestricted float zoomFactor);
</pre>
<hr />
<pre>
500     readonly attribute unsigned long layoutCount;
501 
502     // Returns a string with information about the mouse cursor used at the specified client location.
503     [MayThrowException] DOMString getCurrentCursorInfo();
504 
505     DOMString markerTextForListItem(Element element);
506 
507     DOMString toolTipFromElement(Element element);
508 
509     SerializedScriptValue deserializeBuffer(ArrayBuffer buffer);
510     ArrayBuffer serializeObject(SerializedScriptValue object);
511 
512     boolean isFromCurrentWorld(any obj);
513 
514     void setUsesOverlayScrollbars(boolean enabled);
515     void setUsesMockScrollAnimator(boolean enabled);
516 
517     void forceReload(boolean endToEnd);
518     void reloadExpiredOnly();
519 
<span class="line-modified">520     void enableAutoSizeMode(boolean enabled, long minimumWidth, long minimumHeight, long maximumWidth, long maximumHeight);</span>
521 
522     [Conditional=VIDEO] sequence&lt;DOMString&gt; mediaResponseSources(HTMLMediaElement media);
523     [Conditional=VIDEO] sequence&lt;DOMString&gt; mediaResponseContentRanges(HTMLMediaElement media);
524     [Conditional=VIDEO] void simulateAudioInterruption(HTMLMediaElement element);
525     [Conditional=VIDEO, MayThrowException] boolean mediaElementHasCharacteristic(HTMLMediaElement element, DOMString characteristic);
526     [Conditional=VIDEO] void beginSimulatedHDCPError(HTMLMediaElement media);
527     [Conditional=VIDEO] void endSimulatedHDCPError(HTMLMediaElement media);
528 
529     [Conditional=VIDEO] boolean elementShouldBufferData(HTMLMediaElement media);


530 
531     [Conditional=LEGACY_ENCRYPTED_MEDIA] void initializeMockCDM();
532     [Conditional=ENCRYPTED_MEDIA] MockCDMFactory registerMockCDM();
533     void enableMockMediaCapabilities();
534 
535     [Conditional=SPEECH_SYNTHESIS] void enableMockSpeechSynthesizer();
536 
537     DOMString getImageSourceURL(Element element);
538 
539     [Conditional=VIDEO_TRACK, MayThrowException] DOMString captionsStyleSheetOverride();
540     [Conditional=VIDEO_TRACK, MayThrowException] void setCaptionsStyleSheetOverride(DOMString override);
541     [Conditional=VIDEO_TRACK, MayThrowException] void setPrimaryAudioTrackLanguageOverride(DOMString language);
542     [Conditional=VIDEO_TRACK, MayThrowException] void setCaptionDisplayMode(DOMString mode);

543 
544     [Conditional=VIDEO] TimeRanges createTimeRanges(Float32Array startTimes, Float32Array
545      endTimes);
546     [Conditional=VIDEO] unrestricted double closestTimeToTimeRanges(unrestricted double time, TimeRanges ranges);
547 
548     boolean isSelectPopupVisible(HTMLSelectElement element);
549 
550     [MayThrowException] boolean isPluginUnavailabilityIndicatorObscured(Element element);
551     [MayThrowException] DOMString unavailablePluginReplacementText(Element element);
552     boolean isPluginSnapshotted(Element element);

553 
554     [MayThrowException] DOMRect selectionBounds();
555     void setSelectionWithoutValidation(Node baseNode, unsigned long baseOffset, Node? extentNode, unsigned long extentOffset);
556 
557     [Conditional=MEDIA_SOURCE] void initializeMockMediaSource();
558     [Conditional=MEDIA_SOURCE] sequence&lt;DOMString&gt; bufferedSamplesForTrackID(SourceBuffer buffer, DOMString trackID);
559     [Conditional=MEDIA_SOURCE] sequence&lt;DOMString&gt; enqueuedSamplesForTrackID(SourceBuffer buffer, DOMString trackID);
560     [Conditional=MEDIA_SOURCE] void setShouldGenerateTimestamps(SourceBuffer buffer, boolean flag);


561 
562     [Conditional=VIDEO, MayThrowException] void beginMediaSessionInterruption(DOMString interruptionType);
563     [Conditional=VIDEO] void endMediaSessionInterruption(DOMString flags);
564     [Conditional=MEDIA_SESSION] void sendMediaSessionStartOfInterruptionNotification(MediaSessionInterruptingCategory category);
565     [Conditional=MEDIA_SESSION] void sendMediaSessionEndOfInterruptionNotification(MediaSessionInterruptingCategory category);
566     [Conditional=MEDIA_SESSION] DOMString mediaSessionCurrentState(MediaSession session);
567     [Conditional=MEDIA_SESSION] double mediaElementPlayerVolume(HTMLMediaElement element);
568     [Conditional=MEDIA_SESSION] void sendMediaControlEvent(MediaControlEvent event);
569     [Conditional=VIDEO] void applicationWillBecomeInactive();
570     [Conditional=VIDEO] void applicationDidBecomeActive();
571     [Conditional=VIDEO] void applicationWillEnterForeground(optional boolean suspendedUnderLock = false);
572     [Conditional=VIDEO] void applicationDidEnterBackground(optional boolean suspendedUnderLock = false);
573     [Conditional=VIDEO, MayThrowException] void setMediaSessionRestrictions(DOMString mediaType, DOMString restrictions);
574     [Conditional=VIDEO, MayThrowException] DOMString mediaSessionRestrictions(DOMString mediaType);
575     [Conditional=VIDEO] void setMediaElementRestrictions(HTMLMediaElement element, DOMString restrictions);
576     [Conditional=WEB_AUDIO] void setAudioContextRestrictions(AudioContext context, DOMString restrictions);
577     [Conditional=VIDEO, MayThrowException] void postRemoteControlCommand(DOMString command, optional unrestricted float argument = 0);
578     [Conditional=WIRELESS_PLAYBACK_TARGET] void setMockMediaPlaybackTargetPickerEnabled(boolean enabled);
579     [Conditional=WIRELESS_PLAYBACK_TARGET, MayThrowException] void setMockMediaPlaybackTargetPickerState(DOMString deviceName, DOMString deviceState);
580     [Conditional=MEDIA_STREAM] void setMockMediaCaptureDevicesEnabled(boolean enabled);
581     [Conditional=MEDIA_STREAM] void setCustomPrivateRecorderCreator();
582 
583     [Conditional=WEB_RTC] void emulateRTCPeerConnectionPlatformEvent(RTCPeerConnection connection, DOMString action);
584     [Conditional=WEB_RTC] void useMockRTCPeerConnectionFactory(DOMString testCase);
585     [Conditional=WEB_RTC] void setICECandidateFiltering(boolean enabled);
586     [Conditional=WEB_RTC] void setEnumeratingAllNetworkInterfacesEnabled(boolean enabled);
587     [Conditional=WEB_RTC] void stopPeerConnection(RTCPeerConnection connection);
588     [Conditional=WEB_RTC] void clearPeerConnectionFactory();

589 
590     [Conditional=VIDEO] void simulateSystemSleep();
591     [Conditional=VIDEO] void simulateSystemWake();
592     [Conditional=VIDEO] boolean elementIsBlockingDisplaySleep(HTMLMediaElement element);
593 
594     [MayThrowException] MockPageOverlay installMockPageOverlay(PageOverlayType type);
595     [MayThrowException] DOMString pageOverlayLayerTreeAsText(optional unsigned short flags = 0);
596 
597     void setPageMuted(DOMString mutedState);
598     DOMString pageMediaState();
599 
600     void setPageDefersLoading(boolean defersLoading);
601     [MayThrowException] boolean pageDefersLoading();
602 
603     File? createFile(DOMString url);
604     void queueMicroTask(long testNumber);
605     boolean testPreloaderSettingViewport();
606 
607     [Conditional=CONTENT_FILTERING] readonly attribute MockContentFilterSettings mockContentFilterSettings;
608 
609     [Conditional=CSS_SCROLL_SNAP, MayThrowException] DOMString scrollSnapOffsets(Element element);
610     [Conditional=CSS_SCROLL_SNAP] void setPlatformMomentumScrollingPredictionEnabled(boolean enabled);
611 
612     [MayThrowException] DOMString pathStringWithShrinkWrappedRects(sequence&lt;double&gt; rectComponents, double radius);
613 
614     [Conditional=VIDEO] DOMString getCurrentMediaControlsStatusForElement(HTMLMediaElement element);
615 
616     DOMString userVisibleString(DOMURL url);
617 
618     void setShowAllPlugins(boolean showAll);
619 
620     [Conditional=STREAMS_API, CallWith=ExecState] any cloneArrayBuffer(any buffer, any srcByteOffset, any byteLength);
621     [Conditional=STREAMS_API, CallWith=ExecState] boolean isReadableStreamDisturbed(any stream);
622 
<span class="line-modified">623     DOMString resourceLoadStatisticsForOrigin(DOMString domain);</span>
624     void setResourceLoadStatisticsEnabled(boolean enable);
<span class="line-removed">625     [EnabledBySetting=StorageAccessAPI] void setUserGrantsStorageAccess(boolean value);</span>
626 
627     [MayThrowException] void setCanShowModalDialogOverride(boolean allow);
628 
629     DOMString composedTreeAsText(Node parent);
630 
631     boolean isProcessingUserGesture();
632     double lastHandledUserGestureTimestamp();
633 
634     void withUserGesture(VoidCallback callback);
635 


636     GCObservation? observeGC(any observed);
637 
638     void setUserInterfaceLayoutDirection(UserInterfaceLayoutDirection userInterfaceLayoutDirection);
639     void setBaseWritingDirection(BaseWritingDirection direction);
640 
641     boolean userPrefersReducedMotion();
642     
643     void reportBacktrace();
644 
645     [Conditional=POINTER_LOCK] boolean pageHasPendingPointerLock();
646     [Conditional=POINTER_LOCK] boolean pageHasPointerLock();
647 
648     sequence&lt;DOMString&gt; accessKeyModifiers();
649 
650     void setQuickLookPassword(DOMString password);
651 
652     [CallWith=Document] void setAsRunningUserScripts();

653 
654     void disableTileSizeUpdateDelay();
655     void setSpeculativeTilingDelayDisabledForTesting(boolean disabled);
656 
657     [Conditional=WEBGL] void simulateWebGLContextChanged(WebGLRenderingContext context);
658     [Conditional=WEBGL] void failNextGPUStatusCheck(WebGLRenderingContext context);
659     [Conditional=WEBGL] boolean hasLowAndHighPowerGPUs();
660 
661     void setPageVisibility(boolean isVisible);
662     void setPageIsFocusedAndActive(boolean isFocused);
663 
664     [Conditional=WEB_RTC] void setH264HardwareEncoderAllowed(boolean allowed);
665     [Conditional=WEB_RTC] void applyRotationForOutgoingVideoSources(RTCPeerConnection connection);
666 


667     [Conditional=MEDIA_STREAM] void setCameraMediaStreamTrackOrientation(MediaStreamTrack track, short orientation);
668     [Conditional=MEDIA_STREAM] void observeMediaStreamTrack(MediaStreamTrack track);
669     [Conditional=MEDIA_STREAM] Promise&lt;ImageData&gt; grabNextMediaStreamTrackFrame();
670     [Conditional=MEDIA_STREAM] readonly attribute unsigned long trackAudioSampleCount;
671     [Conditional=MEDIA_STREAM] readonly attribute unsigned long trackVideoSampleCount;
672     [Conditional=MEDIA_STREAM] void delayMediaStreamTrackSamples(MediaStreamTrack track, float delay);
673     [Conditional=MEDIA_STREAM] void setMediaStreamTrackMuted(MediaStreamTrack track, boolean muted);
674     [Conditional=MEDIA_STREAM] void removeMediaStreamTrack(MediaStream stream, MediaStreamTrack track);
675     [Conditional=MEDIA_STREAM] void simulateMediaStreamTrackCaptureSourceFailure(MediaStreamTrack track);
676     [Conditional=MEDIA_STREAM] void setMediaStreamTrackIdentifier(MediaStreamTrack track, DOMString identifier);
677     [Conditional=MEDIA_STREAM] void setMediaStreamSourceInterrupted(MediaStreamTrack track, boolean interrupted);

678 
679     unsigned long long documentIdentifier(Document document);
680     boolean isDocumentAlive(unsigned long long documentIdentifier);
681 
682     boolean isAnyWorkletGlobalScopeAlive();
683 
684     DOMString serviceWorkerClientIdentifier(Document document);

685 
686     Promise&lt;void&gt; clearCacheStorageMemoryRepresentation();
687     Promise&lt;DOMString&gt; cacheStorageEngineRepresentation();
688     void setResponseSizeWithPadding(FetchResponse response, unsigned long long size);
689     unsigned long long responseSizeWithPadding(FetchResponse response);
690 


691     void setConsoleMessageListener(StringCallback callback);
692 
693     DOMString audioSessionCategory();
694     double preferredAudioBufferSize();
695     boolean audioSessionActive();
696 
697     [Conditional=SERVICE_WORKER] Promise&lt;boolean&gt; hasServiceWorkerRegistration(DOMString scopeURL);
698     [Conditional=SERVICE_WORKER] void terminateServiceWorker(ServiceWorker worker);
699     [Conditional=SERVICE_WORKER] boolean hasServiceWorkerConnection();
700 
701     [CallWith=Document, Conditional=APPLE_PAY] readonly attribute MockPaymentCoordinator mockPaymentCoordinator;
702 
703     boolean isSystemPreviewLink(Element element);
704     boolean isSystemPreviewImage(Element element);
705 
706     boolean usingAppleInternalSDK();
707 
708     void postTask(VoidCallback callback);
709     void markContextAsInsecure();
710 
</pre>
<hr />
<pre>
718 
719     void reloadWithoutContentExtensions();
720 
721     void setUseSystemAppearance(boolean value);
722 
723     unsigned long pluginCount();
724 
725     void notifyResourceLoadObserver();
726 
727     unsigned long primaryScreenDisplayID();
728 
729     boolean capsLockIsOn();
730 
731     boolean supportsVCPEncoder();
732 
733     HEVCParameterSet? parseHEVCCodecParameters(DOMString codecParameters);
734 
735     sequence&lt;CookieData&gt; getCookies();
736 
737     void setAlwaysAllowLocalWebarchive(boolean alwaysAllowLocalWebarchive);













738 };
</pre>
</td>
<td>
<hr />
<pre>
142 ] dictionary AcceleratedAnimation {
143     DOMString property;
144     double speed;
145 };
146 
147 [
148     ExportMacro=WEBCORE_TESTSUPPORT_EXPORT,
149     JSGenerateToJSObject,
150 ] dictionary CookieData {
151     DOMString name;
152     DOMString value;
153     DOMString domain;
154     double expires;
155     boolean isHttpOnly;
156     boolean isSecure;
157     boolean isSession;
158     boolean isSameSiteLax;
159     boolean isSameSiteStrict;
160 };
161 
<span class="line-added">162 [</span>
<span class="line-added">163     ExportMacro=WEBCORE_TESTSUPPORT_EXPORT,</span>
<span class="line-added">164     JSGenerateToJSObject,</span>
<span class="line-added">165 ] dictionary TextIndicatorInfo {</span>
<span class="line-added">166     DOMRectReadOnly textBoundingRectInRootViewCoordinates;</span>
<span class="line-added">167     DOMRectList textRectsInBoundingRectCoordinates;</span>
<span class="line-added">168 };</span>
<span class="line-added">169 </span>
<span class="line-added">170 [</span>
<span class="line-added">171     ExportMacro=WEBCORE_TESTSUPPORT_EXPORT,</span>
<span class="line-added">172     JSGenerateToJSObject,</span>
<span class="line-added">173 ] dictionary TextIndicatorOptions {</span>
<span class="line-added">174     boolean useBoundingRectAndPaintAllContentForComplexRanges = false;</span>
<span class="line-added">175     boolean computeEstimatedBackgroundColor = false;</span>
<span class="line-added">176     boolean respectTextColor = false;</span>
<span class="line-added">177 };</span>
<span class="line-added">178 </span>
179 [
180     ExportMacro=WEBCORE_TESTSUPPORT_EXPORT,
181     NoInterfaceObject,
182 ] interface Internals {
183     DOMString address(Node node);
184     boolean nodeNeedsStyleRecalc(Node node);
185     DOMString styleChangeType(Node node);
186     DOMString description(any value);
187 
188     // Animated image pausing testing.
189     boolean hasPausedImageAnimations(Element element);
190 
191     // Must be called on an element whose enclosingLayer() is self-painting.
192     boolean isPaintingFrequently(Element element);
193     void incrementFrequentPaintCounter(Element element);
194 
195     [MayThrowException] DOMString elementRenderTreeAsText(Element element);
196     boolean isPreloaded(DOMString url);
197     boolean isLoadingFromMemoryCache(DOMString url);
198     DOMString fetchResponseSource(FetchResponse response);
</pre>
<hr />
<pre>
243     [MayThrowException] boolean pauseTransitionAtTimeOnPseudoElement(DOMString property, unrestricted double pauseTime, Element element, DOMString pseudoId);
244 
245     // Web Animations testing.
246     sequence&lt;AcceleratedAnimation&gt; acceleratedAnimationsForElement(Element element);
247     unsigned long numberOfAnimationTimelineInvalidations();
248 
249     // For animations testing, we need a way to get at pseudo elements.
250     [MayThrowException] Element? pseudoElement(Element element, DOMString pseudoId);
251 
252     DOMString visiblePlaceholder(Element element);
253     void selectColorInColorChooser(HTMLInputElement element, DOMString colorValue);
254     [MayThrowException] sequence&lt;DOMString&gt; formControlStateOfPreviousHistoryItem();
255     [MayThrowException] void setFormControlStateOfPreviousHistoryItem(sequence&lt;DOMString&gt; values);
256 
257     [MayThrowException] DOMRect absoluteCaretBounds();
258     [MayThrowException] boolean isCaretBlinkingSuspended();
259 
260     DOMRect boundingBox(Element element);
261 
262     [MayThrowException] DOMRectList inspectorHighlightRects();

263 
264     [MayThrowException] unsigned long markerCountForNode(Node node, DOMString markerType);
265     [MayThrowException] Range? markerRangeForNode(Node node, DOMString markerType, unsigned long index);
266     [MayThrowException] DOMString markerDescriptionForNode(Node node, DOMString markerType, unsigned long index);
267     [MayThrowException] DOMString dumpMarkerRects(DOMString markerType);
268     void addTextMatchMarker(Range range, boolean isActive);
269     [MayThrowException] void setMarkedTextMatchesAreHighlighted(boolean flag);
270 
271     void invalidateFontCache();
272     void setFontSmoothingEnabled(boolean enabled);
273 
274     [MayThrowException] void setScrollViewPosition(long x, long y);
275 
276     // Like Element.scrollTo(), but without constaints, for testing rubber-banding.
277     [MayThrowException] void unconstrainedScrollTo(Element element, unrestricted double x, unrestricted double y);
278 
279     [MayThrowException] DOMRect layoutViewportRect();
280     [MayThrowException] DOMRect visualViewportRect();
281 
282     [MayThrowException] void setViewIsTransparent(boolean trnasparent);
283 
284     [MayThrowException] DOMString viewBaseBackgroundColor();
285     [MayThrowException] void setViewBaseBackgroundColor(DOMString colorValue);
286 
287     [MayThrowException] void setPagination(DOMString mode, long gap, optional long pageLength = 0);
288     [MayThrowException] void setPaginationLineGridEnabled(boolean enabled);
289 
290     [MayThrowException] DOMString configurationForViewport(unrestricted float devicePixelRatio, long deviceWidth, long deviceHeight, long availableWidth, long availableHeight);
291 
292     [MayThrowException] boolean wasLastChangeUserEdit(Element textField);
293     boolean elementShouldAutoComplete(HTMLInputElement inputElement);
294     void setAutofilled(HTMLInputElement inputElement, boolean enabled);
<span class="line-added">295     void setAutoFilledAndViewable(HTMLInputElement inputElement, boolean enabled);</span>
296     void setShowAutoFillButton(HTMLInputElement inputElement, AutoFillButtonType autoFillButtonType);
297     AutoFillButtonType autoFillButtonType(HTMLInputElement inputElement);
298     AutoFillButtonType lastAutoFillButtonType(HTMLInputElement inputElement);
299 
300     [MayThrowException] Range? rangeOfString(DOMString text, Range? referenceRange, sequence&lt;DOMString&gt; findOptions);
301     [MayThrowException] unsigned long countMatchesForText(DOMString text, sequence&lt;DOMString&gt; findOptions, DOMString markMatches);
302     [MayThrowException] unsigned long countFindMatches(DOMString text, sequence&lt;DOMString&gt; findOptions);
303 
304     [MayThrowException] DOMString autofillFieldName(Element formControlElement);
305 
306     [MayThrowException] void invalidateControlTints();
307 
308     [MayThrowException] void scrollElementToRect(Element element, long x, long y, long w, long h);
309 
310     Range? rangeFromLocationAndLength(Element scope, long rangeLocation, long rangeLength);
311     unsigned long locationFromRange(Element scope, Range range);
312     unsigned long lengthFromRange(Element scope, Range range);
313     DOMString rangeAsText(Range range);
<span class="line-added">314     DOMString rangeAsTextUsingBackwardsTextIterator(Range range);</span>
315     Range subrange(Range range, long rangeLocation, long rangeLength);
316     [MayThrowException] Range? rangeForDictionaryLookupAtLocation(long x, long y);
317     Range? rangeOfStringNearLocation(Range range, DOMString text, long targetOffset);
318 
319     [MayThrowException] void setDelegatesScrolling(boolean enabled);
320 
321     [MayThrowException] long lastSpellCheckRequestSequence();
322     [MayThrowException] long lastSpellCheckProcessedSequence();
323 
324     sequence&lt;DOMString&gt; userPreferredLanguages();
325     void setUserPreferredLanguages(sequence&lt;DOMString&gt; languages);
326 
327     sequence&lt;DOMString&gt; userPreferredAudioCharacteristics();
328     void setUserPreferredAudioCharacteristic(DOMString characteristic);
329 
330     [MayThrowException] unsigned long wheelEventHandlerCount();
331     [MayThrowException] unsigned long touchEventHandlerCount();
332 
333     [MayThrowException] DOMRectList touchEventRectsForEvent(DOMString eventName);
334     [MayThrowException] DOMRectList passiveTouchEventListenerRects();
</pre>
<hr />
<pre>
347     boolean hasGrammarMarker(long from, long length);
348     boolean hasAutocorrectedMarker(long from, long length);
349     void setContinuousSpellCheckingEnabled(boolean enabled);
350     void setAutomaticQuoteSubstitutionEnabled(boolean enabled);
351     void setAutomaticLinkDetectionEnabled(boolean enabled);
352     void setAutomaticDashSubstitutionEnabled(boolean enabled);
353     void setAutomaticTextReplacementEnabled(boolean enabled);
354     void setAutomaticSpellingCorrectionEnabled(boolean enabled);
355 
356     void handleAcceptedCandidate(DOMString candidate, unsigned long location, unsigned long length);
357     void changeSelectionListType();
358 
359     boolean isOverwriteModeEnabled();
360     void toggleOverwriteModeEnabled();
361 
362     unsigned long numberOfScrollableAreas();
363 
364     [MayThrowException] boolean isPageBoxVisible(long pageNumber);
365 
366     unsigned long imageFrameIndex(HTMLImageElement element);
<span class="line-added">367     unsigned long imageFrameCount(HTMLImageElement element);</span>
<span class="line-added">368     float imageFrameDurationAtIndex(HTMLImageElement element, unsigned long index);</span>
369     void setImageFrameDecodingDuration(HTMLImageElement element, unrestricted float duration);
370     void resetImageAnimation(HTMLImageElement element);
371     boolean isImageAnimating(HTMLImageElement element);
<span class="line-added">372     unsigned long imagePendingDecodePromisesCountForTesting(HTMLImageElement element);</span>
373     void setClearDecoderAfterAsyncFrameRequestForTesting(HTMLImageElement element, boolean enabled);
374     unsigned long imageDecodeCount(HTMLImageElement element);
375     unsigned long pdfDocumentCachingCount(HTMLImageElement element);
376     void setLargeImageAsyncDecodingEnabledForTesting(HTMLImageElement element, boolean enabled);
377     void setForceUpdateImageDataEnabledForTesting(HTMLImageElement element, boolean enabled);
378 
379     void setGridMaxTracksLimit(unsigned long maxTracksLimit);
380 
381     readonly attribute InternalSettings settings;
382     readonly attribute unsigned long workerThreadCount;
383 
384     [MayThrowException] readonly attribute boolean areSVGAnimationsPaused;
385     [MayThrowException] double svgAnimationsInterval(SVGSVGElement element);
386 
<span class="line-added">387     boolean testProcessIncomingSyncMessagesWhenWaitingForSyncReply();</span>
<span class="line-added">388 </span>
389     // Flags for layerTreeAsText.
390     const unsigned short LAYER_TREE_INCLUDES_VISIBLE_RECTS = 1;
391     const unsigned short LAYER_TREE_INCLUDES_TILE_CACHES = 2;
392     const unsigned short LAYER_TREE_INCLUDES_REPAINT_RECTS = 4;
393     const unsigned short LAYER_TREE_INCLUDES_PAINTING_PHASES = 8;
394     const unsigned short LAYER_TREE_INCLUDES_CONTENT_LAYERS = 16;
395     const unsigned short LAYER_TREE_INCLUDES_ACCELERATES_DRAWING = 32;
<span class="line-modified">396     const unsigned short LAYER_TREE_INCLUDES_CLIPPING = 64;</span>
<span class="line-modified">397     const unsigned short LAYER_TREE_INCLUDES_BACKING_STORE_ATTACHED = 128;</span>
<span class="line-added">398     const unsigned short LAYER_TREE_INCLUDES_ROOT_LAYER_PROPERTIES = 256;</span>
<span class="line-added">399     const unsigned short LAYER_TREE_INCLUDES_EVENT_REGION = 512;</span>
400     [MayThrowException] DOMString layerTreeAsText(Document document, optional unsigned short flags = 0);
401 
402     [MayThrowException] unsigned long long layerIDForElement(Element element);
403 
404     [MayThrowException] DOMString scrollbarOverlayStyle(optional Node? node = null);
405     [MayThrowException] boolean scrollbarUsingDarkAppearance(optional Node? node = null);
406 
407     [MayThrowException] DOMString scrollingStateTreeAsText();
408     [MayThrowException] DOMString mainThreadScrollingReasons(); // FIXME: rename to synchronousScrollingReasons().
409     [MayThrowException] DOMRectList nonFastScrollableRects();
410 
411     [MayThrowException] DOMString repaintRectsAsText();
412 
413     // These throw if the element does not have a compositing layer.
414     [MayThrowException] void setElementUsesDisplayListDrawing(Element element, boolean usesDisplayListDrawing);
415     [MayThrowException] void setElementTracksDisplayListReplay(Element element, boolean trackReplay);
416 
417     // Flags for displayListForElement.
418     const unsigned short DISPLAY_LIST_INCLUDES_PLATFORM_OPERATIONS = 1;
419     // Returns the recorded display list.
420     [MayThrowException] DOMString displayListForElement(Element element, optional unsigned short flags = 0);
421     // Returns the display list that was actually painted.
422     [MayThrowException] DOMString replayDisplayListForElement(Element element, optional unsigned short flags = 0);
423 
424     [MayThrowException] void garbageCollectDocumentResources();
425 
426     [MayThrowException] void insertAuthorCSS(DOMString css);
427     [MayThrowException] void insertUserCSS(DOMString css);
428 
429     readonly attribute boolean isUnderMemoryPressure;
430     void beginSimulatedMemoryPressure();
431     void endSimulatedMemoryPressure();
432 
<span class="line-modified">433     [Conditional=INDEXED_DATABASE] unsigned long numberOfIDBTransactions();</span>
434 
435     unsigned long numberOfLiveNodes();
436     unsigned long numberOfLiveDocuments();
437     unsigned long referencingNodeCount(Document document);
438     [Conditional=INTERSECTION_OBSERVER] unsigned long numberOfIntersectionObservers(Document document);
439     WindowProxy? openDummyInspectorFrontend(DOMString url);
440     void closeDummyInspectorFrontend();
441     [MayThrowException] void setInspectorIsUnderTest(boolean isUnderTest);
442 
443     DOMString counterValue(Element element);
444     long pageNumber(Element element, optional unrestricted float pageWidth = 800, optional unrestricted float pageHeight = 600);
445     sequence&lt;DOMString&gt; shortcutIconURLs();
446     long numberOfPages(optional unrestricted double pageWidthInPixels = 800, optional unrestricted double pageHeightInPixels = 600);
447     [MayThrowException] DOMString pageProperty(DOMString propertyName, long pageNumber);
448     [MayThrowException] DOMString pageSizeAndMarginsInPixels(long pageIndex, long width, long height, long marginTop, long marginRight, long marginBottom, long marginLeft);
449 
450     [MayThrowException] void setPageScaleFactor(unrestricted float scaleFactor, long x, long y);
451     [MayThrowException] float pageScaleFactor();
452 
453     [MayThrowException] void setPageZoomFactor(unrestricted float zoomFactor);
</pre>
<hr />
<pre>
525     readonly attribute unsigned long layoutCount;
526 
527     // Returns a string with information about the mouse cursor used at the specified client location.
528     [MayThrowException] DOMString getCurrentCursorInfo();
529 
530     DOMString markerTextForListItem(Element element);
531 
532     DOMString toolTipFromElement(Element element);
533 
534     SerializedScriptValue deserializeBuffer(ArrayBuffer buffer);
535     ArrayBuffer serializeObject(SerializedScriptValue object);
536 
537     boolean isFromCurrentWorld(any obj);
538 
539     void setUsesOverlayScrollbars(boolean enabled);
540     void setUsesMockScrollAnimator(boolean enabled);
541 
542     void forceReload(boolean endToEnd);
543     void reloadExpiredOnly();
544 
<span class="line-modified">545     void enableAutoSizeMode(boolean enabled, long width, long height);</span>
546 
547     [Conditional=VIDEO] sequence&lt;DOMString&gt; mediaResponseSources(HTMLMediaElement media);
548     [Conditional=VIDEO] sequence&lt;DOMString&gt; mediaResponseContentRanges(HTMLMediaElement media);
549     [Conditional=VIDEO] void simulateAudioInterruption(HTMLMediaElement element);
550     [Conditional=VIDEO, MayThrowException] boolean mediaElementHasCharacteristic(HTMLMediaElement element, DOMString characteristic);
551     [Conditional=VIDEO] void beginSimulatedHDCPError(HTMLMediaElement media);
552     [Conditional=VIDEO] void endSimulatedHDCPError(HTMLMediaElement media);
553 
554     [Conditional=VIDEO] boolean elementShouldBufferData(HTMLMediaElement media);
<span class="line-added">555     [Conditional=VIDEO] DOMString elementBufferingPolicy(HTMLMediaElement media);</span>
<span class="line-added">556     [Conditional=VIDEO] double privatePlayerVolume(HTMLMediaElement media);</span>
557 
558     [Conditional=LEGACY_ENCRYPTED_MEDIA] void initializeMockCDM();
559     [Conditional=ENCRYPTED_MEDIA] MockCDMFactory registerMockCDM();
560     void enableMockMediaCapabilities();
561 
562     [Conditional=SPEECH_SYNTHESIS] void enableMockSpeechSynthesizer();
563 
564     DOMString getImageSourceURL(Element element);
565 
566     [Conditional=VIDEO_TRACK, MayThrowException] DOMString captionsStyleSheetOverride();
567     [Conditional=VIDEO_TRACK, MayThrowException] void setCaptionsStyleSheetOverride(DOMString override);
568     [Conditional=VIDEO_TRACK, MayThrowException] void setPrimaryAudioTrackLanguageOverride(DOMString language);
569     [Conditional=VIDEO_TRACK, MayThrowException] void setCaptionDisplayMode(DOMString mode);
<span class="line-added">570     [Conditional=VIDEO_TRACK] TextTrackCueGeneric createGenericCue(double startTime, double endTime, DOMString text);</span>
571 
572     [Conditional=VIDEO] TimeRanges createTimeRanges(Float32Array startTimes, Float32Array
573      endTimes);
574     [Conditional=VIDEO] unrestricted double closestTimeToTimeRanges(unrestricted double time, TimeRanges ranges);
575 
576     boolean isSelectPopupVisible(HTMLSelectElement element);
577 
578     [MayThrowException] boolean isPluginUnavailabilityIndicatorObscured(Element element);
579     [MayThrowException] DOMString unavailablePluginReplacementText(Element element);
580     boolean isPluginSnapshotted(Element element);
<span class="line-added">581     boolean pluginIsBelowSizeThreshold(Element element);</span>
582 
583     [MayThrowException] DOMRect selectionBounds();
584     void setSelectionWithoutValidation(Node baseNode, unsigned long baseOffset, Node? extentNode, unsigned long extentOffset);
585 
586     [Conditional=MEDIA_SOURCE] void initializeMockMediaSource();
587     [Conditional=MEDIA_SOURCE] sequence&lt;DOMString&gt; bufferedSamplesForTrackID(SourceBuffer buffer, DOMString trackID);
588     [Conditional=MEDIA_SOURCE] sequence&lt;DOMString&gt; enqueuedSamplesForTrackID(SourceBuffer buffer, DOMString trackID);
589     [Conditional=MEDIA_SOURCE] void setShouldGenerateTimestamps(SourceBuffer buffer, boolean flag);
<span class="line-added">590     [Conditional=MEDIA_SOURCE] double minimumUpcomingPresentationTimeForTrackID(SourceBuffer buffer, DOMString trackID);</span>
<span class="line-added">591     [Conditional=MEDIA_SOURCE] void setMaximumQueueDepthForTrackID(SourceBuffer buffer, DOMString trackID, unsigned long maxQueueDepth);</span>
592 
593     [Conditional=VIDEO, MayThrowException] void beginMediaSessionInterruption(DOMString interruptionType);
594     [Conditional=VIDEO] void endMediaSessionInterruption(DOMString flags);
595     [Conditional=MEDIA_SESSION] void sendMediaSessionStartOfInterruptionNotification(MediaSessionInterruptingCategory category);
596     [Conditional=MEDIA_SESSION] void sendMediaSessionEndOfInterruptionNotification(MediaSessionInterruptingCategory category);
597     [Conditional=MEDIA_SESSION] DOMString mediaSessionCurrentState(MediaSession session);
598     [Conditional=MEDIA_SESSION] double mediaElementPlayerVolume(HTMLMediaElement element);
599     [Conditional=MEDIA_SESSION] void sendMediaControlEvent(MediaControlEvent event);
600     [Conditional=VIDEO] void applicationWillBecomeInactive();
601     [Conditional=VIDEO] void applicationDidBecomeActive();
602     [Conditional=VIDEO] void applicationWillEnterForeground(optional boolean suspendedUnderLock = false);
603     [Conditional=VIDEO] void applicationDidEnterBackground(optional boolean suspendedUnderLock = false);
604     [Conditional=VIDEO, MayThrowException] void setMediaSessionRestrictions(DOMString mediaType, DOMString restrictions);
605     [Conditional=VIDEO, MayThrowException] DOMString mediaSessionRestrictions(DOMString mediaType);
606     [Conditional=VIDEO] void setMediaElementRestrictions(HTMLMediaElement element, DOMString restrictions);
607     [Conditional=WEB_AUDIO] void setAudioContextRestrictions(AudioContext context, DOMString restrictions);
608     [Conditional=VIDEO, MayThrowException] void postRemoteControlCommand(DOMString command, optional unrestricted float argument = 0);
609     [Conditional=WIRELESS_PLAYBACK_TARGET] void setMockMediaPlaybackTargetPickerEnabled(boolean enabled);
610     [Conditional=WIRELESS_PLAYBACK_TARGET, MayThrowException] void setMockMediaPlaybackTargetPickerState(DOMString deviceName, DOMString deviceState);
611     [Conditional=MEDIA_STREAM] void setMockMediaCaptureDevicesEnabled(boolean enabled);
612     [Conditional=MEDIA_STREAM] void setCustomPrivateRecorderCreator();
613 
614     [Conditional=WEB_RTC] void emulateRTCPeerConnectionPlatformEvent(RTCPeerConnection connection, DOMString action);
615     [Conditional=WEB_RTC] void useMockRTCPeerConnectionFactory(DOMString testCase);
616     [Conditional=WEB_RTC] void setICECandidateFiltering(boolean enabled);
617     [Conditional=WEB_RTC] void setEnumeratingAllNetworkInterfacesEnabled(boolean enabled);
618     [Conditional=WEB_RTC] void stopPeerConnection(RTCPeerConnection connection);
619     [Conditional=WEB_RTC] void clearPeerConnectionFactory();
<span class="line-added">620     [Conditional=WEB_RTC] void setEnableWebRTCEncryption(boolean enabled);</span>
621 
622     [Conditional=VIDEO] void simulateSystemSleep();
623     [Conditional=VIDEO] void simulateSystemWake();
624     [Conditional=VIDEO] boolean elementIsBlockingDisplaySleep(HTMLMediaElement element);
625 
626     [MayThrowException] MockPageOverlay installMockPageOverlay(PageOverlayType type);
627     [MayThrowException] DOMString pageOverlayLayerTreeAsText(optional unsigned short flags = 0);
628 
629     void setPageMuted(DOMString mutedState);
630     DOMString pageMediaState();
631 
632     void setPageDefersLoading(boolean defersLoading);
633     [MayThrowException] boolean pageDefersLoading();
634 
635     File? createFile(DOMString url);
636     void queueMicroTask(long testNumber);
637     boolean testPreloaderSettingViewport();
638 
639     [Conditional=CONTENT_FILTERING] readonly attribute MockContentFilterSettings mockContentFilterSettings;
640 
641     [Conditional=CSS_SCROLL_SNAP, MayThrowException] DOMString scrollSnapOffsets(Element element);
642     [Conditional=CSS_SCROLL_SNAP] void setPlatformMomentumScrollingPredictionEnabled(boolean enabled);
643 
644     [MayThrowException] DOMString pathStringWithShrinkWrappedRects(sequence&lt;double&gt; rectComponents, double radius);
645 
646     [Conditional=VIDEO] DOMString getCurrentMediaControlsStatusForElement(HTMLMediaElement element);
647 
648     DOMString userVisibleString(DOMURL url);
649 
650     void setShowAllPlugins(boolean showAll);
651 
652     [Conditional=STREAMS_API, CallWith=ExecState] any cloneArrayBuffer(any buffer, any srcByteOffset, any byteLength);
653     [Conditional=STREAMS_API, CallWith=ExecState] boolean isReadableStreamDisturbed(any stream);
654 
<span class="line-modified">655     DOMString resourceLoadStatisticsForURL(DOMURL url);</span>
656     void setResourceLoadStatisticsEnabled(boolean enable);

657 
658     [MayThrowException] void setCanShowModalDialogOverride(boolean allow);
659 
660     DOMString composedTreeAsText(Node parent);
661 
662     boolean isProcessingUserGesture();
663     double lastHandledUserGestureTimestamp();
664 
665     void withUserGesture(VoidCallback callback);
666 
<span class="line-added">667     boolean userIsInteracting();</span>
<span class="line-added">668 </span>
669     GCObservation? observeGC(any observed);
670 
671     void setUserInterfaceLayoutDirection(UserInterfaceLayoutDirection userInterfaceLayoutDirection);
672     void setBaseWritingDirection(BaseWritingDirection direction);
673 
674     boolean userPrefersReducedMotion();
675     
676     void reportBacktrace();
677 
678     [Conditional=POINTER_LOCK] boolean pageHasPendingPointerLock();
679     [Conditional=POINTER_LOCK] boolean pageHasPointerLock();
680 
681     sequence&lt;DOMString&gt; accessKeyModifiers();
682 
683     void setQuickLookPassword(DOMString password);
684 
685     [CallWith=Document] void setAsRunningUserScripts();
<span class="line-added">686     [CallWith=Document, Conditional=APPLE_PAY] void setApplePayIsActive();</span>
687 
688     void disableTileSizeUpdateDelay();
689     void setSpeculativeTilingDelayDisabledForTesting(boolean disabled);
690 
691     [Conditional=WEBGL] void simulateWebGLContextChanged(WebGLRenderingContext context);
692     [Conditional=WEBGL] void failNextGPUStatusCheck(WebGLRenderingContext context);
693     [Conditional=WEBGL] boolean hasLowAndHighPowerGPUs();
694 
695     void setPageVisibility(boolean isVisible);
696     void setPageIsFocusedAndActive(boolean isFocused);
697 
698     [Conditional=WEB_RTC] void setH264HardwareEncoderAllowed(boolean allowed);
699     [Conditional=WEB_RTC] void applyRotationForOutgoingVideoSources(RTCPeerConnection connection);
700 
<span class="line-added">701     [Conditional=MEDIA_STREAM] void setMockAudioTrackChannelNumber(MediaStreamTrack track, unsigned short count);</span>
<span class="line-added">702     [Conditional=MEDIA_STREAM] void setShouldInterruptAudioOnPageVisibilityChange(boolean shouldInterrupt);</span>
703     [Conditional=MEDIA_STREAM] void setCameraMediaStreamTrackOrientation(MediaStreamTrack track, short orientation);
704     [Conditional=MEDIA_STREAM] void observeMediaStreamTrack(MediaStreamTrack track);
705     [Conditional=MEDIA_STREAM] Promise&lt;ImageData&gt; grabNextMediaStreamTrackFrame();
706     [Conditional=MEDIA_STREAM] readonly attribute unsigned long trackAudioSampleCount;
707     [Conditional=MEDIA_STREAM] readonly attribute unsigned long trackVideoSampleCount;
708     [Conditional=MEDIA_STREAM] void delayMediaStreamTrackSamples(MediaStreamTrack track, float delay);
709     [Conditional=MEDIA_STREAM] void setMediaStreamTrackMuted(MediaStreamTrack track, boolean muted);
710     [Conditional=MEDIA_STREAM] void removeMediaStreamTrack(MediaStream stream, MediaStreamTrack track);
711     [Conditional=MEDIA_STREAM] void simulateMediaStreamTrackCaptureSourceFailure(MediaStreamTrack track);
712     [Conditional=MEDIA_STREAM] void setMediaStreamTrackIdentifier(MediaStreamTrack track, DOMString identifier);
713     [Conditional=MEDIA_STREAM] void setMediaStreamSourceInterrupted(MediaStreamTrack track, boolean interrupted);
<span class="line-added">714     [Conditional=MEDIA_STREAM] void setDisableGetDisplayMediaUserGestureConstraint(boolean value);</span>
715 
716     unsigned long long documentIdentifier(Document document);
717     boolean isDocumentAlive(unsigned long long documentIdentifier);
718 
719     boolean isAnyWorkletGlobalScopeAlive();
720 
721     DOMString serviceWorkerClientIdentifier(Document document);
<span class="line-added">722     Promise&lt;void&gt; storeRegistrationsOnDisk();</span>
723 
724     Promise&lt;void&gt; clearCacheStorageMemoryRepresentation();
725     Promise&lt;DOMString&gt; cacheStorageEngineRepresentation();
726     void setResponseSizeWithPadding(FetchResponse response, unsigned long long size);
727     unsigned long long responseSizeWithPadding(FetchResponse response);
728 
<span class="line-added">729     void updateQuotaBasedOnSpaceUsage();</span>
<span class="line-added">730 </span>
731     void setConsoleMessageListener(StringCallback callback);
732 
733     DOMString audioSessionCategory();
734     double preferredAudioBufferSize();
735     boolean audioSessionActive();
736 
737     [Conditional=SERVICE_WORKER] Promise&lt;boolean&gt; hasServiceWorkerRegistration(DOMString scopeURL);
738     [Conditional=SERVICE_WORKER] void terminateServiceWorker(ServiceWorker worker);
739     [Conditional=SERVICE_WORKER] boolean hasServiceWorkerConnection();
740 
741     [CallWith=Document, Conditional=APPLE_PAY] readonly attribute MockPaymentCoordinator mockPaymentCoordinator;
742 
743     boolean isSystemPreviewLink(Element element);
744     boolean isSystemPreviewImage(Element element);
745 
746     boolean usingAppleInternalSDK();
747 
748     void postTask(VoidCallback callback);
749     void markContextAsInsecure();
750 
</pre>
<hr />
<pre>
758 
759     void reloadWithoutContentExtensions();
760 
761     void setUseSystemAppearance(boolean value);
762 
763     unsigned long pluginCount();
764 
765     void notifyResourceLoadObserver();
766 
767     unsigned long primaryScreenDisplayID();
768 
769     boolean capsLockIsOn();
770 
771     boolean supportsVCPEncoder();
772 
773     HEVCParameterSet? parseHEVCCodecParameters(DOMString codecParameters);
774 
775     sequence&lt;CookieData&gt; getCookies();
776 
777     void setAlwaysAllowLocalWebarchive(boolean alwaysAllowLocalWebarchive);
<span class="line-added">778 </span>
<span class="line-added">779     void processWillSuspend();</span>
<span class="line-added">780     void processDidResume();</span>
<span class="line-added">781 </span>
<span class="line-added">782     void testDictionaryLogging();</span>
<span class="line-added">783 </span>
<span class="line-added">784     void setXHRMaximumIntervalForUserGestureForwarding(XMLHttpRequest xhr, double interval);</span>
<span class="line-added">785 </span>
<span class="line-added">786     void setIsPlayingToAutomotiveHeadUnit(boolean value);</span>
<span class="line-added">787 </span>
<span class="line-added">788     TextIndicatorInfo textIndicatorForRange(Range range, TextIndicatorOptions options);</span>
<span class="line-added">789 </span>
<span class="line-added">790     void addPrefetchLoadEventListener(HTMLLinkElement link, EventListener? callback);</span>
791 };
</pre>
</td>
</tr>
</table>
<center><a href="Internals.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="LegacyMockCDM.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>
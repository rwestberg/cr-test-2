<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/JavaScriptCore/offlineasm/cloop.rb</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="backends.rb.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="instructions.rb.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/offlineasm/cloop.rb</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,6 +1,6 @@</span>
<span class="udiff-line-modified-removed">- # Copyright (C) 2012-2018 Apple Inc. All rights reserved.</span>
<span class="udiff-line-modified-added">+ # Copyright (C) 2012-2019 Apple Inc. All rights reserved.</span>
  #
  # Redistribution and use in source and binary forms, with or without
  # modification, are permitted provided that the following conditions
  # are met:
  # 1. Redistributions of source code must retain the above copyright
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -31,12 +31,12 @@</span>
  # code and the usage convention of registers will look a lot like the
  # ARMv7 backend&#39;s.
  
  def cloopMapType(type)
      case type
<span class="udiff-line-modified-removed">-     when :int;            &quot;.i()&quot;</span>
<span class="udiff-line-modified-removed">-     when :uint;           &quot;.u()&quot;</span>
<span class="udiff-line-modified-added">+     when :intptr;         &quot;.i()&quot;</span>
<span class="udiff-line-modified-added">+     when :uintptr;        &quot;.u()&quot;</span>
      when :int32;          &quot;.i32()&quot;
      when :uint32;         &quot;.u32()&quot;
      when :int64;          &quot;.i64()&quot;
      when :uint64;         &quot;.u64()&quot;
      when :int8;           &quot;.i8()&quot;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -53,17 +53,17 @@</span>
      end
  end
  
  
  class SpecialRegister &lt; NoChildren
<span class="udiff-line-modified-removed">-     def clLValue(type=:int)</span>
<span class="udiff-line-modified-added">+     def clLValue(type=:intptr)</span>
          clDump
      end
      def clDump
          @name
      end
<span class="udiff-line-modified-removed">-     def clValue(type=:int)</span>
<span class="udiff-line-modified-added">+     def clValue(type=:intptr)</span>
          @name + cloopMapType(type)
      end
  end
  
  C_LOOP_SCRATCH_FPR = SpecialRegister.new(&quot;d6&quot;)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -101,14 +101,14 @@</span>
              &quot;sp&quot;
          else
              raise &quot;Bad register #{name} for C_LOOP at #{codeOriginString}&quot;
          end
      end
<span class="udiff-line-modified-removed">-     def clLValue(type=:int)</span>
<span class="udiff-line-modified-added">+     def clLValue(type=:intptr)</span>
          clDump
      end
<span class="udiff-line-modified-removed">-     def clValue(type=:int)</span>
<span class="udiff-line-modified-added">+     def clValue(type=:intptr)</span>
          clDump + cloopMapType(type)
      end
  end
  
  class FPRegisterID
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -128,26 +128,26 @@</span>
              &quot;d5&quot;
          else
              raise &quot;Bad register #{name} for C_LOOP at #{codeOriginString}&quot;
          end
      end
<span class="udiff-line-modified-removed">-     def clLValue(type=:int)</span>
<span class="udiff-line-modified-added">+     def clLValue(type=:intptr)</span>
          clDump
      end
<span class="udiff-line-modified-removed">-     def clValue(type=:int)</span>
<span class="udiff-line-modified-added">+     def clValue(type=:intptr)</span>
          clDump + cloopMapType(type)
      end
  end
  
  class Immediate
      def clDump
          &quot;#{value}&quot;
      end
<span class="udiff-line-modified-removed">-     def clLValue(type=:int)</span>
<span class="udiff-line-modified-added">+     def clLValue(type=:intptr)</span>
          raise &quot;Immediate cannot be used as an LValue&quot;
      end
<span class="udiff-line-modified-removed">-     def clValue(type=:int)</span>
<span class="udiff-line-modified-added">+     def clValue(type=:intptr)</span>
          # There is a case of a very large unsigned number (0x8000000000000000)
          # which we wish to encode.  Unfortunately, the C/C++ compiler
          # complains if we express that number as a positive decimal integer.
          # Hence, for positive values, we just convert the number into hex form
          # to keep the compiler happy.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -160,38 +160,38 @@</span>
  
          case type
          when :int8;    &quot;int8_t(#{valueStr})&quot;
          when :int32;   &quot;int32_t(#{valueStr})&quot;
          when :int64;   &quot;int64_t(#{valueStr})&quot;
<span class="udiff-line-modified-removed">-         when :int;     &quot;intptr_t(#{valueStr})&quot;</span>
<span class="udiff-line-modified-added">+         when :intptr;  &quot;intptr_t(#{valueStr})&quot;</span>
          when :uint8;   &quot;uint8_t(#{valueStr})&quot;
          when :uint32;  &quot;uint32_t(#{valueStr})&quot;
          when :uint64;  &quot;uint64_t(#{valueStr})&quot;
<span class="udiff-line-modified-removed">-         when :uint;    &quot;uintptr_t(#{valueStr})&quot;</span>
<span class="udiff-line-modified-added">+         when :uintptr; &quot;uintptr_t(#{valueStr})&quot;</span>
          else
              raise &quot;Not implemented immediate of type: #{type}&quot; 
          end
      end
  end
  
  class Address
      def clDump
          &quot;[#{base.clDump}, #{offset.value}]&quot;
      end
<span class="udiff-line-modified-removed">-     def clLValue(type=:int)</span>
<span class="udiff-line-modified-added">+     def clLValue(type=:intptr)</span>
          clValue(type)
      end
<span class="udiff-line-modified-removed">-     def clValue(type=:int)</span>
<span class="udiff-line-modified-added">+     def clValue(type=:intptr)</span>
          case type
          when :int8;         int8MemRef
          when :int32;        int32MemRef
          when :int64;        int64MemRef
<span class="udiff-line-modified-removed">-         when :int;          intMemRef</span>
<span class="udiff-line-modified-added">+         when :intptr;       intptrMemRef</span>
          when :uint8;        uint8MemRef
          when :uint32;       uint32MemRef
          when :uint64;       uint64MemRef
<span class="udiff-line-modified-removed">-         when :uint;         uintMemRef</span>
<span class="udiff-line-modified-added">+         when :uintptr;      uintptrMemRef</span>
          when :opcode;       opcodeMemRef
          when :nativeFunc;   nativeFuncMemRef
          else
              raise &quot;Unexpected Address type: #{type}&quot;
          end
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -215,11 +215,11 @@</span>
          &quot;*CAST&lt;int32_t*&gt;(#{pointerExpr})&quot;
      end
      def int64MemRef
          &quot;*CAST&lt;int64_t*&gt;(#{pointerExpr})&quot;
      end
<span class="udiff-line-modified-removed">-     def intMemRef</span>
<span class="udiff-line-modified-added">+     def intptrMemRef</span>
          &quot;*CAST&lt;intptr_t*&gt;(#{pointerExpr})&quot;
      end
      def uint8MemRef
          &quot;*CAST&lt;uint8_t*&gt;(#{pointerExpr})&quot;
      end
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -230,11 +230,11 @@</span>
          &quot;*CAST&lt;uint32_t*&gt;(#{pointerExpr})&quot;
      end
      def uint64MemRef
          &quot;*CAST&lt;uint64_t*&gt;(#{pointerExpr})&quot;
      end
<span class="udiff-line-modified-removed">-     def uintMemRef</span>
<span class="udiff-line-modified-added">+     def uintptrMemRef</span>
          &quot;*CAST&lt;uintptr_t*&gt;(#{pointerExpr})&quot;
      end
      def nativeFuncMemRef
          &quot;*CAST&lt;NativeFunction*&gt;(#{pointerExpr})&quot;
      end
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -248,23 +248,23 @@</span>
  
  class BaseIndex
      def clDump
          &quot;[#{base.clDump}, #{offset.clDump}, #{index.clDump} &lt;&lt; #{scaleShift}]&quot;
      end
<span class="udiff-line-modified-removed">-     def clLValue(type=:int)</span>
<span class="udiff-line-modified-added">+     def clLValue(type=:intptr)</span>
          clValue(type)
      end
<span class="udiff-line-modified-removed">-     def clValue(type=:int)</span>
<span class="udiff-line-modified-added">+     def clValue(type=:intptr)</span>
          case type
          when :int8;       int8MemRef
          when :int32;      int32MemRef
          when :int64;      int64MemRef
<span class="udiff-line-modified-removed">-         when :int;        intMemRef</span>
<span class="udiff-line-modified-added">+         when :intptr;     intptrMemRef</span>
          when :uint8;      uint8MemRef
          when :uint32;     uint32MemRef
          when :uint64;     uint64MemRef
<span class="udiff-line-modified-removed">-         when :uint;       uintMemRef</span>
<span class="udiff-line-modified-added">+         when :uintptr;    uintptrMemRef</span>
          when :opcode;     opcodeMemRef
          else
              raise &quot;Unexpected BaseIndex type: #{type}&quot;
          end
      end
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -285,11 +285,11 @@</span>
          &quot;*CAST&lt;int32_t*&gt;(#{pointerExpr})&quot;
      end
      def int64MemRef
          &quot;*CAST&lt;int64_t*&gt;(#{pointerExpr})&quot;
      end
<span class="udiff-line-modified-removed">-     def intMemRef</span>
<span class="udiff-line-modified-added">+     def intptrMemRef</span>
          &quot;*CAST&lt;intptr_t*&gt;(#{pointerExpr})&quot;
      end
      def uint8MemRef
          &quot;*CAST&lt;uint8_t*&gt;(#{pointerExpr})&quot;
      end
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -300,11 +300,11 @@</span>
          &quot;*CAST&lt;uint32_t*&gt;(#{pointerExpr})&quot;
      end
      def uint64MemRef
          &quot;*CAST&lt;uint64_t*&gt;(#{pointerExpr})&quot;
      end
<span class="udiff-line-modified-removed">-     def uintMemRef</span>
<span class="udiff-line-modified-added">+     def uintptrMemRef</span>
          &quot;*CAST&lt;uintptr_t*&gt;(#{pointerExpr})&quot;
      end
      def opcodeMemRef
          &quot;*CAST&lt;Opcode*&gt;(#{pointerExpr})&quot;
      end
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -315,20 +315,20 @@</span>
  
  class AbsoluteAddress
      def clDump
          &quot;#{codeOriginString}&quot;
      end
<span class="udiff-line-modified-removed">-     def clLValue(type=:int)</span>
<span class="udiff-line-modified-added">+     def clLValue(type=:intptr)</span>
          clValue(type)
      end
      def clValue
          clDump
      end
  end
  
  class LabelReference
<span class="udiff-line-modified-removed">-     def intMemRef</span>
<span class="udiff-line-modified-added">+     def intptrMemRef</span>
          &quot;*CAST&lt;intptr_t*&gt;(&amp;#{cLabel})&quot;
      end
      def cloopEmitLea(destination, type)
          $asm.putc &quot;#{destination.clLValue(:voidPtr)} = CAST&lt;void*&gt;(&amp;#{cLabel});&quot;
      end
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -383,11 +383,11 @@</span>
      operands.map{|v| v.clDump}.join(&quot;, &quot;)
  end
  
  
  def cloopEmitOperation(operands, type, operator)
<span class="udiff-line-modified-removed">-     raise unless type == :int || type == :uint || type == :int32 || type == :uint32 || \</span>
<span class="udiff-line-modified-added">+     raise unless type == :intptr || type == :uintptr || type == :int32 || type == :uint32 || \</span>
          type == :int64 || type == :uint64 || type == :double
      if operands.size == 3
          op1 = operands[0]
          op2 = operands[1]
          dst = operands[2]
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -407,11 +407,11 @@</span>
      end
      $asm.putc &quot;#{dst.clLValue(type)} = #{truncationHeader}#{op1.clValue(type)} #{operator} #{op2.clValue(type)}#{truncationFooter};&quot;
  end
  
  def cloopEmitShiftOperation(operands, type, operator)
<span class="udiff-line-modified-removed">-     raise unless type == :int || type == :uint || type == :int32 || type == :uint32 || type == :int64 || type == :uint64</span>
<span class="udiff-line-modified-added">+     raise unless type == :intptr || type == :uintptr || type == :int32 || type == :uint32 || type == :int64 || type == :uint64</span>
      if operands.size == 3
          op1 = operands[0]
          op2 = operands[1]
          dst = operands[2]
      else
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -424,15 +424,18 @@</span>
          truncationFooter = &quot;)&quot;
      else
          truncationHeader = &quot;&quot;
          truncationFooter = &quot;&quot;
      end
<span class="udiff-line-modified-removed">-     $asm.putc &quot;#{dst.clLValue(type)} = #{truncationHeader}#{operands[1].clValue(type)} #{operator} (#{operands[0].clValue(:int)} &amp; 0x1f)#{truncationFooter};&quot;</span>
<span class="udiff-line-modified-added">+     shiftMask = &quot;((sizeof(uintptr_t) == 8) ? 0x3f : 0x1f)&quot; if type == :intptr || type == :uintptr</span>
<span class="udiff-line-added">+     shiftMask = &quot;0x3f&quot; if type == :int64 || type == :uint64</span>
<span class="udiff-line-added">+     shiftMask = &quot;0x1f&quot; if type == :int32 || type == :uint32</span>
<span class="udiff-line-added">+     $asm.putc &quot;#{dst.clLValue(type)} = #{truncationHeader}#{operands[1].clValue(type)} #{operator} (#{operands[0].clValue(:intptr)} &amp; #{shiftMask})#{truncationFooter};&quot;</span>
  end
  
  def cloopEmitUnaryOperation(operands, type, operator)
<span class="udiff-line-modified-removed">-     raise unless type == :int || type == :uint || type == :int32 || type == :uint32 || type == :int64 || type == :uint64</span>
<span class="udiff-line-modified-added">+     raise unless type == :intptr || type == :uintptr || type == :int32 || type == :uint32 || type == :int64 || type == :uint64</span>
      raise unless operands.size == 1
      raise unless not operands[0].is_a? Immediate
      op = operands[0]
      dst = operands[0]
      if dst.is_a? RegisterID and (type == :int32 or type == :uint32)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -499,11 +502,11 @@</span>
      $asm.putc &quot;#{operands[-1].clLValue} = (#{conditionExpr});&quot;
  end
  
  def cloopEmitOpAndBranch(operands, operator, type, conditionTest)
      case type
<span class="udiff-line-modified-removed">-     when :int;   tempType = &quot;intptr_t&quot;</span>
<span class="udiff-line-modified-added">+     when :intptr; tempType = &quot;intptr_t&quot;</span>
      when :int32; tempType = &quot;int32_t&quot;
      when :int64; tempType = &quot;int64_t&quot;
      else
          raise &quot;Unimplemented type&quot;
      end
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -565,74 +568,74 @@</span>
          when &quot;addi&quot;
              cloopEmitOperation(operands, :int32, &quot;+&quot;)
          when &quot;addq&quot;
              cloopEmitOperation(operands, :int64, &quot;+&quot;)
          when &quot;addp&quot;
<span class="udiff-line-modified-removed">-             cloopEmitOperation(operands, :int, &quot;+&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitOperation(operands, :intptr, &quot;+&quot;)</span>
  
          when &quot;andi&quot;
              cloopEmitOperation(operands, :int32, &quot;&amp;&quot;)
          when &quot;andq&quot;
              cloopEmitOperation(operands, :int64, &quot;&amp;&quot;)
          when &quot;andp&quot;
<span class="udiff-line-modified-removed">-             cloopEmitOperation(operands, :int, &quot;&amp;&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitOperation(operands, :intptr, &quot;&amp;&quot;)</span>
  
          when &quot;ori&quot;
              cloopEmitOperation(operands, :int32, &quot;|&quot;)
          when &quot;orq&quot;
              cloopEmitOperation(operands, :int64, &quot;|&quot;)
          when &quot;orp&quot;
<span class="udiff-line-modified-removed">-             cloopEmitOperation(operands, :int, &quot;|&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitOperation(operands, :intptr, &quot;|&quot;)</span>
  
          when &quot;xori&quot;
              cloopEmitOperation(operands, :int32, &quot;^&quot;)
          when &quot;xorq&quot;
              cloopEmitOperation(operands, :int64, &quot;^&quot;)
          when &quot;xorp&quot;
<span class="udiff-line-modified-removed">-             cloopEmitOperation(operands, :int, &quot;^&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitOperation(operands, :intptr, &quot;^&quot;)</span>
  
          when &quot;lshifti&quot;
              cloopEmitShiftOperation(operands, :int32, &quot;&lt;&lt;&quot;)
          when &quot;lshiftq&quot;
              cloopEmitShiftOperation(operands, :int64, &quot;&lt;&lt;&quot;)
          when &quot;lshiftp&quot;
<span class="udiff-line-modified-removed">-             cloopEmitShiftOperation(operands, :int, &quot;&lt;&lt;&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitShiftOperation(operands, :intptr, &quot;&lt;&lt;&quot;)</span>
  
          when &quot;rshifti&quot;
              cloopEmitShiftOperation(operands, :int32, &quot;&gt;&gt;&quot;)
          when &quot;rshiftq&quot;
              cloopEmitShiftOperation(operands, :int64, &quot;&gt;&gt;&quot;)
          when &quot;rshiftp&quot;
<span class="udiff-line-modified-removed">-             cloopEmitShiftOperation(operands, :int, &quot;&gt;&gt;&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitShiftOperation(operands, :intptr, &quot;&gt;&gt;&quot;)</span>
  
          when &quot;urshifti&quot;
              cloopEmitShiftOperation(operands, :uint32, &quot;&gt;&gt;&quot;)
          when &quot;urshiftq&quot;
              cloopEmitShiftOperation(operands, :uint64, &quot;&gt;&gt;&quot;)
          when &quot;urshiftp&quot;
<span class="udiff-line-modified-removed">-             cloopEmitShiftOperation(operands, :uint, &quot;&gt;&gt;&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitShiftOperation(operands, :uintptr, &quot;&gt;&gt;&quot;)</span>
  
          when &quot;muli&quot;
              cloopEmitOperation(operands, :int32, &quot;*&quot;)
          when &quot;mulq&quot;
              cloopEmitOperation(operands, :int64, &quot;*&quot;)
          when &quot;mulp&quot;
<span class="udiff-line-modified-removed">-             cloopEmitOperation(operands, :int, &quot;*&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitOperation(operands, :intptr, &quot;*&quot;)</span>
  
          when &quot;subi&quot;
              cloopEmitOperation(operands, :int32, &quot;-&quot;)
          when &quot;subq&quot;
              cloopEmitOperation(operands, :int64, &quot;-&quot;)
          when &quot;subp&quot;
<span class="udiff-line-modified-removed">-             cloopEmitOperation(operands, :int, &quot;-&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitOperation(operands, :intptr, &quot;-&quot;)</span>
  
          when &quot;negi&quot;
              cloopEmitUnaryOperation(operands, :int32, &quot;-&quot;)
          when &quot;negq&quot;
              cloopEmitUnaryOperation(operands, :int64, &quot;-&quot;)
          when &quot;negp&quot;
<span class="udiff-line-modified-removed">-             cloopEmitUnaryOperation(operands, :int, &quot;-&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitUnaryOperation(operands, :intptr, &quot;-&quot;)</span>
  
          when &quot;noti&quot;
              cloopEmitUnaryOperation(operands, :int32, &quot;~&quot;)
  
          when &quot;loadi&quot;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -642,29 +645,31 @@</span>
          when &quot;loadis&quot;
              $asm.putc &quot;#{operands[1].clLValue(:int32)} = #{operands[0].int32MemRef};&quot;
          when &quot;loadq&quot;
              $asm.putc &quot;#{operands[1].clLValue(:int64)} = #{operands[0].int64MemRef};&quot;
          when &quot;loadp&quot;
<span class="udiff-line-modified-removed">-             $asm.putc &quot;#{operands[1].clLValue} = #{operands[0].intMemRef};&quot;</span>
<span class="udiff-line-modified-added">+             $asm.putc &quot;#{operands[1].clLValue} = #{operands[0].intptrMemRef};&quot;</span>
          when &quot;storei&quot;
              $asm.putc &quot;#{operands[1].int32MemRef} = #{operands[0].clValue(:int32)};&quot;
          when &quot;storeq&quot;
              $asm.putc &quot;#{operands[1].int64MemRef} = #{operands[0].clValue(:int64)};&quot;
          when &quot;storep&quot;
<span class="udiff-line-modified-removed">-             $asm.putc &quot;#{operands[1].intMemRef} = #{operands[0].clValue(:int)};&quot;</span>
<span class="udiff-line-modified-added">+             $asm.putc &quot;#{operands[1].intptrMemRef} = #{operands[0].clValue(:intptr)};&quot;</span>
          when &quot;loadb&quot;
<span class="udiff-line-modified-removed">-             $asm.putc &quot;#{operands[1].clLValue(:int)} = #{operands[0].uint8MemRef};&quot;</span>
<span class="udiff-line-modified-removed">-         when &quot;loadbs&quot;</span>
<span class="udiff-line-modified-removed">-             $asm.putc &quot;#{operands[1].clLValue(:int)} = (uint32_t)(#{operands[0].int8MemRef});&quot;</span>
<span class="udiff-line-modified-removed">-         when &quot;loadbsp&quot;</span>
<span class="udiff-line-modified-removed">-             $asm.putc &quot;#{operands[1].clLValue(:int)} = #{operands[0].int8MemRef};&quot;</span>
<span class="udiff-line-modified-added">+             $asm.putc &quot;#{operands[1].clLValue(:intptr)} = #{operands[0].uint8MemRef};&quot;</span>
<span class="udiff-line-modified-added">+         when &quot;loadbsi&quot;</span>
<span class="udiff-line-modified-added">+             $asm.putc &quot;#{operands[1].clLValue(:uint32)} = (uint32_t)((int32_t)#{operands[0].int8MemRef});&quot;</span>
<span class="udiff-line-modified-added">+         when &quot;loadbsq&quot;</span>
<span class="udiff-line-modified-added">+             $asm.putc &quot;#{operands[1].clLValue(:uint64)} = (int64_t)#{operands[0].int8MemRef};&quot;</span>
          when &quot;storeb&quot;
              $asm.putc &quot;#{operands[1].uint8MemRef} = #{operands[0].clValue(:int8)};&quot;
          when &quot;loadh&quot;
<span class="udiff-line-modified-removed">-             $asm.putc &quot;#{operands[1].clLValue(:int)} = #{operands[0].uint16MemRef};&quot;</span>
<span class="udiff-line-modified-removed">-         when &quot;loadhs&quot;</span>
<span class="udiff-line-modified-removed">-             $asm.putc &quot;#{operands[1].clLValue(:int)} = (uint32_t)(#{operands[0].int16MemRef});&quot;</span>
<span class="udiff-line-modified-added">+             $asm.putc &quot;#{operands[1].clLValue(:intptr)} = #{operands[0].uint16MemRef};&quot;</span>
<span class="udiff-line-modified-added">+         when &quot;loadhsi&quot;</span>
<span class="udiff-line-modified-added">+             $asm.putc &quot;#{operands[1].clLValue(:uint32)} = (uint32_t)((int32_t)#{operands[0].int16MemRef});&quot;</span>
<span class="udiff-line-added">+         when &quot;loadhsq&quot;</span>
<span class="udiff-line-added">+             $asm.putc &quot;#{operands[1].clLValue(:uint64)} = (int64_t)#{operands[0].int16MemRef};&quot;</span>
          when &quot;storeh&quot;
              $asm.putc &quot;*#{operands[1].uint16MemRef} = #{operands[0].clValue(:int16)};&quot;
          when &quot;loadd&quot;
              $asm.putc &quot;#{operands[1].clLValue(:double)} = #{operands[0].dblMemRef};&quot;
          when &quot;stored&quot;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -708,11 +713,11 @@</span>
              cloopEmitCompareDoubleWithNaNCheckAndBranch(operands, &quot;&lt;&quot;)
          when &quot;bdltequn&quot;
              cloopEmitCompareDoubleWithNaNCheckAndBranch(operands, &quot;&lt;=&quot;)
  
          when &quot;td2i&quot;
<span class="udiff-line-modified-removed">-             $asm.putc &quot;#{operands[1].clLValue(:int)} = (uint32_t)(intptr_t)#{operands[0].clValue(:double)}; // td2i&quot;</span>
<span class="udiff-line-modified-added">+             $asm.putc &quot;#{operands[1].clLValue(:intptr)} = (uint32_t)(intptr_t)#{operands[0].clValue(:double)}; // td2i&quot;</span>
  
          when &quot;bcd2i&quot;  # operands: srcDbl dstInt slowPath
              $asm.putc &quot;{ // bcd2i&quot;
              $asm.putc &quot;    double d = #{operands[0].clValue(:double)};&quot;
              $asm.putc &quot;    const int32_t asInt32 = int32_t(d);&quot;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -720,11 +725,11 @@</span>
              $asm.putc &quot;        goto  #{operands[2].cLabel};&quot;
              $asm.putc &quot;    #{operands[1].clLValue} = (uint32_t)asInt32;&quot;
              $asm.putc &quot;}&quot;
  
          when &quot;move&quot;
<span class="udiff-line-modified-removed">-             $asm.putc &quot;#{operands[1].clLValue(:int)} = #{operands[0].clValue(:int)};&quot;</span>
<span class="udiff-line-modified-added">+             $asm.putc &quot;#{operands[1].clLValue(:intptr)} = #{operands[0].clValue(:intptr)};&quot;</span>
          when &quot;sxi2q&quot;
              $asm.putc &quot;#{operands[1].clLValue(:int64)} = #{operands[0].clValue(:int32)};&quot;
          when &quot;zxi2q&quot;
              $asm.putc &quot;#{operands[1].clLValue(:uint64)} = #{operands[0].clValue(:uint32)};&quot;
          when &quot;nop&quot;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -734,119 +739,119 @@</span>
          when &quot;bieq&quot;
              cloopEmitCompareAndBranch(operands, :int32, &quot;==&quot;)
          when &quot;bqeq&quot;
              cloopEmitCompareAndBranch(operands, :int64, &quot;==&quot;)
          when &quot;bpeq&quot;
<span class="udiff-line-modified-removed">-             cloopEmitCompareAndBranch(operands, :int, &quot;==&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitCompareAndBranch(operands, :intptr, &quot;==&quot;)</span>
  
          when &quot;bbneq&quot;
              cloopEmitCompareAndBranch(operands, :int8, &quot;!=&quot;)
          when &quot;bineq&quot;
              cloopEmitCompareAndBranch(operands, :int32, &quot;!=&quot;)
          when &quot;bqneq&quot;
              cloopEmitCompareAndBranch(operands, :int64, &quot;!=&quot;)
          when &quot;bpneq&quot;
<span class="udiff-line-modified-removed">-             cloopEmitCompareAndBranch(operands, :int, &quot;!=&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitCompareAndBranch(operands, :intptr, &quot;!=&quot;)</span>
  
          when &quot;bba&quot;
              cloopEmitCompareAndBranch(operands, :uint8, &quot;&gt;&quot;)
          when &quot;bia&quot;
              cloopEmitCompareAndBranch(operands, :uint32, &quot;&gt;&quot;)
          when &quot;bqa&quot;
              cloopEmitCompareAndBranch(operands, :uint64, &quot;&gt;&quot;)
          when &quot;bpa&quot;
<span class="udiff-line-modified-removed">-             cloopEmitCompareAndBranch(operands, :uint, &quot;&gt;&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitCompareAndBranch(operands, :uintptr, &quot;&gt;&quot;)</span>
  
          when &quot;bbaeq&quot;
              cloopEmitCompareAndBranch(operands, :uint8, &quot;&gt;=&quot;)
          when &quot;biaeq&quot;
              cloopEmitCompareAndBranch(operands, :uint32, &quot;&gt;=&quot;)
          when &quot;bqaeq&quot;
              cloopEmitCompareAndBranch(operands, :uint64, &quot;&gt;=&quot;)
          when &quot;bpaeq&quot;
<span class="udiff-line-modified-removed">-             cloopEmitCompareAndBranch(operands, :uint, &quot;&gt;=&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitCompareAndBranch(operands, :uintptr, &quot;&gt;=&quot;)</span>
  
          when &quot;bbb&quot;
              cloopEmitCompareAndBranch(operands, :uint8, &quot;&lt;&quot;)
          when &quot;bib&quot;
              cloopEmitCompareAndBranch(operands, :uint32, &quot;&lt;&quot;)
          when &quot;bqb&quot;
              cloopEmitCompareAndBranch(operands, :uint64, &quot;&lt;&quot;)
          when &quot;bpb&quot;
<span class="udiff-line-modified-removed">-             cloopEmitCompareAndBranch(operands, :uint, &quot;&lt;&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitCompareAndBranch(operands, :uintptr, &quot;&lt;&quot;)</span>
  
          when &quot;bbbeq&quot;
              cloopEmitCompareAndBranch(operands, :uint8, &quot;&lt;=&quot;)
          when &quot;bibeq&quot;
              cloopEmitCompareAndBranch(operands, :uint32, &quot;&lt;=&quot;)
          when &quot;bqbeq&quot;
              cloopEmitCompareAndBranch(operands, :uint64, &quot;&lt;=&quot;)
          when &quot;bpbeq&quot;
<span class="udiff-line-modified-removed">-             cloopEmitCompareAndBranch(operands, :uint, &quot;&lt;=&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitCompareAndBranch(operands, :uintptr, &quot;&lt;=&quot;)</span>
  
          when &quot;bbgt&quot;
              cloopEmitCompareAndBranch(operands, :int8, &quot;&gt;&quot;)
          when &quot;bigt&quot;
              cloopEmitCompareAndBranch(operands, :int32, &quot;&gt;&quot;)
          when &quot;bqgt&quot;
              cloopEmitCompareAndBranch(operands, :int64, &quot;&gt;&quot;)
          when &quot;bpgt&quot;
<span class="udiff-line-modified-removed">-             cloopEmitCompareAndBranch(operands, :int, &quot;&gt;&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitCompareAndBranch(operands, :intptr, &quot;&gt;&quot;)</span>
  
          when &quot;bbgteq&quot;
              cloopEmitCompareAndBranch(operands, :int8, &quot;&gt;=&quot;)
          when &quot;bigteq&quot;
              cloopEmitCompareAndBranch(operands, :int32, &quot;&gt;=&quot;)
          when &quot;bqgteq&quot;
              cloopEmitCompareAndBranch(operands, :int64, &quot;&gt;=&quot;)
          when &quot;bpgteq&quot;
<span class="udiff-line-modified-removed">-             cloopEmitCompareAndBranch(operands, :int, &quot;&gt;=&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitCompareAndBranch(operands, :intptr, &quot;&gt;=&quot;)</span>
  
          when &quot;bblt&quot;
              cloopEmitCompareAndBranch(operands, :int8, &quot;&lt;&quot;)
          when &quot;bilt&quot;
              cloopEmitCompareAndBranch(operands, :int32, &quot;&lt;&quot;)
          when &quot;bqlt&quot;
              cloopEmitCompareAndBranch(operands, :int64, &quot;&lt;&quot;)
          when &quot;bplt&quot;
<span class="udiff-line-modified-removed">-             cloopEmitCompareAndBranch(operands, :int, &quot;&lt;&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitCompareAndBranch(operands, :intptr, &quot;&lt;&quot;)</span>
  
          when &quot;bblteq&quot;
              cloopEmitCompareAndBranch(operands, :int8, &quot;&lt;=&quot;)
          when &quot;bilteq&quot;
              cloopEmitCompareAndBranch(operands, :int32, &quot;&lt;=&quot;)
          when &quot;bqlteq&quot;
              cloopEmitCompareAndBranch(operands, :int64, &quot;&lt;=&quot;)
          when &quot;bplteq&quot;
<span class="udiff-line-modified-removed">-             cloopEmitCompareAndBranch(operands, :int, &quot;&lt;=&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitCompareAndBranch(operands, :intptr, &quot;&lt;=&quot;)</span>
  
          when &quot;btbz&quot;
              cloopEmitTestAndBranchIf(operands, :int8, &quot;== 0&quot;, operands[-1].cLabel)
          when &quot;btiz&quot;
              cloopEmitTestAndBranchIf(operands, :int32, &quot;== 0&quot;, operands[-1].cLabel)
          when &quot;btqz&quot;
              cloopEmitTestAndBranchIf(operands, :int64, &quot;== 0&quot;, operands[-1].cLabel)
          when &quot;btpz&quot;
<span class="udiff-line-modified-removed">-             cloopEmitTestAndBranchIf(operands, :int, &quot;== 0&quot;, operands[-1].cLabel)</span>
<span class="udiff-line-modified-added">+             cloopEmitTestAndBranchIf(operands, :intptr, &quot;== 0&quot;, operands[-1].cLabel)</span>
  
          when &quot;btbnz&quot;
              cloopEmitTestAndBranchIf(operands, :int8, &quot;!= 0&quot;, operands[-1].cLabel)
          when &quot;btinz&quot;
              cloopEmitTestAndBranchIf(operands, :int32, &quot;!= 0&quot;, operands[-1].cLabel)
          when &quot;btqnz&quot;
              cloopEmitTestAndBranchIf(operands, :int64, &quot;!= 0&quot;, operands[-1].cLabel)
          when &quot;btpnz&quot;
<span class="udiff-line-modified-removed">-             cloopEmitTestAndBranchIf(operands, :int, &quot;!= 0&quot;, operands[-1].cLabel)</span>
<span class="udiff-line-modified-added">+             cloopEmitTestAndBranchIf(operands, :intptr, &quot;!= 0&quot;, operands[-1].cLabel)</span>
  
          when &quot;btbs&quot;
              cloopEmitTestAndBranchIf(operands, :int8, &quot;&lt; 0&quot;, operands[-1].cLabel)
          when &quot;btis&quot;
              cloopEmitTestAndBranchIf(operands, :int32, &quot;&lt; 0&quot;, operands[-1].cLabel)
          when &quot;btqs&quot;
              cloopEmitTestAndBranchIf(operands, :int64, &quot;&lt; 0&quot;, operands[-1].cLabel)
          when &quot;btps&quot;
<span class="udiff-line-modified-removed">-             cloopEmitTestAndBranchIf(operands, :int, &quot;&lt; 0&quot;, operands[-1].cLabel)</span>
<span class="udiff-line-modified-added">+             cloopEmitTestAndBranchIf(operands, :intptr, &quot;&lt; 0&quot;, operands[-1].cLabel)</span>
  
          # For jmp, we do not want to assume that we have COMPUTED_GOTO support.
          # Fortunately, the only times we should ever encounter indirect jmps is
          # when the jmp target is a CLoop opcode (by design).
          #
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -878,119 +883,119 @@</span>
          when &quot;cieq&quot;
              cloopEmitCompareAndSet(operands, :uint32, &quot;==&quot;)
          when &quot;cqeq&quot;
              cloopEmitCompareAndSet(operands, :uint64, &quot;==&quot;)
          when &quot;cpeq&quot;
<span class="udiff-line-modified-removed">-             cloopEmitCompareAndSet(operands, :uint, &quot;==&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitCompareAndSet(operands, :uintptr, &quot;==&quot;)</span>
  
          when &quot;cbneq&quot;
              cloopEmitCompareAndSet(operands, :uint8, &quot;!=&quot;)
          when &quot;cineq&quot;
              cloopEmitCompareAndSet(operands, :uint32, &quot;!=&quot;)
          when &quot;cqneq&quot;
              cloopEmitCompareAndSet(operands, :uint64, &quot;!=&quot;)
          when &quot;cpneq&quot;
<span class="udiff-line-modified-removed">-             cloopEmitCompareAndSet(operands, :uint, &quot;!=&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitCompareAndSet(operands, :uintptr, &quot;!=&quot;)</span>
  
          when &quot;cba&quot;
              cloopEmitCompareAndSet(operands, :uint8, &quot;&gt;&quot;)
          when &quot;cia&quot;
              cloopEmitCompareAndSet(operands, :uint32, &quot;&gt;&quot;)
          when &quot;cqa&quot;
              cloopEmitCompareAndSet(operands, :uint64, &quot;&gt;&quot;)
          when &quot;cpa&quot;
<span class="udiff-line-modified-removed">-             cloopEmitCompareAndSet(operands, :uint, &quot;&gt;&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitCompareAndSet(operands, :uintptr, &quot;&gt;&quot;)</span>
  
          when &quot;cbaeq&quot;
              cloopEmitCompareAndSet(operands, :uint8, &quot;&gt;=&quot;)
          when &quot;ciaeq&quot;
              cloopEmitCompareAndSet(operands, :uint32, &quot;&gt;=&quot;)
          when &quot;cqaeq&quot;
              cloopEmitCompareAndSet(operands, :uint64, &quot;&gt;=&quot;)
          when &quot;cpaeq&quot;
<span class="udiff-line-modified-removed">-             cloopEmitCompareAndSet(operands, :uint, &quot;&gt;=&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitCompareAndSet(operands, :uintptr, &quot;&gt;=&quot;)</span>
  
          when &quot;cbb&quot;
              cloopEmitCompareAndSet(operands, :uint8, &quot;&lt;&quot;)
          when &quot;cib&quot;
              cloopEmitCompareAndSet(operands, :uint32, &quot;&lt;&quot;)
          when &quot;cqb&quot;
              cloopEmitCompareAndSet(operands, :uint64, &quot;&lt;&quot;)
          when &quot;cpb&quot;
<span class="udiff-line-modified-removed">-             cloopEmitCompareAndSet(operands, :uint, &quot;&lt;&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitCompareAndSet(operands, :uintptr, &quot;&lt;&quot;)</span>
  
          when &quot;cbbeq&quot;
              cloopEmitCompareAndSet(operands, :uint8, &quot;&lt;=&quot;)
          when &quot;cibeq&quot;
              cloopEmitCompareAndSet(operands, :uint32, &quot;&lt;=&quot;)
          when &quot;cqbeq&quot;
              cloopEmitCompareAndSet(operands, :uint64, &quot;&lt;=&quot;)
          when &quot;cpbeq&quot;
<span class="udiff-line-modified-removed">-             cloopEmitCompareAndSet(operands, :uint, &quot;&lt;=&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitCompareAndSet(operands, :uintptr, &quot;&lt;=&quot;)</span>
  
          when &quot;cbgt&quot;
              cloopEmitCompareAndSet(operands, :int8, &quot;&gt;&quot;)
          when &quot;cigt&quot;
              cloopEmitCompareAndSet(operands, :int32, &quot;&gt;&quot;)
          when &quot;cqgt&quot;
              cloopEmitCompareAndSet(operands, :int64, &quot;&gt;&quot;)
          when &quot;cpgt&quot;
<span class="udiff-line-modified-removed">-             cloopEmitCompareAndSet(operands, :int, &quot;&gt;&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitCompareAndSet(operands, :intptr, &quot;&gt;&quot;)</span>
  
          when &quot;cbgteq&quot;
              cloopEmitCompareAndSet(operands, :int8, &quot;&gt;=&quot;)
          when &quot;cigteq&quot;
              cloopEmitCompareAndSet(operands, :int32, &quot;&gt;=&quot;)
          when &quot;cqgteq&quot;
              cloopEmitCompareAndSet(operands, :int64, &quot;&gt;=&quot;)
          when &quot;cpgteq&quot;
<span class="udiff-line-modified-removed">-             cloopEmitCompareAndSet(operands, :int, &quot;&gt;=&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitCompareAndSet(operands, :intptr, &quot;&gt;=&quot;)</span>
  
          when &quot;cblt&quot;
              cloopEmitCompareAndSet(operands, :int8, &quot;&lt;&quot;)
          when &quot;cilt&quot;
              cloopEmitCompareAndSet(operands, :int32, &quot;&lt;&quot;)
          when &quot;cqlt&quot;
              cloopEmitCompareAndSet(operands, :int64, &quot;&lt;&quot;)
          when &quot;cplt&quot;
<span class="udiff-line-modified-removed">-             cloopEmitCompareAndSet(operands, :int, &quot;&lt;&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitCompareAndSet(operands, :intptr, &quot;&lt;&quot;)</span>
  
          when &quot;cblteq&quot;
              cloopEmitCompareAndSet(operands, :int8, &quot;&lt;=&quot;)
          when &quot;cilteq&quot;
              cloopEmitCompareAndSet(operands, :int32, &quot;&lt;=&quot;)
          when &quot;cqlteq&quot;
              cloopEmitCompareAndSet(operands, :int64, &quot;&lt;=&quot;)
          when &quot;cplteq&quot;
<span class="udiff-line-modified-removed">-             cloopEmitCompareAndSet(operands, :int, &quot;&lt;=&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitCompareAndSet(operands, :intptr, &quot;&lt;=&quot;)</span>
  
          when &quot;tbs&quot;
              cloopEmitTestSet(operands, :int8, &quot;&lt; 0&quot;)
          when &quot;tis&quot;
              cloopEmitTestSet(operands, :int32, &quot;&lt; 0&quot;)
          when &quot;tqs&quot;
              cloopEmitTestSet(operands, :int64, &quot;&lt; 0&quot;)
          when &quot;tps&quot;
<span class="udiff-line-modified-removed">-             cloopEmitTestSet(operands, :int, &quot;&lt; 0&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitTestSet(operands, :intptr, &quot;&lt; 0&quot;)</span>
  
          when &quot;tbz&quot;
              cloopEmitTestSet(operands, :int8, &quot;== 0&quot;)
          when &quot;tiz&quot;
              cloopEmitTestSet(operands, :int32, &quot;== 0&quot;)
          when &quot;tqz&quot;
              cloopEmitTestSet(operands, :int64, &quot;== 0&quot;)
          when &quot;tpz&quot;
<span class="udiff-line-modified-removed">-             cloopEmitTestSet(operands, :int, &quot;== 0&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitTestSet(operands, :intptr, &quot;== 0&quot;)</span>
  
          when &quot;tbnz&quot;
              cloopEmitTestSet(operands, :int8, &quot;!= 0&quot;)
          when &quot;tinz&quot;
              cloopEmitTestSet(operands, :int32, &quot;!= 0&quot;)
          when &quot;tqnz&quot;
              cloopEmitTestSet(operands, :int64, &quot;!= 0&quot;)
          when &quot;tpnz&quot;
<span class="udiff-line-modified-removed">-             cloopEmitTestSet(operands, :int, &quot;!= 0&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitTestSet(operands, :intptr, &quot;!= 0&quot;)</span>
  
          # 64-bit instruction: cdqi (based on X64)
          # Sign extends the lower 32 bits of t0, but put the sign extension into
          # the lower 32 bits of t1. Leave the upper 32 bits of t0 and t1 unchanged.
          when &quot;cdqi&quot;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1013,11 +1018,11 @@</span>
          when &quot;idivi&quot;
              # Divide t1,t0 (EDX,EAX) by the specified arg, and store the remainder in t1,
              # and quotient in t0:
              $asm.putc &quot;{ // idivi&quot;
              $asm.putc &quot;    int64_t dividend = (int64_t(t1.u32()) &lt;&lt; 32) | t0.u32();&quot;
<span class="udiff-line-modified-removed">-             $asm.putc &quot;    int64_t divisor = #{operands[0].clValue(:int)};&quot;</span>
<span class="udiff-line-modified-added">+             $asm.putc &quot;    int64_t divisor = #{operands[0].clValue(:intptr)};&quot;</span>
              $asm.putc &quot;    t1 = (uint32_t)(dividend % divisor); // remainder&quot;
              $asm.putc &quot;    t0 = (uint32_t)(dividend / divisor); // quotient&quot;
              $asm.putc &quot;}&quot;
  
          # 32-bit instruction: fii2d int32LoOp int32HiOp dblOp (based on ARMv7)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1041,11 +1046,11 @@</span>
              $asm.putc &quot;#{operands[1].clLValue(:int64)} = #{operands[0].clValue(:bitsAsInt64)}; // fd2q&quot;
  
          when &quot;leai&quot;
              operands[0].cloopEmitLea(operands[1], :int32)
          when &quot;leap&quot;
<span class="udiff-line-modified-removed">-             operands[0].cloopEmitLea(operands[1], :int)</span>
<span class="udiff-line-modified-added">+             operands[0].cloopEmitLea(operands[1], :intptr)</span>
  
          when &quot;baddio&quot;
              cloopEmitOpAndBranchIfOverflow(operands, &quot;+&quot;, :int32)
          when &quot;bsubio&quot;
              cloopEmitOpAndBranchIfOverflow(operands, &quot;-&quot;, :int32)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1065,15 +1070,15 @@</span>
              cloopEmitOpAndBranch(operands, &quot;+&quot;, :int64, &quot;== 0&quot;)
          when &quot;baddqnz&quot;
              cloopEmitOpAndBranch(operands, &quot;+&quot;, :int64, &quot;!= 0&quot;)
  
          when &quot;baddps&quot;
<span class="udiff-line-modified-removed">-             cloopEmitOpAndBranch(operands, &quot;+&quot;, :int, &quot;&lt; 0&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitOpAndBranch(operands, &quot;+&quot;, :intptr, &quot;&lt; 0&quot;)</span>
          when &quot;baddpz&quot;
<span class="udiff-line-modified-removed">-             cloopEmitOpAndBranch(operands, &quot;+&quot;, :int, &quot;== 0&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitOpAndBranch(operands, &quot;+&quot;, :intptr, &quot;== 0&quot;)</span>
          when &quot;baddpnz&quot;
<span class="udiff-line-modified-removed">-             cloopEmitOpAndBranch(operands, &quot;+&quot;, :int, &quot;!= 0&quot;)</span>
<span class="udiff-line-modified-added">+             cloopEmitOpAndBranch(operands, &quot;+&quot;, :intptr, &quot;!= 0&quot;)</span>
  
          when &quot;bsubis&quot;
              cloopEmitOpAndBranch(operands, &quot;-&quot;, :int32, &quot;&lt; 0&quot;)
          when &quot;bsubiz&quot;
              cloopEmitOpAndBranch(operands, &quot;-&quot;, :int32, &quot;== 0&quot;)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1151,10 +1156,14 @@</span>
          else
              lowerDefault
          end
      end
  
<span class="udiff-line-added">+     def lowerC_LOOP_WIN</span>
<span class="udiff-line-added">+         lowerC_LOOP</span>
<span class="udiff-line-added">+     end</span>
<span class="udiff-line-added">+ </span>
      def recordMetaDataC_LOOP
          $asm.codeOrigin codeOriginString if $enableCodeOriginComments
          $asm.annotation annotation if $enableInstrAnnotations &amp;&amp; (opcode != &quot;cloopDo&quot;)
          $asm.debugAnnotation codeOrigin.debugDirective if $enableDebugAnnotations
      end
</pre>
<center><a href="backends.rb.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="instructions.rb.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>
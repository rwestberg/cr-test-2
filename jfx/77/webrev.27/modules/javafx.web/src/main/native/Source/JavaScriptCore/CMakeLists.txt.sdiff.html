<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/CMakeLists.txt</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="API/WebKitAvailability.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="DerivedSources-input.xcfilelist.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/CMakeLists.txt</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
<span class="line-modified">   1 cmake_minimum_required(VERSION 2.8.12)</span>
   2 include(WebKitCommon)
   3 set_property(DIRECTORY . PROPERTY FOLDER &quot;JavaScriptCore&quot;)
   4 
   5 list(APPEND JavaScriptCore_UNIFIED_SOURCE_LIST_FILES
   6     &quot;Sources.txt&quot;
   7 )
   8 
   9 set(JavaScriptCore_INCLUDE_DIRECTORIES
<span class="line-modified">  10     &quot;${FORWARDING_HEADERS_DIR}&quot;</span>
  11 )
  12 
  13 set(JavaScriptCore_PRIVATE_INCLUDE_DIRECTORIES
  14     &quot;${CMAKE_BINARY_DIR}&quot;
  15     &quot;${JAVASCRIPTCORE_DIR}&quot;
  16     &quot;${JAVASCRIPTCORE_DIR}/API&quot;
  17     &quot;${JAVASCRIPTCORE_DIR}/assembler&quot;
  18     &quot;${JAVASCRIPTCORE_DIR}/b3&quot;
  19     &quot;${JAVASCRIPTCORE_DIR}/b3/air&quot;
  20     &quot;${JAVASCRIPTCORE_DIR}/bindings&quot;
  21     &quot;${JAVASCRIPTCORE_DIR}/builtins&quot;
  22     &quot;${JAVASCRIPTCORE_DIR}/bytecode&quot;
  23     &quot;${JAVASCRIPTCORE_DIR}/bytecompiler&quot;
  24     &quot;${JAVASCRIPTCORE_DIR}/dfg&quot;
  25     &quot;${JAVASCRIPTCORE_DIR}/disassembler&quot;
  26     &quot;${JAVASCRIPTCORE_DIR}/disassembler/ARM64&quot;
  27     &quot;${JAVASCRIPTCORE_DIR}/disassembler/udis86&quot;
  28     &quot;${JAVASCRIPTCORE_DIR}/domjit&quot;
  29     &quot;${JAVASCRIPTCORE_DIR}/ftl&quot;
  30     &quot;${JAVASCRIPTCORE_DIR}/heap&quot;
  31     &quot;${JAVASCRIPTCORE_DIR}/debugger&quot;
  32     &quot;${JAVASCRIPTCORE_DIR}/inspector&quot;
  33     &quot;${JAVASCRIPTCORE_DIR}/inspector/agents&quot;
  34     &quot;${JAVASCRIPTCORE_DIR}/inspector/augmentable&quot;
  35     &quot;${JAVASCRIPTCORE_DIR}/inspector/remote&quot;
  36     &quot;${JAVASCRIPTCORE_DIR}/interpreter&quot;
  37     &quot;${JAVASCRIPTCORE_DIR}/jit&quot;
  38     &quot;${JAVASCRIPTCORE_DIR}/llint&quot;
  39     &quot;${JAVASCRIPTCORE_DIR}/parser&quot;
  40     &quot;${JAVASCRIPTCORE_DIR}/profiler&quot;
  41     &quot;${JAVASCRIPTCORE_DIR}/runtime&quot;
  42     &quot;${JAVASCRIPTCORE_DIR}/tools&quot;
  43     &quot;${JAVASCRIPTCORE_DIR}/wasm&quot;
  44     &quot;${JAVASCRIPTCORE_DIR}/wasm/js&quot;
  45     &quot;${JAVASCRIPTCORE_DIR}/yarr&quot;
<span class="line-modified">  46     &quot;${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}&quot;</span>
<span class="line-modified">  47     &quot;${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/inspector&quot;</span>
<span class="line-modified">  48     &quot;${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/runtime&quot;</span>
<span class="line-modified">  49     &quot;${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/yarr&quot;</span>
  50 )
  51 
  52 if (USE_CAPSTONE)
  53     list(APPEND JavaScriptCore_PRIVATE_INCLUDE_DIRECTORIES &quot;${THIRDPARTY_DIR}/capstone/Source/include&quot;)
  54 endif ()
  55 
<span class="line-removed">  56 set(JavaScriptCore_SYSTEM_INCLUDE_DIRECTORIES</span>
<span class="line-removed">  57     &quot;${ICU_INCLUDE_DIRS}&quot;</span>
<span class="line-removed">  58 )</span>
<span class="line-removed">  59 </span>
  60 set(JavaScriptCore_OBJECT_LUT_SOURCES
  61     runtime/ArrayConstructor.cpp
<span class="line-removed">  62     runtime/ArrayIteratorPrototype.cpp</span>
  63     runtime/AsyncFromSyncIteratorPrototype.cpp
  64     runtime/AsyncGeneratorPrototype.cpp
  65     runtime/BigIntConstructor.cpp
  66     runtime/BigIntPrototype.cpp
  67     runtime/BooleanPrototype.cpp
  68     runtime/DateConstructor.cpp
  69     runtime/DatePrototype.cpp
  70     runtime/ErrorPrototype.cpp
  71     runtime/GeneratorPrototype.cpp
  72     runtime/InspectorInstrumentationObject.cpp
  73     runtime/IntlCollatorConstructor.cpp
  74     runtime/IntlCollatorPrototype.cpp
  75     runtime/IntlDateTimeFormatConstructor.cpp
  76     runtime/IntlDateTimeFormatPrototype.cpp
  77     runtime/IntlNumberFormatConstructor.cpp
  78     runtime/IntlNumberFormatPrototype.cpp
  79     runtime/IntlObject.cpp
  80     runtime/IntlPluralRulesConstructor.cpp
  81     runtime/IntlPluralRulesPrototype.cpp
  82     runtime/JSDataViewPrototype.cpp
  83     runtime/JSGlobalObject.cpp
  84     runtime/JSInternalPromiseConstructor.cpp
  85     runtime/JSModuleLoader.cpp
  86     runtime/JSONObject.cpp
  87     runtime/JSPromiseConstructor.cpp
  88     runtime/JSPromisePrototype.cpp
  89     runtime/MapPrototype.cpp
  90     runtime/NumberConstructor.cpp
  91     runtime/NumberPrototype.cpp
  92     runtime/ObjectConstructor.cpp
  93     runtime/ReflectObject.cpp
  94     runtime/RegExpConstructor.cpp
  95     runtime/RegExpPrototype.cpp

  96     runtime/SetPrototype.cpp
  97     runtime/StringConstructor.cpp
<span class="line-removed">  98     runtime/StringIteratorPrototype.cpp</span>
  99     runtime/StringPrototype.cpp
 100     runtime/SymbolConstructor.cpp
 101     runtime/SymbolPrototype.cpp
 102 


 103     wasm/js/WebAssemblyCompileErrorConstructor.cpp
 104     wasm/js/WebAssemblyCompileErrorPrototype.cpp

 105     wasm/js/WebAssemblyInstanceConstructor.cpp
 106     wasm/js/WebAssemblyInstancePrototype.cpp
 107     wasm/js/WebAssemblyLinkErrorConstructor.cpp
 108     wasm/js/WebAssemblyLinkErrorPrototype.cpp
 109     wasm/js/WebAssemblyMemoryConstructor.cpp
 110     wasm/js/WebAssemblyMemoryPrototype.cpp
 111     wasm/js/WebAssemblyModuleConstructor.cpp
 112     wasm/js/WebAssemblyModulePrototype.cpp
<span class="line-removed"> 113     wasm/js/WebAssemblyPrototype.cpp</span>
 114     wasm/js/WebAssemblyRuntimeErrorConstructor.cpp
 115     wasm/js/WebAssemblyRuntimeErrorPrototype.cpp
 116     wasm/js/WebAssemblyTableConstructor.cpp
 117     wasm/js/WebAssemblyTablePrototype.cpp
 118 )
 119 
 120 set(JavaScriptCore_LIBRARIES
<span class="line-modified"> 121     WTF${DEBUG_SUFFIX}</span>
<span class="line-removed"> 122     ${ICU_I18N_LIBRARIES}</span>
 123 )
 124 
 125 if (USE_CAPSTONE)
 126     list(APPEND JavaScriptCore_LIBRARIES capstone)
 127 endif ()
 128 
 129 if (ATOMIC_INT64_REQUIRES_LIBATOMIC)
 130     list(APPEND JavaScriptCore_LIBRARIES atomic)
 131 endif ()
 132 
 133 set(JavaScriptCore_SCRIPTS_SOURCES_DIR &quot;${JAVASCRIPTCORE_DIR}/Scripts&quot;)
 134 
 135 # Globbing relies on the fact that generator-specific file names are prefixed with their directory.
 136 # Top-level scripts should have a file extension, since they are invoked during the build.
 137 
 138 set(JavaScriptCore_SCRIPTS_SOURCES_PATHS
 139     ${JavaScriptCore_SCRIPTS_SOURCES_DIR}/*.pl
 140     ${JavaScriptCore_SCRIPTS_SOURCES_DIR}/*.py
 141     ${JavaScriptCore_SCRIPTS_SOURCES_DIR}/wkbuiltins/builtins*.py
 142     ${JavaScriptCore_SCRIPTS_SOURCES_DIR}/wkbuiltins/wkbuiltins.py
 143 )
 144 
<span class="line-removed"> 145 # Force JavaScriptCore to run scripts from the same staging path as WebCore.</span>
<span class="line-removed"> 146 set(JavaScriptCore_SCRIPTS_DIR &quot;${FORWARDING_HEADERS_DIR}/JavaScriptCore/Scripts&quot;)</span>
<span class="line-removed"> 147 </span>
<span class="line-removed"> 148 file(MAKE_DIRECTORY ${JavaScriptCore_SCRIPTS_DIR})</span>
<span class="line-removed"> 149 </span>
 150 # The directory flattening performed below mirrors what the Mac port does with private headers.
 151 
 152 file(GLOB JavaScriptCore_SCRIPTS_SOURCES ${JavaScriptCore_SCRIPTS_SOURCES_PATHS})
 153 
 154 foreach (_file ${JavaScriptCore_SCRIPTS_SOURCES})
 155     get_filename_component(_script &quot;${_file}&quot; NAME)
 156     add_custom_command(
 157         OUTPUT ${JavaScriptCore_SCRIPTS_DIR}/${_script}
 158         MAIN_DEPENDENCY ${_file}
<span class="line-modified"> 159         WORKING_DIRECTORY ${DERIVED_SOURCES_DIR}</span>
 160         COMMAND ${CMAKE_COMMAND} -E copy_if_different ${_file} ${JavaScriptCore_SCRIPTS_DIR}/${_script}
 161         VERBATIM)
 162     list(APPEND JavaScriptCore_SCRIPTS ${JavaScriptCore_SCRIPTS_DIR}/${_script})
 163 endforeach ()
 164 
 165 set(UDIS_GEN_DEP
 166     disassembler/udis86/optable.xml
 167     disassembler/udis86/ud_itab.py
 168     disassembler/udis86/ud_opcode.py
 169 )
 170 
 171 add_custom_command(
<span class="line-modified"> 172     OUTPUT ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/udis86_itab.c ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/udis86_itab.h</span>
 173     DEPENDS ${UDIS_GEN_DEP}
<span class="line-modified"> 174     WORKING_DIRECTORY ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}</span>
<span class="line-modified"> 175     COMMAND ${PYTHON_EXECUTABLE} ${JAVASCRIPTCORE_DIR}/disassembler/udis86/ud_itab.py ${JAVASCRIPTCORE_DIR}/disassembler/udis86/optable.xml ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}</span>
 176     VERBATIM)
 177 
 178 list(APPEND JavaScriptCore_HEADERS
<span class="line-modified"> 179     ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/udis86_itab.h</span>
 180 )
 181 
 182 set(LLINT_ASM
 183     llint/LowLevelInterpreter.asm
 184     llint/LowLevelInterpreter32_64.asm
 185     llint/LowLevelInterpreter64.asm
 186 )
 187 
 188 set(OFFLINE_ASM
 189     offlineasm/arm.rb
 190     offlineasm/arm64.rb
 191     offlineasm/ast.rb
 192     offlineasm/backends.rb
 193     offlineasm/cloop.rb
 194     offlineasm/config.rb
 195     offlineasm/instructions.rb
 196     offlineasm/mips.rb
 197     offlineasm/offsets.rb
 198     offlineasm/opt.rb
 199     offlineasm/parser.rb
</pre>
<hr />
<pre>
 205     offlineasm/x86.rb
 206 )
 207 
 208 set(GENERATOR
 209     generator/Argument.rb
 210     generator/Assertion.rb
 211     generator/DSL.rb
 212     generator/Fits.rb
 213     generator/GeneratedFile.rb
 214     generator/Metadata.rb
 215     generator/Opcode.rb
 216     generator/OpcodeGroup.rb
 217     generator/Options.rb
 218     generator/Section.rb
 219     generator/Template.rb
 220     generator/Type.rb
 221     generator/main.rb
 222 )
 223 
 224 add_custom_command(
<span class="line-modified"> 225     OUTPUT ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/Bytecodes.h ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/InitBytecodes.asm ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/BytecodeStructs.h ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/BytecodeIndices.h</span>
 226     MAIN_DEPENDENCY ${JAVASCRIPTCORE_DIR}/generator/main.rb
 227     DEPENDS ${GENERATOR} bytecode/BytecodeList.rb
<span class="line-modified"> 228     COMMAND ${RUBY_EXECUTABLE} ${JAVASCRIPTCORE_DIR}/generator/main.rb --bytecodes_h ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/Bytecodes.h --init_bytecodes_asm ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/InitBytecodes.asm --bytecode_structs_h ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/BytecodeStructs.h --bytecode_indices_h ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/BytecodeIndices.h ${JAVASCRIPTCORE_DIR}/bytecode/BytecodeList.rb</span>
 229     VERBATIM)
 230 
 231 
 232 if (WTF_OS_MAC_OS_X)
 233     execute_process(COMMAND bash -c &quot;date +&#39;%s&#39;&quot; OUTPUT_VARIABLE BUILD_TIME OUTPUT_STRIP_TRAILING_WHITESPACE)
 234 else ()
<span class="line-modified"> 235     set(BUILD_TIME 0)</span>
 236 endif ()
 237 
<span class="line-modified"> 238 file(WRITE ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/BytecodeCacheVersion.h &quot;#define JSC_BYTECODE_CACHE_VERSION ${BUILD_TIME}\n&quot;)</span>
 239 
 240 list(APPEND JavaScriptCore_HEADERS
<span class="line-modified"> 241     ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/BytecodeCacheVersion.h</span>
<span class="line-modified"> 242     ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/BytecodeStructs.h</span>
<span class="line-modified"> 243     ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/Bytecodes.h</span>
 244 )
 245 
 246 if (WIN32)
<span class="line-modified"> 247   set(OFFLINE_ASM_BACKEND &quot;X86_WIN, X86_64_WIN, C_LOOP&quot;)</span>
 248 else ()
 249     if (WTF_CPU_X86)
 250         set(OFFLINE_ASM_BACKEND &quot;X86&quot;)
 251     elseif (WTF_CPU_X86_64)
 252         set(OFFLINE_ASM_BACKEND &quot;X86_64&quot;)
 253     elseif (WTF_CPU_ARM64)
 254         set(OFFLINE_ASM_BACKEND &quot;ARM64&quot;)
 255     elseif (ARM_THUMB2_DETECTED)
 256         set(OFFLINE_ASM_BACKEND &quot;ARMv7&quot;)
 257     elseif (WTF_CPU_MIPS)
 258         set(OFFLINE_ASM_BACKEND &quot;MIPS&quot;)
 259     endif ()
 260 
 261     if (NOT ENABLE_JIT)
 262         if (ENABLE_C_LOOP)
 263             set(OFFLINE_ASM_BACKEND &quot;C_LOOP&quot;)
 264         endif ()
 265     endif ()
 266 endif ()
 267 
 268 add_custom_command(
<span class="line-modified"> 269     OUTPUT ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/LLIntDesiredSettings.h</span>
 270     MAIN_DEPENDENCY ${JAVASCRIPTCORE_DIR}/offlineasm/generate_settings_extractor.rb
<span class="line-modified"> 271     DEPENDS ${LLINT_ASM} ${OFFLINE_ASM} ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/InitBytecodes.asm</span>
<span class="line-modified"> 272     COMMAND ${RUBY_EXECUTABLE} ${JAVASCRIPTCORE_DIR}/offlineasm/generate_settings_extractor.rb -I${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/ ${JAVASCRIPTCORE_DIR}/llint/LowLevelInterpreter.asm ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/LLIntDesiredSettings.h ${OFFLINE_ASM_BACKEND}</span>
 273     VERBATIM)
 274 
 275 add_custom_command(
<span class="line-modified"> 276     OUTPUT ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/LLIntDesiredOffsets.h</span>
 277     MAIN_DEPENDENCY ${JAVASCRIPTCORE_DIR}/offlineasm/generate_offset_extractor.rb
<span class="line-modified"> 278     DEPENDS LLIntSettingsExtractor ${LLINT_ASM} ${OFFLINE_ASM} ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/InitBytecodes.asm</span>
<span class="line-modified"> 279     COMMAND ${RUBY_EXECUTABLE} ${JAVASCRIPTCORE_DIR}/offlineasm/generate_offset_extractor.rb -I${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/ ${JAVASCRIPTCORE_DIR}/llint/LowLevelInterpreter.asm $&lt;TARGET_FILE:LLIntSettingsExtractor&gt; ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/LLIntDesiredOffsets.h ${OFFLINE_ASM_BACKEND}</span>
 280     VERBATIM)
 281 
 282 # We add the header files directly to the ADD_EXECUTABLE call instead of setting the
 283 # OBJECT_DEPENDS property in LLIntOffsetsExtractor.cpp because generate_offset_extractor.rb and
 284 # generate-bytecode-files may not regenerate the .h files in case the hash it calculates does not change.
 285 # In this case, if some of the dependencies specified in the ADD_CUSTOM_COMMANDs above have
 286 # changed the command will always be called because the mtime of the .h files will
 287 # always be older than that of their dependencies.
 288 # Additionally, setting the OBJECT_DEPENDS property will make the .h files a Makefile
 289 # dependency of both LLIntOffsetsExtractor and LLIntOffsetsExtractor.cpp, so the command will
 290 # actually be run multiple times!
 291 add_executable(LLIntSettingsExtractor
 292     ${JAVASCRIPTCORE_DIR}/llint/LLIntSettingsExtractor.cpp
<span class="line-modified"> 293     ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/LLIntDesiredSettings.h ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/Bytecodes.h ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/BytecodeStructs.h</span>
 294 )
 295 
 296 add_executable(LLIntOffsetsExtractor
 297     ${JAVASCRIPTCORE_DIR}/llint/LLIntOffsetsExtractor.cpp
<span class="line-modified"> 298     ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/LLIntDesiredOffsets.h ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/Bytecodes.h ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/BytecodeStructs.h</span>
 299 )
 300 
<span class="line-modified"> 301 target_link_libraries(LLIntSettingsExtractor WTF)</span>
<span class="line-modified"> 302 add_dependencies(LLIntSettingsExtractor JavaScriptCoreForwardingHeaders)</span>
<span class="line-modified"> 303 target_link_libraries(LLIntOffsetsExtractor WTF)</span>
<span class="line-modified"> 304 add_dependencies(LLIntOffsetsExtractor JavaScriptCoreForwardingHeaders)</span>
 305 
 306 # The build system will execute asm.rb every time LLIntOffsetsExtractor&#39;s mtime is newer than
 307 # LLIntAssembly.h&#39;s mtime. The problem we have here is: asm.rb has some built-in optimization
 308 # that generates a checksum of the LLIntOffsetsExtractor binary, if the checksum of the new
 309 # LLIntOffsetsExtractor matches, no output is generated. To make this target consistent and avoid
 310 # running this command for every build, we artificially update LLIntAssembly.h&#39;s mtime (using touch)
 311 # after every asm.rb run.
 312 if (MSVC AND NOT ENABLE_C_LOOP)
 313     set(LLIntOutput LowLevelInterpreterWin.asm)
 314     set(OFFLINE_ASM_ARGS --assembler=MASM)
 315 else ()
 316     set(LLIntOutput LLIntAssembly.h)
 317 endif ()
 318 
 319 add_custom_command(
<span class="line-modified"> 320     OUTPUT ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/${LLIntOutput}</span>
 321     MAIN_DEPENDENCY ${JAVASCRIPTCORE_DIR}/offlineasm/asm.rb
<span class="line-modified"> 322     DEPENDS LLIntOffsetsExtractor ${LLINT_ASM} ${OFFLINE_ASM} ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/InitBytecodes.asm</span>
<span class="line-modified"> 323     COMMAND ${RUBY_EXECUTABLE} ${JAVASCRIPTCORE_DIR}/offlineasm/asm.rb -I${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/ ${JAVASCRIPTCORE_DIR}/llint/LowLevelInterpreter.asm $&lt;TARGET_FILE:LLIntOffsetsExtractor&gt; ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/${LLIntOutput} ${OFFLINE_ASM_ARGS}</span>
<span class="line-modified"> 324     COMMAND ${CMAKE_COMMAND} -E touch_nocreate ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/${LLIntOutput}</span>
<span class="line-modified"> 325     WORKING_DIRECTORY ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}</span>
 326     VERBATIM)
 327 
 328 # The explanation for not making LLIntAssembly.h part of the OBJECT_DEPENDS property of some of
 329 # the .cpp files below is similar to the one in the previous comment. However, since these .cpp
 330 # files are used to build JavaScriptCore itself, we can just add LLIntAssembly.h to JSC_HEADERS
 331 # since it is used in the add_library() call at the end of this file.
 332 if (MSVC AND NOT ENABLE_C_LOOP)
 333     enable_language(ASM_MASM)
 334     if (CMAKE_SIZEOF_VOID_P EQUAL 4)
 335         # Win32 needs /safeseh with assembly, but Win64 does not.
 336         set(MASM_EXECUTABLE ml)
 337         set(LLINT_MASM_FLAGS /safeseh /c /Fo)
 338     else ()
 339         set(MASM_EXECUTABLE ml64)
 340         set(LLINT_MASM_FLAGS /c /Fo)
 341     endif ()
 342     add_custom_command(
<span class="line-modified"> 343         OUTPUT ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/LowLevelInterpreterWin.obj</span>
<span class="line-modified"> 344         DEPENDS ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/LowLevelInterpreterWin.asm</span>
<span class="line-modified"> 345         COMMAND ${MASM_EXECUTABLE} ${LLINT_MASM_FLAGS} ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/LowLevelInterpreterWin.obj ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/LowLevelInterpreterWin.asm</span>
 346         VERBATIM)
<span class="line-modified"> 347     list(APPEND JavaScriptCore_SOURCES ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/LowLevelInterpreterWin.obj)</span>
 348 else ()
 349     list(APPEND JavaScriptCore_HEADERS
<span class="line-modified"> 350         ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/LLIntAssembly.h</span>
 351     )
 352 endif ()
 353 
 354 # WebAssembly generator
 355 
 356 macro(GENERATE_PYTHON _generator _additional_deps _input _output)
 357     add_custom_command(
 358         OUTPUT ${_output}
 359         MAIN_DEPENDENCY ${_generator}
 360         DEPENDS ${_input} ${_additional_deps}
 361         COMMAND ${PYTHON_EXECUTABLE} ${_generator} ${_input} ${_output}
 362         VERBATIM)
 363     list(APPEND JavaScriptCore_HEADERS ${_output})
 364     WEBKIT_ADD_SOURCE_DEPENDENCIES(${_input} ${_output})
 365 endmacro()
<span class="line-modified"> 366 GENERATE_PYTHON(${CMAKE_CURRENT_SOURCE_DIR}/wasm/generateWasmOpsHeader.py ${CMAKE_CURRENT_SOURCE_DIR}/wasm/generateWasm.py ${CMAKE_CURRENT_SOURCE_DIR}/wasm/wasm.json ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/WasmOps.h)</span>
<span class="line-modified"> 367 GENERATE_PYTHON(${CMAKE_CURRENT_SOURCE_DIR}/wasm/generateWasmValidateInlinesHeader.py ${CMAKE_CURRENT_SOURCE_DIR}/wasm/generateWasm.py ${CMAKE_CURRENT_SOURCE_DIR}/wasm/wasm.json ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/WasmValidateInlines.h)</span>
<span class="line-modified"> 368 GENERATE_PYTHON(${CMAKE_CURRENT_SOURCE_DIR}/wasm/generateWasmB3IRGeneratorInlinesHeader.py ${CMAKE_CURRENT_SOURCE_DIR}/wasm/generateWasm.py ${CMAKE_CURRENT_SOURCE_DIR}/wasm/wasm.json ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/WasmB3IRGeneratorInlines.h)</span>
 369 
 370 # LUT generator
 371 
 372 set(HASH_LUT_GENERATOR ${CMAKE_CURRENT_SOURCE_DIR}/create_hash_table)
 373 macro(GENERATE_HASH_LUT _input _output)
 374     add_custom_command(
 375         OUTPUT ${_output}
 376         MAIN_DEPENDENCY ${HASH_LUT_GENERATOR}
 377         DEPENDS ${_input}
 378         COMMAND ${PERL_EXECUTABLE} ${HASH_LUT_GENERATOR} ${_input} &gt; ${_output}
 379         VERBATIM)
 380     list(APPEND JavaScriptCore_HEADERS ${_output})
 381     WEBKIT_ADD_SOURCE_DEPENDENCIES(${_input} ${_output})
 382 endmacro()
 383 
 384 # GENERATOR 1-A: LUT creator
 385 
 386 foreach (_file ${JavaScriptCore_OBJECT_LUT_SOURCES})
 387     get_filename_component(_name ${_file} NAME_WE)
<span class="line-modified"> 388     GENERATE_HASH_LUT(${CMAKE_CURRENT_SOURCE_DIR}/${_file} ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/${_name}.lut.h)</span>
 389 endforeach ()
 390 
 391 set(JavaScriptCore_PUBLIC_FRAMEWORK_HEADERS
 392     API/JSBase.h
 393     API/JSContextRef.h
 394     API/JSObjectRef.h
 395     API/JSStringRef.h
 396     API/JSTypedArray.h
 397     API/JSValueRef.h
 398     API/JavaScript.h
 399     API/WebKitAvailability.h
 400 )
 401 
 402 set(JavaScriptCore_PRIVATE_FRAMEWORK_HEADERS







 403     API/APICallbackFunction.h
 404     API/APICast.h
 405     API/APIUtils.h
 406     API/JSAPIValueWrapper.h
 407     API/JSAPIWrapperObject.h
 408     API/JSBasePrivate.h
 409     API/JSCTestRunnerUtils.h
 410     API/JSCallbackConstructor.h
 411     API/JSCallbackFunction.h
 412     API/JSCallbackObject.h
 413     API/JSCallbackObjectFunctions.h
 414     API/JSClassRef.h
 415     API/JSContextInternal.h
 416     API/JSContextPrivate.h
 417     API/JSContextRefInspectorSupport.h
 418     API/JSContextRefInternal.h
 419     API/JSContextRefPrivate.h
 420     API/JSHeapFinalizerPrivate.h
 421     API/JSManagedValueInternal.h
 422     API/JSMarkingConstraintPrivate.h
 423     API/JSObjectRefPrivate.h
 424     API/JSRemoteInspector.h
 425     API/JSRetainPtr.h
 426     API/JSScriptRefPrivate.h
 427     API/JSStringRefPrivate.h
 428     API/JSValueInternal.h

 429     API/JSVirtualMachineInternal.h
 430     API/JSWeakObjectMapRefInternal.h
 431     API/JSWeakObjectMapRefPrivate.h
 432     API/JSWeakPrivate.h
 433     API/JSWrapperMap.h
 434     API/ObjCCallbackFunction.h
 435     API/ObjcRuntimeExtras.h
 436     API/OpaqueJSString.h
 437 
 438     assembler/ARM64Assembler.h

 439     assembler/ARMv7Assembler.h

 440     assembler/AbortReason.h
 441     assembler/AbstractMacroAssembler.h
 442     assembler/AssemblerBuffer.h
 443     assembler/AssemblerBufferWithConstantPool.h
 444     assembler/AssemblerCommon.h
 445     assembler/CPU.h
 446     assembler/CodeLocation.h
 447     assembler/LinkBuffer.h
 448     assembler/MIPSAssembler.h

 449     assembler/MacroAssembler.h
 450     assembler/MacroAssemblerARM64.h
 451     assembler/MacroAssemblerARMv7.h
 452     assembler/MacroAssemblerCodeRef.h
 453     assembler/MacroAssemblerHelpers.h
 454     assembler/MacroAssemblerMIPS.h
 455     assembler/MacroAssemblerX86.h
 456     assembler/MacroAssemblerX86Common.h
 457     assembler/MacroAssemblerX86_64.h
 458     assembler/Printer.h

 459     assembler/X86Assembler.h


 460 
 461     bindings/ScriptFunctionCall.h
 462     bindings/ScriptObject.h
 463     bindings/ScriptValue.h
 464 
 465     builtins/BuiltinNames.h
 466     builtins/BuiltinUtils.h
 467 
 468     bytecode/ArrayAllocationProfile.h
 469     bytecode/ArrayProfile.h
 470     bytecode/ByValInfo.h
 471     bytecode/BytecodeConventions.h
 472     bytecode/BytecodeIntrinsicRegistry.h
 473     bytecode/CallEdge.h
 474     bytecode/CallLinkInfo.h
 475     bytecode/CallMode.h
 476     bytecode/CallVariant.h
 477     bytecode/CodeBlock.h
 478     bytecode/CodeBlockHash.h
 479     bytecode/CodeOrigin.h
</pre>
<hr />
<pre>
 561     heap/DeleteAllCodeEffort.h
 562     heap/DestructionMode.h
 563     heap/FastMallocAlignedMemoryAllocator.h
 564     heap/FreeList.h
 565     heap/FreeListInlines.h
 566     heap/GCActivityCallback.h
 567     heap/GCAssertions.h
 568     heap/GCConductor.h
 569     heap/GCDeferralContext.h
 570     heap/GCIncomingRefCounted.h
 571     heap/GCIncomingRefCountedInlines.h
 572     heap/GCIncomingRefCountedSet.h
 573     heap/GCLogging.h
 574     heap/GCRequest.h
 575     heap/GCSegmentedArray.h
 576     heap/Handle.h
 577     heap/HandleBlock.h
 578     heap/HandleSet.h
 579     heap/HandleTypes.h
 580     heap/Heap.h

 581     heap/HeapCell.h
 582     heap/HeapCellInlines.h
 583     heap/HeapCellType.h
 584     heap/HeapFinalizerCallback.h
 585     heap/HeapInlines.h
 586     heap/HeapObserver.h
 587     heap/HeapSnapshotBuilder.h
 588     heap/IncrementalSweeper.h
 589     heap/IsoCellSet.h
 590     heap/IsoSubspace.h
 591     heap/IsoSubspaceInlines.h
 592     heap/IsoSubspacePerVM.h
 593     heap/LargeAllocation.h
 594     heap/LocalAllocator.h
 595     heap/LocalAllocatorInlines.h
 596     heap/LockDuringMarking.h
 597     heap/MachineStackMarker.h
 598     heap/MarkStack.h
 599     heap/MarkedBlock.h
 600     heap/MarkedBlockInlines.h
 601     heap/MarkedBlockSet.h
 602     heap/MarkedSpace.h
 603     heap/MarkingConstraint.h
 604     heap/MutatorState.h

 605     heap/RegisterState.h
 606     heap/RunningScope.h
 607     heap/SimpleMarkingConstraint.h
 608     heap/SlotVisitor.h
 609     heap/SlotVisitorInlines.h
 610     heap/Strong.h
 611     heap/StrongInlines.h
 612     heap/Subspace.h
 613     heap/SubspaceInlines.h
 614     heap/Synchronousness.h
 615     heap/TinyBloomFilter.h
 616     heap/VisitRaceKey.h
 617     heap/Weak.h
 618     heap/WeakBlock.h
 619     heap/WeakHandleOwner.h
 620     heap/WeakImpl.h
 621     heap/WeakInlines.h
 622     heap/WeakSet.h
 623     heap/WeakSetInlines.h
 624 
</pre>
<hr />
<pre>
 735     profiler/ProfilerUID.h
 736 
 737     runtime/AbstractModuleRecord.h
 738     runtime/ArgList.h
 739     runtime/ArityCheckMode.h
 740     runtime/ArrayBuffer.h
 741     runtime/ArrayBufferSharingMode.h
 742     runtime/ArrayBufferView.h
 743     runtime/ArrayConventions.h
 744     runtime/ArrayPrototype.h
 745     runtime/ArrayStorage.h
 746     runtime/AuxiliaryBarrier.h
 747     runtime/AuxiliaryBarrierInlines.h
 748     runtime/BasicBlockLocation.h
 749     runtime/BatchedTransitionOptimizer.h
 750     runtime/BigIntPrototype.h
 751     runtime/BooleanObject.h
 752     runtime/BooleanPrototype.h
 753     runtime/Butterfly.h
 754     runtime/ButterflyInlines.h





 755     runtime/CagedBarrierPtr.h
 756     runtime/CallData.h
 757     runtime/CatchScope.h
 758     runtime/ClassInfo.h
 759     runtime/CodeSpecializationKind.h
 760     runtime/CommonIdentifiers.h
 761     runtime/CompilationResult.h
 762     runtime/Completion.h
 763     runtime/ConcurrentJSLock.h
 764     runtime/ConfigFile.h
 765     runtime/ConsoleClient.h
 766     runtime/ConsoleTypes.h
 767     runtime/ConstantMode.h
 768     runtime/ConstructAbility.h
 769     runtime/ConstructData.h
 770     runtime/ControlFlowProfiler.h
 771     runtime/CustomGetterSetter.h
 772     runtime/DOMAnnotation.h
 773     runtime/DOMAttributeGetterSetter.h
 774     runtime/DataView.h
</pre>
<hr />
<pre>
 783     runtime/EnumerationMode.h
 784     runtime/Error.h
 785     runtime/ErrorHandlingScope.h
 786     runtime/ErrorInstance.h
 787     runtime/ErrorPrototype.h
 788     runtime/ErrorType.h
 789     runtime/EvalExecutable.h
 790     runtime/Exception.h
 791     runtime/ExceptionEventLocation.h
 792     runtime/ExceptionHelpers.h
 793     runtime/ExceptionScope.h
 794     runtime/ExecutableBase.h
 795     runtime/ExecutableBaseInlines.h
 796     runtime/Float32Array.h
 797     runtime/Float64Array.h
 798     runtime/FunctionConstructor.h
 799     runtime/FunctionExecutable.h
 800     runtime/FunctionHasExecutedCache.h
 801     runtime/FunctionPrototype.h
 802     runtime/FunctionRareData.h

 803     runtime/GenericOffset.h
 804     runtime/GenericTypedArrayView.h
 805     runtime/GenericTypedArrayViewInlines.h
 806     runtime/GetPutInfo.h

 807     runtime/HashMapImpl.h
 808     runtime/Identifier.h
 809     runtime/IdentifierInlines.h
 810     runtime/IndexingHeader.h
 811     runtime/IndexingHeaderInlines.h
 812     runtime/IndexingType.h
 813     runtime/InferredValue.h
 814     runtime/InitializeThreading.h
 815     runtime/Int16Array.h
 816     runtime/Int32Array.h
 817     runtime/Int8Array.h
 818     runtime/InternalFunction.h
 819     runtime/Intrinsic.h
 820     runtime/IterationKind.h
 821     runtime/IterationStatus.h
 822     runtime/IteratorOperations.h
 823     runtime/IteratorPrototype.h
 824     runtime/JSArray.h
 825     runtime/JSArrayBuffer.h
 826     runtime/JSArrayBufferPrototype.h
</pre>
<hr />
<pre>
 856     runtime/JSLock.h
 857     runtime/JSMap.h
 858     runtime/JSMapIterator.h
 859     runtime/JSModuleLoader.h
 860     runtime/JSModuleRecord.h
 861     runtime/JSNativeStdFunction.h
 862     runtime/JSNonDestructibleProxy.h
 863     runtime/JSONObject.h
 864     runtime/JSObject.h
 865     runtime/JSObjectInlines.h
 866     runtime/JSPromise.h
 867     runtime/JSPromiseConstructor.h
 868     runtime/JSPromiseDeferred.h
 869     runtime/JSPropertyNameEnumerator.h
 870     runtime/JSProxy.h
 871     runtime/JSRunLoopTimer.h
 872     runtime/JSScope.h
 873     runtime/JSScriptFetchParameters.h
 874     runtime/JSScriptFetcher.h
 875     runtime/JSSegmentedVariableObject.h
<span class="line-removed"> 876     runtime/JSSegmentedVariableObjectHeapCellType.h</span>
 877     runtime/JSSet.h
 878     runtime/JSSetIterator.h
 879     runtime/JSSourceCode.h
 880     runtime/JSString.h
 881     runtime/JSStringInlines.h
 882     runtime/JSSymbolTableObject.h
 883     runtime/JSType.h
 884     runtime/JSTypeInfo.h
 885     runtime/JSTypedArrays.h
 886     runtime/JSWithScope.h
 887     runtime/JSWrapperObject.h
 888     runtime/LazyClassStructure.h
 889     runtime/LazyProperty.h

 890     runtime/Lookup.h
 891     runtime/MatchResult.h
 892     runtime/MathCommon.h
 893     runtime/MemoryStatistics.h
 894     runtime/Microtask.h
 895     runtime/ModuleProgramExecutable.h
 896     runtime/NativeExecutable.h
 897     runtime/NativeFunction.h
 898     runtime/NumberObject.h
 899     runtime/NumberPrototype.h
 900     runtime/NumericStrings.h
 901     runtime/ObjectConstructor.h
 902     runtime/ObjectInitializationScope.h
 903     runtime/ObjectPrototype.h
 904     runtime/Operations.h
 905     runtime/Options.h
 906     runtime/ParseInt.h
 907     runtime/PrivateName.h
 908     runtime/ProgramExecutable.h
 909     runtime/PromiseDeferredTimer.h
 910     runtime/PropertyDescriptor.h
 911     runtime/PropertyMapHashTable.h
 912     runtime/PropertyName.h
 913     runtime/PropertyNameArray.h
 914     runtime/PropertyOffset.h
 915     runtime/PropertySlot.h
 916     runtime/PropertyStorage.h
 917     runtime/Protect.h
 918     runtime/PrototypeKey.h
 919     runtime/PureNaN.h
 920     runtime/PutDirectIndexMode.h
 921     runtime/PutPropertySlot.h
 922     runtime/RegExp.h
 923     runtime/RegExpCachedResult.h
 924     runtime/RegExpGlobalData.h
 925     runtime/RegExpKey.h
 926     runtime/RegExpObject.h

 927     runtime/RuntimeFlags.h
 928     runtime/RuntimeType.h
 929     runtime/SamplingProfiler.h
 930     runtime/ScopeOffset.h
 931     runtime/ScopedArgumentsTable.h
 932     runtime/ScriptExecutable.h
 933     runtime/ScriptFetchParameters.h
 934     runtime/ScriptFetcher.h
 935     runtime/SlowPathReturnType.h
 936     runtime/SmallStrings.h
 937     runtime/SourceOrigin.h
 938     runtime/SparseArrayValueMap.h
 939     runtime/StackAlignment.h
 940     runtime/StackFrame.h
 941     runtime/StringObject.h
 942     runtime/StringPrototype.h
 943     runtime/Structure.h
 944     runtime/StructureCache.h
 945     runtime/StructureChain.h
 946     runtime/StructureIDBlob.h
 947     runtime/StructureIDTable.h
 948     runtime/StructureInlines.h
 949     runtime/StructureRareData.h
 950     runtime/StructureRareDataInlines.h
 951     runtime/StructureTransitionTable.h
 952     runtime/SubspaceAccess.h
 953     runtime/Symbol.h
 954     runtime/SymbolPrototype.h
 955     runtime/SymbolTable.h

 956     runtime/TemplateObjectDescriptor.h
 957     runtime/TestRunnerUtils.h
 958     runtime/ThrowScope.h
 959     runtime/ToNativeFromValue.h
 960     runtime/TypeError.h
 961     runtime/TypeSet.h
 962     runtime/TypedArrayAdaptors.h
 963     runtime/TypedArrayController.h
 964     runtime/TypedArrayInlines.h
 965     runtime/TypedArrayType.h
 966     runtime/TypedArrays.h
 967     runtime/TypeofType.h
 968     runtime/Uint16Array.h
 969     runtime/Uint32Array.h
 970     runtime/Uint8Array.h
 971     runtime/Uint8ClampedArray.h
 972     runtime/VM.h
 973     runtime/VMEntryScope.h
 974     runtime/VMInlines.h
 975     runtime/VMTraps.h
 976     runtime/VarOffset.h
 977     runtime/Watchdog.h
 978     runtime/WeakGCMap.h
 979     runtime/WeakGCMapInlines.h
 980     runtime/WriteBarrier.h
 981     runtime/WriteBarrierInlines.h
 982 

 983     wasm/WasmCodeBlock.h

 984     wasm/WasmContext.h
 985     wasm/WasmEmbedder.h
 986     wasm/WasmExceptionType.h
 987     wasm/WasmFaultSignalHandler.h
 988     wasm/WasmIndexOrName.h
 989     wasm/WasmMemory.h
 990     wasm/WasmMemoryMode.h
 991     wasm/WasmModule.h
 992     wasm/WasmName.h
 993     wasm/WasmNameSection.h
 994     wasm/WasmPageCount.h
 995     wasm/WasmTierUpCount.h
 996 

 997     wasm/js/JSWebAssemblyModule.h
<span class="line-removed"> 998     wasm/js/WebAssemblyPrototype.h</span>
 999 
1000 
1001     yarr/RegularExpression.h
1002     yarr/Yarr.h
1003     yarr/YarrErrorCode.h

1004     yarr/YarrInterpreter.h
1005     yarr/YarrJIT.h
1006     yarr/YarrParser.h
1007     yarr/YarrPattern.h
1008     yarr/YarrUnicodeProperties.h
1009 )
1010 
1011 # GENERATOR 1-B: particular LUT creator (for 1 file only)
<span class="line-modified">1012 GENERATE_HASH_LUT(${CMAKE_CURRENT_SOURCE_DIR}/parser/Keywords.table ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/Lexer.lut.h)</span>
1013 
<span class="line-modified">1014 file(MAKE_DIRECTORY ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/yarr)</span>
1015 
1016 #GENERATOR: &quot;RegExpJitTables.h&quot;: tables used by Yarr
1017 add_custom_command(
<span class="line-modified">1018     OUTPUT ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/yarr/RegExpJitTables.h</span>
1019     MAIN_DEPENDENCY ${CMAKE_CURRENT_SOURCE_DIR}/yarr/create_regex_tables
<span class="line-modified">1020     COMMAND ${PYTHON_EXECUTABLE} ${CMAKE_CURRENT_SOURCE_DIR}/yarr/create_regex_tables ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/yarr/RegExpJitTables.h</span>
1021     VERBATIM)
<span class="line-modified">1022 list(APPEND JavaScriptCore_HEADERS ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/yarr/RegExpJitTables.h)</span>
<span class="line-modified">1023 WEBKIT_ADD_SOURCE_DEPENDENCIES(${CMAKE_CURRENT_SOURCE_DIR}/yarr/YarrPattern.cpp ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/yarr/RegExpJitTables.h)</span>
1024 
1025 add_custom_command(
<span class="line-modified">1026     OUTPUT ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/yarr/UnicodePatternTables.h</span>
1027     MAIN_DEPENDENCY ${JAVASCRIPTCORE_DIR}/yarr/generateYarrUnicodePropertyTables.py
1028     DEPENDS ${JAVASCRIPTCORE_DIR}/yarr/hasher.py ${JAVASCRIPTCORE_DIR}/ucd/DerivedBinaryProperties.txt ${JAVASCRIPTCORE_DIR}/ucd/DerivedCoreProperties.txt ${JAVASCRIPTCORE_DIR}/ucd/DerivedNormalizationProps.txt ${JAVASCRIPTCORE_DIR}/ucd/PropList.txt ${JAVASCRIPTCORE_DIR}/ucd/PropertyAliases.txt ${JAVASCRIPTCORE_DIR}/ucd/PropertyValueAliases.txt ${JAVASCRIPTCORE_DIR}/ucd/ScriptExtensions.txt ${JAVASCRIPTCORE_DIR}/ucd/Scripts.txt ${JAVASCRIPTCORE_DIR}/ucd/UnicodeData.txt ${JAVASCRIPTCORE_DIR}/ucd/emoji-data.txt
<span class="line-modified">1029     COMMAND ${PYTHON_EXECUTABLE} ${JAVASCRIPTCORE_DIR}/yarr/generateYarrUnicodePropertyTables.py ${JAVASCRIPTCORE_DIR}/ucd ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/yarr/UnicodePatternTables.h</span>
1030     VERBATIM)
<span class="line-modified">1031 list(APPEND JavaScriptCore_HEADERS ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/yarr/UnicodePatternTables.h)</span>
<span class="line-modified">1032 WEBKIT_ADD_SOURCE_DEPENDENCIES(${CMAKE_CURRENT_SOURCE_DIR}/yarr/UnicodePatternTables.cpp ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/yarr/UnicodePatternTables.h)</span>
1033 
1034 add_custom_command(
<span class="line-modified">1035     OUTPUT ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/yarr/YarrCanonicalizeUnicode.cpp</span>
1036     MAIN_DEPENDENCY ${JAVASCRIPTCORE_DIR}/yarr/generateYarrCanonicalizeUnicode
1037     DEPENDS ${JAVASCRIPTCORE_DIR}/ucd/CaseFolding.txt
<span class="line-modified">1038     COMMAND ${PYTHON_EXECUTABLE} ${JAVASCRIPTCORE_DIR}/yarr/generateYarrCanonicalizeUnicode ${JAVASCRIPTCORE_DIR}/ucd/CaseFolding.txt ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/yarr/YarrCanonicalizeUnicode.cpp</span>
1039     VERBATIM)
1040 
1041 #GENERATOR: &quot;IntlCanonicalizeLanguage.h&quot;: tables used by Intl
1042 add_custom_command(
<span class="line-modified">1043     OUTPUT ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/IntlCanonicalizeLanguage.h</span>
1044     MAIN_DEPENDENCY ${JAVASCRIPTCORE_DIR}/Scripts/generateIntlCanonicalizeLanguage.py
1045     DEPENDS ${JAVASCRIPTCORE_DIR}/ucd/language-subtag-registry.txt
<span class="line-modified">1046     COMMAND ${PYTHON_EXECUTABLE} ${JAVASCRIPTCORE_DIR}/Scripts/generateIntlCanonicalizeLanguage.py ${JAVASCRIPTCORE_DIR}/ucd/language-subtag-registry.txt ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/IntlCanonicalizeLanguage.h</span>
1047     VERBATIM)
<span class="line-modified">1048 list(APPEND JavaScriptCore_HEADERS ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/IntlCanonicalizeLanguage.h)</span>
<span class="line-modified">1049 WEBKIT_ADD_SOURCE_DEPENDENCIES(${CMAKE_CURRENT_SOURCE_DIR}/runtime/IntlObject.cpp ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/IntlCanonicalizeLanguage.h)</span>
1050 
1051 #GENERATOR: &quot;KeywordLookup.h&quot;: keyword decision tree used by the lexer
1052 add_custom_command(
<span class="line-modified">1053     OUTPUT ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/KeywordLookup.h</span>
1054     MAIN_DEPENDENCY ${CMAKE_CURRENT_SOURCE_DIR}/KeywordLookupGenerator.py
1055     DEPENDS ${CMAKE_CURRENT_SOURCE_DIR}/parser/Keywords.table
<span class="line-modified">1056     COMMAND ${PYTHON_EXECUTABLE} ${CMAKE_CURRENT_SOURCE_DIR}/KeywordLookupGenerator.py ${CMAKE_CURRENT_SOURCE_DIR}/parser/Keywords.table &gt; ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/KeywordLookup.h</span>
1057     VERBATIM)
<span class="line-modified">1058 list(APPEND JavaScriptCore_HEADERS ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/KeywordLookup.h)</span>
<span class="line-modified">1059 WEBKIT_ADD_SOURCE_DEPENDENCIES(${CMAKE_CURRENT_SOURCE_DIR}/parser/Lexer.cpp ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/KeywordLookup.h)</span>
1060 
1061 
1062 # Inspector Interfaces
1063 
1064 set(JavaScriptCore_INSPECTOR_SCRIPTS_DIR &quot;${JAVASCRIPTCORE_DIR}/inspector/scripts&quot;)
1065 
1066 set(JavaScriptCore_INSPECTOR_PROTOCOL_SCRIPTS
1067     ${JavaScriptCore_INSPECTOR_SCRIPTS_DIR}/generate-inspector-protocol-bindings.py
1068     ${JavaScriptCore_INSPECTOR_SCRIPTS_DIR}/codegen/cpp_generator.py
1069     ${JavaScriptCore_INSPECTOR_SCRIPTS_DIR}/codegen/cpp_generator_templates.py
1070     ${JavaScriptCore_INSPECTOR_SCRIPTS_DIR}/codegen/generate_js_backend_commands.py
1071     ${JavaScriptCore_INSPECTOR_SCRIPTS_DIR}/codegen/generate_cpp_backend_dispatcher_header.py
1072     ${JavaScriptCore_INSPECTOR_SCRIPTS_DIR}/codegen/generate_cpp_backend_dispatcher_implementation.py
1073     ${JavaScriptCore_INSPECTOR_SCRIPTS_DIR}/codegen/generate_cpp_frontend_dispatcher_header.py
1074     ${JavaScriptCore_INSPECTOR_SCRIPTS_DIR}/codegen/generate_cpp_frontend_dispatcher_implementation.py
1075     ${JavaScriptCore_INSPECTOR_SCRIPTS_DIR}/codegen/generate_cpp_protocol_types_header.py
1076     ${JavaScriptCore_INSPECTOR_SCRIPTS_DIR}/codegen/generate_cpp_protocol_types_implementation.py
1077     ${JavaScriptCore_INSPECTOR_SCRIPTS_DIR}/codegen/generator.py
1078     ${JavaScriptCore_INSPECTOR_SCRIPTS_DIR}/codegen/generator_templates.py
1079     ${JavaScriptCore_INSPECTOR_SCRIPTS_DIR}/codegen/__init__.py
1080     ${JavaScriptCore_INSPECTOR_SCRIPTS_DIR}/codegen/models.py
1081 )
1082 
1083 set(JavaScriptCore_INSPECTOR_DOMAINS
1084     ${JAVASCRIPTCORE_DIR}/inspector/protocol/ApplicationCache.json
1085     ${JAVASCRIPTCORE_DIR}/inspector/protocol/Audit.json
1086     ${JAVASCRIPTCORE_DIR}/inspector/protocol/CSS.json
1087     ${JAVASCRIPTCORE_DIR}/inspector/protocol/Canvas.json
1088     ${JAVASCRIPTCORE_DIR}/inspector/protocol/Console.json
1089     ${JAVASCRIPTCORE_DIR}/inspector/protocol/DOM.json
1090     ${JAVASCRIPTCORE_DIR}/inspector/protocol/DOMDebugger.json
1091     ${JAVASCRIPTCORE_DIR}/inspector/protocol/DOMStorage.json
1092     ${JAVASCRIPTCORE_DIR}/inspector/protocol/Database.json
1093     ${JAVASCRIPTCORE_DIR}/inspector/protocol/Debugger.json
1094     ${JAVASCRIPTCORE_DIR}/inspector/protocol/GenericTypes.json
1095     ${JAVASCRIPTCORE_DIR}/inspector/protocol/Heap.json
1096     ${JAVASCRIPTCORE_DIR}/inspector/protocol/Inspector.json
1097     ${JAVASCRIPTCORE_DIR}/inspector/protocol/LayerTree.json
1098     ${JAVASCRIPTCORE_DIR}/inspector/protocol/Network.json
<span class="line-removed">1099     ${JAVASCRIPTCORE_DIR}/inspector/protocol/OverlayTypes.json</span>
1100     ${JAVASCRIPTCORE_DIR}/inspector/protocol/Page.json
1101     ${JAVASCRIPTCORE_DIR}/inspector/protocol/Recording.json
1102     ${JAVASCRIPTCORE_DIR}/inspector/protocol/Runtime.json
1103     ${JAVASCRIPTCORE_DIR}/inspector/protocol/ScriptProfiler.json
1104     ${JAVASCRIPTCORE_DIR}/inspector/protocol/Security.json
1105     ${JAVASCRIPTCORE_DIR}/inspector/protocol/Target.json
1106     ${JAVASCRIPTCORE_DIR}/inspector/protocol/Timeline.json
1107     ${JAVASCRIPTCORE_DIR}/inspector/protocol/Worker.json
1108 )
1109 
1110 if (ENABLE_INDEXED_DATABASE)
1111     list(APPEND JavaScriptCore_INSPECTOR_DOMAINS
1112         ${JAVASCRIPTCORE_DIR}/inspector/protocol/IndexedDB.json
1113     )
1114 endif ()
1115 
1116 if (ENABLE_RESOURCE_USAGE)
1117     list(APPEND JavaScriptCore_INSPECTOR_DOMAINS
1118         ${JAVASCRIPTCORE_DIR}/inspector/protocol/CPUProfiler.json
1119         ${JAVASCRIPTCORE_DIR}/inspector/protocol/Memory.json
1120     )
1121 endif ()
1122 
1123 if (ENABLE_SERVICE_WORKER)
1124     list(APPEND JavaScriptCore_INSPECTOR_DOMAINS
1125         ${JAVASCRIPTCORE_DIR}/inspector/protocol/ServiceWorker.json
1126     )
1127 endif ()
1128 
1129 add_custom_command(
<span class="line-modified">1130     OUTPUT ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/CombinedDomains.json</span>
1131     MAIN_DEPENDENCY ${JavaScriptCore_SCRIPTS_DIR}/generate-combined-inspector-json.py
1132     DEPENDS ${JavaScriptCore_INSPECTOR_DOMAINS}
<span class="line-modified">1133     COMMAND ${PYTHON_EXECUTABLE} ${JavaScriptCore_SCRIPTS_DIR}/generate-combined-inspector-json.py ${JavaScriptCore_INSPECTOR_DOMAINS} &gt; ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/CombinedDomains.json</span>
1134     VERBATIM)
1135 
1136 # Inspector Backend Dispatchers, Frontend Dispatchers, Type Builders
1137 file(MAKE_DIRECTORY ${DERIVED_SOURCES_WEBINSPECTORUI_DIR}/UserInterface/Protocol)
<span class="line-modified">1138 file(MAKE_DIRECTORY ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/inspector)</span>
1139 add_custom_command(
<span class="line-modified">1140     OUTPUT ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/inspector/InspectorBackendDispatchers.cpp</span>
<span class="line-modified">1141            ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/inspector/InspectorBackendDispatchers.h</span>
<span class="line-modified">1142            ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/inspector/InspectorFrontendDispatchers.cpp</span>
<span class="line-modified">1143            ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/inspector/InspectorFrontendDispatchers.h</span>
<span class="line-modified">1144            ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/inspector/InspectorProtocolObjects.cpp</span>
<span class="line-modified">1145            ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/inspector/InspectorProtocolObjects.h</span>
<span class="line-modified">1146            ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/inspector/InspectorBackendCommands.js</span>
<span class="line-modified">1147     MAIN_DEPENDENCY ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/CombinedDomains.json</span>
1148     DEPENDS ${JavaScriptCore_INSPECTOR_PROTOCOL_SCRIPTS}
<span class="line-modified">1149     COMMAND ${PYTHON_EXECUTABLE} ${JavaScriptCore_INSPECTOR_SCRIPTS_DIR}/generate-inspector-protocol-bindings.py --outputDir &quot;${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/inspector&quot; --framework JavaScriptCore ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/CombinedDomains.json</span>
1150     VERBATIM)
1151 
1152 # JSCBuiltins
1153 
1154 set(BUILTINS_GENERATOR_SCRIPTS
1155     ${JavaScriptCore_SCRIPTS_DIR}/wkbuiltins.py
1156     ${JavaScriptCore_SCRIPTS_DIR}/builtins_generator.py
1157     ${JavaScriptCore_SCRIPTS_DIR}/builtins_model.py
1158     ${JavaScriptCore_SCRIPTS_DIR}/builtins_templates.py
1159     ${JavaScriptCore_SCRIPTS_DIR}/builtins_generate_combined_header.py
1160     ${JavaScriptCore_SCRIPTS_DIR}/builtins_generate_combined_implementation.py
1161     ${JavaScriptCore_SCRIPTS_DIR}/builtins_generate_separate_header.py
1162     ${JavaScriptCore_SCRIPTS_DIR}/builtins_generate_separate_implementation.py
1163     ${JavaScriptCore_SCRIPTS_DIR}/builtins_generate_wrapper_header.py
1164     ${JavaScriptCore_SCRIPTS_DIR}/builtins_generate_wrapper_implementation.py
1165     ${JavaScriptCore_SCRIPTS_DIR}/builtins_generate_internals_wrapper_header.py
1166     ${JavaScriptCore_SCRIPTS_DIR}/builtins_generate_internals_wrapper_implementation.py
1167     ${JavaScriptCore_SCRIPTS_DIR}/generate-js-builtins.py
1168     ${JavaScriptCore_SCRIPTS_DIR}/lazywriter.py
1169 )
</pre>
<hr />
<pre>
1178     ${JAVASCRIPTCORE_DIR}/builtins/AsyncGeneratorPrototype.js
1179     ${JAVASCRIPTCORE_DIR}/builtins/DatePrototype.js
1180     ${JAVASCRIPTCORE_DIR}/builtins/FunctionPrototype.js
1181     ${JAVASCRIPTCORE_DIR}/builtins/GeneratorPrototype.js
1182     ${JAVASCRIPTCORE_DIR}/builtins/GlobalObject.js
1183     ${JAVASCRIPTCORE_DIR}/builtins/GlobalOperations.js
1184     ${JAVASCRIPTCORE_DIR}/builtins/InspectorInstrumentationObject.js
1185     ${JAVASCRIPTCORE_DIR}/builtins/InternalPromiseConstructor.js
1186     ${JAVASCRIPTCORE_DIR}/builtins/IteratorHelpers.js
1187     ${JAVASCRIPTCORE_DIR}/builtins/IteratorPrototype.js
1188     ${JAVASCRIPTCORE_DIR}/builtins/MapIteratorPrototype.js
1189     ${JAVASCRIPTCORE_DIR}/builtins/MapPrototype.js
1190     ${JAVASCRIPTCORE_DIR}/builtins/ModuleLoader.js
1191     ${JAVASCRIPTCORE_DIR}/builtins/NumberConstructor.js
1192     ${JAVASCRIPTCORE_DIR}/builtins/ObjectConstructor.js
1193     ${JAVASCRIPTCORE_DIR}/builtins/PromiseConstructor.js
1194     ${JAVASCRIPTCORE_DIR}/builtins/PromiseOperations.js
1195     ${JAVASCRIPTCORE_DIR}/builtins/PromisePrototype.js
1196     ${JAVASCRIPTCORE_DIR}/builtins/ReflectObject.js
1197     ${JAVASCRIPTCORE_DIR}/builtins/RegExpPrototype.js

1198     ${JAVASCRIPTCORE_DIR}/builtins/SetIteratorPrototype.js
1199     ${JAVASCRIPTCORE_DIR}/builtins/SetPrototype.js
1200     ${JAVASCRIPTCORE_DIR}/builtins/StringConstructor.js
1201     ${JAVASCRIPTCORE_DIR}/builtins/StringIteratorPrototype.js
1202     ${JAVASCRIPTCORE_DIR}/builtins/StringPrototype.js
1203     ${JAVASCRIPTCORE_DIR}/builtins/TypedArrayConstructor.js
1204     ${JAVASCRIPTCORE_DIR}/builtins/TypedArrayPrototype.js
<span class="line-modified">1205     ${JAVASCRIPTCORE_DIR}/builtins/WebAssemblyPrototype.js</span>
1206 )
1207 
1208 add_custom_command(
<span class="line-modified">1209     OUTPUT ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/JSCBuiltins.cpp ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/JSCBuiltins.h</span>
1210     MAIN_DEPENDENCY ${JavaScriptCore_SCRIPTS_DIR}/generate-js-builtins.py
1211     DEPENDS ${JavaScriptCore_BUILTINS_SOURCES} ${BUILTINS_GENERATOR_SCRIPTS}
<span class="line-modified">1212     COMMAND ${PYTHON_EXECUTABLE} ${JavaScriptCore_SCRIPTS_DIR}/generate-js-builtins.py --framework JavaScriptCore --output-directory ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR} --combined ${JavaScriptCore_BUILTINS_SOURCES}</span>
1213     VERBATIM)
1214 
1215 list(APPEND JavaScriptCore_HEADERS
<span class="line-modified">1216     ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/inspector/InspectorBackendDispatchers.h</span>
<span class="line-modified">1217     ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/inspector/InspectorFrontendDispatchers.h</span>
<span class="line-modified">1218     ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/inspector/InspectorProtocolObjects.h</span>
<span class="line-modified">1219     ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/JSCBuiltins.h</span>
1220 )
1221 
1222 add_custom_command(
<span class="line-modified">1223     OUTPUT ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/AirOpcode.h ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/AirOpcodeGenerated.h</span>
1224     MAIN_DEPENDENCY ${JAVASCRIPTCORE_DIR}/b3/air/AirOpcode.opcodes
1225     DEPENDS ${JAVASCRIPTCORE_DIR}/b3/air/opcode_generator.rb
1226     COMMAND ${RUBY_EXECUTABLE} ${JAVASCRIPTCORE_DIR}/b3/air/opcode_generator.rb ${JAVASCRIPTCORE_DIR}/b3/air/AirOpcode.opcodes VERBATIM
<span class="line-modified">1227     WORKING_DIRECTORY ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}</span>
1228 )
1229 
1230 list(APPEND JavaScriptCore_HEADERS
<span class="line-modified">1231     ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/AirOpcode.h</span>
<span class="line-modified">1232     ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/AirOpcodeGenerated.h</span>
1233 )
1234 
1235 add_custom_command(
<span class="line-modified">1236     OUTPUT ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/InjectedScriptSource.h ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/InjectedScriptSource.min.js</span>
1237     MAIN_DEPENDENCY ${JAVASCRIPTCORE_DIR}/inspector/InjectedScriptSource.js
1238     DEPENDS ${JavaScriptCore_SCRIPTS_DIR}/xxd.pl ${JavaScriptCore_SCRIPTS_DIR}/jsmin.py
<span class="line-modified">1239     COMMAND ${CMAKE_COMMAND} -E echo &quot;//# sourceURL=__InjectedScript_InjectedScriptSource.js&quot; &gt; ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/InjectedScriptSource.min.js</span>
<span class="line-modified">1240     COMMAND ${PYTHON_EXECUTABLE} ${JavaScriptCore_SCRIPTS_DIR}/jsmin.py &lt; ${JAVASCRIPTCORE_DIR}/inspector/InjectedScriptSource.js &gt;&gt; ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/InjectedScriptSource.min.js</span>
<span class="line-modified">1241     COMMAND ${PERL_EXECUTABLE} ${JavaScriptCore_SCRIPTS_DIR}/xxd.pl InjectedScriptSource_js ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/InjectedScriptSource.min.js ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/InjectedScriptSource.h</span>
1242     VERBATIM)
1243 
<span class="line-modified">1244 list(APPEND JavaScriptCore_HEADERS ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/InjectedScriptSource.h)</span>
1245 
1246 if (WTF_CPU_X86_64)
1247     if (MSVC AND NOT ENABLE_C_LOOP)
1248         add_custom_command(
<span class="line-modified">1249             OUTPUT ${DERIVED_SOURCES_DIR}/JITStubsMSVC64.obj</span>
1250             MAIN_DEPENDENCY ${JAVASCRIPTCORE_DIR}/jit/JITStubsMSVC64.asm
<span class="line-modified">1251             COMMAND ml64 -nologo -c -Fo ${DERIVED_SOURCES_DIR}/JITStubsMSVC64.obj ${JAVASCRIPTCORE_DIR}/jit/JITStubsMSVC64.asm</span>
1252             VERBATIM)
1253 
<span class="line-modified">1254         list(APPEND JavaScriptCore_SOURCES ${DERIVED_SOURCES_DIR}/JITStubsMSVC64.obj)</span>
1255     endif ()
1256 endif ()
1257 










1258 WEBKIT_FRAMEWORK_DECLARE(JavaScriptCore)
1259 WEBKIT_INCLUDE_CONFIG_FILES_IF_EXISTS()
1260 
1261 if (COMPILER_IS_GCC_OR_CLANG)
1262     # Avoid using fused multiply-add instructions since this could give different results
1263     # for e.g. parseInt depending on the platform and compilation flags.
1264     WEBKIT_ADD_TARGET_CXX_FLAGS(JavaScriptCore -ffp-contract=off)
<span class="line-removed">1265 </span>
<span class="line-removed">1266     # Avoid &quot;variable tracking size limit exceeded&quot;</span>
<span class="line-removed">1267     set_source_files_properties(builtins/BuiltinNames.cpp PROPERTIES COMPILE_FLAGS -fno-var-tracking-assignments)</span>
1268 endif ()
1269 
<span class="line-modified">1270 WEBKIT_MAKE_FORWARDING_HEADERS(JavaScriptCore</span>

1271     FILES ${JavaScriptCore_PUBLIC_FRAMEWORK_HEADERS}
1272     FLATTENED
1273 )
1274 
<span class="line-modified">1275 WEBKIT_MAKE_FORWARDING_HEADERS(JavaScriptCore</span>
<span class="line-modified">1276     TARGET_NAME JavaScriptCorePrivateForwardingHeaders</span>
1277     FILES ${JavaScriptCore_PRIVATE_FRAMEWORK_HEADERS}
<span class="line-removed">1278     DERIVED_SOURCE_DIRECTORIES ${DERIVED_SOURCES_DIR}/JavaScriptCore ${DERIVED_SOURCES_DIR}/JavaScriptCore/inspector</span>
1279     FLATTENED
1280 )







1281 
1282 target_include_directories(LLIntSettingsExtractor PRIVATE
1283     ${JavaScriptCore_INCLUDE_DIRECTORIES}
1284     ${JavaScriptCore_PRIVATE_INCLUDE_DIRECTORIES}
1285 )
1286 target_include_directories(LLIntSettingsExtractor SYSTEM PRIVATE ${JavaScriptCore_SYSTEM_INCLUDE_DIRECTORIES})
1287 
1288 target_include_directories(LLIntOffsetsExtractor PRIVATE
1289     ${JavaScriptCore_INCLUDE_DIRECTORIES}
1290     ${JavaScriptCore_PRIVATE_INCLUDE_DIRECTORIES}
1291 )
1292 target_include_directories(LLIntOffsetsExtractor SYSTEM PRIVATE ${JavaScriptCore_SYSTEM_INCLUDE_DIRECTORIES})
1293 
1294 if (NOT PORT STREQUAL &quot;Java&quot;)
1295     add_subdirectory(shell)
1296 endif ()
1297 
1298 WEBKIT_COMPUTE_SOURCES(JavaScriptCore)
1299 WEBKIT_WRAP_SOURCELIST(${JavaScriptCore_SOURCES})
1300 WEBKIT_FRAMEWORK(JavaScriptCore)

1301 
1302 if (NOT &quot;${PORT}&quot; STREQUAL &quot;Mac&quot;)
1303     if (${JavaScriptCore_LIBRARY_TYPE} STREQUAL &quot;SHARED&quot;)
1304         WEBKIT_POPULATE_LIBRARY_VERSION(JAVASCRIPTCORE)
1305         set_target_properties(JavaScriptCore PROPERTIES VERSION ${JAVASCRIPTCORE_VERSION} SOVERSION ${JAVASCRIPTCORE_VERSION_MAJOR})
1306         install(TARGETS JavaScriptCore DESTINATION &quot;${LIB_INSTALL_DIR}&quot;)
1307     endif ()
1308 endif ()
1309 
1310 # Force staging of shared scripts, even if they aren&#39;t directly used to build JavaScriptCore.
1311 
1312 add_custom_target(stageSharedScripts DEPENDS ${JavaScriptCore_SCRIPTS})
1313 add_dependencies(JavaScriptCore stageSharedScripts ${JavaScriptCore_EXTRA_DEPENDENCIES})
1314 
<span class="line-modified">1315 if (MSVC AND NOT PORT STREQUAL Java)</span>
1316     add_custom_command(
1317         TARGET JavaScriptCore
1318         PRE_BUILD
<span class="line-modified">1319         COMMAND ${PERL_EXECUTABLE} ${WEBKIT_LIBRARIES_DIR}/tools/scripts/auto-version.pl ${DERIVED_SOURCES_DIR}</span>
1320         VERBATIM)
1321 
1322     add_custom_command(
1323         TARGET JavaScriptCore
1324         POST_BUILD
<span class="line-modified">1325         COMMAND ${PERL_EXECUTABLE} ${WEBKIT_LIBRARIES_DIR}/tools/scripts/version-stamp.pl ${DERIVED_SOURCES_DIR} $&lt;TARGET_FILE:JavaScriptCore&gt;</span>
1326         VERBATIM)
1327 endif ()
</pre>
</td>
<td>
<hr />
<pre>
<span class="line-modified">   1 cmake_minimum_required(VERSION 3.10)</span>
   2 include(WebKitCommon)
   3 set_property(DIRECTORY . PROPERTY FOLDER &quot;JavaScriptCore&quot;)
   4 
   5 list(APPEND JavaScriptCore_UNIFIED_SOURCE_LIST_FILES
   6     &quot;Sources.txt&quot;
   7 )
   8 
   9 set(JavaScriptCore_INCLUDE_DIRECTORIES
<span class="line-modified">  10     &quot;${JavaScriptCore_FRAMEWORK_HEADERS_DIR}&quot;</span>
  11 )
  12 
  13 set(JavaScriptCore_PRIVATE_INCLUDE_DIRECTORIES
  14     &quot;${CMAKE_BINARY_DIR}&quot;
  15     &quot;${JAVASCRIPTCORE_DIR}&quot;
  16     &quot;${JAVASCRIPTCORE_DIR}/API&quot;
  17     &quot;${JAVASCRIPTCORE_DIR}/assembler&quot;
  18     &quot;${JAVASCRIPTCORE_DIR}/b3&quot;
  19     &quot;${JAVASCRIPTCORE_DIR}/b3/air&quot;
  20     &quot;${JAVASCRIPTCORE_DIR}/bindings&quot;
  21     &quot;${JAVASCRIPTCORE_DIR}/builtins&quot;
  22     &quot;${JAVASCRIPTCORE_DIR}/bytecode&quot;
  23     &quot;${JAVASCRIPTCORE_DIR}/bytecompiler&quot;
  24     &quot;${JAVASCRIPTCORE_DIR}/dfg&quot;
  25     &quot;${JAVASCRIPTCORE_DIR}/disassembler&quot;
  26     &quot;${JAVASCRIPTCORE_DIR}/disassembler/ARM64&quot;
  27     &quot;${JAVASCRIPTCORE_DIR}/disassembler/udis86&quot;
  28     &quot;${JAVASCRIPTCORE_DIR}/domjit&quot;
  29     &quot;${JAVASCRIPTCORE_DIR}/ftl&quot;
  30     &quot;${JAVASCRIPTCORE_DIR}/heap&quot;
  31     &quot;${JAVASCRIPTCORE_DIR}/debugger&quot;
  32     &quot;${JAVASCRIPTCORE_DIR}/inspector&quot;
  33     &quot;${JAVASCRIPTCORE_DIR}/inspector/agents&quot;
  34     &quot;${JAVASCRIPTCORE_DIR}/inspector/augmentable&quot;
  35     &quot;${JAVASCRIPTCORE_DIR}/inspector/remote&quot;
  36     &quot;${JAVASCRIPTCORE_DIR}/interpreter&quot;
  37     &quot;${JAVASCRIPTCORE_DIR}/jit&quot;
  38     &quot;${JAVASCRIPTCORE_DIR}/llint&quot;
  39     &quot;${JAVASCRIPTCORE_DIR}/parser&quot;
  40     &quot;${JAVASCRIPTCORE_DIR}/profiler&quot;
  41     &quot;${JAVASCRIPTCORE_DIR}/runtime&quot;
  42     &quot;${JAVASCRIPTCORE_DIR}/tools&quot;
  43     &quot;${JAVASCRIPTCORE_DIR}/wasm&quot;
  44     &quot;${JAVASCRIPTCORE_DIR}/wasm/js&quot;
  45     &quot;${JAVASCRIPTCORE_DIR}/yarr&quot;
<span class="line-modified">  46     &quot;${JavaScriptCore_DERIVED_SOURCES_DIR}&quot;</span>
<span class="line-modified">  47     &quot;${JavaScriptCore_DERIVED_SOURCES_DIR}/inspector&quot;</span>
<span class="line-modified">  48     &quot;${JavaScriptCore_DERIVED_SOURCES_DIR}/runtime&quot;</span>
<span class="line-modified">  49     &quot;${JavaScriptCore_DERIVED_SOURCES_DIR}/yarr&quot;</span>
  50 )
  51 
  52 if (USE_CAPSTONE)
  53     list(APPEND JavaScriptCore_PRIVATE_INCLUDE_DIRECTORIES &quot;${THIRDPARTY_DIR}/capstone/Source/include&quot;)
  54 endif ()
  55 




  56 set(JavaScriptCore_OBJECT_LUT_SOURCES
  57     runtime/ArrayConstructor.cpp

  58     runtime/AsyncFromSyncIteratorPrototype.cpp
  59     runtime/AsyncGeneratorPrototype.cpp
  60     runtime/BigIntConstructor.cpp
  61     runtime/BigIntPrototype.cpp
  62     runtime/BooleanPrototype.cpp
  63     runtime/DateConstructor.cpp
  64     runtime/DatePrototype.cpp
  65     runtime/ErrorPrototype.cpp
  66     runtime/GeneratorPrototype.cpp
  67     runtime/InspectorInstrumentationObject.cpp
  68     runtime/IntlCollatorConstructor.cpp
  69     runtime/IntlCollatorPrototype.cpp
  70     runtime/IntlDateTimeFormatConstructor.cpp
  71     runtime/IntlDateTimeFormatPrototype.cpp
  72     runtime/IntlNumberFormatConstructor.cpp
  73     runtime/IntlNumberFormatPrototype.cpp
  74     runtime/IntlObject.cpp
  75     runtime/IntlPluralRulesConstructor.cpp
  76     runtime/IntlPluralRulesPrototype.cpp
  77     runtime/JSDataViewPrototype.cpp
  78     runtime/JSGlobalObject.cpp
  79     runtime/JSInternalPromiseConstructor.cpp
  80     runtime/JSModuleLoader.cpp
  81     runtime/JSONObject.cpp
  82     runtime/JSPromiseConstructor.cpp
  83     runtime/JSPromisePrototype.cpp
  84     runtime/MapPrototype.cpp
  85     runtime/NumberConstructor.cpp
  86     runtime/NumberPrototype.cpp
  87     runtime/ObjectConstructor.cpp
  88     runtime/ReflectObject.cpp
  89     runtime/RegExpConstructor.cpp
  90     runtime/RegExpPrototype.cpp
<span class="line-added">  91     runtime/RegExpStringIteratorPrototype.cpp</span>
  92     runtime/SetPrototype.cpp
  93     runtime/StringConstructor.cpp

  94     runtime/StringPrototype.cpp
  95     runtime/SymbolConstructor.cpp
  96     runtime/SymbolPrototype.cpp
  97 
<span class="line-added">  98     wasm/js/JSWebAssembly.cpp</span>
<span class="line-added">  99     wasm/js/JSToWasmICCallee.cpp</span>
 100     wasm/js/WebAssemblyCompileErrorConstructor.cpp
 101     wasm/js/WebAssemblyCompileErrorPrototype.cpp
<span class="line-added"> 102     wasm/js/WebAssemblyFunctionHeapCellType.cpp</span>
 103     wasm/js/WebAssemblyInstanceConstructor.cpp
 104     wasm/js/WebAssemblyInstancePrototype.cpp
 105     wasm/js/WebAssemblyLinkErrorConstructor.cpp
 106     wasm/js/WebAssemblyLinkErrorPrototype.cpp
 107     wasm/js/WebAssemblyMemoryConstructor.cpp
 108     wasm/js/WebAssemblyMemoryPrototype.cpp
 109     wasm/js/WebAssemblyModuleConstructor.cpp
 110     wasm/js/WebAssemblyModulePrototype.cpp

 111     wasm/js/WebAssemblyRuntimeErrorConstructor.cpp
 112     wasm/js/WebAssemblyRuntimeErrorPrototype.cpp
 113     wasm/js/WebAssemblyTableConstructor.cpp
 114     wasm/js/WebAssemblyTablePrototype.cpp
 115 )
 116 
 117 set(JavaScriptCore_LIBRARIES
<span class="line-modified"> 118     WebKit::WTF</span>

 119 )
 120 
 121 if (USE_CAPSTONE)
 122     list(APPEND JavaScriptCore_LIBRARIES capstone)
 123 endif ()
 124 
 125 if (ATOMIC_INT64_REQUIRES_LIBATOMIC)
 126     list(APPEND JavaScriptCore_LIBRARIES atomic)
 127 endif ()
 128 
 129 set(JavaScriptCore_SCRIPTS_SOURCES_DIR &quot;${JAVASCRIPTCORE_DIR}/Scripts&quot;)
 130 
 131 # Globbing relies on the fact that generator-specific file names are prefixed with their directory.
 132 # Top-level scripts should have a file extension, since they are invoked during the build.
 133 
 134 set(JavaScriptCore_SCRIPTS_SOURCES_PATHS
 135     ${JavaScriptCore_SCRIPTS_SOURCES_DIR}/*.pl
 136     ${JavaScriptCore_SCRIPTS_SOURCES_DIR}/*.py
 137     ${JavaScriptCore_SCRIPTS_SOURCES_DIR}/wkbuiltins/builtins*.py
 138     ${JavaScriptCore_SCRIPTS_SOURCES_DIR}/wkbuiltins/wkbuiltins.py
 139 )
 140 





 141 # The directory flattening performed below mirrors what the Mac port does with private headers.
 142 
 143 file(GLOB JavaScriptCore_SCRIPTS_SOURCES ${JavaScriptCore_SCRIPTS_SOURCES_PATHS})
 144 
 145 foreach (_file ${JavaScriptCore_SCRIPTS_SOURCES})
 146     get_filename_component(_script &quot;${_file}&quot; NAME)
 147     add_custom_command(
 148         OUTPUT ${JavaScriptCore_SCRIPTS_DIR}/${_script}
 149         MAIN_DEPENDENCY ${_file}
<span class="line-modified"> 150         WORKING_DIRECTORY ${JavaScriptCore_DERIVED_SOURCES_DIR}</span>
 151         COMMAND ${CMAKE_COMMAND} -E copy_if_different ${_file} ${JavaScriptCore_SCRIPTS_DIR}/${_script}
 152         VERBATIM)
 153     list(APPEND JavaScriptCore_SCRIPTS ${JavaScriptCore_SCRIPTS_DIR}/${_script})
 154 endforeach ()
 155 
 156 set(UDIS_GEN_DEP
 157     disassembler/udis86/optable.xml
 158     disassembler/udis86/ud_itab.py
 159     disassembler/udis86/ud_opcode.py
 160 )
 161 
 162 add_custom_command(
<span class="line-modified"> 163     OUTPUT ${JavaScriptCore_DERIVED_SOURCES_DIR}/udis86_itab.c ${JavaScriptCore_DERIVED_SOURCES_DIR}/udis86_itab.h</span>
 164     DEPENDS ${UDIS_GEN_DEP}
<span class="line-modified"> 165     WORKING_DIRECTORY ${JavaScriptCore_DERIVED_SOURCES_DIR}</span>
<span class="line-modified"> 166     COMMAND ${PYTHON_EXECUTABLE} ${JAVASCRIPTCORE_DIR}/disassembler/udis86/ud_itab.py ${JAVASCRIPTCORE_DIR}/disassembler/udis86/optable.xml ${JavaScriptCore_DERIVED_SOURCES_DIR}</span>
 167     VERBATIM)
 168 
 169 list(APPEND JavaScriptCore_HEADERS
<span class="line-modified"> 170     ${JavaScriptCore_DERIVED_SOURCES_DIR}/udis86_itab.h</span>
 171 )
 172 
 173 set(LLINT_ASM
 174     llint/LowLevelInterpreter.asm
 175     llint/LowLevelInterpreter32_64.asm
 176     llint/LowLevelInterpreter64.asm
 177 )
 178 
 179 set(OFFLINE_ASM
 180     offlineasm/arm.rb
 181     offlineasm/arm64.rb
 182     offlineasm/ast.rb
 183     offlineasm/backends.rb
 184     offlineasm/cloop.rb
 185     offlineasm/config.rb
 186     offlineasm/instructions.rb
 187     offlineasm/mips.rb
 188     offlineasm/offsets.rb
 189     offlineasm/opt.rb
 190     offlineasm/parser.rb
</pre>
<hr />
<pre>
 196     offlineasm/x86.rb
 197 )
 198 
 199 set(GENERATOR
 200     generator/Argument.rb
 201     generator/Assertion.rb
 202     generator/DSL.rb
 203     generator/Fits.rb
 204     generator/GeneratedFile.rb
 205     generator/Metadata.rb
 206     generator/Opcode.rb
 207     generator/OpcodeGroup.rb
 208     generator/Options.rb
 209     generator/Section.rb
 210     generator/Template.rb
 211     generator/Type.rb
 212     generator/main.rb
 213 )
 214 
 215 add_custom_command(
<span class="line-modified"> 216     OUTPUT ${JavaScriptCore_DERIVED_SOURCES_DIR}/Bytecodes.h ${JavaScriptCore_DERIVED_SOURCES_DIR}/InitBytecodes.asm ${JavaScriptCore_DERIVED_SOURCES_DIR}/BytecodeStructs.h ${JavaScriptCore_DERIVED_SOURCES_DIR}/BytecodeIndices.h</span>
 217     MAIN_DEPENDENCY ${JAVASCRIPTCORE_DIR}/generator/main.rb
 218     DEPENDS ${GENERATOR} bytecode/BytecodeList.rb
<span class="line-modified"> 219     COMMAND ${RUBY_EXECUTABLE} ${JAVASCRIPTCORE_DIR}/generator/main.rb --bytecodes_h ${JavaScriptCore_DERIVED_SOURCES_DIR}/Bytecodes.h --init_bytecodes_asm ${JavaScriptCore_DERIVED_SOURCES_DIR}/InitBytecodes.asm --bytecode_structs_h ${JavaScriptCore_DERIVED_SOURCES_DIR}/BytecodeStructs.h --bytecode_indices_h ${JavaScriptCore_DERIVED_SOURCES_DIR}/BytecodeIndices.h ${JAVASCRIPTCORE_DIR}/bytecode/BytecodeList.rb</span>
 220     VERBATIM)
 221 
 222 
 223 if (WTF_OS_MAC_OS_X)
 224     execute_process(COMMAND bash -c &quot;date +&#39;%s&#39;&quot; OUTPUT_VARIABLE BUILD_TIME OUTPUT_STRIP_TRAILING_WHITESPACE)
 225 else ()
<span class="line-modified"> 226     string(TIMESTAMP BUILD_TIME &quot;%s&quot;)</span>
 227 endif ()
 228 
<span class="line-modified"> 229 file(WRITE ${JavaScriptCore_DERIVED_SOURCES_DIR}/BytecodeCacheVersion.h &quot;#define JSC_BYTECODE_CACHE_VERSION ${BUILD_TIME}\n&quot;)</span>
 230 
 231 list(APPEND JavaScriptCore_HEADERS
<span class="line-modified"> 232     ${JavaScriptCore_DERIVED_SOURCES_DIR}/BytecodeCacheVersion.h</span>
<span class="line-modified"> 233     ${JavaScriptCore_DERIVED_SOURCES_DIR}/BytecodeStructs.h</span>
<span class="line-modified"> 234     ${JavaScriptCore_DERIVED_SOURCES_DIR}/Bytecodes.h</span>
 235 )
 236 
 237 if (WIN32)
<span class="line-modified"> 238     set(OFFLINE_ASM_BACKEND &quot;X86_WIN, X86_64_WIN, C_LOOP_WIN&quot;)</span>
 239 else ()
 240     if (WTF_CPU_X86)
 241         set(OFFLINE_ASM_BACKEND &quot;X86&quot;)
 242     elseif (WTF_CPU_X86_64)
 243         set(OFFLINE_ASM_BACKEND &quot;X86_64&quot;)
 244     elseif (WTF_CPU_ARM64)
 245         set(OFFLINE_ASM_BACKEND &quot;ARM64&quot;)
 246     elseif (ARM_THUMB2_DETECTED)
 247         set(OFFLINE_ASM_BACKEND &quot;ARMv7&quot;)
 248     elseif (WTF_CPU_MIPS)
 249         set(OFFLINE_ASM_BACKEND &quot;MIPS&quot;)
 250     endif ()
 251 
 252     if (NOT ENABLE_JIT)
 253         if (ENABLE_C_LOOP)
 254             set(OFFLINE_ASM_BACKEND &quot;C_LOOP&quot;)
 255         endif ()
 256     endif ()
 257 endif ()
 258 
 259 add_custom_command(
<span class="line-modified"> 260     OUTPUT ${JavaScriptCore_DERIVED_SOURCES_DIR}/LLIntDesiredSettings.h</span>
 261     MAIN_DEPENDENCY ${JAVASCRIPTCORE_DIR}/offlineasm/generate_settings_extractor.rb
<span class="line-modified"> 262     DEPENDS ${LLINT_ASM} ${OFFLINE_ASM} ${JavaScriptCore_DERIVED_SOURCES_DIR}/InitBytecodes.asm</span>
<span class="line-modified"> 263     COMMAND ${RUBY_EXECUTABLE} ${JAVASCRIPTCORE_DIR}/offlineasm/generate_settings_extractor.rb -I${JavaScriptCore_DERIVED_SOURCES_DIR}/ ${JAVASCRIPTCORE_DIR}/llint/LowLevelInterpreter.asm ${JavaScriptCore_DERIVED_SOURCES_DIR}/LLIntDesiredSettings.h ${OFFLINE_ASM_BACKEND}</span>
 264     VERBATIM)
 265 
 266 add_custom_command(
<span class="line-modified"> 267     OUTPUT ${JavaScriptCore_DERIVED_SOURCES_DIR}/LLIntDesiredOffsets.h</span>
 268     MAIN_DEPENDENCY ${JAVASCRIPTCORE_DIR}/offlineasm/generate_offset_extractor.rb
<span class="line-modified"> 269     DEPENDS LLIntSettingsExtractor ${LLINT_ASM} ${OFFLINE_ASM} ${JavaScriptCore_DERIVED_SOURCES_DIR}/InitBytecodes.asm</span>
<span class="line-modified"> 270     COMMAND ${RUBY_EXECUTABLE} ${JAVASCRIPTCORE_DIR}/offlineasm/generate_offset_extractor.rb -I${JavaScriptCore_DERIVED_SOURCES_DIR}/ ${JAVASCRIPTCORE_DIR}/llint/LowLevelInterpreter.asm $&lt;TARGET_FILE:LLIntSettingsExtractor&gt; ${JavaScriptCore_DERIVED_SOURCES_DIR}/LLIntDesiredOffsets.h ${OFFLINE_ASM_BACKEND}</span>
 271     VERBATIM)
 272 
 273 # We add the header files directly to the ADD_EXECUTABLE call instead of setting the
 274 # OBJECT_DEPENDS property in LLIntOffsetsExtractor.cpp because generate_offset_extractor.rb and
 275 # generate-bytecode-files may not regenerate the .h files in case the hash it calculates does not change.
 276 # In this case, if some of the dependencies specified in the ADD_CUSTOM_COMMANDs above have
 277 # changed the command will always be called because the mtime of the .h files will
 278 # always be older than that of their dependencies.
 279 # Additionally, setting the OBJECT_DEPENDS property will make the .h files a Makefile
 280 # dependency of both LLIntOffsetsExtractor and LLIntOffsetsExtractor.cpp, so the command will
 281 # actually be run multiple times!
 282 add_executable(LLIntSettingsExtractor
 283     ${JAVASCRIPTCORE_DIR}/llint/LLIntSettingsExtractor.cpp
<span class="line-modified"> 284     ${JavaScriptCore_DERIVED_SOURCES_DIR}/LLIntDesiredSettings.h ${JavaScriptCore_DERIVED_SOURCES_DIR}/Bytecodes.h ${JavaScriptCore_DERIVED_SOURCES_DIR}/BytecodeStructs.h</span>
 285 )
 286 
 287 add_executable(LLIntOffsetsExtractor
 288     ${JAVASCRIPTCORE_DIR}/llint/LLIntOffsetsExtractor.cpp
<span class="line-modified"> 289     ${JavaScriptCore_DERIVED_SOURCES_DIR}/LLIntDesiredOffsets.h ${JavaScriptCore_DERIVED_SOURCES_DIR}/Bytecodes.h ${JavaScriptCore_DERIVED_SOURCES_DIR}/BytecodeStructs.h</span>
 290 )
 291 
<span class="line-modified"> 292 target_link_libraries(LLIntSettingsExtractor WebKit::WTF)</span>
<span class="line-modified"> 293 add_dependencies(LLIntSettingsExtractor JavaScriptCore_CopyHeaders)</span>
<span class="line-modified"> 294 target_link_libraries(LLIntOffsetsExtractor WebKit::WTF)</span>
<span class="line-modified"> 295 add_dependencies(LLIntOffsetsExtractor JavaScriptCore_CopyHeaders)</span>
 296 
 297 # The build system will execute asm.rb every time LLIntOffsetsExtractor&#39;s mtime is newer than
 298 # LLIntAssembly.h&#39;s mtime. The problem we have here is: asm.rb has some built-in optimization
 299 # that generates a checksum of the LLIntOffsetsExtractor binary, if the checksum of the new
 300 # LLIntOffsetsExtractor matches, no output is generated. To make this target consistent and avoid
 301 # running this command for every build, we artificially update LLIntAssembly.h&#39;s mtime (using touch)
 302 # after every asm.rb run.
 303 if (MSVC AND NOT ENABLE_C_LOOP)
 304     set(LLIntOutput LowLevelInterpreterWin.asm)
 305     set(OFFLINE_ASM_ARGS --assembler=MASM)
 306 else ()
 307     set(LLIntOutput LLIntAssembly.h)
 308 endif ()
 309 
 310 add_custom_command(
<span class="line-modified"> 311     OUTPUT ${JavaScriptCore_DERIVED_SOURCES_DIR}/${LLIntOutput}</span>
 312     MAIN_DEPENDENCY ${JAVASCRIPTCORE_DIR}/offlineasm/asm.rb
<span class="line-modified"> 313     DEPENDS LLIntOffsetsExtractor ${LLINT_ASM} ${OFFLINE_ASM} ${JavaScriptCore_DERIVED_SOURCES_DIR}/InitBytecodes.asm</span>
<span class="line-modified"> 314     COMMAND ${RUBY_EXECUTABLE} ${JAVASCRIPTCORE_DIR}/offlineasm/asm.rb -I${JavaScriptCore_DERIVED_SOURCES_DIR}/ ${JAVASCRIPTCORE_DIR}/llint/LowLevelInterpreter.asm $&lt;TARGET_FILE:LLIntOffsetsExtractor&gt; ${JavaScriptCore_DERIVED_SOURCES_DIR}/${LLIntOutput} ${OFFLINE_ASM_ARGS}</span>
<span class="line-modified"> 315     COMMAND ${CMAKE_COMMAND} -E touch_nocreate ${JavaScriptCore_DERIVED_SOURCES_DIR}/${LLIntOutput}</span>
<span class="line-modified"> 316     WORKING_DIRECTORY ${JavaScriptCore_DERIVED_SOURCES_DIR}</span>
 317     VERBATIM)
 318 
 319 # The explanation for not making LLIntAssembly.h part of the OBJECT_DEPENDS property of some of
 320 # the .cpp files below is similar to the one in the previous comment. However, since these .cpp
 321 # files are used to build JavaScriptCore itself, we can just add LLIntAssembly.h to JSC_HEADERS
 322 # since it is used in the add_library() call at the end of this file.
 323 if (MSVC AND NOT ENABLE_C_LOOP)
 324     enable_language(ASM_MASM)
 325     if (CMAKE_SIZEOF_VOID_P EQUAL 4)
 326         # Win32 needs /safeseh with assembly, but Win64 does not.
 327         set(MASM_EXECUTABLE ml)
 328         set(LLINT_MASM_FLAGS /safeseh /c /Fo)
 329     else ()
 330         set(MASM_EXECUTABLE ml64)
 331         set(LLINT_MASM_FLAGS /c /Fo)
 332     endif ()
 333     add_custom_command(
<span class="line-modified"> 334         OUTPUT ${JavaScriptCore_DERIVED_SOURCES_DIR}/LowLevelInterpreterWin.obj</span>
<span class="line-modified"> 335         DEPENDS ${JavaScriptCore_DERIVED_SOURCES_DIR}/LowLevelInterpreterWin.asm</span>
<span class="line-modified"> 336         COMMAND ${MASM_EXECUTABLE} ${LLINT_MASM_FLAGS} ${JavaScriptCore_DERIVED_SOURCES_DIR}/LowLevelInterpreterWin.obj ${JavaScriptCore_DERIVED_SOURCES_DIR}/LowLevelInterpreterWin.asm</span>
 337         VERBATIM)
<span class="line-modified"> 338     list(APPEND JavaScriptCore_SOURCES ${JavaScriptCore_DERIVED_SOURCES_DIR}/LowLevelInterpreterWin.obj)</span>
 339 else ()
 340     list(APPEND JavaScriptCore_HEADERS
<span class="line-modified"> 341         ${JavaScriptCore_DERIVED_SOURCES_DIR}/LLIntAssembly.h</span>
 342     )
 343 endif ()
 344 
 345 # WebAssembly generator
 346 
 347 macro(GENERATE_PYTHON _generator _additional_deps _input _output)
 348     add_custom_command(
 349         OUTPUT ${_output}
 350         MAIN_DEPENDENCY ${_generator}
 351         DEPENDS ${_input} ${_additional_deps}
 352         COMMAND ${PYTHON_EXECUTABLE} ${_generator} ${_input} ${_output}
 353         VERBATIM)
 354     list(APPEND JavaScriptCore_HEADERS ${_output})
 355     WEBKIT_ADD_SOURCE_DEPENDENCIES(${_input} ${_output})
 356 endmacro()
<span class="line-modified"> 357 GENERATE_PYTHON(${CMAKE_CURRENT_SOURCE_DIR}/wasm/generateWasmOpsHeader.py ${CMAKE_CURRENT_SOURCE_DIR}/wasm/generateWasm.py ${CMAKE_CURRENT_SOURCE_DIR}/wasm/wasm.json ${JavaScriptCore_DERIVED_SOURCES_DIR}/WasmOps.h)</span>
<span class="line-modified"> 358 GENERATE_PYTHON(${CMAKE_CURRENT_SOURCE_DIR}/wasm/generateWasmValidateInlinesHeader.py ${CMAKE_CURRENT_SOURCE_DIR}/wasm/generateWasm.py ${CMAKE_CURRENT_SOURCE_DIR}/wasm/wasm.json ${JavaScriptCore_DERIVED_SOURCES_DIR}/WasmValidateInlines.h)</span>
<span class="line-modified"> 359 GENERATE_PYTHON(${CMAKE_CURRENT_SOURCE_DIR}/wasm/generateWasmB3IRGeneratorInlinesHeader.py ${CMAKE_CURRENT_SOURCE_DIR}/wasm/generateWasm.py ${CMAKE_CURRENT_SOURCE_DIR}/wasm/wasm.json ${JavaScriptCore_DERIVED_SOURCES_DIR}/WasmB3IRGeneratorInlines.h)</span>
 360 
 361 # LUT generator
 362 
 363 set(HASH_LUT_GENERATOR ${CMAKE_CURRENT_SOURCE_DIR}/create_hash_table)
 364 macro(GENERATE_HASH_LUT _input _output)
 365     add_custom_command(
 366         OUTPUT ${_output}
 367         MAIN_DEPENDENCY ${HASH_LUT_GENERATOR}
 368         DEPENDS ${_input}
 369         COMMAND ${PERL_EXECUTABLE} ${HASH_LUT_GENERATOR} ${_input} &gt; ${_output}
 370         VERBATIM)
 371     list(APPEND JavaScriptCore_HEADERS ${_output})
 372     WEBKIT_ADD_SOURCE_DEPENDENCIES(${_input} ${_output})
 373 endmacro()
 374 
 375 # GENERATOR 1-A: LUT creator
 376 
 377 foreach (_file ${JavaScriptCore_OBJECT_LUT_SOURCES})
 378     get_filename_component(_name ${_file} NAME_WE)
<span class="line-modified"> 379     GENERATE_HASH_LUT(${CMAKE_CURRENT_SOURCE_DIR}/${_file} ${JavaScriptCore_DERIVED_SOURCES_DIR}/${_name}.lut.h)</span>
 380 endforeach ()
 381 
 382 set(JavaScriptCore_PUBLIC_FRAMEWORK_HEADERS
 383     API/JSBase.h
 384     API/JSContextRef.h
 385     API/JSObjectRef.h
 386     API/JSStringRef.h
 387     API/JSTypedArray.h
 388     API/JSValueRef.h
 389     API/JavaScript.h
 390     API/WebKitAvailability.h
 391 )
 392 
 393 set(JavaScriptCore_PRIVATE_FRAMEWORK_HEADERS
<span class="line-added"> 394     ${JavaScriptCore_DERIVED_SOURCES_DIR}/Bytecodes.h</span>
<span class="line-added"> 395     ${JavaScriptCore_DERIVED_SOURCES_DIR}/JSCBuiltins.h</span>
<span class="line-added"> 396 </span>
<span class="line-added"> 397     ${JavaScriptCore_DERIVED_SOURCES_DIR}/inspector/InspectorBackendDispatchers.h</span>
<span class="line-added"> 398     ${JavaScriptCore_DERIVED_SOURCES_DIR}/inspector/InspectorFrontendDispatchers.h</span>
<span class="line-added"> 399     ${JavaScriptCore_DERIVED_SOURCES_DIR}/inspector/InspectorProtocolObjects.h</span>
<span class="line-added"> 400 </span>
 401     API/APICallbackFunction.h
 402     API/APICast.h
 403     API/APIUtils.h
 404     API/JSAPIValueWrapper.h
 405     API/JSAPIWrapperObject.h
 406     API/JSBasePrivate.h
 407     API/JSCTestRunnerUtils.h
 408     API/JSCallbackConstructor.h
 409     API/JSCallbackFunction.h
 410     API/JSCallbackObject.h
 411     API/JSCallbackObjectFunctions.h
 412     API/JSClassRef.h
 413     API/JSContextInternal.h
 414     API/JSContextPrivate.h
 415     API/JSContextRefInspectorSupport.h
 416     API/JSContextRefInternal.h
 417     API/JSContextRefPrivate.h
 418     API/JSHeapFinalizerPrivate.h
 419     API/JSManagedValueInternal.h
 420     API/JSMarkingConstraintPrivate.h
 421     API/JSObjectRefPrivate.h
 422     API/JSRemoteInspector.h
 423     API/JSRetainPtr.h
 424     API/JSScriptRefPrivate.h
 425     API/JSStringRefPrivate.h
 426     API/JSValueInternal.h
<span class="line-added"> 427     API/JSValuePrivate.h</span>
 428     API/JSVirtualMachineInternal.h
 429     API/JSWeakObjectMapRefInternal.h
 430     API/JSWeakObjectMapRefPrivate.h
 431     API/JSWeakPrivate.h
 432     API/JSWrapperMap.h
 433     API/ObjCCallbackFunction.h
 434     API/ObjcRuntimeExtras.h
 435     API/OpaqueJSString.h
 436 
 437     assembler/ARM64Assembler.h
<span class="line-added"> 438     assembler/ARM64Registers.h</span>
 439     assembler/ARMv7Assembler.h
<span class="line-added"> 440     assembler/ARMv7Registers.h</span>
 441     assembler/AbortReason.h
 442     assembler/AbstractMacroAssembler.h
 443     assembler/AssemblerBuffer.h
 444     assembler/AssemblerBufferWithConstantPool.h
 445     assembler/AssemblerCommon.h
 446     assembler/CPU.h
 447     assembler/CodeLocation.h
 448     assembler/LinkBuffer.h
 449     assembler/MIPSAssembler.h
<span class="line-added"> 450     assembler/MIPSRegisters.h</span>
 451     assembler/MacroAssembler.h
 452     assembler/MacroAssemblerARM64.h
 453     assembler/MacroAssemblerARMv7.h
 454     assembler/MacroAssemblerCodeRef.h
 455     assembler/MacroAssemblerHelpers.h
 456     assembler/MacroAssemblerMIPS.h
 457     assembler/MacroAssemblerX86.h
 458     assembler/MacroAssemblerX86Common.h
 459     assembler/MacroAssemblerX86_64.h
 460     assembler/Printer.h
<span class="line-added"> 461     assembler/RegisterInfo.h</span>
 462     assembler/X86Assembler.h
<span class="line-added"> 463     assembler/X86Registers.h</span>
<span class="line-added"> 464     assembler/X86_64Registers.h</span>
 465 
 466     bindings/ScriptFunctionCall.h
 467     bindings/ScriptObject.h
 468     bindings/ScriptValue.h
 469 
 470     builtins/BuiltinNames.h
 471     builtins/BuiltinUtils.h
 472 
 473     bytecode/ArrayAllocationProfile.h
 474     bytecode/ArrayProfile.h
 475     bytecode/ByValInfo.h
 476     bytecode/BytecodeConventions.h
 477     bytecode/BytecodeIntrinsicRegistry.h
 478     bytecode/CallEdge.h
 479     bytecode/CallLinkInfo.h
 480     bytecode/CallMode.h
 481     bytecode/CallVariant.h
 482     bytecode/CodeBlock.h
 483     bytecode/CodeBlockHash.h
 484     bytecode/CodeOrigin.h
</pre>
<hr />
<pre>
 566     heap/DeleteAllCodeEffort.h
 567     heap/DestructionMode.h
 568     heap/FastMallocAlignedMemoryAllocator.h
 569     heap/FreeList.h
 570     heap/FreeListInlines.h
 571     heap/GCActivityCallback.h
 572     heap/GCAssertions.h
 573     heap/GCConductor.h
 574     heap/GCDeferralContext.h
 575     heap/GCIncomingRefCounted.h
 576     heap/GCIncomingRefCountedInlines.h
 577     heap/GCIncomingRefCountedSet.h
 578     heap/GCLogging.h
 579     heap/GCRequest.h
 580     heap/GCSegmentedArray.h
 581     heap/Handle.h
 582     heap/HandleBlock.h
 583     heap/HandleSet.h
 584     heap/HandleTypes.h
 585     heap/Heap.h
<span class="line-added"> 586     heap/HeapAnalyzer.h</span>
 587     heap/HeapCell.h
 588     heap/HeapCellInlines.h
 589     heap/HeapCellType.h
 590     heap/HeapFinalizerCallback.h
 591     heap/HeapInlines.h
 592     heap/HeapObserver.h
 593     heap/HeapSnapshotBuilder.h
 594     heap/IncrementalSweeper.h
 595     heap/IsoCellSet.h
 596     heap/IsoSubspace.h
 597     heap/IsoSubspaceInlines.h
 598     heap/IsoSubspacePerVM.h
 599     heap/LargeAllocation.h
 600     heap/LocalAllocator.h
 601     heap/LocalAllocatorInlines.h
 602     heap/LockDuringMarking.h
 603     heap/MachineStackMarker.h
 604     heap/MarkStack.h
 605     heap/MarkedBlock.h
 606     heap/MarkedBlockInlines.h
 607     heap/MarkedBlockSet.h
 608     heap/MarkedSpace.h
 609     heap/MarkingConstraint.h
 610     heap/MutatorState.h
<span class="line-added"> 611     heap/PackedCellPtr.h</span>
 612     heap/RegisterState.h
 613     heap/RunningScope.h
 614     heap/SimpleMarkingConstraint.h
 615     heap/SlotVisitor.h
 616     heap/SlotVisitorInlines.h
 617     heap/Strong.h
 618     heap/StrongInlines.h
 619     heap/Subspace.h
 620     heap/SubspaceInlines.h
 621     heap/Synchronousness.h
 622     heap/TinyBloomFilter.h
 623     heap/VisitRaceKey.h
 624     heap/Weak.h
 625     heap/WeakBlock.h
 626     heap/WeakHandleOwner.h
 627     heap/WeakImpl.h
 628     heap/WeakInlines.h
 629     heap/WeakSet.h
 630     heap/WeakSetInlines.h
 631 
</pre>
<hr />
<pre>
 742     profiler/ProfilerUID.h
 743 
 744     runtime/AbstractModuleRecord.h
 745     runtime/ArgList.h
 746     runtime/ArityCheckMode.h
 747     runtime/ArrayBuffer.h
 748     runtime/ArrayBufferSharingMode.h
 749     runtime/ArrayBufferView.h
 750     runtime/ArrayConventions.h
 751     runtime/ArrayPrototype.h
 752     runtime/ArrayStorage.h
 753     runtime/AuxiliaryBarrier.h
 754     runtime/AuxiliaryBarrierInlines.h
 755     runtime/BasicBlockLocation.h
 756     runtime/BatchedTransitionOptimizer.h
 757     runtime/BigIntPrototype.h
 758     runtime/BooleanObject.h
 759     runtime/BooleanPrototype.h
 760     runtime/Butterfly.h
 761     runtime/ButterflyInlines.h
<span class="line-added"> 762     runtime/BytecodeCacheError.h</span>
<span class="line-added"> 763     runtime/CachePayload.h</span>
<span class="line-added"> 764     runtime/CacheUpdate.h</span>
<span class="line-added"> 765     runtime/CachedBytecode.h</span>
<span class="line-added"> 766     runtime/CachedTypes.h</span>
 767     runtime/CagedBarrierPtr.h
 768     runtime/CallData.h
 769     runtime/CatchScope.h
 770     runtime/ClassInfo.h
 771     runtime/CodeSpecializationKind.h
 772     runtime/CommonIdentifiers.h
 773     runtime/CompilationResult.h
 774     runtime/Completion.h
 775     runtime/ConcurrentJSLock.h
 776     runtime/ConfigFile.h
 777     runtime/ConsoleClient.h
 778     runtime/ConsoleTypes.h
 779     runtime/ConstantMode.h
 780     runtime/ConstructAbility.h
 781     runtime/ConstructData.h
 782     runtime/ControlFlowProfiler.h
 783     runtime/CustomGetterSetter.h
 784     runtime/DOMAnnotation.h
 785     runtime/DOMAttributeGetterSetter.h
 786     runtime/DataView.h
</pre>
<hr />
<pre>
 795     runtime/EnumerationMode.h
 796     runtime/Error.h
 797     runtime/ErrorHandlingScope.h
 798     runtime/ErrorInstance.h
 799     runtime/ErrorPrototype.h
 800     runtime/ErrorType.h
 801     runtime/EvalExecutable.h
 802     runtime/Exception.h
 803     runtime/ExceptionEventLocation.h
 804     runtime/ExceptionHelpers.h
 805     runtime/ExceptionScope.h
 806     runtime/ExecutableBase.h
 807     runtime/ExecutableBaseInlines.h
 808     runtime/Float32Array.h
 809     runtime/Float64Array.h
 810     runtime/FunctionConstructor.h
 811     runtime/FunctionExecutable.h
 812     runtime/FunctionHasExecutedCache.h
 813     runtime/FunctionPrototype.h
 814     runtime/FunctionRareData.h
<span class="line-added"> 815     runtime/FuzzerAgent.h</span>
 816     runtime/GenericOffset.h
 817     runtime/GenericTypedArrayView.h
 818     runtime/GenericTypedArrayViewInlines.h
 819     runtime/GetPutInfo.h
<span class="line-added"> 820     runtime/GlobalExecutable.h</span>
 821     runtime/HashMapImpl.h
 822     runtime/Identifier.h
 823     runtime/IdentifierInlines.h
 824     runtime/IndexingHeader.h
 825     runtime/IndexingHeaderInlines.h
 826     runtime/IndexingType.h
 827     runtime/InferredValue.h
 828     runtime/InitializeThreading.h
 829     runtime/Int16Array.h
 830     runtime/Int32Array.h
 831     runtime/Int8Array.h
 832     runtime/InternalFunction.h
 833     runtime/Intrinsic.h
 834     runtime/IterationKind.h
 835     runtime/IterationStatus.h
 836     runtime/IteratorOperations.h
 837     runtime/IteratorPrototype.h
 838     runtime/JSArray.h
 839     runtime/JSArrayBuffer.h
 840     runtime/JSArrayBufferPrototype.h
</pre>
<hr />
<pre>
 870     runtime/JSLock.h
 871     runtime/JSMap.h
 872     runtime/JSMapIterator.h
 873     runtime/JSModuleLoader.h
 874     runtime/JSModuleRecord.h
 875     runtime/JSNativeStdFunction.h
 876     runtime/JSNonDestructibleProxy.h
 877     runtime/JSONObject.h
 878     runtime/JSObject.h
 879     runtime/JSObjectInlines.h
 880     runtime/JSPromise.h
 881     runtime/JSPromiseConstructor.h
 882     runtime/JSPromiseDeferred.h
 883     runtime/JSPropertyNameEnumerator.h
 884     runtime/JSProxy.h
 885     runtime/JSRunLoopTimer.h
 886     runtime/JSScope.h
 887     runtime/JSScriptFetchParameters.h
 888     runtime/JSScriptFetcher.h
 889     runtime/JSSegmentedVariableObject.h

 890     runtime/JSSet.h
 891     runtime/JSSetIterator.h
 892     runtime/JSSourceCode.h
 893     runtime/JSString.h
 894     runtime/JSStringInlines.h
 895     runtime/JSSymbolTableObject.h
 896     runtime/JSType.h
 897     runtime/JSTypeInfo.h
 898     runtime/JSTypedArrays.h
 899     runtime/JSWithScope.h
 900     runtime/JSWrapperObject.h
 901     runtime/LazyClassStructure.h
 902     runtime/LazyProperty.h
<span class="line-added"> 903     runtime/LeafExecutable.h</span>
 904     runtime/Lookup.h
 905     runtime/MatchResult.h
 906     runtime/MathCommon.h
 907     runtime/MemoryStatistics.h
 908     runtime/Microtask.h
 909     runtime/ModuleProgramExecutable.h
 910     runtime/NativeExecutable.h
 911     runtime/NativeFunction.h
 912     runtime/NumberObject.h
 913     runtime/NumberPrototype.h
 914     runtime/NumericStrings.h
 915     runtime/ObjectConstructor.h
 916     runtime/ObjectInitializationScope.h
 917     runtime/ObjectPrototype.h
 918     runtime/Operations.h
 919     runtime/Options.h
 920     runtime/ParseInt.h
 921     runtime/PrivateName.h
 922     runtime/ProgramExecutable.h
 923     runtime/PromiseDeferredTimer.h
 924     runtime/PropertyDescriptor.h
 925     runtime/PropertyMapHashTable.h
 926     runtime/PropertyName.h
 927     runtime/PropertyNameArray.h
 928     runtime/PropertyOffset.h
 929     runtime/PropertySlot.h
 930     runtime/PropertyStorage.h
 931     runtime/Protect.h
 932     runtime/PrototypeKey.h
 933     runtime/PureNaN.h
 934     runtime/PutDirectIndexMode.h
 935     runtime/PutPropertySlot.h
 936     runtime/RegExp.h
 937     runtime/RegExpCachedResult.h
 938     runtime/RegExpGlobalData.h
 939     runtime/RegExpKey.h
 940     runtime/RegExpObject.h
<span class="line-added"> 941     runtime/RegExpStringIteratorPrototype.h</span>
 942     runtime/RuntimeFlags.h
 943     runtime/RuntimeType.h
 944     runtime/SamplingProfiler.h
 945     runtime/ScopeOffset.h
 946     runtime/ScopedArgumentsTable.h
 947     runtime/ScriptExecutable.h
 948     runtime/ScriptFetchParameters.h
 949     runtime/ScriptFetcher.h
 950     runtime/SlowPathReturnType.h
 951     runtime/SmallStrings.h
 952     runtime/SourceOrigin.h
 953     runtime/SparseArrayValueMap.h
 954     runtime/StackAlignment.h
 955     runtime/StackFrame.h
 956     runtime/StringObject.h
 957     runtime/StringPrototype.h
 958     runtime/Structure.h
 959     runtime/StructureCache.h
 960     runtime/StructureChain.h
 961     runtime/StructureIDBlob.h
 962     runtime/StructureIDTable.h
 963     runtime/StructureInlines.h
 964     runtime/StructureRareData.h
 965     runtime/StructureRareDataInlines.h
 966     runtime/StructureTransitionTable.h
 967     runtime/SubspaceAccess.h
 968     runtime/Symbol.h
 969     runtime/SymbolPrototype.h
 970     runtime/SymbolTable.h
<span class="line-added"> 971     runtime/SymbolTableOrScopeDepth.h</span>
 972     runtime/TemplateObjectDescriptor.h
 973     runtime/TestRunnerUtils.h
 974     runtime/ThrowScope.h
 975     runtime/ToNativeFromValue.h
 976     runtime/TypeError.h
 977     runtime/TypeSet.h
 978     runtime/TypedArrayAdaptors.h
 979     runtime/TypedArrayController.h
 980     runtime/TypedArrayInlines.h
 981     runtime/TypedArrayType.h
 982     runtime/TypedArrays.h
 983     runtime/TypeofType.h
 984     runtime/Uint16Array.h
 985     runtime/Uint32Array.h
 986     runtime/Uint8Array.h
 987     runtime/Uint8ClampedArray.h
 988     runtime/VM.h
 989     runtime/VMEntryScope.h
 990     runtime/VMInlines.h
 991     runtime/VMTraps.h
 992     runtime/VarOffset.h
 993     runtime/Watchdog.h
 994     runtime/WeakGCMap.h
 995     runtime/WeakGCMapInlines.h
 996     runtime/WriteBarrier.h
 997     runtime/WriteBarrierInlines.h
 998 
<span class="line-added"> 999     wasm/WasmCapabilities.h</span>
1000     wasm/WasmCodeBlock.h
<span class="line-added">1001     wasm/WasmCompilationMode.h</span>
1002     wasm/WasmContext.h
1003     wasm/WasmEmbedder.h
1004     wasm/WasmExceptionType.h
1005     wasm/WasmFaultSignalHandler.h
1006     wasm/WasmIndexOrName.h
1007     wasm/WasmMemory.h
1008     wasm/WasmMemoryMode.h
1009     wasm/WasmModule.h
1010     wasm/WasmName.h
1011     wasm/WasmNameSection.h
1012     wasm/WasmPageCount.h
1013     wasm/WasmTierUpCount.h
1014 
<span class="line-added">1015     wasm/js/JSWebAssembly.h</span>
1016     wasm/js/JSWebAssemblyModule.h

1017 
1018 
1019     yarr/RegularExpression.h
1020     yarr/Yarr.h
1021     yarr/YarrErrorCode.h
<span class="line-added">1022     yarr/YarrFlags.h</span>
1023     yarr/YarrInterpreter.h
1024     yarr/YarrJIT.h
1025     yarr/YarrParser.h
1026     yarr/YarrPattern.h
1027     yarr/YarrUnicodeProperties.h
1028 )
1029 
1030 # GENERATOR 1-B: particular LUT creator (for 1 file only)
<span class="line-modified">1031 GENERATE_HASH_LUT(${CMAKE_CURRENT_SOURCE_DIR}/parser/Keywords.table ${JavaScriptCore_DERIVED_SOURCES_DIR}/Lexer.lut.h)</span>
1032 
<span class="line-modified">1033 file(MAKE_DIRECTORY ${JavaScriptCore_DERIVED_SOURCES_DIR}/yarr)</span>
1034 
1035 #GENERATOR: &quot;RegExpJitTables.h&quot;: tables used by Yarr
1036 add_custom_command(
<span class="line-modified">1037     OUTPUT ${JavaScriptCore_DERIVED_SOURCES_DIR}/yarr/RegExpJitTables.h</span>
1038     MAIN_DEPENDENCY ${CMAKE_CURRENT_SOURCE_DIR}/yarr/create_regex_tables
<span class="line-modified">1039     COMMAND ${PYTHON_EXECUTABLE} ${CMAKE_CURRENT_SOURCE_DIR}/yarr/create_regex_tables ${JavaScriptCore_DERIVED_SOURCES_DIR}/yarr/RegExpJitTables.h</span>
1040     VERBATIM)
<span class="line-modified">1041 list(APPEND JavaScriptCore_HEADERS ${JavaScriptCore_DERIVED_SOURCES_DIR}/yarr/RegExpJitTables.h)</span>
<span class="line-modified">1042 WEBKIT_ADD_SOURCE_DEPENDENCIES(${CMAKE_CURRENT_SOURCE_DIR}/yarr/YarrPattern.cpp ${JavaScriptCore_DERIVED_SOURCES_DIR}/yarr/RegExpJitTables.h)</span>
1043 
1044 add_custom_command(
<span class="line-modified">1045     OUTPUT ${JavaScriptCore_DERIVED_SOURCES_DIR}/yarr/UnicodePatternTables.h</span>
1046     MAIN_DEPENDENCY ${JAVASCRIPTCORE_DIR}/yarr/generateYarrUnicodePropertyTables.py
1047     DEPENDS ${JAVASCRIPTCORE_DIR}/yarr/hasher.py ${JAVASCRIPTCORE_DIR}/ucd/DerivedBinaryProperties.txt ${JAVASCRIPTCORE_DIR}/ucd/DerivedCoreProperties.txt ${JAVASCRIPTCORE_DIR}/ucd/DerivedNormalizationProps.txt ${JAVASCRIPTCORE_DIR}/ucd/PropList.txt ${JAVASCRIPTCORE_DIR}/ucd/PropertyAliases.txt ${JAVASCRIPTCORE_DIR}/ucd/PropertyValueAliases.txt ${JAVASCRIPTCORE_DIR}/ucd/ScriptExtensions.txt ${JAVASCRIPTCORE_DIR}/ucd/Scripts.txt ${JAVASCRIPTCORE_DIR}/ucd/UnicodeData.txt ${JAVASCRIPTCORE_DIR}/ucd/emoji-data.txt
<span class="line-modified">1048     COMMAND ${PYTHON_EXECUTABLE} ${JAVASCRIPTCORE_DIR}/yarr/generateYarrUnicodePropertyTables.py ${JAVASCRIPTCORE_DIR}/ucd ${JavaScriptCore_DERIVED_SOURCES_DIR}/yarr/UnicodePatternTables.h</span>
1049     VERBATIM)
<span class="line-modified">1050 list(APPEND JavaScriptCore_HEADERS ${JavaScriptCore_DERIVED_SOURCES_DIR}/yarr/UnicodePatternTables.h)</span>
<span class="line-modified">1051 WEBKIT_ADD_SOURCE_DEPENDENCIES(${CMAKE_CURRENT_SOURCE_DIR}/yarr/UnicodePatternTables.cpp ${JavaScriptCore_DERIVED_SOURCES_DIR}/yarr/UnicodePatternTables.h)</span>
1052 
1053 add_custom_command(
<span class="line-modified">1054     OUTPUT ${JavaScriptCore_DERIVED_SOURCES_DIR}/yarr/YarrCanonicalizeUnicode.cpp</span>
1055     MAIN_DEPENDENCY ${JAVASCRIPTCORE_DIR}/yarr/generateYarrCanonicalizeUnicode
1056     DEPENDS ${JAVASCRIPTCORE_DIR}/ucd/CaseFolding.txt
<span class="line-modified">1057     COMMAND ${PYTHON_EXECUTABLE} ${JAVASCRIPTCORE_DIR}/yarr/generateYarrCanonicalizeUnicode ${JAVASCRIPTCORE_DIR}/ucd/CaseFolding.txt ${JavaScriptCore_DERIVED_SOURCES_DIR}/yarr/YarrCanonicalizeUnicode.cpp</span>
1058     VERBATIM)
1059 
1060 #GENERATOR: &quot;IntlCanonicalizeLanguage.h&quot;: tables used by Intl
1061 add_custom_command(
<span class="line-modified">1062     OUTPUT ${JavaScriptCore_DERIVED_SOURCES_DIR}/IntlCanonicalizeLanguage.h</span>
1063     MAIN_DEPENDENCY ${JAVASCRIPTCORE_DIR}/Scripts/generateIntlCanonicalizeLanguage.py
1064     DEPENDS ${JAVASCRIPTCORE_DIR}/ucd/language-subtag-registry.txt
<span class="line-modified">1065     COMMAND ${PYTHON_EXECUTABLE} ${JAVASCRIPTCORE_DIR}/Scripts/generateIntlCanonicalizeLanguage.py ${JAVASCRIPTCORE_DIR}/ucd/language-subtag-registry.txt ${JavaScriptCore_DERIVED_SOURCES_DIR}/IntlCanonicalizeLanguage.h</span>
1066     VERBATIM)
<span class="line-modified">1067 list(APPEND JavaScriptCore_HEADERS ${JavaScriptCore_DERIVED_SOURCES_DIR}/IntlCanonicalizeLanguage.h)</span>
<span class="line-modified">1068 WEBKIT_ADD_SOURCE_DEPENDENCIES(${CMAKE_CURRENT_SOURCE_DIR}/runtime/IntlObject.cpp ${JavaScriptCore_DERIVED_SOURCES_DIR}/IntlCanonicalizeLanguage.h)</span>
1069 
1070 #GENERATOR: &quot;KeywordLookup.h&quot;: keyword decision tree used by the lexer
1071 add_custom_command(
<span class="line-modified">1072     OUTPUT ${JavaScriptCore_DERIVED_SOURCES_DIR}/KeywordLookup.h</span>
1073     MAIN_DEPENDENCY ${CMAKE_CURRENT_SOURCE_DIR}/KeywordLookupGenerator.py
1074     DEPENDS ${CMAKE_CURRENT_SOURCE_DIR}/parser/Keywords.table
<span class="line-modified">1075     COMMAND ${PYTHON_EXECUTABLE} ${CMAKE_CURRENT_SOURCE_DIR}/KeywordLookupGenerator.py ${CMAKE_CURRENT_SOURCE_DIR}/parser/Keywords.table &gt; ${JavaScriptCore_DERIVED_SOURCES_DIR}/KeywordLookup.h</span>
1076     VERBATIM)
<span class="line-modified">1077 list(APPEND JavaScriptCore_HEADERS ${JavaScriptCore_DERIVED_SOURCES_DIR}/KeywordLookup.h)</span>
<span class="line-modified">1078 WEBKIT_ADD_SOURCE_DEPENDENCIES(${CMAKE_CURRENT_SOURCE_DIR}/parser/Lexer.cpp ${JavaScriptCore_DERIVED_SOURCES_DIR}/KeywordLookup.h)</span>
1079 
1080 
1081 # Inspector Interfaces
1082 
1083 set(JavaScriptCore_INSPECTOR_SCRIPTS_DIR &quot;${JAVASCRIPTCORE_DIR}/inspector/scripts&quot;)
1084 
1085 set(JavaScriptCore_INSPECTOR_PROTOCOL_SCRIPTS
1086     ${JavaScriptCore_INSPECTOR_SCRIPTS_DIR}/generate-inspector-protocol-bindings.py
1087     ${JavaScriptCore_INSPECTOR_SCRIPTS_DIR}/codegen/cpp_generator.py
1088     ${JavaScriptCore_INSPECTOR_SCRIPTS_DIR}/codegen/cpp_generator_templates.py
1089     ${JavaScriptCore_INSPECTOR_SCRIPTS_DIR}/codegen/generate_js_backend_commands.py
1090     ${JavaScriptCore_INSPECTOR_SCRIPTS_DIR}/codegen/generate_cpp_backend_dispatcher_header.py
1091     ${JavaScriptCore_INSPECTOR_SCRIPTS_DIR}/codegen/generate_cpp_backend_dispatcher_implementation.py
1092     ${JavaScriptCore_INSPECTOR_SCRIPTS_DIR}/codegen/generate_cpp_frontend_dispatcher_header.py
1093     ${JavaScriptCore_INSPECTOR_SCRIPTS_DIR}/codegen/generate_cpp_frontend_dispatcher_implementation.py
1094     ${JavaScriptCore_INSPECTOR_SCRIPTS_DIR}/codegen/generate_cpp_protocol_types_header.py
1095     ${JavaScriptCore_INSPECTOR_SCRIPTS_DIR}/codegen/generate_cpp_protocol_types_implementation.py
1096     ${JavaScriptCore_INSPECTOR_SCRIPTS_DIR}/codegen/generator.py
1097     ${JavaScriptCore_INSPECTOR_SCRIPTS_DIR}/codegen/generator_templates.py
1098     ${JavaScriptCore_INSPECTOR_SCRIPTS_DIR}/codegen/__init__.py
1099     ${JavaScriptCore_INSPECTOR_SCRIPTS_DIR}/codegen/models.py
1100 )
1101 
1102 set(JavaScriptCore_INSPECTOR_DOMAINS
1103     ${JAVASCRIPTCORE_DIR}/inspector/protocol/ApplicationCache.json
1104     ${JAVASCRIPTCORE_DIR}/inspector/protocol/Audit.json
1105     ${JAVASCRIPTCORE_DIR}/inspector/protocol/CSS.json
1106     ${JAVASCRIPTCORE_DIR}/inspector/protocol/Canvas.json
1107     ${JAVASCRIPTCORE_DIR}/inspector/protocol/Console.json
1108     ${JAVASCRIPTCORE_DIR}/inspector/protocol/DOM.json
1109     ${JAVASCRIPTCORE_DIR}/inspector/protocol/DOMDebugger.json
1110     ${JAVASCRIPTCORE_DIR}/inspector/protocol/DOMStorage.json
1111     ${JAVASCRIPTCORE_DIR}/inspector/protocol/Database.json
1112     ${JAVASCRIPTCORE_DIR}/inspector/protocol/Debugger.json
1113     ${JAVASCRIPTCORE_DIR}/inspector/protocol/GenericTypes.json
1114     ${JAVASCRIPTCORE_DIR}/inspector/protocol/Heap.json
1115     ${JAVASCRIPTCORE_DIR}/inspector/protocol/Inspector.json
1116     ${JAVASCRIPTCORE_DIR}/inspector/protocol/LayerTree.json
1117     ${JAVASCRIPTCORE_DIR}/inspector/protocol/Network.json

1118     ${JAVASCRIPTCORE_DIR}/inspector/protocol/Page.json
1119     ${JAVASCRIPTCORE_DIR}/inspector/protocol/Recording.json
1120     ${JAVASCRIPTCORE_DIR}/inspector/protocol/Runtime.json
1121     ${JAVASCRIPTCORE_DIR}/inspector/protocol/ScriptProfiler.json
1122     ${JAVASCRIPTCORE_DIR}/inspector/protocol/Security.json
1123     ${JAVASCRIPTCORE_DIR}/inspector/protocol/Target.json
1124     ${JAVASCRIPTCORE_DIR}/inspector/protocol/Timeline.json
1125     ${JAVASCRIPTCORE_DIR}/inspector/protocol/Worker.json
1126 )
1127 
1128 if (ENABLE_INDEXED_DATABASE)
1129     list(APPEND JavaScriptCore_INSPECTOR_DOMAINS
1130         ${JAVASCRIPTCORE_DIR}/inspector/protocol/IndexedDB.json
1131     )
1132 endif ()
1133 
1134 if (ENABLE_RESOURCE_USAGE)
1135     list(APPEND JavaScriptCore_INSPECTOR_DOMAINS
1136         ${JAVASCRIPTCORE_DIR}/inspector/protocol/CPUProfiler.json
1137         ${JAVASCRIPTCORE_DIR}/inspector/protocol/Memory.json
1138     )
1139 endif ()
1140 
1141 if (ENABLE_SERVICE_WORKER)
1142     list(APPEND JavaScriptCore_INSPECTOR_DOMAINS
1143         ${JAVASCRIPTCORE_DIR}/inspector/protocol/ServiceWorker.json
1144     )
1145 endif ()
1146 
1147 add_custom_command(
<span class="line-modified">1148     OUTPUT ${JavaScriptCore_DERIVED_SOURCES_DIR}/CombinedDomains.json</span>
1149     MAIN_DEPENDENCY ${JavaScriptCore_SCRIPTS_DIR}/generate-combined-inspector-json.py
1150     DEPENDS ${JavaScriptCore_INSPECTOR_DOMAINS}
<span class="line-modified">1151     COMMAND ${PYTHON_EXECUTABLE} ${JavaScriptCore_SCRIPTS_DIR}/generate-combined-inspector-json.py ${JavaScriptCore_INSPECTOR_DOMAINS} &gt; ${JavaScriptCore_DERIVED_SOURCES_DIR}/CombinedDomains.json</span>
1152     VERBATIM)
1153 
1154 # Inspector Backend Dispatchers, Frontend Dispatchers, Type Builders
1155 file(MAKE_DIRECTORY ${DERIVED_SOURCES_WEBINSPECTORUI_DIR}/UserInterface/Protocol)
<span class="line-modified">1156 file(MAKE_DIRECTORY ${JavaScriptCore_DERIVED_SOURCES_DIR}/inspector)</span>
1157 add_custom_command(
<span class="line-modified">1158     OUTPUT ${JavaScriptCore_DERIVED_SOURCES_DIR}/inspector/InspectorBackendDispatchers.cpp</span>
<span class="line-modified">1159            ${JavaScriptCore_DERIVED_SOURCES_DIR}/inspector/InspectorBackendDispatchers.h</span>
<span class="line-modified">1160            ${JavaScriptCore_DERIVED_SOURCES_DIR}/inspector/InspectorFrontendDispatchers.cpp</span>
<span class="line-modified">1161            ${JavaScriptCore_DERIVED_SOURCES_DIR}/inspector/InspectorFrontendDispatchers.h</span>
<span class="line-modified">1162            ${JavaScriptCore_DERIVED_SOURCES_DIR}/inspector/InspectorProtocolObjects.cpp</span>
<span class="line-modified">1163            ${JavaScriptCore_DERIVED_SOURCES_DIR}/inspector/InspectorProtocolObjects.h</span>
<span class="line-modified">1164            ${JavaScriptCore_DERIVED_SOURCES_DIR}/inspector/InspectorBackendCommands.js</span>
<span class="line-modified">1165     MAIN_DEPENDENCY ${JavaScriptCore_DERIVED_SOURCES_DIR}/CombinedDomains.json</span>
1166     DEPENDS ${JavaScriptCore_INSPECTOR_PROTOCOL_SCRIPTS}
<span class="line-modified">1167     COMMAND ${PYTHON_EXECUTABLE} ${JavaScriptCore_INSPECTOR_SCRIPTS_DIR}/generate-inspector-protocol-bindings.py --outputDir &quot;${JavaScriptCore_DERIVED_SOURCES_DIR}/inspector&quot; --framework JavaScriptCore ${JavaScriptCore_DERIVED_SOURCES_DIR}/CombinedDomains.json</span>
1168     VERBATIM)
1169 
1170 # JSCBuiltins
1171 
1172 set(BUILTINS_GENERATOR_SCRIPTS
1173     ${JavaScriptCore_SCRIPTS_DIR}/wkbuiltins.py
1174     ${JavaScriptCore_SCRIPTS_DIR}/builtins_generator.py
1175     ${JavaScriptCore_SCRIPTS_DIR}/builtins_model.py
1176     ${JavaScriptCore_SCRIPTS_DIR}/builtins_templates.py
1177     ${JavaScriptCore_SCRIPTS_DIR}/builtins_generate_combined_header.py
1178     ${JavaScriptCore_SCRIPTS_DIR}/builtins_generate_combined_implementation.py
1179     ${JavaScriptCore_SCRIPTS_DIR}/builtins_generate_separate_header.py
1180     ${JavaScriptCore_SCRIPTS_DIR}/builtins_generate_separate_implementation.py
1181     ${JavaScriptCore_SCRIPTS_DIR}/builtins_generate_wrapper_header.py
1182     ${JavaScriptCore_SCRIPTS_DIR}/builtins_generate_wrapper_implementation.py
1183     ${JavaScriptCore_SCRIPTS_DIR}/builtins_generate_internals_wrapper_header.py
1184     ${JavaScriptCore_SCRIPTS_DIR}/builtins_generate_internals_wrapper_implementation.py
1185     ${JavaScriptCore_SCRIPTS_DIR}/generate-js-builtins.py
1186     ${JavaScriptCore_SCRIPTS_DIR}/lazywriter.py
1187 )
</pre>
<hr />
<pre>
1196     ${JAVASCRIPTCORE_DIR}/builtins/AsyncGeneratorPrototype.js
1197     ${JAVASCRIPTCORE_DIR}/builtins/DatePrototype.js
1198     ${JAVASCRIPTCORE_DIR}/builtins/FunctionPrototype.js
1199     ${JAVASCRIPTCORE_DIR}/builtins/GeneratorPrototype.js
1200     ${JAVASCRIPTCORE_DIR}/builtins/GlobalObject.js
1201     ${JAVASCRIPTCORE_DIR}/builtins/GlobalOperations.js
1202     ${JAVASCRIPTCORE_DIR}/builtins/InspectorInstrumentationObject.js
1203     ${JAVASCRIPTCORE_DIR}/builtins/InternalPromiseConstructor.js
1204     ${JAVASCRIPTCORE_DIR}/builtins/IteratorHelpers.js
1205     ${JAVASCRIPTCORE_DIR}/builtins/IteratorPrototype.js
1206     ${JAVASCRIPTCORE_DIR}/builtins/MapIteratorPrototype.js
1207     ${JAVASCRIPTCORE_DIR}/builtins/MapPrototype.js
1208     ${JAVASCRIPTCORE_DIR}/builtins/ModuleLoader.js
1209     ${JAVASCRIPTCORE_DIR}/builtins/NumberConstructor.js
1210     ${JAVASCRIPTCORE_DIR}/builtins/ObjectConstructor.js
1211     ${JAVASCRIPTCORE_DIR}/builtins/PromiseConstructor.js
1212     ${JAVASCRIPTCORE_DIR}/builtins/PromiseOperations.js
1213     ${JAVASCRIPTCORE_DIR}/builtins/PromisePrototype.js
1214     ${JAVASCRIPTCORE_DIR}/builtins/ReflectObject.js
1215     ${JAVASCRIPTCORE_DIR}/builtins/RegExpPrototype.js
<span class="line-added">1216     ${JAVASCRIPTCORE_DIR}/builtins/RegExpStringIteratorPrototype.js</span>
1217     ${JAVASCRIPTCORE_DIR}/builtins/SetIteratorPrototype.js
1218     ${JAVASCRIPTCORE_DIR}/builtins/SetPrototype.js
1219     ${JAVASCRIPTCORE_DIR}/builtins/StringConstructor.js
1220     ${JAVASCRIPTCORE_DIR}/builtins/StringIteratorPrototype.js
1221     ${JAVASCRIPTCORE_DIR}/builtins/StringPrototype.js
1222     ${JAVASCRIPTCORE_DIR}/builtins/TypedArrayConstructor.js
1223     ${JAVASCRIPTCORE_DIR}/builtins/TypedArrayPrototype.js
<span class="line-modified">1224     ${JAVASCRIPTCORE_DIR}/builtins/WebAssembly.js</span>
1225 )
1226 
1227 add_custom_command(
<span class="line-modified">1228     OUTPUT ${JavaScriptCore_DERIVED_SOURCES_DIR}/JSCBuiltins.cpp ${JavaScriptCore_DERIVED_SOURCES_DIR}/JSCBuiltins.h</span>
1229     MAIN_DEPENDENCY ${JavaScriptCore_SCRIPTS_DIR}/generate-js-builtins.py
1230     DEPENDS ${JavaScriptCore_BUILTINS_SOURCES} ${BUILTINS_GENERATOR_SCRIPTS}
<span class="line-modified">1231     COMMAND ${PYTHON_EXECUTABLE} ${JavaScriptCore_SCRIPTS_DIR}/generate-js-builtins.py --framework JavaScriptCore --output-directory ${JavaScriptCore_DERIVED_SOURCES_DIR} --combined ${JavaScriptCore_BUILTINS_SOURCES}</span>
1232     VERBATIM)
1233 
1234 list(APPEND JavaScriptCore_HEADERS
<span class="line-modified">1235     ${JavaScriptCore_DERIVED_SOURCES_DIR}/inspector/InspectorBackendDispatchers.h</span>
<span class="line-modified">1236     ${JavaScriptCore_DERIVED_SOURCES_DIR}/inspector/InspectorFrontendDispatchers.h</span>
<span class="line-modified">1237     ${JavaScriptCore_DERIVED_SOURCES_DIR}/inspector/InspectorProtocolObjects.h</span>
<span class="line-modified">1238     ${JavaScriptCore_DERIVED_SOURCES_DIR}/JSCBuiltins.h</span>
1239 )
1240 
1241 add_custom_command(
<span class="line-modified">1242     OUTPUT ${JavaScriptCore_DERIVED_SOURCES_DIR}/AirOpcode.h ${JavaScriptCore_DERIVED_SOURCES_DIR}/AirOpcodeGenerated.h</span>
1243     MAIN_DEPENDENCY ${JAVASCRIPTCORE_DIR}/b3/air/AirOpcode.opcodes
1244     DEPENDS ${JAVASCRIPTCORE_DIR}/b3/air/opcode_generator.rb
1245     COMMAND ${RUBY_EXECUTABLE} ${JAVASCRIPTCORE_DIR}/b3/air/opcode_generator.rb ${JAVASCRIPTCORE_DIR}/b3/air/AirOpcode.opcodes VERBATIM
<span class="line-modified">1246     WORKING_DIRECTORY ${JavaScriptCore_DERIVED_SOURCES_DIR}</span>
1247 )
1248 
1249 list(APPEND JavaScriptCore_HEADERS
<span class="line-modified">1250     ${JavaScriptCore_DERIVED_SOURCES_DIR}/AirOpcode.h</span>
<span class="line-modified">1251     ${JavaScriptCore_DERIVED_SOURCES_DIR}/AirOpcodeGenerated.h</span>
1252 )
1253 
1254 add_custom_command(
<span class="line-modified">1255     OUTPUT ${JavaScriptCore_DERIVED_SOURCES_DIR}/InjectedScriptSource.h ${JavaScriptCore_DERIVED_SOURCES_DIR}/InjectedScriptSource.min.js</span>
1256     MAIN_DEPENDENCY ${JAVASCRIPTCORE_DIR}/inspector/InjectedScriptSource.js
1257     DEPENDS ${JavaScriptCore_SCRIPTS_DIR}/xxd.pl ${JavaScriptCore_SCRIPTS_DIR}/jsmin.py
<span class="line-modified">1258     COMMAND ${CMAKE_COMMAND} -E echo &quot;//# sourceURL=__InjectedScript_InjectedScriptSource.js&quot; &gt; ${JavaScriptCore_DERIVED_SOURCES_DIR}/InjectedScriptSource.min.js</span>
<span class="line-modified">1259     COMMAND ${PYTHON_EXECUTABLE} ${JavaScriptCore_SCRIPTS_DIR}/jsmin.py &lt; ${JAVASCRIPTCORE_DIR}/inspector/InjectedScriptSource.js &gt;&gt; ${JavaScriptCore_DERIVED_SOURCES_DIR}/InjectedScriptSource.min.js</span>
<span class="line-modified">1260     COMMAND ${PERL_EXECUTABLE} ${JavaScriptCore_SCRIPTS_DIR}/xxd.pl InjectedScriptSource_js ${JavaScriptCore_DERIVED_SOURCES_DIR}/InjectedScriptSource.min.js ${JavaScriptCore_DERIVED_SOURCES_DIR}/InjectedScriptSource.h</span>
1261     VERBATIM)
1262 
<span class="line-modified">1263 list(APPEND JavaScriptCore_HEADERS ${JavaScriptCore_DERIVED_SOURCES_DIR}/InjectedScriptSource.h)</span>
1264 
1265 if (WTF_CPU_X86_64)
1266     if (MSVC AND NOT ENABLE_C_LOOP)
1267         add_custom_command(
<span class="line-modified">1268             OUTPUT ${JavaScriptCore_DERIVED_SOURCES_DIR}/JITStubsMSVC64.obj</span>
1269             MAIN_DEPENDENCY ${JAVASCRIPTCORE_DIR}/jit/JITStubsMSVC64.asm
<span class="line-modified">1270             COMMAND ml64 -nologo -c -Fo ${JavaScriptCore_DERIVED_SOURCES_DIR}/JITStubsMSVC64.obj ${JAVASCRIPTCORE_DIR}/jit/JITStubsMSVC64.asm</span>
1271             VERBATIM)
1272 
<span class="line-modified">1273         list(APPEND JavaScriptCore_SOURCES ${JavaScriptCore_DERIVED_SOURCES_DIR}/JITStubsMSVC64.obj)</span>
1274     endif ()
1275 endif ()
1276 
<span class="line-added">1277 set(JavaScriptCore_INTERFACE_LIBRARIES JavaScriptCore)</span>
<span class="line-added">1278 set(JavaScriptCore_INTERFACE_INCLUDE_DIRECTORIES</span>
<span class="line-added">1279     ${JavaScriptCore_FRAMEWORK_HEADERS_DIR}</span>
<span class="line-added">1280     ${JavaScriptCore_PRIVATE_FRAMEWORK_HEADERS_DIR}</span>
<span class="line-added">1281 )</span>
<span class="line-added">1282 set(JavaScriptCore_INTERFACE_DEPENDENCIES</span>
<span class="line-added">1283     JavaScriptCore_CopyHeaders</span>
<span class="line-added">1284     JavaScriptCore_CopyPrivateHeaders</span>
<span class="line-added">1285 )</span>
<span class="line-added">1286 </span>
1287 WEBKIT_FRAMEWORK_DECLARE(JavaScriptCore)
1288 WEBKIT_INCLUDE_CONFIG_FILES_IF_EXISTS()
1289 
1290 if (COMPILER_IS_GCC_OR_CLANG)
1291     # Avoid using fused multiply-add instructions since this could give different results
1292     # for e.g. parseInt depending on the platform and compilation flags.
1293     WEBKIT_ADD_TARGET_CXX_FLAGS(JavaScriptCore -ffp-contract=off)



1294 endif ()
1295 
<span class="line-modified">1296 WEBKIT_COPY_FILES(JavaScriptCore_CopyHeaders</span>
<span class="line-added">1297     DESTINATION ${JavaScriptCore_FRAMEWORK_HEADERS_DIR}/JavaScriptCore</span>
1298     FILES ${JavaScriptCore_PUBLIC_FRAMEWORK_HEADERS}
1299     FLATTENED
1300 )
1301 
<span class="line-modified">1302 WEBKIT_COPY_FILES(JavaScriptCore_CopyPrivateHeaders</span>
<span class="line-modified">1303     DESTINATION ${JavaScriptCore_PRIVATE_FRAMEWORK_HEADERS_DIR}/JavaScriptCore</span>
1304     FILES ${JavaScriptCore_PRIVATE_FRAMEWORK_HEADERS}

1305     FLATTENED
1306 )
<span class="line-added">1307 # JavaScriptCore_CopyPrivateHeaders needs to have a direct or indirect</span>
<span class="line-added">1308 # dependency of JavaScriptCore for CMake Visual Studio generator to</span>
<span class="line-added">1309 # eliminate duplicated custom commands. Otherwise,</span>
<span class="line-added">1310 # CombinedDomains.json will be generated in both projects.</span>
<span class="line-added">1311 if (NOT INTERNAL_BUILD)</span>
<span class="line-added">1312     add_dependencies(JavaScriptCore_CopyPrivateHeaders JavaScriptCore)</span>
<span class="line-added">1313 endif ()</span>
1314 
1315 target_include_directories(LLIntSettingsExtractor PRIVATE
1316     ${JavaScriptCore_INCLUDE_DIRECTORIES}
1317     ${JavaScriptCore_PRIVATE_INCLUDE_DIRECTORIES}
1318 )
1319 target_include_directories(LLIntSettingsExtractor SYSTEM PRIVATE ${JavaScriptCore_SYSTEM_INCLUDE_DIRECTORIES})
1320 
1321 target_include_directories(LLIntOffsetsExtractor PRIVATE
1322     ${JavaScriptCore_INCLUDE_DIRECTORIES}
1323     ${JavaScriptCore_PRIVATE_INCLUDE_DIRECTORIES}
1324 )
1325 target_include_directories(LLIntOffsetsExtractor SYSTEM PRIVATE ${JavaScriptCore_SYSTEM_INCLUDE_DIRECTORIES})
1326 
1327 if (NOT PORT STREQUAL &quot;Java&quot;)
1328     add_subdirectory(shell)
1329 endif ()
1330 
1331 WEBKIT_COMPUTE_SOURCES(JavaScriptCore)
1332 WEBKIT_WRAP_SOURCELIST(${JavaScriptCore_SOURCES})
1333 WEBKIT_FRAMEWORK(JavaScriptCore)
<span class="line-added">1334 WEBKIT_FRAMEWORK_TARGET(JavaScriptCore)</span>
1335 
1336 if (NOT &quot;${PORT}&quot; STREQUAL &quot;Mac&quot;)
1337     if (${JavaScriptCore_LIBRARY_TYPE} STREQUAL &quot;SHARED&quot;)
1338         WEBKIT_POPULATE_LIBRARY_VERSION(JAVASCRIPTCORE)
1339         set_target_properties(JavaScriptCore PROPERTIES VERSION ${JAVASCRIPTCORE_VERSION} SOVERSION ${JAVASCRIPTCORE_VERSION_MAJOR})
1340         install(TARGETS JavaScriptCore DESTINATION &quot;${LIB_INSTALL_DIR}&quot;)
1341     endif ()
1342 endif ()
1343 
1344 # Force staging of shared scripts, even if they aren&#39;t directly used to build JavaScriptCore.
1345 
1346 add_custom_target(stageSharedScripts DEPENDS ${JavaScriptCore_SCRIPTS})
1347 add_dependencies(JavaScriptCore stageSharedScripts ${JavaScriptCore_EXTRA_DEPENDENCIES})
1348 
<span class="line-modified">1349 if (USE_VERSION_STAMPER)</span>
1350     add_custom_command(
1351         TARGET JavaScriptCore
1352         PRE_BUILD
<span class="line-modified">1353         COMMAND ${PERL_EXECUTABLE} ${WEBKIT_LIBRARIES_DIR}/tools/scripts/auto-version.pl ${JavaScriptCore_DERIVED_SOURCES_DIR}</span>
1354         VERBATIM)
1355 
1356     add_custom_command(
1357         TARGET JavaScriptCore
1358         POST_BUILD
<span class="line-modified">1359         COMMAND ${PERL_EXECUTABLE} ${WEBKIT_LIBRARIES_DIR}/tools/scripts/version-stamp.pl ${JavaScriptCore_DERIVED_SOURCES_DIR} $&lt;TARGET_FILE:JavaScriptCore&gt;</span>
1360         VERBATIM)
1361 endif ()
</pre>
</td>
</tr>
</table>
<center><a href="API/WebKitAvailability.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="DerivedSources-input.xcfilelist.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>
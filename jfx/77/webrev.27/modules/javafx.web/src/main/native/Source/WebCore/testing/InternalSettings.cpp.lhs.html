<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames modules/javafx.web/src/main/native/Source/WebCore/testing/InternalSettings.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
  2  * Copyright (C) 2012 Google Inc. All rights reserved.
  3  * Copyright (C) 2013 Apple Inc. All rights reserved.
  4  *
  5  * Redistribution and use in source and binary forms, with or without
  6  * modification, are permitted provided that the following conditions
  7  * are met:
  8  *
  9  * 1.  Redistributions of source code must retain the above copyright
 10  *     notice, this list of conditions and the following disclaimer.
 11  * 2.  Redistributions in binary form must reproduce the above copyright
 12  *     notice, this list of conditions and the following disclaimer in the
 13  *     documentation and/or other materials provided with the distribution.
 14  *
 15  * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS &quot;AS IS&quot; AND ANY
 16  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 17  * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 18  * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY
 19  * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 20  * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 21  * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 22  * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 23  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 24  * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 25  */
 26 
 27 #include &quot;config.h&quot;
 28 #include &quot;InternalSettings.h&quot;
 29 
 30 #include &quot;CaptionUserPreferences.h&quot;
 31 #include &quot;DeprecatedGlobalSettings.h&quot;
 32 #include &quot;Document.h&quot;
 33 #include &quot;FontCache.h&quot;
 34 #include &quot;Frame.h&quot;
 35 #include &quot;FrameView.h&quot;
 36 #include &quot;LocaleToScriptMapping.h&quot;
 37 #include &quot;Page.h&quot;
 38 #include &quot;PageGroup.h&quot;
<a name="1" id="anc1"></a>
 39 #include &quot;RenderTheme.h&quot;
 40 #include &quot;RuntimeEnabledFeatures.h&quot;
 41 #include &quot;Settings.h&quot;
 42 #include &quot;Supplementable.h&quot;
 43 #include &lt;wtf/Language.h&gt;
 44 
 45 #if ENABLE(INPUT_TYPE_COLOR)
 46 #include &quot;ColorChooser.h&quot;
 47 #endif
 48 
 49 #if USE(SOUP)
 50 #include &quot;SoupNetworkSession.h&quot;
 51 #endif
 52 
 53 namespace WebCore {
 54 
 55 InternalSettings::Backup::Backup(Settings&amp; settings)
 56     : m_originalEditingBehavior(settings.editingBehaviorType())
 57 #if ENABLE(TEXT_AUTOSIZING)
 58     , m_originalTextAutosizingEnabled(settings.textAutosizingEnabled())
 59     , m_originalTextAutosizingWindowSizeOverride(settings.textAutosizingWindowSizeOverride())
<a name="2" id="anc2"></a>
 60 #endif
 61     , m_originalMediaTypeOverride(settings.mediaTypeOverride())
 62     , m_originalCanvasUsesAcceleratedDrawing(settings.canvasUsesAcceleratedDrawing())
 63     , m_originalMockScrollbarsEnabled(DeprecatedGlobalSettings::mockScrollbarsEnabled())
 64     , m_imagesEnabled(settings.areImagesEnabled())
 65     , m_preferMIMETypeForImages(settings.preferMIMETypeForImages())
 66     , m_minimumDOMTimerInterval(settings.minimumDOMTimerInterval())
 67 #if ENABLE(VIDEO_TRACK)
 68     , m_shouldDisplaySubtitles(settings.shouldDisplaySubtitles())
 69     , m_shouldDisplayCaptions(settings.shouldDisplayCaptions())
 70     , m_shouldDisplayTextDescriptions(settings.shouldDisplayTextDescriptions())
 71 #endif
 72     , m_defaultVideoPosterURL(settings.defaultVideoPosterURL())
 73     , m_forcePendingWebGLPolicy(settings.isForcePendingWebGLPolicy())
 74     , m_originalTimeWithoutMouseMovementBeforeHidingControls(settings.timeWithoutMouseMovementBeforeHidingControls())
 75     , m_useLegacyBackgroundSizeShorthandBehavior(settings.useLegacyBackgroundSizeShorthandBehavior())
 76     , m_autoscrollForDragAndDropEnabled(settings.autoscrollForDragAndDropEnabled())
 77     , m_quickTimePluginReplacementEnabled(settings.quickTimePluginReplacementEnabled())
 78     , m_youTubeFlashPluginReplacementEnabled(settings.youTubeFlashPluginReplacementEnabled())
 79     , m_shouldConvertPositionStyleOnCopy(settings.shouldConvertPositionStyleOnCopy())
 80     , m_fontFallbackPrefersPictographs(settings.fontFallbackPrefersPictographs())
 81     , m_shouldIgnoreFontLoadCompletions(settings.shouldIgnoreFontLoadCompletions())
 82     , m_backgroundShouldExtendBeyondPage(settings.backgroundShouldExtendBeyondPage())
 83     , m_storageBlockingPolicy(settings.storageBlockingPolicy())
 84     , m_scrollingTreeIncludesFrames(settings.scrollingTreeIncludesFrames())
 85 #if ENABLE(TOUCH_EVENTS)
 86     , m_touchEventEmulationEnabled(settings.isTouchEventEmulationEnabled())
 87 #endif
 88 #if ENABLE(WIRELESS_PLAYBACK_TARGET)
 89     , m_allowsAirPlayForMediaPlayback(settings.allowsAirPlayForMediaPlayback())
 90 #endif
 91     , m_allowsInlineMediaPlayback(settings.allowsInlineMediaPlayback())
 92     , m_allowsInlineMediaPlaybackAfterFullscreen(settings.allowsInlineMediaPlaybackAfterFullscreen())
 93     , m_inlineMediaPlaybackRequiresPlaysInlineAttribute(settings.inlineMediaPlaybackRequiresPlaysInlineAttribute())
 94     , m_deferredCSSParserEnabled(settings.deferredCSSParserEnabled())
 95     , m_inputEventsEnabled(settings.inputEventsEnabled())
 96     , m_incompleteImageBorderEnabled(settings.incompleteImageBorderEnabled())
<a name="3" id="anc3"></a><span class="line-modified"> 97 #if ENABLE(ACCESSIBILITY_EVENTS)</span>
<span class="line-modified"> 98     , m_accessibilityEventsEnabled(settings.accessibilityEventsEnabled())</span>
<span class="line-modified"> 99 #endif</span>

100     , m_userInterfaceDirectionPolicy(settings.userInterfaceDirectionPolicy())
101     , m_systemLayoutDirection(settings.systemLayoutDirection())
102     , m_pdfImageCachingPolicy(settings.pdfImageCachingPolicy())
103     , m_forcedColorsAreInvertedAccessibilityValue(settings.forcedColorsAreInvertedAccessibilityValue())
104     , m_forcedDisplayIsMonochromeAccessibilityValue(settings.forcedDisplayIsMonochromeAccessibilityValue())
105     , m_forcedPrefersReducedMotionAccessibilityValue(settings.forcedPrefersReducedMotionAccessibilityValue())
106     , m_fontLoadTimingOverride(settings.fontLoadTimingOverride())
107     , m_frameFlattening(settings.frameFlattening())
108 #if ENABLE(INDEXED_DATABASE_IN_WORKERS)
109     , m_indexedDBWorkersEnabled(RuntimeEnabledFeatures::sharedFeatures().indexedDBWorkersEnabled())
110 #endif
111 #if ENABLE(WEBGL2)
112     , m_webGL2Enabled(RuntimeEnabledFeatures::sharedFeatures().webGL2Enabled())
<a name="4" id="anc4"></a><span class="line-removed">113 #endif</span>
<span class="line-removed">114 #if ENABLE(WEBMETAL)</span>
<span class="line-removed">115     , m_webMetalEnabled(RuntimeEnabledFeatures::sharedFeatures().webMetalEnabled())</span>
116 #endif
117     , m_webVREnabled(RuntimeEnabledFeatures::sharedFeatures().webVREnabled())
118 #if ENABLE(MEDIA_STREAM)
119     , m_setScreenCaptureEnabled(RuntimeEnabledFeatures::sharedFeatures().screenCaptureEnabled())
120 #endif
121     , m_shouldMockBoldSystemFontForAccessibility(RenderTheme::singleton().shouldMockBoldSystemFontForAccessibility())
122 #if USE(AUDIO_SESSION)
123     , m_shouldManageAudioSessionCategory(DeprecatedGlobalSettings::shouldManageAudioSessionCategory())
124 #endif
125     , m_customPasteboardDataEnabled(RuntimeEnabledFeatures::sharedFeatures().customPasteboardDataEnabled())
<a name="5" id="anc5"></a><span class="line-removed">126     , m_promptForStorageAccessAPIEnabled(RuntimeEnabledFeatures::sharedFeatures().storageAccessPromptsEnabled())</span>
127 {
128 }
129 
130 void InternalSettings::Backup::restoreTo(Settings&amp; settings)
131 {
132     settings.setEditingBehaviorType(m_originalEditingBehavior);
133 
134     for (const auto&amp; standardFont : m_standardFontFamilies)
135         settings.setStandardFontFamily(standardFont.value, static_cast&lt;UScriptCode&gt;(standardFont.key));
136     m_standardFontFamilies.clear();
137 
138     for (const auto&amp; fixedFont : m_fixedFontFamilies)
139         settings.setFixedFontFamily(fixedFont.value, static_cast&lt;UScriptCode&gt;(fixedFont.key));
140     m_fixedFontFamilies.clear();
141 
142     for (const auto&amp; serifFont : m_serifFontFamilies)
143         settings.setSerifFontFamily(serifFont.value, static_cast&lt;UScriptCode&gt;(serifFont.key));
144     m_serifFontFamilies.clear();
145 
146     for (const auto&amp; sansSerifFont : m_sansSerifFontFamilies)
147         settings.setSansSerifFontFamily(sansSerifFont.value, static_cast&lt;UScriptCode&gt;(sansSerifFont.key));
148     m_sansSerifFontFamilies.clear();
149 
150     for (const auto&amp; cursiveFont : m_cursiveFontFamilies)
151         settings.setCursiveFontFamily(cursiveFont.value, static_cast&lt;UScriptCode&gt;(cursiveFont.key));
152     m_cursiveFontFamilies.clear();
153 
154     for (const auto&amp; fantasyFont : m_fantasyFontFamilies)
155         settings.setFantasyFontFamily(fantasyFont.value, static_cast&lt;UScriptCode&gt;(fantasyFont.key));
156     m_fantasyFontFamilies.clear();
157 
158     for (const auto&amp; pictographFont : m_pictographFontFamilies)
159         settings.setPictographFontFamily(pictographFont.value, static_cast&lt;UScriptCode&gt;(pictographFont.key));
160     m_pictographFontFamilies.clear();
161 
162 #if ENABLE(TEXT_AUTOSIZING)
163     settings.setTextAutosizingEnabled(m_originalTextAutosizingEnabled);
164     settings.setTextAutosizingWindowSizeOverride(m_originalTextAutosizingWindowSizeOverride);
<a name="6" id="anc6"></a>
165 #endif
166     settings.setMediaTypeOverride(m_originalMediaTypeOverride);
167     settings.setCanvasUsesAcceleratedDrawing(m_originalCanvasUsesAcceleratedDrawing);
168     settings.setImagesEnabled(m_imagesEnabled);
169     settings.setPreferMIMETypeForImages(m_preferMIMETypeForImages);
170     settings.setMinimumDOMTimerInterval(m_minimumDOMTimerInterval);
171 #if ENABLE(VIDEO_TRACK)
172     settings.setShouldDisplaySubtitles(m_shouldDisplaySubtitles);
173     settings.setShouldDisplayCaptions(m_shouldDisplayCaptions);
174     settings.setShouldDisplayTextDescriptions(m_shouldDisplayTextDescriptions);
175 #endif
176     settings.setDefaultVideoPosterURL(m_defaultVideoPosterURL);
177     settings.setForcePendingWebGLPolicy(m_forcePendingWebGLPolicy);
178     settings.setTimeWithoutMouseMovementBeforeHidingControls(m_originalTimeWithoutMouseMovementBeforeHidingControls);
179     settings.setUseLegacyBackgroundSizeShorthandBehavior(m_useLegacyBackgroundSizeShorthandBehavior);
180     settings.setAutoscrollForDragAndDropEnabled(m_autoscrollForDragAndDropEnabled);
181     settings.setShouldConvertPositionStyleOnCopy(m_shouldConvertPositionStyleOnCopy);
182     settings.setFontFallbackPrefersPictographs(m_fontFallbackPrefersPictographs);
183     settings.setShouldIgnoreFontLoadCompletions(m_shouldIgnoreFontLoadCompletions);
184     settings.setBackgroundShouldExtendBeyondPage(m_backgroundShouldExtendBeyondPage);
185     settings.setStorageBlockingPolicy(m_storageBlockingPolicy);
186     settings.setScrollingTreeIncludesFrames(m_scrollingTreeIncludesFrames);
187 #if ENABLE(TOUCH_EVENTS)
188     settings.setTouchEventEmulationEnabled(m_touchEventEmulationEnabled);
189 #endif
190     settings.setAllowsInlineMediaPlayback(m_allowsInlineMediaPlayback);
191     settings.setAllowsInlineMediaPlaybackAfterFullscreen(m_allowsInlineMediaPlaybackAfterFullscreen);
192     settings.setInlineMediaPlaybackRequiresPlaysInlineAttribute(m_inlineMediaPlaybackRequiresPlaysInlineAttribute);
193     settings.setQuickTimePluginReplacementEnabled(m_quickTimePluginReplacementEnabled);
194     settings.setYouTubeFlashPluginReplacementEnabled(m_youTubeFlashPluginReplacementEnabled);
195     settings.setDeferredCSSParserEnabled(m_deferredCSSParserEnabled);
196     settings.setInputEventsEnabled(m_inputEventsEnabled);
197     settings.setUserInterfaceDirectionPolicy(m_userInterfaceDirectionPolicy);
198     settings.setSystemLayoutDirection(m_systemLayoutDirection);
199     settings.setPdfImageCachingPolicy(m_pdfImageCachingPolicy);
200     settings.setForcedColorsAreInvertedAccessibilityValue(m_forcedColorsAreInvertedAccessibilityValue);
201     settings.setForcedDisplayIsMonochromeAccessibilityValue(m_forcedDisplayIsMonochromeAccessibilityValue);
202     settings.setForcedPrefersReducedMotionAccessibilityValue(m_forcedPrefersReducedMotionAccessibilityValue);
203     settings.setFontLoadTimingOverride(m_fontLoadTimingOverride);
204     DeprecatedGlobalSettings::setAllowsAnySSLCertificate(false);
205     RenderTheme::singleton().setShouldMockBoldSystemFontForAccessibility(m_shouldMockBoldSystemFontForAccessibility);
206     FontCache::singleton().setShouldMockBoldSystemFontForAccessibility(m_shouldMockBoldSystemFontForAccessibility);
207     settings.setFrameFlattening(m_frameFlattening);
208     settings.setIncompleteImageBorderEnabled(m_incompleteImageBorderEnabled);
<a name="7" id="anc7"></a><span class="line-modified">209 #if ENABLE(ACCESSIBILITY_EVENTS)</span>
<span class="line-modified">210     settings.setAccessibilityEventsEnabled(m_accessibilityEventsEnabled);</span>
<span class="line-modified">211 #endif</span>

212 
213 #if ENABLE(INDEXED_DATABASE_IN_WORKERS)
214     RuntimeEnabledFeatures::sharedFeatures().setIndexedDBWorkersEnabled(m_indexedDBWorkersEnabled);
215 #endif
216 #if ENABLE(WEBGL2)
217     RuntimeEnabledFeatures::sharedFeatures().setWebGL2Enabled(m_webGL2Enabled);
<a name="8" id="anc8"></a><span class="line-removed">218 #endif</span>
<span class="line-removed">219 #if ENABLE(WEBMETAL)</span>
<span class="line-removed">220     RuntimeEnabledFeatures::sharedFeatures().setWebMetalEnabled(m_webMetalEnabled);</span>
221 #endif
222     RuntimeEnabledFeatures::sharedFeatures().setWebVREnabled(m_webVREnabled);
223 #if ENABLE(MEDIA_STREAM)
224     RuntimeEnabledFeatures::sharedFeatures().setScreenCaptureEnabled(m_setScreenCaptureEnabled);
225 #endif
226     RuntimeEnabledFeatures::sharedFeatures().setCustomPasteboardDataEnabled(m_customPasteboardDataEnabled);
227 
228 #if USE(AUDIO_SESSION)
229     DeprecatedGlobalSettings::setShouldManageAudioSessionCategory(m_shouldManageAudioSessionCategory);
230 #endif
<a name="9" id="anc9"></a><span class="line-removed">231 </span>
<span class="line-removed">232     RuntimeEnabledFeatures::sharedFeatures().setStorageAccessPromptsEnabled(m_promptForStorageAccessAPIEnabled);</span>
233 }
234 
235 class InternalSettingsWrapper : public Supplement&lt;Page&gt; {
<a name="10" id="anc10"></a>
236 public:
237     explicit InternalSettingsWrapper(Page* page)
238         : m_internalSettings(InternalSettings::create(page)) { }
239     virtual ~InternalSettingsWrapper() { m_internalSettings-&gt;hostDestroyed(); }
240 #if !ASSERT_DISABLED
241     bool isRefCountedWrapper() const override { return true; }
242 #endif
243     InternalSettings* internalSettings() const { return m_internalSettings.get(); }
244 
245 private:
246     RefPtr&lt;InternalSettings&gt; m_internalSettings;
247 };
248 
249 const char* InternalSettings::supplementName()
250 {
251     return &quot;InternalSettings&quot;;
252 }
253 
254 InternalSettings* InternalSettings::from(Page* page)
255 {
256     if (!Supplement&lt;Page&gt;::from(page, supplementName()))
<a name="11" id="anc11"></a><span class="line-modified">257         Supplement&lt;Page&gt;::provideTo(page, supplementName(), std::make_unique&lt;InternalSettingsWrapper&gt;(page));</span>
258     return static_cast&lt;InternalSettingsWrapper*&gt;(Supplement&lt;Page&gt;::from(page, supplementName()))-&gt;internalSettings();
259 }
260 
261 void InternalSettings::hostDestroyed()
262 {
263     m_page = nullptr;
264 }
265 
266 InternalSettings::InternalSettings(Page* page)
267     : InternalSettingsGenerated(page)
268     , m_page(page)
269     , m_backup(page-&gt;settings())
270 {
271 #if ENABLE(WIRELESS_PLAYBACK_TARGET)
272     setAllowsAirPlayForMediaPlayback(false);
273 #endif
274 #if ENABLE(MEDIA_STREAM)
275     setMediaCaptureRequiresSecureConnection(false);
276 #endif
277 }
278 
279 Ref&lt;InternalSettings&gt; InternalSettings::create(Page* page)
280 {
281     return adoptRef(*new InternalSettings(page));
282 }
283 
284 void InternalSettings::resetToConsistentState()
285 {
286     m_page-&gt;setPageScaleFactor(1, { 0, 0 });
287     m_page-&gt;mainFrame().setPageAndTextZoomFactors(1, 1);
288     m_page-&gt;setCanStartMedia(true);
<a name="12" id="anc12"></a><span class="line-modified">289     m_page-&gt;setUseDarkAppearance(false);</span>
290 
291     settings().setForcePendingWebGLPolicy(false);
292 #if ENABLE(WIRELESS_PLAYBACK_TARGET)
293     settings().setAllowsAirPlayForMediaPlayback(false);
294 #endif
295 #if ENABLE(MEDIA_STREAM)
296     setMediaCaptureRequiresSecureConnection(false);
297 #endif
298 
299     m_backup.restoreTo(settings());
300     m_backup = Backup { settings() };
301 
302     InternalSettingsGenerated::resetToConsistentState();
303 }
304 
305 Settings&amp; InternalSettings::settings() const
306 {
307     ASSERT(m_page);
308     return m_page-&gt;settings();
309 }
310 
311 ExceptionOr&lt;void&gt; InternalSettings::setTouchEventEmulationEnabled(bool enabled)
312 {
313     if (!m_page)
314         return Exception { InvalidAccessError };
315 #if ENABLE(TOUCH_EVENTS)
316     settings().setTouchEventEmulationEnabled(enabled);
317 #else
318     UNUSED_PARAM(enabled);
319 #endif
320     return { };
321 }
322 
323 ExceptionOr&lt;void&gt; InternalSettings::setStandardFontFamily(const String&amp; family, const String&amp; script)
324 {
325     if (!m_page)
326         return Exception { InvalidAccessError };
327     UScriptCode code = scriptNameToCode(script);
328     if (code == USCRIPT_INVALID_CODE)
329         return { };
330     m_backup.m_standardFontFamilies.add(code, settings().standardFontFamily(code));
331     settings().setStandardFontFamily(family, code);
332     return { };
333 }
334 
335 ExceptionOr&lt;void&gt; InternalSettings::setSerifFontFamily(const String&amp; family, const String&amp; script)
336 {
337     if (!m_page)
338         return Exception { InvalidAccessError };
339     UScriptCode code = scriptNameToCode(script);
340     if (code == USCRIPT_INVALID_CODE)
341         return { };
342     m_backup.m_serifFontFamilies.add(code, settings().serifFontFamily(code));
343     settings().setSerifFontFamily(family, code);
344     return { };
345 }
346 
347 ExceptionOr&lt;void&gt; InternalSettings::setSansSerifFontFamily(const String&amp; family, const String&amp; script)
348 {
349     if (!m_page)
350         return Exception { InvalidAccessError };
351     UScriptCode code = scriptNameToCode(script);
352     if (code == USCRIPT_INVALID_CODE)
353         return { };
354     m_backup.m_sansSerifFontFamilies.add(code, settings().sansSerifFontFamily(code));
355     settings().setSansSerifFontFamily(family, code);
356     return { };
357 }
358 
359 ExceptionOr&lt;void&gt; InternalSettings::setFixedFontFamily(const String&amp; family, const String&amp; script)
360 {
361     if (!m_page)
362         return Exception { InvalidAccessError };
363     UScriptCode code = scriptNameToCode(script);
364     if (code == USCRIPT_INVALID_CODE)
365         return { };
366     m_backup.m_fixedFontFamilies.add(code, settings().fixedFontFamily(code));
367     settings().setFixedFontFamily(family, code);
368     return { };
369 }
370 
371 ExceptionOr&lt;void&gt; InternalSettings::setCursiveFontFamily(const String&amp; family, const String&amp; script)
372 {
373     if (!m_page)
374         return Exception { InvalidAccessError };
375     UScriptCode code = scriptNameToCode(script);
376     if (code == USCRIPT_INVALID_CODE)
377         return { };
378     m_backup.m_cursiveFontFamilies.add(code, settings().cursiveFontFamily(code));
379     settings().setCursiveFontFamily(family, code);
380     return { };
381 }
382 
383 ExceptionOr&lt;void&gt; InternalSettings::setFantasyFontFamily(const String&amp; family, const String&amp; script)
384 {
385     if (!m_page)
386         return Exception { InvalidAccessError };
387     UScriptCode code = scriptNameToCode(script);
388     if (code == USCRIPT_INVALID_CODE)
389         return { };
390     m_backup.m_fantasyFontFamilies.add(code, settings().fantasyFontFamily(code));
391     settings().setFantasyFontFamily(family, code);
392     return { };
393 }
394 
395 ExceptionOr&lt;void&gt; InternalSettings::setPictographFontFamily(const String&amp; family, const String&amp; script)
396 {
397     if (!m_page)
398         return Exception { InvalidAccessError };
399     UScriptCode code = scriptNameToCode(script);
400     if (code == USCRIPT_INVALID_CODE)
401         return { };
402     m_backup.m_pictographFontFamilies.add(code, settings().pictographFontFamily(code));
403     settings().setPictographFontFamily(family, code);
404     return { };
405 }
406 
407 ExceptionOr&lt;void&gt; InternalSettings::setTextAutosizingEnabled(bool enabled)
408 {
409     if (!m_page)
410         return Exception { InvalidAccessError };
411 #if ENABLE(TEXT_AUTOSIZING)
412     settings().setTextAutosizingEnabled(enabled);
413 #else
414     UNUSED_PARAM(enabled);
415 #endif
416     return { };
417 }
418 
419 ExceptionOr&lt;void&gt; InternalSettings::setTextAutosizingWindowSizeOverride(int width, int height)
420 {
421     if (!m_page)
422         return Exception { InvalidAccessError };
423 #if ENABLE(TEXT_AUTOSIZING)
424     settings().setTextAutosizingWindowSizeOverride(IntSize(width, height));
425 #else
426     UNUSED_PARAM(width);
427     UNUSED_PARAM(height);
428 #endif
429     return { };
430 }
431 
<a name="13" id="anc13"></a>











432 ExceptionOr&lt;void&gt; InternalSettings::setMediaTypeOverride(const String&amp; mediaType)
433 {
434     if (!m_page)
435         return Exception { InvalidAccessError };
436     settings().setMediaTypeOverride(mediaType);
437     return { };
438 }
439 
440 ExceptionOr&lt;void&gt; InternalSettings::setCanStartMedia(bool enabled)
441 {
442     if (!m_page)
443         return Exception { InvalidAccessError };
444     m_page-&gt;setCanStartMedia(enabled);
445     return { };
446 }
447 
448 ExceptionOr&lt;void&gt; InternalSettings::setAllowsAirPlayForMediaPlayback(bool allows)
449 {
450     if (!m_page)
451         return Exception { InvalidAccessError };
452 #if ENABLE(WIRELESS_PLAYBACK_TARGET)
453     settings().setAllowsAirPlayForMediaPlayback(allows);
454 #else
455     UNUSED_PARAM(allows);
456 #endif
457     return { };
458 }
459 
460 ExceptionOr&lt;void&gt; InternalSettings::setMediaCaptureRequiresSecureConnection(bool requires)
461 {
462     if (!m_page)
463         return Exception { InvalidAccessError };
464 #if ENABLE(MEDIA_STREAM)
465     m_page-&gt;settings().setMediaCaptureRequiresSecureConnection(requires);
466 #else
467     UNUSED_PARAM(requires);
468 #endif
469     return { };
470 }
471 
472 ExceptionOr&lt;void&gt; InternalSettings::setEditingBehavior(const String&amp; editingBehavior)
473 {
474     if (!m_page)
475         return Exception { InvalidAccessError };
476     if (equalLettersIgnoringASCIICase(editingBehavior, &quot;win&quot;))
477         settings().setEditingBehaviorType(EditingWindowsBehavior);
478     else if (equalLettersIgnoringASCIICase(editingBehavior, &quot;mac&quot;))
479         settings().setEditingBehaviorType(EditingMacBehavior);
480     else if (equalLettersIgnoringASCIICase(editingBehavior, &quot;unix&quot;))
481         settings().setEditingBehaviorType(EditingUnixBehavior);
482     else if (equalLettersIgnoringASCIICase(editingBehavior, &quot;ios&quot;))
483         settings().setEditingBehaviorType(EditingIOSBehavior);
484     else
485         return Exception { SyntaxError };
486     return { };
487 }
488 
489 ExceptionOr&lt;void&gt; InternalSettings::setShouldDisplayTrackKind(const String&amp; kind, bool enabled)
490 {
491     if (!m_page)
492         return Exception { InvalidAccessError };
493 #if ENABLE(VIDEO_TRACK)
494     auto&amp; captionPreferences = m_page-&gt;group().captionPreferences();
495     if (equalLettersIgnoringASCIICase(kind, &quot;subtitles&quot;))
496         captionPreferences.setUserPrefersSubtitles(enabled);
497     else if (equalLettersIgnoringASCIICase(kind, &quot;captions&quot;))
498         captionPreferences.setUserPrefersCaptions(enabled);
499     else if (equalLettersIgnoringASCIICase(kind, &quot;textdescriptions&quot;))
500         captionPreferences.setUserPrefersTextDescriptions(enabled);
501     else
502         return Exception { SyntaxError };
503 #else
504     UNUSED_PARAM(kind);
505     UNUSED_PARAM(enabled);
506 #endif
507     return { };
508 }
509 
510 ExceptionOr&lt;bool&gt; InternalSettings::shouldDisplayTrackKind(const String&amp; kind)
511 {
512     if (!m_page)
513         return Exception { InvalidAccessError };
514 #if ENABLE(VIDEO_TRACK)
515     auto&amp; captionPreferences = m_page-&gt;group().captionPreferences();
516     if (equalLettersIgnoringASCIICase(kind, &quot;subtitles&quot;))
517         return captionPreferences.userPrefersSubtitles();
518     if (equalLettersIgnoringASCIICase(kind, &quot;captions&quot;))
519         return captionPreferences.userPrefersCaptions();
520     if (equalLettersIgnoringASCIICase(kind, &quot;textdescriptions&quot;))
521         return captionPreferences.userPrefersTextDescriptions();
522 
523     return Exception { SyntaxError };
524 #else
525     UNUSED_PARAM(kind);
526     return false;
527 #endif
528 }
529 
<a name="14" id="anc14"></a>





530 ExceptionOr&lt;void&gt; InternalSettings::setUseDarkAppearance(bool useDarkAppearance)
531 {
532     if (!m_page)
533         return Exception { InvalidAccessError };
<a name="15" id="anc15"></a><span class="line-modified">534     m_page-&gt;setUseDarkAppearance(useDarkAppearance);</span>
535     return { };
536 }
537 
538 ExceptionOr&lt;void&gt; InternalSettings::setStorageBlockingPolicy(const String&amp; mode)
539 {
540     if (!m_page)
541         return Exception { InvalidAccessError };
542     if (mode == &quot;AllowAll&quot;)
543         settings().setStorageBlockingPolicy(SecurityOrigin::AllowAllStorage);
544     else if (mode == &quot;BlockThirdParty&quot;)
545         settings().setStorageBlockingPolicy(SecurityOrigin::BlockThirdPartyStorage);
546     else if (mode == &quot;BlockAll&quot;)
547         settings().setStorageBlockingPolicy(SecurityOrigin::BlockAllStorage);
548     else
549         return Exception { SyntaxError };
550     return { };
551 }
552 
553 ExceptionOr&lt;void&gt; InternalSettings::setPreferMIMETypeForImages(bool preferMIMETypeForImages)
554 {
555     if (!m_page)
556         return Exception { InvalidAccessError };
557     settings().setPreferMIMETypeForImages(preferMIMETypeForImages);
558     return { };
559 }
560 
561 ExceptionOr&lt;void&gt; InternalSettings::setImagesEnabled(bool enabled)
562 {
563     if (!m_page)
564         return Exception { InvalidAccessError };
565     settings().setImagesEnabled(enabled);
566     return { };
567 }
568 
569 ExceptionOr&lt;void&gt; InternalSettings::setPDFImageCachingPolicy(const String&amp; policy)
570 {
571     if (!m_page)
572         return Exception { InvalidAccessError };
573     if (equalLettersIgnoringASCIICase(policy, &quot;disabled&quot;))
574         settings().setPdfImageCachingPolicy(PDFImageCachingDisabled);
575     else if (equalLettersIgnoringASCIICase(policy, &quot;belowmemorylimit&quot;))
576         settings().setPdfImageCachingPolicy(PDFImageCachingBelowMemoryLimit);
577     else if (equalLettersIgnoringASCIICase(policy, &quot;clipboundsonly&quot;))
578         settings().setPdfImageCachingPolicy(PDFImageCachingClipBoundsOnly);
579     else if (equalLettersIgnoringASCIICase(policy, &quot;enabled&quot;))
580         settings().setPdfImageCachingPolicy(PDFImageCachingEnabled);
581     else
582         return Exception { SyntaxError };
583     return { };
584 }
585 
586 ExceptionOr&lt;void&gt; InternalSettings::setMinimumTimerInterval(double intervalInSeconds)
587 {
588     if (!m_page)
589         return Exception { InvalidAccessError };
590     settings().setMinimumDOMTimerInterval(Seconds { intervalInSeconds });
591     return { };
592 }
593 
594 ExceptionOr&lt;void&gt; InternalSettings::setDefaultVideoPosterURL(const String&amp; url)
595 {
596     if (!m_page)
597         return Exception { InvalidAccessError };
598     settings().setDefaultVideoPosterURL(url);
599     return { };
600 }
601 
602 ExceptionOr&lt;void&gt; InternalSettings::setForcePendingWebGLPolicy(bool forced)
603 {
604     if (!m_page)
605         return Exception { InvalidAccessError };
606     settings().setForcePendingWebGLPolicy(forced);
607     return { };
608 }
609 
610 ExceptionOr&lt;void&gt; InternalSettings::setTimeWithoutMouseMovementBeforeHidingControls(double time)
611 {
612     if (!m_page)
613         return Exception { InvalidAccessError };
614     settings().setTimeWithoutMouseMovementBeforeHidingControls(Seconds { time });
615     return { };
616 }
617 
618 ExceptionOr&lt;void&gt; InternalSettings::setUseLegacyBackgroundSizeShorthandBehavior(bool enabled)
619 {
620     if (!m_page)
621         return Exception { InvalidAccessError };
622     settings().setUseLegacyBackgroundSizeShorthandBehavior(enabled);
623     return { };
624 }
625 
626 ExceptionOr&lt;void&gt; InternalSettings::setAutoscrollForDragAndDropEnabled(bool enabled)
627 {
628     if (!m_page)
629         return Exception { InvalidAccessError };
630     settings().setAutoscrollForDragAndDropEnabled(enabled);
631     return { };
632 }
633 
634 ExceptionOr&lt;void&gt; InternalSettings::setFontFallbackPrefersPictographs(bool preferPictographs)
635 {
636     if (!m_page)
637         return Exception { InvalidAccessError };
638     settings().setFontFallbackPrefersPictographs(preferPictographs);
639     return { };
640 }
641 
642 ExceptionOr&lt;void&gt; InternalSettings::setFontLoadTimingOverride(const FontLoadTimingOverride&amp; fontLoadTimingOverride)
643 {
644     if (!m_page)
645         return Exception { InvalidAccessError };
646     auto policy = Settings::FontLoadTimingOverride::None;
647     switch (fontLoadTimingOverride) {
648     case FontLoadTimingOverride::Block:
649         policy = Settings::FontLoadTimingOverride::Block;
650         break;
651     case FontLoadTimingOverride::Swap:
652         policy = Settings::FontLoadTimingOverride::Swap;
653         break;
654     case FontLoadTimingOverride::Failure:
655         policy = Settings::FontLoadTimingOverride::Failure;
656         break;
657     }
658     settings().setFontLoadTimingOverride(policy);
659     return { };
660 }
661 
662 ExceptionOr&lt;void&gt; InternalSettings::setShouldIgnoreFontLoadCompletions(bool ignore)
663 {
664     if (!m_page)
665         return Exception { InvalidAccessError };
666     settings().setShouldIgnoreFontLoadCompletions(ignore);
667     return { };
668 }
669 
670 ExceptionOr&lt;void&gt; InternalSettings::setQuickTimePluginReplacementEnabled(bool enabled)
671 {
672     if (!m_page)
673         return Exception { InvalidAccessError };
674     settings().setQuickTimePluginReplacementEnabled(enabled);
675     return { };
676 }
677 
678 ExceptionOr&lt;void&gt; InternalSettings::setYouTubeFlashPluginReplacementEnabled(bool enabled)
679 {
680     if (!m_page)
681         return Exception { InvalidAccessError };
682     settings().setYouTubeFlashPluginReplacementEnabled(enabled);
683     return { };
684 }
685 
686 ExceptionOr&lt;void&gt; InternalSettings::setBackgroundShouldExtendBeyondPage(bool hasExtendedBackground)
687 {
688     if (!m_page)
689         return Exception { InvalidAccessError };
690     settings().setBackgroundShouldExtendBeyondPage(hasExtendedBackground);
691     return { };
692 }
693 
694 ExceptionOr&lt;void&gt; InternalSettings::setShouldConvertPositionStyleOnCopy(bool convert)
695 {
696     if (!m_page)
697         return Exception { InvalidAccessError };
698     settings().setShouldConvertPositionStyleOnCopy(convert);
699     return { };
700 }
701 
702 ExceptionOr&lt;void&gt; InternalSettings::setScrollingTreeIncludesFrames(bool enabled)
703 {
704     if (!m_page)
705         return Exception { InvalidAccessError };
706     settings().setScrollingTreeIncludesFrames(enabled);
707     return { };
708 }
709 
710 ExceptionOr&lt;void&gt; InternalSettings::setAllowUnclampedScrollPosition(bool allowUnclamped)
711 {
712     if (!m_page || !m_page-&gt;mainFrame().view())
713         return Exception { InvalidAccessError };
714 
715     m_page-&gt;mainFrame().view()-&gt;setAllowsUnclampedScrollPositionForTesting(allowUnclamped);
716     return { };
717 }
718 
719 ExceptionOr&lt;void&gt; InternalSettings::setAllowsInlineMediaPlayback(bool allows)
720 {
721     if (!m_page)
722         return Exception { InvalidAccessError };
723     settings().setAllowsInlineMediaPlayback(allows);
724     return { };
725 }
726 
727 ExceptionOr&lt;void&gt; InternalSettings::setAllowsInlineMediaPlaybackAfterFullscreen(bool allows)
728 {
729     if (!m_page)
730         return Exception { InvalidAccessError };
731     settings().setAllowsInlineMediaPlaybackAfterFullscreen(allows);
732     return { };
733 }
734 
735 ExceptionOr&lt;void&gt; InternalSettings::setInlineMediaPlaybackRequiresPlaysInlineAttribute(bool requires)
736 {
737     if (!m_page)
738         return Exception { InvalidAccessError };
739     settings().setInlineMediaPlaybackRequiresPlaysInlineAttribute(requires);
740     return { };
741 }
742 
743 ExceptionOr&lt;void&gt; InternalSettings::setShouldMockBoldSystemFontForAccessibility(bool requires)
744 {
745     if (!m_page)
746         return Exception { InvalidAccessError };
747     RenderTheme::singleton().setShouldMockBoldSystemFontForAccessibility(requires);
748     FontCache::singleton().setShouldMockBoldSystemFontForAccessibility(requires);
749     return { };
750 }
751 
<a name="16" id="anc16"></a>







752 void InternalSettings::setIndexedDBWorkersEnabled(bool enabled)
753 {
754 #if ENABLE(INDEXED_DATABASE_IN_WORKERS)
755     RuntimeEnabledFeatures::sharedFeatures().setIndexedDBWorkersEnabled(enabled);
756 #else
757     UNUSED_PARAM(enabled);
758 #endif
759 }
760 
761 void InternalSettings::setWebGL2Enabled(bool enabled)
762 {
763 #if ENABLE(WEBGL2)
764     RuntimeEnabledFeatures::sharedFeatures().setWebGL2Enabled(enabled);
765 #else
766     UNUSED_PARAM(enabled);
767 #endif
768 }
769 
<a name="17" id="anc17"></a><span class="line-modified">770 void InternalSettings::setWebMetalEnabled(bool enabled)</span>
771 {
<a name="18" id="anc18"></a><span class="line-modified">772 #if ENABLE(WEBMETAL)</span>
<span class="line-modified">773     RuntimeEnabledFeatures::sharedFeatures().setWebMetalEnabled(enabled);</span>
774 #else
775     UNUSED_PARAM(enabled);
776 #endif
777 }
778 
779 void InternalSettings::setWebVREnabled(bool enabled)
780 {
781     RuntimeEnabledFeatures::sharedFeatures().setWebVREnabled(enabled);
782 }
783 
784 void InternalSettings::setScreenCaptureEnabled(bool enabled)
785 {
786 #if ENABLE(MEDIA_STREAM)
787     RuntimeEnabledFeatures::sharedFeatures().setScreenCaptureEnabled(enabled);
788 #else
789     UNUSED_PARAM(enabled);
790 #endif
791 }
792 
<a name="19" id="anc19"></a><span class="line-removed">793 void InternalSettings::setStorageAccessPromptsEnabled(bool enabled)</span>
<span class="line-removed">794 {</span>
<span class="line-removed">795     RuntimeEnabledFeatures::sharedFeatures().setStorageAccessPromptsEnabled(enabled);</span>
<span class="line-removed">796 }</span>
<span class="line-removed">797 </span>
798 ExceptionOr&lt;String&gt; InternalSettings::userInterfaceDirectionPolicy()
799 {
800     if (!m_page)
801         return Exception { InvalidAccessError };
802     switch (settings().userInterfaceDirectionPolicy()) {
803     case UserInterfaceDirectionPolicy::Content:
804         return &quot;Content&quot;_str;
805     case UserInterfaceDirectionPolicy::System:
806         return &quot;View&quot;_str;
807     }
808     ASSERT_NOT_REACHED();
809     return Exception { InvalidAccessError };
810 }
811 
812 ExceptionOr&lt;void&gt; InternalSettings::setUserInterfaceDirectionPolicy(const String&amp; policy)
813 {
814     if (!m_page)
815         return Exception { InvalidAccessError };
816     if (equalLettersIgnoringASCIICase(policy, &quot;content&quot;)) {
817         settings().setUserInterfaceDirectionPolicy(UserInterfaceDirectionPolicy::Content);
818         return { };
819     }
820     if (equalLettersIgnoringASCIICase(policy, &quot;view&quot;)) {
821         settings().setUserInterfaceDirectionPolicy(UserInterfaceDirectionPolicy::System);
822         return { };
823     }
824     return Exception { InvalidAccessError };
825 }
826 
827 ExceptionOr&lt;String&gt; InternalSettings::systemLayoutDirection()
828 {
829     if (!m_page)
830         return Exception { InvalidAccessError };
831     switch (settings().systemLayoutDirection()) {
832     case TextDirection::LTR:
833         return &quot;LTR&quot;_str;
834     case TextDirection::RTL:
835         return &quot;RTL&quot;_str;
836     }
837     ASSERT_NOT_REACHED();
838     return Exception { InvalidAccessError };
839 }
840 
841 ExceptionOr&lt;void&gt; InternalSettings::setSystemLayoutDirection(const String&amp; direction)
842 {
843     if (!m_page)
844         return Exception { InvalidAccessError };
845     if (equalLettersIgnoringASCIICase(direction, &quot;ltr&quot;)) {
846         settings().setSystemLayoutDirection(TextDirection::LTR);
847         return { };
848     }
849     if (equalLettersIgnoringASCIICase(direction, &quot;rtl&quot;)) {
850         settings().setSystemLayoutDirection(TextDirection::RTL);
851         return { };
852     }
853     return Exception { InvalidAccessError };
854 }
855 
856 ExceptionOr&lt;void&gt; InternalSettings::setFrameFlattening(FrameFlatteningValue frameFlattening)
857 {
858     if (!m_page)
859         return Exception { InvalidAccessError };
860     settings().setFrameFlattening(frameFlattening);
861     return { };
862 }
863 
864 void InternalSettings::setAllowsAnySSLCertificate(bool allowsAnyCertificate)
865 {
866     DeprecatedGlobalSettings::setAllowsAnySSLCertificate(allowsAnyCertificate);
867 #if USE(SOUP)
868     SoupNetworkSession::setShouldIgnoreTLSErrors(allowsAnyCertificate);
869 #endif
870 }
871 
872 ExceptionOr&lt;bool&gt; InternalSettings::deferredCSSParserEnabled()
873 {
874     if (!m_page)
875         return Exception { InvalidAccessError };
876     return settings().deferredCSSParserEnabled();
877 }
878 
879 ExceptionOr&lt;void&gt; InternalSettings::setDeferredCSSParserEnabled(bool enabled)
880 {
881     if (!m_page)
882         return Exception { InvalidAccessError };
883     settings().setDeferredCSSParserEnabled(enabled);
884     return { };
885 }
886 
887 ExceptionOr&lt;void&gt; InternalSettings::setShouldManageAudioSessionCategory(bool should)
888 {
889 #if USE(AUDIO_SESSION)
890     DeprecatedGlobalSettings::setShouldManageAudioSessionCategory(should);
891     return { };
892 #else
893     UNUSED_PARAM(should);
894     return Exception { InvalidAccessError };
895 #endif
896 }
897 
898 ExceptionOr&lt;void&gt; InternalSettings::setCustomPasteboardDataEnabled(bool enabled)
899 {
900     RuntimeEnabledFeatures::sharedFeatures().setCustomPasteboardDataEnabled(enabled);
901     return { };
902 }
903 
<a name="20" id="anc20"></a><span class="line-modified">904 ExceptionOr&lt;void&gt; InternalSettings::setAccessibilityEventsEnabled(bool enabled)</span>
905 {
906     if (!m_page)
907         return Exception { InvalidAccessError };
<a name="21" id="anc21"></a><span class="line-modified">908 #if ENABLE(ACCESSIBILITY_EVENTS)</span>
<span class="line-removed">909     settings().setAccessibilityEventsEnabled(enabled);</span>
<span class="line-removed">910 #else</span>
<span class="line-removed">911     UNUSED_PARAM(enabled);</span>
<span class="line-removed">912 #endif</span>
913     return { };
914 }
915 
<a name="22" id="anc22"></a><span class="line-modified">916 ExceptionOr&lt;void&gt; InternalSettings::setIncompleteImageBorderEnabled(bool enabled)</span>
917 {
918     if (!m_page)
919         return Exception { InvalidAccessError };
<a name="23" id="anc23"></a><span class="line-modified">920     settings().setIncompleteImageBorderEnabled(enabled);</span>








921     return { };
922 }
923 
924 static InternalSettings::ForcedAccessibilityValue settingsToInternalSettingsValue(Settings::ForcedAccessibilityValue value)
925 {
926     switch (value) {
927     case Settings::ForcedAccessibilityValue::System:
928         return InternalSettings::ForcedAccessibilityValue::System;
929     case Settings::ForcedAccessibilityValue::On:
930         return InternalSettings::ForcedAccessibilityValue::On;
931     case Settings::ForcedAccessibilityValue::Off:
932         return InternalSettings::ForcedAccessibilityValue::Off;
933     }
934 
935     ASSERT_NOT_REACHED();
936     return InternalSettings::ForcedAccessibilityValue::Off;
937 }
938 
939 static Settings::ForcedAccessibilityValue internalSettingsToSettingsValue(InternalSettings::ForcedAccessibilityValue value)
940 {
941     switch (value) {
942     case InternalSettings::ForcedAccessibilityValue::System:
943         return Settings::ForcedAccessibilityValue::System;
944     case InternalSettings::ForcedAccessibilityValue::On:
945         return Settings::ForcedAccessibilityValue::On;
946     case InternalSettings::ForcedAccessibilityValue::Off:
947         return Settings::ForcedAccessibilityValue::Off;
948     }
949 
950     ASSERT_NOT_REACHED();
951     return Settings::ForcedAccessibilityValue::Off;
952 }
953 
954 InternalSettings::ForcedAccessibilityValue InternalSettings::forcedColorsAreInvertedAccessibilityValue() const
955 {
956     return settingsToInternalSettingsValue(settings().forcedColorsAreInvertedAccessibilityValue());
957 }
958 
959 void InternalSettings::setForcedColorsAreInvertedAccessibilityValue(InternalSettings::ForcedAccessibilityValue value)
960 {
961     settings().setForcedColorsAreInvertedAccessibilityValue(internalSettingsToSettingsValue(value));
962 }
963 
964 InternalSettings::ForcedAccessibilityValue InternalSettings::forcedDisplayIsMonochromeAccessibilityValue() const
965 {
966     return settingsToInternalSettingsValue(settings().forcedDisplayIsMonochromeAccessibilityValue());
967 }
968 
969 void InternalSettings::setForcedDisplayIsMonochromeAccessibilityValue(InternalSettings::ForcedAccessibilityValue value)
970 {
971     settings().setForcedDisplayIsMonochromeAccessibilityValue(internalSettingsToSettingsValue(value));
972 }
973 
974 InternalSettings::ForcedAccessibilityValue InternalSettings::forcedPrefersReducedMotionAccessibilityValue() const
975 {
976     return settingsToInternalSettingsValue(settings().forcedPrefersReducedMotionAccessibilityValue());
977 }
978 
979 void InternalSettings::setForcedPrefersReducedMotionAccessibilityValue(InternalSettings::ForcedAccessibilityValue value)
980 {
981     settings().setForcedPrefersReducedMotionAccessibilityValue(internalSettingsToSettingsValue(value));
982 }
983 
984 bool InternalSettings::webAnimationsCSSIntegrationEnabled()
985 {
986     return RuntimeEnabledFeatures::sharedFeatures().webAnimationsCSSIntegrationEnabled();
987 }
988 
<a name="24" id="anc24"></a>




989 // If you add to this class, make sure that you update the Backup class for test reproducability!
990 
991 }
<a name="25" id="anc25"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="25" type="hidden" />
</body>
</html>
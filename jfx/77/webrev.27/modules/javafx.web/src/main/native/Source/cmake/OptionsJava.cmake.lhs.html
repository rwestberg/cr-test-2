<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames modules/javafx.web/src/main/native/Source/cmake/OptionsJava.cmake</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 include(GNUInstallDirs)
  2 
  3 set(WEBKITJAVA_API_VERSION 4.0)
  4 
  5 set(ICU_UNICODE TRUE)
<a name="1" id="anc1"></a>

  6 SET_AND_EXPOSE_TO_BUILD(USE_IMAGEIO TRUE)
  7 SET_AND_EXPOSE_TO_BUILD(USE_TEXTURE_MAPPER TRUE)
  8 SET_AND_EXPOSE_TO_BUILD(USE_NPOBJECT OFF)
  9 SET_AND_EXPOSE_TO_BUILD(ENABLE_JAVA_BRIDGE ON)
 10 SET_AND_EXPOSE_TO_BUILD(ENABLE_JAVA_JSC ON)
 11 if (ICU_UNICODE)
 12     SET_AND_EXPOSE_TO_BUILD(USE_ICU_UNICODE TRUE)
 13 else ()
 14     SET_AND_EXPOSE_TO_BUILD(USE_JAVA_UNICODE TRUE)
 15 endif ()
 16 
 17 # Eventloop
 18 SET_AND_EXPOSE_TO_BUILD(WTF_DEFAULT_EVENT_LOOP 0)
 19 if (WIN32)
 20     SET_AND_EXPOSE_TO_BUILD(USE_WINDOWS_EVENT_LOOP 1)
 21 elseif (APPLE)
 22     SET_AND_EXPOSE_TO_BUILD(USE_COCOA_EVENT_LOOP 1)
 23 elseif (UNIX)
 24     SET_AND_EXPOSE_TO_BUILD(USE_GENERIC_EVENT_LOOP 1)
 25 endif ()
 26 
 27 # These are shared variables, but we special case their definition so that we can use the
 28 # CMAKE_INSTALL_* variables that are populated by the GNUInstallDirs macro.
 29 set(LIB_INSTALL_DIR &quot;${CMAKE_INSTALL_FULL_LIBDIR}&quot; CACHE PATH &quot;Absolute path to library installation directory&quot;)
 30 set(EXEC_INSTALL_DIR &quot;${CMAKE_INSTALL_FULL_BINDIR}&quot; CACHE PATH &quot;Absolute path to executable installation directory&quot;)
 31 
 32 set(SQLITE_LIBRARIES SqliteJava)
 33 set(LIBXML2_LIBRARIES XMLJava)
 34 set(LIBXSLT_LIBRARIES XSLTJava)
 35 
 36 set(ICU_LIBRARIES icuuc icudata)
 37 set(ICU_I18N_LIBRARIES icui18n icuuc icudata)
 38 set(ICU_DATA_LIBRARIES icudata)
 39 
 40 find_package(JNI REQUIRED)
 41 find_package(Threads REQUIRED)
 42 
 43 if (APPLE)
 44     add_definitions(-DUSE_CF=1)
 45     add_definitions(-DJSC_OBJC_API_ENABLED=0)
 46 
 47     set(CMAKE_MACOSX_RPATH TRUE)
 48     set(CMAKE_INSTALL_RPATH &quot;@loader_path/.&quot;)
 49     set(CMAKE_BUILD_WITH_INSTALL_RPATH TRUE)
 50 elseif (UNIX)
 51     set(CMAKE_SKIP_RPATH TRUE)
 52 endif ()
 53 
 54 if (WIN32)
 55     # Second, for multi-config builds (e.g. msvc)
 56     foreach (OUTPUTCONFIG ${CMAKE_CONFIGURATION_TYPES})
 57         string(TOUPPER ${OUTPUTCONFIG} OUTPUTCONFIG)
 58         set(CMAKE_RUNTIME_OUTPUT_DIRECTORY_${OUTPUTCONFIG} &quot;${CMAKE_BINARY_DIR}/bin&quot;)
 59         set(CMAKE_LIBRARY_OUTPUT_DIRECTORY_${OUTPUTCONFIG} &quot;${CMAKE_BINARY_DIR}/lib&quot;)
 60         set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY_${OUTPUTCONFIG} &quot;${CMAKE_BINARY_DIR}/lib&quot;)
 61     endforeach (OUTPUTCONFIG CMAKE_CONFIGURATION_TYPES)
 62 
 63     add_definitions(-DNOMINMAX -DUNICODE -D_UNICODE -D_WINDOWS -DWINVER=0x601)
 64 
 65     include(OptionsMSVC)
 66 
 67     # If &lt;winsock2.h&gt; is not included before &lt;windows.h&gt; redefinition errors occur
 68     # unless _WINSOCKAPI_ is defined before &lt;windows.h&gt; is included
 69     add_definitions(-D_WINSOCKAPI_=)
 70 elseif(APPLE)
 71     SET_AND_EXPOSE_TO_BUILD(USE_CF ON)
 72     SET_AND_EXPOSE_TO_BUILD(HAVE_QOS_CLASSES ON)
 73 else()
 74     set(CMAKE_SHARED_LINKER_FLAGS &quot;${CMAKE_SHARED_LINKER_FLAGS} -Wl,--export-dynamic&quot;)
 75 endif()
 76 
 77 WEBKIT_OPTION_BEGIN()
<a name="2" id="anc2"></a><span class="line-modified"> 78 </span>
 79 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_CSS_COMPOSITING PRIVATE ON)
 80 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_DRAG_SUPPORT PUBLIC ON)
<a name="3" id="anc3"></a><span class="line-removed"> 81 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_ICONDATABASE PUBLIC OFF)</span>
 82 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_TOUCH_EVENTS PUBLIC OFF)
 83 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_VIDEO PUBLIC ON)
 84 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_3D_TRANSFORMS PRIVATE ON)
 85 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_CSS3_TEXT PRIVATE OFF)
 86 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_DATALIST_ELEMENT PUBLIC OFF)
 87 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_DOWNLOAD_ATTRIBUTE PRIVATE OFF)
 88 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_FTPDIR PRIVATE ON)
 89 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_FULLSCREEN_API PRIVATE ON)
 90 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_INDEXED_DATABASE PRIVATE OFF)
 91 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_INPUT_TYPE_COLOR PRIVATE ON)
 92 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_MEDIA_CONTROLS_SCRIPT PRIVATE ON)
 93 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_MHTML PRIVATE ON)
<a name="4" id="anc4"></a><span class="line-removed"> 94 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_NAVIGATOR_CONTENT_UTILS PRIVATE OFF)</span>
 95 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_NETSCAPE_PLUGIN_API PRIVATE ON)
 96 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_NOTIFICATIONS PRIVATE ON)
 97 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_QUOTA PRIVATE OFF)
 98 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_RESOLUTION_MEDIA_QUERY PRIVATE ON)
 99 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_VIDEO_TRACK PRIVATE ON)
100 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_WEBGL PRIVATE OFF)
101 
102 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_INPUT_TYPE_DATE PRIVATE OFF)
103 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_INPUT_TYPE_DATETIMELOCAL PRIVATE OFF)
104 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_INPUT_TYPE_DATETIME_INCOMPLETE PRIVATE OFF)
105 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_INPUT_TYPE_MONTH PRIVATE OFF)
106 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_INPUT_TYPE_TIME PRIVATE OFF)
107 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_INPUT_TYPE_WEEK PRIVATE OFF)
108 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_REMOTE_INSPECTOR PRIVATE OFF)
109 
110 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_INTL PRIVATE ON)
111 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_WEB_AUDIO PRIVATE OFF)
112 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_WEB_CRYPTO PRIVATE OFF)
113 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_PUBLIC_SUFFIX_LIST PRIVATE OFF)
114 
115 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_FTL_JIT PUBLIC OFF)
116 WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_WEBASSEMBLY PRIVATE OFF)
117 
118 if (WIN32)
119     # FIXME: Port bmalloc to Windows. https://bugs.webkit.org/show_bug.cgi?id=143310
120     WEBKIT_OPTION_DEFAULT_PORT_VALUE(USE_SYSTEM_MALLOC PRIVATE ON)
121     # Disable 32-bit JIT on Windows. https://bugs.webkit.org/show_bug.cgi?id=185989
122     if (${WTF_CPU_X86})
123         WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_JIT PUBLIC OFF)
124     endif ()
125 endif ()
126 
127 
128 # Finalize the value for all options. Do not attempt to use an option before
129 # this point, and do not attempt to change any option after this point.
130 WEBKIT_OPTION_END()
131 
132 
133 set(ENABLE_WEBKIT_LEGACY ON)
134 set(ENABLE_WEBKIT OFF)
135 add_definitions(-DBUILDING_JAVA__=1)
136 add_definitions(-DDATA_DIR=&quot;${CMAKE_INSTALL_DATADIR}&quot;)
137 # add_definitions(-DUSE_CROSS_PLATFORM_CONTEXT_MENUS=1)
138 
139 set(FORWARDING_HEADERS_DIR ${DERIVED_SOURCES_DIR}/ForwardingHeaders)
140 
141 
142 set(WTF_LIBRARY_TYPE STATIC)
143 set(JavaScriptCore_LIBRARY_TYPE STATIC)
144 set(WebCore_LIBRARY_TYPE STATIC)
145 set(WebCoreTestSupport_LIBRARY_TYPE STATIC)
146 set(PAL_LIBRARY_TYPE STATIC)
147 
148 
149 if (CMAKE_MAJOR_VERSION LESS 3)
150     # Before CMake 3 it was necessary to use a build script instead of using cmake --build directly
151     # to preserve colors and pretty-printing.
152 
153     build_command(COMMAND_LINE_TO_BUILD)
154     # build_command unconditionally adds -i (ignore errors) for make, and there&#39;s
155     # no reasonable way to turn that off, so we just replace it with -k, which has
156     # the same effect, except that the return code will indicate that an error occurred.
157     # See: http://www.cmake.org/cmake/help/v3.0/command/build_command.html
158     string(REPLACE &quot; -i&quot; &quot; -k&quot; COMMAND_LINE_TO_BUILD ${COMMAND_LINE_TO_BUILD})
159     file(WRITE
160         ${CMAKE_BINARY_DIR}${CMAKE_FILES_DIRECTORY}/build.sh
161         &quot;#!/bin/sh\n&quot;
162         &quot;${COMMAND_LINE_TO_BUILD} $@&quot;
163     )
164     file(COPY ${CMAKE_BINARY_DIR}${CMAKE_FILES_DIRECTORY}/build.sh
165         DESTINATION ${CMAKE_BINARY_DIR}
166         FILE_PERMISSIONS OWNER_READ OWNER_WRITE OWNER_EXECUTE GROUP_READ GROUP_EXECUTE
167     )
168 endif ()
169 
<a name="5" id="anc5"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="5" type="hidden" />
</body>
</html>
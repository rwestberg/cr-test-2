<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/FontCascade.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="FontCascade.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="FontCascadeDescription.cpp.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/FontCascade.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -107,11 +107,11 @@</span>
      WEBCORE_EXPORT void update(RefPtr&lt;FontSelector&gt;&amp;&amp; = nullptr) const;
  
      enum CustomFontNotReadyAction { DoNotPaintIfFontNotReady, UseFallbackIfFontNotReady };
      WEBCORE_EXPORT float drawText(GraphicsContext&amp;, const TextRun&amp;, const FloatPoint&amp;, unsigned from = 0, Optional&lt;unsigned&gt; to = WTF::nullopt, CustomFontNotReadyAction = DoNotPaintIfFontNotReady) const;
      static void drawGlyphs(GraphicsContext&amp;, const Font&amp;, const GlyphBuffer&amp;, unsigned from, unsigned numGlyphs, const FloatPoint&amp;, FontSmoothingMode);
<span class="udiff-line-modified-removed">-     void drawEmphasisMarks(GraphicsContext&amp;, const TextRun&amp;, const AtomicString&amp; mark, const FloatPoint&amp;, unsigned from = 0, Optional&lt;unsigned&gt; to = WTF::nullopt) const;</span>
<span class="udiff-line-modified-added">+     void drawEmphasisMarks(GraphicsContext&amp;, const TextRun&amp;, const AtomString&amp; mark, const FloatPoint&amp;, unsigned from = 0, Optional&lt;unsigned&gt; to = WTF::nullopt) const;</span>
  
      DashArray dashesForIntersectionsWithRect(const TextRun&amp;, const FloatPoint&amp; textOrigin, const FloatRect&amp; lineExtents) const;
  
      float widthOfTextRange(const TextRun&amp;, unsigned from, unsigned to, HashSet&lt;const Font*&gt;* fallbackFonts = 0, float* outWidthBeforeRange = nullptr, float* outWidthAfterRange = nullptr) const;
      WEBCORE_EXPORT float width(const TextRun&amp;, HashSet&lt;const Font*&gt;* fallbackFonts = 0, GlyphOverflow* = 0) const;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -134,31 +134,31 @@</span>
      FontRenderingMode renderingMode() const { return m_fontDescription.renderingMode(); }
  
      bool enableKerning() const { return m_enableKerning; }
      bool requiresShaping() const { return m_requiresShaping; }
  
<span class="udiff-line-modified-removed">-     const AtomicString&amp; firstFamily() const { return m_fontDescription.firstFamily(); }</span>
<span class="udiff-line-modified-added">+     const AtomString&amp; firstFamily() const { return m_fontDescription.firstFamily(); }</span>
      unsigned familyCount() const { return m_fontDescription.familyCount(); }
<span class="udiff-line-modified-removed">-     const AtomicString&amp; familyAt(unsigned i) const { return m_fontDescription.familyAt(i); }</span>
<span class="udiff-line-modified-added">+     const AtomString&amp; familyAt(unsigned i) const { return m_fontDescription.familyAt(i); }</span>
  
      // A WTF::nullopt return value indicates &quot;font-style: normal&quot;.
      Optional&lt;FontSelectionValue&gt; italic() const { return m_fontDescription.italic(); }
      FontSelectionValue weight() const { return m_fontDescription.weight(); }
      FontWidthVariant widthVariant() const { return m_fontDescription.widthVariant(); }
  
      bool isPlatformFont() const { return m_fonts-&gt;isForPlatformFont(); }
  
      const FontMetrics&amp; fontMetrics() const { return primaryFont().fontMetrics(); }
      float spaceWidth() const { return primaryFont().spaceWidth() + m_letterSpacing; }
<span class="udiff-line-modified-removed">-     float tabWidth(const Font&amp;, unsigned tabSize, float position) const;</span>
<span class="udiff-line-modified-removed">-     float tabWidth(unsigned tabSize, float position) const { return tabWidth(primaryFont(), tabSize, position); }</span>
<span class="udiff-line-modified-added">+     float tabWidth(const Font&amp;, const TabSize&amp;, float) const;</span>
<span class="udiff-line-modified-added">+     float tabWidth(const TabSize&amp; tabSize, float position) const { return tabWidth(primaryFont(), tabSize, position); }</span>
      bool hasValidAverageCharWidth() const;
      bool fastAverageCharWidthIfAvailable(float &amp;width) const; // returns true on success
  
<span class="udiff-line-modified-removed">-     int emphasisMarkAscent(const AtomicString&amp;) const;</span>
<span class="udiff-line-modified-removed">-     int emphasisMarkDescent(const AtomicString&amp;) const;</span>
<span class="udiff-line-modified-removed">-     int emphasisMarkHeight(const AtomicString&amp;) const;</span>
<span class="udiff-line-modified-added">+     int emphasisMarkAscent(const AtomString&amp;) const;</span>
<span class="udiff-line-modified-added">+     int emphasisMarkDescent(const AtomString&amp;) const;</span>
<span class="udiff-line-modified-added">+     int emphasisMarkHeight(const AtomString&amp;) const;</span>
  
      const Font&amp; primaryFont() const;
      const FontRanges&amp; fallbackRangesAt(unsigned) const;
      GlyphData glyphDataForCharacter(UChar32, bool mirror, FontVariant = AutoVariant) const;
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -204,25 +204,25 @@</span>
      enum ForTextEmphasisOrNot { NotForTextEmphasis, ForTextEmphasis };
  
      float glyphBufferForTextRun(CodePath, const TextRun&amp;, unsigned from, unsigned to, GlyphBuffer&amp;) const;
      // Returns the initial in-stream advance.
      float getGlyphsAndAdvancesForSimpleText(const TextRun&amp;, unsigned from, unsigned to, GlyphBuffer&amp;, ForTextEmphasisOrNot = NotForTextEmphasis) const;
<span class="udiff-line-modified-removed">-     void drawEmphasisMarksForSimpleText(GraphicsContext&amp;, const TextRun&amp;, const AtomicString&amp; mark, const FloatPoint&amp;, unsigned from, unsigned to) const;</span>
<span class="udiff-line-modified-added">+     void drawEmphasisMarksForSimpleText(GraphicsContext&amp;, const TextRun&amp;, const AtomString&amp; mark, const FloatPoint&amp;, unsigned from, unsigned to) const;</span>
      void drawGlyphBuffer(GraphicsContext&amp;, const GlyphBuffer&amp;, FloatPoint&amp;, CustomFontNotReadyAction) const;
<span class="udiff-line-modified-removed">-     void drawEmphasisMarks(GraphicsContext&amp;, const GlyphBuffer&amp;, const AtomicString&amp;, const FloatPoint&amp;) const;</span>
<span class="udiff-line-modified-added">+     void drawEmphasisMarks(GraphicsContext&amp;, const GlyphBuffer&amp;, const AtomString&amp;, const FloatPoint&amp;) const;</span>
      float floatWidthForSimpleText(const TextRun&amp;, HashSet&lt;const Font*&gt;* fallbackFonts = 0, GlyphOverflow* = 0) const;
      int offsetForPositionForSimpleText(const TextRun&amp;, float position, bool includePartialGlyphs) const;
      void adjustSelectionRectForSimpleText(const TextRun&amp;, LayoutRect&amp; selectionRect, unsigned from, unsigned to) const;
  
<span class="udiff-line-modified-removed">-     Optional&lt;GlyphData&gt; getEmphasisMarkGlyphData(const AtomicString&amp;) const;</span>
<span class="udiff-line-modified-added">+     Optional&lt;GlyphData&gt; getEmphasisMarkGlyphData(const AtomString&amp;) const;</span>
  
      static bool canReturnFallbackFontsForComplexText();
      static bool canExpandAroundIdeographsInComplexText();
  
      // Returns the initial in-stream advance.
      float getGlyphsAndAdvancesForComplexText(const TextRun&amp;, unsigned from, unsigned to, GlyphBuffer&amp;, ForTextEmphasisOrNot = NotForTextEmphasis) const;
<span class="udiff-line-modified-removed">-     void drawEmphasisMarksForComplexText(GraphicsContext&amp;, const TextRun&amp;, const AtomicString&amp; mark, const FloatPoint&amp;, unsigned from, unsigned to) const;</span>
<span class="udiff-line-modified-added">+     void drawEmphasisMarksForComplexText(GraphicsContext&amp;, const TextRun&amp;, const AtomString&amp; mark, const FloatPoint&amp;, unsigned from, unsigned to) const;</span>
      float floatWidthForComplexText(const TextRun&amp;, HashSet&lt;const Font*&gt;* fallbackFonts = 0, GlyphOverflow* = 0) const;
      int offsetForPositionForComplexText(const TextRun&amp;, float position, bool includePartialGlyphs) const;
      void adjustSelectionRectForComplexText(const TextRun&amp;, LayoutRect&amp; selectionRect, unsigned from, unsigned to) const;
  
      static std::pair&lt;unsigned, bool&gt; expansionOpportunityCountInternal(const LChar*, unsigned length, TextDirection, ExpansionBehavior);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -352,15 +352,15 @@</span>
  inline FontSelector* FontCascade::fontSelector() const
  {
      return m_fonts ? m_fonts-&gt;fontSelector() : nullptr;
  }
  
<span class="udiff-line-modified-removed">- inline float FontCascade::tabWidth(const Font&amp; font, unsigned tabSize, float position) const</span>
<span class="udiff-line-modified-added">+ inline float FontCascade::tabWidth(const Font&amp; font, const TabSize&amp; tabSize, float position) const</span>
  {
<span class="udiff-line-modified-removed">-     if (!tabSize)</span>
<span class="udiff-line-modified-added">+     float baseTabWidth = tabSize.widthInPixels(font.spaceWidth());</span>
<span class="udiff-line-added">+     if (!baseTabWidth)</span>
          return letterSpacing();
<span class="udiff-line-modified-removed">-     float tabWidth = tabSize * font.spaceWidth() + letterSpacing();</span>
<span class="udiff-line-modified-removed">-     float tabDeltaWidth = tabWidth - fmodf(position, tabWidth);</span>
<span class="udiff-line-removed">-     return (tabDeltaWidth &lt; font.spaceWidth() / 2) ? tabWidth : tabDeltaWidth;</span>
<span class="udiff-line-modified-added">+     float tabDeltaWidth = baseTabWidth - fmodf(position, baseTabWidth);</span>
<span class="udiff-line-modified-added">+     return (tabDeltaWidth &lt; font.spaceWidth() / 2) ? baseTabWidth : tabDeltaWidth;</span>
  }
  
  }
</pre>
<center><a href="FontCascade.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="FontCascadeDescription.cpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>
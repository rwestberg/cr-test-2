<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New modules/javafx.web/src/main/native/Source/WebCore/platform/libwpe/PlatformKeyboardEventLibWPE.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
   1 /*
   2  * Copyright (C) 2014 Igalia S.L.
   3  *
   4  * Redistribution and use in source and binary forms, with or without
   5  * modification, are permitted provided that the following conditions
   6  * are met:
   7  * 1. Redistributions of source code must retain the above copyright
   8  *    notice, this list of conditions and the following disclaimer.
   9  * 2. Redistributions in binary form must reproduce the above copyright
  10  *    notice, this list of conditions and the following disclaimer in the
  11  *    documentation and/or other materials provided with the distribution.
  12  *
  13  * THIS SOFTWARE IS PROVIDED BY APPLE INC. AND ITS CONTRIBUTORS ``AS IS&#39;&#39;
  14  * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  15  * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  16  * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL APPLE INC. OR ITS CONTRIBUTORS
  17  * BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
  18  * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
  19  * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  20  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  21  * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
  22  * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF
  23  * THE POSSIBILITY OF SUCH DAMAGE.
  24  */
  25 
  26 #include &quot;config.h&quot;
  27 #include &quot;PlatformKeyboardEvent.h&quot;
  28 
  29 #if USE(LIBWPE)
  30 
  31 #include &quot;WindowsKeyboardCodes.h&quot;
  32 #include &lt;wpe/wpe.h&gt;
  33 #include &lt;wtf/HexNumber.h&gt;
  34 #include &lt;wtf/text/StringBuilder.h&gt;
  35 
  36 namespace WebCore {
  37 
  38 // FIXME: This is incomplete. We should change this to mirror
  39 // more like what Firefox does, and generate these switch statements
  40 // at build time.
  41 // https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values
  42 String PlatformKeyboardEvent::keyValueForWPEKeyCode(unsigned keyCode)
  43 {
  44     switch (keyCode) {
  45     // Modifier keys.
  46     case WPE_KEY_Alt_L:
  47     case WPE_KEY_Alt_R:
  48         return &quot;Alt&quot;_s;
  49     // Firefox uses WPE_KEY_Mode_switch for AltGraph as well.
  50     case WPE_KEY_ISO_Level3_Shift:
  51     case WPE_KEY_ISO_Level3_Latch:
  52     case WPE_KEY_ISO_Level3_Lock:
  53     case WPE_KEY_ISO_Level5_Shift:
  54     case WPE_KEY_ISO_Level5_Latch:
  55     case WPE_KEY_ISO_Level5_Lock:
  56         return &quot;AltGraph&quot;_s;
  57     case WPE_KEY_Caps_Lock:
  58         return &quot;CapsLock&quot;_s;
  59     case WPE_KEY_Control_L:
  60     case WPE_KEY_Control_R:
  61         return &quot;Control&quot;_s;
  62     // Fn: This is typically a hardware key that does not generate a separate code.
  63     // FnLock.
  64     case WPE_KEY_Hyper_L:
  65     case WPE_KEY_Hyper_R:
  66         return &quot;Hyper&quot;_s;
  67     case WPE_KEY_Meta_L:
  68     case WPE_KEY_Meta_R:
  69         return &quot;Meta&quot;_s;
  70     case WPE_KEY_Num_Lock:
  71         return &quot;NumLock&quot;_s;
  72     case WPE_KEY_Scroll_Lock:
  73         return &quot;ScrollLock&quot;_s;
  74     case WPE_KEY_Shift_L:
  75     case WPE_KEY_Shift_R:
  76         return &quot;Shift&quot;_s;
  77     case WPE_KEY_Super_L:
  78     case WPE_KEY_Super_R:
  79         return &quot;Super&quot;_s;
  80     // Symbol.
  81     // SymbolLock.
  82 
  83     // Whitespace keys.
  84     case WPE_KEY_Return:
  85     case WPE_KEY_KP_Enter:
  86     case WPE_KEY_ISO_Enter:
  87     case WPE_KEY_3270_Enter:
  88         return &quot;Enter&quot;_s;
  89     case WPE_KEY_Tab:
  90     case WPE_KEY_KP_Tab:
  91         return &quot;Tab&quot;_s;
  92 
  93     // Navigation keys.
  94     case WPE_KEY_Down:
  95     case WPE_KEY_KP_Down:
  96         return &quot;ArrowDown&quot;_s;
  97     case WPE_KEY_Left:
  98     case WPE_KEY_KP_Left:
  99         return &quot;ArrowLeft&quot;_s;
 100     case WPE_KEY_Right:
 101     case WPE_KEY_KP_Right:
 102         return &quot;ArrowRight&quot;_s;
 103     case WPE_KEY_Up:
 104     case WPE_KEY_KP_Up:
 105         return &quot;ArrowUp&quot;_s;
 106     case WPE_KEY_End:
 107     case WPE_KEY_KP_End:
 108         return &quot;End&quot;_s;
 109     case WPE_KEY_Home:
 110     case WPE_KEY_KP_Home:
 111         return &quot;Home&quot;_s;
 112     case WPE_KEY_Page_Down:
 113     case WPE_KEY_KP_Page_Down:
 114         return &quot;PageDown&quot;_s;
 115     case WPE_KEY_Page_Up:
 116     case WPE_KEY_KP_Page_Up:
 117         return &quot;PageUp&quot;_s;
 118 
 119     // Editing keys.
 120     case WPE_KEY_BackSpace:
 121         return &quot;Backspace&quot;_s;
 122     case WPE_KEY_Clear:
 123         return &quot;Clear&quot;_s;
 124     case WPE_KEY_Copy:
 125         return &quot;Copy&quot;_s;
 126     case WPE_KEY_3270_CursorSelect:
 127         return &quot;CrSel&quot;_s;
 128     case WPE_KEY_Cut:
 129         return &quot;Cut&quot;_s;
 130     case WPE_KEY_Delete:
 131     case WPE_KEY_KP_Delete:
 132         return &quot;Delete&quot;_s;
 133     case WPE_KEY_3270_EraseEOF:
 134         return &quot;EraseEof&quot;_s;
 135     case WPE_KEY_3270_ExSelect:
 136         return &quot;ExSel&quot;_s;
 137     case WPE_KEY_Insert:
 138     case WPE_KEY_KP_Insert:
 139         return &quot;Insert&quot;_s;
 140     case WPE_KEY_Paste:
 141         return &quot;Paste&quot;_s;
 142     case WPE_KEY_Redo:
 143         return &quot;Redo&quot;_s;
 144     case WPE_KEY_Undo:
 145         return &quot;Undo&quot;_s;
 146 
 147     // UI keys.
 148     // Accept.
 149     // Again.
 150     case WPE_KEY_3270_Attn:
 151         return &quot;Attn&quot;_s;
 152     case WPE_KEY_Cancel:
 153         return &quot;Cancel&quot;_s;
 154     case WPE_KEY_Menu:
 155         return &quot;ContextMenu&quot;_s;
 156     case WPE_KEY_Escape:
 157         return &quot;Escape&quot;_s;
 158     case WPE_KEY_Execute:
 159         return &quot;Execute&quot;_s;
 160     case WPE_KEY_Find:
 161         return &quot;Find&quot;_s;
 162     case WPE_KEY_Help:
 163         return &quot;Help&quot;_s;
 164     case WPE_KEY_Pause:
 165     case WPE_KEY_Break:
 166         return &quot;Pause&quot;_s;
 167     case WPE_KEY_3270_Play:
 168         return &quot;Play&quot;_s;
 169     // Props.
 170     case WPE_KEY_Select:
 171         return &quot;Select&quot;_s;
 172     case WPE_KEY_ZoomIn:
 173         return &quot;ZoomIn&quot;_s;
 174     case WPE_KEY_ZoomOut:
 175         return &quot;ZoomOut&quot;_s;
 176 
 177     // Device keys.
 178     case WPE_KEY_MonBrightnessDown:
 179         return &quot;BrightnessDown&quot;_s;
 180     case WPE_KEY_MonBrightnessUp:
 181         return &quot;BrightnessUp&quot;_s;
 182     case WPE_KEY_Eject:
 183         return &quot;Eject&quot;_s;
 184     case WPE_KEY_LogOff:
 185         return &quot;LogOff&quot;_s;
 186     // Power.
 187     case WPE_KEY_PowerDown:
 188     case WPE_KEY_PowerOff:
 189         return &quot;PowerOff&quot;_s;
 190     case WPE_KEY_3270_PrintScreen:
 191     case WPE_KEY_Print:
 192     case WPE_KEY_Sys_Req:
 193         return &quot;PrintScreen&quot;_s;
 194     case WPE_KEY_Hibernate:
 195         return &quot;Hibernate&quot;_s;
 196     case WPE_KEY_Standby:
 197     case WPE_KEY_Suspend:
 198     case WPE_KEY_Sleep:
 199         return &quot;Standby&quot;_s;
 200     case WPE_KEY_WakeUp:
 201         return &quot;WakeUp&quot;_s;
 202 
 203     // IME keys.
 204     case WPE_KEY_MultipleCandidate:
 205         return &quot;AllCandidates&quot;_s;
 206     case WPE_KEY_Eisu_Shift:
 207     case WPE_KEY_Eisu_toggle:
 208         return &quot;Alphanumeric&quot;_s;
 209     case WPE_KEY_Codeinput:
 210         return &quot;CodeInput&quot;_s;
 211     case WPE_KEY_Multi_key:
 212         return &quot;Compose&quot;_s;
 213     case WPE_KEY_Henkan:
 214         return &quot;Convert&quot;_s;
 215     case WPE_KEY_dead_grave:
 216     case WPE_KEY_dead_acute:
 217     case WPE_KEY_dead_circumflex:
 218     case WPE_KEY_dead_tilde:
 219     case WPE_KEY_dead_macron:
 220     case WPE_KEY_dead_breve:
 221     case WPE_KEY_dead_abovedot:
 222     case WPE_KEY_dead_diaeresis:
 223     case WPE_KEY_dead_abovering:
 224     case WPE_KEY_dead_doubleacute:
 225     case WPE_KEY_dead_caron:
 226     case WPE_KEY_dead_cedilla:
 227     case WPE_KEY_dead_ogonek:
 228     case WPE_KEY_dead_iota:
 229     case WPE_KEY_dead_voiced_sound:
 230     case WPE_KEY_dead_semivoiced_sound:
 231     case WPE_KEY_dead_belowdot:
 232     case WPE_KEY_dead_hook:
 233     case WPE_KEY_dead_horn:
 234     case WPE_KEY_dead_stroke:
 235     case WPE_KEY_dead_abovecomma:
 236     case WPE_KEY_dead_abovereversedcomma:
 237     case WPE_KEY_dead_doublegrave:
 238     case WPE_KEY_dead_belowring:
 239     case WPE_KEY_dead_belowmacron:
 240     case WPE_KEY_dead_belowcircumflex:
 241     case WPE_KEY_dead_belowtilde:
 242     case WPE_KEY_dead_belowbreve:
 243     case WPE_KEY_dead_belowdiaeresis:
 244     case WPE_KEY_dead_invertedbreve:
 245     case WPE_KEY_dead_belowcomma:
 246     case WPE_KEY_dead_currency:
 247     case WPE_KEY_dead_a:
 248     case WPE_KEY_dead_A:
 249     case WPE_KEY_dead_e:
 250     case WPE_KEY_dead_E:
 251     case WPE_KEY_dead_i:
 252     case WPE_KEY_dead_I:
 253     case WPE_KEY_dead_o:
 254     case WPE_KEY_dead_O:
 255     case WPE_KEY_dead_u:
 256     case WPE_KEY_dead_U:
 257     case WPE_KEY_dead_small_schwa:
 258     case WPE_KEY_dead_capital_schwa:
 259         return &quot;Dead&quot;_s;
 260     // FinalMode
 261     case WPE_KEY_ISO_First_Group:
 262         return &quot;GroupFirst&quot;_s;
 263     case WPE_KEY_ISO_Last_Group:
 264         return &quot;GroupLast&quot;_s;
 265     case WPE_KEY_ISO_Next_Group:
 266         return &quot;GroupNext&quot;_s;
 267     case WPE_KEY_ISO_Prev_Group:
 268         return &quot;GroupPrevious&quot;_s;
 269     case WPE_KEY_Mode_switch:
 270         return &quot;ModeChange&quot;_s;
 271     // NextCandidate.
 272     case WPE_KEY_Muhenkan:
 273         return &quot;NonConvert&quot;_s;
 274     case WPE_KEY_PreviousCandidate:
 275         return &quot;PreviousCandidate&quot;_s;
 276     // Process.
 277     case WPE_KEY_SingleCandidate:
 278         return &quot;SingleCandidate&quot;_s;
 279 
 280     // Korean and Japanese keys.
 281     case WPE_KEY_Hangul:
 282         return &quot;HangulMode&quot;_s;
 283     case WPE_KEY_Hangul_Hanja:
 284         return &quot;HanjaMode&quot;_s;
 285     case WPE_KEY_Hangul_Jeonja:
 286         return &quot;JunjaMode&quot;_s;
 287     case WPE_KEY_Hankaku:
 288         return &quot;Hankaku&quot;_s;
 289     case WPE_KEY_Hiragana:
 290         return &quot;Hiragana&quot;_s;
 291     case WPE_KEY_Hiragana_Katakana:
 292         return &quot;HiraganaKatakana&quot;_s;
 293     case WPE_KEY_Kana_Lock:
 294     case WPE_KEY_Kana_Shift:
 295         return &quot;KanaMode&quot;_s;
 296     case WPE_KEY_Kanji:
 297         return &quot;KanjiMode&quot;_s;
 298     case WPE_KEY_Katakana:
 299         return &quot;Katakana&quot;_s;
 300     case WPE_KEY_Romaji:
 301         return &quot;Romaji&quot;_s;
 302     case WPE_KEY_Zenkaku:
 303         return &quot;Zenkaku&quot;_s;
 304     case WPE_KEY_Zenkaku_Hankaku:
 305         return &quot;ZenkakuHanaku&quot;_s;
 306 
 307     // Application Keys
 308     case WPE_KEY_AudioMedia:
 309         return &quot;LaunchMediaPlayer&quot;_s;
 310 
 311     // Browser Keys
 312     case WPE_KEY_Back:
 313         return &quot;BrowserBack&quot;_s;
 314     case WPE_KEY_Favorites:
 315         return &quot;BrowserFavorites&quot;_s;
 316     case WPE_KEY_Forward:
 317         return &quot;BrowserForward&quot;_s;
 318     case WPE_KEY_HomePage:
 319         return &quot;BrowserHome&quot;_s;
 320     case WPE_KEY_Refresh:
 321         return &quot;BrowserRefresh&quot;_s;
 322     case WPE_KEY_Search:
 323         return &quot;BrowserSearch&quot;_s;
 324     case WPE_KEY_Stop:
 325         return &quot;BrowserStop&quot;_s;
 326 
 327     // ChannelDown.
 328     // ChannelUp.
 329     case WPE_KEY_Close:
 330         return &quot;Close&quot;_s;
 331     case WPE_KEY_MailForward:
 332         return &quot;MailForward&quot;_s;
 333     case WPE_KEY_Reply:
 334         return &quot;MailReply&quot;_s;
 335     case WPE_KEY_Send:
 336         return &quot;MailSend&quot;_s;
 337     case WPE_KEY_AudioForward:
 338         return &quot;MediaFastForward&quot;_s;
 339     case WPE_KEY_AudioPause:
 340         return &quot;MediaPause&quot;_s;
 341     case WPE_KEY_AudioPlay:
 342         return &quot;MediaPlay&quot;_s;
 343     // MediaPlayPause
 344     case WPE_KEY_AudioRecord:
 345         return &quot;MediaRecord&quot;_s;
 346     case WPE_KEY_AudioRewind:
 347         return &quot;MediaRewind&quot;_s;
 348     case WPE_KEY_AudioStop:
 349         return &quot;MediaStop&quot;_s;
 350     case WPE_KEY_AudioNext:
 351         return &quot;MediaTrackNext&quot;_s;
 352     case WPE_KEY_AudioPrev:
 353         return &quot;MediaTrackPrevious&quot;_s;
 354     case WPE_KEY_New:
 355         return &quot;New&quot;_s;
 356     case WPE_KEY_Open:
 357         return &quot;Open&quot;_s;
 358     case WPE_KEY_AudioLowerVolume:
 359         return &quot;AudioVolumeDown&quot;_s;
 360     case WPE_KEY_AudioRaiseVolume:
 361         return &quot;AudioVolumeUp&quot;_s;
 362     case WPE_KEY_AudioMute:
 363         return &quot;AudioVolumeMute&quot;_s;
 364 
 365     // Media Controller Keys
 366     case WPE_KEY_Red:
 367         return &quot;ColorF0Red&quot;_s;
 368     case WPE_KEY_Green:
 369         return &quot;ColorF1Green&quot;_s;
 370     case WPE_KEY_Yellow:
 371         return &quot;ColorF2Yellow&quot;_s;
 372     case WPE_KEY_Blue:
 373         return &quot;ColorF3Blue&quot;_s;
 374     case WPE_KEY_Display:
 375         return &quot;DisplaySwap&quot;_s;
 376     case WPE_KEY_Video:
 377         return &quot;OnDemand&quot;_s;
 378     case WPE_KEY_Subtitle:
 379         return &quot;Subtitle&quot;_s;
 380 
 381     // Print.
 382     case WPE_KEY_Save:
 383         return &quot;Save&quot;_s;
 384     case WPE_KEY_Spell:
 385         return &quot;SpellCheck&quot;_s;
 386 
 387     // Function keys.
 388     case WPE_KEY_F1:
 389         return &quot;F1&quot;_s;
 390     case WPE_KEY_F2:
 391         return &quot;F2&quot;_s;
 392     case WPE_KEY_F3:
 393         return &quot;F3&quot;_s;
 394     case WPE_KEY_F4:
 395         return &quot;F4&quot;_s;
 396     case WPE_KEY_F5:
 397         return &quot;F5&quot;_s;
 398     case WPE_KEY_F6:
 399         return &quot;F6&quot;_s;
 400     case WPE_KEY_F7:
 401         return &quot;F7&quot;_s;
 402     case WPE_KEY_F8:
 403         return &quot;F8&quot;_s;
 404     case WPE_KEY_F9:
 405         return &quot;F9&quot;_s;
 406     case WPE_KEY_F10:
 407         return &quot;F10&quot;_s;
 408     case WPE_KEY_F11:
 409         return &quot;F11&quot;_s;
 410     case WPE_KEY_F12:
 411         return &quot;F12&quot;_s;
 412     case WPE_KEY_F13:
 413         return &quot;F13&quot;_s;
 414     case WPE_KEY_F14:
 415         return &quot;F14&quot;_s;
 416     case WPE_KEY_F15:
 417         return &quot;F15&quot;_s;
 418     case WPE_KEY_F16:
 419         return &quot;F16&quot;_s;
 420     case WPE_KEY_F17:
 421         return &quot;F17&quot;_s;
 422     case WPE_KEY_F18:
 423         return &quot;F18&quot;_s;
 424     case WPE_KEY_F19:
 425         return &quot;F19&quot;_s;
 426     case WPE_KEY_F20:
 427         return &quot;F20&quot;_s;
 428     default:
 429         break;
 430     }
 431 
 432     UChar32 unicodeCharacter = wpe_key_code_to_unicode(keyCode);
 433     if (unicodeCharacter &amp;&amp; U_IS_UNICODE_CHAR(unicodeCharacter)) {
 434         StringBuilder builder;
 435         builder.appendCharacter(unicodeCharacter);
 436         return builder.toString();
 437     }
 438 
 439     return &quot;Unidentified&quot;_s;
 440 }
 441 
 442 // FIXME: This is incomplete. We should change this to mirror
 443 // more like what Firefox does, and generate these switch statements
 444 // at build time.
 445 // https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/code
 446 String PlatformKeyboardEvent::keyCodeForHardwareKeyCode(unsigned keyCode)
 447 {
 448     switch (keyCode) {
 449     case 0x0009:
 450         return &quot;Escape&quot;_s;
 451     case 0x000A:
 452         return &quot;Digit1&quot;_s;
 453     case 0x000B:
 454         return &quot;Digit2&quot;_s;
 455     case 0x000C:
 456         return &quot;Digit3&quot;_s;
 457     case 0x000D:
 458         return &quot;Digit4&quot;_s;
 459     case 0x000E:
 460         return &quot;Digit5&quot;_s;
 461     case 0x000F:
 462         return &quot;Digit6&quot;_s;
 463     case 0x0010:
 464         return &quot;Digit7&quot;_s;
 465     case 0x0011:
 466         return &quot;Digit8&quot;_s;
 467     case 0x0012:
 468         return &quot;Digit9&quot;_s;
 469     case 0x0013:
 470         return &quot;Digit0&quot;_s;
 471     case 0x0014:
 472         return &quot;Minus&quot;_s;
 473     case 0x0015:
 474         return &quot;Equal&quot;_s;
 475     case 0x0016:
 476         return &quot;Backspace&quot;_s;
 477     case 0x0017:
 478         return &quot;Tab&quot;_s;
 479     case 0x0018:
 480         return &quot;KeyQ&quot;_s;
 481     case 0x0019:
 482         return &quot;KeyW&quot;_s;
 483     case 0x001A:
 484         return &quot;KeyE&quot;_s;
 485     case 0x001B:
 486         return &quot;KeyR&quot;_s;
 487     case 0x001C:
 488         return &quot;KeyT&quot;_s;
 489     case 0x001D:
 490         return &quot;KeyY&quot;_s;
 491     case 0x001E:
 492         return &quot;KeyU&quot;_s;
 493     case 0x001F:
 494         return &quot;KeyI&quot;_s;
 495     case 0x0020:
 496         return &quot;KeyO&quot;_s;
 497     case 0x0021:
 498         return &quot;KeyP&quot;_s;
 499     case 0x0022:
 500         return &quot;BracketLeft&quot;_s;
 501     case 0x0023:
 502         return &quot;BracketRight&quot;_s;
 503     case 0x0024:
 504         return &quot;Enter&quot;_s;
 505     case 0x0025:
 506         return &quot;ControlLeft&quot;_s;
 507     case 0x0026:
 508         return &quot;KeyA&quot;_s;
 509     case 0x0027:
 510         return &quot;KeyS&quot;_s;
 511     case 0x0028:
 512         return &quot;KeyD&quot;_s;
 513     case 0x0029:
 514         return &quot;KeyF&quot;_s;
 515     case 0x002A:
 516         return &quot;KeyG&quot;_s;
 517     case 0x002B:
 518         return &quot;KeyH&quot;_s;
 519     case 0x002C:
 520         return &quot;KeyJ&quot;_s;
 521     case 0x002D:
 522         return &quot;KeyK&quot;_s;
 523     case 0x002E:
 524         return &quot;KeyL&quot;_s;
 525     case 0x002F:
 526         return &quot;Semicolon&quot;_s;
 527     case 0x0030:
 528         return &quot;Quote&quot;_s;
 529     case 0x0031:
 530         return &quot;Backquote&quot;_s;
 531     case 0x0032:
 532         return &quot;ShiftLeft&quot;_s;
 533     case 0x0033:
 534         return &quot;Backslash&quot;_s;
 535     case 0x0034:
 536         return &quot;KeyZ&quot;_s;
 537     case 0x0035:
 538         return &quot;KeyX&quot;_s;
 539     case 0x0036:
 540         return &quot;KeyC&quot;_s;
 541     case 0x0037:
 542         return &quot;KeyV&quot;_s;
 543     case 0x0038:
 544         return &quot;KeyB&quot;_s;
 545     case 0x0039:
 546         return &quot;KeyN&quot;_s;
 547     case 0x003A:
 548         return &quot;KeyM&quot;_s;
 549     case 0x003B:
 550         return &quot;Comma&quot;_s;
 551     case 0x003C:
 552         return &quot;Period&quot;_s;
 553     case 0x003D:
 554         return &quot;Slash&quot;_s;
 555     case 0x003E:
 556         return &quot;ShiftRight&quot;_s;
 557     case 0x003F:
 558         return &quot;NumpadMultiply&quot;_s;
 559     case 0x0040:
 560         return &quot;AltLeft&quot;_s;
 561     case 0x0041:
 562         return &quot;Space&quot;_s;
 563     case 0x0042:
 564         return &quot;CapsLock&quot;_s;
 565     case 0x0043:
 566         return &quot;F1&quot;_s;
 567     case 0x0044:
 568         return &quot;F2&quot;_s;
 569     case 0x0045:
 570         return &quot;F3&quot;_s;
 571     case 0x0046:
 572         return &quot;F4&quot;_s;
 573     case 0x0047:
 574         return &quot;F5&quot;_s;
 575     case 0x0048:
 576         return &quot;F6&quot;_s;
 577     case 0x0049:
 578         return &quot;F7&quot;_s;
 579     case 0x004A:
 580         return &quot;F8&quot;_s;
 581     case 0x004B:
 582         return &quot;F9&quot;_s;
 583     case 0x004C:
 584         return &quot;F10&quot;_s;
 585     case 0x004D:
 586         return &quot;NumLock&quot;_s;
 587     case 0x004E:
 588         return &quot;ScrollLock&quot;_s;
 589     case 0x004F:
 590         return &quot;Numpad7&quot;_s;
 591     case 0x0050:
 592         return &quot;Numpad8&quot;_s;
 593     case 0x0051:
 594         return &quot;Numpad9&quot;_s;
 595     case 0x0052:
 596         return &quot;NumpadSubtract&quot;_s;
 597     case 0x0053:
 598         return &quot;Numpad4&quot;_s;
 599     case 0x0054:
 600         return &quot;Numpad5&quot;_s;
 601     case 0x0055:
 602         return &quot;Numpad6&quot;_s;
 603     case 0x0056:
 604         return &quot;NumpadAdd&quot;_s;
 605     case 0x0057:
 606         return &quot;Numpad1&quot;_s;
 607     case 0x0058:
 608         return &quot;Numpad2&quot;_s;
 609     case 0x0059:
 610         return &quot;Numpad3&quot;_s;
 611     case 0x005A:
 612         return &quot;Numpad0&quot;_s;
 613     case 0x005B:
 614         return &quot;NumpadDecimal&quot;_s;
 615     case 0x005E:
 616         return &quot;IntlBackslash&quot;_s;
 617     case 0x005F:
 618         return &quot;F11&quot;_s;
 619     case 0x0060:
 620         return &quot;F12&quot;_s;
 621     case 0x0061:
 622         return &quot;IntlRo&quot;_s;
 623     case 0x0064:
 624         return &quot;Convert&quot;_s;
 625     case 0x0065:
 626         return &quot;KanaMode&quot;_s;
 627     case 0x0066:
 628         return &quot;NonConvert&quot;_s;
 629     case 0x0068:
 630         return &quot;NumpadEnter&quot;_s;
 631     case 0x0069:
 632         return &quot;ControlRight&quot;_s;
 633     case 0x006A:
 634         return &quot;NumpadDivide&quot;_s;
 635     case 0x006B:
 636         return &quot;PrintScreen&quot;_s;
 637     case 0x006C:
 638         return &quot;AltRight&quot;_s;
 639     case 0x006E:
 640         return &quot;Home&quot;_s;
 641     case 0x006F:
 642         return &quot;ArrowUp&quot;_s;
 643     case 0x0070:
 644         return &quot;PageUp&quot;_s;
 645     case 0x0071:
 646         return &quot;ArrowLeft&quot;_s;
 647     case 0x0072:
 648         return &quot;ArrowRight&quot;_s;
 649     case 0x0073:
 650         return &quot;End&quot;_s;
 651     case 0x0074:
 652         return &quot;ArrowDown&quot;_s;
 653     case 0x0075:
 654         return &quot;PageDown&quot;_s;
 655     case 0x0076:
 656         return &quot;Insert&quot;_s;
 657     case 0x0077:
 658         return &quot;Delete&quot;_s;
 659     case 0x0079:
 660         return &quot;AudioVolumeMute&quot;_s;
 661     case 0x007A:
 662         return &quot;AudioVolumeDown&quot;_s;
 663     case 0x007B:
 664         return &quot;AudioVolumeUp&quot;_s;
 665     case 0x007D:
 666         return &quot;NumpadEqual&quot;_s;
 667     case 0x007F:
 668         return &quot;Pause&quot;_s;
 669     case 0x0081:
 670         return &quot;NumpadComma&quot;_s;
 671     case 0x0082:
 672         return &quot;Lang1&quot;_s;
 673     case 0x0083:
 674         return &quot;Lang2&quot;_s;
 675     case 0x0084:
 676         return &quot;IntlYen&quot;_s;
 677     case 0x0085:
 678         return &quot;OSLeft&quot;_s;
 679     case 0x0086:
 680         return &quot;OSRight&quot;_s;
 681     case 0x0087:
 682         return &quot;ContextMenu&quot;_s;
 683     case 0x0088:
 684         return &quot;BrowserStop&quot;_s;
 685     case 0x0089:
 686         return &quot;Again&quot;_s;
 687     case 0x008A:
 688         return &quot;Props&quot;_s;
 689     case 0x008B:
 690         return &quot;Undo&quot;_s;
 691     case 0x008C:
 692         return &quot;Select&quot;_s;
 693     case 0x008D:
 694         return &quot;Copy&quot;_s;
 695     case 0x008E:
 696         return &quot;Open&quot;_s;
 697     case 0x008F:
 698         return &quot;Paste&quot;_s;
 699     case 0x0090:
 700         return &quot;Find&quot;_s;
 701     case 0x0091:
 702         return &quot;Cut&quot;_s;
 703     case 0x0092:
 704         return &quot;Help&quot;_s;
 705     case 0x0094:
 706         return &quot;LaunchApp2&quot;_s;
 707     case 0x0097:
 708         return &quot;WakeUp&quot;_s;
 709     case 0x0098:
 710         return &quot;LaunchApp1&quot;_s;
 711     case 0x00A3:
 712         return &quot;LaunchMail&quot;_s;
 713     case 0x00A4:
 714         return &quot;BrowserFavorites&quot;_s;
 715     case 0x00A6:
 716         return &quot;BrowserBack&quot;_s;
 717     case 0x00A7:
 718         return &quot;BrowserForward&quot;_s;
 719     case 0x00A9:
 720         return &quot;Eject&quot;_s;
 721     case 0x00AB:
 722         return &quot;MediaTrackNext&quot;_s;
 723     case 0x00AC:
 724         return &quot;MediaPlayPause&quot;_s;
 725     case 0x00AD:
 726         return &quot;MediaTrackPrevious&quot;_s;
 727     case 0x00AE:
 728         return &quot;MediaStop&quot;_s;
 729     case 0x00B3:
 730         return &quot;LaunchMediaPlayer&quot;_s;
 731     case 0x00B4:
 732         return &quot;BrowserHome&quot;_s;
 733     case 0x00B5:
 734         return &quot;BrowserRefresh&quot;_s;
 735     case 0x00BF:
 736         return &quot;F13&quot;_s;
 737     case 0x00C0:
 738         return &quot;F14&quot;_s;
 739     case 0x00C1:
 740         return &quot;F15&quot;_s;
 741     case 0x00C2:
 742         return &quot;F16&quot;_s;
 743     case 0x00C3:
 744         return &quot;F17&quot;_s;
 745     case 0x00C4:
 746         return &quot;F18&quot;_s;
 747     case 0x00C5:
 748         return &quot;F19&quot;_s;
 749     case 0x00C6:
 750         return &quot;F20&quot;_s;
 751     case 0x00C7:
 752         return &quot;F21&quot;_s;
 753     case 0x00C8:
 754         return &quot;F22&quot;_s;
 755     case 0x00C9:
 756         return &quot;F23&quot;_s;
 757     case 0x00CA:
 758         return &quot;F24&quot;_s;
 759     case 0x00E1:
 760         return &quot;BrowserSearch&quot;_s;
 761     default:
 762         break;
 763     }
 764     return &quot;Unidentified&quot;_s;
 765 }
 766 
 767 // FIXME: This is incomplete. We should change this to mirror
 768 // more like what Firefox does, and generate these switch statements
 769 // at build time.
 770 String PlatformKeyboardEvent::keyIdentifierForWPEKeyCode(unsigned keyCode)
 771 {
 772     switch (keyCode) {
 773     case WPE_KEY_Menu:
 774     case WPE_KEY_Alt_L:
 775     case WPE_KEY_Alt_R:
 776         return &quot;Alt&quot;;
 777     case WPE_KEY_Clear:
 778         return &quot;Clear&quot;;
 779     case WPE_KEY_Down:
 780         return &quot;Down&quot;;
 781         // &quot;End&quot;
 782     case WPE_KEY_End:
 783         return &quot;End&quot;;
 784         // &quot;Enter&quot;
 785     case WPE_KEY_ISO_Enter:
 786     case WPE_KEY_KP_Enter:
 787     case WPE_KEY_Return:
 788         return &quot;Enter&quot;;
 789     case WPE_KEY_Execute:
 790         return &quot;Execute&quot;;
 791     case WPE_KEY_F1:
 792         return &quot;F1&quot;;
 793     case WPE_KEY_F2:
 794         return &quot;F2&quot;;
 795     case WPE_KEY_F3:
 796         return &quot;F3&quot;;
 797     case WPE_KEY_F4:
 798         return &quot;F4&quot;;
 799     case WPE_KEY_F5:
 800         return &quot;F5&quot;;
 801     case WPE_KEY_F6:
 802         return &quot;F6&quot;;
 803     case WPE_KEY_F7:
 804         return &quot;F7&quot;;
 805     case WPE_KEY_F8:
 806         return &quot;F8&quot;;
 807     case WPE_KEY_F9:
 808         return &quot;F9&quot;;
 809     case WPE_KEY_F10:
 810         return &quot;F10&quot;;
 811     case WPE_KEY_F11:
 812         return &quot;F11&quot;;
 813     case WPE_KEY_F12:
 814         return &quot;F12&quot;;
 815     case WPE_KEY_F13:
 816         return &quot;F13&quot;;
 817     case WPE_KEY_F14:
 818         return &quot;F14&quot;;
 819     case WPE_KEY_F15:
 820         return &quot;F15&quot;;
 821     case WPE_KEY_F16:
 822         return &quot;F16&quot;;
 823     case WPE_KEY_F17:
 824         return &quot;F17&quot;;
 825     case WPE_KEY_F18:
 826         return &quot;F18&quot;;
 827     case WPE_KEY_F19:
 828         return &quot;F19&quot;;
 829     case WPE_KEY_F20:
 830         return &quot;F20&quot;;
 831     case WPE_KEY_F21:
 832         return &quot;F21&quot;;
 833     case WPE_KEY_F22:
 834         return &quot;F22&quot;;
 835     case WPE_KEY_F23:
 836         return &quot;F23&quot;;
 837     case WPE_KEY_F24:
 838         return &quot;F24&quot;;
 839     case WPE_KEY_Help:
 840         return &quot;Help&quot;;
 841     case WPE_KEY_Home:
 842         return &quot;Home&quot;;
 843     case WPE_KEY_Insert:
 844         return &quot;Insert&quot;;
 845     case WPE_KEY_Left:
 846         return &quot;Left&quot;;
 847     case WPE_KEY_Page_Down:
 848         return &quot;PageDown&quot;;
 849     case WPE_KEY_Page_Up:
 850         return &quot;PageUp&quot;;
 851     case WPE_KEY_Pause:
 852         return &quot;Pause&quot;;
 853     case WPE_KEY_3270_PrintScreen:
 854     case WPE_KEY_Print:
 855         return &quot;PrintScreen&quot;;
 856     case WPE_KEY_Right:
 857         return &quot;Right&quot;;
 858     case WPE_KEY_Select:
 859         return &quot;Select&quot;;
 860     case WPE_KEY_Up:
 861         return &quot;Up&quot;;
 862         // Standard says that DEL becomes U+007F.
 863     case WPE_KEY_Delete:
 864         return &quot;U+007F&quot;;
 865     case WPE_KEY_BackSpace:
 866         return &quot;U+0008&quot;;
 867     case WPE_KEY_ISO_Left_Tab:
 868     case WPE_KEY_3270_BackTab:
 869     case WPE_KEY_Tab:
 870         return &quot;U+0009&quot;;
 871     default:
 872         break;
 873     }
 874 
 875     return makeString(&quot;U+&quot;, hex(wpe_key_code_to_unicode(keyCode), 4));
 876 }
 877 
 878 int PlatformKeyboardEvent::windowsKeyCodeForWPEKeyCode(unsigned keycode)
 879 {
 880     switch (keycode) {
 881     case WPE_KEY_Cancel:
 882         return 0x03; // (03) The Cancel key
 883     case WPE_KEY_KP_0:
 884         return VK_NUMPAD0; // (60) Numeric keypad 0 key
 885     case WPE_KEY_KP_1:
 886         return VK_NUMPAD1; // (61) Numeric keypad 1 key
 887     case WPE_KEY_KP_2:
 888         return VK_NUMPAD2; // (62) Numeric keypad 2 key
 889     case WPE_KEY_KP_3:
 890         return VK_NUMPAD3; // (63) Numeric keypad 3 key
 891     case WPE_KEY_KP_4:
 892         return VK_NUMPAD4; // (64) Numeric keypad 4 key
 893     case WPE_KEY_KP_5:
 894         return VK_NUMPAD5; // (65) Numeric keypad 5 key
 895     case WPE_KEY_KP_6:
 896         return VK_NUMPAD6; // (66) Numeric keypad 6 key
 897     case WPE_KEY_KP_7:
 898         return VK_NUMPAD7; // (67) Numeric keypad 7 key
 899     case WPE_KEY_KP_8:
 900         return VK_NUMPAD8; // (68) Numeric keypad 8 key
 901     case WPE_KEY_KP_9:
 902         return VK_NUMPAD9; // (69) Numeric keypad 9 key
 903     case WPE_KEY_KP_Multiply:
 904         return VK_MULTIPLY; // (6A) Multiply key
 905     case WPE_KEY_KP_Add:
 906         return VK_ADD; // (6B) Add key
 907     case WPE_KEY_KP_Subtract:
 908         return VK_SUBTRACT; // (6D) Subtract key
 909     case WPE_KEY_KP_Decimal:
 910         return VK_DECIMAL; // (6E) Decimal key
 911     case WPE_KEY_KP_Divide:
 912         return VK_DIVIDE; // (6F) Divide key
 913 
 914     case WPE_KEY_KP_Page_Up:
 915         return VK_PRIOR; // (21) PAGE UP key
 916     case WPE_KEY_KP_Page_Down:
 917         return VK_NEXT; // (22) PAGE DOWN key
 918     case WPE_KEY_KP_End:
 919         return VK_END; // (23) END key
 920     case WPE_KEY_KP_Home:
 921         return VK_HOME; // (24) HOME key
 922     case WPE_KEY_KP_Left:
 923         return VK_LEFT; // (25) LEFT ARROW key
 924     case WPE_KEY_KP_Up:
 925         return VK_UP; // (26) UP ARROW key
 926     case WPE_KEY_KP_Right:
 927         return VK_RIGHT; // (27) RIGHT ARROW key
 928     case WPE_KEY_KP_Down:
 929         return VK_DOWN; // (28) DOWN ARROW key
 930 
 931     case WPE_KEY_BackSpace:
 932         return VK_BACK; // (08) BACKSPACE key
 933     case WPE_KEY_ISO_Left_Tab:
 934     case WPE_KEY_3270_BackTab:
 935     case WPE_KEY_Tab:
 936         return VK_TAB; // (09) TAB key
 937     case WPE_KEY_Clear:
 938         return VK_CLEAR; // (0C) CLEAR key
 939     case WPE_KEY_ISO_Enter:
 940     case WPE_KEY_KP_Enter:
 941     case WPE_KEY_Return:
 942         return VK_RETURN; // (0D) Return key
 943 
 944         // VK_SHIFT (10) SHIFT key
 945         // VK_CONTROL (11) CTRL key
 946 
 947     case WPE_KEY_Menu:
 948         return VK_APPS; // (5D) Applications key (Natural keyboard)
 949 
 950         // VK_MENU (12) ALT key
 951 
 952     case WPE_KEY_Pause:
 953     case WPE_KEY_AudioPause:
 954         return VK_PAUSE; // (13) PAUSE key
 955     case WPE_KEY_Caps_Lock:
 956         return VK_CAPITAL; // (14) CAPS LOCK key
 957     case WPE_KEY_Kana_Lock:
 958     case WPE_KEY_Kana_Shift:
 959         return VK_KANA; // (15) Input Method Editor (IME) Kana mode
 960     case WPE_KEY_Hangul:
 961         return VK_HANGUL; // VK_HANGUL (15) IME Hangul mode
 962         // VK_JUNJA (17) IME Junja mode
 963         // VK_FINAL (18) IME final mode
 964     case WPE_KEY_Hangul_Hanja:
 965         return VK_HANJA; // (19) IME Hanja mode
 966     case WPE_KEY_Kanji:
 967         return VK_KANJI; // (19) IME Kanji mode
 968     case WPE_KEY_Escape:
 969         return VK_ESCAPE; // (1B) ESC key
 970         // VK_CONVERT (1C) IME convert
 971         // VK_NONCONVERT (1D) IME nonconvert
 972         // VK_ACCEPT (1E) IME accept
 973         // VK_MODECHANGE (1F) IME mode change request
 974     case WPE_KEY_space:
 975         return VK_SPACE; // (20) SPACEBAR
 976     case WPE_KEY_Page_Up:
 977         return VK_PRIOR; // (21) PAGE UP key
 978     case WPE_KEY_Page_Down:
 979         return VK_NEXT; // (22) PAGE DOWN key
 980     case WPE_KEY_End:
 981         return VK_END; // (23) END key
 982     case WPE_KEY_Home:
 983         return VK_HOME; // (24) HOME key
 984     case WPE_KEY_Left:
 985         return VK_LEFT; // (25) LEFT ARROW key
 986     case WPE_KEY_Up:
 987         return VK_UP; // (26) UP ARROW key
 988     case WPE_KEY_Right:
 989         return VK_RIGHT; // (27) RIGHT ARROW key
 990     case WPE_KEY_Down:
 991         return VK_DOWN; // (28) DOWN ARROW key
 992     case WPE_KEY_Select:
 993         return VK_SELECT; // (29) SELECT key
 994     case WPE_KEY_Print:
 995         return VK_SNAPSHOT; // (2C) PRINT SCREEN key
 996     case WPE_KEY_Execute:
 997         return VK_EXECUTE; // (2B) EXECUTE key
 998     case WPE_KEY_Insert:
 999     case WPE_KEY_KP_Insert:
1000         return VK_INSERT; // (2D) INS key
1001     case WPE_KEY_Delete:
1002     case WPE_KEY_KP_Delete:
1003         return VK_DELETE; // (2E) DEL key
1004     case WPE_KEY_Help:
1005         return VK_HELP; // (2F) HELP key
1006     case WPE_KEY_0:
1007     case WPE_KEY_parenright:
1008         return VK_0; // (30) 0) key
1009     case WPE_KEY_1:
1010     case WPE_KEY_exclam:
1011         return VK_1; // (31) 1 ! key
1012     case WPE_KEY_2:
1013     case WPE_KEY_at:
1014         return VK_2; // (32) 2 &amp; key
1015     case WPE_KEY_3:
1016     case WPE_KEY_numbersign:
1017         return VK_3; // case &#39;3&#39;: case &#39;#&#39;;
1018     case WPE_KEY_4:
1019     case WPE_KEY_dollar: // (34) 4 key &#39;$&#39;;
1020         return VK_4;
1021     case WPE_KEY_5:
1022     case WPE_KEY_percent:
1023         return VK_5; // (35) 5 key  &#39;%&#39;
1024     case WPE_KEY_6:
1025     case WPE_KEY_asciicircum:
1026         return VK_6; // (36) 6 key  &#39;^&#39;
1027     case WPE_KEY_7:
1028     case WPE_KEY_ampersand:
1029         return VK_7; // (37) 7 key  case &#39;&amp;&#39;
1030     case WPE_KEY_8:
1031     case WPE_KEY_asterisk:
1032         return VK_8; // (38) 8 key  &#39;*&#39;
1033     case WPE_KEY_9:
1034     case WPE_KEY_parenleft:
1035         return VK_9; // (39) 9 key &#39;(&#39;
1036     case WPE_KEY_a:
1037     case WPE_KEY_A:
1038         return VK_A; // (41) A key case &#39;a&#39;: case &#39;A&#39;: return 0x41;
1039     case WPE_KEY_b:
1040     case WPE_KEY_B:
1041         return VK_B; // (42) B key case &#39;b&#39;: case &#39;B&#39;: return 0x42;
1042     case WPE_KEY_c:
1043     case WPE_KEY_C:
1044         return VK_C; // (43) C key case &#39;c&#39;: case &#39;C&#39;: return 0x43;
1045     case WPE_KEY_d:
1046     case WPE_KEY_D:
1047         return VK_D; // (44) D key case &#39;d&#39;: case &#39;D&#39;: return 0x44;
1048     case WPE_KEY_e:
1049     case WPE_KEY_E:
1050         return VK_E; // (45) E key case &#39;e&#39;: case &#39;E&#39;: return 0x45;
1051     case WPE_KEY_f:
1052     case WPE_KEY_F:
1053         return VK_F; // (46) F key case &#39;f&#39;: case &#39;F&#39;: return 0x46;
1054     case WPE_KEY_g:
1055     case WPE_KEY_G:
1056         return VK_G; // (47) G key case &#39;g&#39;: case &#39;G&#39;: return 0x47;
1057     case WPE_KEY_h:
1058     case WPE_KEY_H:
1059         return VK_H; // (48) H key case &#39;h&#39;: case &#39;H&#39;: return 0x48;
1060     case WPE_KEY_i:
1061     case WPE_KEY_I:
1062         return VK_I; // (49) I key case &#39;i&#39;: case &#39;I&#39;: return 0x49;
1063     case WPE_KEY_j:
1064     case WPE_KEY_J:
1065         return VK_J; // (4A) J key case &#39;j&#39;: case &#39;J&#39;: return 0x4A;
1066     case WPE_KEY_k:
1067     case WPE_KEY_K:
1068         return VK_K; // (4B) K key case &#39;k&#39;: case &#39;K&#39;: return 0x4B;
1069     case WPE_KEY_l:
1070     case WPE_KEY_L:
1071         return VK_L; // (4C) L key case &#39;l&#39;: case &#39;L&#39;: return 0x4C;
1072     case WPE_KEY_m:
1073     case WPE_KEY_M:
1074         return VK_M; // (4D) M key case &#39;m&#39;: case &#39;M&#39;: return 0x4D;
1075     case WPE_KEY_n:
1076     case WPE_KEY_N:
1077         return VK_N; // (4E) N key case &#39;n&#39;: case &#39;N&#39;: return 0x4E;
1078     case WPE_KEY_o:
1079     case WPE_KEY_O:
1080         return VK_O; // (4F) O key case &#39;o&#39;: case &#39;O&#39;: return 0x4F;
1081     case WPE_KEY_p:
1082     case WPE_KEY_P:
1083         return VK_P; // (50) P key case &#39;p&#39;: case &#39;P&#39;: return 0x50;
1084     case WPE_KEY_q:
1085     case WPE_KEY_Q:
1086         return VK_Q; // (51) Q key case &#39;q&#39;: case &#39;Q&#39;: return 0x51;
1087     case WPE_KEY_r:
1088     case WPE_KEY_R:
1089         return VK_R; // (52) R key case &#39;r&#39;: case &#39;R&#39;: return 0x52;
1090     case WPE_KEY_s:
1091     case WPE_KEY_S:
1092         return VK_S; // (53) S key case &#39;s&#39;: case &#39;S&#39;: return 0x53;
1093     case WPE_KEY_t:
1094     case WPE_KEY_T:
1095         return VK_T; // (54) T key case &#39;t&#39;: case &#39;T&#39;: return 0x54;
1096     case WPE_KEY_u:
1097     case WPE_KEY_U:
1098         return VK_U; // (55) U key case &#39;u&#39;: case &#39;U&#39;: return 0x55;
1099     case WPE_KEY_v:
1100     case WPE_KEY_V:
1101         return VK_V; // (56) V key case &#39;v&#39;: case &#39;V&#39;: return 0x56;
1102     case WPE_KEY_w:
1103     case WPE_KEY_W:
1104         return VK_W; // (57) W key case &#39;w&#39;: case &#39;W&#39;: return 0x57;
1105     case WPE_KEY_x:
1106     case WPE_KEY_X:
1107         return VK_X; // (58) X key case &#39;x&#39;: case &#39;X&#39;: return 0x58;
1108     case WPE_KEY_y:
1109     case WPE_KEY_Y:
1110         return VK_Y; // (59) Y key case &#39;y&#39;: case &#39;Y&#39;: return 0x59;
1111     case WPE_KEY_z:
1112     case WPE_KEY_Z:
1113         return VK_Z; // (5A) Z key case &#39;z&#39;: case &#39;Z&#39;: return 0x5A;
1114     case WPE_KEY_Meta_L:
1115         return VK_LWIN; // (5B) Left Windows key (Microsoft Natural keyboard)
1116     case WPE_KEY_Meta_R:
1117         return VK_RWIN; // (5C) Right Windows key (Natural keyboard)
1118     case WPE_KEY_Sleep:
1119         return VK_SLEEP; // (5F) Computer Sleep key
1120         // VK_SEPARATOR (6C) Separator key
1121         // VK_SUBTRACT (6D) Subtract key
1122         // VK_DECIMAL (6E) Decimal key
1123         // VK_DIVIDE (6F) Divide key
1124         // handled by key code above
1125 
1126     case WPE_KEY_Num_Lock:
1127         return VK_NUMLOCK; // (90) NUM LOCK key
1128 
1129     case WPE_KEY_Scroll_Lock:
1130         return VK_SCROLL; // (91) SCROLL LOCK key
1131 
1132     case WPE_KEY_Shift_L:
1133         return VK_LSHIFT; // (A0) Left SHIFT key
1134     case WPE_KEY_Shift_R:
1135         return VK_RSHIFT; // (A1) Right SHIFT key
1136     case WPE_KEY_Control_L:
1137         return VK_LCONTROL; // (A2) Left CONTROL key
1138     case WPE_KEY_Control_R:
1139         return VK_RCONTROL; // (A3) Right CONTROL key
1140     case WPE_KEY_Alt_L:
1141         return VK_LMENU; // (A4) Left MENU key
1142     case WPE_KEY_Alt_R:
1143         return VK_RMENU; // (A5) Right MENU key
1144 
1145     case WPE_KEY_Back:
1146         return VK_BROWSER_BACK; // VK_BROWSER_BACK (A6) Windows 2000/XP: Browser Back key
1147     case WPE_KEY_Forward:
1148         return VK_BROWSER_FORWARD; // (A7) Windows 2000/XP: Browser Forward key
1149     case WPE_KEY_Refresh:
1150         return VK_BROWSER_REFRESH; // (A8) Windows 2000/XP: Browser Refresh key
1151     case WPE_KEY_Stop:
1152         return VK_BROWSER_STOP; // (A9) Windows 2000/XP: Browser Stop key
1153     case WPE_KEY_Search:
1154         return VK_BROWSER_SEARCH; // (AA) Windows 2000/XP: Browser Search key
1155     case WPE_KEY_Favorites:
1156         return VK_BROWSER_FAVORITES; // (AB) Windows 2000/XP: Browser Favorites key
1157     case WPE_KEY_HomePage:
1158         return VK_BROWSER_HOME; // (AC) Windows 2000/XP: Browser Start and Home key
1159     case WPE_KEY_AudioMute:
1160         return VK_VOLUME_MUTE; // (AD) Windows 2000/XP: Volume Mute key
1161     case WPE_KEY_AudioLowerVolume:
1162         return VK_VOLUME_DOWN; // (AE) Windows 2000/XP: Volume Down key
1163     case WPE_KEY_AudioRaiseVolume:
1164         return VK_VOLUME_UP; // (AF) Windows 2000/XP: Volume Up key
1165     case WPE_KEY_AudioNext:
1166         return VK_MEDIA_NEXT_TRACK; // (B0) Windows 2000/XP: Next Track key
1167     case WPE_KEY_AudioPrev:
1168         return VK_MEDIA_PREV_TRACK; // (B1) Windows 2000/XP: Previous Track key
1169     case WPE_KEY_AudioStop:
1170         return VK_MEDIA_STOP; // (B2) Windows 2000/XP: Stop Media key
1171         // VK_MEDIA_PLAY_PAUSE (B3) Windows 2000/XP: Play/Pause Media key
1172         // VK_LAUNCH_MAIL (B4) Windows 2000/XP: Start Mail key
1173     case WPE_KEY_AudioMedia:
1174         return VK_MEDIA_LAUNCH_MEDIA_SELECT; // (B5) Windows 2000/XP: Select Media key
1175         // VK_LAUNCH_APP1 (B6) Windows 2000/XP: Start Application 1 key
1176         // VK_LAUNCH_APP2 (B7) Windows 2000/XP: Start Application 2 key
1177 
1178         // VK_OEM_1 (BA) Used for miscellaneous characters; it can vary by keyboard. Windows 2000/XP: For the US standard keyboard, the &#39;;:&#39; key
1179     case WPE_KEY_semicolon:
1180     case WPE_KEY_colon:
1181         return VK_OEM_1; // case &#39;;&#39;: case &#39;:&#39;: return 0xBA;
1182         // VK_OEM_PLUS (BB) Windows 2000/XP: For any country/region, the &#39;+&#39; key
1183     case WPE_KEY_plus:
1184     case WPE_KEY_equal:
1185         return VK_OEM_PLUS; // case &#39;=&#39;: case &#39;+&#39;: return 0xBB;
1186         // VK_OEM_COMMA (BC) Windows 2000/XP: For any country/region, the &#39;,&#39; key
1187     case WPE_KEY_comma:
1188     case WPE_KEY_less:
1189         return VK_OEM_COMMA; // case &#39;,&#39;: case &#39;&lt;&#39;: return 0xBC;
1190         // VK_OEM_MINUS (BD) Windows 2000/XP: For any country/region, the &#39;-&#39; key
1191     case WPE_KEY_minus:
1192     case WPE_KEY_underscore:
1193         return VK_OEM_MINUS; // case &#39;-&#39;: case &#39;_&#39;: return 0xBD;
1194         // VK_OEM_PERIOD (BE) Windows 2000/XP: For any country/region, the &#39;.&#39; key
1195     case WPE_KEY_period:
1196     case WPE_KEY_greater:
1197         return VK_OEM_PERIOD; // case &#39;.&#39;: case &#39;&gt;&#39;: return 0xBE;
1198         // VK_OEM_2 (BF) Used for miscellaneous characters; it can vary by keyboard. Windows 2000/XP: For the US standard keyboard, the &#39;/?&#39; key
1199     case WPE_KEY_slash:
1200     case WPE_KEY_question:
1201         return VK_OEM_2; // case &#39;/&#39;: case &#39;?&#39;: return 0xBF;
1202         // VK_OEM_3 (C0) Used for miscellaneous characters; it can vary by keyboard. Windows 2000/XP: For the US standard keyboard, the &#39;`~&#39; key
1203     case WPE_KEY_asciitilde:
1204     case WPE_KEY_quoteleft:
1205         return VK_OEM_3; // case &#39;`&#39;: case &#39;~&#39;: return 0xC0;
1206         // VK_OEM_4 (DB) Used for miscellaneous characters; it can vary by keyboard. Windows 2000/XP: For the US standard keyboard, the &#39;[{&#39; key
1207     case WPE_KEY_bracketleft:
1208     case WPE_KEY_braceleft:
1209         return VK_OEM_4; // case &#39;[&#39;: case &#39;{&#39;: return 0xDB;
1210         // VK_OEM_5 (DC) Used for miscellaneous characters; it can vary by keyboard. Windows 2000/XP: For the US standard keyboard, the &#39;\|&#39; key
1211     case WPE_KEY_backslash:
1212     case WPE_KEY_bar:
1213         return VK_OEM_5; // case &#39;\\&#39;: case &#39;|&#39;: return 0xDC;
1214         // VK_OEM_6 (DD) Used for miscellaneous characters; it can vary by keyboard. Windows 2000/XP: For the US standard keyboard, the &#39;]}&#39; key
1215     case WPE_KEY_bracketright:
1216     case WPE_KEY_braceright:
1217         return VK_OEM_6; // case &#39;]&#39;: case &#39;}&#39;: return 0xDD;
1218         // VK_OEM_7 (DE) Used for miscellaneous characters; it can vary by keyboard. Windows 2000/XP: For the US standard keyboard, the &#39;single-quote/double-quote&#39; key
1219     case WPE_KEY_quoteright:
1220     case WPE_KEY_quotedbl:
1221         return VK_OEM_7; // case &#39;\&#39;&#39;: case &#39;&quot;&#39;: return 0xDE;
1222         // VK_OEM_8 (DF) Used for miscellaneous characters; it can vary by keyboard.
1223         // VK_OEM_102 (E2) Windows 2000/XP: Either the angle bracket key or the backslash key on the RT 102-key keyboard
1224     case WPE_KEY_AudioRewind:
1225         return 0xE3; // (E3) Android/GoogleTV: Rewind media key (Windows: VK_ICO_HELP Help key on 1984 Olivetti M24 deluxe keyboard)
1226     case WPE_KEY_AudioForward:
1227         return 0xE4; // (E4) Android/GoogleTV: Fast forward media key  (Windows: VK_ICO_00 &#39;00&#39; key on 1984 Olivetti M24 deluxe keyboard)
1228         // VK_PROCESSKEY (E5) Windows 95/98/Me, Windows NT 4.0, Windows 2000/XP: IME PROCESS key
1229         // VK_PACKET (E7) Windows 2000/XP: Used to pass Unicode characters as if they were keystrokes. The VK_PACKET key is the low word of a 32-bit Virtual Key value used for non-keyboard input methods. For more information, see Remark in KEYBDINPUT,SendInput, WM_KEYDOWN, and WM_KEYUP
1230         // VK_ATTN (F6) Attn key
1231         // VK_CRSEL (F7) CrSel key
1232         // VK_EXSEL (F8) ExSel key
1233         // VK_EREOF (F9) Erase EOF key
1234     case WPE_KEY_AudioPlay:
1235         return VK_PLAY; // VK_PLAY (FA) Play key
1236         // VK_ZOOM (FB) Zoom key
1237         // VK_NONAME (FC) Reserved for future use
1238         // VK_PA1 (FD) PA1 key
1239         // VK_OEM_CLEAR (FE) Clear key
1240     case WPE_KEY_F1:
1241     case WPE_KEY_F2:
1242     case WPE_KEY_F3:
1243     case WPE_KEY_F4:
1244     case WPE_KEY_F5:
1245     case WPE_KEY_F6:
1246     case WPE_KEY_F7:
1247     case WPE_KEY_F8:
1248     case WPE_KEY_F9:
1249     case WPE_KEY_F10:
1250     case WPE_KEY_F11:
1251     case WPE_KEY_F12:
1252     case WPE_KEY_F13:
1253     case WPE_KEY_F14:
1254     case WPE_KEY_F15:
1255     case WPE_KEY_F16:
1256     case WPE_KEY_F17:
1257     case WPE_KEY_F18:
1258     case WPE_KEY_F19:
1259     case WPE_KEY_F20:
1260     case WPE_KEY_F21:
1261     case WPE_KEY_F22:
1262     case WPE_KEY_F23:
1263     case WPE_KEY_F24:
1264         return VK_F1 + (keycode - WPE_KEY_F1);
1265     case WPE_KEY_VoidSymbol:
1266         return VK_PROCESSKEY;
1267 
1268     // TV keycodes from DASE / OCAP / CE-HTML standards.
1269     case WPE_KEY_Red:
1270         return 0x193; // General purpose color-coded media function key, as index 0 (red)
1271     case WPE_KEY_Green:
1272         return 0x194; // General purpose color-coded media function key, as index 1 (green)
1273     case WPE_KEY_Yellow:
1274         return 0x195; // General purpose color-coded media function key, as index 2 (yellow)
1275     case WPE_KEY_Blue:
1276         return 0x196; // General purpose color-coded media function key, as index 3 (blue)
1277     case WPE_KEY_PowerOff:
1278         return 0x199; // Toggle power state
1279     case WPE_KEY_AudioRecord:
1280         return 0x1A0; // Initiate or resume recording of currently selected media
1281     case WPE_KEY_Display:
1282         return 0x1BC; // Swap video sources
1283     case WPE_KEY_Subtitle:
1284         return 0x1CC; // Toggle display of subtitles, if available
1285     case WPE_KEY_Video:
1286         return 0x26F; // Access on-demand content or programs
1287     default:
1288         break;
1289     }
1290 
1291     return 0;
1292 }
1293 
1294 String PlatformKeyboardEvent::singleCharacterString(unsigned val)
1295 {
1296     switch (val) {
1297     case WPE_KEY_ISO_Enter:
1298     case WPE_KEY_KP_Enter:
1299     case WPE_KEY_Return:
1300         return String(&quot;\r&quot;);
1301     case WPE_KEY_BackSpace:
1302         return String(&quot;\x8&quot;);
1303     case WPE_KEY_Tab:
1304         return String(&quot;\t&quot;);
1305     default:
1306         break;
1307     }
1308 
1309     UChar32 unicodeCharacter = wpe_key_code_to_unicode(val);
1310     if (unicodeCharacter &amp;&amp; U_IS_UNICODE_CHAR(unicodeCharacter)) {
1311         StringBuilder builder;
1312         builder.appendCharacter(unicodeCharacter);
1313         return builder.toString();
1314     }
1315 
1316     return { };
1317 }
1318 
1319 void PlatformKeyboardEvent::disambiguateKeyDownEvent(Type type, bool backwardsCompatibility)
1320 {
1321     ASSERT(m_type == KeyDown);
1322     m_type = type;
1323     if (backwardsCompatibility)
1324         return;
1325 
1326     if (type == PlatformEvent::RawKeyDown) {
1327         m_text = String();
1328         m_unmodifiedText = String();
1329     } else {
1330         m_keyIdentifier = String();
1331         m_windowsVirtualKeyCode = 0;
1332     }
1333 }
1334 
1335 bool PlatformKeyboardEvent::currentCapsLockState()
1336 {
1337     return false;
1338 }
1339 
1340 void PlatformKeyboardEvent::getCurrentModifierState(bool&amp;, bool&amp;, bool&amp;, bool&amp;)
1341 {
1342 }
1343 
1344 } // namespace WebCore
1345 
1346 #endif // USE(LIBWPE)
    </pre>
  </body>
</html>
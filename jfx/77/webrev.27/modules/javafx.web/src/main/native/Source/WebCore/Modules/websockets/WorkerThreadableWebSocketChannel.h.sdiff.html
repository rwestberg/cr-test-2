<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/Modules/websockets/WorkerThreadableWebSocketChannel.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="WorkerThreadableWebSocketChannel.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../webvr/NavigatorWebVR.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/Modules/websockets/WorkerThreadableWebSocketChannel.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 28  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 29  */
 30 
 31 #pragma once
 32 
 33 #include &quot;ThreadableWebSocketChannel.h&quot;
 34 #include &quot;WebSocketChannelClient.h&quot;
 35 #include &quot;WorkerGlobalScope.h&quot;
 36 #include &lt;wtf/RefCounted.h&gt;
 37 #include &lt;wtf/RefPtr.h&gt;
 38 #include &lt;wtf/text/WTFString.h&gt;
 39 
 40 namespace WebCore {
 41 
 42 class ScriptExecutionContext;
 43 class ThreadableWebSocketChannelClientWrapper;
 44 class WorkerGlobalScope;
 45 class WorkerLoaderProxy;
 46 class WorkerRunLoop;
 47 
<span class="line-modified"> 48 class WorkerThreadableWebSocketChannel : public RefCounted&lt;WorkerThreadableWebSocketChannel&gt;, public ThreadableWebSocketChannel {</span>
 49     WTF_MAKE_FAST_ALLOCATED;
 50 public:
 51     static Ref&lt;ThreadableWebSocketChannel&gt; create(WorkerGlobalScope&amp; workerGlobalScope, WebSocketChannelClient&amp; client, const String&amp; taskMode, SocketProvider&amp; provider)
 52     {
 53         return adoptRef(*new WorkerThreadableWebSocketChannel(workerGlobalScope, client, taskMode, provider));
 54     }
 55     virtual ~WorkerThreadableWebSocketChannel();
 56 
 57     // ThreadableWebSocketChannel functions.
<span class="line-modified"> 58     void connect(const URL&amp;, const String&amp; protocol) override;</span>
<span class="line-modified"> 59     String subprotocol() override;</span>
<span class="line-modified"> 60     String extensions() override;</span>
<span class="line-modified"> 61     ThreadableWebSocketChannel::SendResult send(const String&amp; message) override;</span>
<span class="line-modified"> 62     ThreadableWebSocketChannel::SendResult send(const JSC::ArrayBuffer&amp;, unsigned byteOffset, unsigned byteLength) override;</span>
<span class="line-modified"> 63     ThreadableWebSocketChannel::SendResult send(Blob&amp;) override;</span>
<span class="line-modified"> 64     unsigned bufferedAmount() const override;</span>
<span class="line-modified"> 65     void close(int code, const String&amp; reason) override;</span>
<span class="line-modified"> 66     void fail(const String&amp; reason) override;</span>
<span class="line-modified"> 67     void disconnect() override; // Will suppress didClose().</span>
<span class="line-modified"> 68     void suspend() override;</span>
<span class="line-modified"> 69     void resume() override;</span>
 70 
 71     // Generated by the bridge.  The Peer and its bridge should have identical
 72     // lifetimes.
 73     class Peer : public WebSocketChannelClient {
 74         WTF_MAKE_NONCOPYABLE(Peer); WTF_MAKE_FAST_ALLOCATED;
 75     public:
 76         Peer(Ref&lt;ThreadableWebSocketChannelClientWrapper&gt;&amp;&amp;, WorkerLoaderProxy&amp;, ScriptExecutionContext&amp;, const String&amp; taskMode, SocketProvider&amp;);
 77         ~Peer();
 78 
<span class="line-modified"> 79         void connect(const URL&amp;, const String&amp; protocol);</span>
 80         void send(const String&amp; message);
 81         void send(const JSC::ArrayBuffer&amp;);
 82         void send(Blob&amp;);
 83         void bufferedAmount();
 84         void close(int code, const String&amp; reason);
 85         void fail(const String&amp; reason);
 86         void disconnect();
 87         void suspend();
 88         void resume();
 89 
 90         // WebSocketChannelClient functions.
 91         void didConnect() final;
 92         void didReceiveMessage(const String&amp; message) final;
 93         void didReceiveBinaryData(Vector&lt;uint8_t&gt;&amp;&amp;) final;
 94         void didUpdateBufferedAmount(unsigned bufferedAmount) final;
 95         void didStartClosingHandshake() final;
 96         void didClose(unsigned unhandledBufferedAmount, ClosingHandshakeCompletionStatus, unsigned short code, const String&amp; reason) final;
 97         void didReceiveMessageError() final;
 98         void didUpgradeURL() final;
 99 
</pre>
</td>
<td>
<hr />
<pre>
 28  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 29  */
 30 
 31 #pragma once
 32 
 33 #include &quot;ThreadableWebSocketChannel.h&quot;
 34 #include &quot;WebSocketChannelClient.h&quot;
 35 #include &quot;WorkerGlobalScope.h&quot;
 36 #include &lt;wtf/RefCounted.h&gt;
 37 #include &lt;wtf/RefPtr.h&gt;
 38 #include &lt;wtf/text/WTFString.h&gt;
 39 
 40 namespace WebCore {
 41 
 42 class ScriptExecutionContext;
 43 class ThreadableWebSocketChannelClientWrapper;
 44 class WorkerGlobalScope;
 45 class WorkerLoaderProxy;
 46 class WorkerRunLoop;
 47 
<span class="line-modified"> 48 class WorkerThreadableWebSocketChannel final : public RefCounted&lt;WorkerThreadableWebSocketChannel&gt;, public ThreadableWebSocketChannel {</span>
 49     WTF_MAKE_FAST_ALLOCATED;
 50 public:
 51     static Ref&lt;ThreadableWebSocketChannel&gt; create(WorkerGlobalScope&amp; workerGlobalScope, WebSocketChannelClient&amp; client, const String&amp; taskMode, SocketProvider&amp; provider)
 52     {
 53         return adoptRef(*new WorkerThreadableWebSocketChannel(workerGlobalScope, client, taskMode, provider));
 54     }
 55     virtual ~WorkerThreadableWebSocketChannel();
 56 
 57     // ThreadableWebSocketChannel functions.
<span class="line-modified"> 58     ConnectStatus connect(const URL&amp;, const String&amp; protocol) final;</span>
<span class="line-modified"> 59     String subprotocol() final;</span>
<span class="line-modified"> 60     String extensions() final;</span>
<span class="line-modified"> 61     ThreadableWebSocketChannel::SendResult send(const String&amp; message) final;</span>
<span class="line-modified"> 62     ThreadableWebSocketChannel::SendResult send(const JSC::ArrayBuffer&amp;, unsigned byteOffset, unsigned byteLength) final;</span>
<span class="line-modified"> 63     ThreadableWebSocketChannel::SendResult send(Blob&amp;) final;</span>
<span class="line-modified"> 64     unsigned bufferedAmount() const final;</span>
<span class="line-modified"> 65     void close(int code, const String&amp; reason) final;</span>
<span class="line-modified"> 66     void fail(const String&amp; reason) final;</span>
<span class="line-modified"> 67     void disconnect() final; // Will suppress didClose().</span>
<span class="line-modified"> 68     void suspend() final;</span>
<span class="line-modified"> 69     void resume() final;</span>
 70 
 71     // Generated by the bridge.  The Peer and its bridge should have identical
 72     // lifetimes.
 73     class Peer : public WebSocketChannelClient {
 74         WTF_MAKE_NONCOPYABLE(Peer); WTF_MAKE_FAST_ALLOCATED;
 75     public:
 76         Peer(Ref&lt;ThreadableWebSocketChannelClientWrapper&gt;&amp;&amp;, WorkerLoaderProxy&amp;, ScriptExecutionContext&amp;, const String&amp; taskMode, SocketProvider&amp;);
 77         ~Peer();
 78 
<span class="line-modified"> 79         ConnectStatus connect(const URL&amp;, const String&amp; protocol);</span>
 80         void send(const String&amp; message);
 81         void send(const JSC::ArrayBuffer&amp;);
 82         void send(Blob&amp;);
 83         void bufferedAmount();
 84         void close(int code, const String&amp; reason);
 85         void fail(const String&amp; reason);
 86         void disconnect();
 87         void suspend();
 88         void resume();
 89 
 90         // WebSocketChannelClient functions.
 91         void didConnect() final;
 92         void didReceiveMessage(const String&amp; message) final;
 93         void didReceiveBinaryData(Vector&lt;uint8_t&gt;&amp;&amp;) final;
 94         void didUpdateBufferedAmount(unsigned bufferedAmount) final;
 95         void didStartClosingHandshake() final;
 96         void didClose(unsigned unhandledBufferedAmount, ClosingHandshakeCompletionStatus, unsigned short code, const String&amp; reason) final;
 97         void didReceiveMessageError() final;
 98         void didUpgradeURL() final;
 99 
</pre>
</td>
</tr>
</table>
<center><a href="WorkerThreadableWebSocketChannel.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../webvr/NavigatorWebVR.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>
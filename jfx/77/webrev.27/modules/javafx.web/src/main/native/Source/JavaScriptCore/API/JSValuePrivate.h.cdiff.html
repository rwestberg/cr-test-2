<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/API/JSValuePrivate.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="JSValue.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="JSValueRef.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/API/JSValuePrivate.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (C) 2018 Apple Inc. All rights reserved.</span>
   *
   * Redistribution and use in source and binary forms, with or without
   * modification, are permitted provided that the following conditions
   * are met:
   * 1. Redistributions of source code must retain the above copyright
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (C) 2018-2019 Apple Inc. All rights reserved.</span>
   *
   * Redistribution and use in source and binary forms, with or without
   * modification, are permitted provided that the following conditions
   * are met:
   * 1. Redistributions of source code must retain the above copyright
</pre>
<hr />
<pre>
<span class="line-old-header">*** 27,135 ***</span>
  
  #import &lt;JavaScriptCore/JavaScriptCore.h&gt;
  
  @interface JSValue(JSPrivate)
  
<span class="line-modified">! #if (defined(__MAC_OS_X_VERSION_MIN_REQUIRED) &amp;&amp; __MAC_OS_X_VERSION_MIN_REQUIRED &lt; JSC_MAC_VERSION_TBA) || (defined(__IPHONE_OS_VERSION_MIN_REQUIRED) &amp;&amp; __IPHONE_OS_VERSION_MIN_REQUIRED &lt; JSC_IOS_VERSION_TBA)</span>
<span class="line-removed">- typedef NSString *JSValueProperty;</span>
<span class="line-removed">- #else</span>
<span class="line-removed">- typedef id JSValueProperty;</span>
<span class="line-removed">- #endif</span>
<span class="line-removed">- </span>
<span class="line-removed">- /*!</span>
<span class="line-removed">-  @method</span>
<span class="line-removed">-  @abstract Create a new, unique, symbol object.</span>
<span class="line-removed">-  @param description The description of the symbol object being created.</span>
<span class="line-removed">-  @param context The JSContext to which the resulting JSValue belongs.</span>
<span class="line-removed">-  @result The JSValue representing a unique JavaScript value with type symbol.</span>
<span class="line-removed">-  */</span>
<span class="line-removed">- + (JSValue *)valueWithNewSymbolFromDescription:(NSString *)description inContext:(JSContext *)context JSC_API_AVAILABLE(macosx(JSC_MAC_TBA), ios(JSC_IOS_TBA));</span>
<span class="line-removed">- </span>
<span class="line-removed">- /*!</span>
<span class="line-removed">-  @method</span>
<span class="line-removed">-  @abstract Access a property of a JSValue.</span>
<span class="line-removed">-  @result The JSValue for the requested property or the JSValue &lt;code&gt;undefined&lt;/code&gt;</span>
<span class="line-removed">-  if the property does not exist.</span>
<span class="line-removed">-  @discussion Corresponds to the JavaScript operation &lt;code&gt;object[property]&lt;/code&gt;. After macOS TBA and iOS TBA, &#39;property&#39; can be any &#39;id&#39; and will be converted to a JSValue using the conversion rules of &lt;code&gt;valueWithObject:inContext:&lt;/code&gt;. Prior to macOS TBA and iOS TBA, &#39;property&#39; was expected to be an NSString *.</span>
<span class="line-removed">-  */</span>
<span class="line-removed">- - (JSValue *)valueForProperty:(JSValueProperty)property;</span>
<span class="line-removed">- </span>
<span class="line-removed">- /*!</span>
<span class="line-removed">-  @method</span>
<span class="line-removed">-  @abstract Set a property on a JSValue.</span>
<span class="line-removed">-  @discussion Corresponds to the JavaScript operation &lt;code&gt;object[property] = value&lt;/code&gt;. After macOS TBA and iOS TBA, &#39;property&#39; can be any &#39;id&#39; and will be converted to a JSValue using the conversion rules of &lt;code&gt;valueWithObject:inContext:&lt;/code&gt;. Prior to macOS TBA and iOS TBA, &#39;property&#39; was expected to be an NSString *.</span>
<span class="line-removed">-  */</span>
<span class="line-removed">- - (void)setValue:(id)value forProperty:(JSValueProperty)property;</span>
<span class="line-removed">- </span>
<span class="line-removed">- /*!</span>
<span class="line-removed">-  @method</span>
<span class="line-removed">-  @abstract Delete a property from a JSValue.</span>
<span class="line-removed">-  @result YES if deletion is successful, NO otherwise.</span>
<span class="line-removed">-  @discussion Corresponds to the JavaScript operation &lt;code&gt;delete object[property]&lt;/code&gt;. After macOS TBA and iOS TBA, &#39;property&#39; can be any &#39;id&#39; and will be converted to a JSValue using the conversion rules of &lt;code&gt;valueWithObject:inContext:&lt;/code&gt;. Prior to macOS TBA and iOS TBA, &#39;property&#39; was expected to be an NSString *.</span>
<span class="line-removed">-  */</span>
<span class="line-removed">- - (BOOL)deleteProperty:(JSValueProperty)property;</span>
<span class="line-removed">- </span>
<span class="line-removed">- /*!</span>
<span class="line-removed">-  @method</span>
<span class="line-removed">-  @abstract Check if a JSValue has a property.</span>
<span class="line-removed">-  @discussion This method has the same function as the JavaScript operator &lt;code&gt;in&lt;/code&gt;.</span>
<span class="line-removed">-  @result Returns YES if property is present on the value.</span>
<span class="line-removed">-  @discussion Corresponds to the JavaScript operation &lt;code&gt;property in object&lt;/code&gt;. After macOS TBA and iOS TBA, &#39;property&#39; can be any &#39;id&#39; and will be converted to a JSValue using the conversion rules of &lt;code&gt;valueWithObject:inContext:&lt;/code&gt;. Prior to macOS TBA and iOS TBA, &#39;property&#39; was expected to be an NSString *.</span>
<span class="line-removed">-  */</span>
<span class="line-removed">- - (BOOL)hasProperty:(JSValueProperty)property;</span>
<span class="line-removed">- </span>
<span class="line-removed">- /*!</span>
<span class="line-removed">-  @method</span>
<span class="line-removed">-  @abstract Define properties with custom descriptors on JSValues.</span>
<span class="line-removed">-  @discussion This method may be used to create a data or accessor property on an object.</span>
<span class="line-removed">-  This method operates in accordance with the Object.defineProperty method in the JavaScript language. After macOS TBA and iOS TBA, &#39;property&#39; can be any &#39;id&#39; and will be converted to a JSValue using the conversion rules of &lt;code&gt;valueWithObject:inContext:&lt;/code&gt;. Prior to macOS TBA and iOS TBA, &#39;property&#39; was expected to be an NSString *.</span>
<span class="line-removed">-  */</span>
<span class="line-removed">- - (void)defineProperty:(JSValueProperty)property descriptor:(id)descriptor;</span>
<span class="line-removed">- </span>
<span class="line-removed">- /*!</span>
<span class="line-removed">-  @property</span>
<span class="line-removed">-  @abstract Check if a JSValue is a symbol.</span>
<span class="line-removed">-  */</span>
<span class="line-removed">- @property (readonly) BOOL isSymbol JSC_API_AVAILABLE(macosx(JSC_MAC_TBA), ios(JSC_IOS_TBA));</span>
<span class="line-removed">- </span>
<span class="line-removed">- /*!</span>
<span class="line-removed">-  @method</span>
<span class="line-removed">-  @abstract Create a new promise object using the provided executor callback.</span>
<span class="line-removed">-  @param callback A callback block invoked while the promise object is</span>
<span class="line-removed">-  being initialized. The resolve and reject parameters are functions that</span>
<span class="line-removed">-  can be called to notify any pending reactions about the state of the</span>
<span class="line-removed">-  new promise object.</span>
<span class="line-removed">-  @param context The JSContext to which the resulting JSValue belongs.</span>
<span class="line-removed">-  @result The JSValue representing a new promise JavaScript object.</span>
<span class="line-removed">-  @discussion This method is equivalent to calling the Promise constructor in JavaScript.</span>
<span class="line-removed">-  the resolve and reject callbacks each normally take a single value, which they</span>
<span class="line-removed">-  forward to all relevent pending reactions. While inside the executor callback context will act</span>
<span class="line-removed">-  as if it were in any other callback, except calleeFunction will be &lt;code&gt;nil&lt;/code&gt;. This also means</span>
<span class="line-removed">-  means the new promise object may be accessed via &lt;code&gt;[context thisValue]&lt;/code&gt;.</span>
<span class="line-removed">-  */</span>
<span class="line-removed">- + (JSValue *)valueWithNewPromiseInContext:(JSContext *)context fromExecutor:(void (^)(JSValue *resolve, JSValue *reject))callback JSC_API_AVAILABLE(macosx(JSC_MAC_TBA), ios(JSC_IOS_TBA));</span>
<span class="line-removed">- </span>
<span class="line-removed">- /*!</span>
<span class="line-removed">-  @method</span>
<span class="line-removed">-  @abstract Create a new resolved promise object with the provided value.</span>
<span class="line-removed">-  @param result The result value to be passed to any reactions.</span>
<span class="line-removed">-  @param context The JSContext to which the resulting JSValue belongs.</span>
<span class="line-removed">-  @result The JSValue representing a new promise JavaScript object.</span>
<span class="line-removed">-  @discussion This method is equivalent to calling &lt;code&gt;[JSValue valueWithNewPromiseFromExecutor:^(JSValue *resolve, JSValue *reject) { [resolve callWithArguments:@[result]]; } inContext:context]&lt;/code&gt;</span>
<span class="line-removed">-  */</span>
<span class="line-removed">- + (JSValue *)valueWithNewPromiseResolvedWithResult:(id)result inContext:(JSContext *)context JSC_API_AVAILABLE(macosx(JSC_MAC_TBA), ios(JSC_IOS_TBA));</span>
<span class="line-removed">- </span>
<span class="line-removed">- /*!</span>
<span class="line-removed">-  @method</span>
<span class="line-removed">-  @abstract Create a new rejected promise object with the provided value.</span>
<span class="line-removed">-  @param reason The result value to be passed to any reactions.</span>
<span class="line-removed">-  @param context The JSContext to which the resulting JSValue belongs.</span>
<span class="line-removed">-  @result The JSValue representing a new promise JavaScript object.</span>
<span class="line-removed">-  @discussion This method is equivalent to calling &lt;code&gt;[JSValue valueWithNewPromiseFromExecutor:^(JSValue *resolve, JSValue *reject) { [reject callWithArguments:@[reason]]; } inContext:context]&lt;/code&gt;</span>
<span class="line-removed">-  */</span>
<span class="line-removed">- + (JSValue *)valueWithNewPromiseRejectedWithReason:(id)reason inContext:(JSContext *)context JSC_API_AVAILABLE(macosx(JSC_MAC_TBA), ios(JSC_IOS_TBA));</span>
<span class="line-removed">- </span>
<span class="line-removed">- @end</span>
<span class="line-removed">- </span>
<span class="line-removed">- /*!</span>
<span class="line-removed">-  @category</span>
<span class="line-removed">-  @discussion Instances of JSValue implement the following methods in order to enable</span>
<span class="line-removed">-  support for subscript access by key and index, for example:</span>
<span class="line-removed">- </span>
<span class="line-removed">-  @textblock</span>
<span class="line-removed">-  JSValue *objectA, *objectB;</span>
<span class="line-removed">-  JSValue *v1 = object[@&quot;X&quot;]; // Get value for property &quot;X&quot; from &#39;object&#39;.</span>
<span class="line-removed">-  JSValue *v2 = object[42];   // Get value for index 42 from &#39;object&#39;.</span>
<span class="line-removed">-  object[@&quot;Y&quot;] = v1;          // Assign &#39;v1&#39; to property &quot;Y&quot; of &#39;object&#39;.</span>
<span class="line-removed">-  object[101] = v2;           // Assign &#39;v2&#39; to index 101 of &#39;object&#39;.</span>
<span class="line-removed">-  @/textblock</span>
<span class="line-removed">- </span>
<span class="line-removed">-  An object key passed as a subscript will be converted to a JavaScript value,</span>
<span class="line-removed">-  and then the value using the same rules as &lt;code&gt;valueWithObject:inContext:&lt;/code&gt;. In macOS</span>
<span class="line-removed">-  TBA and iOS TBA and below, the &lt;code&gt;key&lt;/code&gt; argument of</span>
<span class="line-removed">-  &lt;code&gt;setObject:object forKeyedSubscript:key&lt;/code&gt; was restricted to an</span>
<span class="line-removed">-  &lt;code&gt;NSString &lt;NSCopying&gt; *&lt;/code&gt; but that restriction was never used.</span>
<span class="line-removed">-  */</span>
<span class="line-removed">- @interface JSValue (SubscriptSupportPrivate)</span>
<span class="line-removed">- </span>
<span class="line-removed">- - (JSValue *)objectForKeyedSubscript:(JSValueProperty)key;</span>
<span class="line-removed">- - (JSValue *)objectAtIndexedSubscript:(NSUInteger)index;</span>
<span class="line-removed">- - (void)setObject:(id)object forKeyedSubscript:(JSValueProperty)key;</span>
<span class="line-removed">- - (void)setObject:(id)object atIndexedSubscript:(NSUInteger)index;</span>
  
  @end
  
  #endif // JSC_OBJC_API_ENABLED
<span class="line-new-header">--- 27,10 ---</span>
  
  #import &lt;JavaScriptCore/JavaScriptCore.h&gt;
  
  @interface JSValue(JSPrivate)
  
<span class="line-modified">! // Currently empty. May be used again in the future.</span>
  
  @end
  
  #endif // JSC_OBJC_API_ENABLED
</pre>
<center><a href="JSValue.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="JSValueRef.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>
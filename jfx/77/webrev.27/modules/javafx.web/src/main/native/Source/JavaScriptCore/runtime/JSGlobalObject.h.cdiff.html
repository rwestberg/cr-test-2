<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/runtime/JSGlobalObject.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="JSGlobalObject.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="JSGlobalObjectFunctions.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/runtime/JSGlobalObject.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 36,10 ***</span>
<span class="line-new-header">--- 36,11 ---</span>
  #include &quot;JSSegmentedVariableObject.h&quot;
  #include &quot;JSWeakObjectMapRefInternal.h&quot;
  #include &quot;LazyProperty.h&quot;
  #include &quot;LazyClassStructure.h&quot;
  #include &quot;NumberPrototype.h&quot;
<span class="line-added">+ #include &quot;ParserModes.h&quot;</span>
  #include &quot;RegExpGlobalData.h&quot;
  #include &quot;RuntimeFlags.h&quot;
  #include &quot;SpecialPointer.h&quot;
  #include &quot;StringPrototype.h&quot;
  #include &quot;SymbolPrototype.h&quot;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 122,59 ***</span>
  class WrapperMap;
  #endif
  
  template&lt;typename Watchpoint&gt; class ObjectPropertyChangeAdaptiveWatchpoint;
  
<span class="line-modified">! #define DEFINE_STANDARD_BUILTIN(macro, upperName, lowerName) macro(upperName, lowerName, lowerName, JS ## upperName, upperName, object)</span>
  
<span class="line-modified">! #define FOR_EACH_SIMPLE_BUILTIN_TYPE_WITH_CONSTRUCTOR(macro) \</span>
<span class="line-removed">-     macro(String, string, stringObject, StringObject, String, object) \</span>
<span class="line-removed">-     macro(Error, error, error, ErrorInstance, Error, object) \</span>
<span class="line-removed">-     macro(Map, map, map, JSMap, Map, object) \</span>
<span class="line-removed">-     macro(Set, set, set, JSSet, Set, object) \</span>
<span class="line-removed">-     macro(JSPromise, promise, promise, JSPromise, Promise, object)</span>
  
<span class="line-modified">! #define FOR_BIG_INT_BUILTIN_TYPE_WITH_CONSTRUCTOR(macro) \</span>
<span class="line-modified">!     macro(BigInt, bigInt, bigIntObject, BigIntObject, BigInt, object)</span>
  
  #define FOR_EACH_BUILTIN_DERIVED_ITERATOR_TYPE(macro) \
<span class="line-modified">!     macro(StringIterator, stringIterator, stringIterator, JSStringIterator, StringIterator, iterator) \</span>
  
  #define FOR_EACH_SIMPLE_BUILTIN_TYPE(macro) \
      FOR_EACH_SIMPLE_BUILTIN_TYPE_WITH_CONSTRUCTOR(macro) \
<span class="line-modified">!     macro(JSInternalPromise, internalPromise, internalPromise, JSInternalPromise, InternalPromise, object) \</span>
<span class="line-modified">! </span>
<span class="line-modified">! #define FOR_EACH_LAZY_BUILTIN_TYPE(macro) \</span>
<span class="line-modified">!     macro(Boolean, boolean, booleanObject, BooleanObject, Boolean, object) \</span>
<span class="line-modified">!     macro(Date, date, date, DateInstance, Date, object) \</span>
<span class="line-modified">!     macro(Number, number, numberObject, NumberObject, Number, object) \</span>
<span class="line-modified">!     macro(Symbol, symbol, symbolObject, SymbolObject, Symbol, object) \</span>
      DEFINE_STANDARD_BUILTIN(macro, WeakMap, weakMap) \
      DEFINE_STANDARD_BUILTIN(macro, WeakSet, weakSet) \
  
  #if ENABLE(WEBASSEMBLY)
  #define FOR_EACH_WEBASSEMBLY_CONSTRUCTOR_TYPE(macro) \
<span class="line-modified">!     macro(WebAssemblyCompileError, webAssemblyCompileError, WebAssemblyCompileError, WebAssemblyCompileError, CompileError, error) \</span>
<span class="line-modified">!     macro(WebAssemblyInstance,     webAssemblyInstance,     WebAssemblyInstance,     WebAssemblyInstance,     Instance,     object) \</span>
<span class="line-modified">!     macro(WebAssemblyLinkError,    webAssemblyLinkError,    WebAssemblyLinkError,    WebAssemblyLinkError,    LinkError,    error) \</span>
<span class="line-modified">!     macro(WebAssemblyMemory,       webAssemblyMemory,       WebAssemblyMemory,       WebAssemblyMemory,       Memory,       object) \</span>
<span class="line-modified">!     macro(WebAssemblyModule,       webAssemblyModule,       WebAssemblyModule,       WebAssemblyModule,       Module,       object) \</span>
<span class="line-modified">!     macro(WebAssemblyRuntimeError, webAssemblyRuntimeError, WebAssemblyRuntimeError, WebAssemblyRuntimeError, RuntimeError, error) \</span>
<span class="line-modified">!     macro(WebAssemblyTable,        webAssemblyTable,        WebAssemblyTable,        WebAssemblyTable,        Table,        object)</span>
  #else
  #define FOR_EACH_WEBASSEMBLY_CONSTRUCTOR_TYPE(macro)
  #endif // ENABLE(WEBASSEMBLY)
  
<span class="line-modified">! #define DECLARE_SIMPLE_BUILTIN_TYPE(capitalName, lowerName, properName, instanceType, jsName, prototypeBase) \</span>
      class JS ## capitalName; \
      class capitalName ## Prototype; \
      class capitalName ## Constructor;
  
  class IteratorPrototype;
  FOR_EACH_SIMPLE_BUILTIN_TYPE(DECLARE_SIMPLE_BUILTIN_TYPE)
<span class="line-modified">! FOR_BIG_INT_BUILTIN_TYPE_WITH_CONSTRUCTOR(DECLARE_SIMPLE_BUILTIN_TYPE)</span>
<span class="line-removed">- FOR_EACH_LAZY_BUILTIN_TYPE(DECLARE_SIMPLE_BUILTIN_TYPE)</span>
  FOR_EACH_BUILTIN_DERIVED_ITERATOR_TYPE(DECLARE_SIMPLE_BUILTIN_TYPE)
  FOR_EACH_WEBASSEMBLY_CONSTRUCTOR_TYPE(DECLARE_SIMPLE_BUILTIN_TYPE)
  
  #undef DECLARE_SIMPLE_BUILTIN_TYPE
  
<span class="line-new-header">--- 123,63 ---</span>
  class WrapperMap;
  #endif
  
  template&lt;typename Watchpoint&gt; class ObjectPropertyChangeAdaptiveWatchpoint;
  
<span class="line-modified">! constexpr bool typeExposedByDefault = true;</span>
  
<span class="line-modified">! #define DEFINE_STANDARD_BUILTIN(macro, upperName, lowerName) macro(upperName, lowerName, lowerName, JS ## upperName, upperName, object, typeExposedByDefault)</span>
  
<span class="line-modified">! #define FOR_EACH_SIMPLE_BUILTIN_TYPE_WITH_CONSTRUCTOR(macro) \</span>
<span class="line-modified">!     macro(String, string, stringObject, StringObject, String, object, typeExposedByDefault) \</span>
<span class="line-added">+     macro(Map, map, map, JSMap, Map, object, typeExposedByDefault) \</span>
<span class="line-added">+     macro(Set, set, set, JSSet, Set, object, typeExposedByDefault) \</span>
<span class="line-added">+     macro(JSPromise, promise, promise, JSPromise, Promise, object, typeExposedByDefault) \</span>
<span class="line-added">+     macro(BigInt, bigInt, bigIntObject, BigIntObject, BigInt, object, Options::useBigInt()) \</span>
<span class="line-added">+     macro(WeakObjectRef, weakObjectRef, weakObjectRef, JSWeakObjectRef, WeakRef, object, Options::useWeakRefs()) \</span>
  
  #define FOR_EACH_BUILTIN_DERIVED_ITERATOR_TYPE(macro) \
<span class="line-modified">!     macro(StringIterator, stringIterator, stringIterator, JSStringIterator, StringIterator, iterator, typeExposedByDefault) \</span>
  
  #define FOR_EACH_SIMPLE_BUILTIN_TYPE(macro) \
      FOR_EACH_SIMPLE_BUILTIN_TYPE_WITH_CONSTRUCTOR(macro) \
<span class="line-modified">!     macro(JSInternalPromise, internalPromise, internalPromise, JSInternalPromise, InternalPromise, object, typeExposedByDefault) \</span>
<span class="line-modified">! </span>
<span class="line-modified">! #define FOR_EACH_LAZY_BUILTIN_TYPE_WITH_DECLARATION(macro) \</span>
<span class="line-modified">!     macro(Boolean, boolean, booleanObject, BooleanObject, Boolean, object, typeExposedByDefault) \</span>
<span class="line-modified">!     macro(Date, date, date, DateInstance, Date, object, typeExposedByDefault) \</span>
<span class="line-modified">!     macro(Error, error, error, ErrorInstance, Error, object, typeExposedByDefault) \</span>
<span class="line-modified">!     macro(Number, number, numberObject, NumberObject, Number, object, typeExposedByDefault) \</span>
<span class="line-added">+     macro(Symbol, symbol, symbolObject, SymbolObject, Symbol, object, typeExposedByDefault) \</span>
      DEFINE_STANDARD_BUILTIN(macro, WeakMap, weakMap) \
      DEFINE_STANDARD_BUILTIN(macro, WeakSet, weakSet) \
  
<span class="line-added">+ #define FOR_EACH_LAZY_BUILTIN_TYPE(macro) \</span>
<span class="line-added">+     FOR_EACH_LAZY_BUILTIN_TYPE_WITH_DECLARATION(macro) \</span>
<span class="line-added">+     macro(JSArrayBuffer, arrayBuffer, arrayBuffer, JSArrayBuffer, ArrayBuffer, object, typeExposedByDefault) \</span>
<span class="line-added">+ </span>
  #if ENABLE(WEBASSEMBLY)
  #define FOR_EACH_WEBASSEMBLY_CONSTRUCTOR_TYPE(macro) \
<span class="line-modified">!     macro(WebAssemblyCompileError, webAssemblyCompileError, webAssemblyCompileError, JSWebAssemblyCompileError, CompileError, error, typeExposedByDefault) \</span>
<span class="line-modified">!     macro(WebAssemblyInstance,     webAssemblyInstance,     webAssemblyInstance,     JSWebAssemblyInstance,     Instance,     object, typeExposedByDefault) \</span>
<span class="line-modified">!     macro(WebAssemblyLinkError,    webAssemblyLinkError,    webAssemblyLinkError,    JSWebAssemblyLinkError,    LinkError,    error, typeExposedByDefault) \</span>
<span class="line-modified">!     macro(WebAssemblyMemory,       webAssemblyMemory,       webAssemblyMemory,       JSWebAssemblyMemory,       Memory,       object, typeExposedByDefault) \</span>
<span class="line-modified">!     macro(WebAssemblyModule,       webAssemblyModule,       webAssemblyModule,       JSWebAssemblyModule,       Module,       object, typeExposedByDefault) \</span>
<span class="line-modified">!     macro(WebAssemblyRuntimeError, webAssemblyRuntimeError, webAssemblyRuntimeError, JSWebAssemblyRuntimeError, RuntimeError, error, typeExposedByDefault) \</span>
<span class="line-modified">!     macro(WebAssemblyTable,        webAssemblyTable,        webAssemblyTable,        JSWebAssemblyTable,        Table,        object, typeExposedByDefault)</span>
  #else
  #define FOR_EACH_WEBASSEMBLY_CONSTRUCTOR_TYPE(macro)
  #endif // ENABLE(WEBASSEMBLY)
  
<span class="line-modified">! #define DECLARE_SIMPLE_BUILTIN_TYPE(capitalName, lowerName, properName, instanceType, jsName, prototypeBase, featureFlag) \</span>
      class JS ## capitalName; \
      class capitalName ## Prototype; \
      class capitalName ## Constructor;
  
  class IteratorPrototype;
  FOR_EACH_SIMPLE_BUILTIN_TYPE(DECLARE_SIMPLE_BUILTIN_TYPE)
<span class="line-modified">! FOR_EACH_LAZY_BUILTIN_TYPE_WITH_DECLARATION(DECLARE_SIMPLE_BUILTIN_TYPE)</span>
  FOR_EACH_BUILTIN_DERIVED_ITERATOR_TYPE(DECLARE_SIMPLE_BUILTIN_TYPE)
  FOR_EACH_WEBASSEMBLY_CONSTRUCTOR_TYPE(DECLARE_SIMPLE_BUILTIN_TYPE)
  
  #undef DECLARE_SIMPLE_BUILTIN_TYPE
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 258,11 ***</span>
      WriteBarrier&lt;JSGlobalLexicalEnvironment&gt; m_globalLexicalEnvironment;
      WriteBarrier&lt;JSScope&gt; m_globalScopeExtension;
      WriteBarrier&lt;JSCallee&gt; m_globalCallee;
      WriteBarrier&lt;JSCallee&gt; m_stackOverflowFrameCallee;
  
<span class="line-removed">-     WriteBarrier&lt;ErrorConstructor&gt; m_errorConstructor;</span>
      LazyClassStructure m_evalErrorStructure;
      LazyClassStructure m_rangeErrorStructure;
      LazyClassStructure m_referenceErrorStructure;
      LazyClassStructure m_syntaxErrorStructure;
      LazyClassStructure m_typeErrorStructure;
<span class="line-new-header">--- 263,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 272,29 ***</span>
      WriteBarrier&lt;ArrayConstructor&gt; m_arrayConstructor;
      WriteBarrier&lt;JSPromiseConstructor&gt; m_promiseConstructor;
      WriteBarrier&lt;JSInternalPromiseConstructor&gt; m_internalPromiseConstructor;
  
  #if ENABLE(INTL)
<span class="line-removed">-     WriteBarrier&lt;IntlObject&gt; m_intlObject;</span>
      WriteBarrier&lt;IntlCollator&gt; m_defaultCollator;
      LazyProperty&lt;JSGlobalObject, Structure&gt; m_collatorStructure;
      LazyProperty&lt;JSGlobalObject, Structure&gt; m_numberFormatStructure;
      LazyProperty&lt;JSGlobalObject, Structure&gt; m_dateTimeFormatStructure;
      LazyProperty&lt;JSGlobalObject, Structure&gt; m_pluralRulesStructure;
  #endif
      WriteBarrier&lt;NullGetterFunction&gt; m_nullGetterFunction;
      WriteBarrier&lt;NullSetterFunction&gt; m_nullSetterFunction;
  
<span class="line-modified">!     WriteBarrier&lt;JSFunction&gt; m_parseIntFunction;</span>
<span class="line-modified">!     WriteBarrier&lt;JSFunction&gt; m_parseFloatFunction;</span>
  
<span class="line-removed">-     WriteBarrier&lt;JSFunction&gt; m_evalFunction;</span>
      WriteBarrier&lt;JSFunction&gt; m_callFunction;
      WriteBarrier&lt;JSFunction&gt; m_applyFunction;
      WriteBarrier&lt;JSFunction&gt; m_throwTypeErrorFunction;
      LazyProperty&lt;JSGlobalObject, JSFunction&gt; m_arrayProtoToStringFunction;
      LazyProperty&lt;JSGlobalObject, JSFunction&gt; m_arrayProtoValuesFunction;
      LazyProperty&lt;JSGlobalObject, JSFunction&gt; m_initializePromiseFunction;
      LazyProperty&lt;JSGlobalObject, JSFunction&gt; m_iteratorProtocolFunction;
      LazyProperty&lt;JSGlobalObject, JSFunction&gt; m_promiseResolveFunction;
      WriteBarrier&lt;JSFunction&gt; m_objectProtoValueOfFunction;
      WriteBarrier&lt;JSFunction&gt; m_numberProtoToStringFunction;
<span class="line-new-header">--- 276,28 ---</span>
      WriteBarrier&lt;ArrayConstructor&gt; m_arrayConstructor;
      WriteBarrier&lt;JSPromiseConstructor&gt; m_promiseConstructor;
      WriteBarrier&lt;JSInternalPromiseConstructor&gt; m_internalPromiseConstructor;
  
  #if ENABLE(INTL)
      WriteBarrier&lt;IntlCollator&gt; m_defaultCollator;
      LazyProperty&lt;JSGlobalObject, Structure&gt; m_collatorStructure;
      LazyProperty&lt;JSGlobalObject, Structure&gt; m_numberFormatStructure;
      LazyProperty&lt;JSGlobalObject, Structure&gt; m_dateTimeFormatStructure;
      LazyProperty&lt;JSGlobalObject, Structure&gt; m_pluralRulesStructure;
  #endif
      WriteBarrier&lt;NullGetterFunction&gt; m_nullGetterFunction;
      WriteBarrier&lt;NullSetterFunction&gt; m_nullSetterFunction;
  
<span class="line-modified">!     LazyProperty&lt;JSGlobalObject, JSFunction&gt; m_parseIntFunction;</span>
<span class="line-modified">!     LazyProperty&lt;JSGlobalObject, JSFunction&gt; m_parseFloatFunction;</span>
  
      WriteBarrier&lt;JSFunction&gt; m_callFunction;
      WriteBarrier&lt;JSFunction&gt; m_applyFunction;
      WriteBarrier&lt;JSFunction&gt; m_throwTypeErrorFunction;
      LazyProperty&lt;JSGlobalObject, JSFunction&gt; m_arrayProtoToStringFunction;
      LazyProperty&lt;JSGlobalObject, JSFunction&gt; m_arrayProtoValuesFunction;
<span class="line-added">+     LazyProperty&lt;JSGlobalObject, JSFunction&gt; m_evalFunction;</span>
      LazyProperty&lt;JSGlobalObject, JSFunction&gt; m_initializePromiseFunction;
      LazyProperty&lt;JSGlobalObject, JSFunction&gt; m_iteratorProtocolFunction;
      LazyProperty&lt;JSGlobalObject, JSFunction&gt; m_promiseResolveFunction;
      WriteBarrier&lt;JSFunction&gt; m_objectProtoValueOfFunction;
      WriteBarrier&lt;JSFunction&gt; m_numberProtoToStringFunction;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 319,11 ***</span>
      WriteBarrier&lt;GeneratorPrototype&gt; m_generatorPrototype;
      WriteBarrier&lt;AsyncGeneratorPrototype&gt; m_asyncGeneratorPrototype;
  
      LazyProperty&lt;JSGlobalObject, Structure&gt; m_debuggerScopeStructure;
      LazyProperty&lt;JSGlobalObject, Structure&gt; m_withScopeStructure;
<span class="line-modified">!     WriteBarrier&lt;Structure&gt; m_strictEvalActivationStructure;</span>
      WriteBarrier&lt;Structure&gt; m_lexicalEnvironmentStructure;
      LazyProperty&lt;JSGlobalObject, Structure&gt; m_moduleEnvironmentStructure;
      WriteBarrier&lt;Structure&gt; m_directArgumentsStructure;
      WriteBarrier&lt;Structure&gt; m_scopedArgumentsStructure;
      WriteBarrier&lt;Structure&gt; m_clonedArgumentsStructure;
<span class="line-new-header">--- 322,11 ---</span>
      WriteBarrier&lt;GeneratorPrototype&gt; m_generatorPrototype;
      WriteBarrier&lt;AsyncGeneratorPrototype&gt; m_asyncGeneratorPrototype;
  
      LazyProperty&lt;JSGlobalObject, Structure&gt; m_debuggerScopeStructure;
      LazyProperty&lt;JSGlobalObject, Structure&gt; m_withScopeStructure;
<span class="line-modified">!     LazyProperty&lt;JSGlobalObject, Structure&gt; m_strictEvalActivationStructure;</span>
      WriteBarrier&lt;Structure&gt; m_lexicalEnvironmentStructure;
      LazyProperty&lt;JSGlobalObject, Structure&gt; m_moduleEnvironmentStructure;
      WriteBarrier&lt;Structure&gt; m_directArgumentsStructure;
      WriteBarrier&lt;Structure&gt; m_scopedArgumentsStructure;
      WriteBarrier&lt;Structure&gt; m_clonedArgumentsStructure;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 369,47 ***</span>
      WriteBarrier&lt;AsyncFunctionPrototype&gt; m_asyncFunctionPrototype;
      WriteBarrier&lt;AsyncGeneratorFunctionPrototype&gt; m_asyncGeneratorFunctionPrototype;
      WriteBarrier&lt;Structure&gt; m_asyncFunctionStructure;
      WriteBarrier&lt;Structure&gt; m_asyncGeneratorFunctionStructure;
      WriteBarrier&lt;Structure&gt; m_generatorFunctionStructure;
<span class="line-modified">!     WriteBarrier&lt;Structure&gt; m_iteratorResultObjectStructure;</span>
      WriteBarrier&lt;Structure&gt; m_regExpMatchesArrayStructure;
      WriteBarrier&lt;Structure&gt; m_regExpMatchesArrayWithGroupsStructure;
<span class="line-modified">!     WriteBarrier&lt;Structure&gt; m_moduleRecordStructure;</span>
<span class="line-modified">!     WriteBarrier&lt;Structure&gt; m_moduleNamespaceObjectStructure;</span>
<span class="line-modified">!     WriteBarrier&lt;Structure&gt; m_proxyObjectStructure;</span>
<span class="line-modified">!     WriteBarrier&lt;Structure&gt; m_callableProxyObjectStructure;</span>
<span class="line-modified">!     WriteBarrier&lt;Structure&gt; m_proxyRevokeStructure;</span>
<span class="line-removed">-     WriteBarrier&lt;JSArrayBufferPrototype&gt; m_arrayBufferPrototype;</span>
<span class="line-removed">-     WriteBarrier&lt;Structure&gt; m_arrayBufferStructure;</span>
  #if ENABLE(SHARED_ARRAY_BUFFER)
      WriteBarrier&lt;JSArrayBufferPrototype&gt; m_sharedArrayBufferPrototype;
      WriteBarrier&lt;Structure&gt; m_sharedArrayBufferStructure;
  #endif
  
<span class="line-modified">! #define DEFINE_STORAGE_FOR_SIMPLE_TYPE(capitalName, lowerName, properName, instanceType, jsName, prototypeBase) \</span>
      WriteBarrier&lt;capitalName ## Prototype&gt; m_ ## lowerName ## Prototype; \
      WriteBarrier&lt;Structure&gt; m_ ## properName ## Structure;
  
      FOR_EACH_SIMPLE_BUILTIN_TYPE(DEFINE_STORAGE_FOR_SIMPLE_TYPE)
<span class="line-removed">-     FOR_BIG_INT_BUILTIN_TYPE_WITH_CONSTRUCTOR(DEFINE_STORAGE_FOR_SIMPLE_TYPE)</span>
      FOR_EACH_BUILTIN_DERIVED_ITERATOR_TYPE(DEFINE_STORAGE_FOR_SIMPLE_TYPE)
  
  #if ENABLE(WEBASSEMBLY)
<span class="line-modified">!     WriteBarrier&lt;Structure&gt; m_webAssemblyStructure;</span>
<span class="line-modified">!     WriteBarrier&lt;Structure&gt; m_webAssemblyModuleRecordStructure;</span>
<span class="line-modified">!     WriteBarrier&lt;Structure&gt; m_webAssemblyFunctionStructure;</span>
<span class="line-modified">!     WriteBarrier&lt;Structure&gt; m_webAssemblyWrapperFunctionStructure;</span>
<span class="line-modified">!     WriteBarrier&lt;Structure&gt; m_webAssemblyToJSCalleeStructure;</span>
<span class="line-modified">!     FOR_EACH_WEBASSEMBLY_CONSTRUCTOR_TYPE(DEFINE_STORAGE_FOR_SIMPLE_TYPE)</span>
  #endif // ENABLE(WEBASSEMBLY)
  
<span class="line-removed">- #undef DEFINE_STORAGE_FOR_SIMPLE_TYPE</span>
<span class="line-removed">- </span>
<span class="line-removed">- #define DEFINE_STORAGE_FOR_LAZY_TYPE(capitalName, lowerName, properName, instanceType, jsName, prototypeBase) \</span>
<span class="line-removed">-     LazyClassStructure m_ ## properName ## Structure;</span>
      FOR_EACH_LAZY_BUILTIN_TYPE(DEFINE_STORAGE_FOR_LAZY_TYPE)
  #undef DEFINE_STORAGE_FOR_LAZY_TYPE
  
      WriteBarrier&lt;GetterSetter&gt; m_speciesGetterSetter;
  
      LazyProperty&lt;JSGlobalObject, JSTypedArrayViewPrototype&gt; m_typedArrayProto;
<span class="line-new-header">--- 372,45 ---</span>
      WriteBarrier&lt;AsyncFunctionPrototype&gt; m_asyncFunctionPrototype;
      WriteBarrier&lt;AsyncGeneratorFunctionPrototype&gt; m_asyncGeneratorFunctionPrototype;
      WriteBarrier&lt;Structure&gt; m_asyncFunctionStructure;
      WriteBarrier&lt;Structure&gt; m_asyncGeneratorFunctionStructure;
      WriteBarrier&lt;Structure&gt; m_generatorFunctionStructure;
<span class="line-modified">!     LazyProperty&lt;JSGlobalObject, Structure&gt; m_iteratorResultObjectStructure;</span>
      WriteBarrier&lt;Structure&gt; m_regExpMatchesArrayStructure;
      WriteBarrier&lt;Structure&gt; m_regExpMatchesArrayWithGroupsStructure;
<span class="line-modified">!     LazyProperty&lt;JSGlobalObject, Structure&gt; m_moduleRecordStructure;</span>
<span class="line-modified">!     LazyProperty&lt;JSGlobalObject, Structure&gt; m_moduleNamespaceObjectStructure;</span>
<span class="line-modified">!     LazyProperty&lt;JSGlobalObject, Structure&gt; m_proxyObjectStructure;</span>
<span class="line-modified">!     LazyProperty&lt;JSGlobalObject, Structure&gt; m_callableProxyObjectStructure;</span>
<span class="line-modified">!     LazyProperty&lt;JSGlobalObject, Structure&gt; m_proxyRevokeStructure;</span>
  #if ENABLE(SHARED_ARRAY_BUFFER)
      WriteBarrier&lt;JSArrayBufferPrototype&gt; m_sharedArrayBufferPrototype;
      WriteBarrier&lt;Structure&gt; m_sharedArrayBufferStructure;
  #endif
  
<span class="line-modified">! #define DEFINE_STORAGE_FOR_SIMPLE_TYPE(capitalName, lowerName, properName, instanceType, jsName, prototypeBase, featureFlag) \</span>
      WriteBarrier&lt;capitalName ## Prototype&gt; m_ ## lowerName ## Prototype; \
      WriteBarrier&lt;Structure&gt; m_ ## properName ## Structure;
  
<span class="line-added">+ #define DEFINE_STORAGE_FOR_LAZY_TYPE(capitalName, lowerName, properName, instanceType, jsName, prototypeBase, featureFlag) \</span>
<span class="line-added">+     LazyClassStructure m_ ## properName ## Structure;</span>
<span class="line-added">+ </span>
      FOR_EACH_SIMPLE_BUILTIN_TYPE(DEFINE_STORAGE_FOR_SIMPLE_TYPE)
      FOR_EACH_BUILTIN_DERIVED_ITERATOR_TYPE(DEFINE_STORAGE_FOR_SIMPLE_TYPE)
  
  #if ENABLE(WEBASSEMBLY)
<span class="line-modified">!     LazyProperty&lt;JSGlobalObject, Structure&gt; m_webAssemblyModuleRecordStructure;</span>
<span class="line-modified">!     LazyProperty&lt;JSGlobalObject, Structure&gt; m_webAssemblyFunctionStructure;</span>
<span class="line-modified">!     LazyProperty&lt;JSGlobalObject, Structure&gt; m_jsToWasmICCalleeStructure;</span>
<span class="line-modified">!     LazyProperty&lt;JSGlobalObject, Structure&gt; m_webAssemblyWrapperFunctionStructure;</span>
<span class="line-modified">!     LazyProperty&lt;JSGlobalObject, Structure&gt; m_webAssemblyToJSCalleeStructure;</span>
<span class="line-modified">!     FOR_EACH_WEBASSEMBLY_CONSTRUCTOR_TYPE(DEFINE_STORAGE_FOR_LAZY_TYPE)</span>
  #endif // ENABLE(WEBASSEMBLY)
  
      FOR_EACH_LAZY_BUILTIN_TYPE(DEFINE_STORAGE_FOR_LAZY_TYPE)
<span class="line-added">+ </span>
<span class="line-added">+ #undef DEFINE_STORAGE_FOR_SIMPLE_TYPE</span>
  #undef DEFINE_STORAGE_FOR_LAZY_TYPE
  
      WriteBarrier&lt;GetterSetter&gt; m_speciesGetterSetter;
  
      LazyProperty&lt;JSGlobalObject, JSTypedArrayViewPrototype&gt; m_typedArrayProto;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 422,10 ***</span>
<span class="line-new-header">--- 423,12 ---</span>
      JSCell* m_specialPointers[Special::TableSize]; // Special pointers used by the LLInt and JIT.
      JSCell* m_linkTimeConstants[LinkTimeConstantCount];
  
      String m_name;
  
<span class="line-added">+     Strong&lt;JSObject&gt; m_unhandledRejectionCallback;</span>
<span class="line-added">+ </span>
      Debugger* m_debugger;
  
      VM&amp; m_vm;
  
  #if ENABLE(REMOTE_INSPECTOR)
</pre>
<hr />
<pre>
<span class="line-old-header">*** 449,33 ***</span>
      WeakRandom m_weakRandom;
      RegExpGlobalData m_regExpGlobalData;
  
      JSCallee* stackOverflowFrameCallee() const { return m_stackOverflowFrameCallee.get(); }
  
<span class="line-modified">!     InlineWatchpointSet&amp; arrayIteratorProtocolWatchpoint() { return m_arrayIteratorProtocolWatchpoint; }</span>
<span class="line-modified">!     InlineWatchpointSet&amp; mapIteratorProtocolWatchpoint() { return m_mapIteratorProtocolWatchpoint; }</span>
<span class="line-modified">!     InlineWatchpointSet&amp; setIteratorProtocolWatchpoint() { return m_setIteratorProtocolWatchpoint; }</span>
<span class="line-modified">!     InlineWatchpointSet&amp; stringIteratorProtocolWatchpoint() { return m_stringIteratorProtocolWatchpoint; }</span>
<span class="line-modified">!     InlineWatchpointSet&amp; mapSetWatchpoint() { return m_mapSetWatchpoint; }</span>
<span class="line-modified">!     InlineWatchpointSet&amp; setAddWatchpoint() { return m_setAddWatchpoint; }</span>
<span class="line-modified">!     InlineWatchpointSet&amp; arraySpeciesWatchpoint() { return m_arraySpeciesWatchpoint; }</span>
<span class="line-modified">!     InlineWatchpointSet&amp; numberToStringWatchpoint()</span>
      {
          RELEASE_ASSERT(VM::canUseJIT());
<span class="line-modified">!         return m_numberToStringWatchpoint;</span>
      }
      // If this hasn&#39;t been invalidated, it means the array iterator protocol
      // is not observable to user code yet.
<span class="line-modified">!     InlineWatchpointSet m_arrayIteratorProtocolWatchpoint;</span>
<span class="line-modified">!     InlineWatchpointSet m_mapIteratorProtocolWatchpoint;</span>
<span class="line-modified">!     InlineWatchpointSet m_setIteratorProtocolWatchpoint;</span>
<span class="line-modified">!     InlineWatchpointSet m_stringIteratorProtocolWatchpoint;</span>
<span class="line-modified">!     InlineWatchpointSet m_mapSetWatchpoint;</span>
<span class="line-modified">!     InlineWatchpointSet m_setAddWatchpoint;</span>
<span class="line-modified">!     InlineWatchpointSet m_arraySpeciesWatchpoint;</span>
<span class="line-modified">!     InlineWatchpointSet m_numberToStringWatchpoint;</span>
      std::unique_ptr&lt;ObjectPropertyChangeAdaptiveWatchpoint&lt;InlineWatchpointSet&gt;&gt; m_arrayPrototypeSymbolIteratorWatchpoint;
      std::unique_ptr&lt;ObjectPropertyChangeAdaptiveWatchpoint&lt;InlineWatchpointSet&gt;&gt; m_arrayIteratorPrototypeNext;
      std::unique_ptr&lt;ObjectPropertyChangeAdaptiveWatchpoint&lt;InlineWatchpointSet&gt;&gt; m_mapPrototypeSymbolIteratorWatchpoint;
      std::unique_ptr&lt;ObjectPropertyChangeAdaptiveWatchpoint&lt;InlineWatchpointSet&gt;&gt; m_mapIteratorPrototypeNextWatchpoint;
      std::unique_ptr&lt;ObjectPropertyChangeAdaptiveWatchpoint&lt;InlineWatchpointSet&gt;&gt; m_setPrototypeSymbolIteratorWatchpoint;
      std::unique_ptr&lt;ObjectPropertyChangeAdaptiveWatchpoint&lt;InlineWatchpointSet&gt;&gt; m_setIteratorPrototypeNextWatchpoint;
<span class="line-new-header">--- 452,38 ---</span>
      WeakRandom m_weakRandom;
      RegExpGlobalData m_regExpGlobalData;
  
      JSCallee* stackOverflowFrameCallee() const { return m_stackOverflowFrameCallee.get(); }
  
<span class="line-modified">!     InlineWatchpointSet&amp; arrayIteratorProtocolWatchpointSet() { return m_arrayIteratorProtocolWatchpointSet; }</span>
<span class="line-modified">!     InlineWatchpointSet&amp; mapIteratorProtocolWatchpointSet() { return m_mapIteratorProtocolWatchpointSet; }</span>
<span class="line-modified">!     InlineWatchpointSet&amp; setIteratorProtocolWatchpointSet() { return m_setIteratorProtocolWatchpointSet; }</span>
<span class="line-modified">!     InlineWatchpointSet&amp; stringIteratorProtocolWatchpointSet() { return m_stringIteratorProtocolWatchpointSet; }</span>
<span class="line-modified">!     InlineWatchpointSet&amp; mapSetWatchpointSet() { return m_mapSetWatchpointSet; }</span>
<span class="line-modified">!     InlineWatchpointSet&amp; setAddWatchpointSet() { return m_setAddWatchpointSet; }</span>
<span class="line-modified">!     InlineWatchpointSet&amp; arraySpeciesWatchpointSet() { return m_arraySpeciesWatchpointSet; }</span>
<span class="line-modified">!     InlineWatchpointSet&amp; arrayJoinWatchpointSet() { return m_arrayJoinWatchpointSet; }</span>
<span class="line-added">+     InlineWatchpointSet&amp; numberToStringWatchpointSet()</span>
      {
          RELEASE_ASSERT(VM::canUseJIT());
<span class="line-modified">!         return m_numberToStringWatchpointSet;</span>
      }
      // If this hasn&#39;t been invalidated, it means the array iterator protocol
      // is not observable to user code yet.
<span class="line-modified">!     InlineWatchpointSet m_arrayIteratorProtocolWatchpointSet;</span>
<span class="line-modified">!     InlineWatchpointSet m_mapIteratorProtocolWatchpointSet;</span>
<span class="line-modified">!     InlineWatchpointSet m_setIteratorProtocolWatchpointSet;</span>
<span class="line-modified">!     InlineWatchpointSet m_stringIteratorProtocolWatchpointSet;</span>
<span class="line-modified">!     InlineWatchpointSet m_mapSetWatchpointSet;</span>
<span class="line-modified">!     InlineWatchpointSet m_setAddWatchpointSet;</span>
<span class="line-modified">!     InlineWatchpointSet m_arraySpeciesWatchpointSet;</span>
<span class="line-modified">!     InlineWatchpointSet m_arrayJoinWatchpointSet;</span>
<span class="line-added">+     InlineWatchpointSet m_numberToStringWatchpointSet;</span>
<span class="line-added">+     std::unique_ptr&lt;ObjectPropertyChangeAdaptiveWatchpoint&lt;InlineWatchpointSet&gt;&gt; m_arrayConstructorSpeciesWatchpoint;</span>
<span class="line-added">+     std::unique_ptr&lt;ObjectPropertyChangeAdaptiveWatchpoint&lt;InlineWatchpointSet&gt;&gt; m_arrayPrototypeConstructorWatchpoint;</span>
      std::unique_ptr&lt;ObjectPropertyChangeAdaptiveWatchpoint&lt;InlineWatchpointSet&gt;&gt; m_arrayPrototypeSymbolIteratorWatchpoint;
<span class="line-added">+     std::unique_ptr&lt;ObjectPropertyChangeAdaptiveWatchpoint&lt;InlineWatchpointSet&gt;&gt; m_arrayPrototypeJoinWatchpoint;</span>
      std::unique_ptr&lt;ObjectPropertyChangeAdaptiveWatchpoint&lt;InlineWatchpointSet&gt;&gt; m_arrayIteratorPrototypeNext;
      std::unique_ptr&lt;ObjectPropertyChangeAdaptiveWatchpoint&lt;InlineWatchpointSet&gt;&gt; m_mapPrototypeSymbolIteratorWatchpoint;
      std::unique_ptr&lt;ObjectPropertyChangeAdaptiveWatchpoint&lt;InlineWatchpointSet&gt;&gt; m_mapIteratorPrototypeNextWatchpoint;
      std::unique_ptr&lt;ObjectPropertyChangeAdaptiveWatchpoint&lt;InlineWatchpointSet&gt;&gt; m_setPrototypeSymbolIteratorWatchpoint;
      std::unique_ptr&lt;ObjectPropertyChangeAdaptiveWatchpoint&lt;InlineWatchpointSet&gt;&gt; m_setIteratorPrototypeNextWatchpoint;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 516,11 ***</span>
  
      void createRareDataIfNeeded()
      {
          if (m_rareData)
              return;
<span class="line-modified">!         m_rareData = std::make_unique&lt;JSGlobalObjectRareData&gt;();</span>
      }
  
  public:
      typedef JSSegmentedVariableObject Base;
      static const unsigned StructureFlags = Base::StructureFlags | HasStaticPropertyTable | OverridesGetOwnPropertySlot | OverridesGetPropertyNames | IsImmutablePrototypeExoticObject;
<span class="line-new-header">--- 524,11 ---</span>
  
      void createRareDataIfNeeded()
      {
          if (m_rareData)
              return;
<span class="line-modified">!         m_rareData = makeUnique&lt;JSGlobalObjectRareData&gt;();</span>
      }
  
  public:
      typedef JSSegmentedVariableObject Base;
      static const unsigned StructureFlags = Base::StructureFlags | HasStaticPropertyTable | OverridesGetOwnPropertySlot | OverridesGetPropertyNames | IsImmutablePrototypeExoticObject;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 592,14 ***</span>
  #endif
  
      NullGetterFunction* nullGetterFunction() const { return m_nullGetterFunction.get(); }
      NullSetterFunction* nullSetterFunction() const { return m_nullSetterFunction.get(); }
  
<span class="line-modified">!     JSFunction* parseIntFunction() const { return m_parseIntFunction.get(); }</span>
<span class="line-modified">!     JSFunction* parseFloatFunction() const { return m_parseFloatFunction.get(); }</span>
  
<span class="line-modified">!     JSFunction* evalFunction() const { return m_evalFunction.get(); }</span>
      JSFunction* callFunction() const { return m_callFunction.get(); }
      JSFunction* applyFunction() const { return m_applyFunction.get(); }
      JSFunction* throwTypeErrorFunction() const { return m_throwTypeErrorFunction.get(); }
      JSFunction* arrayProtoToStringFunction() const { return m_arrayProtoToStringFunction.get(this); }
      JSFunction* arrayProtoValuesFunction() const { return m_arrayProtoValuesFunction.get(this); }
<span class="line-new-header">--- 600,14 ---</span>
  #endif
  
      NullGetterFunction* nullGetterFunction() const { return m_nullGetterFunction.get(); }
      NullSetterFunction* nullSetterFunction() const { return m_nullSetterFunction.get(); }
  
<span class="line-modified">!     JSFunction* parseIntFunction() const { return m_parseIntFunction.get(this); }</span>
<span class="line-modified">!     JSFunction* parseFloatFunction() const { return m_parseFloatFunction.get(this); }</span>
  
<span class="line-modified">!     JSFunction* evalFunction() const { return m_evalFunction.get(this); }</span>
      JSFunction* callFunction() const { return m_callFunction.get(); }
      JSFunction* applyFunction() const { return m_applyFunction.get(); }
      JSFunction* throwTypeErrorFunction() const { return m_throwTypeErrorFunction.get(); }
      JSFunction* arrayProtoToStringFunction() const { return m_arrayProtoToStringFunction.get(this); }
      JSFunction* arrayProtoValuesFunction() const { return m_arrayProtoValuesFunction.get(this); }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 629,11 ***</span>
      JSObject* numberPrototype() const { return m_numberObjectStructure.prototypeInitializedOnMainThread(this); }
      BigIntPrototype* bigIntPrototype() const { return m_bigIntPrototype.get(); }
      JSObject* datePrototype() const { return m_dateStructure.prototype(this); }
      JSObject* symbolPrototype() const { return m_symbolObjectStructure.prototypeInitializedOnMainThread(this); }
      RegExpPrototype* regExpPrototype() const { return m_regExpPrototype.get(); }
<span class="line-modified">!     ErrorPrototype* errorPrototype() const { return m_errorPrototype.get(); }</span>
      IteratorPrototype* iteratorPrototype() const { return m_iteratorPrototype.get(); }
      AsyncIteratorPrototype* asyncIteratorPrototype() const { return m_asyncIteratorPrototype.get(); }
      GeneratorFunctionPrototype* generatorFunctionPrototype() const { return m_generatorFunctionPrototype.get(); }
      GeneratorPrototype* generatorPrototype() const { return m_generatorPrototype.get(); }
      AsyncFunctionPrototype* asyncFunctionPrototype() const { return m_asyncFunctionPrototype.get(); }
<span class="line-new-header">--- 637,11 ---</span>
      JSObject* numberPrototype() const { return m_numberObjectStructure.prototypeInitializedOnMainThread(this); }
      BigIntPrototype* bigIntPrototype() const { return m_bigIntPrototype.get(); }
      JSObject* datePrototype() const { return m_dateStructure.prototype(this); }
      JSObject* symbolPrototype() const { return m_symbolObjectStructure.prototypeInitializedOnMainThread(this); }
      RegExpPrototype* regExpPrototype() const { return m_regExpPrototype.get(); }
<span class="line-modified">!     JSObject* errorPrototype() const { return m_errorStructure.prototype(this); }</span>
      IteratorPrototype* iteratorPrototype() const { return m_iteratorPrototype.get(); }
      AsyncIteratorPrototype* asyncIteratorPrototype() const { return m_asyncIteratorPrototype.get(); }
      GeneratorFunctionPrototype* generatorFunctionPrototype() const { return m_generatorFunctionPrototype.get(); }
      GeneratorPrototype* generatorPrototype() const { return m_generatorPrototype.get(); }
      AsyncFunctionPrototype* asyncFunctionPrototype() const { return m_asyncFunctionPrototype.get(); }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 644,11 ***</span>
      AsyncGeneratorPrototype* asyncGeneratorPrototype() const { return m_asyncGeneratorPrototype.get(); }
      AsyncGeneratorFunctionPrototype* asyncGeneratorFunctionPrototype() const { return m_asyncGeneratorFunctionPrototype.get(); }
  
      Structure* debuggerScopeStructure() const { return m_debuggerScopeStructure.get(this); }
      Structure* withScopeStructure() const { return m_withScopeStructure.get(this); }
<span class="line-modified">!     Structure* strictEvalActivationStructure() const { return m_strictEvalActivationStructure.get(); }</span>
      Structure* activationStructure() const { return m_lexicalEnvironmentStructure.get(); }
      Structure* moduleEnvironmentStructure() const { return m_moduleEnvironmentStructure.get(this); }
      Structure* directArgumentsStructure() const { return m_directArgumentsStructure.get(); }
      Structure* scopedArgumentsStructure() const { return m_scopedArgumentsStructure.get(); }
      Structure* clonedArgumentsStructure() const { return m_clonedArgumentsStructure.get(); }
<span class="line-new-header">--- 652,11 ---</span>
      AsyncGeneratorPrototype* asyncGeneratorPrototype() const { return m_asyncGeneratorPrototype.get(); }
      AsyncGeneratorFunctionPrototype* asyncGeneratorFunctionPrototype() const { return m_asyncGeneratorFunctionPrototype.get(); }
  
      Structure* debuggerScopeStructure() const { return m_debuggerScopeStructure.get(this); }
      Structure* withScopeStructure() const { return m_withScopeStructure.get(this); }
<span class="line-modified">!     Structure* strictEvalActivationStructure() const { return m_strictEvalActivationStructure.get(this); }</span>
      Structure* activationStructure() const { return m_lexicalEnvironmentStructure.get(); }
      Structure* moduleEnvironmentStructure() const { return m_moduleEnvironmentStructure.get(this); }
      Structure* directArgumentsStructure() const { return m_directArgumentsStructure.get(); }
      Structure* scopedArgumentsStructure() const { return m_scopedArgumentsStructure.get(); }
      Structure* clonedArgumentsStructure() const { return m_clonedArgumentsStructure.get(); }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 690,11 ***</span>
      Structure* glibWrapperObjectStructure() const { return m_glibWrapperObjectStructure.get(this); }
  #endif
      Structure* dateStructure() const { return m_dateStructure.get(this); }
      Structure* symbolObjectStructure() const { return m_symbolObjectStructure.get(this); }
      Structure* nullPrototypeObjectStructure() const { return m_nullPrototypeObjectStructure.get(); }
<span class="line-modified">!     Structure* errorStructure() const { return m_errorStructure.get(); }</span>
      Structure* errorStructure(ErrorType errorType) const
      {
          switch (errorType) {
          case ErrorType::Error:
              return errorStructure();
<span class="line-new-header">--- 698,11 ---</span>
      Structure* glibWrapperObjectStructure() const { return m_glibWrapperObjectStructure.get(this); }
  #endif
      Structure* dateStructure() const { return m_dateStructure.get(this); }
      Structure* symbolObjectStructure() const { return m_symbolObjectStructure.get(this); }
      Structure* nullPrototypeObjectStructure() const { return m_nullPrototypeObjectStructure.get(); }
<span class="line-modified">!     Structure* errorStructure() const { return m_errorStructure.get(this); }</span>
      Structure* errorStructure(ErrorType errorType) const
      {
          switch (errorType) {
          case ErrorType::Error:
              return errorStructure();
</pre>
<hr />
<pre>
<span class="line-old-header">*** 746,26 ***</span>
      Structure* regExpStructure() const { return m_regExpStructure.get(); }
      Structure* generatorFunctionStructure() const { return m_generatorFunctionStructure.get(); }
      Structure* asyncFunctionStructure() const { return m_asyncFunctionStructure.get(); }
      Structure* asyncGeneratorFunctionStructure() const { return m_asyncGeneratorFunctionStructure.get(); }
      Structure* stringObjectStructure() const { return m_stringObjectStructure.get(); }
<span class="line-modified">!     Structure* bigIntObjectStructure() const { return m_bigIntObjectStructure.get(); }</span>
<span class="line-removed">-     Structure* iteratorResultObjectStructure() const { return m_iteratorResultObjectStructure.get(); }</span>
      Structure* regExpMatchesArrayStructure() const { return m_regExpMatchesArrayStructure.get(); }
      Structure* regExpMatchesArrayWithGroupsStructure() const { return m_regExpMatchesArrayWithGroupsStructure.get(); }
<span class="line-modified">!     Structure* moduleRecordStructure() const { return m_moduleRecordStructure.get(); }</span>
<span class="line-modified">!     Structure* moduleNamespaceObjectStructure() const { return m_moduleNamespaceObjectStructure.get(); }</span>
<span class="line-modified">!     Structure* proxyObjectStructure() const { return m_proxyObjectStructure.get(); }</span>
<span class="line-modified">!     Structure* callableProxyObjectStructure() const { return m_callableProxyObjectStructure.get(); }</span>
<span class="line-modified">!     Structure* proxyRevokeStructure() const { return m_proxyRevokeStructure.get(); }</span>
      Structure* restParameterStructure() const { return arrayStructureForIndexingTypeDuringAllocation(ArrayWithContiguous); }
      Structure* originalRestParameterStructure() const { return originalArrayStructureForIndexingType(ArrayWithContiguous); }
  #if ENABLE(WEBASSEMBLY)
<span class="line-modified">!     Structure* webAssemblyModuleRecordStructure() const { return m_webAssemblyModuleRecordStructure.get(); }</span>
<span class="line-modified">!     Structure* webAssemblyFunctionStructure() const { return m_webAssemblyFunctionStructure.get(); }</span>
<span class="line-modified">!     Structure* webAssemblyWrapperFunctionStructure() const { return m_webAssemblyWrapperFunctionStructure.get(); }</span>
<span class="line-modified">!     Structure* webAssemblyToJSCalleeStructure() const { return m_webAssemblyToJSCalleeStructure.get(); }</span>
  #endif // ENABLE(WEBASSEMBLY)
  #if ENABLE(INTL)
      Structure* collatorStructure() { return m_collatorStructure.get(this); }
      Structure* numberFormatStructure() { return m_numberFormatStructure.get(this); }
      Structure* dateTimeFormatStructure() { return m_dateTimeFormatStructure.get(this); }
<span class="line-new-header">--- 754,26 ---</span>
      Structure* regExpStructure() const { return m_regExpStructure.get(); }
      Structure* generatorFunctionStructure() const { return m_generatorFunctionStructure.get(); }
      Structure* asyncFunctionStructure() const { return m_asyncFunctionStructure.get(); }
      Structure* asyncGeneratorFunctionStructure() const { return m_asyncGeneratorFunctionStructure.get(); }
      Structure* stringObjectStructure() const { return m_stringObjectStructure.get(); }
<span class="line-modified">!     Structure* iteratorResultObjectStructure() const { return m_iteratorResultObjectStructure.get(this); }</span>
      Structure* regExpMatchesArrayStructure() const { return m_regExpMatchesArrayStructure.get(); }
      Structure* regExpMatchesArrayWithGroupsStructure() const { return m_regExpMatchesArrayWithGroupsStructure.get(); }
<span class="line-modified">!     Structure* moduleRecordStructure() const { return m_moduleRecordStructure.get(this); }</span>
<span class="line-modified">!     Structure* moduleNamespaceObjectStructure() const { return m_moduleNamespaceObjectStructure.get(this); }</span>
<span class="line-modified">!     Structure* proxyObjectStructure() const { return m_proxyObjectStructure.get(this); }</span>
<span class="line-modified">!     Structure* callableProxyObjectStructure() const { return m_callableProxyObjectStructure.get(this); }</span>
<span class="line-modified">!     Structure* proxyRevokeStructure() const { return m_proxyRevokeStructure.get(this); }</span>
      Structure* restParameterStructure() const { return arrayStructureForIndexingTypeDuringAllocation(ArrayWithContiguous); }
      Structure* originalRestParameterStructure() const { return originalArrayStructureForIndexingType(ArrayWithContiguous); }
  #if ENABLE(WEBASSEMBLY)
<span class="line-modified">!     Structure* webAssemblyModuleRecordStructure() const { return m_webAssemblyModuleRecordStructure.get(this); }</span>
<span class="line-modified">!     Structure* webAssemblyFunctionStructure() const { return m_webAssemblyFunctionStructure.get(this); }</span>
<span class="line-modified">!     Structure* jsToWasmICCalleeStructure() const { return m_jsToWasmICCalleeStructure.get(this); }</span>
<span class="line-modified">!     Structure* webAssemblyWrapperFunctionStructure() const { return m_webAssemblyWrapperFunctionStructure.get(this); }</span>
<span class="line-added">+     Structure* webAssemblyToJSCalleeStructure() const { return m_webAssemblyToJSCalleeStructure.get(this); }</span>
  #endif // ENABLE(WEBASSEMBLY)
  #if ENABLE(INTL)
      Structure* collatorStructure() { return m_collatorStructure.get(this); }
      Structure* numberFormatStructure() { return m_numberFormatStructure.get(this); }
      Structure* dateTimeFormatStructure() { return m_dateTimeFormatStructure.get(this); }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 799,55 ***</span>
      ConsoleClient* consoleClient() const { return m_consoleClient; }
  
      void setName(const String&amp;);
      const String&amp; name() const { return m_name; }
  
<span class="line-modified">!     JSArrayBufferPrototype* arrayBufferPrototype(ArrayBufferSharingMode sharingMode) const</span>
      {
          switch (sharingMode) {
          case ArrayBufferSharingMode::Default:
<span class="line-modified">!             return m_arrayBufferPrototype.get();</span>
  #if ENABLE(SHARED_ARRAY_BUFFER)
          case ArrayBufferSharingMode::Shared:
              return m_sharedArrayBufferPrototype.get();
  #else
          default:
<span class="line-modified">!             return m_arrayBufferPrototype.get();</span>
  #endif
          }
      }
      Structure* arrayBufferStructure(ArrayBufferSharingMode sharingMode) const
      {
          switch (sharingMode) {
          case ArrayBufferSharingMode::Default:
<span class="line-modified">!             return m_arrayBufferStructure.get();</span>
  #if ENABLE(SHARED_ARRAY_BUFFER)
          case ArrayBufferSharingMode::Shared:
              return m_sharedArrayBufferStructure.get();
  #else
          default:
<span class="line-modified">!             return m_arrayBufferStructure.get();</span>
  #endif
          }
          RELEASE_ASSERT_NOT_REACHED();
          return nullptr;
      }
  
<span class="line-modified">! #define DEFINE_ACCESSORS_FOR_SIMPLE_TYPE(capitalName, lowerName, properName, instanceType, jsName, prototypeBase) \</span>
      Structure* properName ## Structure() { return m_ ## properName ## Structure.get(); }
  
      FOR_EACH_SIMPLE_BUILTIN_TYPE(DEFINE_ACCESSORS_FOR_SIMPLE_TYPE)
<span class="line-removed">-     FOR_BIG_INT_BUILTIN_TYPE_WITH_CONSTRUCTOR(DEFINE_ACCESSORS_FOR_SIMPLE_TYPE)</span>
<span class="line-removed">-     FOR_EACH_WEBASSEMBLY_CONSTRUCTOR_TYPE(DEFINE_ACCESSORS_FOR_SIMPLE_TYPE)</span>
      FOR_EACH_BUILTIN_DERIVED_ITERATOR_TYPE(DEFINE_ACCESSORS_FOR_SIMPLE_TYPE)
  
  #undef DEFINE_ACCESSORS_FOR_SIMPLE_TYPE
  
<span class="line-modified">! #define DEFINE_ACCESSORS_FOR_LAZY_TYPE(capitalName, lowerName, properName, instanceType, jsName, prototypeBase) \</span>
<span class="line-modified">!     Structure* properName ## Structure() { return m_ ## properName ## Structure.get(this); }</span>
  
      FOR_EACH_LAZY_BUILTIN_TYPE(DEFINE_ACCESSORS_FOR_LAZY_TYPE)
  
  #undef DEFINE_ACCESSORS_FOR_LAZY_TYPE
  
      LazyClassStructure&amp; lazyTypedArrayStructure(TypedArrayType type)
      {
<span class="line-new-header">--- 807,60 ---</span>
      ConsoleClient* consoleClient() const { return m_consoleClient; }
  
      void setName(const String&amp;);
      const String&amp; name() const { return m_name; }
  
<span class="line-modified">!     void setUnhandledRejectionCallback(VM&amp; vm, JSObject* function) { m_unhandledRejectionCallback.set(vm, function); }</span>
<span class="line-added">+     JSObject* unhandledRejectionCallback() const { return m_unhandledRejectionCallback.get(); }</span>
<span class="line-added">+ </span>
<span class="line-added">+     JSObject* arrayBufferConstructor() const { return m_arrayBufferStructure.constructor(this); }</span>
<span class="line-added">+ </span>
<span class="line-added">+     JSObject* arrayBufferPrototype(ArrayBufferSharingMode sharingMode) const</span>
      {
          switch (sharingMode) {
          case ArrayBufferSharingMode::Default:
<span class="line-modified">!             return m_arrayBufferStructure.prototype(this);</span>
  #if ENABLE(SHARED_ARRAY_BUFFER)
          case ArrayBufferSharingMode::Shared:
              return m_sharedArrayBufferPrototype.get();
  #else
          default:
<span class="line-modified">!             return m_arrayBufferStructure.prototype(this);</span>
  #endif
          }
      }
      Structure* arrayBufferStructure(ArrayBufferSharingMode sharingMode) const
      {
          switch (sharingMode) {
          case ArrayBufferSharingMode::Default:
<span class="line-modified">!             return m_arrayBufferStructure.get(this);</span>
  #if ENABLE(SHARED_ARRAY_BUFFER)
          case ArrayBufferSharingMode::Shared:
              return m_sharedArrayBufferStructure.get();
  #else
          default:
<span class="line-modified">!             return m_arrayBufferStructure.get(this);</span>
  #endif
          }
          RELEASE_ASSERT_NOT_REACHED();
          return nullptr;
      }
  
<span class="line-modified">! #define DEFINE_ACCESSORS_FOR_SIMPLE_TYPE(capitalName, lowerName, properName, instanceType, jsName, prototypeBase, featureFlag) \</span>
      Structure* properName ## Structure() { return m_ ## properName ## Structure.get(); }
  
      FOR_EACH_SIMPLE_BUILTIN_TYPE(DEFINE_ACCESSORS_FOR_SIMPLE_TYPE)
      FOR_EACH_BUILTIN_DERIVED_ITERATOR_TYPE(DEFINE_ACCESSORS_FOR_SIMPLE_TYPE)
  
  #undef DEFINE_ACCESSORS_FOR_SIMPLE_TYPE
  
<span class="line-modified">! #define DEFINE_ACCESSORS_FOR_LAZY_TYPE(capitalName, lowerName, properName, instanceType, jsName, prototypeBase, featureFlag) \</span>
<span class="line-modified">!     Structure* properName ## Structure() { return m_ ## properName ## Structure.get(this); } \</span>
<span class="line-added">+     JSObject* properName ## Constructor() { return m_ ## properName ## Structure.constructor(this); }</span>
  
      FOR_EACH_LAZY_BUILTIN_TYPE(DEFINE_ACCESSORS_FOR_LAZY_TYPE)
<span class="line-added">+     FOR_EACH_WEBASSEMBLY_CONSTRUCTOR_TYPE(DEFINE_ACCESSORS_FOR_LAZY_TYPE)</span>
  
  #undef DEFINE_ACCESSORS_FOR_LAZY_TYPE
  
      LazyClassStructure&amp; lazyTypedArrayStructure(TypedArrayType type)
      {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 961,10 ***</span>
<span class="line-new-header">--- 974,11 ---</span>
      void resetPrototype(VM&amp;, JSValue prototype);
  
      VM&amp; vm() const { return m_vm; }
      JSObject* globalThis() const;
      WriteBarrier&lt;JSObject&gt;* addressOfGlobalThis() { return &amp;m_globalThis; }
<span class="line-added">+     OptionSet&lt;CodeGenerationMode&gt; defaultCodeGenerationMode() const;</span>
  
      static Structure* createStructure(VM&amp; vm, JSValue prototype)
      {
          Structure* result = Structure::create(vm, 0, prototype, TypeInfo(GlobalObjectType, StructureFlags), info());
          result-&gt;setTransitionWatchpointIsLikelyToBeFired(true);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1004,10 ***</span>
<span class="line-new-header">--- 1018,12 ---</span>
  #ifdef JSC_GLIB_API_ENABLED
      WrapperMap* wrapperMap() const { return m_wrapperMap.get(); }
      void setWrapperMap(std::unique_ptr&lt;WrapperMap&gt;&amp;&amp;);
  #endif
  
<span class="line-added">+     void tryInstallArraySpeciesWatchpoint(ExecState*);</span>
<span class="line-added">+ </span>
  protected:
      struct GlobalPropertyInfo {
          GlobalPropertyInfo(const Identifier&amp; i, JSValue v, unsigned a)
              : identifier(i)
              , value(v)
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1031,10 ***</span>
<span class="line-new-header">--- 1047,11 ---</span>
  
      template&lt;ErrorType errorType&gt;
      void initializeErrorConstructor(LazyClassStructure::Initializer&amp;);
  
      JS_EXPORT_PRIVATE void init(VM&amp;);
<span class="line-added">+     void fixupPrototypeChainWithObjectPrototype(VM&amp;);</span>
  
      JS_EXPORT_PRIVATE static void clearRareData(JSCell*);
  
      bool m_needsSiteSpecificQuirks { false };
  #if JSC_OBJC_API_ENABLED
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1124,6 ***</span>
<span class="line-new-header">--- 1141,18 ---</span>
  inline JSObject* JSGlobalObject::globalThis() const
  {
      return m_globalThis.get();
  }
  
<span class="line-added">+ inline OptionSet&lt;CodeGenerationMode&gt; JSGlobalObject::defaultCodeGenerationMode() const</span>
<span class="line-added">+ {</span>
<span class="line-added">+     OptionSet&lt;CodeGenerationMode&gt; codeGenerationMode;</span>
<span class="line-added">+     if (hasInteractiveDebugger() || Options::forceDebuggerBytecodeGeneration())</span>
<span class="line-added">+         codeGenerationMode.add(CodeGenerationMode::Debugger);</span>
<span class="line-added">+     if (m_vm.typeProfiler())</span>
<span class="line-added">+         codeGenerationMode.add(CodeGenerationMode::TypeProfiler);</span>
<span class="line-added">+     if (m_vm.controlFlowProfiler())</span>
<span class="line-added">+         codeGenerationMode.add(CodeGenerationMode::ControlFlowProfiler);</span>
<span class="line-added">+     return codeGenerationMode;</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
  } // namespace JSC
</pre>
<center><a href="JSGlobalObject.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="JSGlobalObjectFunctions.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>
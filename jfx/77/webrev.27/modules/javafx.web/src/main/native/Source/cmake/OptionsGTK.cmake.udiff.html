<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/cmake/OptionsGTK.cmake</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="OptionsCommon.cmake.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="OptionsJSCOnly.cmake.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/cmake/OptionsGTK.cmake</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,66 +1,61 @@</span>
  include(GNUInstallDirs)
<span class="udiff-line-added">+ include(VersioningUtils)</span>
  
<span class="udiff-line-modified-removed">- set(PROJECT_VERSION_MAJOR 2)</span>
<span class="udiff-line-removed">- set(PROJECT_VERSION_MINOR 17)</span>
<span class="udiff-line-removed">- set(PROJECT_VERSION_MICRO 5)</span>
<span class="udiff-line-removed">- set(PROJECT_VERSION ${PROJECT_VERSION_MAJOR}.${PROJECT_VERSION_MINOR}.${PROJECT_VERSION_MICRO})</span>
<span class="udiff-line-modified-added">+ SET_PROJECT_VERSION(2 26 3)</span>
  set(WEBKITGTK_API_VERSION 4.0)
  
<span class="udiff-line-modified-removed">- # Libtool library version, not to be confused with API version.</span>
<span class="udiff-line-modified-removed">- # See http://www.gnu.org/software/libtool/manual/html_node/Libtool-versioning.html</span>
<span class="udiff-line-removed">- macro(CALCULATE_LIBRARY_VERSIONS_FROM_LIBTOOL_TRIPLE library_name current revision age)</span>
<span class="udiff-line-removed">-     math(EXPR ${library_name}_VERSION_MAJOR &quot;${current} - ${age}&quot;)</span>
<span class="udiff-line-removed">-     set(${library_name}_VERSION_MINOR ${age})</span>
<span class="udiff-line-removed">-     set(${library_name}_VERSION_MICRO ${revision})</span>
<span class="udiff-line-removed">-     set(${library_name}_VERSION ${${library_name}_VERSION_MAJOR}.${age}.${revision})</span>
<span class="udiff-line-removed">- endmacro()</span>
<span class="udiff-line-removed">- CALCULATE_LIBRARY_VERSIONS_FROM_LIBTOOL_TRIPLE(WEBKIT2 60 1 23)</span>
<span class="udiff-line-removed">- CALCULATE_LIBRARY_VERSIONS_FROM_LIBTOOL_TRIPLE(JAVASCRIPTCORE 24 5 6)</span>
<span class="udiff-line-modified-added">+ CALCULATE_LIBRARY_VERSIONS_FROM_LIBTOOL_TRIPLE(WEBKIT 76 4 39)</span>
<span class="udiff-line-modified-added">+ CALCULATE_LIBRARY_VERSIONS_FROM_LIBTOOL_TRIPLE(JAVASCRIPTCORE 32 8 14)</span>
  
  # These are shared variables, but we special case their definition so that we can use the
  # CMAKE_INSTALL_* variables that are populated by the GNUInstallDirs macro.
  set(LIB_INSTALL_DIR &quot;${CMAKE_INSTALL_FULL_LIBDIR}&quot; CACHE PATH &quot;Absolute path to library installation directory&quot;)
  set(EXEC_INSTALL_DIR &quot;${CMAKE_INSTALL_FULL_BINDIR}&quot; CACHE PATH &quot;Absolute path to executable installation directory&quot;)
  set(LIBEXEC_INSTALL_DIR &quot;${CMAKE_INSTALL_FULL_LIBEXECDIR}/webkit2gtk-${WEBKITGTK_API_VERSION}&quot; CACHE PATH &quot;Absolute path to install executables executed by the library&quot;)
  
<span class="udiff-line-removed">- set(DATA_BUILD_DIR &quot;${CMAKE_BINARY_DIR}/share/${WebKit_OUTPUT_NAME}&quot;)</span>
<span class="udiff-line-removed">- set(DATA_INSTALL_DIR &quot;${CMAKE_INSTALL_DATADIR}/webkitgtk-${WEBKITGTK_API_VERSION}&quot;)</span>
  set(WEBKITGTK_HEADER_INSTALL_DIR &quot;${CMAKE_INSTALL_INCLUDEDIR}/webkitgtk-${WEBKITGTK_API_VERSION}&quot;)
  set(INTROSPECTION_INSTALL_GIRDIR &quot;${CMAKE_INSTALL_FULL_DATADIR}/gir-1.0&quot;)
  set(INTROSPECTION_INSTALL_TYPELIBDIR &quot;${LIB_INSTALL_DIR}/girepository-1.0&quot;)
  
<span class="udiff-line-modified-removed">- find_package(Cairo 1.10.2 REQUIRED)</span>
<span class="udiff-line-modified-added">+ find_package(Cairo 1.14.0 REQUIRED)</span>
  find_package(Fontconfig 2.8.0 REQUIRED)
<span class="udiff-line-modified-removed">- find_package(Freetype2 2.4.2 REQUIRED)</span>
<span class="udiff-line-modified-added">+ find_package(Freetype 2.4.2 REQUIRED)</span>
  find_package(LibGcrypt 1.6.0 REQUIRED)
<span class="udiff-line-modified-removed">- find_package(GTK3 3.6.0 REQUIRED)</span>
<span class="udiff-line-modified-removed">- find_package(GDK3 3.6.0 REQUIRED)</span>
<span class="udiff-line-modified-added">+ find_package(GLIB 2.44.0 REQUIRED COMPONENTS gio gio-unix gobject gthread gmodule)</span>
<span class="udiff-line-modified-added">+ find_package(GTK3 3.22.0 REQUIRED)</span>
<span class="udiff-line-added">+ find_package(GDK3 3.22.0 REQUIRED)</span>
  find_package(HarfBuzz 0.9.2 REQUIRED)
<span class="udiff-line-modified-removed">- find_package(ICU REQUIRED)</span>
<span class="udiff-line-modified-added">+ find_package(ICU REQUIRED COMPONENTS data i18n uc)</span>
  find_package(JPEG REQUIRED)
<span class="udiff-line-modified-removed">- find_package(LibSoup 2.42.0 REQUIRED)</span>
<span class="udiff-line-modified-added">+ find_package(LibSoup 2.54.0 REQUIRED)</span>
  find_package(LibXml2 2.8.0 REQUIRED)
  find_package(PNG REQUIRED)
  find_package(Sqlite REQUIRED)
  find_package(Threads REQUIRED)
  find_package(ZLIB REQUIRED)
<span class="udiff-line-modified-removed">- find_package(ATK REQUIRED)</span>
<span class="udiff-line-modified-added">+ find_package(ATK 2.16.0 REQUIRED)</span>
  find_package(WebP REQUIRED)
  find_package(ATSPI 2.5.3)
  find_package(EGL)
  find_package(GTKUnixPrint)
  find_package(OpenGL)
  find_package(OpenGLES2)
  
  WEBKIT_OPTION_BEGIN()
  
<span class="udiff-line-modified-removed">- set(USE_CAIRO ON)</span>
<span class="udiff-line-modified-removed">- set(USE_WOFF2 ON)</span>
<span class="udiff-line-modified-removed">- set(USE_XDGMIME ON)</span>
<span class="udiff-line-modified-added">+ include(GStreamerDefinitions)</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+ SET_AND_EXPOSE_TO_BUILD(USE_ATK TRUE)</span>
<span class="udiff-line-added">+ SET_AND_EXPOSE_TO_BUILD(USE_CAIRO TRUE)</span>
<span class="udiff-line-added">+ SET_AND_EXPOSE_TO_BUILD(USE_XDGMIME TRUE)</span>
  SET_AND_EXPOSE_TO_BUILD(USE_GCRYPT TRUE)
  
<span class="udiff-line-added">+ if (WTF_CPU_ARM OR WTF_CPU_MIPS)</span>
<span class="udiff-line-added">+     SET_AND_EXPOSE_TO_BUILD(USE_CAPSTONE ${DEVELOPER_MODE})</span>
<span class="udiff-line-added">+ endif ()</span>
<span class="udiff-line-added">+ </span>
  # For old versions of HarfBuzz that do not expose an API for the OpenType MATH
  # table, we enable our own code to parse that table.
  if (&quot;${PC_HARFBUZZ_VERSION}&quot; VERSION_LESS &quot;1.3.3&quot;)
      add_definitions(-DENABLE_OPENTYPE_MATH=1)
  endif ()
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -74,142 +69,146 @@</span>
  
  if (NOT OPENGL_FOUND AND OPENGLES2_FOUND)
      set(ENABLE_GLES2_DEFAULT ON)
  endif ()
  
<span class="udiff-line-modified-removed">- # Public options specific to the GTK+ port. Do not add any options here unless</span>
<span class="udiff-line-modified-added">+ # Public options specific to the GTK port. Do not add any options here unless</span>
  # there is a strong reason we should support changing the value of the option,
  # and the option is not relevant to any other WebKit ports.
  WEBKIT_OPTION_DEFINE(ENABLE_GLES2 &quot;Whether to enable OpenGL ES 2.0.&quot; PUBLIC ${ENABLE_GLES2_DEFAULT})
  WEBKIT_OPTION_DEFINE(ENABLE_GTKDOC &quot;Whether or not to use generate gtkdoc.&quot; PUBLIC OFF)
  WEBKIT_OPTION_DEFINE(ENABLE_INTROSPECTION &quot;Whether to enable GObject introspection.&quot; PUBLIC ON)
  WEBKIT_OPTION_DEFINE(ENABLE_OPENGL &quot;Whether to use OpenGL.&quot; PUBLIC ON)
<span class="udiff-line-removed">- WEBKIT_OPTION_DEFINE(ENABLE_PLUGIN_PROCESS_GTK2 &quot;Whether to build WebKitPluginProcess2 to load GTK2 based plugins.&quot; PUBLIC ON)</span>
  WEBKIT_OPTION_DEFINE(ENABLE_QUARTZ_TARGET &quot;Whether to enable support for the Quartz windowing target.&quot; PUBLIC ${GTK3_SUPPORTS_QUARTZ})
  WEBKIT_OPTION_DEFINE(ENABLE_X11_TARGET &quot;Whether to enable support for the X11 windowing target.&quot; PUBLIC ${GTK3_SUPPORTS_X11})
  WEBKIT_OPTION_DEFINE(ENABLE_WAYLAND_TARGET &quot;Whether to enable support for the Wayland windowing target.&quot; PUBLIC ${GTK3_SUPPORTS_WAYLAND})
<span class="udiff-line-removed">- WEBKIT_OPTION_DEFINE(ENABLE_WEB_CRYPTO &quot;Whether to enable support for Web Crypto API.&quot; PUBLIC ON)</span>
  WEBKIT_OPTION_DEFINE(USE_LIBNOTIFY &quot;Whether to enable the default web notification implementation.&quot; PUBLIC ON)
  WEBKIT_OPTION_DEFINE(USE_LIBHYPHEN &quot;Whether to enable the default automatic hyphenation implementation.&quot; PUBLIC ON)
  WEBKIT_OPTION_DEFINE(USE_LIBSECRET &quot;Whether to enable the persistent credential storage using libsecret.&quot; PUBLIC ON)
<span class="udiff-line-added">+ WEBKIT_OPTION_DEFINE(USE_OPENJPEG &quot;Whether to enable support for JPEG2000 images.&quot; PUBLIC ON)</span>
<span class="udiff-line-added">+ WEBKIT_OPTION_DEFINE(USE_WOFF2 &quot;Whether to enable support for WOFF2 Web Fonts.&quot; PUBLIC ON)</span>
<span class="udiff-line-added">+ WEBKIT_OPTION_DEFINE(USE_WPE_RENDERER &quot;Whether to enable WPE rendering&quot; PUBLIC ON)</span>
  
<span class="udiff-line-modified-removed">- # Private options specific to the GTK+ port. Changing these options is</span>
<span class="udiff-line-modified-added">+ # Private options specific to the GTK port. Changing these options is</span>
  # completely unsupported. They are intended for use only by WebKit developers.
<span class="udiff-line-modified-removed">- WEBKIT_OPTION_DEFINE(USE_GSTREAMER_GL &quot;Whether to enable support for GStreamer GL&quot; PRIVATE ON)</span>
<span class="udiff-line-removed">- WEBKIT_OPTION_DEFINE(USE_GSTREAMER_MPEGTS &quot;Whether to enable support for MPEG-TS&quot; PRIVATE OFF)</span>
<span class="udiff-line-removed">- WEBKIT_OPTION_DEFINE(USE_REDIRECTED_XCOMPOSITE_WINDOW &quot;Whether to use a Redirected XComposite Window for accelerated compositing in X11.&quot; PRIVATE ON)</span>
<span class="udiff-line-modified-added">+ WEBKIT_OPTION_DEFINE(USE_OPENVR &quot;Whether to use OpenVR as WebVR backend.&quot; PRIVATE OFF)</span>
  
  # FIXME: Can we use cairo-glesv2 to avoid this conflict?
  WEBKIT_OPTION_CONFLICT(ENABLE_ACCELERATED_2D_CANVAS ENABLE_GLES2)
  
  WEBKIT_OPTION_DEPEND(ENABLE_3D_TRANSFORMS ENABLE_OPENGL)
  WEBKIT_OPTION_DEPEND(ENABLE_ACCELERATED_2D_CANVAS ENABLE_OPENGL)
<span class="udiff-line-added">+ WEBKIT_OPTION_DEPEND(ENABLE_ASYNC_SCROLLING ENABLE_OPENGL)</span>
  WEBKIT_OPTION_DEPEND(ENABLE_GLES2 ENABLE_OPENGL)
<span class="udiff-line-removed">- WEBKIT_OPTION_DEPEND(ENABLE_PLUGIN_PROCESS_GTK2 ENABLE_X11_TARGET)</span>
  WEBKIT_OPTION_DEPEND(ENABLE_WEBGL ENABLE_OPENGL)
<span class="udiff-line-modified-removed">- WEBKIT_OPTION_DEPEND(ENABLE_SUBTLE_CRYPTO ENABLE_WEB_CRYPTO)</span>
<span class="udiff-line-modified-removed">- WEBKIT_OPTION_DEPEND(USE_REDIRECTED_XCOMPOSITE_WINDOW ENABLE_OPENGL)</span>
<span class="udiff-line-removed">- WEBKIT_OPTION_DEPEND(USE_REDIRECTED_XCOMPOSITE_WINDOW ENABLE_X11_TARGET)</span>
<span class="udiff-line-removed">- WEBKIT_OPTION_DEPEND(USE_GSTREAMER_GL ENABLE_OPENGL)</span>
<span class="udiff-line-removed">- WEBKIT_OPTION_DEPEND(USE_GSTREAMER_GL ENABLE_VIDEO)</span>
<span class="udiff-line-removed">- WEBKIT_OPTION_DEPEND(USE_GSTREAMER_MPEGTS ENABLE_VIDEO)</span>
<span class="udiff-line-modified-added">+ WEBKIT_OPTION_DEPEND(USE_WPE_RENDERER ENABLE_OPENGL)</span>
<span class="udiff-line-modified-added">+ WEBKIT_OPTION_DEPEND(USE_WPE_RENDERER ENABLE_WAYLAND_TARGET)</span>
  
  SET_AND_EXPOSE_TO_BUILD(ENABLE_DEVELOPER_MODE ${DEVELOPER_MODE})
  if (DEVELOPER_MODE)
      WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_MINIBROWSER PUBLIC ON)
      WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_API_TESTS PRIVATE ON)
  else ()
      WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_MINIBROWSER PUBLIC OFF)
      WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_API_TESTS PRIVATE OFF)
<span class="udiff-line-removed">-     if (NOT CMAKE_SYSTEM_NAME MATCHES &quot;Darwin&quot;)</span>
<span class="udiff-line-removed">-         set(WebKit2_VERSION_SCRIPT &quot;-Wl,--version-script,${CMAKE_MODULE_PATH}/gtksymbols.filter&quot;)</span>
<span class="udiff-line-removed">-     endif ()</span>
  endif ()
  
  if (CMAKE_SYSTEM_NAME MATCHES &quot;Linux&quot;)
<span class="udiff-line-modified-removed">-     WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_MEMORY_SAMPLER PUBLIC ON)</span>
<span class="udiff-line-modified-added">+     WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_MEMORY_SAMPLER PRIVATE ON)</span>
      WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_RESOURCE_USAGE PRIVATE ON)
  else ()
<span class="udiff-line-modified-removed">-     WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_MEMORY_SAMPLER PUBLIC OFF)</span>
<span class="udiff-line-modified-added">+     WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_MEMORY_SAMPLER PRIVATE OFF)</span>
      WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_RESOURCE_USAGE PRIVATE OFF)
  endif ()
  
<span class="udiff-line-added">+ if (CMAKE_SYSTEM_NAME MATCHES &quot;Linux&quot; AND NOT EXISTS &quot;/.flatpak-info&quot;)</span>
<span class="udiff-line-added">+     WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_BUBBLEWRAP_SANDBOX PUBLIC ON)</span>
<span class="udiff-line-added">+ else ()</span>
<span class="udiff-line-added">+     WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_BUBBLEWRAP_SANDBOX PUBLIC OFF)</span>
<span class="udiff-line-added">+ endif ()</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ # Enable variation fonts when cairo &gt;= 1.16, fontconfig &gt;= 2.13.0, freetype &gt;= 2.9.0 and harfbuzz &gt;= 1.4.2.</span>
<span class="udiff-line-added">+ if ((&quot;${PC_CAIRO_VERSION}&quot; VERSION_GREATER &quot;1.16.0&quot; OR &quot;${PC_CAIRO_VERSION}&quot; STREQUAL &quot;1.16.0&quot;)</span>
<span class="udiff-line-added">+     AND (&quot;${PC_FONTCONFIG_VERSION}&quot; VERSION_GREATER &quot;2.13.0&quot; OR &quot;${PC_FONTCONFIG_VERSION}&quot; STREQUAL &quot;2.13.0&quot;)</span>
<span class="udiff-line-added">+     AND (&quot;${FREETYPE_VERSION_STRING}&quot; VERSION_GREATER &quot;2.9.0&quot; OR &quot;${FREETYPE_VERSION_STRING}&quot; STREQUAL &quot;2.9.0&quot;)</span>
<span class="udiff-line-added">+     AND (&quot;${PC_HARFBUZZ_VERSION}&quot; VERSION_GREATER &quot;1.4.2&quot; OR &quot;${PC_HARFBUZZ_VERSION}&quot; STREQUAL &quot;1.4.2&quot;))</span>
<span class="udiff-line-added">+     WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_VARIATION_FONTS PRIVATE ON)</span>
<span class="udiff-line-added">+ endif ()</span>
<span class="udiff-line-added">+ </span>
  # Public options shared with other WebKit ports. Do not add any options here
<span class="udiff-line-modified-removed">- # without approval from a GTK+ reviewer. There must be strong reason to support</span>
<span class="udiff-line-modified-added">+ # without approval from a GTK reviewer. There must be strong reason to support</span>
  # changing the value of the option.
  WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_ACCELERATED_2D_CANVAS PUBLIC OFF)
<span class="udiff-line-added">+ WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_ASYNC_SCROLLING PRIVATE OFF)</span>
  WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_DRAG_SUPPORT PUBLIC ON)
<span class="udiff-line-removed">- WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_GEOLOCATION PUBLIC ON)</span>
<span class="udiff-line-removed">- WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_ICONDATABASE PUBLIC ON)</span>
<span class="udiff-line-removed">- WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_JIT PUBLIC ON)</span>
<span class="udiff-line-removed">- WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_SAMPLING_PROFILER PUBLIC ON)</span>
  WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_SPELLCHECK PUBLIC ON)
  WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_TOUCH_EVENTS PUBLIC ON)
<span class="udiff-line-modified-removed">- WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_VIDEO PUBLIC ON)</span>
<span class="udiff-line-removed">- WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_WEB_AUDIO PUBLIC ON)</span>
<span class="udiff-line-modified-added">+ WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_WEB_CRYPTO PUBLIC ON)</span>
  WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_WEBDRIVER PUBLIC ON)
<span class="udiff-line-removed">- WEBKIT_OPTION_DEFAULT_PORT_VALUE(USE_SYSTEM_MALLOC PUBLIC OFF)</span>
  
  # Private options shared with other WebKit ports. Add options here when
  # we need a value different from the default defined in WebKitFeatures.cmake.
  # Changing these options is completely unsupported.
<span class="udiff-line-modified-removed">- WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_3D_TRANSFORMS PRIVATE ON)</span>
<span class="udiff-line-modified-removed">- WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_ACCESSIBILITY PRIVATE ON)</span>
<span class="udiff-line-modified-removed">- WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_CSS_REGIONS PRIVATE ON)</span>
<span class="udiff-line-removed">- WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_CSS_SELECTORS_LEVEL4 PRIVATE ON)</span>
<span class="udiff-line-modified-added">+ WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_CONTENT_EXTENSIONS PRIVATE ON)</span>
<span class="udiff-line-modified-added">+ WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_DARK_MODE_CSS PRIVATE ON)</span>
<span class="udiff-line-modified-added">+ WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_DATALIST_ELEMENT PRIVATE ON)</span>
  WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_DOWNLOAD_ATTRIBUTE PRIVATE ON)
<span class="udiff-line-added">+ WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_ENCRYPTED_MEDIA PRIVATE ${ENABLE_EXPERIMENTAL_FEATURES})</span>
  WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_FTPDIR PRIVATE OFF)
<span class="udiff-line-removed">- WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_FULLSCREEN_API PRIVATE ON)</span>
<span class="udiff-line-removed">- WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_INDEXED_DATABASE PRIVATE ON)</span>
<span class="udiff-line-removed">- WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_INDEXED_DATABASE_IN_WORKERS PRIVATE ON)</span>
  WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_INPUT_TYPE_COLOR PRIVATE ON)
<span class="udiff-line-modified-removed">- WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_MEDIA_CONTROLS_SCRIPT PRIVATE ON)</span>
<span class="udiff-line-modified-added">+ WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_MEDIA_STREAM PRIVATE ${ENABLE_EXPERIMENTAL_FEATURES})</span>
  WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_MHTML PRIVATE ON)
<span class="udiff-line-modified-removed">- WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_NOTIFICATIONS PRIVATE ON)</span>
<span class="udiff-line-modified-removed">- WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_PUBLIC_SUFFIX_LIST PRIVATE ON)</span>
<span class="udiff-line-modified-removed">- WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_REMOTE_INSPECTOR PRIVATE ON)</span>
<span class="udiff-line-modified-removed">- WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_SMOOTH_SCROLLING PRIVATE ON)</span>
<span class="udiff-line-modified-removed">- WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_USERSELECT_ALL PRIVATE ON)</span>
<span class="udiff-line-modified-removed">- WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_USER_MESSAGE_HANDLERS PRIVATE ON)</span>
<span class="udiff-line-modified-removed">- WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_SUBTLE_CRYPTO PRIVATE ON)</span>
<span class="udiff-line-removed">- WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_VIDEO_TRACK PRIVATE ON)</span>
<span class="udiff-line-removed">- WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_WEBGL PRIVATE ON)</span>
<span class="udiff-line-modified-added">+ WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_MOUSE_CURSOR_SCALE PRIVATE ON)</span>
<span class="udiff-line-modified-added">+ WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_NETWORK_CACHE_SPECULATIVE_REVALIDATION PRIVATE ON)</span>
<span class="udiff-line-modified-added">+ WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_SERVICE_WORKER PRIVATE ${ENABLE_EXPERIMENTAL_FEATURES})</span>
<span class="udiff-line-modified-added">+ WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_SHAREABLE_RESOURCE PUBLIC ON)</span>
<span class="udiff-line-modified-added">+ WEBKIT_OPTION_DEFAULT_PORT_VALUE(ENABLE_WEB_RTC PRIVATE ${ENABLE_EXPERIMENTAL_FEATURES})</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+ include(GStreamerDependencies)</span>
  
  # Finalize the value for all options. Do not attempt to use an option before
  # this point, and do not attempt to change any option after this point.
  WEBKIT_OPTION_END()
  
  SET_AND_EXPOSE_TO_BUILD(WTF_PLATFORM_QUARTZ ${ENABLE_QUARTZ_TARGET})
  SET_AND_EXPOSE_TO_BUILD(WTF_PLATFORM_X11 ${ENABLE_X11_TARGET})
  SET_AND_EXPOSE_TO_BUILD(WTF_PLATFORM_WAYLAND ${ENABLE_WAYLAND_TARGET})
  
<span class="udiff-line-modified-removed">- # MOZ_X11 and XP_UNIX are required by npapi.h. Their value is not checked;</span>
<span class="udiff-line-modified-removed">- # only their definedness is. They should only be defined in the true case.</span>
<span class="udiff-line-modified-removed">- if (${ENABLE_X11_TARGET})</span>
<span class="udiff-line-modified-added">+ if (ENABLE_NETSCAPE_PLUGIN_API)</span>
<span class="udiff-line-modified-added">+     # MOZ_X11 and XP_UNIX are required by npapi.h. Their value is not checked;</span>
<span class="udiff-line-modified-added">+     # only their definedness is. They should only be defined in the true case.</span>
<span class="udiff-line-added">+     if (ENABLE_X11_TARGET)</span>
          SET_AND_EXPOSE_TO_BUILD(MOZ_X11 1)
<span class="udiff-line-added">+     endif ()</span>
      SET_AND_EXPOSE_TO_BUILD(XP_UNIX 1)
  endif ()
  
  set(ENABLE_PLUGIN_PROCESS ${ENABLE_NETSCAPE_PLUGIN_API})
  
  add_definitions(-DBUILDING_GTK__=1)
  add_definitions(-DGETTEXT_PACKAGE=&quot;WebKit2GTK-${WEBKITGTK_API_VERSION}&quot;)
<span class="udiff-line-removed">- add_definitions(-DDATA_DIR=&quot;${CMAKE_INSTALL_DATADIR}&quot;)</span>
<span class="udiff-line-removed">- add_definitions(-DUSER_AGENT_GTK_MAJOR_VERSION=&quot;604&quot;)</span>
<span class="udiff-line-removed">- add_definitions(-DUSER_AGENT_GTK_MINOR_VERSION=&quot;1&quot;)</span>
  add_definitions(-DWEBKITGTK_API_VERSION_STRING=&quot;${WEBKITGTK_API_VERSION}&quot;)
<span class="udiff-line-added">+ add_definitions(-DJSC_GLIB_API_ENABLED)</span>
  
  set(GTK_LIBRARIES ${GTK3_LIBRARIES})
  set(GTK_INCLUDE_DIRS ${GTK3_INCLUDE_DIRS})
  set(GDK_LIBRARIES ${GDK3_LIBRARIES})
  set(GDK_INCLUDE_DIRS ${GDK3_INCLUDE_DIRS})
  
<span class="udiff-line-modified-removed">- SET_AND_EXPOSE_TO_BUILD(HAVE_GTK_GESTURES ${GTK3_SUPPORTS_GESTURES})</span>
<span class="udiff-line-modified-removed">- SET_AND_EXPOSE_TO_BUILD(HAVE_GTK_UNIX_PRINTING ${GTK_UNIX_PRINT_FOUND})</span>
<span class="udiff-line-modified-added">+ SET_AND_EXPOSE_TO_BUILD(HAVE_GTK_UNIX_PRINTING ${GTKUnixPrint_FOUND})</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-added">+ if (USE_WPE_RENDERER)</span>
<span class="udiff-line-added">+     find_package(WPE 1.3.0)</span>
<span class="udiff-line-added">+     if (NOT WPE_FOUND)</span>
<span class="udiff-line-added">+         message(FATAL_ERROR &quot;libwpe is required for USE_WPE_RENDERER&quot;)</span>
<span class="udiff-line-added">+     endif ()</span>
  
<span class="udiff-line-modified-removed">- set(glib_components gio gio-unix gobject gthread gmodule)</span>
<span class="udiff-line-modified-removed">- find_package(GLIB 2.36 REQUIRED COMPONENTS ${glib_components})</span>
<span class="udiff-line-modified-added">+     find_package(WPEBackend-fdo 1.3.1)</span>
<span class="udiff-line-modified-added">+     if (NOT WPEBACKEND_FDO_FOUND)</span>
<span class="udiff-line-added">+         message(FATAL_ERROR &quot;WPEBackend-fdo is required for USE_WPE_RENDERER&quot;)</span>
<span class="udiff-line-added">+     endif ()</span>
<span class="udiff-line-added">+ endif ()</span>
  
  if (ENABLE_XSLT)
      find_package(LibXslt 1.1.7 REQUIRED)
  endif ()
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -232,72 +231,41 @@</span>
      if (NOT LIBSECRET_FOUND)
          message(FATAL_ERROR &quot;libsecret is needed for USE_LIBSECRET&quot;)
      endif ()
  endif ()
  
<span class="udiff-line-removed">- if (ENABLE_GAMEPAD_DEPRECATED)</span>
<span class="udiff-line-removed">-     find_package(GUdev)</span>
<span class="udiff-line-removed">-     if (NOT GUDEV_FOUND)</span>
<span class="udiff-line-removed">-         message(FATAL_ERROR &quot;GUdev is needed for ENABLE_GAMEPAD_DEPRECATED&quot;)</span>
<span class="udiff-line-removed">-     endif ()</span>
<span class="udiff-line-removed">- endif ()</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">- if (ENABLE_GEOLOCATION)</span>
<span class="udiff-line-removed">-     find_package(GeoClue2 2.1.5)</span>
<span class="udiff-line-removed">-     if (GEOCLUE2_FOUND)</span>
<span class="udiff-line-removed">-         SET_AND_EXPOSE_TO_BUILD(USE_GEOCLUE2 ${GEOCLUE2_FOUND})</span>
<span class="udiff-line-removed">-     else ()</span>
<span class="udiff-line-removed">-         find_package(GeoClue)</span>
<span class="udiff-line-removed">-         if (NOT GEOCLUE_FOUND)</span>
<span class="udiff-line-removed">-             message(FATAL_ERROR &quot;Geoclue is needed for ENABLE_GEOLOCATION.&quot;)</span>
<span class="udiff-line-removed">-         endif ()</span>
<span class="udiff-line-removed">-     endif ()</span>
<span class="udiff-line-removed">- endif ()</span>
<span class="udiff-line-removed">- </span>
  if (ENABLE_INTROSPECTION)
      find_package(GObjectIntrospection)
      if (NOT INTROSPECTION_FOUND)
          message(FATAL_ERROR &quot;GObjectIntrospection is needed for ENABLE_INTROSPECTION.&quot;)
      endif ()
  endif ()
  
<span class="udiff-line-modified-removed">- if (ENABLE_MEDIA_STREAM OR ENABLE_WEB_RTC)</span>
<span class="udiff-line-removed">-     find_package(OpenWebRTC)</span>
<span class="udiff-line-removed">-     if (NOT OPENWEBRTC_FOUND)</span>
<span class="udiff-line-removed">-         message(FATAL_ERROR &quot;OpenWebRTC is needed for ENABLE_MEDIA_STREAM and ENABLE_WEB_RTC.&quot;)</span>
<span class="udiff-line-removed">-     endif ()</span>
<span class="udiff-line-removed">-     SET_AND_EXPOSE_TO_BUILD(USE_OPENWEBRTC TRUE)</span>
<span class="udiff-line-removed">- endif ()</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">- if (ENABLE_SUBTLE_CRYPTO)</span>
<span class="udiff-line-modified-added">+ if (ENABLE_WEB_CRYPTO)</span>
      find_package(Libtasn1 REQUIRED)
      if (NOT LIBTASN1_FOUND)
          message(FATAL_ERROR &quot;libtasn1 is required to enable Web Crypto API support.&quot;)
      endif ()
      if (LIBGCRYPT_VERSION VERSION_LESS 1.7.0)
          message(FATAL_ERROR &quot;libgcrypt 1.7.0 is required to enable Web Crypto API support.&quot;)
      endif ()
  endif ()
  
  if (ENABLE_WEBDRIVER)
<span class="udiff-line-modified-removed">-     # WebDriver requires newer versions of GLib and Soup.</span>
<span class="udiff-line-modified-removed">-     if (PC_GLIB_VERSION VERSION_LESS &quot;2.40&quot;)</span>
<span class="udiff-line-modified-removed">-         message(FATAL_ERROR &quot;GLib 2.40 is required to enable WebDriver support.&quot;)</span>
<span class="udiff-line-removed">-     endif ()</span>
<span class="udiff-line-removed">-     if (PC_LIBSOUP_VERSION VERSION_LESS &quot;2.48&quot;)</span>
<span class="udiff-line-removed">-         message(FATAL_ERROR &quot;libsoup 2.48 is required to enable WebDriver support.&quot;)</span>
<span class="udiff-line-removed">-     endif ()</span>
<span class="udiff-line-modified-added">+     SET_AND_EXPOSE_TO_BUILD(ENABLE_WEBDRIVER_KEYBOARD_INTERACTIONS ON)</span>
<span class="udiff-line-modified-added">+     SET_AND_EXPOSE_TO_BUILD(ENABLE_WEBDRIVER_MOUSE_INTERACTIONS ON)</span>
<span class="udiff-line-modified-added">+     SET_AND_EXPOSE_TO_BUILD(ENABLE_WEBDRIVER_TOUCH_INTERACTIONS OFF)</span>
  endif ()
  
  SET_AND_EXPOSE_TO_BUILD(USE_TEXTURE_MAPPER TRUE)
  
  if (ENABLE_OPENGL)
      # ENABLE_OPENGL is true if either USE_OPENGL or ENABLE_GLES2 is true.
      # But USE_OPENGL is the opposite of ENABLE_GLES2.
      if (ENABLE_GLES2)
          find_package(OpenGLES2 REQUIRED)
<span class="udiff-line-modified-removed">-         SET_AND_EXPOSE_TO_BUILD(USE_OPENGL_ES_2 TRUE)</span>
<span class="udiff-line-modified-added">+         SET_AND_EXPOSE_TO_BUILD(USE_OPENGL_ES TRUE)</span>
  
          if (NOT EGL_FOUND)
              message(FATAL_ERROR &quot;EGL is needed for ENABLE_GLES2.&quot;)
          endif ()
      else ()
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -320,81 +288,29 @@</span>
      if (ENABLE_X11_TARGET AND GLX_FOUND AND USE_OPENGL)
          SET_AND_EXPOSE_TO_BUILD(USE_GLX TRUE)
      endif ()
  
      SET_AND_EXPOSE_TO_BUILD(USE_COORDINATED_GRAPHICS TRUE)
<span class="udiff-line-modified-removed">-     SET_AND_EXPOSE_TO_BUILD(USE_COORDINATED_GRAPHICS_THREADED TRUE)</span>
<span class="udiff-line-removed">- endif ()</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">- if (ENABLE_PLUGIN_PROCESS_GTK2)</span>
<span class="udiff-line-removed">-     find_package(GTK2 2.24.10 REQUIRED)</span>
<span class="udiff-line-removed">-     find_package(GDK2 2.24.10 REQUIRED)</span>
<span class="udiff-line-modified-added">+     SET_AND_EXPOSE_TO_BUILD(USE_NICOSIA TRUE)</span>
  endif ()
  
  if (ENABLE_SPELLCHECK)
      find_package(Enchant)
      if (NOT PC_ENCHANT_FOUND)
          message(FATAL_ERROR &quot;Enchant is needed for ENABLE_SPELLCHECK&quot;)
      endif ()
  endif ()
  
<span class="udiff-line-removed">- if (ENABLE_VIDEO OR ENABLE_WEB_AUDIO)</span>
<span class="udiff-line-removed">-     set(GSTREAMER_COMPONENTS app pbutils)</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     if (ENABLE_VIDEO)</span>
<span class="udiff-line-removed">-         list(APPEND GSTREAMER_COMPONENTS video mpegts tag gl)</span>
<span class="udiff-line-removed">-     endif ()</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     if (ENABLE_WEB_AUDIO)</span>
<span class="udiff-line-removed">-         list(APPEND GSTREAMER_COMPONENTS audio fft)</span>
<span class="udiff-line-removed">-     endif ()</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     find_package(GStreamer 1.2.3 REQUIRED COMPONENTS ${GSTREAMER_COMPONENTS})</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     if (ENABLE_WEB_AUDIO)</span>
<span class="udiff-line-removed">-         if (NOT PC_GSTREAMER_AUDIO_FOUND OR NOT PC_GSTREAMER_FFT_FOUND)</span>
<span class="udiff-line-removed">-             message(FATAL_ERROR &quot;WebAudio requires the audio and fft GStreamer libraries. Please check your gst-plugins-base installation.&quot;)</span>
<span class="udiff-line-removed">-         else ()</span>
<span class="udiff-line-removed">-             SET_AND_EXPOSE_TO_BUILD(USE_WEBAUDIO_GSTREAMER TRUE)</span>
<span class="udiff-line-removed">-         endif ()</span>
<span class="udiff-line-removed">-     endif ()</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     if (ENABLE_VIDEO)</span>
<span class="udiff-line-removed">-         if (NOT PC_GSTREAMER_APP_FOUND OR NOT PC_GSTREAMER_PBUTILS_FOUND OR NOT PC_GSTREAMER_TAG_FOUND OR NOT PC_GSTREAMER_VIDEO_FOUND)</span>
<span class="udiff-line-removed">-             message(FATAL_ERROR &quot;Video playback requires the following GStreamer libraries: app, pbutils, tag, video. Please check your gst-plugins-base installation.&quot;)</span>
<span class="udiff-line-removed">-         endif ()</span>
<span class="udiff-line-removed">-     endif ()</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     if (USE_GSTREAMER_MPEGTS)</span>
<span class="udiff-line-removed">-         if (NOT PC_GSTREAMER_MPEGTS_FOUND)</span>
<span class="udiff-line-removed">-             message(FATAL_ERROR &quot;GStreamer MPEG-TS is needed for USE_GSTREAMER_MPEGTS.&quot;)</span>
<span class="udiff-line-removed">-         endif ()</span>
<span class="udiff-line-removed">-     endif ()</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     if (USE_GSTREAMER_GL)</span>
<span class="udiff-line-removed">-         if (PC_GSTREAMER_VERSION VERSION_LESS &quot;1.10&quot;)</span>
<span class="udiff-line-removed">-             set(USE_GSTREAMER_GL OFF)</span>
<span class="udiff-line-removed">-             message(STATUS &quot;Disabling GSTREAMER_GL as the GStreamer version is older than 1.10.&quot;)</span>
<span class="udiff-line-removed">-         else ()</span>
<span class="udiff-line-removed">-             if (NOT PC_GSTREAMER_GL_FOUND)</span>
<span class="udiff-line-removed">-                 message(FATAL_ERROR &quot;GStreamerGL is needed for USE_GSTREAMER_GL.&quot;)</span>
<span class="udiff-line-removed">-             endif ()</span>
<span class="udiff-line-removed">-         endif ()</span>
<span class="udiff-line-removed">-     endif ()</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     SET_AND_EXPOSE_TO_BUILD(USE_GSTREAMER TRUE)</span>
<span class="udiff-line-removed">- endif ()</span>
<span class="udiff-line-removed">- </span>
  if (ENABLE_QUARTZ_TARGET)
      if (NOT GTK3_SUPPORTS_QUARTZ)
<span class="udiff-line-modified-removed">-         message(FATAL_ERROR &quot;Recompile GTK+ with Quartz backend to use ENABLE_QUARTZ_TARGET&quot;)</span>
<span class="udiff-line-modified-added">+         message(FATAL_ERROR &quot;Recompile GTK with Quartz backend to use ENABLE_QUARTZ_TARGET&quot;)</span>
      endif ()
  endif ()
  
  if (ENABLE_X11_TARGET)
      if (NOT GTK3_SUPPORTS_X11)
<span class="udiff-line-modified-removed">-         message(FATAL_ERROR &quot;Recompile GTK+ with X11 backend to use ENABLE_X11_TARGET&quot;)</span>
<span class="udiff-line-modified-added">+         message(FATAL_ERROR &quot;Recompile GTK with X11 backend to use ENABLE_X11_TARGET&quot;)</span>
      endif ()
  
      find_package(X11 REQUIRED)
      if (NOT X11_Xcomposite_FOUND)
          message(FATAL_ERROR &quot;libXcomposite is required for ENABLE_X11_TARGET&quot;)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -407,15 +323,11 @@</span>
      endif ()
  endif ()
  
  if (ENABLE_WAYLAND_TARGET)
      if (NOT GTK3_SUPPORTS_WAYLAND)
<span class="udiff-line-modified-removed">-         message(FATAL_ERROR &quot;Recompile GTK+ with Wayland backend to use ENABLE_WAYLAND_TARGET&quot;)</span>
<span class="udiff-line-removed">-     endif ()</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     if (GTK3_VERSION VERSION_LESS 3.12)</span>
<span class="udiff-line-removed">-         message(FATAL_ERROR &quot;GTK+ 3.12 is required to use ENABLE_WAYLAND_TARGET&quot;)</span>
<span class="udiff-line-modified-added">+         message(FATAL_ERROR &quot;Recompile GTK with Wayland backend to use ENABLE_WAYLAND_TARGET&quot;)</span>
      endif ()
  
      if (NOT EGL_FOUND)
          message(FATAL_ERROR &quot;EGL is required to use ENABLE_WAYLAND_TARGET&quot;)
      endif ()
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -435,10 +347,32 @@</span>
      if (NOT HYPHEN_FOUND)
         message(FATAL_ERROR &quot;libhyphen is needed for USE_LIBHYPHEN.&quot;)
      endif ()
  endif ()
  
<span class="udiff-line-added">+ if (USE_OPENJPEG)</span>
<span class="udiff-line-added">+     find_package(OpenJPEG)</span>
<span class="udiff-line-added">+     if (NOT OpenJPEG_FOUND)</span>
<span class="udiff-line-added">+         message(FATAL_ERROR &quot;libopenjpeg is needed for USE_OPENJPEG.&quot;)</span>
<span class="udiff-line-added">+     endif ()</span>
<span class="udiff-line-added">+     if (&quot;${OPENJPEG_MAJOR_VERSION}.${OPENJPEG_MINOR_VERSION}.${OPENJPEG_BUILD_VERSION}&quot; VERSION_LESS &quot;2.2.0&quot;)</span>
<span class="udiff-line-added">+         message(FATAL_ERROR &quot;libopenjpeg 2.2.0 is required for USE_OPENJPEG.&quot;)</span>
<span class="udiff-line-added">+     endif ()</span>
<span class="udiff-line-added">+ endif ()</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ if (USE_WOFF2)</span>
<span class="udiff-line-added">+     find_package(WOFF2Dec 1.0.2)</span>
<span class="udiff-line-added">+     if (NOT WOFF2DEC_FOUND)</span>
<span class="udiff-line-added">+        message(FATAL_ERROR &quot;libwoff2dec is needed for USE_WOFF2.&quot;)</span>
<span class="udiff-line-added">+     endif ()</span>
<span class="udiff-line-added">+ endif ()</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ # https://bugs.webkit.org/show_bug.cgi?id=182247</span>
<span class="udiff-line-added">+ if (ENABLED_COMPILER_SANITIZERS)</span>
<span class="udiff-line-added">+     set(ENABLE_INTROSPECTION OFF)</span>
<span class="udiff-line-added">+ endif ()</span>
<span class="udiff-line-added">+ </span>
  # Override the cached variables, gtk-doc and gobject-introspection do not really work when cross-building.
  if (CMAKE_CROSSCOMPILING)
      set(ENABLE_GTKDOC OFF)
      set(ENABLE_INTROSPECTION OFF)
  endif ()
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -450,17 +384,20 @@</span>
  
  set(DERIVED_SOURCES_WEBKITGTK_DIR ${DERIVED_SOURCES_DIR}/webkitgtk)
  set(DERIVED_SOURCES_WEBKITGTK_API_DIR ${DERIVED_SOURCES_WEBKITGTK_DIR}/webkit)
  set(DERIVED_SOURCES_WEBKIT2GTK_DIR ${DERIVED_SOURCES_DIR}/webkit2gtk)
  set(DERIVED_SOURCES_WEBKIT2GTK_API_DIR ${DERIVED_SOURCES_WEBKIT2GTK_DIR}/webkit2)
<span class="udiff-line-added">+ set(DERIVED_SOURCES_JAVASCRIPCOREGTK_DIR ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/javascriptcoregtk)</span>
<span class="udiff-line-added">+ set(DERIVED_SOURCES_JAVASCRIPCORE_GLIB_API_DIR ${DERIVED_SOURCES_JAVASCRIPTCORE_DIR}/javascriptcoregtk/jsc)</span>
  set(FORWARDING_HEADERS_WEBKIT2GTK_DIR ${FORWARDING_HEADERS_DIR}/webkit2gtk)
  set(FORWARDING_HEADERS_WEBKIT2GTK_EXTENSION_DIR ${FORWARDING_HEADERS_DIR}/webkit2gtk-webextension)
  
<span class="udiff-line-modified-removed">- set(WebKit_PKGCONFIG_FILE ${CMAKE_BINARY_DIR}/Source/WebKitLegacy/gtk/webkitgtk-${WEBKITGTK_API_VERSION}.pc)</span>
<span class="udiff-line-modified-added">+ set(JavaScriptCore_PKGCONFIG_FILE ${CMAKE_BINARY_DIR}/Source/JavaScriptCore/javascriptcoregtk-${WEBKITGTK_API_VERSION}.pc)</span>
  set(WebKit2_PKGCONFIG_FILE ${CMAKE_BINARY_DIR}/Source/WebKit/webkit2gtk-${WEBKITGTK_API_VERSION}.pc)
  set(WebKit2WebExtension_PKGCONFIG_FILE ${CMAKE_BINARY_DIR}/Source/WebKit/webkit2gtk-web-extension-${WEBKITGTK_API_VERSION}.pc)
  
<span class="udiff-line-added">+ set(JavaScriptCore_LIBRARY_TYPE SHARED)</span>
  set(SHOULD_INSTALL_JS_SHELL ON)
  
  # Add a typelib file to the list of all typelib dependencies. This makes it easy to
  # expose a &#39;gir&#39; target with all gobject-introspection files.
  macro(ADD_TYPELIB typelib)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -478,11 +415,19 @@</span>
  # symbols that we actually need later. With ld64 on darwin, we use -all_load instead.
  macro(ADD_WHOLE_ARCHIVE_TO_LIBRARIES _list_name)
      if (CMAKE_SYSTEM_NAME MATCHES &quot;Darwin&quot;)
          list(APPEND ${_list_name} -Wl,-all_load)
      else ()
<span class="udiff-line-modified-removed">-         foreach (library IN LISTS ${_list_name})</span>
<span class="udiff-line-modified-removed">-           list(APPEND ${_list_name}_TMP -Wl,--whole-archive ${library} -Wl,--no-whole-archive)</span>
<span class="udiff-line-modified-added">+         set(_tmp)</span>
<span class="udiff-line-modified-added">+         foreach (item IN LISTS ${_list_name})</span>
<span class="udiff-line-added">+             if (&quot;${item}&quot; STREQUAL &quot;PRIVATE&quot; OR &quot;${item}&quot; STREQUAL &quot;PUBLIC&quot;)</span>
<span class="udiff-line-added">+                 list(APPEND _tmp &quot;${item}&quot;)</span>
<span class="udiff-line-added">+             else ()</span>
<span class="udiff-line-added">+                 list(APPEND _tmp -Wl,--whole-archive &quot;${item}&quot; -Wl,--no-whole-archive)</span>
<span class="udiff-line-added">+             endif ()</span>
          endforeach ()
<span class="udiff-line-modified-removed">-         set(${_list_name} &quot;${${_list_name}_TMP}&quot;)</span>
<span class="udiff-line-modified-added">+         set(${_list_name} ${_tmp})</span>
      endif ()
  endmacro()
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ include(BubblewrapSandboxChecks)</span>
<span class="udiff-line-added">+ include(GStreamerChecks)</span>
</pre>
<center><a href="OptionsCommon.cmake.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="OptionsJSCOnly.cmake.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/WebCore/rendering/svg/SVGResources.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="SVGRenderTreeAsText.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="SVGResourcesCache.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/rendering/svg/SVGResources.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 41,13 ***</span>
  
  SVGResources::SVGResources()
  {
  }
  
<span class="line-modified">! static HashSet&lt;AtomicString&gt;&amp; clipperFilterMaskerTags()</span>
  {
<span class="line-modified">!     static NeverDestroyed&lt;HashSet&lt;AtomicString&gt;&gt; s_tagList;</span>
      if (s_tagList.get().isEmpty()) {
          // &quot;container elements&quot;: http://www.w3.org/TR/SVG11/intro.html#TermContainerElement
          // &quot;graphics elements&quot; : http://www.w3.org/TR/SVG11/intro.html#TermGraphicsElement
          s_tagList.get().add(SVGNames::aTag-&gt;localName());
          s_tagList.get().add(SVGNames::circleTag-&gt;localName());
<span class="line-new-header">--- 41,13 ---</span>
  
  SVGResources::SVGResources()
  {
  }
  
<span class="line-modified">! static HashSet&lt;AtomString&gt;&amp; clipperFilterMaskerTags()</span>
  {
<span class="line-modified">!     static NeverDestroyed&lt;HashSet&lt;AtomString&gt;&gt; s_tagList;</span>
      if (s_tagList.get().isEmpty()) {
          // &quot;container elements&quot;: http://www.w3.org/TR/SVG11/intro.html#TermContainerElement
          // &quot;graphics elements&quot; : http://www.w3.org/TR/SVG11/intro.html#TermGraphicsElement
          s_tagList.get().add(SVGNames::aTag-&gt;localName());
          s_tagList.get().add(SVGNames::circleTag-&gt;localName());
</pre>
<hr />
<pre>
<span class="line-old-header">*** 90,26 ***</span>
      }
  
      return s_tagList;
  }
  
<span class="line-modified">! static HashSet&lt;AtomicString&gt;&amp; markerTags()</span>
  {
<span class="line-modified">!     static NeverDestroyed&lt;HashSet&lt;AtomicString&gt;&gt; s_tagList;</span>
      if (s_tagList.get().isEmpty()) {
          s_tagList.get().add(SVGNames::lineTag-&gt;localName());
          s_tagList.get().add(SVGNames::pathTag-&gt;localName());
          s_tagList.get().add(SVGNames::polygonTag-&gt;localName());
          s_tagList.get().add(SVGNames::polylineTag-&gt;localName());
      }
  
      return s_tagList;
  }
  
<span class="line-modified">! static HashSet&lt;AtomicString&gt;&amp; fillAndStrokeTags()</span>
  {
<span class="line-modified">!     static NeverDestroyed&lt;HashSet&lt;AtomicString&gt;&gt; s_tagList;</span>
      if (s_tagList.get().isEmpty()) {
          s_tagList.get().add(SVGNames::altGlyphTag-&gt;localName());
          s_tagList.get().add(SVGNames::circleTag-&gt;localName());
          s_tagList.get().add(SVGNames::ellipseTag-&gt;localName());
          s_tagList.get().add(SVGNames::lineTag-&gt;localName());
<span class="line-new-header">--- 90,26 ---</span>
      }
  
      return s_tagList;
  }
  
<span class="line-modified">! static HashSet&lt;AtomString&gt;&amp; markerTags()</span>
  {
<span class="line-modified">!     static NeverDestroyed&lt;HashSet&lt;AtomString&gt;&gt; s_tagList;</span>
      if (s_tagList.get().isEmpty()) {
          s_tagList.get().add(SVGNames::lineTag-&gt;localName());
          s_tagList.get().add(SVGNames::pathTag-&gt;localName());
          s_tagList.get().add(SVGNames::polygonTag-&gt;localName());
          s_tagList.get().add(SVGNames::polylineTag-&gt;localName());
      }
  
      return s_tagList;
  }
  
<span class="line-modified">! static HashSet&lt;AtomString&gt;&amp; fillAndStrokeTags()</span>
  {
<span class="line-modified">!     static NeverDestroyed&lt;HashSet&lt;AtomString&gt;&gt; s_tagList;</span>
      if (s_tagList.get().isEmpty()) {
          s_tagList.get().add(SVGNames::altGlyphTag-&gt;localName());
          s_tagList.get().add(SVGNames::circleTag-&gt;localName());
          s_tagList.get().add(SVGNames::ellipseTag-&gt;localName());
          s_tagList.get().add(SVGNames::lineTag-&gt;localName());
</pre>
<hr />
<pre>
<span class="line-old-header">*** 124,13 ***</span>
      }
  
      return s_tagList;
  }
  
<span class="line-modified">! static HashSet&lt;AtomicString&gt;&amp; chainableResourceTags()</span>
  {
<span class="line-modified">!     static NeverDestroyed&lt;HashSet&lt;AtomicString&gt;&gt; s_tagList;</span>
      if (s_tagList.get().isEmpty()) {
          s_tagList.get().add(SVGNames::linearGradientTag-&gt;localName());
          s_tagList.get().add(SVGNames::filterTag-&gt;localName());
          s_tagList.get().add(SVGNames::patternTag-&gt;localName());
          s_tagList.get().add(SVGNames::radialGradientTag-&gt;localName());
<span class="line-new-header">--- 124,13 ---</span>
      }
  
      return s_tagList;
  }
  
<span class="line-modified">! static HashSet&lt;AtomString&gt;&amp; chainableResourceTags()</span>
  {
<span class="line-modified">!     static NeverDestroyed&lt;HashSet&lt;AtomString&gt;&gt; s_tagList;</span>
      if (s_tagList.get().isEmpty()) {
          s_tagList.get().add(SVGNames::linearGradientTag-&gt;localName());
          s_tagList.get().add(SVGNames::filterTag-&gt;localName());
          s_tagList.get().add(SVGNames::patternTag-&gt;localName());
          s_tagList.get().add(SVGNames::radialGradientTag-&gt;localName());
</pre>
<hr />
<pre>
<span class="line-old-header">*** 167,11 ***</span>
  
      ASSERT_NOT_REACHED();
      return false;
  }
  
<span class="line-modified">! static inline RenderSVGResourceContainer* paintingResourceFromSVGPaint(Document&amp; document, const SVGPaintType&amp; paintType, const String&amp; paintUri, AtomicString&amp; id, bool&amp; hasPendingResource)</span>
  {
      if (paintType != SVGPaintType::URI &amp;&amp; paintType != SVGPaintType::URIRGBColor &amp;&amp; paintType != SVGPaintType::URICurrentColor)
          return nullptr;
  
      id = SVGURIReference::fragmentIdentifierFromIRIString(paintUri, document);
<span class="line-new-header">--- 167,11 ---</span>
  
      ASSERT_NOT_REACHED();
      return false;
  }
  
<span class="line-modified">! static inline RenderSVGResourceContainer* paintingResourceFromSVGPaint(Document&amp; document, const SVGPaintType&amp; paintType, const String&amp; paintUri, AtomString&amp; id, bool&amp; hasPendingResource)</span>
  {
      if (paintType != SVGPaintType::URI &amp;&amp; paintType != SVGPaintType::URIRGBColor &amp;&amp; paintType != SVGPaintType::URICurrentColor)
          return nullptr;
  
      id = SVGURIReference::fragmentIdentifierFromIRIString(paintUri, document);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 186,11 ***</span>
          return nullptr;
  
      return container;
  }
  
<span class="line-modified">! static inline void registerPendingResource(SVGDocumentExtensions&amp; extensions, const AtomicString&amp; id, SVGElement&amp; element)</span>
  {
      extensions.addPendingResource(id, element);
  }
  
  bool SVGResources::buildCachedResources(const RenderElement&amp; renderer, const RenderStyle&amp; style)
<span class="line-new-header">--- 186,11 ---</span>
          return nullptr;
  
      return container;
  }
  
<span class="line-modified">! static inline void registerPendingResource(SVGDocumentExtensions&amp; extensions, const AtomString&amp; id, SVGElement&amp; element)</span>
  {
      extensions.addPendingResource(id, element);
  }
  
  bool SVGResources::buildCachedResources(const RenderElement&amp; renderer, const RenderStyle&amp; style)
</pre>
<hr />
<pre>
<span class="line-old-header">*** 205,29 ***</span>
  
      Document&amp; document = element.document();
  
      SVGDocumentExtensions&amp; extensions = document.accessSVGExtensions();
  
<span class="line-modified">!     const AtomicString&amp; tagName = element.localName();</span>
      if (tagName.isNull())
          return false;
  
      const SVGRenderStyle&amp; svgStyle = style.svgStyle();
  
      bool foundResources = false;
      if (clipperFilterMaskerTags().contains(tagName)) {
          if (svgStyle.hasClipper()) {
<span class="line-modified">!             AtomicString id(svgStyle.clipperResource());</span>
              if (setClipper(getRenderSVGResourceById&lt;RenderSVGResourceClipper&gt;(document, id)))
                  foundResources = true;
              else
                  registerPendingResource(extensions, id, element);
          } else if (is&lt;ReferenceClipPathOperation&gt;(style.clipPath())) {
              // FIXME: -webkit-clip-path should support external resources
              // https://bugs.webkit.org/show_bug.cgi?id=127032
              auto&amp; clipPath = downcast&lt;ReferenceClipPathOperation&gt;(*style.clipPath());
<span class="line-modified">!             AtomicString id(clipPath.fragment());</span>
              if (setClipper(getRenderSVGResourceById&lt;RenderSVGResourceClipper&gt;(document, id)))
                  foundResources = true;
              else
                  registerPendingResource(extensions, id, element);
          }
<span class="line-new-header">--- 205,29 ---</span>
  
      Document&amp; document = element.document();
  
      SVGDocumentExtensions&amp; extensions = document.accessSVGExtensions();
  
<span class="line-modified">!     const AtomString&amp; tagName = element.localName();</span>
      if (tagName.isNull())
          return false;
  
      const SVGRenderStyle&amp; svgStyle = style.svgStyle();
  
      bool foundResources = false;
      if (clipperFilterMaskerTags().contains(tagName)) {
          if (svgStyle.hasClipper()) {
<span class="line-modified">!             AtomString id(svgStyle.clipperResource());</span>
              if (setClipper(getRenderSVGResourceById&lt;RenderSVGResourceClipper&gt;(document, id)))
                  foundResources = true;
              else
                  registerPendingResource(extensions, id, element);
          } else if (is&lt;ReferenceClipPathOperation&gt;(style.clipPath())) {
              // FIXME: -webkit-clip-path should support external resources
              // https://bugs.webkit.org/show_bug.cgi?id=127032
              auto&amp; clipPath = downcast&lt;ReferenceClipPathOperation&gt;(*style.clipPath());
<span class="line-modified">!             AtomString id(clipPath.fragment());</span>
              if (setClipper(getRenderSVGResourceById&lt;RenderSVGResourceClipper&gt;(document, id)))
                  foundResources = true;
              else
                  registerPendingResource(extensions, id, element);
          }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 236,70 ***</span>
              const FilterOperations&amp; filterOperations = style.filter();
              if (filterOperations.size() == 1) {
                  const FilterOperation&amp; filterOperation = *filterOperations.at(0);
                  if (filterOperation.type() == FilterOperation::REFERENCE) {
                      const auto&amp; referenceFilterOperation = downcast&lt;ReferenceFilterOperation&gt;(filterOperation);
<span class="line-modified">!                     AtomicString id = SVGURIReference::fragmentIdentifierFromIRIString(referenceFilterOperation.url(), element.document());</span>
                      if (setFilter(getRenderSVGResourceById&lt;RenderSVGResourceFilter&gt;(document, id)))
                          foundResources = true;
                      else
                          registerPendingResource(extensions, id, element);
                  }
              }
          }
  
          if (svgStyle.hasMasker()) {
<span class="line-modified">!             AtomicString id(svgStyle.maskerResource());</span>
              if (setMasker(getRenderSVGResourceById&lt;RenderSVGResourceMasker&gt;(document, id)))
                  foundResources = true;
              else
                  registerPendingResource(extensions, id, element);
          }
      }
  
      if (markerTags().contains(tagName) &amp;&amp; svgStyle.hasMarkers()) {
<span class="line-modified">!         AtomicString markerStartId(svgStyle.markerStartResource());</span>
          if (setMarkerStart(getRenderSVGResourceById&lt;RenderSVGResourceMarker&gt;(document, markerStartId)))
              foundResources = true;
          else
              registerPendingResource(extensions, markerStartId, element);
  
<span class="line-modified">!         AtomicString markerMidId(svgStyle.markerMidResource());</span>
          if (setMarkerMid(getRenderSVGResourceById&lt;RenderSVGResourceMarker&gt;(document, markerMidId)))
              foundResources = true;
          else
              registerPendingResource(extensions, markerMidId, element);
  
<span class="line-modified">!         AtomicString markerEndId(svgStyle.markerEndResource());</span>
          if (setMarkerEnd(getRenderSVGResourceById&lt;RenderSVGResourceMarker&gt;(document, markerEndId)))
              foundResources = true;
          else
              registerPendingResource(extensions, markerEndId, element);
      }
  
      if (fillAndStrokeTags().contains(tagName)) {
          if (svgStyle.hasFill()) {
              bool hasPendingResource = false;
<span class="line-modified">!             AtomicString id;</span>
              if (setFill(paintingResourceFromSVGPaint(document, svgStyle.fillPaintType(), svgStyle.fillPaintUri(), id, hasPendingResource)))
                  foundResources = true;
              else if (hasPendingResource)
                  registerPendingResource(extensions, id, element);
          }
  
          if (svgStyle.hasStroke()) {
              bool hasPendingResource = false;
<span class="line-modified">!             AtomicString id;</span>
              if (setStroke(paintingResourceFromSVGPaint(document, svgStyle.strokePaintType(), svgStyle.strokePaintUri(), id, hasPendingResource)))
                  foundResources = true;
              else if (hasPendingResource)
                  registerPendingResource(extensions, id, element);
          }
      }
  
      if (chainableResourceTags().contains(tagName)) {
<span class="line-modified">!         AtomicString id(targetReferenceFromResource(element));</span>
          auto* linkedResource = getRenderSVGResourceContainerById(document, id);
          if (!linkedResource)
              registerPendingResource(extensions, id, element);
          else if (isChainableResource(element, linkedResource-&gt;element())) {
              setLinkedResource(linkedResource);
<span class="line-new-header">--- 236,70 ---</span>
              const FilterOperations&amp; filterOperations = style.filter();
              if (filterOperations.size() == 1) {
                  const FilterOperation&amp; filterOperation = *filterOperations.at(0);
                  if (filterOperation.type() == FilterOperation::REFERENCE) {
                      const auto&amp; referenceFilterOperation = downcast&lt;ReferenceFilterOperation&gt;(filterOperation);
<span class="line-modified">!                     AtomString id = SVGURIReference::fragmentIdentifierFromIRIString(referenceFilterOperation.url(), element.document());</span>
                      if (setFilter(getRenderSVGResourceById&lt;RenderSVGResourceFilter&gt;(document, id)))
                          foundResources = true;
                      else
                          registerPendingResource(extensions, id, element);
                  }
              }
          }
  
          if (svgStyle.hasMasker()) {
<span class="line-modified">!             AtomString id(svgStyle.maskerResource());</span>
              if (setMasker(getRenderSVGResourceById&lt;RenderSVGResourceMasker&gt;(document, id)))
                  foundResources = true;
              else
                  registerPendingResource(extensions, id, element);
          }
      }
  
      if (markerTags().contains(tagName) &amp;&amp; svgStyle.hasMarkers()) {
<span class="line-modified">!         AtomString markerStartId(svgStyle.markerStartResource());</span>
          if (setMarkerStart(getRenderSVGResourceById&lt;RenderSVGResourceMarker&gt;(document, markerStartId)))
              foundResources = true;
          else
              registerPendingResource(extensions, markerStartId, element);
  
<span class="line-modified">!         AtomString markerMidId(svgStyle.markerMidResource());</span>
          if (setMarkerMid(getRenderSVGResourceById&lt;RenderSVGResourceMarker&gt;(document, markerMidId)))
              foundResources = true;
          else
              registerPendingResource(extensions, markerMidId, element);
  
<span class="line-modified">!         AtomString markerEndId(svgStyle.markerEndResource());</span>
          if (setMarkerEnd(getRenderSVGResourceById&lt;RenderSVGResourceMarker&gt;(document, markerEndId)))
              foundResources = true;
          else
              registerPendingResource(extensions, markerEndId, element);
      }
  
      if (fillAndStrokeTags().contains(tagName)) {
          if (svgStyle.hasFill()) {
              bool hasPendingResource = false;
<span class="line-modified">!             AtomString id;</span>
              if (setFill(paintingResourceFromSVGPaint(document, svgStyle.fillPaintType(), svgStyle.fillPaintUri(), id, hasPendingResource)))
                  foundResources = true;
              else if (hasPendingResource)
                  registerPendingResource(extensions, id, element);
          }
  
          if (svgStyle.hasStroke()) {
              bool hasPendingResource = false;
<span class="line-modified">!             AtomString id;</span>
              if (setStroke(paintingResourceFromSVGPaint(document, svgStyle.strokePaintType(), svgStyle.strokePaintUri(), id, hasPendingResource)))
                  foundResources = true;
              else if (hasPendingResource)
                  registerPendingResource(extensions, id, element);
          }
      }
  
      if (chainableResourceTags().contains(tagName)) {
<span class="line-modified">!         AtomString id(targetReferenceFromResource(element));</span>
          auto* linkedResource = getRenderSVGResourceContainerById(document, id);
          if (!linkedResource)
              registerPendingResource(extensions, id, element);
          else if (isChainableResource(element, linkedResource-&gt;element())) {
              setLinkedResource(linkedResource);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 506,11 ***</span>
          return false;
  
      ASSERT(clipper-&gt;resourceType() == ClipperResourceType);
  
      if (!m_clipperFilterMaskerData)
<span class="line-modified">!         m_clipperFilterMaskerData = std::make_unique&lt;ClipperFilterMaskerData&gt;();</span>
  
      m_clipperFilterMaskerData-&gt;clipper = clipper;
      return true;
  }
  
<span class="line-new-header">--- 506,11 ---</span>
          return false;
  
      ASSERT(clipper-&gt;resourceType() == ClipperResourceType);
  
      if (!m_clipperFilterMaskerData)
<span class="line-modified">!         m_clipperFilterMaskerData = makeUnique&lt;ClipperFilterMaskerData&gt;();</span>
  
      m_clipperFilterMaskerData-&gt;clipper = clipper;
      return true;
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 527,11 ***</span>
          return false;
  
      ASSERT(filter-&gt;resourceType() == FilterResourceType);
  
      if (!m_clipperFilterMaskerData)
<span class="line-modified">!         m_clipperFilterMaskerData = std::make_unique&lt;ClipperFilterMaskerData&gt;();</span>
  
      m_clipperFilterMaskerData-&gt;filter = filter;
      return true;
  }
  
<span class="line-new-header">--- 527,11 ---</span>
          return false;
  
      ASSERT(filter-&gt;resourceType() == FilterResourceType);
  
      if (!m_clipperFilterMaskerData)
<span class="line-modified">!         m_clipperFilterMaskerData = makeUnique&lt;ClipperFilterMaskerData&gt;();</span>
  
      m_clipperFilterMaskerData-&gt;filter = filter;
      return true;
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 548,11 ***</span>
          return false;
  
      ASSERT(markerStart-&gt;resourceType() == MarkerResourceType);
  
      if (!m_markerData)
<span class="line-modified">!         m_markerData = std::make_unique&lt;MarkerData&gt;();</span>
  
      m_markerData-&gt;markerStart = markerStart;
      return true;
  }
  
<span class="line-new-header">--- 548,11 ---</span>
          return false;
  
      ASSERT(markerStart-&gt;resourceType() == MarkerResourceType);
  
      if (!m_markerData)
<span class="line-modified">!         m_markerData = makeUnique&lt;MarkerData&gt;();</span>
  
      m_markerData-&gt;markerStart = markerStart;
      return true;
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 569,11 ***</span>
          return false;
  
      ASSERT(markerMid-&gt;resourceType() == MarkerResourceType);
  
      if (!m_markerData)
<span class="line-modified">!         m_markerData = std::make_unique&lt;MarkerData&gt;();</span>
  
      m_markerData-&gt;markerMid = markerMid;
      return true;
  }
  
<span class="line-new-header">--- 569,11 ---</span>
          return false;
  
      ASSERT(markerMid-&gt;resourceType() == MarkerResourceType);
  
      if (!m_markerData)
<span class="line-modified">!         m_markerData = makeUnique&lt;MarkerData&gt;();</span>
  
      m_markerData-&gt;markerMid = markerMid;
      return true;
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 590,11 ***</span>
          return false;
  
      ASSERT(markerEnd-&gt;resourceType() == MarkerResourceType);
  
      if (!m_markerData)
<span class="line-modified">!         m_markerData = std::make_unique&lt;MarkerData&gt;();</span>
  
      m_markerData-&gt;markerEnd = markerEnd;
      return true;
  }
  
<span class="line-new-header">--- 590,11 ---</span>
          return false;
  
      ASSERT(markerEnd-&gt;resourceType() == MarkerResourceType);
  
      if (!m_markerData)
<span class="line-modified">!         m_markerData = makeUnique&lt;MarkerData&gt;();</span>
  
      m_markerData-&gt;markerEnd = markerEnd;
      return true;
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 611,11 ***</span>
          return false;
  
      ASSERT(masker-&gt;resourceType() == MaskerResourceType);
  
      if (!m_clipperFilterMaskerData)
<span class="line-modified">!         m_clipperFilterMaskerData = std::make_unique&lt;ClipperFilterMaskerData&gt;();</span>
  
      m_clipperFilterMaskerData-&gt;masker = masker;
      return true;
  }
  
<span class="line-new-header">--- 611,11 ---</span>
          return false;
  
      ASSERT(masker-&gt;resourceType() == MaskerResourceType);
  
      if (!m_clipperFilterMaskerData)
<span class="line-modified">!         m_clipperFilterMaskerData = makeUnique&lt;ClipperFilterMaskerData&gt;();</span>
  
      m_clipperFilterMaskerData-&gt;masker = masker;
      return true;
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 634,11 ***</span>
      ASSERT(fill-&gt;resourceType() == PatternResourceType
             || fill-&gt;resourceType() == LinearGradientResourceType
             || fill-&gt;resourceType() == RadialGradientResourceType);
  
      if (!m_fillStrokeData)
<span class="line-modified">!         m_fillStrokeData = std::make_unique&lt;FillStrokeData&gt;();</span>
  
      m_fillStrokeData-&gt;fill = fill;
      return true;
  }
  
<span class="line-new-header">--- 634,11 ---</span>
      ASSERT(fill-&gt;resourceType() == PatternResourceType
             || fill-&gt;resourceType() == LinearGradientResourceType
             || fill-&gt;resourceType() == RadialGradientResourceType);
  
      if (!m_fillStrokeData)
<span class="line-modified">!         m_fillStrokeData = makeUnique&lt;FillStrokeData&gt;();</span>
  
      m_fillStrokeData-&gt;fill = fill;
      return true;
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 657,11 ***</span>
      ASSERT(stroke-&gt;resourceType() == PatternResourceType
             || stroke-&gt;resourceType() == LinearGradientResourceType
             || stroke-&gt;resourceType() == RadialGradientResourceType);
  
      if (!m_fillStrokeData)
<span class="line-modified">!         m_fillStrokeData = std::make_unique&lt;FillStrokeData&gt;();</span>
  
      m_fillStrokeData-&gt;stroke = stroke;
      return true;
  }
  
<span class="line-new-header">--- 657,11 ---</span>
      ASSERT(stroke-&gt;resourceType() == PatternResourceType
             || stroke-&gt;resourceType() == LinearGradientResourceType
             || stroke-&gt;resourceType() == RadialGradientResourceType);
  
      if (!m_fillStrokeData)
<span class="line-modified">!         m_fillStrokeData = makeUnique&lt;FillStrokeData&gt;();</span>
  
      m_fillStrokeData-&gt;stroke = stroke;
      return true;
  }
  
</pre>
<center><a href="SVGRenderTreeAsText.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="SVGResourcesCache.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>
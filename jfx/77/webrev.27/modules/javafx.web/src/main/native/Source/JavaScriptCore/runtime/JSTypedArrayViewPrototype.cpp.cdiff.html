<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/runtime/JSTypedArrayViewPrototype.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="JSTypedArrayViewConstructor.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="LazyClassStructure.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/runtime/JSTypedArrayViewPrototype.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (C) 2015-2016 Apple Inc. All rights reserved.</span>
   *
   * Redistribution and use in source and binary forms, with or without
   * modification, are permitted provided that the following conditions
   * are met:
   * 1. Redistributions of source code must retain the above copyright
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (C) 2015-2019 Apple Inc. All rights reserved.</span>
   *
   * Redistribution and use in source and binary forms, with or without
   * modification, are permitted provided that the following conditions
   * are met:
   * 1. Redistributions of source code must retain the above copyright
</pre>
<hr />
<pre>
<span class="line-old-header">*** 255,27 ***</span>
          return JSValue::encode(jsUndefined());
  
      VM&amp; vm = exec-&gt;vm();
      switch (thisValue.getObject()-&gt;classInfo(vm)-&gt;typedArrayStorageType) {
      case TypeUint8Clamped:
<span class="line-modified">!         return JSValue::encode(jsString(&amp;vm, &quot;Uint8ClampedArray&quot;));</span>
      case TypeInt32:
<span class="line-modified">!         return JSValue::encode(jsString(&amp;vm, &quot;Int32Array&quot;));</span>
      case TypeUint32:
<span class="line-modified">!         return JSValue::encode(jsString(&amp;vm, &quot;Uint32Array&quot;));</span>
      case TypeFloat64:
<span class="line-modified">!         return JSValue::encode(jsString(&amp;vm, &quot;Float64Array&quot;));</span>
      case TypeFloat32:
<span class="line-modified">!         return JSValue::encode(jsString(&amp;vm, &quot;Float32Array&quot;));</span>
      case TypeInt8:
<span class="line-modified">!         return JSValue::encode(jsString(&amp;vm, &quot;Int8Array&quot;));</span>
      case TypeUint8:
<span class="line-modified">!         return JSValue::encode(jsString(&amp;vm, &quot;Uint8Array&quot;));</span>
      case TypeInt16:
<span class="line-modified">!         return JSValue::encode(jsString(&amp;vm, &quot;Int16Array&quot;));</span>
      case TypeUint16:
<span class="line-modified">!         return JSValue::encode(jsString(&amp;vm, &quot;Uint16Array&quot;));</span>
      case NotTypedArray:
      case TypeDataView:
          return JSValue::encode(jsUndefined());
      }
      RELEASE_ASSERT_NOT_REACHED();
<span class="line-new-header">--- 255,27 ---</span>
          return JSValue::encode(jsUndefined());
  
      VM&amp; vm = exec-&gt;vm();
      switch (thisValue.getObject()-&gt;classInfo(vm)-&gt;typedArrayStorageType) {
      case TypeUint8Clamped:
<span class="line-modified">!         return JSValue::encode(jsString(vm, &quot;Uint8ClampedArray&quot;));</span>
      case TypeInt32:
<span class="line-modified">!         return JSValue::encode(jsString(vm, &quot;Int32Array&quot;));</span>
      case TypeUint32:
<span class="line-modified">!         return JSValue::encode(jsString(vm, &quot;Uint32Array&quot;));</span>
      case TypeFloat64:
<span class="line-modified">!         return JSValue::encode(jsString(vm, &quot;Float64Array&quot;));</span>
      case TypeFloat32:
<span class="line-modified">!         return JSValue::encode(jsString(vm, &quot;Float32Array&quot;));</span>
      case TypeInt8:
<span class="line-modified">!         return JSValue::encode(jsString(vm, &quot;Int8Array&quot;));</span>
      case TypeUint8:
<span class="line-modified">!         return JSValue::encode(jsString(vm, &quot;Uint8Array&quot;));</span>
      case TypeInt16:
<span class="line-modified">!         return JSValue::encode(jsString(vm, &quot;Int16Array&quot;));</span>
      case TypeUint16:
<span class="line-modified">!         return JSValue::encode(jsString(vm, &quot;Uint16Array&quot;));</span>
      case NotTypedArray:
      case TypeDataView:
          return JSValue::encode(jsUndefined());
      }
      RELEASE_ASSERT_NOT_REACHED();
</pre>
<hr />
<pre>
<span class="line-old-header">*** 295,13 ***</span>
  
      ASSERT(inherits(vm, info()));
  
      putDirectWithoutTransition(vm, vm.propertyNames-&gt;toString, globalObject-&gt;arrayProtoToStringFunction(), static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum));
  
<span class="line-modified">!     JSC_NATIVE_GETTER(&quot;buffer&quot;, typedArrayViewProtoGetterFuncBuffer, PropertyAttribute::DontEnum | PropertyAttribute::ReadOnly);</span>
<span class="line-modified">!     JSC_NATIVE_INTRINSIC_GETTER(vm.propertyNames-&gt;byteLength, typedArrayViewProtoGetterFuncByteLength, PropertyAttribute::DontEnum | PropertyAttribute::ReadOnly, TypedArrayByteLengthIntrinsic);</span>
<span class="line-modified">!     JSC_NATIVE_INTRINSIC_GETTER(vm.propertyNames-&gt;byteOffset, typedArrayViewProtoGetterFuncByteOffset, PropertyAttribute::DontEnum | PropertyAttribute::ReadOnly, TypedArrayByteOffsetIntrinsic);</span>
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;copyWithin&quot;, typedArrayViewProtoFuncCopyWithin, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 2);
      JSC_BUILTIN_FUNCTION_WITHOUT_TRANSITION(&quot;every&quot;, typedArrayPrototypeEveryCodeGenerator, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum));
      JSC_BUILTIN_FUNCTION_WITHOUT_TRANSITION(&quot;filter&quot;, typedArrayPrototypeFilterCodeGenerator, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum));
      JSC_BUILTIN_FUNCTION_WITHOUT_TRANSITION(&quot;sort&quot;, typedArrayPrototypeSortCodeGenerator, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum));
      JSC_BUILTIN_FUNCTION_WITHOUT_TRANSITION(vm.propertyNames-&gt;builtinNames().entriesPublicName(), typedArrayPrototypeEntriesCodeGenerator, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum));
<span class="line-new-header">--- 295,13 ---</span>
  
      ASSERT(inherits(vm, info()));
  
      putDirectWithoutTransition(vm, vm.propertyNames-&gt;toString, globalObject-&gt;arrayProtoToStringFunction(), static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum));
  
<span class="line-modified">!     JSC_NATIVE_GETTER_WITHOUT_TRANSITION(&quot;buffer&quot;, typedArrayViewProtoGetterFuncBuffer, PropertyAttribute::DontEnum | PropertyAttribute::ReadOnly);</span>
<span class="line-modified">!     JSC_NATIVE_INTRINSIC_GETTER_WITHOUT_TRANSITION(vm.propertyNames-&gt;byteLength, typedArrayViewProtoGetterFuncByteLength, PropertyAttribute::DontEnum | PropertyAttribute::ReadOnly, TypedArrayByteLengthIntrinsic);</span>
<span class="line-modified">!     JSC_NATIVE_INTRINSIC_GETTER_WITHOUT_TRANSITION(vm.propertyNames-&gt;byteOffset, typedArrayViewProtoGetterFuncByteOffset, PropertyAttribute::DontEnum | PropertyAttribute::ReadOnly, TypedArrayByteOffsetIntrinsic);</span>
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;copyWithin&quot;, typedArrayViewProtoFuncCopyWithin, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 2);
      JSC_BUILTIN_FUNCTION_WITHOUT_TRANSITION(&quot;every&quot;, typedArrayPrototypeEveryCodeGenerator, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum));
      JSC_BUILTIN_FUNCTION_WITHOUT_TRANSITION(&quot;filter&quot;, typedArrayPrototypeFilterCodeGenerator, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum));
      JSC_BUILTIN_FUNCTION_WITHOUT_TRANSITION(&quot;sort&quot;, typedArrayPrototypeSortCodeGenerator, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum));
      JSC_BUILTIN_FUNCTION_WITHOUT_TRANSITION(vm.propertyNames-&gt;builtinNames().entriesPublicName(), typedArrayPrototypeEntriesCodeGenerator, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum));
</pre>
<hr />
<pre>
<span class="line-old-header">*** 312,11 ***</span>
      JSC_BUILTIN_FUNCTION_WITHOUT_TRANSITION(vm.propertyNames-&gt;forEach, typedArrayPrototypeForEachCodeGenerator, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum));
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;indexOf&quot;, typedArrayViewProtoFuncIndexOf, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(vm.propertyNames-&gt;join, typedArrayViewProtoFuncJoin, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);
      JSC_BUILTIN_FUNCTION_WITHOUT_TRANSITION(vm.propertyNames-&gt;builtinNames().keysPublicName(), typedArrayPrototypeKeysCodeGenerator, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum));
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;lastIndexOf&quot;, typedArrayViewProtoFuncLastIndexOf, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);
<span class="line-modified">!     JSC_NATIVE_INTRINSIC_GETTER(vm.propertyNames-&gt;length, typedArrayViewProtoGetterFuncLength, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum) | PropertyAttribute::ReadOnly, TypedArrayLengthIntrinsic);</span>
      JSC_BUILTIN_FUNCTION_WITHOUT_TRANSITION(&quot;map&quot;, typedArrayPrototypeMapCodeGenerator, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum));
      JSC_BUILTIN_FUNCTION_WITHOUT_TRANSITION(&quot;reduce&quot;, typedArrayPrototypeReduceCodeGenerator, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum));
      JSC_BUILTIN_FUNCTION_WITHOUT_TRANSITION(&quot;reduceRight&quot;, typedArrayPrototypeReduceRightCodeGenerator, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum));
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;reverse&quot;, typedArrayViewProtoFuncReverse, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 0);
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(vm.propertyNames-&gt;set, typedArrayViewProtoFuncSet, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);
<span class="line-new-header">--- 312,11 ---</span>
      JSC_BUILTIN_FUNCTION_WITHOUT_TRANSITION(vm.propertyNames-&gt;forEach, typedArrayPrototypeForEachCodeGenerator, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum));
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;indexOf&quot;, typedArrayViewProtoFuncIndexOf, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(vm.propertyNames-&gt;join, typedArrayViewProtoFuncJoin, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);
      JSC_BUILTIN_FUNCTION_WITHOUT_TRANSITION(vm.propertyNames-&gt;builtinNames().keysPublicName(), typedArrayPrototypeKeysCodeGenerator, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum));
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;lastIndexOf&quot;, typedArrayViewProtoFuncLastIndexOf, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);
<span class="line-modified">!     JSC_NATIVE_INTRINSIC_GETTER_WITHOUT_TRANSITION(vm.propertyNames-&gt;length, typedArrayViewProtoGetterFuncLength, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum) | PropertyAttribute::ReadOnly, TypedArrayLengthIntrinsic);</span>
      JSC_BUILTIN_FUNCTION_WITHOUT_TRANSITION(&quot;map&quot;, typedArrayPrototypeMapCodeGenerator, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum));
      JSC_BUILTIN_FUNCTION_WITHOUT_TRANSITION(&quot;reduce&quot;, typedArrayPrototypeReduceCodeGenerator, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum));
      JSC_BUILTIN_FUNCTION_WITHOUT_TRANSITION(&quot;reduceRight&quot;, typedArrayPrototypeReduceRightCodeGenerator, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum));
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;reverse&quot;, typedArrayViewProtoFuncReverse, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 0);
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(vm.propertyNames-&gt;set, typedArrayViewProtoFuncSet, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum), 1);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 325,11 ***</span>
      JSC_BUILTIN_FUNCTION_WITHOUT_TRANSITION(vm.propertyNames-&gt;subarray, typedArrayPrototypeSubarrayCodeGenerator, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum));
      JSC_BUILTIN_FUNCTION_WITHOUT_TRANSITION(vm.propertyNames-&gt;toLocaleString, typedArrayPrototypeToLocaleStringCodeGenerator, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum));
  
      JSFunction* toStringTagFunction = JSFunction::create(vm, globalObject, 0, &quot;get [Symbol.toStringTag]&quot;_s, typedArrayViewProtoGetterFuncToStringTag, NoIntrinsic);
      GetterSetter* toStringTagAccessor = GetterSetter::create(vm, globalObject, toStringTagFunction, nullptr);
<span class="line-modified">!     putDirectNonIndexAccessor(vm, vm.propertyNames-&gt;toStringTagSymbol, toStringTagAccessor, PropertyAttribute::DontEnum | PropertyAttribute::ReadOnly | PropertyAttribute::Accessor);</span>
  
      JSFunction* valuesFunction = JSFunction::create(vm, typedArrayPrototypeValuesCodeGenerator(vm), globalObject);
  
      putDirectWithoutTransition(vm, vm.propertyNames-&gt;builtinNames().valuesPublicName(), valuesFunction, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum));
      putDirectWithoutTransition(vm, vm.propertyNames-&gt;iteratorSymbol, valuesFunction, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum));
<span class="line-new-header">--- 325,11 ---</span>
      JSC_BUILTIN_FUNCTION_WITHOUT_TRANSITION(vm.propertyNames-&gt;subarray, typedArrayPrototypeSubarrayCodeGenerator, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum));
      JSC_BUILTIN_FUNCTION_WITHOUT_TRANSITION(vm.propertyNames-&gt;toLocaleString, typedArrayPrototypeToLocaleStringCodeGenerator, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum));
  
      JSFunction* toStringTagFunction = JSFunction::create(vm, globalObject, 0, &quot;get [Symbol.toStringTag]&quot;_s, typedArrayViewProtoGetterFuncToStringTag, NoIntrinsic);
      GetterSetter* toStringTagAccessor = GetterSetter::create(vm, globalObject, toStringTagFunction, nullptr);
<span class="line-modified">!     putDirectNonIndexAccessorWithoutTransition(vm, vm.propertyNames-&gt;toStringTagSymbol, toStringTagAccessor, PropertyAttribute::DontEnum | PropertyAttribute::ReadOnly | PropertyAttribute::Accessor);</span>
  
      JSFunction* valuesFunction = JSFunction::create(vm, typedArrayPrototypeValuesCodeGenerator(vm), globalObject);
  
      putDirectWithoutTransition(vm, vm.propertyNames-&gt;builtinNames().valuesPublicName(), valuesFunction, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum));
      putDirectWithoutTransition(vm, vm.propertyNames-&gt;iteratorSymbol, valuesFunction, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum));
</pre>
<center><a href="JSTypedArrayViewConstructor.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="LazyClassStructure.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>
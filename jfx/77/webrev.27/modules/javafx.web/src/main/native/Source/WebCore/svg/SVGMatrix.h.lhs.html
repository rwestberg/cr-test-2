<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames modules/javafx.web/src/main/native/Source/WebCore/svg/SVGMatrix.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
<a name="1" id="anc1"></a><span class="line-modified">  2  * Copyright (C) 2016 Apple Inc. All rights reserved.</span>
  3  *
  4  * Redistribution and use in source and binary forms, with or without
  5  * modification, are permitted provided that the following conditions
  6  * are met:
  7  * 1. Redistributions of source code must retain the above copyright
  8  *    notice, this list of conditions and the following disclaimer.
  9  * 2. Redistributions in binary form must reproduce the above copyright
 10  *    notice, this list of conditions and the following disclaimer in the
 11  *    documentation and/or other materials provided with the distribution.
 12  *
 13  * THIS SOFTWARE IS PROVIDED BY APPLE INC. AND ITS CONTRIBUTORS ``AS IS&#39;&#39;
 14  * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
 15  * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 16  * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL APPLE INC. OR ITS CONTRIBUTORS
 17  * BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 18  * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 19  * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 20  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 21  * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 22  * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF
 23  * THE POSSIBILITY OF SUCH DAMAGE.
 24  */
 25 
 26 #pragma once
 27 
<a name="2" id="anc2"></a><span class="line-modified"> 28 #include &quot;SVGMatrixValue.h&quot;</span>
<span class="line-modified"> 29 #include &quot;SVGPropertyTearOff.h&quot;</span>

 30 
 31 namespace WebCore {
 32 
 33 // FIXME: Remove this class once SVGMatrix becomes an alias to DOMMatrix.
<a name="3" id="anc3"></a><span class="line-modified"> 34 class SVGMatrix : public SVGPropertyTearOff&lt;SVGMatrixValue&gt; {</span>



 35 public:
<a name="4" id="anc4"></a><span class="line-modified"> 36     static Ref&lt;SVGMatrix&gt; create(SVGAnimatedProperty&amp; animatedProperty, SVGPropertyRole role, SVGMatrixValue&amp; value)</span>
 37     {
<a name="5" id="anc5"></a><span class="line-modified"> 38         return adoptRef(*new SVGMatrix(animatedProperty, role, value));</span>
 39     }
 40 
<a name="6" id="anc6"></a><span class="line-modified"> 41     static Ref&lt;SVGMatrix&gt; create(const SVGMatrixValue&amp; initialValue = { })</span>
 42     {
<a name="7" id="anc7"></a><span class="line-modified"> 43         return adoptRef(*new SVGMatrix(initialValue));</span>
 44     }
 45 
<a name="8" id="anc8"></a><span class="line-modified"> 46     template&lt;typename T&gt; static ExceptionOr&lt;Ref&lt;SVGMatrix&gt;&gt; create(ExceptionOr&lt;T&gt;&amp;&amp; initialValue)</span>

 47     {
<a name="9" id="anc9"></a><span class="line-modified"> 48         if (initialValue.hasException())</span>
<span class="line-modified"> 49             return initialValue.releaseException();</span>
<span class="line-modified"> 50         return create(initialValue.releaseReturnValue());</span>
 51     }
 52 
<a name="10" id="anc10"></a><span class="line-modified"> 53     double a()</span>
 54     {
<a name="11" id="anc11"></a><span class="line-modified"> 55         return propertyReference().a();</span>
 56     }
 57 
 58     ExceptionOr&lt;void&gt; setA(double value)
 59     {
 60         if (isReadOnly())
 61             return Exception { NoModificationAllowedError };
 62 
<a name="12" id="anc12"></a><span class="line-modified"> 63         propertyReference().setA(value);</span>
 64         commitChange();
<a name="13" id="anc13"></a><span class="line-removed"> 65 </span>
 66         return { };
 67     }
 68 
<a name="14" id="anc14"></a><span class="line-modified"> 69     double b()</span>
 70     {
<a name="15" id="anc15"></a><span class="line-modified"> 71         return propertyReference().b();</span>
 72     }
 73 
 74     ExceptionOr&lt;void&gt; setB(double value)
 75     {
 76         if (isReadOnly())
 77             return Exception { NoModificationAllowedError };
 78 
<a name="16" id="anc16"></a><span class="line-modified"> 79         propertyReference().setB(value);</span>
 80         commitChange();
<a name="17" id="anc17"></a><span class="line-removed"> 81 </span>
 82         return { };
 83     }
 84 
<a name="18" id="anc18"></a><span class="line-modified"> 85     double c()</span>
 86     {
<a name="19" id="anc19"></a><span class="line-modified"> 87         return propertyReference().c();</span>
 88     }
 89 
 90     ExceptionOr&lt;void&gt; setC(double value)
 91     {
 92         if (isReadOnly())
 93             return Exception { NoModificationAllowedError };
 94 
<a name="20" id="anc20"></a><span class="line-modified"> 95         propertyReference().setC(value);</span>
 96         commitChange();
<a name="21" id="anc21"></a><span class="line-removed"> 97 </span>
 98         return { };
 99     }
100 
<a name="22" id="anc22"></a><span class="line-modified">101     double d()</span>
102     {
<a name="23" id="anc23"></a><span class="line-modified">103         return propertyReference().d();</span>
104     }
105 
106     ExceptionOr&lt;void&gt; setD(double value)
107     {
108         if (isReadOnly())
109             return Exception { NoModificationAllowedError };
110 
<a name="24" id="anc24"></a><span class="line-modified">111         propertyReference().setD(value);</span>
112         commitChange();
<a name="25" id="anc25"></a><span class="line-removed">113 </span>
114         return { };
115     }
116 
<a name="26" id="anc26"></a><span class="line-modified">117     double e()</span>
118     {
<a name="27" id="anc27"></a><span class="line-modified">119         return propertyReference().e();</span>
120     }
121 
122     ExceptionOr&lt;void&gt; setE(double value)
123     {
124         if (isReadOnly())
125             return Exception { NoModificationAllowedError };
126 
<a name="28" id="anc28"></a><span class="line-modified">127         propertyReference().setE(value);</span>
128         commitChange();
<a name="29" id="anc29"></a><span class="line-removed">129 </span>
130         return { };
131     }
132 
<a name="30" id="anc30"></a><span class="line-modified">133     double f()</span>
134     {
<a name="31" id="anc31"></a><span class="line-modified">135         return propertyReference().f();</span>
136     }
137 
138     ExceptionOr&lt;void&gt; setF(double value)
139     {
140         if (isReadOnly())
141             return Exception { NoModificationAllowedError };
142 
<a name="32" id="anc32"></a><span class="line-modified">143         propertyReference().setF(value);</span>
144         commitChange();
<a name="33" id="anc33"></a><span class="line-removed">145 </span>
146         return { };
147     }
148 
<a name="34" id="anc34"></a><span class="line-modified">149     ExceptionOr&lt;Ref&lt;SVGMatrix&gt;&gt; multiply(SVGMatrix&amp; secondMatrix)</span>
<span class="line-removed">150     {</span>
<span class="line-removed">151         if (isReadOnly())</span>
<span class="line-removed">152             return Exception { NoModificationAllowedError };</span>
<span class="line-removed">153 </span>
<span class="line-removed">154         auto result = propertyReference().multiply(secondMatrix.propertyReference());</span>
<span class="line-removed">155         commitChange();</span>
<span class="line-removed">156 </span>
<span class="line-removed">157         return SVGMatrix::create(result);</span>
<span class="line-removed">158     }</span>
<span class="line-removed">159 </span>
<span class="line-removed">160     ExceptionOr&lt;Ref&lt;SVGMatrix&gt;&gt; inverse()</span>
161     {
<a name="35" id="anc35"></a><span class="line-modified">162         if (isReadOnly())</span>
<span class="line-modified">163             return Exception { NoModificationAllowedError };</span>
<span class="line-modified">164 </span>
<span class="line-removed">165         auto result = propertyReference().inverse();</span>
<span class="line-removed">166         if (result.hasException())</span>
<span class="line-removed">167             return result.releaseException();</span>
<span class="line-removed">168 </span>
<span class="line-removed">169         commitChange();</span>
<span class="line-removed">170         return SVGMatrix::create(result.releaseReturnValue());</span>
<span class="line-removed">171     }</span>
<span class="line-removed">172 </span>
<span class="line-removed">173     ExceptionOr&lt;Ref&lt;SVGMatrix&gt;&gt; translate(float x, float y)</span>
<span class="line-removed">174     {</span>
<span class="line-removed">175         if (isReadOnly())</span>
<span class="line-removed">176             return Exception { NoModificationAllowedError };</span>
<span class="line-removed">177 </span>
<span class="line-removed">178         auto result = propertyReference().translate(x, y);</span>
<span class="line-removed">179         commitChange();</span>
<span class="line-removed">180 </span>
<span class="line-removed">181         return SVGMatrix::create(result);</span>
<span class="line-removed">182     }</span>
<span class="line-removed">183 </span>
<span class="line-removed">184     ExceptionOr&lt;Ref&lt;SVGMatrix&gt;&gt; scale(float scaleFactor)</span>
<span class="line-removed">185     {</span>
<span class="line-removed">186         if (isReadOnly())</span>
<span class="line-removed">187             return Exception { NoModificationAllowedError };</span>
<span class="line-removed">188 </span>
<span class="line-removed">189         auto result = propertyReference().scale(scaleFactor);</span>
<span class="line-removed">190         commitChange();</span>
<span class="line-removed">191 </span>
<span class="line-removed">192         return SVGMatrix::create(result);</span>
193     }
194 
<a name="36" id="anc36"></a><span class="line-modified">195     ExceptionOr&lt;Ref&lt;SVGMatrix&gt;&gt; scaleNonUniform(float scaleFactorX, float scaleFactorY)</span>
196     {
<a name="37" id="anc37"></a><span class="line-modified">197         if (isReadOnly())</span>
<span class="line-modified">198             return Exception { NoModificationAllowedError };</span>
<span class="line-modified">199 </span>
<span class="line-modified">200         auto result = propertyReference().scaleNonUniform(scaleFactorX, scaleFactorY);</span>
<span class="line-removed">201         commitChange();</span>
<span class="line-removed">202 </span>
<span class="line-removed">203         return SVGMatrix::create(result);</span>
204     }
205 
<a name="38" id="anc38"></a><span class="line-modified">206     ExceptionOr&lt;Ref&lt;SVGMatrix&gt;&gt; rotate(float angle)</span>
207     {
<a name="39" id="anc39"></a><span class="line-modified">208         if (isReadOnly())</span>
<span class="line-modified">209             return Exception { NoModificationAllowedError };</span>
<span class="line-modified">210 </span>
<span class="line-removed">211         auto result = propertyReference().rotate(angle);</span>
<span class="line-removed">212         commitChange();</span>
<span class="line-removed">213 </span>
<span class="line-removed">214         return SVGMatrix::create(result);</span>
215     }
216 
<a name="40" id="anc40"></a><span class="line-modified">217     ExceptionOr&lt;Ref&lt;SVGMatrix&gt;&gt; rotateFromVector(float x, float y)</span>
218     {
<a name="41" id="anc41"></a><span class="line-modified">219         if (isReadOnly())</span>
<span class="line-modified">220             return Exception { NoModificationAllowedError };</span>
<span class="line-modified">221 </span>
<span class="line-removed">222         auto result = propertyReference().rotateFromVector(x, y);</span>
<span class="line-removed">223         if (result.hasException())</span>
<span class="line-removed">224             return result.releaseException();</span>
<span class="line-removed">225 </span>
<span class="line-removed">226         commitChange();</span>
<span class="line-removed">227         return SVGMatrix::create(result.releaseReturnValue());</span>
228     }
229 
<a name="42" id="anc42"></a><span class="line-modified">230     ExceptionOr&lt;Ref&lt;SVGMatrix&gt;&gt; flipX()</span>
231     {
<a name="43" id="anc43"></a><span class="line-modified">232         if (isReadOnly())</span>
<span class="line-modified">233             return Exception { NoModificationAllowedError };</span>
<span class="line-modified">234 </span>
<span class="line-removed">235         auto result = propertyReference().flipX();</span>
<span class="line-removed">236         commitChange();</span>
<span class="line-removed">237 </span>
<span class="line-removed">238         return SVGMatrix::create(result);</span>
239     }
240 
<a name="44" id="anc44"></a><span class="line-modified">241     ExceptionOr&lt;Ref&lt;SVGMatrix&gt;&gt; flipY()</span>
242     {
<a name="45" id="anc45"></a><span class="line-modified">243         if (isReadOnly())</span>
<span class="line-modified">244             return Exception { NoModificationAllowedError };</span>
<span class="line-modified">245 </span>
<span class="line-removed">246         auto result = propertyReference().flipY();</span>
<span class="line-removed">247         commitChange();</span>
<span class="line-removed">248 </span>
<span class="line-removed">249         return SVGMatrix::create(result);</span>
250     }
251 
<a name="46" id="anc46"></a><span class="line-modified">252     ExceptionOr&lt;Ref&lt;SVGMatrix&gt;&gt; skewX(float angle)</span>
253     {
<a name="47" id="anc47"></a><span class="line-modified">254         if (isReadOnly())</span>
<span class="line-modified">255             return Exception { NoModificationAllowedError };</span>
<span class="line-removed">256 </span>
<span class="line-removed">257         auto result = propertyReference().skewX(angle);</span>
<span class="line-removed">258         commitChange();</span>
259 
<a name="48" id="anc48"></a><span class="line-modified">260         return SVGMatrix::create(result);</span>


261     }
262 
<a name="49" id="anc49"></a><span class="line-modified">263     ExceptionOr&lt;Ref&lt;SVGMatrix&gt;&gt; skewY(float angle)</span>
264     {
<a name="50" id="anc50"></a><span class="line-modified">265         if (isReadOnly())</span>
<span class="line-modified">266             return Exception { NoModificationAllowedError };</span>
<span class="line-modified">267 </span>
<span class="line-removed">268         auto result = propertyReference().skewY(angle);</span>
<span class="line-removed">269         commitChange();</span>
<span class="line-removed">270 </span>
<span class="line-removed">271         return SVGMatrix::create(result);</span>
272     }
273 
<a name="51" id="anc51"></a><span class="line-modified">274 protected:</span>
<span class="line-removed">275     SVGMatrix(SVGAnimatedProperty&amp; animatedProperty, SVGPropertyRole role, SVGMatrixValue&amp; value)</span>
<span class="line-removed">276         : SVGPropertyTearOff&lt;SVGMatrixValue&gt;(&amp;animatedProperty, role, value)</span>
277     {
<a name="52" id="anc52"></a>


278     }
279 
<a name="53" id="anc53"></a><span class="line-modified">280     explicit SVGMatrix(const SVGMatrixValue&amp; initialValue)</span>
<span class="line-removed">281         : SVGPropertyTearOff&lt;SVGMatrixValue&gt;(initialValue)</span>
282     {
<a name="54" id="anc54"></a>


283     }
284 
<a name="55" id="anc55"></a><span class="line-modified">285     explicit SVGMatrix(const SVGMatrixValue* initialValue)</span>
<span class="line-removed">286         : SVGPropertyTearOff&lt;SVGMatrixValue&gt;(initialValue)</span>
287     {
<a name="56" id="anc56"></a>


288     }
289 };
290 
291 } // namespace WebCore
<a name="57" id="anc57"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="57" type="hidden" />
</body>
</html>
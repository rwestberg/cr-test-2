<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames modules/javafx.web/src/main/native/Source/WebCore/page/Page.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>   1 /*
   2  * Copyright (C) 2006-2017 Apple Inc. All rights reserved.
   3  * Copyright (C) 2008 Torch Mobile Inc. All rights reserved. (http://www.torchmobile.com/)
   4  *
   5  * This library is free software; you can redistribute it and/or
   6  * modify it under the terms of the GNU Library General Public
   7  * License as published by the Free Software Foundation; either
   8  * version 2 of the License, or (at your option) any later version.
   9  *
  10  * This library is distributed in the hope that it will be useful,
  11  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  12  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  13  * Library General Public License for more details.
  14  *
  15  * You should have received a copy of the GNU Library General Public License
  16  * along with this library; see the file COPYING.LIB.  If not, write to
  17  * the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
  18  * Boston, MA 02110-1301, USA.
  19  */
  20 
  21 #pragma once
  22 
  23 #include &quot;ActivityState.h&quot;
  24 #include &quot;DisabledAdaptations.h&quot;
  25 #include &quot;Document.h&quot;
  26 #include &quot;FindOptions.h&quot;
  27 #include &quot;FrameLoaderTypes.h&quot;
  28 #include &quot;LayoutMilestone.h&quot;
  29 #include &quot;LayoutRect.h&quot;
  30 #include &quot;LengthBox.h&quot;
  31 #include &quot;MediaProducer.h&quot;
  32 #include &quot;Pagination.h&quot;
  33 #include &quot;RTCController.h&quot;
  34 #include &quot;Region.h&quot;
<a name="1" id="anc1"></a><span class="line-added">  35 #include &quot;RegistrableDomain.h&quot;</span>
<span class="line-added">  36 #include &quot;RenderingUpdateScheduler.h&quot;</span>
  37 #include &quot;ScrollTypes.h&quot;
  38 #include &quot;Supplementable.h&quot;
  39 #include &quot;Timer.h&quot;
  40 #include &quot;UserInterfaceLayoutDirection.h&quot;
  41 #include &quot;ViewportArguments.h&quot;
  42 #include &quot;VisibilityState.h&quot;
  43 #include &quot;WheelEventTestTrigger.h&quot;
  44 #include &lt;memory&gt;
  45 #include &lt;pal/SessionID.h&gt;
<a name="2" id="anc2"></a><span class="line-added">  46 #include &lt;wtf/Assertions.h&gt;</span>
  47 #include &lt;wtf/Forward.h&gt;
  48 #include &lt;wtf/Function.h&gt;
  49 #include &lt;wtf/HashSet.h&gt;
  50 #include &lt;wtf/Noncopyable.h&gt;
  51 #include &lt;wtf/Ref.h&gt;
  52 #include &lt;wtf/UniqueRef.h&gt;
  53 #include &lt;wtf/WeakPtr.h&gt;
  54 #include &lt;wtf/text/WTFString.h&gt;
  55 
  56 #if PLATFORM(COCOA)
  57 #include &lt;wtf/SchedulePair.h&gt;
  58 #endif
  59 
  60 #if ENABLE(APPLICATION_MANIFEST)
  61 #include &quot;ApplicationManifest.h&quot;
  62 #endif
  63 
  64 #if ENABLE(MEDIA_SESSION)
  65 #include &quot;MediaSessionEvents.h&quot;
  66 #endif
  67 
  68 #if ENABLE(WIRELESS_PLAYBACK_TARGET)
  69 #include &quot;MediaPlaybackTargetContext.h&quot;
  70 #endif
  71 
  72 namespace JSC {
  73 class Debugger;
  74 }
  75 
  76 namespace WebCore {
  77 
  78 namespace IDBClient {
  79 class IDBConnectionToServer;
  80 }
  81 
  82 class AlternativeTextClient;
  83 class ApplicationCacheStorage;
  84 class AuthenticatorCoordinator;
  85 class BackForwardController;
  86 class BackForwardClient;
  87 class CacheStorageProvider;
  88 class Chrome;
  89 class ChromeClient;
  90 class Color;
  91 class ContextMenuClient;
  92 class ContextMenuController;
  93 class CookieJar;
  94 class DOMRect;
  95 class DOMRectList;
  96 class DatabaseProvider;
  97 class DiagnosticLoggingClient;
  98 class DragCaretController;
  99 class DragClient;
 100 class DragController;
 101 class EditorClient;
 102 class Element;
 103 class FocusController;
 104 class Frame;
 105 class FrameLoaderClient;
 106 class HistoryItem;
 107 class HTMLMediaElement;
 108 class UserInputBridge;
 109 class InspectorClient;
 110 class InspectorController;
 111 class LibWebRTCProvider;
 112 class LowPowerModeNotifier;
 113 class MediaCanStartListener;
 114 class MediaPlaybackTarget;
 115 class PageConfiguration;
 116 class PageConsoleClient;
 117 class PageDebuggable;
 118 class PageGroup;
 119 class PageOverlayController;
 120 class PaymentCoordinator;
 121 class PerformanceLogging;
 122 class PerformanceLoggingClient;
 123 class PerformanceMonitor;
 124 class PlugInClient;
 125 class PluginData;
 126 class PluginInfoProvider;
 127 class PluginViewBase;
 128 class PointerCaptureController;
 129 class PointerLockController;
 130 class ProgressTracker;
 131 class ProgressTrackerClient;
 132 class Range;
 133 class RenderObject;
 134 class RenderTheme;
 135 class ResourceUsageOverlay;
 136 class VisibleSelection;
 137 class ScrollLatchingState;
 138 class ScrollableArea;
 139 class ScrollingCoordinator;
 140 class ServicesOverlayController;
 141 class Settings;
 142 class SocketProvider;
 143 class StorageNamespace;
 144 class StorageNamespaceProvider;
 145 class UserContentProvider;
 146 class ValidationMessageClient;
 147 class ActivityStateChangeObserver;
 148 class VisitedLinkStore;
 149 class WebGLStateTracker;
<a name="3" id="anc3"></a><span class="line-added"> 150 class SpeechSynthesisClient;</span>
 151 class WheelEventDeltaFilter;
 152 
 153 typedef uint64_t SharedStringHash;
 154 
 155 enum FindDirection {
 156     FindDirectionForward,
 157     FindDirectionBackward
 158 };
 159 
 160 enum class EventThrottlingBehavior {
 161     Responsive,
 162     Unresponsive
 163 };
 164 
 165 enum class CompositingPolicy : uint8_t {
 166     Normal,
 167     Conservative, // Used in low memory situations.
 168 };
 169 
 170 enum class CanWrap : bool;
 171 enum class DidWrap : bool;
 172 enum class RouteSharingPolicy : uint8_t;
 173 enum class ShouldTreatAsContinuingLoad : bool;
 174 
 175 class Page : public Supplementable&lt;Page&gt;, public CanMakeWeakPtr&lt;Page&gt; {
 176     WTF_MAKE_NONCOPYABLE(Page);
 177     WTF_MAKE_FAST_ALLOCATED;
 178     friend class SettingsBase;
 179 
 180 public:
 181     WEBCORE_EXPORT static void updateStyleForAllPagesAfterGlobalChangeInEnvironment();
 182     WEBCORE_EXPORT static void clearPreviousItemFromAllPages(HistoryItem*);
 183 
 184     void updateStyleAfterChangeInEnvironment();
 185 
 186     WEBCORE_EXPORT explicit Page(PageConfiguration&amp;&amp;);
 187     WEBCORE_EXPORT ~Page();
 188 
 189     WEBCORE_EXPORT uint64_t renderTreeSize() const;
 190 
 191     WEBCORE_EXPORT void setNeedsRecalcStyleInAllFrames();
 192 
 193     WEBCORE_EXPORT OptionSet&lt;DisabledAdaptations&gt; disabledAdaptations() const;
 194     WEBCORE_EXPORT ViewportArguments viewportArguments() const;
 195 
<a name="4" id="anc4"></a><span class="line-added"> 196     const Optional&lt;ViewportArguments&gt;&amp; overrideViewportArguments() const { return m_overrideViewportArguments; }</span>
<span class="line-added"> 197     WEBCORE_EXPORT void setOverrideViewportArguments(const Optional&lt;ViewportArguments&gt;&amp;);</span>
<span class="line-added"> 198 </span>
 199     static void refreshPlugins(bool reload);
 200     WEBCORE_EXPORT PluginData&amp; pluginData();
 201     void clearPluginData();
 202 
 203     WEBCORE_EXPORT void setCanStartMedia(bool);
 204     bool canStartMedia() const { return m_canStartMedia; }
 205 
 206     EditorClient&amp; editorClient() { return m_editorClient.get(); }
 207     PlugInClient* plugInClient() const { return m_plugInClient; }
 208 
 209     Frame&amp; mainFrame() { return m_mainFrame.get(); }
 210     const Frame&amp; mainFrame() const { return m_mainFrame.get(); }
 211 
 212     bool openedByDOM() const;
 213     void setOpenedByDOM();
 214 
 215     bool openedByDOMWithOpener() const { return m_openedByDOMWithOpener; }
 216     void setOpenedByDOMWithOpener() { m_openedByDOMWithOpener = true; }
 217 
 218     WEBCORE_EXPORT void goToItem(HistoryItem&amp;, FrameLoadType, ShouldTreatAsContinuingLoad);
 219 
 220     WEBCORE_EXPORT void setGroupName(const String&amp;);
 221     WEBCORE_EXPORT const String&amp; groupName() const;
 222 
 223     PageGroup&amp; group();
 224 
 225     WEBCORE_EXPORT static void forEachPage(const WTF::Function&lt;void(Page&amp;)&gt;&amp;);
 226 
 227     void incrementSubframeCount() { ++m_subframeCount; }
 228     void decrementSubframeCount() { ASSERT(m_subframeCount); --m_subframeCount; }
 229     int subframeCount() const { checkSubframeCountConsistency(); return m_subframeCount; }
 230 
 231     void incrementNestedRunLoopCount();
 232     void decrementNestedRunLoopCount();
 233     bool insideNestedRunLoop() const { return m_nestedRunLoopCount &gt; 0; }
 234     WEBCORE_EXPORT void whenUnnested(WTF::Function&lt;void()&gt;&amp;&amp;);
 235 
 236 #if ENABLE(REMOTE_INSPECTOR)
 237     WEBCORE_EXPORT bool remoteInspectionAllowed() const;
 238     WEBCORE_EXPORT void setRemoteInspectionAllowed(bool);
 239     WEBCORE_EXPORT String remoteInspectionNameOverride() const;
 240     WEBCORE_EXPORT void setRemoteInspectionNameOverride(const String&amp;);
 241     void remoteInspectorInformationDidChange() const;
 242 #endif
 243 
 244     Chrome&amp; chrome() const { return *m_chrome; }
 245     DragCaretController&amp; dragCaretController() const { return *m_dragCaretController; }
 246 #if ENABLE(DRAG_SUPPORT)
 247     DragController&amp; dragController() const { return *m_dragController; }
 248 #endif
 249     FocusController&amp; focusController() const { return *m_focusController; }
 250 #if ENABLE(CONTEXT_MENUS)
 251     ContextMenuController&amp; contextMenuController() const { return *m_contextMenuController; }
 252 #endif
 253     UserInputBridge&amp; userInputBridge() const { return *m_userInputBridge; }
 254     InspectorController&amp; inspectorController() const { return *m_inspectorController; }
 255 #if ENABLE(POINTER_EVENTS)
 256     PointerCaptureController&amp; pointerCaptureController() const { return *m_pointerCaptureController; }
 257 #endif
 258 #if ENABLE(POINTER_LOCK)
 259     PointerLockController&amp; pointerLockController() const { return *m_pointerLockController; }
 260 #endif
 261     LibWebRTCProvider&amp; libWebRTCProvider() { return m_libWebRTCProvider.get(); }
 262     RTCController&amp; rtcController() { return m_rtcController; }
 263     WEBCORE_EXPORT void disableICECandidateFiltering();
 264     WEBCORE_EXPORT void enableICECandidateFiltering();
 265     bool shouldEnableICECandidateFilteringByDefault() const { return m_shouldEnableICECandidateFilteringByDefault; }
 266 
 267     void didChangeMainDocument();
 268 
 269     PerformanceMonitor* performanceMonitor() { return m_performanceMonitor.get(); }
 270 
<a name="5" id="anc5"></a><span class="line-added"> 271     RenderingUpdateScheduler&amp; renderingUpdateScheduler();</span>
<span class="line-added"> 272 </span>
 273     ValidationMessageClient* validationMessageClient() const { return m_validationMessageClient.get(); }
 274     void updateValidationBubbleStateIfNeeded();
 275 
 276     WEBCORE_EXPORT ScrollingCoordinator* scrollingCoordinator();
 277 
 278     WEBCORE_EXPORT String scrollingStateTreeAsText();
 279     WEBCORE_EXPORT String synchronousScrollingReasonsAsText();
 280     WEBCORE_EXPORT Ref&lt;DOMRectList&gt; nonFastScrollableRects();
 281 
 282     WEBCORE_EXPORT Ref&lt;DOMRectList&gt; touchEventRectsForEvent(const String&amp; eventName);
 283     WEBCORE_EXPORT Ref&lt;DOMRectList&gt; passiveTouchEventListenerRects();
 284 
 285     Settings&amp; settings() const { return *m_settings; }
 286     ProgressTracker&amp; progress() const { return *m_progress; }
 287     BackForwardController&amp; backForward() const { return *m_backForwardController; }
 288 
 289     Seconds domTimerAlignmentInterval() const { return m_domTimerAlignmentInterval; }
 290 
 291     void setTabKeyCyclesThroughElements(bool b) { m_tabKeyCyclesThroughElements = b; }
 292     bool tabKeyCyclesThroughElements() const { return m_tabKeyCyclesThroughElements; }
 293 
 294     WEBCORE_EXPORT bool findString(const String&amp;, FindOptions, DidWrap* = nullptr);
 295     WEBCORE_EXPORT uint32_t replaceRangesWithText(const Vector&lt;Ref&lt;Range&gt;&gt;&amp; rangesToReplace, const String&amp; replacementText, bool selectionOnly);
 296     WEBCORE_EXPORT uint32_t replaceSelectionWithText(const String&amp; replacementText);
 297 
 298     WEBCORE_EXPORT RefPtr&lt;Range&gt; rangeOfString(const String&amp;, Range*, FindOptions);
 299 
 300     WEBCORE_EXPORT unsigned countFindMatches(const String&amp;, FindOptions, unsigned maxMatchCount);
 301     WEBCORE_EXPORT unsigned markAllMatchesForText(const String&amp;, FindOptions, bool shouldHighlight, unsigned maxMatchCount);
 302 
 303     WEBCORE_EXPORT void unmarkAllTextMatches();
 304 
<a name="6" id="anc6"></a><span class="line-added"> 305     WEBCORE_EXPORT void dispatchBeforePrintEvent();</span>
<span class="line-added"> 306     WEBCORE_EXPORT void dispatchAfterPrintEvent();</span>
<span class="line-added"> 307 </span>
 308     // find all the Ranges for the matching text.
 309     // Upon return, indexForSelection will be one of the following:
 310     // 0 if there is no user selection
 311     // the index of the first range after the user selection
 312     // NoMatchAfterUserSelection if there is no matching text after the user selection.
 313     enum { NoMatchAfterUserSelection = -1 };
 314     WEBCORE_EXPORT void findStringMatchingRanges(const String&amp;, FindOptions, int maxCount, Vector&lt;RefPtr&lt;Range&gt;&gt;&amp;, int&amp; indexForSelection);
 315 #if PLATFORM(COCOA)
 316     void platformInitialize();
 317     WEBCORE_EXPORT void addSchedulePair(Ref&lt;SchedulePair&gt;&amp;&amp;);
 318     WEBCORE_EXPORT void removeSchedulePair(Ref&lt;SchedulePair&gt;&amp;&amp;);
 319     SchedulePairHashSet* scheduledRunLoopPairs() { return m_scheduledRunLoopPairs.get(); }
 320 
 321     std::unique_ptr&lt;SchedulePairHashSet&gt; m_scheduledRunLoopPairs;
 322 #endif
 323 
 324     WEBCORE_EXPORT const VisibleSelection&amp; selection() const;
 325 
 326     WEBCORE_EXPORT void setDefersLoading(bool);
 327     bool defersLoading() const { return m_defersLoading; }
 328 
 329     WEBCORE_EXPORT void clearUndoRedoOperations();
 330 
 331     WEBCORE_EXPORT bool inLowQualityImageInterpolationMode() const;
 332     WEBCORE_EXPORT void setInLowQualityImageInterpolationMode(bool = true);
 333 
 334     float mediaVolume() const { return m_mediaVolume; }
 335     WEBCORE_EXPORT void setMediaVolume(float);
 336 
 337     WEBCORE_EXPORT void setPageScaleFactor(float scale, const IntPoint&amp; origin, bool inStableState = true);
 338     float pageScaleFactor() const { return m_pageScaleFactor; }
 339 
 340     UserInterfaceLayoutDirection userInterfaceLayoutDirection() const { return m_userInterfaceLayoutDirection; }
 341     WEBCORE_EXPORT void setUserInterfaceLayoutDirection(UserInterfaceLayoutDirection);
 342 
 343     WEBCORE_EXPORT void updateMediaElementRateChangeRestrictions();
 344 
 345     void didStartProvisionalLoad();
 346     void didFinishLoad(); // Called when the load has been committed in the main frame.
 347 
<a name="7" id="anc7"></a>

 348     // The view scale factor is multiplied into the page scale factor by all
 349     // callers of setPageScaleFactor.
 350     WEBCORE_EXPORT void setViewScaleFactor(float);
 351     float viewScaleFactor() const { return m_viewScaleFactor; }
 352 
 353     WEBCORE_EXPORT void setZoomedOutPageScaleFactor(float);
 354     float zoomedOutPageScaleFactor() const { return m_zoomedOutPageScaleFactor; }
 355 
 356     float deviceScaleFactor() const { return m_deviceScaleFactor; }
 357     WEBCORE_EXPORT void setDeviceScaleFactor(float);
 358 
<a name="8" id="anc8"></a><span class="line-added"> 359     float initialScale() const { return m_initialScale; }</span>
<span class="line-added"> 360     WEBCORE_EXPORT void setInitialScale(float);</span>
<span class="line-added"> 361 </span>
 362     float topContentInset() const { return m_topContentInset; }
 363     WEBCORE_EXPORT void setTopContentInset(float);
 364 
 365     const FloatBoxExtent&amp; obscuredInsets() const { return m_obscuredInsets; }
 366     void setObscuredInsets(const FloatBoxExtent&amp; obscuredInsets) { m_obscuredInsets = obscuredInsets; }
 367 
 368     const FloatBoxExtent&amp; contentInsets() const { return m_contentInsets; }
 369     void setContentInsets(const FloatBoxExtent&amp; insets) { m_contentInsets = insets; }
 370 
 371     const FloatBoxExtent&amp; unobscuredSafeAreaInsets() const { return m_unobscuredSafeAreaInsets; }
 372     WEBCORE_EXPORT void setUnobscuredSafeAreaInsets(const FloatBoxExtent&amp;);
 373 
 374 #if PLATFORM(IOS_FAMILY)
 375     bool enclosedInScrollableAncestorView() const { return m_enclosedInScrollableAncestorView; }
 376     void setEnclosedInScrollableAncestorView(bool f) { m_enclosedInScrollableAncestorView = f; }
 377 #endif
 378 
 379     bool useSystemAppearance() const { return m_useSystemAppearance; }
 380     WEBCORE_EXPORT void setUseSystemAppearance(bool);
 381 
 382     WEBCORE_EXPORT bool useDarkAppearance() const;
<a name="9" id="anc9"></a><span class="line-modified"> 383     bool useElevatedUserInterfaceLevel() const { return m_useElevatedUserInterfaceLevel; }</span>
<span class="line-added"> 384     WEBCORE_EXPORT void effectiveAppearanceDidChange(bool useDarkAppearance, bool useElevatedUserInterfaceLevel);</span>
 385     bool defaultUseDarkAppearance() const { return m_useDarkAppearance; }
 386     void setUseDarkAppearanceOverride(Optional&lt;bool&gt;);
 387 
 388 #if ENABLE(TEXT_AUTOSIZING)
 389     float textAutosizingWidth() const { return m_textAutosizingWidth; }
 390     void setTextAutosizingWidth(float textAutosizingWidth) { m_textAutosizingWidth = textAutosizingWidth; }
<a name="10" id="anc10"></a><span class="line-added"> 391     WEBCORE_EXPORT void recomputeTextAutoSizingInAllFrames();</span>
 392 #endif
 393 
 394     const FloatBoxExtent&amp; fullscreenInsets() const { return m_fullscreenInsets; }
 395     WEBCORE_EXPORT void setFullscreenInsets(const FloatBoxExtent&amp;);
 396 
 397     const Seconds fullscreenAutoHideDuration() const { return m_fullscreenAutoHideDuration; }
 398     WEBCORE_EXPORT void setFullscreenAutoHideDuration(Seconds);
 399     WEBCORE_EXPORT void setFullscreenControlsHidden(bool);
 400 
 401     bool shouldSuppressScrollbarAnimations() const { return m_suppressScrollbarAnimations; }
 402     WEBCORE_EXPORT void setShouldSuppressScrollbarAnimations(bool suppressAnimations);
 403     void lockAllOverlayScrollbarsToHidden(bool lockOverlayScrollbars);
 404 
 405     WEBCORE_EXPORT void setVerticalScrollElasticity(ScrollElasticity);
 406     ScrollElasticity verticalScrollElasticity() const { return static_cast&lt;ScrollElasticity&gt;(m_verticalScrollElasticity); }
 407 
 408     WEBCORE_EXPORT void setHorizontalScrollElasticity(ScrollElasticity);
 409     ScrollElasticity horizontalScrollElasticity() const { return static_cast&lt;ScrollElasticity&gt;(m_horizontalScrollElasticity); }
 410 
 411     WEBCORE_EXPORT void accessibilitySettingsDidChange();
 412     WEBCORE_EXPORT void appearanceDidChange();
 413 
 414     // Page and FrameView both store a Pagination value. Page::pagination() is set only by API,
 415     // and FrameView::pagination() is set only by CSS. Page::pagination() will affect all
 416     // FrameViews in the page cache, but FrameView::pagination() only affects the current
 417     // FrameView.
 418     const Pagination&amp; pagination() const { return m_pagination; }
 419     WEBCORE_EXPORT void setPagination(const Pagination&amp;);
 420     bool paginationLineGridEnabled() const { return m_paginationLineGridEnabled; }
 421     WEBCORE_EXPORT void setPaginationLineGridEnabled(bool flag);
 422 
 423     WEBCORE_EXPORT unsigned pageCount() const;
 424 
 425     WEBCORE_EXPORT DiagnosticLoggingClient&amp; diagnosticLoggingClient() const;
 426 
 427     PerformanceLoggingClient* performanceLoggingClient() const { return m_performanceLoggingClient.get(); }
 428 
 429     WheelEventDeltaFilter* wheelEventDeltaFilter() { return m_recentWheelEventDeltaFilter.get(); }
 430     PageOverlayController&amp; pageOverlayController() { return *m_pageOverlayController; }
 431 
<a name="11" id="anc11"></a>

 432 #if PLATFORM(MAC)
 433 #if ENABLE(SERVICE_CONTROLS) || ENABLE(TELEPHONE_NUMBER_DETECTION)
 434     ServicesOverlayController&amp; servicesOverlayController() { return *m_servicesOverlayController; }
 435 #endif // ENABLE(SERVICE_CONTROLS) || ENABLE(TELEPHONE_NUMBER_DETECTION)
 436 
 437     ScrollLatchingState* latchingState();
 438     void pushNewLatchingState();
 439     void popLatchingState();
 440     void resetLatchingState();
 441     void removeLatchingStateForTarget(Element&amp;);
 442 #endif // PLATFORM(MAC)
 443 
 444 #if ENABLE(APPLE_PAY)
 445     PaymentCoordinator&amp; paymentCoordinator() const { return *m_paymentCoordinator; }
 446     WEBCORE_EXPORT void setPaymentCoordinator(std::unique_ptr&lt;PaymentCoordinator&gt;&amp;&amp;);
 447 #endif
 448 
 449 #if ENABLE(WEB_AUTHN)
 450     AuthenticatorCoordinator&amp; authenticatorCoordinator() { return m_authenticatorCoordinator.get(); }
 451 #endif
 452 
 453 #if ENABLE(APPLICATION_MANIFEST)
 454     const Optional&lt;ApplicationManifest&gt;&amp; applicationManifest() const { return m_applicationManifest; }
 455 #endif
 456 
 457     // Notifications when the Page starts and stops being presented via a native window.
 458     WEBCORE_EXPORT void setActivityState(OptionSet&lt;ActivityState::Flag&gt;);
 459     OptionSet&lt;ActivityState::Flag&gt; activityState() const { return m_activityState; }
 460 
 461     bool isWindowActive() const;
 462     bool isVisibleAndActive() const;
 463     WEBCORE_EXPORT void setIsVisible(bool);
 464     WEBCORE_EXPORT void setIsPrerender();
 465     bool isVisible() const { return m_activityState.contains(ActivityState::IsVisible); }
 466 
 467     // Notification that this Page was moved into or out of a native window.
 468     WEBCORE_EXPORT void setIsInWindow(bool);
 469     bool isInWindow() const { return m_activityState.contains(ActivityState::IsInWindow); }
 470 
 471     void setIsClosing() { m_isClosing = true; }
 472     bool isClosing() const { return m_isClosing; }
 473 
 474     void setIsRestoringCachedPage(bool value) { m_isRestoringCachedPage = value; }
 475     bool isRestoringCachedPage() const { return m_isRestoringCachedPage; }
 476 
 477     WEBCORE_EXPORT void addActivityStateChangeObserver(ActivityStateChangeObserver&amp;);
 478     WEBCORE_EXPORT void removeActivityStateChangeObserver(ActivityStateChangeObserver&amp;);
 479 
<a name="12" id="anc12"></a><span class="line-modified"> 480     WEBCORE_EXPORT void layoutIfNeeded();</span>
<span class="line-modified"> 481     WEBCORE_EXPORT void updateRendering();</span>



 482 
 483     WEBCORE_EXPORT void suspendScriptedAnimations();
 484     WEBCORE_EXPORT void resumeScriptedAnimations();
 485     bool scriptedAnimationsSuspended() const { return m_scriptedAnimationsSuspended; }
 486 
 487     void userStyleSheetLocationChanged();
 488     const String&amp; userStyleSheet() const;
 489 
 490     WEBCORE_EXPORT void userAgentChanged();
 491 
 492     void dnsPrefetchingStateChanged();
 493     void storageBlockingStateChanged();
 494 
 495 #if ENABLE(RESOURCE_USAGE)
 496     void setResourceUsageOverlayVisible(bool);
 497 #endif
 498 
 499     void setDebugger(JSC::Debugger*);
 500     JSC::Debugger* debugger() const { return m_debugger; }
 501 
 502     WEBCORE_EXPORT void invalidateStylesForAllLinks();
 503     WEBCORE_EXPORT void invalidateStylesForLink(SharedStringHash);
 504 
 505     void invalidateInjectedStyleSheetCacheInAllFrames();
 506 
 507     StorageNamespace* sessionStorage(bool optionalCreate = true);
 508     void setSessionStorage(RefPtr&lt;StorageNamespace&gt;&amp;&amp;);
 509 
<a name="13" id="anc13"></a>


 510     bool hasCustomHTMLTokenizerTimeDelay() const;
 511     double customHTMLTokenizerTimeDelay() const;
 512 
 513     WEBCORE_EXPORT void setMemoryCacheClientCallsEnabled(bool);
 514     bool areMemoryCacheClientCallsEnabled() const { return m_areMemoryCacheClientCallsEnabled; }
 515 
 516     // Don&#39;t allow more than a certain number of frames in a page.
 517     // This seems like a reasonable upper bound, and otherwise mutually
 518     // recursive frameset pages can quickly bring the program to its knees
 519     // with exponential growth in the number of frames.
 520     static const int maxNumberOfFrames = 1000;
 521 
 522     void setEditable(bool isEditable) { m_isEditable = isEditable; }
 523     bool isEditable() { return m_isEditable; }
 524 
 525     WEBCORE_EXPORT VisibilityState visibilityState() const;
 526     WEBCORE_EXPORT void resumeAnimatingImages();
 527 
<a name="14" id="anc14"></a><span class="line-added"> 528     void didFinishLoadingImageForElement(HTMLImageElement&amp;);</span>
<span class="line-added"> 529 </span>
 530     WEBCORE_EXPORT void addLayoutMilestones(OptionSet&lt;LayoutMilestone&gt;);
 531     WEBCORE_EXPORT void removeLayoutMilestones(OptionSet&lt;LayoutMilestone&gt;);
 532     OptionSet&lt;LayoutMilestone&gt; requestedLayoutMilestones() const { return m_requestedLayoutMilestones; }
 533 
 534     WEBCORE_EXPORT void setHeaderHeight(int);
 535     WEBCORE_EXPORT void setFooterHeight(int);
 536 
 537     int headerHeight() const { return m_headerHeight; }
 538     int footerHeight() const { return m_footerHeight; }
 539 
 540     WEBCORE_EXPORT Color pageExtendedBackgroundColor() const;
 541 
 542     bool isCountingRelevantRepaintedObjects() const;
 543     void setIsCountingRelevantRepaintedObjects(bool isCounting) { m_isCountingRelevantRepaintedObjects = isCounting; }
 544     void startCountingRelevantRepaintedObjects();
 545     void resetRelevantPaintedObjectCounter();
 546     void addRelevantRepaintedObject(RenderObject*, const LayoutRect&amp; objectPaintRect);
 547     void addRelevantUnpaintedObject(RenderObject*, const LayoutRect&amp; objectPaintRect);
 548 
 549     WEBCORE_EXPORT void suspendActiveDOMObjectsAndAnimations();
 550     WEBCORE_EXPORT void resumeActiveDOMObjectsAndAnimations();
 551     void suspendDeviceMotionAndOrientationUpdates();
 552     void resumeDeviceMotionAndOrientationUpdates();
 553 
 554 #ifndef NDEBUG
 555     void setIsPainting(bool painting) { m_isPainting = painting; }
 556     bool isPainting() const { return m_isPainting; }
 557 #endif
 558 
 559     AlternativeTextClient* alternativeTextClient() const { return m_alternativeTextClient; }
 560 
 561     bool hasSeenPlugin(const String&amp; serviceType) const;
 562     WEBCORE_EXPORT bool hasSeenAnyPlugin() const;
 563     void sawPlugin(const String&amp; serviceType);
 564     void resetSeenPlugins();
 565 
 566     bool hasSeenMediaEngine(const String&amp; engineName) const;
 567     bool hasSeenAnyMediaEngine() const;
 568     void sawMediaEngine(const String&amp; engineName);
 569     void resetSeenMediaEngines();
 570 
 571     PageConsoleClient&amp; console() { return *m_consoleClient; }
 572 
 573 #if ENABLE(REMOTE_INSPECTOR)
 574     PageDebuggable&amp; inspectorDebuggable() const { return *m_inspectorDebuggable.get(); }
 575 #endif
 576 
 577     void hiddenPageCSSAnimationSuspensionStateChanged();
 578 
 579 #if ENABLE(VIDEO_TRACK)
 580     void captionPreferencesChanged();
 581 #endif
 582 
 583     void forbidPrompts();
 584     void allowPrompts();
 585     bool arePromptsAllowed();
 586 
 587     void mainFrameLoadStarted(const URL&amp;, FrameLoadType);
 588 
 589     void setLastSpatialNavigationCandidateCount(unsigned count) { m_lastSpatialNavigationCandidatesCount = count; }
 590     unsigned lastSpatialNavigationCandidateCount() const { return m_lastSpatialNavigationCandidatesCount; }
 591 
 592     ApplicationCacheStorage&amp; applicationCacheStorage() { return m_applicationCacheStorage; }
 593     DatabaseProvider&amp; databaseProvider() { return m_databaseProvider; }
 594     CacheStorageProvider&amp; cacheStorageProvider() { return m_cacheStorageProvider; }
 595     SocketProvider&amp; socketProvider() { return m_socketProvider; }
 596     CookieJar&amp; cookieJar() { return m_cookieJar.get(); }
 597 
 598     StorageNamespaceProvider&amp; storageNamespaceProvider() { return m_storageNamespaceProvider.get(); }
<a name="15" id="anc15"></a>
 599 
 600     PluginInfoProvider&amp; pluginInfoProvider();
 601 
 602     WEBCORE_EXPORT UserContentProvider&amp; userContentProvider();
 603     WEBCORE_EXPORT void setUserContentProvider(Ref&lt;UserContentProvider&gt;&amp;&amp;);
 604 
 605     VisitedLinkStore&amp; visitedLinkStore();
 606     WEBCORE_EXPORT void setVisitedLinkStore(Ref&lt;VisitedLinkStore&gt;&amp;&amp;);
 607 
 608     WEBCORE_EXPORT PAL::SessionID sessionID() const;
 609     WEBCORE_EXPORT void setSessionID(PAL::SessionID);
 610     WEBCORE_EXPORT void enableLegacyPrivateBrowsing(bool privateBrowsingEnabled);
 611     bool usesEphemeralSession() const { return m_sessionID.isEphemeral(); }
 612 
 613     MediaProducer::MediaStateFlags mediaState() const { return m_mediaState; }
 614     void updateIsPlayingMedia(uint64_t);
 615     MediaProducer::MutedStateFlags mutedState() const { return m_mutedState; }
 616     bool isAudioMuted() const { return m_mutedState &amp; MediaProducer::AudioIsMuted; }
<a name="16" id="anc16"></a><span class="line-modified"> 617     bool isMediaCaptureMuted() const { return m_mutedState &amp; MediaProducer::MediaStreamCaptureIsMuted; };</span>
 618     void schedulePlaybackControlsManagerUpdate();
 619     WEBCORE_EXPORT void setMuted(MediaProducer::MutedStateFlags);
 620     WEBCORE_EXPORT void stopMediaCapture();
 621 
 622     WEBCORE_EXPORT void stopAllMediaPlayback();
 623     WEBCORE_EXPORT void suspendAllMediaPlayback();
 624     WEBCORE_EXPORT void resumeAllMediaPlayback();
<a name="17" id="anc17"></a><span class="line-modified"> 625     bool mediaPlaybackIsSuspended() const { return m_mediaPlaybackIsSuspended; }</span>
<span class="line-added"> 626     WEBCORE_EXPORT void suspendAllMediaBuffering();</span>
<span class="line-added"> 627     WEBCORE_EXPORT void resumeAllMediaBuffering();</span>
<span class="line-added"> 628     bool mediaBufferingIsSuspended() const { return m_mediaBufferingIsSuspended; }</span>
 629 
 630 #if ENABLE(MEDIA_SESSION)
 631     WEBCORE_EXPORT void handleMediaEvent(MediaEventType);
 632     WEBCORE_EXPORT void setVolumeOfMediaElement(double, uint64_t);
 633 #endif
 634 
 635 #if ENABLE(WIRELESS_PLAYBACK_TARGET)
 636     void addPlaybackTargetPickerClient(uint64_t);
 637     void removePlaybackTargetPickerClient(uint64_t);
 638     void showPlaybackTargetPicker(uint64_t, const IntPoint&amp;, bool, RouteSharingPolicy, const String&amp;);
 639     void playbackTargetPickerClientStateDidChange(uint64_t, MediaProducer::MediaStateFlags);
 640     WEBCORE_EXPORT void setMockMediaPlaybackTargetPickerEnabled(bool);
 641     WEBCORE_EXPORT void setMockMediaPlaybackTargetPickerState(const String&amp;, MediaPlaybackTargetContext::State);
 642 
 643     WEBCORE_EXPORT void setPlaybackTarget(uint64_t, Ref&lt;MediaPlaybackTarget&gt;&amp;&amp;);
 644     WEBCORE_EXPORT void playbackTargetAvailabilityDidChange(uint64_t, bool);
 645     WEBCORE_EXPORT void setShouldPlayToPlaybackTarget(uint64_t, bool);
 646 #endif
 647 
 648     RefPtr&lt;WheelEventTestTrigger&gt; testTrigger() const { return m_testTrigger; }
 649     WEBCORE_EXPORT WheelEventTestTrigger&amp; ensureTestTrigger();
 650     void clearTrigger() { m_testTrigger = nullptr; }
 651     bool expectsWheelEventTriggers() const { return !!m_testTrigger; }
 652 
<a name="18" id="anc18"></a><span class="line-added"> 653     void setIsForSanitizingWebContent() { m_isForSanitizingWebContent = true; }</span>
<span class="line-added"> 654     bool isForSanitizingWebContent() const { return m_isForSanitizingWebContent; }</span>
<span class="line-added"> 655 </span>
 656 #if ENABLE(VIDEO)
 657     bool allowsMediaDocumentInlinePlayback() const { return m_allowsMediaDocumentInlinePlayback; }
 658     WEBCORE_EXPORT void setAllowsMediaDocumentInlinePlayback(bool);
 659 #endif
 660 
 661     bool allowsPlaybackControlsForAutoplayingAudio() const { return m_allowsPlaybackControlsForAutoplayingAudio; }
 662     void setAllowsPlaybackControlsForAutoplayingAudio(bool allowsPlaybackControlsForAutoplayingAudio) { m_allowsPlaybackControlsForAutoplayingAudio = allowsPlaybackControlsForAutoplayingAudio; }
 663 
 664 #if ENABLE(INDEXED_DATABASE)
 665     IDBClient::IDBConnectionToServer&amp; idbConnection();
 666     WEBCORE_EXPORT IDBClient::IDBConnectionToServer* optionalIDBConnection();
 667     WEBCORE_EXPORT void clearIDBConnection();
 668 #endif
 669 
 670     void setShowAllPlugins(bool showAll) { m_showAllPlugins = showAll; }
 671     bool showAllPlugins() const;
 672 
 673     WEBCORE_EXPORT void setDOMTimerAlignmentIntervalIncreaseLimit(Seconds);
 674 
 675     bool isControlledByAutomation() const { return m_controlledByAutomation; }
 676     void setControlledByAutomation(bool controlled) { m_controlledByAutomation = controlled; }
 677 
 678     WEBCORE_EXPORT bool isAlwaysOnLoggingAllowed() const;
 679 
 680     String captionUserPreferencesStyleSheet();
 681     void setCaptionUserPreferencesStyleSheet(const String&amp;);
 682 
 683     bool isResourceCachingDisabled() const { return m_resourceCachingDisabled || m_resourceCachingDisabledOverride; }
 684     void setResourceCachingDisabled(bool disabled) { m_resourceCachingDisabled = disabled; }
 685 
 686     // Web Inspector can override whatever value is set via WebKit SPI, but only while it is open.
 687     void setResourceCachingDisabledOverride(bool disabled) { m_resourceCachingDisabledOverride = disabled; }
 688 
 689     Optional&lt;EventThrottlingBehavior&gt; eventThrottlingBehaviorOverride() const { return m_eventThrottlingBehaviorOverride; }
 690     void setEventThrottlingBehaviorOverride(Optional&lt;EventThrottlingBehavior&gt; throttling) { m_eventThrottlingBehaviorOverride = throttling; }
 691 
 692     Optional&lt;CompositingPolicy&gt; compositingPolicyOverride() const { return m_compositingPolicyOverride; }
 693     void setCompositingPolicyOverride(Optional&lt;CompositingPolicy&gt; policy) { m_compositingPolicyOverride = policy; }
 694 
<a name="19" id="anc19"></a><span class="line-added"> 695 #if ENABLE(WEBGL)</span>
 696     WebGLStateTracker* webGLStateTracker() const { return m_webGLStateTracker.get(); }
<a name="20" id="anc20"></a><span class="line-added"> 697 #endif</span>
<span class="line-added"> 698 </span>
<span class="line-added"> 699 #if ENABLE(SPEECH_SYNTHESIS)</span>
<span class="line-added"> 700     SpeechSynthesisClient* speechSynthesisClient() const { return m_speechSynthesisClient.get(); }</span>
<span class="line-added"> 701 #endif</span>
 702 
 703     bool isOnlyNonUtilityPage() const;
 704     bool isUtilityPage() const { return m_isUtilityPage; }
 705 
 706 #if ENABLE(DATA_INTERACTION)
 707     WEBCORE_EXPORT bool hasSelectionAtPosition(const FloatPoint&amp;) const;
 708 #endif
 709 
 710     bool isLowPowerModeEnabled() const;
 711     WEBCORE_EXPORT void setLowPowerModeEnabledOverrideForTesting(Optional&lt;bool&gt;);
 712 
 713     WEBCORE_EXPORT void applicationWillResignActive();
 714     WEBCORE_EXPORT void applicationDidEnterBackground();
 715     WEBCORE_EXPORT void applicationWillEnterForeground();
 716     WEBCORE_EXPORT void applicationDidBecomeActive();
 717 
 718     PerformanceLogging&amp; performanceLogging() const { return *m_performanceLogging; }
 719 
<a name="21" id="anc21"></a><span class="line-added"> 720     void configureLoggingChannel(const String&amp;, WTFLogChannelState, WTFLogLevel);</span>
<span class="line-added"> 721 </span>
 722 private:
 723     struct Navigation {
<a name="22" id="anc22"></a><span class="line-modified"> 724         RegistrableDomain domain;</span>
 725         FrameLoadType type;
 726     };
 727     void logNavigation(const Navigation&amp;);
 728 
 729     WEBCORE_EXPORT void initGroup();
 730 
 731     void setIsInWindowInternal(bool);
 732     void setIsVisibleInternal(bool);
 733     void setIsVisuallyIdleInternal(bool);
 734 
 735 #if ASSERT_DISABLED
 736     void checkSubframeCountConsistency() const { }
 737 #else
 738     void checkSubframeCountConsistency() const;
 739 #endif
 740 
 741     enum ShouldHighlightMatches { DoNotHighlightMatches, HighlightMatches };
 742     enum ShouldMarkMatches { DoNotMarkMatches, MarkMatches };
 743 
 744     unsigned findMatchesForText(const String&amp;, FindOptions, unsigned maxMatchCount, ShouldHighlightMatches, ShouldMarkMatches);
 745 
 746     Optional&lt;std::pair&lt;MediaCanStartListener&amp;, Document&amp;&gt;&gt; takeAnyMediaCanStartListener();
 747 
 748 #if ENABLE(VIDEO)
 749     void playbackControlsManagerUpdateTimerFired();
 750 #endif
 751 
 752     Vector&lt;Ref&lt;PluginViewBase&gt;&gt; pluginViews();
 753 
 754     void handleLowModePowerChange(bool);
 755 
 756     void forEachDocument(const WTF::Function&lt;void(Document&amp;)&gt;&amp;);
 757 
 758     enum class TimerThrottlingState { Disabled, Enabled, EnabledIncreasing };
 759     void hiddenPageDOMTimerThrottlingStateChanged();
 760     void setTimerThrottlingState(TimerThrottlingState);
 761     void updateTimerThrottlingState();
 762     void updateDOMTimerAlignmentInterval();
 763     void domTimerAlignmentIntervalIncreaseTimerFired();
 764 
 765     const std::unique_ptr&lt;Chrome&gt; m_chrome;
 766     const std::unique_ptr&lt;DragCaretController&gt; m_dragCaretController;
 767 
 768 #if ENABLE(DRAG_SUPPORT)
 769     const std::unique_ptr&lt;DragController&gt; m_dragController;
 770 #endif
 771     const std::unique_ptr&lt;FocusController&gt; m_focusController;
 772 #if ENABLE(CONTEXT_MENUS)
 773     const std::unique_ptr&lt;ContextMenuController&gt; m_contextMenuController;
 774 #endif
 775     const std::unique_ptr&lt;UserInputBridge&gt; m_userInputBridge;
 776     const std::unique_ptr&lt;InspectorController&gt; m_inspectorController;
 777 #if ENABLE(POINTER_EVENTS)
 778     const std::unique_ptr&lt;PointerCaptureController&gt; m_pointerCaptureController;
 779 #endif
 780 #if ENABLE(POINTER_LOCK)
 781     const std::unique_ptr&lt;PointerLockController&gt; m_pointerLockController;
 782 #endif
 783     RefPtr&lt;ScrollingCoordinator&gt; m_scrollingCoordinator;
 784 
 785     const RefPtr&lt;Settings&gt; m_settings;
 786     const std::unique_ptr&lt;ProgressTracker&gt; m_progress;
 787 
 788     const std::unique_ptr&lt;BackForwardController&gt; m_backForwardController;
 789     Ref&lt;Frame&gt; m_mainFrame;
 790 
 791     RefPtr&lt;PluginData&gt; m_pluginData;
 792 
 793     UniqueRef&lt;EditorClient&gt; m_editorClient;
 794     PlugInClient* m_plugInClient;
 795     std::unique_ptr&lt;ValidationMessageClient&gt; m_validationMessageClient;
 796     std::unique_ptr&lt;DiagnosticLoggingClient&gt; m_diagnosticLoggingClient;
 797     std::unique_ptr&lt;PerformanceLoggingClient&gt; m_performanceLoggingClient;
 798 
<a name="23" id="anc23"></a><span class="line-added"> 799 #if ENABLE(WEBGL)</span>
 800     std::unique_ptr&lt;WebGLStateTracker&gt; m_webGLStateTracker;
<a name="24" id="anc24"></a><span class="line-added"> 801 #endif</span>
<span class="line-added"> 802 </span>
<span class="line-added"> 803 #if ENABLE(SPEECH_SYNTHESIS)</span>
<span class="line-added"> 804     std::unique_ptr&lt;SpeechSynthesisClient&gt; m_speechSynthesisClient;</span>
<span class="line-added"> 805 #endif</span>
 806 
 807     UniqueRef&lt;LibWebRTCProvider&gt; m_libWebRTCProvider;
 808     RTCController m_rtcController;
 809 
 810     int m_nestedRunLoopCount { 0 };
 811     WTF::Function&lt;void()&gt; m_unnestCallback;
 812 
 813     int m_subframeCount { 0 };
 814     String m_groupName;
 815     bool m_openedByDOM { false };
 816     bool m_openedByDOMWithOpener { false };
 817 
 818     bool m_tabKeyCyclesThroughElements { true };
 819     bool m_defersLoading { false };
 820     unsigned m_defersLoadingCallCount { 0 };
 821 
 822     bool m_inLowQualityInterpolationMode { false };
 823     bool m_areMemoryCacheClientCallsEnabled { true };
 824     float m_mediaVolume { 1 };
 825     MediaProducer::MutedStateFlags m_mutedState { MediaProducer::NoneMuted };
 826 
 827     float m_pageScaleFactor { 1 };
 828     float m_zoomedOutPageScaleFactor { 0 };
 829     float m_deviceScaleFactor { 1 };
 830     float m_viewScaleFactor { 1 };
 831 
 832     float m_topContentInset { 0 };
 833     FloatBoxExtent m_obscuredInsets;
 834     FloatBoxExtent m_contentInsets;
 835     FloatBoxExtent m_unobscuredSafeAreaInsets;
 836     FloatBoxExtent m_fullscreenInsets;
 837     Seconds m_fullscreenAutoHideDuration { 0_s };
 838 
 839 #if PLATFORM(IOS_FAMILY)
 840     bool m_enclosedInScrollableAncestorView { false };
 841 #endif
 842 
 843     bool m_useSystemAppearance { false };
<a name="25" id="anc25"></a><span class="line-added"> 844     bool m_useElevatedUserInterfaceLevel { false };</span>
 845     bool m_useDarkAppearance { false };
 846     Optional&lt;bool&gt; m_useDarkAppearanceOverride;
 847 
 848 #if ENABLE(TEXT_AUTOSIZING)
 849     float m_textAutosizingWidth { 0 };
 850 #endif
<a name="26" id="anc26"></a><span class="line-added"> 851     float m_initialScale { 1.0f };</span>
 852 
 853     bool m_suppressScrollbarAnimations { false };
 854 
 855     unsigned m_verticalScrollElasticity : 2; // ScrollElasticity
 856     unsigned m_horizontalScrollElasticity : 2; // ScrollElasticity
 857 
 858     Pagination m_pagination;
 859     bool m_paginationLineGridEnabled { false };
 860 
 861     String m_userStyleSheetPath;
 862     mutable String m_userStyleSheet;
 863     mutable bool m_didLoadUserStyleSheet { false };
 864     mutable Optional&lt;WallTime&gt; m_userStyleSheetModificationTime;
 865 
 866     String m_captionUserPreferencesStyleSheet;
 867 
 868     std::unique_ptr&lt;PageGroup&gt; m_singlePageGroup;
 869     PageGroup* m_group { nullptr };
 870 
 871     JSC::Debugger* m_debugger { nullptr };
 872 
 873     bool m_canStartMedia { true };
 874 
 875     RefPtr&lt;StorageNamespace&gt; m_sessionStorage;
<a name="27" id="anc27"></a>
 876 
 877     TimerThrottlingState m_timerThrottlingState { TimerThrottlingState::Disabled };
 878     MonotonicTime m_timerThrottlingStateLastChangedTime;
 879     Seconds m_domTimerAlignmentInterval;
 880     Timer m_domTimerAlignmentIntervalIncreaseTimer;
 881     Seconds m_domTimerAlignmentIntervalIncreaseLimit;
 882 
 883     bool m_isEditable { false };
 884     bool m_isPrerender { false };
 885     OptionSet&lt;ActivityState::Flag&gt; m_activityState;
 886 
 887     OptionSet&lt;LayoutMilestone&gt; m_requestedLayoutMilestones;
 888 
 889     int m_headerHeight { 0 };
 890     int m_footerHeight { 0 };
 891 
<a name="28" id="anc28"></a><span class="line-added"> 892     std::unique_ptr&lt;RenderingUpdateScheduler&gt; m_renderingUpdateScheduler;</span>
<span class="line-added"> 893 </span>
 894     HashSet&lt;RenderObject*&gt; m_relevantUnpaintedRenderObjects;
 895     Region m_topRelevantPaintedRegion;
 896     Region m_bottomRelevantPaintedRegion;
 897     Region m_relevantUnpaintedRegion;
 898     bool m_isCountingRelevantRepaintedObjects { false };
 899 #ifndef NDEBUG
 900     bool m_isPainting { false };
 901 #endif
 902     AlternativeTextClient* m_alternativeTextClient;
 903 
 904     bool m_scriptedAnimationsSuspended { false };
 905     const std::unique_ptr&lt;PageConsoleClient&gt; m_consoleClient;
 906 
 907 #if ENABLE(REMOTE_INSPECTOR)
 908     const std::unique_ptr&lt;PageDebuggable&gt; m_inspectorDebuggable;
 909 #endif
 910 
 911 #if ENABLE(INDEXED_DATABASE)
 912     RefPtr&lt;IDBClient::IDBConnectionToServer&gt; m_idbConnectionToServer;
 913 #endif
 914 
 915     HashSet&lt;String&gt; m_seenPlugins;
 916     HashSet&lt;String&gt; m_seenMediaEngines;
 917 
 918     unsigned m_lastSpatialNavigationCandidatesCount { 0 };
 919     unsigned m_forbidPromptsDepth { 0 };
 920 
 921     Ref&lt;SocketProvider&gt; m_socketProvider;
 922     Ref&lt;CookieJar&gt; m_cookieJar;
 923     Ref&lt;ApplicationCacheStorage&gt; m_applicationCacheStorage;
 924     Ref&lt;CacheStorageProvider&gt; m_cacheStorageProvider;
 925     Ref&lt;DatabaseProvider&gt; m_databaseProvider;
 926     Ref&lt;PluginInfoProvider&gt; m_pluginInfoProvider;
 927     Ref&lt;StorageNamespaceProvider&gt; m_storageNamespaceProvider;
 928     Ref&lt;UserContentProvider&gt; m_userContentProvider;
 929     Ref&lt;VisitedLinkStore&gt; m_visitedLinkStore;
 930     RefPtr&lt;WheelEventTestTrigger&gt; m_testTrigger;
 931 
 932     HashSet&lt;ActivityStateChangeObserver*&gt; m_activityStateChangeObservers;
 933 
<a name="29" id="anc29"></a>







 934 #if ENABLE(RESOURCE_USAGE)
 935     std::unique_ptr&lt;ResourceUsageOverlay&gt; m_resourceUsageOverlay;
 936 #endif
 937 
 938     PAL::SessionID m_sessionID;
 939 
 940     bool m_isClosing { false };
 941     bool m_isRestoringCachedPage { false };
 942 
 943     MediaProducer::MediaStateFlags m_mediaState { MediaProducer::IsNotPlaying };
 944 
 945 #if ENABLE(VIDEO)
 946     Timer m_playbackControlsManagerUpdateTimer;
 947 #endif
 948 
 949     bool m_allowsMediaDocumentInlinePlayback { false };
 950     bool m_allowsPlaybackControlsForAutoplayingAudio { false };
 951     bool m_showAllPlugins { false };
 952     bool m_controlledByAutomation { false };
 953     bool m_resourceCachingDisabled { false };
 954     bool m_resourceCachingDisabledOverride { false };
 955     bool m_isUtilityPage;
 956     UserInterfaceLayoutDirection m_userInterfaceLayoutDirection { UserInterfaceLayoutDirection::LTR };
 957 
 958     // For testing.
 959     Optional&lt;EventThrottlingBehavior&gt; m_eventThrottlingBehaviorOverride;
 960     Optional&lt;CompositingPolicy&gt; m_compositingPolicyOverride;
 961 
 962     std::unique_ptr&lt;PerformanceMonitor&gt; m_performanceMonitor;
 963     std::unique_ptr&lt;LowPowerModeNotifier&gt; m_lowPowerModeNotifier;
 964     Optional&lt;bool&gt; m_lowPowerModeEnabledOverrideForTesting;
 965 
 966     Optional&lt;Navigation&gt; m_navigationToLogWhenVisible;
 967 
 968     std::unique_ptr&lt;PerformanceLogging&gt; m_performanceLogging;
 969 #if PLATFORM(MAC)
 970     Vector&lt;ScrollLatchingState&gt; m_latchingState;
 971 #if ENABLE(SERVICE_CONTROLS) || ENABLE(TELEPHONE_NUMBER_DETECTION)
 972     std::unique_ptr&lt;ServicesOverlayController&gt; m_servicesOverlayController;
 973 #endif
 974 #endif
 975 
 976     std::unique_ptr&lt;WheelEventDeltaFilter&gt; m_recentWheelEventDeltaFilter;
 977     std::unique_ptr&lt;PageOverlayController&gt; m_pageOverlayController;
 978 
 979 #if ENABLE(APPLE_PAY)
 980     std::unique_ptr&lt;PaymentCoordinator&gt; m_paymentCoordinator;
 981 #endif
 982 
 983 #if ENABLE(WEB_AUTHN)
 984     UniqueRef&lt;AuthenticatorCoordinator&gt; m_authenticatorCoordinator;
 985 #endif
 986 
 987 #if ENABLE(APPLICATION_MANIFEST)
 988     Optional&lt;ApplicationManifest&gt; m_applicationManifest;
 989 #endif
 990 
<a name="30" id="anc30"></a><span class="line-added"> 991     Optional&lt;ViewportArguments&gt; m_overrideViewportArguments;</span>
<span class="line-added"> 992 </span>
 993     bool m_shouldEnableICECandidateFilteringByDefault { true };
 994     bool m_mediaPlaybackIsSuspended { false };
<a name="31" id="anc31"></a><span class="line-added"> 995     bool m_mediaBufferingIsSuspended { false };</span>
<span class="line-added"> 996     bool m_inUpdateRendering { false };</span>
<span class="line-added"> 997 </span>
<span class="line-added"> 998     bool m_isForSanitizingWebContent { false };</span>
 999 };
1000 
1001 inline PageGroup&amp; Page::group()
1002 {
1003     if (!m_group)
1004         initGroup();
1005     return *m_group;
1006 }
1007 
1008 } // namespace WebCore
<a name="32" id="anc32"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="32" type="hidden" />
</body>
</html>
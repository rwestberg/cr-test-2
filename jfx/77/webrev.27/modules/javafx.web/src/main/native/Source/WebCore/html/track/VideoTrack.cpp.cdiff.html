<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/WebCore/html/track/VideoTrack.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="VTTRegion.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="VideoTrack.h.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/html/track/VideoTrack.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 42,43 ***</span>
  #include &quot;SourceBuffer.h&quot;
  #endif
  
  namespace WebCore {
  
<span class="line-modified">! const AtomicString&amp; VideoTrack::alternativeKeyword()</span>
  {
<span class="line-modified">!     static NeverDestroyed&lt;const AtomicString&gt; alternative(&quot;alternative&quot;, AtomicString::ConstructFromLiteral);</span>
      return alternative;
  }
  
<span class="line-modified">! const AtomicString&amp; VideoTrack::captionsKeyword()</span>
  {
<span class="line-modified">!     static NeverDestroyed&lt;const AtomicString&gt; captions(&quot;captions&quot;, AtomicString::ConstructFromLiteral);</span>
      return captions;
  }
  
<span class="line-modified">! const AtomicString&amp; VideoTrack::mainKeyword()</span>
  {
<span class="line-modified">!     static NeverDestroyed&lt;const AtomicString&gt; captions(&quot;main&quot;, AtomicString::ConstructFromLiteral);</span>
      return captions;
  }
  
<span class="line-modified">! const AtomicString&amp; VideoTrack::signKeyword()</span>
  {
<span class="line-modified">!     static NeverDestroyed&lt;const AtomicString&gt; sign(&quot;sign&quot;, AtomicString::ConstructFromLiteral);</span>
      return sign;
  }
  
<span class="line-modified">! const AtomicString&amp; VideoTrack::subtitlesKeyword()</span>
  {
<span class="line-modified">!     static NeverDestroyed&lt;const AtomicString&gt; subtitles(&quot;subtitles&quot;, AtomicString::ConstructFromLiteral);</span>
      return subtitles;
  }
  
<span class="line-modified">! const AtomicString&amp; VideoTrack::commentaryKeyword()</span>
  {
<span class="line-modified">!     static NeverDestroyed&lt;const AtomicString&gt; commentary(&quot;commentary&quot;, AtomicString::ConstructFromLiteral);</span>
      return commentary;
  }
  
  VideoTrack::VideoTrack(VideoTrackClient&amp; client, VideoTrackPrivate&amp; trackPrivate)
      : MediaTrackBase(MediaTrackBase::VideoTrack, trackPrivate.id(), trackPrivate.label(), trackPrivate.language())
<span class="line-new-header">--- 42,43 ---</span>
  #include &quot;SourceBuffer.h&quot;
  #endif
  
  namespace WebCore {
  
<span class="line-modified">! const AtomString&amp; VideoTrack::alternativeKeyword()</span>
  {
<span class="line-modified">!     static NeverDestroyed&lt;const AtomString&gt; alternative(&quot;alternative&quot;, AtomString::ConstructFromLiteral);</span>
      return alternative;
  }
  
<span class="line-modified">! const AtomString&amp; VideoTrack::captionsKeyword()</span>
  {
<span class="line-modified">!     static NeverDestroyed&lt;const AtomString&gt; captions(&quot;captions&quot;, AtomString::ConstructFromLiteral);</span>
      return captions;
  }
  
<span class="line-modified">! const AtomString&amp; VideoTrack::mainKeyword()</span>
  {
<span class="line-modified">!     static NeverDestroyed&lt;const AtomString&gt; captions(&quot;main&quot;, AtomString::ConstructFromLiteral);</span>
      return captions;
  }
  
<span class="line-modified">! const AtomString&amp; VideoTrack::signKeyword()</span>
  {
<span class="line-modified">!     static NeverDestroyed&lt;const AtomString&gt; sign(&quot;sign&quot;, AtomString::ConstructFromLiteral);</span>
      return sign;
  }
  
<span class="line-modified">! const AtomString&amp; VideoTrack::subtitlesKeyword()</span>
  {
<span class="line-modified">!     static NeverDestroyed&lt;const AtomString&gt; subtitles(&quot;subtitles&quot;, AtomString::ConstructFromLiteral);</span>
      return subtitles;
  }
  
<span class="line-modified">! const AtomString&amp; VideoTrack::commentaryKeyword()</span>
  {
<span class="line-modified">!     static NeverDestroyed&lt;const AtomString&gt; commentary(&quot;commentary&quot;, AtomString::ConstructFromLiteral);</span>
      return commentary;
  }
  
  VideoTrack::VideoTrack(VideoTrackClient&amp; client, VideoTrackPrivate&amp; trackPrivate)
      : MediaTrackBase(MediaTrackBase::VideoTrack, trackPrivate.id(), trackPrivate.label(), trackPrivate.language())
</pre>
<hr />
<pre>
<span class="line-old-header">*** 112,11 ***</span>
  
      m_private-&gt;setSelected(m_selected);
      updateKindFromPrivate();
  }
  
<span class="line-modified">! bool VideoTrack::isValidKind(const AtomicString&amp; value) const</span>
  {
      return value == alternativeKeyword()
          || value == commentaryKeyword()
          || value == captionsKeyword()
          || value == mainKeyword()
<span class="line-new-header">--- 112,11 ---</span>
  
      m_private-&gt;setSelected(m_selected);
      updateKindFromPrivate();
  }
  
<span class="line-modified">! bool VideoTrack::isValidKind(const AtomString&amp; value) const</span>
  {
      return value == alternativeKeyword()
          || value == commentaryKeyword()
          || value == captionsKeyword()
          || value == mainKeyword()
</pre>
<hr />
<pre>
<span class="line-old-header">*** 144,21 ***</span>
  void VideoTrack::selectedChanged(bool selected)
  {
      setSelected(selected);
  }
  
<span class="line-modified">! void VideoTrack::idChanged(const AtomicString&amp; id)</span>
  {
      setId(id);
  }
  
<span class="line-modified">! void VideoTrack::labelChanged(const AtomicString&amp; label)</span>
  {
      setLabel(label);
  }
  
<span class="line-modified">! void VideoTrack::languageChanged(const AtomicString&amp; language)</span>
  {
      setLanguage(language);
  }
  
  void VideoTrack::willRemove()
<span class="line-new-header">--- 144,21 ---</span>
  void VideoTrack::selectedChanged(bool selected)
  {
      setSelected(selected);
  }
  
<span class="line-modified">! void VideoTrack::idChanged(const AtomString&amp; id)</span>
  {
      setId(id);
  }
  
<span class="line-modified">! void VideoTrack::labelChanged(const AtomString&amp; label)</span>
  {
      setLabel(label);
  }
  
<span class="line-modified">! void VideoTrack::languageChanged(const AtomString&amp; language)</span>
  {
      setLanguage(language);
  }
  
  void VideoTrack::willRemove()
</pre>
<hr />
<pre>
<span class="line-old-header">*** 169,11 ***</span>
      element-&gt;removeVideoTrack(*this);
  }
  
  #if ENABLE(MEDIA_SOURCE)
  
<span class="line-modified">! void VideoTrack::setKind(const AtomicString&amp; kind)</span>
  {
      // 10.1 kind, on setting:
      // 1. If the value being assigned to this attribute does not match one of the video track kinds,
      // then abort these steps.
      if (!isValidKind(kind))
<span class="line-new-header">--- 169,11 ---</span>
      element-&gt;removeVideoTrack(*this);
  }
  
  #if ENABLE(MEDIA_SOURCE)
  
<span class="line-modified">! void VideoTrack::setKind(const AtomString&amp; kind)</span>
  {
      // 10.1 kind, on setting:
      // 1. If the value being assigned to this attribute does not match one of the video track kinds,
      // then abort these steps.
      if (!isValidKind(kind))
</pre>
<hr />
<pre>
<span class="line-old-header">*** 190,11 ***</span>
      // 4. Queue a task to fire a simple event named change at the VideoTrackList object referenced by
      // the videoTracks attribute on the HTMLMediaElement.
      mediaElement()-&gt;ensureVideoTracks().scheduleChangeEvent();
  }
  
<span class="line-modified">! void VideoTrack::setLanguage(const AtomicString&amp; language)</span>
  {
      // 10.1 language, on setting:
      // 1. If the value being assigned to this attribute is not an empty string or a BCP 47 language
      // tag[BCP47], then abort these steps.
      // BCP 47 validation is done in TrackBase::setLanguage() which is
<span class="line-new-header">--- 190,11 ---</span>
      // 4. Queue a task to fire a simple event named change at the VideoTrackList object referenced by
      // the videoTracks attribute on the HTMLMediaElement.
      mediaElement()-&gt;ensureVideoTracks().scheduleChangeEvent();
  }
  
<span class="line-modified">! void VideoTrack::setLanguage(const AtomString&amp; language)</span>
  {
      // 10.1 language, on setting:
      // 1. If the value being assigned to this attribute is not an empty string or a BCP 47 language
      // tag[BCP47], then abort these steps.
      // BCP 47 validation is done in TrackBase::setLanguage() which is
</pre>
<center><a href="VTTRegion.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="VideoTrack.h.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>
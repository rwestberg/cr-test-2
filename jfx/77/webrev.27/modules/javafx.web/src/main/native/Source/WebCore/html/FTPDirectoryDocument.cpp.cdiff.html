<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/WebCore/html/FTPDirectoryDocument.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="EmailInputType.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="FTPDirectoryDocument.h.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/html/FTPDirectoryDocument.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 110,32 ***</span>
  void FTPDirectoryDocumentParser::appendEntry(const String&amp; filename, const String&amp; size, const String&amp; date, bool isDirectory)
  {
      auto&amp; document = *this-&gt;document();
  
      auto rowElement = m_tableElement-&gt;insertRow(-1).releaseReturnValue();
<span class="line-modified">!     rowElement-&gt;setAttributeWithoutSynchronization(HTMLNames::classAttr, AtomicString(&quot;ftpDirectoryEntryRow&quot;, AtomicString::ConstructFromLiteral));</span>
  
      auto typeElement = HTMLTableCellElement::create(tdTag, document);
      typeElement-&gt;appendChild(Text::create(document, String(&amp;noBreakSpace, 1)));
      if (isDirectory)
<span class="line-modified">!         typeElement-&gt;setAttributeWithoutSynchronization(HTMLNames::classAttr, AtomicString(&quot;ftpDirectoryIcon ftpDirectoryTypeDirectory&quot;, AtomicString::ConstructFromLiteral));</span>
      else
<span class="line-modified">!         typeElement-&gt;setAttributeWithoutSynchronization(HTMLNames::classAttr, AtomicString(&quot;ftpDirectoryIcon ftpDirectoryTypeFile&quot;, AtomicString::ConstructFromLiteral));</span>
      rowElement-&gt;appendChild(typeElement);
  
      auto nameElement = createTDForFilename(filename);
<span class="line-modified">!     nameElement-&gt;setAttributeWithoutSynchronization(HTMLNames::classAttr, AtomicString(&quot;ftpDirectoryFileName&quot;, AtomicString::ConstructFromLiteral));</span>
      rowElement-&gt;appendChild(nameElement);
  
      auto dateElement = HTMLTableCellElement::create(tdTag, document);
      dateElement-&gt;appendChild(Text::create(document, date));
<span class="line-modified">!     dateElement-&gt;setAttributeWithoutSynchronization(HTMLNames::classAttr, AtomicString(&quot;ftpDirectoryFileDate&quot;, AtomicString::ConstructFromLiteral));</span>
      rowElement-&gt;appendChild(dateElement);
  
      auto sizeElement = HTMLTableCellElement::create(tdTag, document);
      sizeElement-&gt;appendChild(Text::create(document, size));
<span class="line-modified">!     sizeElement-&gt;setAttributeWithoutSynchronization(HTMLNames::classAttr, AtomicString(&quot;ftpDirectoryFileSize&quot;, AtomicString::ConstructFromLiteral));</span>
      rowElement-&gt;appendChild(sizeElement);
  }
  
  Ref&lt;Element&gt; FTPDirectoryDocumentParser::createTDForFilename(const String&amp; filename)
  {
<span class="line-new-header">--- 110,32 ---</span>
  void FTPDirectoryDocumentParser::appendEntry(const String&amp; filename, const String&amp; size, const String&amp; date, bool isDirectory)
  {
      auto&amp; document = *this-&gt;document();
  
      auto rowElement = m_tableElement-&gt;insertRow(-1).releaseReturnValue();
<span class="line-modified">!     rowElement-&gt;setAttributeWithoutSynchronization(HTMLNames::classAttr, AtomString(&quot;ftpDirectoryEntryRow&quot;, AtomString::ConstructFromLiteral));</span>
  
      auto typeElement = HTMLTableCellElement::create(tdTag, document);
      typeElement-&gt;appendChild(Text::create(document, String(&amp;noBreakSpace, 1)));
      if (isDirectory)
<span class="line-modified">!         typeElement-&gt;setAttributeWithoutSynchronization(HTMLNames::classAttr, AtomString(&quot;ftpDirectoryIcon ftpDirectoryTypeDirectory&quot;, AtomString::ConstructFromLiteral));</span>
      else
<span class="line-modified">!         typeElement-&gt;setAttributeWithoutSynchronization(HTMLNames::classAttr, AtomString(&quot;ftpDirectoryIcon ftpDirectoryTypeFile&quot;, AtomString::ConstructFromLiteral));</span>
      rowElement-&gt;appendChild(typeElement);
  
      auto nameElement = createTDForFilename(filename);
<span class="line-modified">!     nameElement-&gt;setAttributeWithoutSynchronization(HTMLNames::classAttr, AtomString(&quot;ftpDirectoryFileName&quot;, AtomString::ConstructFromLiteral));</span>
      rowElement-&gt;appendChild(nameElement);
  
      auto dateElement = HTMLTableCellElement::create(tdTag, document);
      dateElement-&gt;appendChild(Text::create(document, date));
<span class="line-modified">!     dateElement-&gt;setAttributeWithoutSynchronization(HTMLNames::classAttr, AtomString(&quot;ftpDirectoryFileDate&quot;, AtomString::ConstructFromLiteral));</span>
      rowElement-&gt;appendChild(dateElement);
  
      auto sizeElement = HTMLTableCellElement::create(tdTag, document);
      sizeElement-&gt;appendChild(Text::create(document, size));
<span class="line-modified">!     sizeElement-&gt;setAttributeWithoutSynchronization(HTMLNames::classAttr, AtomString(&quot;ftpDirectoryFileSize&quot;, AtomString::ConstructFromLiteral));</span>
      rowElement-&gt;appendChild(sizeElement);
  }
  
  Ref&lt;Element&gt; FTPDirectoryDocumentParser::createTDForFilename(const String&amp; filename)
  {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 312,11 ***</span>
          m_tableElement = downcast&lt;HTMLTableElement&gt;(foundElement.get());
          return true;
      }
  
      m_tableElement = HTMLTableElement::create(document);
<span class="line-modified">!     m_tableElement-&gt;setAttributeWithoutSynchronization(HTMLNames::idAttr, AtomicString(&quot;ftpDirectoryTable&quot;, AtomicString::ConstructFromLiteral));</span>
  
      // If we didn&#39;t find the table element, lets try to append our own to the body.
      // If that fails for some reason, cram it on the end of the document as a last ditch effort.
      if (auto body = makeRefPtr(document.bodyOrFrameset()))
          body-&gt;appendChild(*m_tableElement);
<span class="line-new-header">--- 312,11 ---</span>
          m_tableElement = downcast&lt;HTMLTableElement&gt;(foundElement.get());
          return true;
      }
  
      m_tableElement = HTMLTableElement::create(document);
<span class="line-modified">!     m_tableElement-&gt;setAttributeWithoutSynchronization(HTMLNames::idAttr, AtomString(&quot;ftpDirectoryTable&quot;, AtomString::ConstructFromLiteral));</span>
  
      // If we didn&#39;t find the table element, lets try to append our own to the body.
      // If that fails for some reason, cram it on the end of the document as a last ditch effort.
      if (auto body = makeRefPtr(document.bodyOrFrameset()))
          body-&gt;appendChild(*m_tableElement);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 334,12 ***</span>
  
      auto bodyElement = HTMLBodyElement::create(document);
      document.appendChild(bodyElement);
  
      m_tableElement = HTMLTableElement::create(document);
<span class="line-modified">!     m_tableElement-&gt;setAttributeWithoutSynchronization(HTMLNames::idAttr, AtomicString(&quot;ftpDirectoryTable&quot;, AtomicString::ConstructFromLiteral));</span>
<span class="line-modified">!     m_tableElement-&gt;setAttribute(HTMLNames::styleAttr, AtomicString(&quot;width:100%&quot;, AtomicString::ConstructFromLiteral));</span>
  
      bodyElement-&gt;appendChild(*m_tableElement);
  
      document.processViewport(&quot;width=device-width&quot;, ViewportArguments::ViewportMeta);
  }
<span class="line-new-header">--- 334,12 ---</span>
  
      auto bodyElement = HTMLBodyElement::create(document);
      document.appendChild(bodyElement);
  
      m_tableElement = HTMLTableElement::create(document);
<span class="line-modified">!     m_tableElement-&gt;setAttributeWithoutSynchronization(HTMLNames::idAttr, AtomString(&quot;ftpDirectoryTable&quot;, AtomString::ConstructFromLiteral));</span>
<span class="line-modified">!     m_tableElement-&gt;setAttribute(HTMLNames::styleAttr, AtomString(&quot;width:100%&quot;, AtomString::ConstructFromLiteral));</span>
  
      bodyElement-&gt;appendChild(*m_tableElement);
  
      document.processViewport(&quot;width=device-width&quot;, ViewportArguments::ViewportMeta);
  }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 419,15 ***</span>
      fastFree(m_buffer);
  
      HTMLDocumentParser::finish();
  }
  
<span class="line-modified">! FTPDirectoryDocument::FTPDirectoryDocument(Frame* frame, const URL&amp; url)</span>
<span class="line-modified">!     : HTMLDocument(frame, url)</span>
  {
  #if !LOG_DISABLED
<span class="line-modified">!     LogFTP.state = WTFLogChannelOn;</span>
  #endif
  }
  
  Ref&lt;DocumentParser&gt; FTPDirectoryDocument::createParser()
  {
<span class="line-new-header">--- 419,15 ---</span>
      fastFree(m_buffer);
  
      HTMLDocumentParser::finish();
  }
  
<span class="line-modified">! FTPDirectoryDocument::FTPDirectoryDocument(PAL::SessionID sessionID, Frame* frame, const URL&amp; url)</span>
<span class="line-modified">!     : HTMLDocument(sessionID, frame, url)</span>
  {
  #if !LOG_DISABLED
<span class="line-modified">!     LogFTP.state = WTFLogChannelState::On;</span>
  #endif
  }
  
  Ref&lt;DocumentParser&gt; FTPDirectoryDocument::createParser()
  {
</pre>
<center><a href="EmailInputType.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="FTPDirectoryDocument.h.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>
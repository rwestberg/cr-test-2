<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old modules/javafx.web/src/main/native/Source/WebCore/inspector/InspectorInstrumentation.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
   1 /*
   2 * Copyright (C) 2010 Google Inc. All rights reserved.
   3 * Copyright (C) 2014-2016 Apple Inc. All rights reserved.
   4 *
   5 * Redistribution and use in source and binary forms, with or without
   6 * modification, are permitted provided that the following conditions are
   7 * met:
   8 *
   9 *     * Redistributions of source code must retain the above copyright
  10 * notice, this list of conditions and the following disclaimer.
  11 *     * Redistributions in binary form must reproduce the above
  12 * copyright notice, this list of conditions and the following disclaimer
  13 * in the documentation and/or other materials provided with the
  14 * distribution.
  15 *     * Neither the name of Google Inc. nor the names of its
  16 * contributors may be used to endorse or promote products derived from
  17 * this software without specific prior written permission.
  18 *
  19 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
  20 * &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
  21 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
  22 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
  23 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
  24 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
  25 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
  26 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
  27 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  28 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
  29 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  30 */
  31 
  32 #pragma once
  33 
  34 #include &quot;CSSSelector.h&quot;
  35 #include &quot;CallTracerTypes.h&quot;
  36 #include &quot;CanvasBase.h&quot;
  37 #include &quot;CanvasRenderingContext.h&quot;
  38 #include &quot;DocumentThreadableLoader.h&quot;
  39 #include &quot;Element.h&quot;
  40 #include &quot;EventTarget.h&quot;
  41 #include &quot;FormData.h&quot;
  42 #include &quot;Frame.h&quot;
  43 #include &quot;HitTestResult.h&quot;
  44 #include &quot;InspectorController.h&quot;
  45 #include &quot;InspectorInstrumentationCookie.h&quot;
  46 #include &quot;OffscreenCanvas.h&quot;
  47 #include &quot;Page.h&quot;
  48 #include &quot;StorageArea.h&quot;
  49 #include &quot;WorkerGlobalScope.h&quot;
  50 #include &quot;WorkerInspectorController.h&quot;
  51 #include &lt;JavaScriptCore/JSCInlines.h&gt;
  52 #include &lt;wtf/MemoryPressureHandler.h&gt;
  53 #include &lt;wtf/RefPtr.h&gt;
  54 
  55 #if ENABLE(WEBGL)
  56 #include &quot;WebGLRenderingContextBase.h&quot;
  57 #endif
  58 
  59 namespace Inspector {
  60 class ConsoleMessage;
  61 class ScriptArguments;
  62 class ScriptCallStack;
  63 }
  64 
  65 namespace WebCore {
  66 
  67 class CachedResource;
  68 class CharacterData;
  69 class DOMWindow;
  70 class DOMWrapperWorld;
  71 class Database;
  72 class Document;
  73 class DocumentLoader;
  74 class EventListener;
  75 class HTTPHeaderMap;
  76 class InspectorTimelineAgent;
  77 class InstrumentingAgents;
  78 class NetworkLoadMetrics;
  79 class Node;
  80 class PseudoElement;
  81 class RegisteredEventListener;
  82 class RenderLayer;
  83 class RenderObject;
  84 class ResourceLoader;
  85 class ResourceRequest;
  86 class ResourceResponse;
  87 class ScriptExecutionContext;
  88 class SecurityOrigin;
  89 class ShadowRoot;
  90 class TimerBase;
  91 #if ENABLE(WEBGL)
  92 class WebGLProgram;
  93 #endif
  94 class WebKitNamedFlow;
  95 class WorkerInspectorProxy;
  96 
  97 enum class StorageType;
  98 
  99 struct WebSocketFrame;
 100 
 101 #define FAST_RETURN_IF_NO_FRONTENDS(value) if (LIKELY(!hasFrontends())) return value;
 102 
 103 class InspectorInstrumentation {
 104 public:
 105     static void didClearWindowObjectInWorld(Frame&amp;, DOMWrapperWorld&amp;);
 106     static bool isDebuggerPaused(Frame*);
 107 
 108     static int identifierForNode(Node&amp;);
 109     static void addEventListenersToNode(Node&amp;);
 110     static void willInsertDOMNode(Document&amp;, Node&amp; parent);
 111     static void didInsertDOMNode(Document&amp;, Node&amp;);
 112     static void willRemoveDOMNode(Document&amp;, Node&amp;);
 113     static void didRemoveDOMNode(Document&amp;, Node&amp;);
 114     static void willModifyDOMAttr(Document&amp;, Element&amp;, const AtomicString&amp; oldValue, const AtomicString&amp; newValue);
 115     static void didModifyDOMAttr(Document&amp;, Element&amp;, const AtomicString&amp; name, const AtomicString&amp; value);
 116     static void didRemoveDOMAttr(Document&amp;, Element&amp;, const AtomicString&amp; name);
 117     static void characterDataModified(Document&amp;, CharacterData&amp;);
 118     static void didInvalidateStyleAttr(Document&amp;, Node&amp;);
 119     static void documentDetached(Document&amp;);
 120     static void frameWindowDiscarded(Frame&amp;, DOMWindow*);
 121     static void mediaQueryResultChanged(Document&amp;);
 122     static void activeStyleSheetsUpdated(Document&amp;);
 123     static void didPushShadowRoot(Element&amp; host, ShadowRoot&amp;);
 124     static void willPopShadowRoot(Element&amp; host, ShadowRoot&amp;);
 125     static void didChangeCustomElementState(Element&amp;);
 126     static void pseudoElementCreated(Page*, PseudoElement&amp;);
 127     static void pseudoElementDestroyed(Page*, PseudoElement&amp;);
 128     static void didCreateNamedFlow(Document*, WebKitNamedFlow&amp;);
 129     static void willRemoveNamedFlow(Document*, WebKitNamedFlow&amp;);
 130     static void didChangeRegionOverset(Document&amp;, WebKitNamedFlow&amp;);
 131     static void didRegisterNamedFlowContentElement(Document&amp;, WebKitNamedFlow&amp;, Node&amp; contentElement, Node* nextContentElement = nullptr);
 132     static void didUnregisterNamedFlowContentElement(Document&amp;, WebKitNamedFlow&amp;, Node&amp; contentElement);
 133 
 134     static void mouseDidMoveOverElement(Page&amp;, const HitTestResult&amp;, unsigned modifierFlags);
 135     static bool handleMousePress(Frame&amp;);
 136     static bool handleTouchEvent(Frame&amp;, Node&amp;);
 137     static bool forcePseudoState(const Element&amp;, CSSSelector::PseudoClassType);
 138 
 139     static void willSendXMLHttpRequest(ScriptExecutionContext*, const String&amp; url);
 140     static void willFetch(ScriptExecutionContext&amp;, const String&amp; url);
 141     static void didInstallTimer(ScriptExecutionContext&amp;, int timerId, Seconds timeout, bool singleShot);
 142     static void didRemoveTimer(ScriptExecutionContext&amp;, int timerId);
 143 
 144     static void didPostMessage(Frame&amp;, TimerBase&amp;, JSC::ExecState&amp;);
 145     static void didFailPostMessage(Frame&amp;, TimerBase&amp;);
 146     static void willDispatchPostMessage(Frame&amp;, TimerBase&amp;);
 147     static void didDispatchPostMessage(Frame&amp;, TimerBase&amp;);
 148 
 149     static InspectorInstrumentationCookie willCallFunction(ScriptExecutionContext*, const String&amp; scriptName, int scriptLine, int scriptColumn);
 150     static void didCallFunction(const InspectorInstrumentationCookie&amp;, ScriptExecutionContext*);
 151     static void didAddEventListener(EventTarget&amp;, const AtomicString&amp; eventType, EventListener&amp;, bool capture);
 152     static void willRemoveEventListener(EventTarget&amp;, const AtomicString&amp; eventType, EventListener&amp;, bool capture);
 153     static bool isEventListenerDisabled(EventTarget&amp;, const AtomicString&amp; eventType, EventListener&amp;, bool capture);
 154     static InspectorInstrumentationCookie willDispatchEvent(Document&amp;, const Event&amp;, bool hasEventListeners);
 155     static void didDispatchEvent(const InspectorInstrumentationCookie&amp;);
 156     static void willHandleEvent(ScriptExecutionContext&amp;, const Event&amp;, const RegisteredEventListener&amp;);
 157     static void didHandleEvent(ScriptExecutionContext&amp;);
 158     static InspectorInstrumentationCookie willDispatchEventOnWindow(Frame*, const Event&amp;, DOMWindow&amp;);
 159     static void didDispatchEventOnWindow(const InspectorInstrumentationCookie&amp;);
 160     static void eventDidResetAfterDispatch(const Event&amp;);
 161     static InspectorInstrumentationCookie willEvaluateScript(Frame&amp;, const String&amp; url, int lineNumber, int columnNumber);
 162     static void didEvaluateScript(const InspectorInstrumentationCookie&amp;, Frame&amp;);
 163     static InspectorInstrumentationCookie willFireTimer(ScriptExecutionContext&amp;, int timerId, bool oneShot);
 164     static void didFireTimer(const InspectorInstrumentationCookie&amp;);
 165     static void didInvalidateLayout(Frame&amp;);
 166     static InspectorInstrumentationCookie willLayout(Frame&amp;);
 167     static void didLayout(const InspectorInstrumentationCookie&amp;, RenderObject&amp;);
 168     static void didScroll(Page&amp;);
 169     static void willComposite(Frame&amp;);
 170     static void didComposite(Frame&amp;);
 171     static void willPaint(RenderObject&amp;);
 172     static void didPaint(RenderObject&amp;, const LayoutRect&amp;);
 173     static InspectorInstrumentationCookie willRecalculateStyle(Document&amp;);
 174     static void didRecalculateStyle(const InspectorInstrumentationCookie&amp;);
 175     static void didScheduleStyleRecalculation(Document&amp;);
 176     static void applyUserAgentOverride(Frame&amp;, String&amp;);
 177     static void applyEmulatedMedia(Frame&amp;, String&amp;);
 178 
 179     static void willSendRequest(Frame*, unsigned long identifier, DocumentLoader*, ResourceRequest&amp;, const ResourceResponse&amp; redirectResponse);
 180     static void didLoadResourceFromMemoryCache(Page&amp;, DocumentLoader*, CachedResource*);
 181     static void didReceiveResourceResponse(Frame&amp;, unsigned long identifier, DocumentLoader*, const ResourceResponse&amp;, ResourceLoader*);
 182     static void didReceiveThreadableLoaderResponse(DocumentThreadableLoader&amp;, unsigned long identifier);
 183     static void didReceiveData(Frame*, unsigned long identifier, const char* data, int dataLength, int encodedDataLength);
 184     static void didFinishLoading(Frame*, DocumentLoader*, unsigned long identifier, const NetworkLoadMetrics&amp;, ResourceLoader*);
 185     static void didFailLoading(Frame*, DocumentLoader*, unsigned long identifier, const ResourceError&amp;);
 186 
 187     static void willSendRequest(WorkerGlobalScope&amp;, unsigned long identifier, ResourceRequest&amp;);
 188     static void didReceiveResourceResponse(WorkerGlobalScope&amp;, unsigned long identifier, const ResourceResponse&amp;);
 189     static void didReceiveData(WorkerGlobalScope&amp;, unsigned long identifier, const char* data, int dataLength);
 190     static void didFinishLoading(WorkerGlobalScope&amp;, unsigned long identifier, const NetworkLoadMetrics&amp;);
 191     static void didFailLoading(WorkerGlobalScope&amp;, unsigned long identifier, const ResourceError&amp;);
 192 
 193     // Some network requests do not go through the normal network loading path.
 194     // These network requests have to issue their own willSendRequest / didReceiveResponse / didFinishLoading / didFailLoading
 195     // instrumentation calls. Some of these loads are for resources that lack a CachedResource::Type.
 196     enum class LoadType { Ping, Beacon };
 197     static void willSendRequestOfType(Frame*, unsigned long identifier, DocumentLoader*, ResourceRequest&amp;, LoadType);
 198 
 199     static void continueAfterXFrameOptionsDenied(Frame&amp;, unsigned long identifier, DocumentLoader&amp;, const ResourceResponse&amp;);
 200     static void continueWithPolicyDownload(Frame&amp;, unsigned long identifier, DocumentLoader&amp;, const ResourceResponse&amp;);
 201     static void continueWithPolicyIgnore(Frame&amp;, unsigned long identifier, DocumentLoader&amp;, const ResourceResponse&amp;);
 202     static void willLoadXHRSynchronously(ScriptExecutionContext*);
 203     static void didLoadXHRSynchronously(ScriptExecutionContext*);
 204     static void scriptImported(ScriptExecutionContext&amp;, unsigned long identifier, const String&amp; sourceString);
 205     static void scriptExecutionBlockedByCSP(ScriptExecutionContext*, const String&amp; directiveText);
 206     static void didReceiveScriptResponse(ScriptExecutionContext*, unsigned long identifier);
 207     static void domContentLoadedEventFired(Frame&amp;);
 208     static void loadEventFired(Frame*);
 209     static void frameDetachedFromParent(Frame&amp;);
 210     static void didCommitLoad(Frame&amp;, DocumentLoader*);
 211     static void frameDocumentUpdated(Frame&amp;);
 212     static void loaderDetachedFromFrame(Frame&amp;, DocumentLoader&amp;);
 213     static void frameStartedLoading(Frame&amp;);
 214     static void frameStoppedLoading(Frame&amp;);
 215     static void frameScheduledNavigation(Frame&amp;, Seconds delay);
 216     static void frameClearedScheduledNavigation(Frame&amp;);
 217     static void defaultAppearanceDidChange(Page&amp;, bool useDarkAppearance);
 218     static void willDestroyCachedResource(CachedResource&amp;);
 219 
 220     static void addMessageToConsole(Page&amp;, std::unique_ptr&lt;Inspector::ConsoleMessage&gt;);
 221     static void addMessageToConsole(WorkerGlobalScope&amp;, std::unique_ptr&lt;Inspector::ConsoleMessage&gt;);
 222 
 223     static void consoleCount(Page&amp;, JSC::ExecState*, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp;);
 224     static void consoleCount(WorkerGlobalScope&amp;, JSC::ExecState*, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp;);
 225     static void takeHeapSnapshot(Frame&amp;, const String&amp; title);
 226     static void startConsoleTiming(Frame&amp;, const String&amp; title);
 227     static void startConsoleTiming(WorkerGlobalScope&amp;, const String&amp; title);
 228     static void stopConsoleTiming(Frame&amp;, const String&amp; title, Ref&lt;Inspector::ScriptCallStack&gt;&amp;&amp;);
 229     static void stopConsoleTiming(WorkerGlobalScope&amp;, const String&amp; title, Ref&lt;Inspector::ScriptCallStack&gt;&amp;&amp;);
 230     static void consoleTimeStamp(Frame&amp;, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp;);
 231     static void startProfiling(Page&amp;, JSC::ExecState*, const String&amp; title);
 232     static void stopProfiling(Page&amp;, JSC::ExecState*, const String&amp; title);
 233     static void consoleStartRecordingCanvas(CanvasRenderingContext&amp;, JSC::ExecState&amp;, JSC::JSObject* options);
 234 
 235     static void didRequestAnimationFrame(Document&amp;, int callbackId);
 236     static void didCancelAnimationFrame(Document&amp;, int callbackId);
 237     static InspectorInstrumentationCookie willFireAnimationFrame(Document&amp;, int callbackId);
 238     static void didFireAnimationFrame(const InspectorInstrumentationCookie&amp;);
 239 
 240     static InspectorInstrumentationCookie willFireObserverCallback(ScriptExecutionContext&amp;, const String&amp; callbackType);
 241     static void didFireObserverCallback(const InspectorInstrumentationCookie&amp;);
 242 
 243     static void didOpenDatabase(ScriptExecutionContext*, RefPtr&lt;Database&gt;&amp;&amp;, const String&amp; domain, const String&amp; name, const String&amp; version);
 244 
 245     static void didDispatchDOMStorageEvent(Page&amp;, const String&amp; key, const String&amp; oldValue, const String&amp; newValue, StorageType, SecurityOrigin*);
 246 
 247     static bool shouldWaitForDebuggerOnStart(ScriptExecutionContext&amp;);
 248     static void workerStarted(ScriptExecutionContext&amp;, WorkerInspectorProxy*, const URL&amp;);
 249     static void workerTerminated(ScriptExecutionContext&amp;, WorkerInspectorProxy*);
 250 
 251     static void didCreateWebSocket(Document*, unsigned long identifier, const URL&amp; requestURL);
 252     static void willSendWebSocketHandshakeRequest(Document*, unsigned long identifier, const ResourceRequest&amp;);
 253     static void didReceiveWebSocketHandshakeResponse(Document*, unsigned long identifier, const ResourceResponse&amp;);
 254     static void didCloseWebSocket(Document*, unsigned long identifier);
 255     static void didReceiveWebSocketFrame(Document*, unsigned long identifier, const WebSocketFrame&amp;);
 256     static void didSendWebSocketFrame(Document*, unsigned long identifier, const WebSocketFrame&amp;);
 257     static void didReceiveWebSocketFrameError(Document*, unsigned long identifier, const String&amp; errorMessage);
 258 
 259 #if ENABLE(RESOURCE_USAGE)
 260     static void didHandleMemoryPressure(Page&amp;, Critical);
 261 #endif
 262 
 263     static void didChangeCSSCanvasClientNodes(CanvasBase&amp;);
 264     static void didCreateCanvasRenderingContext(CanvasRenderingContext&amp;);
 265     static void didChangeCanvasMemory(CanvasRenderingContext&amp;);
 266     static void recordCanvasAction(CanvasRenderingContext&amp;, const String&amp;, Vector&lt;RecordCanvasActionVariant&gt;&amp;&amp; = { });
 267     static void didFinishRecordingCanvasFrame(CanvasRenderingContext&amp;, bool forceDispatch = false);
 268 #if ENABLE(WEBGL)
 269     static void didEnableExtension(WebGLRenderingContextBase&amp;, const String&amp;);
 270     static void didCreateProgram(WebGLRenderingContextBase&amp;, WebGLProgram&amp;);
 271     static void willDeleteProgram(WebGLRenderingContextBase&amp;, WebGLProgram&amp;);
 272     static bool isShaderProgramDisabled(WebGLRenderingContextBase&amp;, WebGLProgram&amp;);
 273     static bool isShaderProgramHighlighted(WebGLRenderingContextBase&amp;, WebGLProgram&amp;);
 274 #endif
 275 
 276     static void networkStateChanged(Page&amp;);
 277     static void updateApplicationCacheStatus(Frame*);
 278 
 279     static void layerTreeDidChange(Page*);
 280     static void renderLayerDestroyed(Page*, const RenderLayer&amp;);
 281 
 282     static void frontendCreated();
 283     static void frontendDeleted();
 284     static bool hasFrontends() { return s_frontendCounter; }
 285 
 286     static void firstFrontendCreated();
 287     static void lastFrontendDeleted();
 288 
 289     static bool consoleAgentEnabled(ScriptExecutionContext*);
 290     static bool timelineAgentEnabled(ScriptExecutionContext*);
 291 
 292     static InstrumentingAgents* instrumentingAgentsForPage(Page*);
 293 
 294     static void registerInstrumentingAgents(InstrumentingAgents&amp;);
 295     static void unregisterInstrumentingAgents(InstrumentingAgents&amp;);
 296 
 297 private:
 298     static void didClearWindowObjectInWorldImpl(InstrumentingAgents&amp;, Frame&amp;, DOMWrapperWorld&amp;);
 299     static bool isDebuggerPausedImpl(InstrumentingAgents&amp;);
 300 
 301     static int identifierForNodeImpl(InstrumentingAgents&amp;, Node&amp;);
 302     static void addEventListenersToNodeImpl(InstrumentingAgents&amp;, Node&amp;);
 303     static void willInsertDOMNodeImpl(InstrumentingAgents&amp;, Node&amp; parent);
 304     static void didInsertDOMNodeImpl(InstrumentingAgents&amp;, Node&amp;);
 305     static void willRemoveDOMNodeImpl(InstrumentingAgents&amp;, Node&amp;);
 306     static void didRemoveDOMNodeImpl(InstrumentingAgents&amp;, Node&amp;);
 307     static void willModifyDOMAttrImpl(InstrumentingAgents&amp;, Element&amp;, const AtomicString&amp; oldValue, const AtomicString&amp; newValue);
 308     static void didModifyDOMAttrImpl(InstrumentingAgents&amp;, Element&amp;, const AtomicString&amp; name, const AtomicString&amp; value);
 309     static void didRemoveDOMAttrImpl(InstrumentingAgents&amp;, Element&amp;, const AtomicString&amp; name);
 310     static void characterDataModifiedImpl(InstrumentingAgents&amp;, CharacterData&amp;);
 311     static void didInvalidateStyleAttrImpl(InstrumentingAgents&amp;, Node&amp;);
 312     static void documentDetachedImpl(InstrumentingAgents&amp;, Document&amp;);
 313     static void frameWindowDiscardedImpl(InstrumentingAgents&amp;, DOMWindow*);
 314     static void mediaQueryResultChangedImpl(InstrumentingAgents&amp;);
 315     static void activeStyleSheetsUpdatedImpl(InstrumentingAgents&amp;, Document&amp;);
 316     static void didPushShadowRootImpl(InstrumentingAgents&amp;, Element&amp; host, ShadowRoot&amp;);
 317     static void willPopShadowRootImpl(InstrumentingAgents&amp;, Element&amp; host, ShadowRoot&amp;);
 318     static void didChangeCustomElementStateImpl(InstrumentingAgents&amp;, Element&amp;);
 319     static void pseudoElementCreatedImpl(InstrumentingAgents&amp;, PseudoElement&amp;);
 320     static void pseudoElementDestroyedImpl(InstrumentingAgents&amp;, PseudoElement&amp;);
 321     static void didCreateNamedFlowImpl(InstrumentingAgents&amp;, Document*, WebKitNamedFlow&amp;);
 322     static void willRemoveNamedFlowImpl(InstrumentingAgents&amp;, Document*, WebKitNamedFlow&amp;);
 323     static void didChangeRegionOversetImpl(InstrumentingAgents&amp;, Document&amp;, WebKitNamedFlow&amp;);
 324     static void didRegisterNamedFlowContentElementImpl(InstrumentingAgents&amp;, Document&amp;, WebKitNamedFlow&amp;, Node&amp; contentElement, Node* nextContentElement = nullptr);
 325     static void didUnregisterNamedFlowContentElementImpl(InstrumentingAgents&amp;, Document&amp;, WebKitNamedFlow&amp;, Node&amp; contentElement);
 326 
 327     static void mouseDidMoveOverElementImpl(InstrumentingAgents&amp;, const HitTestResult&amp;, unsigned modifierFlags);
 328     static bool handleMousePressImpl(InstrumentingAgents&amp;);
 329     static bool handleTouchEventImpl(InstrumentingAgents&amp;, Node&amp;);
 330     static bool forcePseudoStateImpl(InstrumentingAgents&amp;, const Element&amp;, CSSSelector::PseudoClassType);
 331 
 332     static void willSendXMLHttpRequestImpl(InstrumentingAgents&amp;, const String&amp; url);
 333     static void willFetchImpl(InstrumentingAgents&amp;, const String&amp; url);
 334     static void didInstallTimerImpl(InstrumentingAgents&amp;, int timerId, Seconds timeout, bool singleShot, ScriptExecutionContext&amp;);
 335     static void didRemoveTimerImpl(InstrumentingAgents&amp;, int timerId, ScriptExecutionContext&amp;);
 336 
 337     static void didPostMessageImpl(InstrumentingAgents&amp;, const TimerBase&amp;, JSC::ExecState&amp;);
 338     static void didFailPostMessageImpl(InstrumentingAgents&amp;, const TimerBase&amp;);
 339     static void willDispatchPostMessageImpl(InstrumentingAgents&amp;, const TimerBase&amp;);
 340     static void didDispatchPostMessageImpl(InstrumentingAgents&amp;, const TimerBase&amp;);
 341 
 342     static InspectorInstrumentationCookie willCallFunctionImpl(InstrumentingAgents&amp;, const String&amp; scriptName, int scriptLine, int scriptColumn, ScriptExecutionContext*);
 343     static void didCallFunctionImpl(const InspectorInstrumentationCookie&amp;, ScriptExecutionContext*);
 344     static void didAddEventListenerImpl(InstrumentingAgents&amp;, EventTarget&amp;, const AtomicString&amp; eventType, EventListener&amp;, bool capture);
 345     static void willRemoveEventListenerImpl(InstrumentingAgents&amp;, EventTarget&amp;, const AtomicString&amp; eventType, EventListener&amp;, bool capture);
 346     static bool isEventListenerDisabledImpl(InstrumentingAgents&amp;, EventTarget&amp;, const AtomicString&amp; eventType, EventListener&amp;, bool capture);
 347     static InspectorInstrumentationCookie willDispatchEventImpl(InstrumentingAgents&amp;, Document&amp;, const Event&amp;, bool hasEventListeners);
 348     static void willHandleEventImpl(InstrumentingAgents&amp;, const Event&amp;, const RegisteredEventListener&amp;);
 349     static void didHandleEventImpl(InstrumentingAgents&amp;);
 350     static void didDispatchEventImpl(const InspectorInstrumentationCookie&amp;);
 351     static InspectorInstrumentationCookie willDispatchEventOnWindowImpl(InstrumentingAgents&amp;, const Event&amp;, DOMWindow&amp;);
 352     static void didDispatchEventOnWindowImpl(const InspectorInstrumentationCookie&amp;);
 353     static void eventDidResetAfterDispatchImpl(InstrumentingAgents&amp;, const Event&amp;);
 354     static InspectorInstrumentationCookie willEvaluateScriptImpl(InstrumentingAgents&amp;, Frame&amp;, const String&amp; url, int lineNumber, int columnNumber);
 355     static void didEvaluateScriptImpl(const InspectorInstrumentationCookie&amp;, Frame&amp;);
 356     static InspectorInstrumentationCookie willFireTimerImpl(InstrumentingAgents&amp;, int timerId, bool oneShot, ScriptExecutionContext&amp;);
 357     static void didFireTimerImpl(const InspectorInstrumentationCookie&amp;);
 358     static void didInvalidateLayoutImpl(InstrumentingAgents&amp;, Frame&amp;);
 359     static InspectorInstrumentationCookie willLayoutImpl(InstrumentingAgents&amp;, Frame&amp;);
 360     static void didLayoutImpl(const InspectorInstrumentationCookie&amp;, RenderObject&amp;);
 361     static void didScrollImpl(InstrumentingAgents&amp;);
 362     static void willCompositeImpl(InstrumentingAgents&amp;, Frame&amp;);
 363     static void didCompositeImpl(InstrumentingAgents&amp;);
 364     static void willPaintImpl(InstrumentingAgents&amp;, RenderObject&amp;);
 365     static void didPaintImpl(InstrumentingAgents&amp;, RenderObject&amp;, const LayoutRect&amp;);
 366     static InspectorInstrumentationCookie willRecalculateStyleImpl(InstrumentingAgents&amp;, Document&amp;);
 367     static void didRecalculateStyleImpl(const InspectorInstrumentationCookie&amp;);
 368     static void didScheduleStyleRecalculationImpl(InstrumentingAgents&amp;, Document&amp;);
 369     static void applyUserAgentOverrideImpl(InstrumentingAgents&amp;, String&amp;);
 370     static void applyEmulatedMediaImpl(InstrumentingAgents&amp;, String&amp;);
 371 
 372     static void willSendRequestImpl(InstrumentingAgents&amp;, unsigned long identifier, DocumentLoader*, ResourceRequest&amp;, const ResourceResponse&amp; redirectResponse);
 373     static void willSendRequestOfTypeImpl(InstrumentingAgents&amp;, unsigned long identifier, DocumentLoader*, ResourceRequest&amp;, LoadType);
 374     static void markResourceAsCachedImpl(InstrumentingAgents&amp;, unsigned long identifier);
 375     static void didLoadResourceFromMemoryCacheImpl(InstrumentingAgents&amp;, DocumentLoader*, CachedResource*);
 376     static void didReceiveResourceResponseImpl(InstrumentingAgents&amp;, unsigned long identifier, DocumentLoader*, const ResourceResponse&amp;, ResourceLoader*);
 377     static void didReceiveThreadableLoaderResponseImpl(InstrumentingAgents&amp;, DocumentThreadableLoader&amp;, unsigned long identifier);
 378     static void didReceiveDataImpl(InstrumentingAgents&amp;, unsigned long identifier, const char* data, int dataLength, int encodedDataLength);
 379     static void didFinishLoadingImpl(InstrumentingAgents&amp;, unsigned long identifier, DocumentLoader*, const NetworkLoadMetrics&amp;, ResourceLoader*);
 380     static void didFailLoadingImpl(InstrumentingAgents&amp;, unsigned long identifier, DocumentLoader*, const ResourceError&amp;);
 381     static void willLoadXHRSynchronouslyImpl(InstrumentingAgents&amp;);
 382     static void didLoadXHRSynchronouslyImpl(InstrumentingAgents&amp;);
 383     static void scriptImportedImpl(InstrumentingAgents&amp;, unsigned long identifier, const String&amp; sourceString);
 384     static void scriptExecutionBlockedByCSPImpl(InstrumentingAgents&amp;, const String&amp; directiveText);
 385     static void didReceiveScriptResponseImpl(InstrumentingAgents&amp;, unsigned long identifier);
 386     static void domContentLoadedEventFiredImpl(InstrumentingAgents&amp;, Frame&amp;);
 387     static void loadEventFiredImpl(InstrumentingAgents&amp;, Frame*);
 388     static void frameDetachedFromParentImpl(InstrumentingAgents&amp;, Frame&amp;);
 389     static void didCommitLoadImpl(InstrumentingAgents&amp;, Frame&amp;, DocumentLoader*);
 390     static void frameDocumentUpdatedImpl(InstrumentingAgents&amp;, Frame&amp;);
 391     static void loaderDetachedFromFrameImpl(InstrumentingAgents&amp;, DocumentLoader&amp;);
 392     static void frameStartedLoadingImpl(InstrumentingAgents&amp;, Frame&amp;);
 393     static void frameStoppedLoadingImpl(InstrumentingAgents&amp;, Frame&amp;);
 394     static void frameScheduledNavigationImpl(InstrumentingAgents&amp;, Frame&amp;, Seconds delay);
 395     static void frameClearedScheduledNavigationImpl(InstrumentingAgents&amp;, Frame&amp;);
 396     static void defaultAppearanceDidChangeImpl(InstrumentingAgents&amp;, bool useDarkAppearance);
 397     static void willDestroyCachedResourceImpl(CachedResource&amp;);
 398 
 399     static void addMessageToConsoleImpl(InstrumentingAgents&amp;, std::unique_ptr&lt;Inspector::ConsoleMessage&gt;);
 400 
 401     static void consoleCountImpl(InstrumentingAgents&amp;, JSC::ExecState*, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp;);
 402     static void takeHeapSnapshotImpl(InstrumentingAgents&amp;, const String&amp; title);
 403     static void startConsoleTimingImpl(InstrumentingAgents&amp;, Frame&amp;, const String&amp; title);
 404     static void startConsoleTimingImpl(InstrumentingAgents&amp;, const String&amp; title);
 405     static void stopConsoleTimingImpl(InstrumentingAgents&amp;, Frame&amp;, const String&amp; title, Ref&lt;Inspector::ScriptCallStack&gt;&amp;&amp;);
 406     static void stopConsoleTimingImpl(InstrumentingAgents&amp;, const String&amp; title, Ref&lt;Inspector::ScriptCallStack&gt;&amp;&amp;);
 407     static void consoleTimeStampImpl(InstrumentingAgents&amp;, Frame&amp;, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp;);
 408     static void startProfilingImpl(InstrumentingAgents&amp;, JSC::ExecState*, const String&amp; title);
 409     static void stopProfilingImpl(InstrumentingAgents&amp;, JSC::ExecState*, const String&amp; title);
 410     static void consoleStartRecordingCanvasImpl(InstrumentingAgents&amp;, CanvasRenderingContext&amp;, JSC::ExecState&amp;, JSC::JSObject* options);
 411 
 412     static void didRequestAnimationFrameImpl(InstrumentingAgents&amp;, int callbackId, Document&amp;);
 413     static void didCancelAnimationFrameImpl(InstrumentingAgents&amp;, int callbackId, Document&amp;);
 414     static InspectorInstrumentationCookie willFireAnimationFrameImpl(InstrumentingAgents&amp;, int callbackId, Document&amp;);
 415     static void didFireAnimationFrameImpl(const InspectorInstrumentationCookie&amp;);
 416 
 417     static InspectorInstrumentationCookie willFireObserverCallbackImpl(InstrumentingAgents&amp;, const String&amp;, ScriptExecutionContext&amp;);
 418     static void didFireObserverCallbackImpl(const InspectorInstrumentationCookie&amp;);
 419 
 420     static void didOpenDatabaseImpl(InstrumentingAgents&amp;, RefPtr&lt;Database&gt;&amp;&amp;, const String&amp; domain, const String&amp; name, const String&amp; version);
 421 
 422     static void didDispatchDOMStorageEventImpl(InstrumentingAgents&amp;, const String&amp; key, const String&amp; oldValue, const String&amp; newValue, StorageType, SecurityOrigin*);
 423 
 424     static bool shouldWaitForDebuggerOnStartImpl(InstrumentingAgents&amp;);
 425     static void workerStartedImpl(InstrumentingAgents&amp;, WorkerInspectorProxy*, const URL&amp;);
 426     static void workerTerminatedImpl(InstrumentingAgents&amp;, WorkerInspectorProxy*);
 427 
 428     static void didCreateWebSocketImpl(InstrumentingAgents&amp;, unsigned long identifier, const URL&amp; requestURL);
 429     static void willSendWebSocketHandshakeRequestImpl(InstrumentingAgents&amp;, unsigned long identifier, const ResourceRequest&amp;);
 430     static void didReceiveWebSocketHandshakeResponseImpl(InstrumentingAgents&amp;, unsigned long identifier, const ResourceResponse&amp;);
 431     static void didCloseWebSocketImpl(InstrumentingAgents&amp;, unsigned long identifier);
 432     static void didReceiveWebSocketFrameImpl(InstrumentingAgents&amp;, unsigned long identifier, const WebSocketFrame&amp;);
 433     static void didSendWebSocketFrameImpl(InstrumentingAgents&amp;, unsigned long identifier, const WebSocketFrame&amp;);
 434     static void didReceiveWebSocketFrameErrorImpl(InstrumentingAgents&amp;, unsigned long identifier, const String&amp;);
 435 
 436 #if ENABLE(RESOURCE_USAGE)
 437     static void didHandleMemoryPressureImpl(InstrumentingAgents&amp;, Critical);
 438 #endif
 439 
 440     static void networkStateChangedImpl(InstrumentingAgents&amp;);
 441     static void updateApplicationCacheStatusImpl(InstrumentingAgents&amp;, Frame&amp;);
 442 
 443     static void didChangeCSSCanvasClientNodesImpl(InstrumentingAgents&amp;, CanvasBase&amp;);
 444     static void didCreateCanvasRenderingContextImpl(InstrumentingAgents&amp;, CanvasRenderingContext&amp;);
 445     static void didChangeCanvasMemoryImpl(InstrumentingAgents&amp;, CanvasRenderingContext&amp;);
 446     static void recordCanvasActionImpl(InstrumentingAgents&amp;, CanvasRenderingContext&amp;, const String&amp;, Vector&lt;RecordCanvasActionVariant&gt;&amp;&amp; = { });
 447     static void didFinishRecordingCanvasFrameImpl(InstrumentingAgents&amp;, CanvasRenderingContext&amp;, bool forceDispatch = false);
 448 #if ENABLE(WEBGL)
 449     static void didEnableExtensionImpl(InstrumentingAgents&amp;, WebGLRenderingContextBase&amp;, const String&amp;);
 450     static void didCreateProgramImpl(InstrumentingAgents&amp;, WebGLRenderingContextBase&amp;, WebGLProgram&amp;);
 451     static void willDeleteProgramImpl(InstrumentingAgents&amp;, WebGLProgram&amp;);
 452     static bool isShaderProgramDisabledImpl(InstrumentingAgents&amp;, WebGLProgram&amp;);
 453     static bool isShaderProgramHighlightedImpl(InstrumentingAgents&amp;, WebGLProgram&amp;);
 454 #endif
 455 
 456     static void layerTreeDidChangeImpl(InstrumentingAgents&amp;);
 457     static void renderLayerDestroyedImpl(InstrumentingAgents&amp;, const RenderLayer&amp;);
 458 
 459     static InstrumentingAgents&amp; instrumentingAgentsForPage(Page&amp;);
 460     static InstrumentingAgents&amp; instrumentingAgentsForWorkerGlobalScope(WorkerGlobalScope&amp;);
 461 
 462     static InstrumentingAgents* instrumentingAgentsForFrame(Frame&amp;);
 463     static InstrumentingAgents* instrumentingAgentsForFrame(Frame*);
 464     static InstrumentingAgents* instrumentingAgentsForContext(ScriptExecutionContext*);
 465     static InstrumentingAgents* instrumentingAgentsForContext(ScriptExecutionContext&amp;);
 466     static InstrumentingAgents* instrumentingAgentsForDocument(Document&amp;);
 467     static InstrumentingAgents* instrumentingAgentsForDocument(Document*);
 468     static InstrumentingAgents* instrumentingAgentsForRenderer(RenderObject&amp;);
 469     static InstrumentingAgents* instrumentingAgentsForWorkerGlobalScope(WorkerGlobalScope*);
 470 
 471     static InspectorTimelineAgent* retrieveTimelineAgent(const InspectorInstrumentationCookie&amp;);
 472 
 473     WEBCORE_EXPORT static int s_frontendCounter;
 474 };
 475 
 476 inline void InspectorInstrumentation::didClearWindowObjectInWorld(Frame&amp; frame, DOMWrapperWorld&amp; world)
 477 {
 478     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 479         didClearWindowObjectInWorldImpl(*instrumentingAgents, frame, world);
 480 }
 481 
 482 inline bool InspectorInstrumentation::isDebuggerPaused(Frame* frame)
 483 {
 484     FAST_RETURN_IF_NO_FRONTENDS(false);
 485     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 486         return isDebuggerPausedImpl(*instrumentingAgents);
 487     return false;
 488 }
 489 
 490 inline int InspectorInstrumentation::identifierForNode(Node&amp; node)
 491 {
 492     FAST_RETURN_IF_NO_FRONTENDS(0);
 493     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(node.document()))
 494         return identifierForNodeImpl(*instrumentingAgents, node);
 495     return 0;
 496 }
 497 
 498 inline void InspectorInstrumentation::addEventListenersToNode(Node&amp; node)
 499 {
 500     FAST_RETURN_IF_NO_FRONTENDS(void());
 501     if (auto* instrumentingAgents = instrumentingAgentsForDocument(node.document()))
 502         addEventListenersToNodeImpl(*instrumentingAgents, node);
 503 }
 504 
 505 inline void InspectorInstrumentation::willInsertDOMNode(Document&amp; document, Node&amp; parent)
 506 {
 507     FAST_RETURN_IF_NO_FRONTENDS(void());
 508     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 509         willInsertDOMNodeImpl(*instrumentingAgents, parent);
 510 }
 511 
 512 inline void InspectorInstrumentation::didInsertDOMNode(Document&amp; document, Node&amp; node)
 513 {
 514     FAST_RETURN_IF_NO_FRONTENDS(void());
 515     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 516         didInsertDOMNodeImpl(*instrumentingAgents, node);
 517 }
 518 
 519 inline void InspectorInstrumentation::willRemoveDOMNode(Document&amp; document, Node&amp; node)
 520 {
 521     FAST_RETURN_IF_NO_FRONTENDS(void());
 522     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 523         willRemoveDOMNodeImpl(*instrumentingAgents, node);
 524 }
 525 
 526 inline void InspectorInstrumentation::didRemoveDOMNode(Document&amp; document, Node&amp; node)
 527 {
 528     FAST_RETURN_IF_NO_FRONTENDS(void());
 529     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 530         didRemoveDOMNodeImpl(*instrumentingAgents, node);
 531 }
 532 
 533 inline void InspectorInstrumentation::willModifyDOMAttr(Document&amp; document, Element&amp; element, const AtomicString&amp; oldValue, const AtomicString&amp; newValue)
 534 {
 535     FAST_RETURN_IF_NO_FRONTENDS(void());
 536     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 537         willModifyDOMAttrImpl(*instrumentingAgents, element, oldValue, newValue);
 538 }
 539 
 540 inline void InspectorInstrumentation::didModifyDOMAttr(Document&amp; document, Element&amp; element, const AtomicString&amp; name, const AtomicString&amp; value)
 541 {
 542     FAST_RETURN_IF_NO_FRONTENDS(void());
 543     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 544         didModifyDOMAttrImpl(*instrumentingAgents, element, name, value);
 545 }
 546 
 547 inline void InspectorInstrumentation::didRemoveDOMAttr(Document&amp; document, Element&amp; element, const AtomicString&amp; name)
 548 {
 549     FAST_RETURN_IF_NO_FRONTENDS(void());
 550     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 551         didRemoveDOMAttrImpl(*instrumentingAgents, element, name);
 552 }
 553 
 554 inline void InspectorInstrumentation::didInvalidateStyleAttr(Document&amp; document, Node&amp; node)
 555 {
 556     FAST_RETURN_IF_NO_FRONTENDS(void());
 557     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 558         didInvalidateStyleAttrImpl(*instrumentingAgents, node);
 559 }
 560 
 561 inline void InspectorInstrumentation::documentDetached(Document&amp; document)
 562 {
 563     FAST_RETURN_IF_NO_FRONTENDS(void());
 564     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 565         documentDetachedImpl(*instrumentingAgents, document);
 566 }
 567 
 568 inline void InspectorInstrumentation::frameWindowDiscarded(Frame&amp; frame, DOMWindow* domWindow)
 569 {
 570     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 571         frameWindowDiscardedImpl(*instrumentingAgents, domWindow);
 572 }
 573 
 574 inline void InspectorInstrumentation::mediaQueryResultChanged(Document&amp; document)
 575 {
 576     FAST_RETURN_IF_NO_FRONTENDS(void());
 577     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 578         mediaQueryResultChangedImpl(*instrumentingAgents);
 579 }
 580 
 581 inline void InspectorInstrumentation::activeStyleSheetsUpdated(Document&amp; document)
 582 {
 583     FAST_RETURN_IF_NO_FRONTENDS(void());
 584     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 585         activeStyleSheetsUpdatedImpl(*instrumentingAgents, document);
 586 }
 587 
 588 inline void InspectorInstrumentation::didPushShadowRoot(Element&amp; host, ShadowRoot&amp; root)
 589 {
 590     FAST_RETURN_IF_NO_FRONTENDS(void());
 591     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(host.document()))
 592         didPushShadowRootImpl(*instrumentingAgents, host, root);
 593 }
 594 
 595 inline void InspectorInstrumentation::willPopShadowRoot(Element&amp; host, ShadowRoot&amp; root)
 596 {
 597     FAST_RETURN_IF_NO_FRONTENDS(void());
 598     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(host.document()))
 599         willPopShadowRootImpl(*instrumentingAgents, host, root);
 600 }
 601 
 602 inline void InspectorInstrumentation::didChangeCustomElementState(Element&amp; element)
 603 {
 604     FAST_RETURN_IF_NO_FRONTENDS(void());
 605     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(element.document()))
 606         didChangeCustomElementStateImpl(*instrumentingAgents, element);
 607 }
 608 
 609 inline void InspectorInstrumentation::pseudoElementCreated(Page* page, PseudoElement&amp; pseudoElement)
 610 {
 611     FAST_RETURN_IF_NO_FRONTENDS(void());
 612     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForPage(page))
 613         pseudoElementCreatedImpl(*instrumentingAgents, pseudoElement);
 614 }
 615 
 616 inline void InspectorInstrumentation::pseudoElementDestroyed(Page* page, PseudoElement&amp; pseudoElement)
 617 {
 618     FAST_RETURN_IF_NO_FRONTENDS(void());
 619     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForPage(page))
 620         pseudoElementDestroyedImpl(*instrumentingAgents, pseudoElement);
 621 }
 622 
 623 inline void InspectorInstrumentation::didCreateNamedFlow(Document* document, WebKitNamedFlow&amp; namedFlow)
 624 {
 625     FAST_RETURN_IF_NO_FRONTENDS(void());
 626     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 627         didCreateNamedFlowImpl(*instrumentingAgents, document, namedFlow);
 628 }
 629 
 630 inline void InspectorInstrumentation::willRemoveNamedFlow(Document* document, WebKitNamedFlow&amp; namedFlow)
 631 {
 632     FAST_RETURN_IF_NO_FRONTENDS(void());
 633     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 634         willRemoveNamedFlowImpl(*instrumentingAgents, document, namedFlow);
 635 }
 636 
 637 inline void InspectorInstrumentation::didChangeRegionOverset(Document&amp; document, WebKitNamedFlow&amp; namedFlow)
 638 {
 639     FAST_RETURN_IF_NO_FRONTENDS(void());
 640     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 641         didChangeRegionOversetImpl(*instrumentingAgents, document, namedFlow);
 642 }
 643 
 644 inline void InspectorInstrumentation::didRegisterNamedFlowContentElement(Document&amp; document, WebKitNamedFlow&amp; namedFlow, Node&amp; contentElement, Node* nextContentElement)
 645 {
 646     FAST_RETURN_IF_NO_FRONTENDS(void());
 647     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 648         didRegisterNamedFlowContentElementImpl(*instrumentingAgents, document, namedFlow, contentElement, nextContentElement);
 649 }
 650 
 651 inline void InspectorInstrumentation::didUnregisterNamedFlowContentElement(Document&amp; document, WebKitNamedFlow&amp; namedFlow, Node&amp; contentElement)
 652 {
 653     FAST_RETURN_IF_NO_FRONTENDS(void());
 654     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 655         didUnregisterNamedFlowContentElementImpl(*instrumentingAgents, document, namedFlow, contentElement);
 656 }
 657 
 658 inline void InspectorInstrumentation::mouseDidMoveOverElement(Page&amp; page, const HitTestResult&amp; result, unsigned modifierFlags)
 659 {
 660     FAST_RETURN_IF_NO_FRONTENDS(void());
 661     mouseDidMoveOverElementImpl(instrumentingAgentsForPage(page), result, modifierFlags);
 662 }
 663 
 664 inline bool InspectorInstrumentation::handleTouchEvent(Frame&amp; frame, Node&amp; node)
 665 {
 666     FAST_RETURN_IF_NO_FRONTENDS(false);
 667     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 668         return handleTouchEventImpl(*instrumentingAgents, node);
 669     return false;
 670 }
 671 
 672 inline bool InspectorInstrumentation::handleMousePress(Frame&amp; frame)
 673 {
 674     FAST_RETURN_IF_NO_FRONTENDS(false);
 675     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 676         return handleMousePressImpl(*instrumentingAgents);
 677     return false;
 678 }
 679 
 680 inline bool InspectorInstrumentation::forcePseudoState(const Element&amp; element, CSSSelector::PseudoClassType pseudoState)
 681 {
 682     FAST_RETURN_IF_NO_FRONTENDS(false);
 683     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(element.document()))
 684         return forcePseudoStateImpl(*instrumentingAgents, element, pseudoState);
 685     return false;
 686 }
 687 
 688 inline void InspectorInstrumentation::characterDataModified(Document&amp; document, CharacterData&amp; characterData)
 689 {
 690     FAST_RETURN_IF_NO_FRONTENDS(void());
 691     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 692         characterDataModifiedImpl(*instrumentingAgents, characterData);
 693 }
 694 
 695 inline void InspectorInstrumentation::willSendXMLHttpRequest(ScriptExecutionContext* context, const String&amp; url)
 696 {
 697     FAST_RETURN_IF_NO_FRONTENDS(void());
 698     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
 699         willSendXMLHttpRequestImpl(*instrumentingAgents, url);
 700 }
 701 
 702 inline void InspectorInstrumentation::willFetch(ScriptExecutionContext&amp; context, const String&amp; url)
 703 {
 704     FAST_RETURN_IF_NO_FRONTENDS(void());
 705     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
 706         willFetchImpl(*instrumentingAgents, url);
 707 }
 708 
 709 inline void InspectorInstrumentation::didInstallTimer(ScriptExecutionContext&amp; context, int timerId, Seconds timeout, bool singleShot)
 710 {
 711     FAST_RETURN_IF_NO_FRONTENDS(void());
 712     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
 713         didInstallTimerImpl(*instrumentingAgents, timerId, timeout, singleShot, context);
 714 }
 715 
 716 inline void InspectorInstrumentation::didRemoveTimer(ScriptExecutionContext&amp; context, int timerId)
 717 {
 718     FAST_RETURN_IF_NO_FRONTENDS(void());
 719     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
 720         didRemoveTimerImpl(*instrumentingAgents, timerId, context);
 721 }
 722 
 723 inline void InspectorInstrumentation::didAddEventListener(EventTarget&amp; target, const AtomicString&amp; eventType, EventListener&amp; listener, bool capture)
 724 {
 725     FAST_RETURN_IF_NO_FRONTENDS(void());
 726     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(target.scriptExecutionContext()))
 727         didAddEventListenerImpl(*instrumentingAgents, target, eventType, listener, capture);
 728 }
 729 
 730 inline void InspectorInstrumentation::willRemoveEventListener(EventTarget&amp; target, const AtomicString&amp; eventType, EventListener&amp; listener, bool capture)
 731 {
 732     FAST_RETURN_IF_NO_FRONTENDS(void());
 733     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(target.scriptExecutionContext()))
 734         willRemoveEventListenerImpl(*instrumentingAgents, target, eventType, listener, capture);
 735 }
 736 
 737 inline bool InspectorInstrumentation::isEventListenerDisabled(EventTarget&amp; target, const AtomicString&amp; eventType, EventListener&amp; listener, bool capture)
 738 {
 739     FAST_RETURN_IF_NO_FRONTENDS(false);
 740     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(target.scriptExecutionContext()))
 741         return isEventListenerDisabledImpl(*instrumentingAgents, target, eventType, listener, capture);
 742     return false;
 743 }
 744 
 745 inline void InspectorInstrumentation::didPostMessage(Frame&amp; frame, TimerBase&amp; timer, JSC::ExecState&amp; state)
 746 {
 747     FAST_RETURN_IF_NO_FRONTENDS(void());
 748     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 749         didPostMessageImpl(*instrumentingAgents, timer, state);
 750 }
 751 
 752 inline void InspectorInstrumentation::didFailPostMessage(Frame&amp; frame, TimerBase&amp; timer)
 753 {
 754     FAST_RETURN_IF_NO_FRONTENDS(void());
 755     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 756         didFailPostMessageImpl(*instrumentingAgents, timer);
 757 }
 758 
 759 inline void InspectorInstrumentation::willDispatchPostMessage(Frame&amp; frame, TimerBase&amp; timer)
 760 {
 761     FAST_RETURN_IF_NO_FRONTENDS(void());
 762     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 763         willDispatchPostMessageImpl(*instrumentingAgents, timer);
 764 }
 765 
 766 inline void InspectorInstrumentation::didDispatchPostMessage(Frame&amp; frame, TimerBase&amp; timer)
 767 {
 768     FAST_RETURN_IF_NO_FRONTENDS(void());
 769     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 770         didDispatchPostMessageImpl(*instrumentingAgents, timer);
 771 }
 772 
 773 inline InspectorInstrumentationCookie InspectorInstrumentation::willCallFunction(ScriptExecutionContext* context, const String&amp; scriptName, int scriptLine, int scriptColumn)
 774 {
 775     FAST_RETURN_IF_NO_FRONTENDS(InspectorInstrumentationCookie());
 776     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
 777         return willCallFunctionImpl(*instrumentingAgents, scriptName, scriptLine, scriptColumn, context);
 778     return InspectorInstrumentationCookie();
 779 }
 780 
 781 inline void InspectorInstrumentation::didCallFunction(const InspectorInstrumentationCookie&amp; cookie, ScriptExecutionContext* context)
 782 {
 783     FAST_RETURN_IF_NO_FRONTENDS(void());
 784     if (cookie.isValid())
 785         didCallFunctionImpl(cookie, context);
 786 }
 787 
 788 inline InspectorInstrumentationCookie InspectorInstrumentation::willDispatchEvent(Document&amp; document, const Event&amp; event, bool hasEventListeners)
 789 {
 790     FAST_RETURN_IF_NO_FRONTENDS(InspectorInstrumentationCookie());
 791     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 792         return willDispatchEventImpl(*instrumentingAgents, document, event, hasEventListeners);
 793     return InspectorInstrumentationCookie();
 794 }
 795 
 796 inline void InspectorInstrumentation::didDispatchEvent(const InspectorInstrumentationCookie&amp; cookie)
 797 {
 798     FAST_RETURN_IF_NO_FRONTENDS(void());
 799     if (cookie.isValid())
 800         didDispatchEventImpl(cookie);
 801 }
 802 
 803 inline void InspectorInstrumentation::willHandleEvent(ScriptExecutionContext&amp; context, const Event&amp; event, const RegisteredEventListener&amp; listener)
 804 {
 805     FAST_RETURN_IF_NO_FRONTENDS(void());
 806     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
 807         return willHandleEventImpl(*instrumentingAgents, event, listener);
 808 }
 809 
 810 inline void InspectorInstrumentation::didHandleEvent(ScriptExecutionContext&amp; context)
 811 {
 812     FAST_RETURN_IF_NO_FRONTENDS(void());
 813     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
 814         return didHandleEventImpl(*instrumentingAgents);
 815 }
 816 
 817 inline InspectorInstrumentationCookie InspectorInstrumentation::willDispatchEventOnWindow(Frame* frame, const Event&amp; event, DOMWindow&amp; window)
 818 {
 819     FAST_RETURN_IF_NO_FRONTENDS(InspectorInstrumentationCookie());
 820     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 821         return willDispatchEventOnWindowImpl(*instrumentingAgents, event, window);
 822     return InspectorInstrumentationCookie();
 823 }
 824 
 825 inline void InspectorInstrumentation::didDispatchEventOnWindow(const InspectorInstrumentationCookie&amp; cookie)
 826 {
 827     FAST_RETURN_IF_NO_FRONTENDS(void());
 828     if (cookie.isValid())
 829         didDispatchEventOnWindowImpl(cookie);
 830 }
 831 
 832 inline void InspectorInstrumentation::eventDidResetAfterDispatch(const Event&amp; event)
 833 {
 834     FAST_RETURN_IF_NO_FRONTENDS(void());
 835 
 836     if (!is&lt;Node&gt;(event.target()))
 837         return;
 838 
 839     auto* node = downcast&lt;Node&gt;(event.target());
 840     if (auto* instrumentingAgents = instrumentingAgentsForContext(node-&gt;scriptExecutionContext()))
 841         return eventDidResetAfterDispatchImpl(*instrumentingAgents, event);
 842 }
 843 
 844 inline InspectorInstrumentationCookie InspectorInstrumentation::willEvaluateScript(Frame&amp; frame, const String&amp; url, int lineNumber, int columnNumber)
 845 {
 846     FAST_RETURN_IF_NO_FRONTENDS(InspectorInstrumentationCookie());
 847     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 848         return willEvaluateScriptImpl(*instrumentingAgents, frame, url, lineNumber, columnNumber);
 849     return InspectorInstrumentationCookie();
 850 }
 851 
 852 inline void InspectorInstrumentation::didEvaluateScript(const InspectorInstrumentationCookie&amp; cookie, Frame&amp; frame)
 853 {
 854     FAST_RETURN_IF_NO_FRONTENDS(void());
 855     if (cookie.isValid())
 856         didEvaluateScriptImpl(cookie, frame);
 857 }
 858 
 859 inline InspectorInstrumentationCookie InspectorInstrumentation::willFireTimer(ScriptExecutionContext&amp; context, int timerId, bool oneShot)
 860 {
 861     FAST_RETURN_IF_NO_FRONTENDS(InspectorInstrumentationCookie());
 862     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
 863         return willFireTimerImpl(*instrumentingAgents, timerId, oneShot, context);
 864     return InspectorInstrumentationCookie();
 865 }
 866 
 867 inline void InspectorInstrumentation::didFireTimer(const InspectorInstrumentationCookie&amp; cookie)
 868 {
 869     FAST_RETURN_IF_NO_FRONTENDS(void());
 870     if (cookie.isValid())
 871         didFireTimerImpl(cookie);
 872 }
 873 
 874 inline void InspectorInstrumentation::didInvalidateLayout(Frame&amp; frame)
 875 {
 876     FAST_RETURN_IF_NO_FRONTENDS(void());
 877     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 878         didInvalidateLayoutImpl(*instrumentingAgents, frame);
 879 }
 880 
 881 inline InspectorInstrumentationCookie InspectorInstrumentation::willLayout(Frame&amp; frame)
 882 {
 883     FAST_RETURN_IF_NO_FRONTENDS(InspectorInstrumentationCookie());
 884     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 885         return willLayoutImpl(*instrumentingAgents, frame);
 886     return InspectorInstrumentationCookie();
 887 }
 888 
 889 inline void InspectorInstrumentation::didLayout(const InspectorInstrumentationCookie&amp; cookie, RenderObject&amp; root)
 890 {
 891     FAST_RETURN_IF_NO_FRONTENDS(void());
 892     if (cookie.isValid())
 893         didLayoutImpl(cookie, root);
 894 }
 895 
 896 inline void InspectorInstrumentation::didScroll(Page&amp; page)
 897 {
 898     FAST_RETURN_IF_NO_FRONTENDS(void());
 899     didScrollImpl(instrumentingAgentsForPage(page));
 900 }
 901 
 902 inline void InspectorInstrumentation::willComposite(Frame&amp; frame)
 903 {
 904     FAST_RETURN_IF_NO_FRONTENDS(void());
 905     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 906         willCompositeImpl(*instrumentingAgents, frame);
 907 }
 908 
 909 inline void InspectorInstrumentation::didComposite(Frame&amp; frame)
 910 {
 911     FAST_RETURN_IF_NO_FRONTENDS(void());
 912     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 913         didCompositeImpl(*instrumentingAgents);
 914 }
 915 
 916 inline void InspectorInstrumentation::willPaint(RenderObject&amp; renderer)
 917 {
 918     FAST_RETURN_IF_NO_FRONTENDS(void());
 919     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForRenderer(renderer))
 920         return willPaintImpl(*instrumentingAgents, renderer);
 921 }
 922 
 923 inline void InspectorInstrumentation::didPaint(RenderObject&amp; renderer, const LayoutRect&amp; rect)
 924 {
 925     FAST_RETURN_IF_NO_FRONTENDS(void());
 926     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForRenderer(renderer))
 927         didPaintImpl(*instrumentingAgents, renderer, rect);
 928 }
 929 
 930 inline InspectorInstrumentationCookie InspectorInstrumentation::willRecalculateStyle(Document&amp; document)
 931 {
 932     FAST_RETURN_IF_NO_FRONTENDS(InspectorInstrumentationCookie());
 933     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 934         return willRecalculateStyleImpl(*instrumentingAgents, document);
 935     return InspectorInstrumentationCookie();
 936 }
 937 
 938 inline void InspectorInstrumentation::didRecalculateStyle(const InspectorInstrumentationCookie&amp; cookie)
 939 {
 940     FAST_RETURN_IF_NO_FRONTENDS(void());
 941     if (cookie.isValid())
 942         didRecalculateStyleImpl(cookie);
 943 }
 944 
 945 inline void InspectorInstrumentation::didScheduleStyleRecalculation(Document&amp; document)
 946 {
 947     FAST_RETURN_IF_NO_FRONTENDS(void());
 948     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 949         didScheduleStyleRecalculationImpl(*instrumentingAgents, document);
 950 }
 951 
 952 inline void InspectorInstrumentation::applyUserAgentOverride(Frame&amp; frame, String&amp; userAgent)
 953 {
 954     FAST_RETURN_IF_NO_FRONTENDS(void());
 955     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 956         applyUserAgentOverrideImpl(*instrumentingAgents, userAgent);
 957 }
 958 
 959 inline void InspectorInstrumentation::applyEmulatedMedia(Frame&amp; frame, String&amp; media)
 960 {
 961     FAST_RETURN_IF_NO_FRONTENDS(void());
 962     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 963         applyEmulatedMediaImpl(*instrumentingAgents, media);
 964 }
 965 
 966 inline void InspectorInstrumentation::willSendRequest(Frame* frame, unsigned long identifier, DocumentLoader* loader, ResourceRequest&amp; request, const ResourceResponse&amp; redirectResponse)
 967 {
 968     FAST_RETURN_IF_NO_FRONTENDS(void());
 969     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 970         willSendRequestImpl(*instrumentingAgents, identifier, loader, request, redirectResponse);
 971 }
 972 
 973 inline void InspectorInstrumentation::willSendRequest(WorkerGlobalScope&amp; workerGlobalScope, unsigned long identifier, ResourceRequest&amp; request)
 974 {
 975     FAST_RETURN_IF_NO_FRONTENDS(void());
 976     willSendRequestImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), identifier, nullptr, request, ResourceResponse { });
 977 }
 978 
 979 inline void InspectorInstrumentation::willSendRequestOfType(Frame* frame, unsigned long identifier, DocumentLoader* loader, ResourceRequest&amp; request, LoadType loadType)
 980 {
 981     FAST_RETURN_IF_NO_FRONTENDS(void());
 982     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 983         willSendRequestOfTypeImpl(*instrumentingAgents, identifier, loader, request, loadType);
 984 }
 985 
 986 inline void InspectorInstrumentation::didLoadResourceFromMemoryCache(Page&amp; page, DocumentLoader* loader, CachedResource* resource)
 987 {
 988     FAST_RETURN_IF_NO_FRONTENDS(void());
 989     didLoadResourceFromMemoryCacheImpl(instrumentingAgentsForPage(page), loader, resource);
 990 }
 991 
 992 inline void InspectorInstrumentation::didReceiveResourceResponse(Frame&amp; frame, unsigned long identifier, DocumentLoader* loader, const ResourceResponse&amp; response, ResourceLoader* resourceLoader)
 993 {
 994     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 995         didReceiveResourceResponseImpl(*instrumentingAgents, identifier, loader, response, resourceLoader);
 996 }
 997 
 998 inline void InspectorInstrumentation::didReceiveResourceResponse(WorkerGlobalScope&amp; workerGlobalScope, unsigned long identifier, const ResourceResponse&amp; response)
 999 {
1000     didReceiveResourceResponseImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), identifier, nullptr, response, nullptr);
1001 }
1002 
1003 inline void InspectorInstrumentation::didReceiveThreadableLoaderResponse(DocumentThreadableLoader&amp; documentThreadableLoader, unsigned long identifier)
1004 {
1005     FAST_RETURN_IF_NO_FRONTENDS(void());
1006     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(documentThreadableLoader.document()))
1007         didReceiveThreadableLoaderResponseImpl(*instrumentingAgents, documentThreadableLoader, identifier);
1008 }
1009 
1010 inline void InspectorInstrumentation::didReceiveData(Frame* frame, unsigned long identifier, const char* data, int dataLength, int encodedDataLength)
1011 {
1012     FAST_RETURN_IF_NO_FRONTENDS(void());
1013     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1014         didReceiveDataImpl(*instrumentingAgents, identifier, data, dataLength, encodedDataLength);
1015 }
1016 
1017 inline void InspectorInstrumentation::didReceiveData(WorkerGlobalScope&amp; workerGlobalScope, unsigned long identifier, const char* data, int dataLength)
1018 {
1019     FAST_RETURN_IF_NO_FRONTENDS(void());
1020     didReceiveDataImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), identifier, data, dataLength, dataLength);
1021 }
1022 
1023 inline void InspectorInstrumentation::didFinishLoading(Frame* frame, DocumentLoader* loader, unsigned long identifier, const NetworkLoadMetrics&amp; networkLoadMetrics, ResourceLoader* resourceLoader)
1024 {
1025     FAST_RETURN_IF_NO_FRONTENDS(void());
1026     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1027         didFinishLoadingImpl(*instrumentingAgents, identifier, loader, networkLoadMetrics, resourceLoader);
1028 }
1029 
1030 inline void InspectorInstrumentation::didFinishLoading(WorkerGlobalScope&amp; workerGlobalScope, unsigned long identifier, const NetworkLoadMetrics&amp; networkLoadMetrics)
1031 {
1032     FAST_RETURN_IF_NO_FRONTENDS(void());
1033     didFinishLoadingImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), identifier, nullptr, networkLoadMetrics, nullptr);
1034 }
1035 
1036 inline void InspectorInstrumentation::didFailLoading(Frame* frame, DocumentLoader* loader, unsigned long identifier, const ResourceError&amp; error)
1037 {
1038     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1039         didFailLoadingImpl(*instrumentingAgents, identifier, loader, error);
1040 }
1041 
1042 inline void InspectorInstrumentation::didFailLoading(WorkerGlobalScope&amp; workerGlobalScope, unsigned long identifier, const ResourceError&amp; error)
1043 {
1044     didFailLoadingImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), identifier, nullptr, error);
1045 }
1046 
1047 inline void InspectorInstrumentation::continueAfterXFrameOptionsDenied(Frame&amp; frame, unsigned long identifier, DocumentLoader&amp; loader, const ResourceResponse&amp; response)
1048 {
1049     // Treat the same as didReceiveResponse.
1050     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1051         didReceiveResourceResponseImpl(*instrumentingAgents, identifier, &amp;loader, response, nullptr);
1052 }
1053 
1054 inline void InspectorInstrumentation::continueWithPolicyDownload(Frame&amp; frame, unsigned long identifier, DocumentLoader&amp; loader, const ResourceResponse&amp; response)
1055 {
1056     // Treat the same as didReceiveResponse.
1057     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1058         didReceiveResourceResponseImpl(*instrumentingAgents, identifier, &amp;loader, response, nullptr);
1059 }
1060 
1061 inline void InspectorInstrumentation::continueWithPolicyIgnore(Frame&amp; frame, unsigned long identifier, DocumentLoader&amp; loader, const ResourceResponse&amp; response)
1062 {
1063     // Treat the same as didReceiveResponse.
1064     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1065         didReceiveResourceResponseImpl(*instrumentingAgents, identifier, &amp;loader, response, nullptr);
1066 }
1067 
1068 inline void InspectorInstrumentation::willLoadXHRSynchronously(ScriptExecutionContext* context)
1069 {
1070     FAST_RETURN_IF_NO_FRONTENDS(void());
1071     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
1072         willLoadXHRSynchronouslyImpl(*instrumentingAgents);
1073 }
1074 
1075 inline void InspectorInstrumentation::didLoadXHRSynchronously(ScriptExecutionContext* context)
1076 {
1077     FAST_RETURN_IF_NO_FRONTENDS(void());
1078     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
1079         didLoadXHRSynchronouslyImpl(*instrumentingAgents);
1080 }
1081 
1082 inline void InspectorInstrumentation::scriptImported(ScriptExecutionContext&amp; context, unsigned long identifier, const String&amp; sourceString)
1083 {
1084     FAST_RETURN_IF_NO_FRONTENDS(void());
1085     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
1086         scriptImportedImpl(*instrumentingAgents, identifier, sourceString);
1087 }
1088 
1089 inline void InspectorInstrumentation::scriptExecutionBlockedByCSP(ScriptExecutionContext* context, const String&amp; directiveText)
1090 {
1091     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
1092         scriptExecutionBlockedByCSPImpl(*instrumentingAgents, directiveText);
1093 }
1094 
1095 inline void InspectorInstrumentation::didReceiveScriptResponse(ScriptExecutionContext* context, unsigned long identifier)
1096 {
1097     FAST_RETURN_IF_NO_FRONTENDS(void());
1098     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
1099         didReceiveScriptResponseImpl(*instrumentingAgents, identifier);
1100 }
1101 
1102 inline void InspectorInstrumentation::domContentLoadedEventFired(Frame&amp; frame)
1103 {
1104     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1105         domContentLoadedEventFiredImpl(*instrumentingAgents, frame);
1106 }
1107 
1108 inline void InspectorInstrumentation::loadEventFired(Frame* frame)
1109 {
1110     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1111         loadEventFiredImpl(*instrumentingAgents, frame);
1112 }
1113 
1114 inline void InspectorInstrumentation::frameDetachedFromParent(Frame&amp; frame)
1115 {
1116     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1117         frameDetachedFromParentImpl(*instrumentingAgents, frame);
1118 }
1119 
1120 inline void InspectorInstrumentation::didCommitLoad(Frame&amp; frame, DocumentLoader* loader)
1121 {
1122     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1123         didCommitLoadImpl(*instrumentingAgents, frame, loader);
1124 }
1125 
1126 inline void InspectorInstrumentation::frameDocumentUpdated(Frame&amp; frame)
1127 {
1128     FAST_RETURN_IF_NO_FRONTENDS(void());
1129     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1130         frameDocumentUpdatedImpl(*instrumentingAgents, frame);
1131 }
1132 
1133 inline void InspectorInstrumentation::loaderDetachedFromFrame(Frame&amp; frame, DocumentLoader&amp; loader)
1134 {
1135     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1136         loaderDetachedFromFrameImpl(*instrumentingAgents, loader);
1137 }
1138 
1139 inline void InspectorInstrumentation::frameStartedLoading(Frame&amp; frame)
1140 {
1141     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1142         frameStartedLoadingImpl(*instrumentingAgents, frame);
1143 }
1144 
1145 inline void InspectorInstrumentation::frameStoppedLoading(Frame&amp; frame)
1146 {
1147     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1148         frameStoppedLoadingImpl(*instrumentingAgents, frame);
1149 }
1150 
1151 inline void InspectorInstrumentation::frameScheduledNavigation(Frame&amp; frame, Seconds delay)
1152 {
1153     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1154         frameScheduledNavigationImpl(*instrumentingAgents, frame, delay);
1155 }
1156 
1157 inline void InspectorInstrumentation::frameClearedScheduledNavigation(Frame&amp; frame)
1158 {
1159     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1160         frameClearedScheduledNavigationImpl(*instrumentingAgents, frame);
1161 }
1162 
1163 inline void InspectorInstrumentation::defaultAppearanceDidChange(Page&amp; page, bool useDarkAppearance)
1164 {
1165     FAST_RETURN_IF_NO_FRONTENDS(void());
1166     defaultAppearanceDidChangeImpl(instrumentingAgentsForPage(page), useDarkAppearance);
1167 }
1168 
1169 inline void InspectorInstrumentation::willDestroyCachedResource(CachedResource&amp; cachedResource)
1170 {
1171     FAST_RETURN_IF_NO_FRONTENDS(void());
1172     willDestroyCachedResourceImpl(cachedResource);
1173 }
1174 
1175 inline void InspectorInstrumentation::didOpenDatabase(ScriptExecutionContext* context, RefPtr&lt;Database&gt;&amp;&amp; database, const String&amp; domain, const String&amp; name, const String&amp; version)
1176 {
1177     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
1178         didOpenDatabaseImpl(*instrumentingAgents, WTFMove(database), domain, name, version);
1179 }
1180 
1181 inline void InspectorInstrumentation::didDispatchDOMStorageEvent(Page&amp; page, const String&amp; key, const String&amp; oldValue, const String&amp; newValue, StorageType storageType, SecurityOrigin* securityOrigin)
1182 {
1183     FAST_RETURN_IF_NO_FRONTENDS(void());
1184     didDispatchDOMStorageEventImpl(instrumentingAgentsForPage(page), key, oldValue, newValue, storageType, securityOrigin);
1185 }
1186 
1187 inline bool InspectorInstrumentation::shouldWaitForDebuggerOnStart(ScriptExecutionContext&amp; context)
1188 {
1189     FAST_RETURN_IF_NO_FRONTENDS(false);
1190     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
1191         return shouldWaitForDebuggerOnStartImpl(*instrumentingAgents);
1192     return false;
1193 }
1194 
1195 inline void InspectorInstrumentation::workerStarted(ScriptExecutionContext&amp; context, WorkerInspectorProxy* proxy, const URL&amp; url)
1196 {
1197     FAST_RETURN_IF_NO_FRONTENDS(void());
1198     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
1199         workerStartedImpl(*instrumentingAgents, proxy, url);
1200 }
1201 
1202 inline void InspectorInstrumentation::workerTerminated(ScriptExecutionContext&amp; context, WorkerInspectorProxy* proxy)
1203 {
1204     FAST_RETURN_IF_NO_FRONTENDS(void());
1205     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
1206         workerTerminatedImpl(*instrumentingAgents, proxy);
1207 }
1208 
1209 inline void InspectorInstrumentation::didCreateWebSocket(Document* document, unsigned long identifier, const URL&amp; requestURL)
1210 {
1211     FAST_RETURN_IF_NO_FRONTENDS(void());
1212     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1213         didCreateWebSocketImpl(*instrumentingAgents, identifier, requestURL);
1214 }
1215 
1216 inline void InspectorInstrumentation::willSendWebSocketHandshakeRequest(Document* document, unsigned long identifier, const ResourceRequest&amp; request)
1217 {
1218     FAST_RETURN_IF_NO_FRONTENDS(void());
1219     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1220         willSendWebSocketHandshakeRequestImpl(*instrumentingAgents, identifier, request);
1221 }
1222 
1223 inline void InspectorInstrumentation::didReceiveWebSocketHandshakeResponse(Document* document, unsigned long identifier, const ResourceResponse&amp; response)
1224 {
1225     FAST_RETURN_IF_NO_FRONTENDS(void());
1226     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1227         didReceiveWebSocketHandshakeResponseImpl(*instrumentingAgents, identifier, response);
1228 }
1229 
1230 inline void InspectorInstrumentation::didCloseWebSocket(Document* document, unsigned long identifier)
1231 {
1232     FAST_RETURN_IF_NO_FRONTENDS(void());
1233     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1234         didCloseWebSocketImpl(*instrumentingAgents, identifier);
1235 }
1236 
1237 inline void InspectorInstrumentation::didReceiveWebSocketFrame(Document* document, unsigned long identifier, const WebSocketFrame&amp; frame)
1238 {
1239     FAST_RETURN_IF_NO_FRONTENDS(void());
1240     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1241         didReceiveWebSocketFrameImpl(*instrumentingAgents, identifier, frame);
1242 }
1243 
1244 inline void InspectorInstrumentation::didReceiveWebSocketFrameError(Document* document, unsigned long identifier, const String&amp; errorMessage)
1245 {
1246     FAST_RETURN_IF_NO_FRONTENDS(void());
1247     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1248         didReceiveWebSocketFrameErrorImpl(*instrumentingAgents, identifier, errorMessage);
1249 }
1250 
1251 inline void InspectorInstrumentation::didSendWebSocketFrame(Document* document, unsigned long identifier, const WebSocketFrame&amp; frame)
1252 {
1253     FAST_RETURN_IF_NO_FRONTENDS(void());
1254     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1255         didSendWebSocketFrameImpl(*instrumentingAgents, identifier, frame);
1256 }
1257 
1258 #if ENABLE(RESOURCE_USAGE)
1259 inline void InspectorInstrumentation::didHandleMemoryPressure(Page&amp; page, Critical critical)
1260 {
1261     FAST_RETURN_IF_NO_FRONTENDS(void());
1262     didHandleMemoryPressureImpl(instrumentingAgentsForPage(page), critical);
1263 }
1264 #endif
1265 
1266 inline void InspectorInstrumentation::didChangeCSSCanvasClientNodes(CanvasBase&amp; canvasBase)
1267 {
1268     FAST_RETURN_IF_NO_FRONTENDS(void());
1269     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(canvasBase.scriptExecutionContext()))
1270         didChangeCSSCanvasClientNodesImpl(*instrumentingAgents, canvasBase);
1271 }
1272 
1273 inline void InspectorInstrumentation::didCreateCanvasRenderingContext(CanvasRenderingContext&amp; context)
1274 {
1275     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context.canvasBase().scriptExecutionContext()))
1276         didCreateCanvasRenderingContextImpl(*instrumentingAgents, context);
1277 }
1278 
1279 inline void InspectorInstrumentation::didChangeCanvasMemory(CanvasRenderingContext&amp; context)
1280 {
1281     FAST_RETURN_IF_NO_FRONTENDS(void());
1282     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context.canvasBase().scriptExecutionContext()))
1283         didChangeCanvasMemoryImpl(*instrumentingAgents, context);
1284 }
1285 
1286 inline void InspectorInstrumentation::recordCanvasAction(CanvasRenderingContext&amp; context, const String&amp; name, Vector&lt;RecordCanvasActionVariant&gt;&amp;&amp; parameters)
1287 {
1288     FAST_RETURN_IF_NO_FRONTENDS(void());
1289     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context.canvasBase().scriptExecutionContext()))
1290         recordCanvasActionImpl(*instrumentingAgents, context, name, WTFMove(parameters));
1291 }
1292 
1293 inline void InspectorInstrumentation::didFinishRecordingCanvasFrame(CanvasRenderingContext&amp; context, bool forceDispatch)
1294 {
1295     FAST_RETURN_IF_NO_FRONTENDS(void());
1296     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context.canvasBase().scriptExecutionContext()))
1297         didFinishRecordingCanvasFrameImpl(*instrumentingAgents, context, forceDispatch);
1298 }
1299 
1300 #if ENABLE(WEBGL)
1301 inline void InspectorInstrumentation::didEnableExtension(WebGLRenderingContextBase&amp; contextWebGLBase, const String&amp; extension)
1302 {
1303     FAST_RETURN_IF_NO_FRONTENDS(void());
1304     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(contextWebGLBase.canvasBase().scriptExecutionContext()))
1305         didEnableExtensionImpl(*instrumentingAgents, contextWebGLBase, extension);
1306 }
1307 
1308 inline void InspectorInstrumentation::didCreateProgram(WebGLRenderingContextBase&amp; contextWebGLBase, WebGLProgram&amp; program)
1309 {
1310     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(contextWebGLBase.canvasBase().scriptExecutionContext()))
1311         didCreateProgramImpl(*instrumentingAgents, contextWebGLBase, program);
1312 }
1313 
1314 inline void InspectorInstrumentation::willDeleteProgram(WebGLRenderingContextBase&amp; contextWebGLBase, WebGLProgram&amp; program)
1315 {
1316     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(contextWebGLBase.canvasBase().scriptExecutionContext()))
1317         willDeleteProgramImpl(*instrumentingAgents, program);
1318 }
1319 
1320 inline bool InspectorInstrumentation::isShaderProgramDisabled(WebGLRenderingContextBase&amp; contextWebGLBase, WebGLProgram&amp; program)
1321 {
1322     FAST_RETURN_IF_NO_FRONTENDS(false);
1323     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(contextWebGLBase.canvasBase().scriptExecutionContext()))
1324         return isShaderProgramDisabledImpl(*instrumentingAgents, program);
1325     return false;
1326 }
1327 
1328 inline bool InspectorInstrumentation::isShaderProgramHighlighted(WebGLRenderingContextBase&amp; contextWebGLBase, WebGLProgram&amp; program)
1329 {
1330     FAST_RETURN_IF_NO_FRONTENDS(false);
1331     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(contextWebGLBase.canvasBase().scriptExecutionContext()))
1332         return isShaderProgramHighlightedImpl(*instrumentingAgents, program);
1333     return false;
1334 }
1335 #endif
1336 
1337 inline void InspectorInstrumentation::networkStateChanged(Page&amp; page)
1338 {
1339     FAST_RETURN_IF_NO_FRONTENDS(void());
1340     networkStateChangedImpl(instrumentingAgentsForPage(page));
1341 }
1342 
1343 inline void InspectorInstrumentation::updateApplicationCacheStatus(Frame* frame)
1344 {
1345     FAST_RETURN_IF_NO_FRONTENDS(void());
1346     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))
1347         updateApplicationCacheStatusImpl(*instrumentingAgents, *frame);
1348 }
1349 
1350 inline void InspectorInstrumentation::addMessageToConsole(Page&amp; page, std::unique_ptr&lt;Inspector::ConsoleMessage&gt; message)
1351 {
1352     addMessageToConsoleImpl(instrumentingAgentsForPage(page), WTFMove(message));
1353 }
1354 
1355 inline void InspectorInstrumentation::addMessageToConsole(WorkerGlobalScope&amp; workerGlobalScope, std::unique_ptr&lt;Inspector::ConsoleMessage&gt; message)
1356 {
1357     addMessageToConsoleImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), WTFMove(message));
1358 }
1359 
1360 inline void InspectorInstrumentation::consoleCount(Page&amp; page, JSC::ExecState* state, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp; arguments)
1361 {
1362     consoleCountImpl(instrumentingAgentsForPage(page), state, WTFMove(arguments));
1363 }
1364 
1365 inline void InspectorInstrumentation::consoleCount(WorkerGlobalScope&amp; workerGlobalScope, JSC::ExecState* state, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp; arguments)
1366 {
1367     consoleCountImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), state, WTFMove(arguments));
1368 }
1369 
1370 inline void InspectorInstrumentation::takeHeapSnapshot(Frame&amp; frame, const String&amp; title)
1371 {
1372     FAST_RETURN_IF_NO_FRONTENDS(void());
1373     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1374         takeHeapSnapshotImpl(*instrumentingAgents, title);
1375 }
1376 
1377 inline void InspectorInstrumentation::startConsoleTiming(Frame&amp; frame, const String&amp; title)
1378 {
1379     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1380         startConsoleTimingImpl(*instrumentingAgents, frame, title);
1381 }
1382 
1383 inline void InspectorInstrumentation::startConsoleTiming(WorkerGlobalScope&amp; workerGlobalScope, const String&amp; title)
1384 {
1385     startConsoleTimingImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), title);
1386 }
1387 
1388 inline void InspectorInstrumentation::stopConsoleTiming(Frame&amp; frame, const String&amp; title, Ref&lt;Inspector::ScriptCallStack&gt;&amp;&amp; stack)
1389 {
1390     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1391         stopConsoleTimingImpl(*instrumentingAgents, frame, title, WTFMove(stack));
1392 }
1393 
1394 inline void InspectorInstrumentation::stopConsoleTiming(WorkerGlobalScope&amp; workerGlobalScope, const String&amp; title, Ref&lt;Inspector::ScriptCallStack&gt;&amp;&amp; stack)
1395 {
1396     stopConsoleTimingImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), title, WTFMove(stack));
1397 }
1398 
1399 inline void InspectorInstrumentation::consoleTimeStamp(Frame&amp; frame, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp; arguments)
1400 {
1401     FAST_RETURN_IF_NO_FRONTENDS(void());
1402     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1403         consoleTimeStampImpl(*instrumentingAgents, frame, WTFMove(arguments));
1404 }
1405 
1406 inline void InspectorInstrumentation::startProfiling(Page&amp; page, JSC::ExecState* exec, const String &amp;title)
1407 {
1408     startProfilingImpl(instrumentingAgentsForPage(page), exec, title);
1409 }
1410 
1411 inline void InspectorInstrumentation::stopProfiling(Page&amp; page, JSC::ExecState* exec, const String &amp;title)
1412 {
1413     stopProfilingImpl(instrumentingAgentsForPage(page), exec, title);
1414 }
1415 
1416 inline void InspectorInstrumentation::consoleStartRecordingCanvas(CanvasRenderingContext&amp; context, JSC::ExecState&amp; exec, JSC::JSObject* options)
1417 {
1418     FAST_RETURN_IF_NO_FRONTENDS(void());
1419     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context.canvasBase().scriptExecutionContext()))
1420         consoleStartRecordingCanvasImpl(*instrumentingAgents, context, exec, options);
1421 }
1422 
1423 inline void InspectorInstrumentation::didRequestAnimationFrame(Document&amp; document, int callbackId)
1424 {
1425     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1426         didRequestAnimationFrameImpl(*instrumentingAgents, callbackId, document);
1427 }
1428 
1429 inline void InspectorInstrumentation::didCancelAnimationFrame(Document&amp; document, int callbackId)
1430 {
1431     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1432         didCancelAnimationFrameImpl(*instrumentingAgents, callbackId, document);
1433 }
1434 
1435 inline InspectorInstrumentationCookie InspectorInstrumentation::willFireAnimationFrame(Document&amp; document, int callbackId)
1436 {
1437     FAST_RETURN_IF_NO_FRONTENDS(InspectorInstrumentationCookie());
1438     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1439         return willFireAnimationFrameImpl(*instrumentingAgents, callbackId, document);
1440     return InspectorInstrumentationCookie();
1441 }
1442 
1443 inline void InspectorInstrumentation::didFireAnimationFrame(const InspectorInstrumentationCookie&amp; cookie)
1444 {
1445     FAST_RETURN_IF_NO_FRONTENDS(void());
1446     if (cookie.isValid())
1447         didFireAnimationFrameImpl(cookie);
1448 }
1449 
1450 inline InspectorInstrumentationCookie InspectorInstrumentation::willFireObserverCallback(ScriptExecutionContext&amp; context, const String&amp; callbackType)
1451 {
1452     FAST_RETURN_IF_NO_FRONTENDS(InspectorInstrumentationCookie());
1453     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
1454         return willFireObserverCallbackImpl(*instrumentingAgents, callbackType, context);
1455     return InspectorInstrumentationCookie();
1456 }
1457 
1458 inline void InspectorInstrumentation::didFireObserverCallback(const InspectorInstrumentationCookie&amp; cookie)
1459 {
1460     FAST_RETURN_IF_NO_FRONTENDS(void());
1461     if (cookie.isValid())
1462         didFireObserverCallbackImpl(cookie);
1463 }
1464 
1465 inline void InspectorInstrumentation::layerTreeDidChange(Page* page)
1466 {
1467     FAST_RETURN_IF_NO_FRONTENDS(void());
1468     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForPage(page))
1469         layerTreeDidChangeImpl(*instrumentingAgents);
1470 }
1471 
1472 inline void InspectorInstrumentation::renderLayerDestroyed(Page* page, const RenderLayer&amp; renderLayer)
1473 {
1474     FAST_RETURN_IF_NO_FRONTENDS(void());
1475     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForPage(page))
1476         renderLayerDestroyedImpl(*instrumentingAgents, renderLayer);
1477 }
1478 
1479 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForContext(ScriptExecutionContext* context)
1480 {
1481     return context ? instrumentingAgentsForContext(*context) : nullptr;
1482 }
1483 
1484 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForContext(ScriptExecutionContext&amp; context)
1485 {
1486     if (is&lt;Document&gt;(context))
1487         return instrumentingAgentsForPage(downcast&lt;Document&gt;(context).page());
1488     if (is&lt;WorkerGlobalScope&gt;(context))
1489         return &amp;instrumentingAgentsForWorkerGlobalScope(downcast&lt;WorkerGlobalScope&gt;(context));
1490     return nullptr;
1491 }
1492 
1493 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForFrame(Frame* frame)
1494 {
1495     return frame ? instrumentingAgentsForFrame(*frame) : nullptr;
1496 }
1497 
1498 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForFrame(Frame&amp; frame)
1499 {
1500     return instrumentingAgentsForPage(frame.page());
1501 }
1502 
1503 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForDocument(Document* document)
1504 {
1505     return document ? instrumentingAgentsForDocument(*document) : nullptr;
1506 }
1507 
1508 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForDocument(Document&amp; document)
1509 {
1510     Page* page = document.page();
1511     if (!page &amp;&amp; document.templateDocumentHost())
1512         page = document.templateDocumentHost()-&gt;page();
1513     return instrumentingAgentsForPage(page);
1514 }
1515 
1516 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForPage(Page* page)
1517 {
1518     return page ? &amp;instrumentingAgentsForPage(*page) : nullptr;
1519 }
1520 
1521 inline InstrumentingAgents&amp; InspectorInstrumentation::instrumentingAgentsForPage(Page&amp; page)
1522 {
1523     ASSERT(isMainThread());
1524     return page.inspectorController().m_instrumentingAgents.get();
1525 }
1526 
1527 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForWorkerGlobalScope(WorkerGlobalScope* workerGlobalScope)
1528 {
1529     return workerGlobalScope ? &amp;instrumentingAgentsForWorkerGlobalScope(*workerGlobalScope) : nullptr;
1530 }
1531 
1532 inline InstrumentingAgents&amp; InspectorInstrumentation::instrumentingAgentsForWorkerGlobalScope(WorkerGlobalScope&amp; workerGlobalScope)
1533 {
1534     return workerGlobalScope.inspectorController().m_instrumentingAgents;
1535 }
1536 
1537 inline void InspectorInstrumentation::frontendCreated()
1538 {
1539     ASSERT(isMainThread());
1540     s_frontendCounter++;
1541 
1542     if (s_frontendCounter == 1)
1543         InspectorInstrumentation::firstFrontendCreated();
1544 }
1545 
1546 inline void InspectorInstrumentation::frontendDeleted()
1547 {
1548     ASSERT(isMainThread());
1549     s_frontendCounter--;
1550 
1551     if (!s_frontendCounter)
1552         InspectorInstrumentation::lastFrontendDeleted();
1553 }
1554 
1555 } // namespace WebCore
    </pre>
  </body>
</html>
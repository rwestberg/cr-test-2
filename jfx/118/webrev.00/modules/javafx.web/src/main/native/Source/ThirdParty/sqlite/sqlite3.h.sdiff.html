<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/ThirdParty/sqlite/sqlite3.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="sqlite3.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="sqlite3ext.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/ThirdParty/sqlite/sqlite3.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  106 ** The SQLITE_VERSION_NUMBER for any given release of SQLite will also
  107 ** be larger than the release from which it is derived.  Either Y will
  108 ** be held constant and Z will be incremented or else Y will be incremented
  109 ** and Z will be reset to zero.
  110 **
  111 ** Since [version 3.6.18] ([dateof:3.6.18]),
  112 ** SQLite source code has been stored in the
  113 ** &lt;a href=&quot;http://www.fossil-scm.org/&quot;&gt;Fossil configuration management
  114 ** system&lt;/a&gt;.  ^The SQLITE_SOURCE_ID macro evaluates to
  115 ** a string which identifies a particular check-in of SQLite
  116 ** within its configuration management system.  ^The SQLITE_SOURCE_ID
  117 ** string contains the date and time of the check-in (UTC) and a SHA1
  118 ** or SHA3-256 hash of the entire source tree.  If the source code has
  119 ** been edited in any way since it was last checked in, then the last
  120 ** four hexadecimal digits of the hash may be modified.
  121 **
  122 ** See also: [sqlite3_libversion()],
  123 ** [sqlite3_libversion_number()], [sqlite3_sourceid()],
  124 ** [sqlite_version()] and [sqlite_source_id()].
  125 */
<span class="line-modified">  126 #define SQLITE_VERSION        &quot;3.30.1&quot;</span>
<span class="line-modified">  127 #define SQLITE_VERSION_NUMBER 3030001</span>
<span class="line-modified">  128 #define SQLITE_SOURCE_ID      &quot;2019-10-10 20:19:45 18db032d058f1436ce3dea84081f4ee5a0f2259ad97301d43c426bc7f3df1b0b&quot;</span>
  129 
  130 /*
  131 ** CAPI3REF: Run-Time Library Version Numbers
  132 ** KEYWORDS: sqlite3_version sqlite3_sourceid
  133 **
  134 ** These interfaces provide the same information as the [SQLITE_VERSION],
  135 ** [SQLITE_VERSION_NUMBER], and [SQLITE_SOURCE_ID] C preprocessor macros
  136 ** but are associated with the library instead of the header file.  ^(Cautious
  137 ** programmers might include assert() statements in their application to
  138 ** verify that values returned by these interfaces match the macros in
  139 ** the header, and thus ensure that the application is
  140 ** compiled with matching library and header files.
  141 **
  142 ** &lt;blockquote&gt;&lt;pre&gt;
  143 ** assert( sqlite3_libversion_number()==SQLITE_VERSION_NUMBER );
  144 ** assert( strncmp(sqlite3_sourceid(),SQLITE_SOURCE_ID,80)==0 );
  145 ** assert( strcmp(sqlite3_libversion(),SQLITE_VERSION)==0 );
  146 ** &lt;/pre&gt;&lt;/blockquote&gt;)^
  147 **
  148 ** ^The sqlite3_version[] string constant contains the text of [SQLITE_VERSION]
</pre>
<hr />
<pre>
  499 #define SQLITE_IOERR_SHMMAP            (SQLITE_IOERR | (21&lt;&lt;8))
  500 #define SQLITE_IOERR_SEEK              (SQLITE_IOERR | (22&lt;&lt;8))
  501 #define SQLITE_IOERR_DELETE_NOENT      (SQLITE_IOERR | (23&lt;&lt;8))
  502 #define SQLITE_IOERR_MMAP              (SQLITE_IOERR | (24&lt;&lt;8))
  503 #define SQLITE_IOERR_GETTEMPPATH       (SQLITE_IOERR | (25&lt;&lt;8))
  504 #define SQLITE_IOERR_CONVPATH          (SQLITE_IOERR | (26&lt;&lt;8))
  505 #define SQLITE_IOERR_VNODE             (SQLITE_IOERR | (27&lt;&lt;8))
  506 #define SQLITE_IOERR_AUTH              (SQLITE_IOERR | (28&lt;&lt;8))
  507 #define SQLITE_IOERR_BEGIN_ATOMIC      (SQLITE_IOERR | (29&lt;&lt;8))
  508 #define SQLITE_IOERR_COMMIT_ATOMIC     (SQLITE_IOERR | (30&lt;&lt;8))
  509 #define SQLITE_IOERR_ROLLBACK_ATOMIC   (SQLITE_IOERR | (31&lt;&lt;8))
  510 #define SQLITE_LOCKED_SHAREDCACHE      (SQLITE_LOCKED |  (1&lt;&lt;8))
  511 #define SQLITE_LOCKED_VTAB             (SQLITE_LOCKED |  (2&lt;&lt;8))
  512 #define SQLITE_BUSY_RECOVERY           (SQLITE_BUSY   |  (1&lt;&lt;8))
  513 #define SQLITE_BUSY_SNAPSHOT           (SQLITE_BUSY   |  (2&lt;&lt;8))
  514 #define SQLITE_CANTOPEN_NOTEMPDIR      (SQLITE_CANTOPEN | (1&lt;&lt;8))
  515 #define SQLITE_CANTOPEN_ISDIR          (SQLITE_CANTOPEN | (2&lt;&lt;8))
  516 #define SQLITE_CANTOPEN_FULLPATH       (SQLITE_CANTOPEN | (3&lt;&lt;8))
  517 #define SQLITE_CANTOPEN_CONVPATH       (SQLITE_CANTOPEN | (4&lt;&lt;8))
  518 #define SQLITE_CANTOPEN_DIRTYWAL       (SQLITE_CANTOPEN | (5&lt;&lt;8)) /* Not Used */

  519 #define SQLITE_CORRUPT_VTAB            (SQLITE_CORRUPT | (1&lt;&lt;8))
  520 #define SQLITE_CORRUPT_SEQUENCE        (SQLITE_CORRUPT | (2&lt;&lt;8))
  521 #define SQLITE_READONLY_RECOVERY       (SQLITE_READONLY | (1&lt;&lt;8))
  522 #define SQLITE_READONLY_CANTLOCK       (SQLITE_READONLY | (2&lt;&lt;8))
  523 #define SQLITE_READONLY_ROLLBACK       (SQLITE_READONLY | (3&lt;&lt;8))
  524 #define SQLITE_READONLY_DBMOVED        (SQLITE_READONLY | (4&lt;&lt;8))
  525 #define SQLITE_READONLY_CANTINIT       (SQLITE_READONLY | (5&lt;&lt;8))
  526 #define SQLITE_READONLY_DIRECTORY      (SQLITE_READONLY | (6&lt;&lt;8))
  527 #define SQLITE_ABORT_ROLLBACK          (SQLITE_ABORT | (2&lt;&lt;8))
  528 #define SQLITE_CONSTRAINT_CHECK        (SQLITE_CONSTRAINT | (1&lt;&lt;8))
  529 #define SQLITE_CONSTRAINT_COMMITHOOK   (SQLITE_CONSTRAINT | (2&lt;&lt;8))
  530 #define SQLITE_CONSTRAINT_FOREIGNKEY   (SQLITE_CONSTRAINT | (3&lt;&lt;8))
  531 #define SQLITE_CONSTRAINT_FUNCTION     (SQLITE_CONSTRAINT | (4&lt;&lt;8))
  532 #define SQLITE_CONSTRAINT_NOTNULL      (SQLITE_CONSTRAINT | (5&lt;&lt;8))
  533 #define SQLITE_CONSTRAINT_PRIMARYKEY   (SQLITE_CONSTRAINT | (6&lt;&lt;8))
  534 #define SQLITE_CONSTRAINT_TRIGGER      (SQLITE_CONSTRAINT | (7&lt;&lt;8))
  535 #define SQLITE_CONSTRAINT_UNIQUE       (SQLITE_CONSTRAINT | (8&lt;&lt;8))
  536 #define SQLITE_CONSTRAINT_VTAB         (SQLITE_CONSTRAINT | (9&lt;&lt;8))
  537 #define SQLITE_CONSTRAINT_ROWID        (SQLITE_CONSTRAINT |(10&lt;&lt;8))

  538 #define SQLITE_NOTICE_RECOVER_WAL      (SQLITE_NOTICE | (1&lt;&lt;8))
  539 #define SQLITE_NOTICE_RECOVER_ROLLBACK (SQLITE_NOTICE | (2&lt;&lt;8))
  540 #define SQLITE_WARNING_AUTOINDEX       (SQLITE_WARNING | (1&lt;&lt;8))
  541 #define SQLITE_AUTH_USER               (SQLITE_AUTH | (1&lt;&lt;8))
  542 #define SQLITE_OK_LOAD_PERMANENTLY     (SQLITE_OK | (1&lt;&lt;8))

  543 
  544 /*
  545 ** CAPI3REF: Flags For File Open Operations
  546 **
  547 ** These bit values are intended for use in the
  548 ** 3rd parameter to the [sqlite3_open_v2()] interface and
  549 ** in the 4th parameter to the [sqlite3_vfs.xOpen] method.
  550 */
  551 #define SQLITE_OPEN_READONLY         0x00000001  /* Ok for sqlite3_open_v2() */
  552 #define SQLITE_OPEN_READWRITE        0x00000002  /* Ok for sqlite3_open_v2() */
  553 #define SQLITE_OPEN_CREATE           0x00000004  /* Ok for sqlite3_open_v2() */
  554 #define SQLITE_OPEN_DELETEONCLOSE    0x00000008  /* VFS only */
  555 #define SQLITE_OPEN_EXCLUSIVE        0x00000010  /* VFS only */
  556 #define SQLITE_OPEN_AUTOPROXY        0x00000020  /* VFS only */
  557 #define SQLITE_OPEN_URI              0x00000040  /* Ok for sqlite3_open_v2() */
  558 #define SQLITE_OPEN_MEMORY           0x00000080  /* Ok for sqlite3_open_v2() */
  559 #define SQLITE_OPEN_MAIN_DB          0x00000100  /* VFS only */
  560 #define SQLITE_OPEN_TEMP_DB          0x00000200  /* VFS only */
  561 #define SQLITE_OPEN_TRANSIENT_DB     0x00000400  /* VFS only */
  562 #define SQLITE_OPEN_MAIN_JOURNAL     0x00000800  /* VFS only */
  563 #define SQLITE_OPEN_TEMP_JOURNAL     0x00001000  /* VFS only */
  564 #define SQLITE_OPEN_SUBJOURNAL       0x00002000  /* VFS only */
  565 #define SQLITE_OPEN_MASTER_JOURNAL   0x00004000  /* VFS only */
  566 #define SQLITE_OPEN_NOMUTEX          0x00008000  /* Ok for sqlite3_open_v2() */
  567 #define SQLITE_OPEN_FULLMUTEX        0x00010000  /* Ok for sqlite3_open_v2() */
  568 #define SQLITE_OPEN_SHAREDCACHE      0x00020000  /* Ok for sqlite3_open_v2() */
  569 #define SQLITE_OPEN_PRIVATECACHE     0x00040000  /* Ok for sqlite3_open_v2() */
  570 #define SQLITE_OPEN_WAL              0x00080000  /* VFS only */

  571 
  572 /* Reserved:                         0x00F00000 */
  573 
  574 /*
  575 ** CAPI3REF: Device Characteristics
  576 **
  577 ** The xDeviceCharacteristics method of the [sqlite3_io_methods]
  578 ** object returns an integer which is a vector of these
  579 ** bit values expressing I/O characteristics of the mass storage
  580 ** device that holds the file that the [sqlite3_io_methods]
  581 ** refers to.
  582 **
  583 ** The SQLITE_IOCAP_ATOMIC property means that all writes of
  584 ** any size are atomic.  The SQLITE_IOCAP_ATOMICnnn values
  585 ** mean that writes of blocks that are nnn bytes in size and
  586 ** are aligned to an address which is an integer multiple of
  587 ** nnn are atomic.  The SQLITE_IOCAP_SAFE_APPEND value means
  588 ** that when data is appended to a file, the data is appended
  589 ** first then the size of the file is extended, never the other
  590 ** way around.  The SQLITE_IOCAP_SEQUENTIAL property means that
</pre>
<hr />
<pre>
  962 ** of the char** argument point to a string obtained from [sqlite3_mprintf()]
  963 ** or the equivalent and that string will become the result of the pragma or
  964 ** the error message if the pragma fails. ^If the
  965 ** [SQLITE_FCNTL_PRAGMA] file control returns [SQLITE_NOTFOUND], then normal
  966 ** [PRAGMA] processing continues.  ^If the [SQLITE_FCNTL_PRAGMA]
  967 ** file control returns [SQLITE_OK], then the parser assumes that the
  968 ** VFS has handled the PRAGMA itself and the parser generates a no-op
  969 ** prepared statement if result string is NULL, or that returns a copy
  970 ** of the result string if the string is non-NULL.
  971 ** ^If the [SQLITE_FCNTL_PRAGMA] file control returns
  972 ** any result code other than [SQLITE_OK] or [SQLITE_NOTFOUND], that means
  973 ** that the VFS encountered an error while handling the [PRAGMA] and the
  974 ** compilation of the PRAGMA fails with an error.  ^The [SQLITE_FCNTL_PRAGMA]
  975 ** file control occurs at the beginning of pragma statement analysis and so
  976 ** it is able to override built-in [PRAGMA] statements.
  977 **
  978 ** &lt;li&gt;[[SQLITE_FCNTL_BUSYHANDLER]]
  979 ** ^The [SQLITE_FCNTL_BUSYHANDLER]
  980 ** file-control may be invoked by SQLite on the database file handle
  981 ** shortly after it is opened in order to provide a custom VFS with access
<span class="line-modified">  982 ** to the connections busy-handler callback. The argument is of type (void **)</span>
  983 ** - an array of two (void *) values. The first (void *) actually points
<span class="line-modified">  984 ** to a function of type (int (*)(void *)). In order to invoke the connections</span>
  985 ** busy-handler, this function should be invoked with the second (void *) in
  986 ** the array as the only argument. If it returns non-zero, then the operation
  987 ** should be retried. If it returns zero, the custom VFS should abandon the
  988 ** current operation.
  989 **
  990 ** &lt;li&gt;[[SQLITE_FCNTL_TEMPFILENAME]]
<span class="line-modified">  991 ** ^Application can invoke the [SQLITE_FCNTL_TEMPFILENAME] file-control</span>
  992 ** to have SQLite generate a
  993 ** temporary filename using the same algorithm that is followed to generate
  994 ** temporary filenames for TEMP tables and other internal uses.  The
  995 ** argument should be a char** which will be filled with the filename
  996 ** written into memory obtained from [sqlite3_malloc()].  The caller should
  997 ** invoke [sqlite3_free()] on the result to avoid a memory leak.
  998 **
  999 ** &lt;li&gt;[[SQLITE_FCNTL_MMAP_SIZE]]
 1000 ** The [SQLITE_FCNTL_MMAP_SIZE] file control is used to query or set the
 1001 ** maximum number of bytes that will be used for memory-mapped I/O.
 1002 ** The argument is a pointer to a value of type sqlite3_int64 that
 1003 ** is an advisory maximum number of bytes in the file to memory map.  The
 1004 ** pointer is overwritten with the old value.  The limit is not changed if
 1005 ** the value originally pointed to is negative, and so the current limit
 1006 ** can be queried by passing in a pointer to a negative number.  This
 1007 ** file-control is used internally to implement [PRAGMA mmap_size].
 1008 **
 1009 ** &lt;li&gt;[[SQLITE_FCNTL_TRACE]]
 1010 ** The [SQLITE_FCNTL_TRACE] file control provides advisory information
 1011 ** to the VFS about what the higher layers of the SQLite stack are doing.
</pre>
<hr />
<pre>
 1084 **
 1085 ** &lt;li&gt;[[SQLITE_FCNTL_LOCK_TIMEOUT]]
 1086 ** The [SQLITE_FCNTL_LOCK_TIMEOUT] opcode causes attempts to obtain
 1087 ** a file lock using the xLock or xShmLock methods of the VFS to wait
 1088 ** for up to M milliseconds before failing, where M is the single
 1089 ** unsigned integer parameter.
 1090 **
 1091 ** &lt;li&gt;[[SQLITE_FCNTL_DATA_VERSION]]
 1092 ** The [SQLITE_FCNTL_DATA_VERSION] opcode is used to detect changes to
 1093 ** a database file.  The argument is a pointer to a 32-bit unsigned integer.
 1094 ** The &quot;data version&quot; for the pager is written into the pointer.  The
 1095 ** &quot;data version&quot; changes whenever any change occurs to the corresponding
 1096 ** database file, either through SQL statements on the same database
 1097 ** connection or through transactions committed by separate database
 1098 ** connections possibly in other processes. The [sqlite3_total_changes()]
 1099 ** interface can be used to find if any database on the connection has changed,
 1100 ** but that interface responds to changes on TEMP as well as MAIN and does
 1101 ** not provide a mechanism to detect changes to MAIN only.  Also, the
 1102 ** [sqlite3_total_changes()] interface responds to internal changes only and
 1103 ** omits changes made by other database connections.  The
<span class="line-modified"> 1104 ** [PRAGMA data_version] command provide a mechanism to detect changes to</span>
 1105 ** a single attached database that occur due to other database connections,
 1106 ** but omits changes implemented by the database connection on which it is
 1107 ** called.  This file control is the only mechanism to detect changes that
 1108 ** happen either internally or externally and that are associated with
 1109 ** a particular attached database.






 1110 ** &lt;/ul&gt;
 1111 */
 1112 #define SQLITE_FCNTL_LOCKSTATE               1
 1113 #define SQLITE_FCNTL_GET_LOCKPROXYFILE       2
 1114 #define SQLITE_FCNTL_SET_LOCKPROXYFILE       3
 1115 #define SQLITE_FCNTL_LAST_ERRNO              4
 1116 #define SQLITE_FCNTL_SIZE_HINT               5
 1117 #define SQLITE_FCNTL_CHUNK_SIZE              6
 1118 #define SQLITE_FCNTL_FILE_POINTER            7
 1119 #define SQLITE_FCNTL_SYNC_OMITTED            8
 1120 #define SQLITE_FCNTL_WIN32_AV_RETRY          9
 1121 #define SQLITE_FCNTL_PERSIST_WAL            10
 1122 #define SQLITE_FCNTL_OVERWRITE              11
 1123 #define SQLITE_FCNTL_VFSNAME                12
 1124 #define SQLITE_FCNTL_POWERSAFE_OVERWRITE    13
 1125 #define SQLITE_FCNTL_PRAGMA                 14
 1126 #define SQLITE_FCNTL_BUSYHANDLER            15
 1127 #define SQLITE_FCNTL_TEMPFILENAME           16
 1128 #define SQLITE_FCNTL_MMAP_SIZE              18
 1129 #define SQLITE_FCNTL_TRACE                  19
 1130 #define SQLITE_FCNTL_HAS_MOVED              20
 1131 #define SQLITE_FCNTL_SYNC                   21
 1132 #define SQLITE_FCNTL_COMMIT_PHASETWO        22
 1133 #define SQLITE_FCNTL_WIN32_SET_HANDLE       23
 1134 #define SQLITE_FCNTL_WAL_BLOCK              24
 1135 #define SQLITE_FCNTL_ZIPVFS                 25
 1136 #define SQLITE_FCNTL_RBU                    26
 1137 #define SQLITE_FCNTL_VFS_POINTER            27
 1138 #define SQLITE_FCNTL_JOURNAL_POINTER        28
 1139 #define SQLITE_FCNTL_WIN32_GET_HANDLE       29
 1140 #define SQLITE_FCNTL_PDB                    30
 1141 #define SQLITE_FCNTL_BEGIN_ATOMIC_WRITE     31
 1142 #define SQLITE_FCNTL_COMMIT_ATOMIC_WRITE    32
 1143 #define SQLITE_FCNTL_ROLLBACK_ATOMIC_WRITE  33
 1144 #define SQLITE_FCNTL_LOCK_TIMEOUT           34
 1145 #define SQLITE_FCNTL_DATA_VERSION           35
 1146 #define SQLITE_FCNTL_SIZE_LIMIT             36

 1147 
 1148 /* deprecated names */
 1149 #define SQLITE_GET_LOCKPROXYFILE      SQLITE_FCNTL_GET_LOCKPROXYFILE
 1150 #define SQLITE_SET_LOCKPROXYFILE      SQLITE_FCNTL_SET_LOCKPROXYFILE
 1151 #define SQLITE_LAST_ERRNO             SQLITE_FCNTL_LAST_ERRNO
 1152 
 1153 
 1154 /*
 1155 ** CAPI3REF: Mutex Handle
 1156 **
 1157 ** The mutex module within SQLite defines [sqlite3_mutex] to be an
 1158 ** abstract type for a mutex object.  The SQLite core never looks
 1159 ** at the internal representation of an [sqlite3_mutex].  It only
 1160 ** deals with pointers to the [sqlite3_mutex] object.
 1161 **
 1162 ** Mutexes are created using [sqlite3_mutex_alloc()].
 1163 */
 1164 typedef struct sqlite3_mutex sqlite3_mutex;
 1165 
 1166 /*
</pre>
<hr />
<pre>
 1172 ** on some platforms.
 1173 */
 1174 typedef struct sqlite3_api_routines sqlite3_api_routines;
 1175 
 1176 /*
 1177 ** CAPI3REF: OS Interface Object
 1178 **
 1179 ** An instance of the sqlite3_vfs object defines the interface between
 1180 ** the SQLite core and the underlying operating system.  The &quot;vfs&quot;
 1181 ** in the name of the object stands for &quot;virtual file system&quot;.  See
 1182 ** the [VFS | VFS documentation] for further information.
 1183 **
 1184 ** The VFS interface is sometimes extended by adding new methods onto
 1185 ** the end.  Each time such an extension occurs, the iVersion field
 1186 ** is incremented.  The iVersion value started out as 1 in
 1187 ** SQLite [version 3.5.0] on [dateof:3.5.0], then increased to 2
 1188 ** with SQLite [version 3.7.0] on [dateof:3.7.0], and then increased
 1189 ** to 3 with SQLite [version 3.7.6] on [dateof:3.7.6].  Additional fields
 1190 ** may be appended to the sqlite3_vfs object and the iVersion value
 1191 ** may increase again in future versions of SQLite.
<span class="line-modified"> 1192 ** Note that the structure</span>
<span class="line-modified"> 1193 ** of the sqlite3_vfs object changes in the transition from</span>
 1194 ** SQLite [version 3.5.9] to [version 3.6.0] on [dateof:3.6.0]
<span class="line-modified"> 1195 ** and yet the iVersion field was not modified.</span>
 1196 **
 1197 ** The szOsFile field is the size of the subclassed [sqlite3_file]
 1198 ** structure used by this VFS.  mxPathname is the maximum length of
 1199 ** a pathname in this VFS.
 1200 **
 1201 ** Registered sqlite3_vfs objects are kept on a linked list formed by
 1202 ** the pNext pointer.  The [sqlite3_vfs_register()]
 1203 ** and [sqlite3_vfs_unregister()] interfaces manage this list
 1204 ** in a thread-safe way.  The [sqlite3_vfs_find()] interface
 1205 ** searches the list.  Neither the application code nor the VFS
 1206 ** implementation should use the pNext pointer.
 1207 **
 1208 ** The pNext field is the only field in the sqlite3_vfs
 1209 ** structure that SQLite will ever modify.  SQLite will only access
 1210 ** or modify this field while holding a particular static mutex.
 1211 ** The application should never modify anything within the sqlite3_vfs
 1212 ** object once the object has been registered.
 1213 **
 1214 ** The zName field holds the name of the VFS module.  The name must
 1215 ** be unique across all VFS modules.
</pre>
<hr />
<pre>
 1266 ** &lt;ul&gt;
 1267 ** &lt;li&gt; [SQLITE_OPEN_DELETEONCLOSE]
 1268 ** &lt;li&gt; [SQLITE_OPEN_EXCLUSIVE]
 1269 ** &lt;/ul&gt;
 1270 **
 1271 ** The [SQLITE_OPEN_DELETEONCLOSE] flag means the file should be
 1272 ** deleted when it is closed.  ^The [SQLITE_OPEN_DELETEONCLOSE]
 1273 ** will be set for TEMP databases and their journals, transient
 1274 ** databases, and subjournals.
 1275 **
 1276 ** ^The [SQLITE_OPEN_EXCLUSIVE] flag is always used in conjunction
 1277 ** with the [SQLITE_OPEN_CREATE] flag, which are both directly
 1278 ** analogous to the O_EXCL and O_CREAT flags of the POSIX open()
 1279 ** API.  The SQLITE_OPEN_EXCLUSIVE flag, when paired with the
 1280 ** SQLITE_OPEN_CREATE, is used to indicate that file should always
 1281 ** be created, and that it is an error if it already exists.
 1282 ** It is &lt;i&gt;not&lt;/i&gt; used to indicate the file should be opened
 1283 ** for exclusive access.
 1284 **
 1285 ** ^At least szOsFile bytes of memory are allocated by SQLite
<span class="line-modified"> 1286 ** to hold the  [sqlite3_file] structure passed as the third</span>
 1287 ** argument to xOpen.  The xOpen method does not have to
 1288 ** allocate the structure; it should just fill it in.  Note that
 1289 ** the xOpen method must set the sqlite3_file.pMethods to either
 1290 ** a valid [sqlite3_io_methods] object or to NULL.  xOpen must do
 1291 ** this even if the open fails.  SQLite expects that the sqlite3_file.pMethods
 1292 ** element will be valid after xOpen returns regardless of the success
 1293 ** or failure of the xOpen call.
 1294 **
 1295 ** [[sqlite3_vfs.xAccess]]
 1296 ** ^The flags argument to xAccess() may be [SQLITE_ACCESS_EXISTS]
 1297 ** to test for the existence of a file, or [SQLITE_ACCESS_READWRITE] to
 1298 ** test whether a file is readable and writable, or [SQLITE_ACCESS_READ]
 1299 ** to test whether a file is at least readable.  The SQLITE_ACCESS_READ
 1300 ** flag is never actually used and is not implemented in the built-in
 1301 ** VFSes of SQLite.  The file is named by the second argument and can be a
 1302 ** directory. The xAccess method returns [SQLITE_OK] on success or some
 1303 ** non-zero error code if there is an I/O error or if the name of
 1304 ** the file given in the second argument is illegal.  If SQLITE_OK
 1305 ** is returned, then non-zero or zero is written into *pResOut to indicate
 1306 ** whether or not the file is accessible.
</pre>
<hr />
<pre>
 1603 ** conditions.
 1604 **
 1605 ** The xMalloc, xRealloc, and xFree methods must work like the
 1606 ** malloc(), realloc() and free() functions from the standard C library.
 1607 ** ^SQLite guarantees that the second argument to
 1608 ** xRealloc is always a value returned by a prior call to xRoundup.
 1609 **
 1610 ** xSize should return the allocated size of a memory allocation
 1611 ** previously obtained from xMalloc or xRealloc.  The allocated size
 1612 ** is always at least as big as the requested size but may be larger.
 1613 **
 1614 ** The xRoundup method returns what would be the allocated size of
 1615 ** a memory allocation given a particular requested size.  Most memory
 1616 ** allocators round up memory allocations at least to the next multiple
 1617 ** of 8.  Some allocators round up to a larger multiple or to a power of 2.
 1618 ** Every memory allocation request coming in through [sqlite3_malloc()]
 1619 ** or [sqlite3_realloc()] first calls xRoundup.  If xRoundup returns 0,
 1620 ** that causes the corresponding memory allocation to fail.
 1621 **
 1622 ** The xInit method initializes the memory allocator.  For example,
<span class="line-modified"> 1623 ** it might allocate any require mutexes or initialize internal data</span>
 1624 ** structures.  The xShutdown method is invoked (indirectly) by
 1625 ** [sqlite3_shutdown()] and should deallocate any resources acquired
 1626 ** by xInit.  The pAppData pointer is used as the only parameter to
 1627 ** xInit and xShutdown.
 1628 **
 1629 ** SQLite holds the [SQLITE_MUTEX_STATIC_MASTER] mutex when it invokes
 1630 ** the xInit method, so the xInit method need not be threadsafe.  The
 1631 ** xShutdown method is only called from [sqlite3_shutdown()] so it does
 1632 ** not need to be threadsafe either.  For all other methods, SQLite
 1633 ** holds the [SQLITE_MUTEX_STATIC_MEM] mutex as long as the
 1634 ** [SQLITE_CONFIG_MEMSTATUS] configuration option is turned on (which
 1635 ** it is by default) and so the methods are automatically serialized.
 1636 ** However, if [SQLITE_CONFIG_MEMSTATUS] is disabled, then the other
 1637 ** methods must be threadsafe or else make their own arrangements for
 1638 ** serialization.
 1639 **
 1640 ** SQLite will never invoke xInit() more than once without an intervening
 1641 ** call to xShutdown().
 1642 */
 1643 typedef struct sqlite3_mem_methods sqlite3_mem_methods;
</pre>
<hr />
<pre>
 1725 ** This option can be used to overload the default memory allocation
 1726 ** routines with a wrapper that simulations memory allocation failure or
 1727 ** tracks memory usage, for example. &lt;/dd&gt;
 1728 **
 1729 ** [[SQLITE_CONFIG_SMALL_MALLOC]] &lt;dt&gt;SQLITE_CONFIG_SMALL_MALLOC&lt;/dt&gt;
 1730 ** &lt;dd&gt; ^The SQLITE_CONFIG_SMALL_MALLOC option takes single argument of
 1731 ** type int, interpreted as a boolean, which if true provides a hint to
 1732 ** SQLite that it should avoid large memory allocations if possible.
 1733 ** SQLite will run faster if it is free to make large memory allocations,
 1734 ** but some application might prefer to run slower in exchange for
 1735 ** guarantees about memory fragmentation that are possible if large
 1736 ** allocations are avoided.  This hint is normally off.
 1737 ** &lt;/dd&gt;
 1738 **
 1739 ** [[SQLITE_CONFIG_MEMSTATUS]] &lt;dt&gt;SQLITE_CONFIG_MEMSTATUS&lt;/dt&gt;
 1740 ** &lt;dd&gt; ^The SQLITE_CONFIG_MEMSTATUS option takes single argument of type int,
 1741 ** interpreted as a boolean, which enables or disables the collection of
 1742 ** memory allocation statistics. ^(When memory allocation statistics are
 1743 ** disabled, the following SQLite interfaces become non-operational:
 1744 **   &lt;ul&gt;

 1745 **   &lt;li&gt; [sqlite3_memory_used()]
 1746 **   &lt;li&gt; [sqlite3_memory_highwater()]
 1747 **   &lt;li&gt; [sqlite3_soft_heap_limit64()]
 1748 **   &lt;li&gt; [sqlite3_status64()]
 1749 **   &lt;/ul&gt;)^
 1750 ** ^Memory allocation statistics are enabled by default unless SQLite is
 1751 ** compiled with [SQLITE_DEFAULT_MEMSTATUS]=0 in which case memory
 1752 ** allocation statistics are disabled by default.
 1753 ** &lt;/dd&gt;
 1754 **
 1755 ** [[SQLITE_CONFIG_SCRATCH]] &lt;dt&gt;SQLITE_CONFIG_SCRATCH&lt;/dt&gt;
 1756 ** &lt;dd&gt; The SQLITE_CONFIG_SCRATCH option is no longer used.
 1757 ** &lt;/dd&gt;
 1758 **
 1759 ** [[SQLITE_CONFIG_PAGECACHE]] &lt;dt&gt;SQLITE_CONFIG_PAGECACHE&lt;/dt&gt;
 1760 ** &lt;dd&gt; ^The SQLITE_CONFIG_PAGECACHE option specifies a memory pool
 1761 ** that SQLite can use for the database page cache with the default page
 1762 ** cache implementation.
<span class="line-modified"> 1763 ** This configuration option is a no-op if an application-define page</span>
 1764 ** cache implementation is loaded using the [SQLITE_CONFIG_PCACHE2].
 1765 ** ^There are three arguments to SQLITE_CONFIG_PAGECACHE: A pointer to
 1766 ** 8-byte aligned memory (pMem), the size of each page cache line (sz),
 1767 ** and the number of cache lines (N).
 1768 ** The sz argument should be the size of the largest database page
 1769 ** (a power of two between 512 and 65536) plus some extra bytes for each
 1770 ** page header.  ^The number of extra bytes needed by the page header
 1771 ** can be determined using [SQLITE_CONFIG_PCACHE_HDRSZ].
 1772 ** ^It is harmless, apart from the wasted memory,
 1773 ** for the sz parameter to be larger than necessary.  The pMem
 1774 ** argument must be either a NULL pointer or a pointer to an 8-byte
 1775 ** aligned block of memory of at least sz*N bytes, otherwise
 1776 ** subsequent behavior is undefined.
 1777 ** ^When pMem is not NULL, SQLite will strive to use the memory provided
 1778 ** to satisfy page cache needs, falling back to [sqlite3_malloc()] if
 1779 ** a page cache line is larger than sz bytes or if all of the pMem buffer
 1780 ** is exhausted.
 1781 ** ^If pMem is NULL and N is non-zero, then each database connection
 1782 ** does an initial bulk allocation for page cache memory
 1783 ** from [sqlite3_malloc()] sufficient for N cache lines if N is positive or
</pre>
<hr />
<pre>
 2228 ** The first argument to this setting is an integer which is 0 to disable
 2229 ** the writable_schema, positive to enable writable_schema, or negative to
 2230 ** leave the setting unchanged. The second parameter is a pointer to an
 2231 ** integer into which is written 0 or 1 to indicate whether the writable_schema
 2232 ** is enabled or disabled following this call.
 2233 ** &lt;/dd&gt;
 2234 **
 2235 ** [[SQLITE_DBCONFIG_LEGACY_ALTER_TABLE]]
 2236 ** &lt;dt&gt;SQLITE_DBCONFIG_LEGACY_ALTER_TABLE&lt;/dt&gt;
 2237 ** &lt;dd&gt;The SQLITE_DBCONFIG_LEGACY_ALTER_TABLE option activates or deactivates
 2238 ** the legacy behavior of the [ALTER TABLE RENAME] command such it
 2239 ** behaves as it did prior to [version 3.24.0] (2018-06-04).  See the
 2240 ** &quot;Compatibility Notice&quot; on the [ALTER TABLE RENAME documentation] for
 2241 ** additional information. This feature can also be turned on and off
 2242 ** using the [PRAGMA legacy_alter_table] statement.
 2243 ** &lt;/dd&gt;
 2244 **
 2245 ** [[SQLITE_DBCONFIG_DQS_DML]]
 2246 ** &lt;dt&gt;SQLITE_DBCONFIG_DQS_DML&lt;/td&gt;
 2247 ** &lt;dd&gt;The SQLITE_DBCONFIG_DQS_DML option activates or deactivates
<span class="line-modified"> 2248 ** the legacy [double-quoted string literal] misfeature for DML statement</span>
 2249 ** only, that is DELETE, INSERT, SELECT, and UPDATE statements. The
 2250 ** default value of this setting is determined by the [-DSQLITE_DQS]
 2251 ** compile-time option.
 2252 ** &lt;/dd&gt;
 2253 **
 2254 ** [[SQLITE_DBCONFIG_DQS_DDL]]
 2255 ** &lt;dt&gt;SQLITE_DBCONFIG_DQS_DDL&lt;/td&gt;
 2256 ** &lt;dd&gt;The SQLITE_DBCONFIG_DQS option activates or deactivates
 2257 ** the legacy [double-quoted string literal] misfeature for DDL statements,
 2258 ** such as CREATE TABLE and CREATE INDEX. The
 2259 ** default value of this setting is determined by the [-DSQLITE_DQS]
 2260 ** compile-time option.
 2261 ** &lt;/dd&gt;











































 2262 ** &lt;/dl&gt;
 2263 */
 2264 #define SQLITE_DBCONFIG_MAINDBNAME            1000 /* const char* */
 2265 #define SQLITE_DBCONFIG_LOOKASIDE             1001 /* void* int int */
 2266 #define SQLITE_DBCONFIG_ENABLE_FKEY           1002 /* int int* */
 2267 #define SQLITE_DBCONFIG_ENABLE_TRIGGER        1003 /* int int* */
 2268 #define SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER 1004 /* int int* */
 2269 #define SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION 1005 /* int int* */
 2270 #define SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE      1006 /* int int* */
 2271 #define SQLITE_DBCONFIG_ENABLE_QPSG           1007 /* int int* */
 2272 #define SQLITE_DBCONFIG_TRIGGER_EQP           1008 /* int int* */
 2273 #define SQLITE_DBCONFIG_RESET_DATABASE        1009 /* int int* */
 2274 #define SQLITE_DBCONFIG_DEFENSIVE             1010 /* int int* */
 2275 #define SQLITE_DBCONFIG_WRITABLE_SCHEMA       1011 /* int int* */
 2276 #define SQLITE_DBCONFIG_LEGACY_ALTER_TABLE    1012 /* int int* */
 2277 #define SQLITE_DBCONFIG_DQS_DML               1013 /* int int* */
 2278 #define SQLITE_DBCONFIG_DQS_DDL               1014 /* int int* */
 2279 #define SQLITE_DBCONFIG_ENABLE_VIEW           1015 /* int int* */
<span class="line-modified"> 2280 #define SQLITE_DBCONFIG_MAX                   1015 /* Largest DBCONFIG */</span>


 2281 
 2282 /*
 2283 ** CAPI3REF: Enable Or Disable Extended Result Codes
 2284 ** METHOD: sqlite3
 2285 **
 2286 ** ^The sqlite3_extended_result_codes() routine enables or disables the
 2287 ** [extended result codes] feature of SQLite. ^The extended result
 2288 ** codes are disabled by default for historical compatibility.
 2289 */
 2290 SQLITE_API int sqlite3_extended_result_codes(sqlite3*, int onoff);
 2291 
 2292 /*
 2293 ** CAPI3REF: Last Insert Rowid
 2294 ** METHOD: sqlite3
 2295 **
 2296 ** ^Each entry in most SQLite tables (except for [WITHOUT ROWID] tables)
 2297 ** has a unique 64-bit signed
 2298 ** integer key called the [ROWID | &quot;rowid&quot;]. ^The rowid is always available
 2299 ** as an undeclared column named ROWID, OID, or _ROWID_ as long as those
 2300 ** names are not also used by explicitly declared columns. ^If
</pre>
<hr />
<pre>
 2466 ** or Ctrl-C where the user wants a long query operation to halt
 2467 ** immediately.
 2468 **
 2469 ** ^It is safe to call this routine from a thread different from the
 2470 ** thread that is currently running the database operation.  But it
 2471 ** is not safe to call this routine with a [database connection] that
 2472 ** is closed or might close before sqlite3_interrupt() returns.
 2473 **
 2474 ** ^If an SQL operation is very nearly finished at the time when
 2475 ** sqlite3_interrupt() is called, then it might not have an opportunity
 2476 ** to be interrupted and might continue to completion.
 2477 **
 2478 ** ^An SQL operation that is interrupted will return [SQLITE_INTERRUPT].
 2479 ** ^If the interrupted SQL operation is an INSERT, UPDATE, or DELETE
 2480 ** that is inside an explicit transaction, then the entire transaction
 2481 ** will be rolled back automatically.
 2482 **
 2483 ** ^The sqlite3_interrupt(D) call is in effect until all currently running
 2484 ** SQL statements on [database connection] D complete.  ^Any new SQL statements
 2485 ** that are started after the sqlite3_interrupt() call and before the
<span class="line-modified"> 2486 ** running statements reaches zero are interrupted as if they had been</span>
 2487 ** running prior to the sqlite3_interrupt() call.  ^New SQL statements
 2488 ** that are started after the running statement count reaches zero are
 2489 ** not effected by the sqlite3_interrupt().
 2490 ** ^A call to sqlite3_interrupt(D) that occurs when there are no running
 2491 ** SQL statements is a no-op and has no effect on SQL statements
 2492 ** that are started after the sqlite3_interrupt() call returns.
 2493 */
 2494 SQLITE_API void sqlite3_interrupt(sqlite3*);
 2495 
 2496 /*
 2497 ** CAPI3REF: Determine If An SQL Statement Is Complete
 2498 **
 2499 ** These routines are useful during command-line input to determine if the
 2500 ** currently entered text seems to form a complete SQL statement or
 2501 ** if additional input is needed before sending the text into
 2502 ** SQLite for parsing.  ^These routines return 1 if the input string
 2503 ** appears to be a complete SQL statement.  ^A statement is judged to be
 2504 ** complete if it ends with a semicolon token and is not a prefix of a
 2505 ** well-formed CREATE TRIGGER statement.  ^Semicolons that are embedded within
 2506 ** string literals or quoted identifier names or comments are not
</pre>
<hr />
<pre>
 2634 ** to zero-terminated strings that  contain the names of the columns.
 2635 ** The remaining entries all point to query results.  NULL values result
 2636 ** in NULL pointers.  All other values are in their UTF-8 zero-terminated
 2637 ** string representation as returned by [sqlite3_column_text()].
 2638 **
 2639 ** A result table might consist of one or more memory allocations.
 2640 ** It is not safe to pass a result table directly to [sqlite3_free()].
 2641 ** A result table should be deallocated using [sqlite3_free_table()].
 2642 **
 2643 ** ^(As an example of the result table format, suppose a query result
 2644 ** is as follows:
 2645 **
 2646 ** &lt;blockquote&gt;&lt;pre&gt;
 2647 **        Name        | Age
 2648 **        -----------------------
 2649 **        Alice       | 43
 2650 **        Bob         | 28
 2651 **        Cindy       | 21
 2652 ** &lt;/pre&gt;&lt;/blockquote&gt;
 2653 **
<span class="line-modified"> 2654 ** There are two column (M==2) and three rows (N==3).  Thus the</span>
 2655 ** result table has 8 entries.  Suppose the result table is stored
<span class="line-modified"> 2656 ** in an array names azResult.  Then azResult holds this content:</span>
 2657 **
 2658 ** &lt;blockquote&gt;&lt;pre&gt;
 2659 **        azResult&amp;#91;0] = &quot;Name&quot;;
 2660 **        azResult&amp;#91;1] = &quot;Age&quot;;
 2661 **        azResult&amp;#91;2] = &quot;Alice&quot;;
 2662 **        azResult&amp;#91;3] = &quot;43&quot;;
 2663 **        azResult&amp;#91;4] = &quot;Bob&quot;;
 2664 **        azResult&amp;#91;5] = &quot;28&quot;;
 2665 **        azResult&amp;#91;6] = &quot;Cindy&quot;;
 2666 **        azResult&amp;#91;7] = &quot;21&quot;;
 2667 ** &lt;/pre&gt;&lt;/blockquote&gt;)^
 2668 **
 2669 ** ^The sqlite3_get_table() function evaluates one or more
 2670 ** semicolon-separated SQL statements in the zero-terminated UTF-8
 2671 ** string of its 2nd parameter and returns a result table to the
 2672 ** pointer given in its 3rd parameter.
 2673 **
 2674 ** After the application has finished with the result from sqlite3_get_table(),
 2675 ** it must pass the result table pointer to sqlite3_free_table() in order to
 2676 ** release the memory that was malloced.  Because of the way the
</pre>
<hr />
<pre>
 2729 ** ^As long as the buffer size is greater than zero, sqlite3_snprintf()
 2730 ** guarantees that the buffer is always zero-terminated.  ^The first
 2731 ** parameter &quot;n&quot; is the total size of the buffer, including space for
 2732 ** the zero terminator.  So the longest string that can be completely
 2733 ** written will be n-1 characters.
 2734 **
 2735 ** ^The sqlite3_vsnprintf() routine is a varargs version of sqlite3_snprintf().
 2736 **
 2737 ** See also:  [built-in printf()], [printf() SQL function]
 2738 */
 2739 SQLITE_API char *sqlite3_mprintf(const char*,...);
 2740 SQLITE_API char *sqlite3_vmprintf(const char*, va_list);
 2741 SQLITE_API char *sqlite3_snprintf(int,char*,const char*, ...);
 2742 SQLITE_API char *sqlite3_vsnprintf(int,char*,const char*, va_list);
 2743 
 2744 /*
 2745 ** CAPI3REF: Memory Allocation Subsystem
 2746 **
 2747 ** The SQLite core uses these three routines for all of its own
 2748 ** internal memory allocation needs. &quot;Core&quot; in the previous sentence
<span class="line-modified"> 2749 ** does not include operating-system specific VFS implementation.  The</span>
 2750 ** Windows VFS uses native malloc() and free() for some operations.
 2751 **
 2752 ** ^The sqlite3_malloc() routine returns a pointer to a block
 2753 ** of memory at least N bytes in length, where N is the parameter.
 2754 ** ^If sqlite3_malloc() is unable to obtain sufficient free
 2755 ** memory, it returns a NULL pointer.  ^If the parameter N to
 2756 ** sqlite3_malloc() is zero or negative then sqlite3_malloc() returns
 2757 ** a NULL pointer.
 2758 **
 2759 ** ^The sqlite3_malloc64(N) routine works just like
 2760 ** sqlite3_malloc(N) except that N is an unsigned 64-bit integer instead
 2761 ** of a signed 32-bit integer.
 2762 **
 2763 ** ^Calling sqlite3_free() with a pointer previously returned
 2764 ** by sqlite3_malloc() or sqlite3_realloc() releases that memory so
 2765 ** that it might be reused.  ^The sqlite3_free() routine is
 2766 ** a no-op if is called with a NULL pointer.  Passing a NULL pointer
 2767 ** to sqlite3_free() is harmless.  After being freed, memory
 2768 ** should neither be read nor written.  Even reading previously freed
 2769 ** memory might result in a segmentation fault or other severe error.
</pre>
<hr />
<pre>
 2790 ** ^The sqlite3_realloc64(X,N) interfaces works the same as
 2791 ** sqlite3_realloc(X,N) except that N is a 64-bit unsigned integer instead
 2792 ** of a 32-bit signed integer.
 2793 **
 2794 ** ^If X is a memory allocation previously obtained from sqlite3_malloc(),
 2795 ** sqlite3_malloc64(), sqlite3_realloc(), or sqlite3_realloc64(), then
 2796 ** sqlite3_msize(X) returns the size of that memory allocation in bytes.
 2797 ** ^The value returned by sqlite3_msize(X) might be larger than the number
 2798 ** of bytes requested when X was allocated.  ^If X is a NULL pointer then
 2799 ** sqlite3_msize(X) returns zero.  If X points to something that is not
 2800 ** the beginning of memory allocation, or if it points to a formerly
 2801 ** valid memory allocation that has now been freed, then the behavior
 2802 ** of sqlite3_msize(X) is undefined and possibly harmful.
 2803 **
 2804 ** ^The memory returned by sqlite3_malloc(), sqlite3_realloc(),
 2805 ** sqlite3_malloc64(), and sqlite3_realloc64()
 2806 ** is always aligned to at least an 8 byte boundary, or to a
 2807 ** 4 byte boundary if the [SQLITE_4_BYTE_ALIGNED_MALLOC] compile-time
 2808 ** option is used.
 2809 **
<span class="line-removed"> 2810 ** In SQLite version 3.5.0 and 3.5.1, it was possible to define</span>
<span class="line-removed"> 2811 ** the SQLITE_OMIT_MEMORY_ALLOCATION which would cause the built-in</span>
<span class="line-removed"> 2812 ** implementation of these routines to be omitted.  That capability</span>
<span class="line-removed"> 2813 ** is no longer provided.  Only built-in memory allocators can be used.</span>
<span class="line-removed"> 2814 **</span>
<span class="line-removed"> 2815 ** Prior to SQLite version 3.7.10, the Windows OS interface layer called</span>
<span class="line-removed"> 2816 ** the system malloc() and free() directly when converting</span>
<span class="line-removed"> 2817 ** filenames between the UTF-8 encoding used by SQLite</span>
<span class="line-removed"> 2818 ** and whatever filename encoding is used by the particular Windows</span>
<span class="line-removed"> 2819 ** installation.  Memory allocation errors were detected, but</span>
<span class="line-removed"> 2820 ** they were reported back as [SQLITE_CANTOPEN] or</span>
<span class="line-removed"> 2821 ** [SQLITE_IOERR] rather than [SQLITE_NOMEM].</span>
<span class="line-removed"> 2822 **</span>
 2823 ** The pointer arguments to [sqlite3_free()] and [sqlite3_realloc()]
 2824 ** must be either NULL or else pointers obtained from a prior
 2825 ** invocation of [sqlite3_malloc()] or [sqlite3_realloc()] that have
 2826 ** not yet been released.
 2827 **
 2828 ** The application must not read or write any part of
 2829 ** a block of memory after it has been released using
 2830 ** [sqlite3_free()] or [sqlite3_realloc()].
 2831 */
 2832 SQLITE_API void *sqlite3_malloc(int);
 2833 SQLITE_API void *sqlite3_malloc64(sqlite3_uint64);
 2834 SQLITE_API void *sqlite3_realloc(void*, int);
 2835 SQLITE_API void *sqlite3_realloc64(void*, sqlite3_uint64);
 2836 SQLITE_API void sqlite3_free(void*);
 2837 SQLITE_API sqlite3_uint64 sqlite3_msize(void*);
 2838 
 2839 /*
 2840 ** CAPI3REF: Memory Allocator Statistics
 2841 **
 2842 ** SQLite provides these two interfaces for reporting on the status
</pre>
<hr />
<pre>
 2851 ** [sqlite3_memory_highwater()] include any overhead
 2852 ** added by SQLite in its implementation of [sqlite3_malloc()],
 2853 ** but not overhead added by the any underlying system library
 2854 ** routines that [sqlite3_malloc()] may call.
 2855 **
 2856 ** ^The memory high-water mark is reset to the current value of
 2857 ** [sqlite3_memory_used()] if and only if the parameter to
 2858 ** [sqlite3_memory_highwater()] is true.  ^The value returned
 2859 ** by [sqlite3_memory_highwater(1)] is the high-water mark
 2860 ** prior to the reset.
 2861 */
 2862 SQLITE_API sqlite3_int64 sqlite3_memory_used(void);
 2863 SQLITE_API sqlite3_int64 sqlite3_memory_highwater(int resetFlag);
 2864 
 2865 /*
 2866 ** CAPI3REF: Pseudo-Random Number Generator
 2867 **
 2868 ** SQLite contains a high-quality pseudo-random number generator (PRNG) used to
 2869 ** select random [ROWID | ROWIDs] when inserting new records into a table that
 2870 ** already uses the largest possible [ROWID].  The PRNG is also used for
<span class="line-modified"> 2871 ** the build-in random() and randomblob() SQL functions.  This interface allows</span>
 2872 ** applications to access the same PRNG for other purposes.
 2873 **
 2874 ** ^A call to this routine stores N bytes of randomness into buffer P.
 2875 ** ^The P parameter can be a NULL pointer.
 2876 **
 2877 ** ^If this routine has not been previously called or if the previous
 2878 ** call had N less than one or a NULL pointer for P, then the PRNG is
 2879 ** seeded using randomness obtained from the xRandomness method of
 2880 ** the default [sqlite3_vfs] object.
 2881 ** ^If the previous call to this routine had an N of 1 or more and a
 2882 ** non-NULL P then the pseudo-randomness is generated
 2883 ** internally and without recourse to the [sqlite3_vfs] xRandomness
 2884 ** method.
 2885 */
 2886 SQLITE_API void sqlite3_randomness(int N, void *P);
 2887 
 2888 /*
 2889 ** CAPI3REF: Compile-Time Authorization Callbacks
 2890 ** METHOD: sqlite3
 2891 ** KEYWORDS: {authorizer callback}
</pre>
<hr />
<pre>
 3225 ** returned in *ppDb, even if an error occurs.  The only exception is that
 3226 ** if SQLite is unable to allocate memory to hold the [sqlite3] object,
 3227 ** a NULL will be written into *ppDb instead of a pointer to the [sqlite3]
 3228 ** object.)^ ^(If the database is opened (and/or created) successfully, then
 3229 ** [SQLITE_OK] is returned.  Otherwise an [error code] is returned.)^ ^The
 3230 ** [sqlite3_errmsg()] or [sqlite3_errmsg16()] routines can be used to obtain
 3231 ** an English language description of the error following a failure of any
 3232 ** of the sqlite3_open() routines.
 3233 **
 3234 ** ^The default encoding will be UTF-8 for databases created using
 3235 ** sqlite3_open() or sqlite3_open_v2().  ^The default encoding for databases
 3236 ** created using sqlite3_open16() will be UTF-16 in the native byte order.
 3237 **
 3238 ** Whether or not an error occurs when it is opened, resources
 3239 ** associated with the [database connection] handle should be released by
 3240 ** passing it to [sqlite3_close()] when it is no longer required.
 3241 **
 3242 ** The sqlite3_open_v2() interface works like sqlite3_open()
 3243 ** except that it accepts two additional parameters for additional control
 3244 ** over the new database connection.  ^(The flags parameter to
<span class="line-modified"> 3245 ** sqlite3_open_v2() can take one of</span>
<span class="line-modified"> 3246 ** the following three values, optionally combined with the</span>
<span class="line-removed"> 3247 ** [SQLITE_OPEN_NOMUTEX], [SQLITE_OPEN_FULLMUTEX], [SQLITE_OPEN_SHAREDCACHE],</span>
<span class="line-removed"> 3248 ** [SQLITE_OPEN_PRIVATECACHE], and/or [SQLITE_OPEN_URI] flags:)^</span>
 3249 **
 3250 ** &lt;dl&gt;
 3251 ** ^(&lt;dt&gt;[SQLITE_OPEN_READONLY]&lt;/dt&gt;
 3252 ** &lt;dd&gt;The database is opened in read-only mode.  If the database does not
 3253 ** already exist, an error is returned.&lt;/dd&gt;)^
 3254 **
 3255 ** ^(&lt;dt&gt;[SQLITE_OPEN_READWRITE]&lt;/dt&gt;
 3256 ** &lt;dd&gt;The database is opened for reading and writing if possible, or reading
 3257 ** only if the file is write protected by the operating system.  In either
 3258 ** case the database must already exist, otherwise an error is returned.&lt;/dd&gt;)^
 3259 **
 3260 ** ^(&lt;dt&gt;[SQLITE_OPEN_READWRITE] | [SQLITE_OPEN_CREATE]&lt;/dt&gt;
 3261 ** &lt;dd&gt;The database is opened for reading and writing, and is created if
 3262 ** it does not already exist. This is the behavior that is always used for
 3263 ** sqlite3_open() and sqlite3_open16().&lt;/dd&gt;)^
 3264 ** &lt;/dl&gt;
 3265 **








































 3266 ** If the 3rd parameter to sqlite3_open_v2() is not one of the
<span class="line-modified"> 3267 ** combinations shown above optionally combined with other</span>
 3268 ** [SQLITE_OPEN_READONLY | SQLITE_OPEN_* bits]
 3269 ** then the behavior is undefined.
 3270 **
<span class="line-removed"> 3271 ** ^If the [SQLITE_OPEN_NOMUTEX] flag is set, then the database connection</span>
<span class="line-removed"> 3272 ** opens in the multi-thread [threading mode] as long as the single-thread</span>
<span class="line-removed"> 3273 ** mode has not been set at compile-time or start-time.  ^If the</span>
<span class="line-removed"> 3274 ** [SQLITE_OPEN_FULLMUTEX] flag is set then the database connection opens</span>
<span class="line-removed"> 3275 ** in the serialized [threading mode] unless single-thread was</span>
<span class="line-removed"> 3276 ** previously selected at compile-time or start-time.</span>
<span class="line-removed"> 3277 ** ^The [SQLITE_OPEN_SHAREDCACHE] flag causes the database connection to be</span>
<span class="line-removed"> 3278 ** eligible to use [shared cache mode], regardless of whether or not shared</span>
<span class="line-removed"> 3279 ** cache is enabled using [sqlite3_enable_shared_cache()].  ^The</span>
<span class="line-removed"> 3280 ** [SQLITE_OPEN_PRIVATECACHE] flag causes the database connection to not</span>
<span class="line-removed"> 3281 ** participate in [shared cache mode] even if it is enabled.</span>
<span class="line-removed"> 3282 **</span>
 3283 ** ^The fourth parameter to sqlite3_open_v2() is the name of the
 3284 ** [sqlite3_vfs] object that defines the operating system interface that
 3285 ** the new database connection should use.  ^If the fourth parameter is
 3286 ** a NULL pointer then the default [sqlite3_vfs] object is used.
 3287 **
 3288 ** ^If the filename is &quot;:memory:&quot;, then a private, temporary in-memory database
 3289 ** is created for the connection.  ^This in-memory database will vanish when
 3290 ** the database connection is closed.  Future versions of SQLite might
 3291 ** make use of additional special filenames that begin with the &quot;:&quot; character.
 3292 ** It is recommended that when a database filename actually does begin with
 3293 ** a &quot;:&quot; character you should prefix the filename with a pathname such as
 3294 ** &quot;./&quot; to avoid ambiguity.
 3295 **
 3296 ** ^If the filename is an empty string, then a private, temporary
 3297 ** on-disk database will be created.  ^This private database will be
 3298 ** automatically deleted as soon as the database connection is closed.
 3299 **
 3300 ** [[URI filenames in sqlite3_open()]] &lt;h3&gt;URI Filenames&lt;/h3&gt;
 3301 **
 3302 ** ^If [URI filename] interpretation is enabled, and the filename argument
</pre>
<hr />
<pre>
 3442 ** See also: [sqlite3_temp_directory]
 3443 */
 3444 SQLITE_API int sqlite3_open(
 3445   const char *filename,   /* Database filename (UTF-8) */
 3446   sqlite3 **ppDb          /* OUT: SQLite db handle */
 3447 );
 3448 SQLITE_API int sqlite3_open16(
 3449   const void *filename,   /* Database filename (UTF-16) */
 3450   sqlite3 **ppDb          /* OUT: SQLite db handle */
 3451 );
 3452 SQLITE_API int sqlite3_open_v2(
 3453   const char *filename,   /* Database filename (UTF-8) */
 3454   sqlite3 **ppDb,         /* OUT: SQLite db handle */
 3455   int flags,              /* Flags */
 3456   const char *zVfs        /* Name of VFS module to use */
 3457 );
 3458 
 3459 /*
 3460 ** CAPI3REF: Obtain Values For URI Parameters
 3461 **
<span class="line-modified"> 3462 ** These are utility routines, useful to VFS implementations, that check</span>
<span class="line-modified"> 3463 ** to see if a database file was a URI that contained a specific query</span>
 3464 ** parameter, and if so obtains the value of that query parameter.
 3465 **
 3466 ** If F is the database filename pointer passed into the xOpen() method of
<span class="line-modified"> 3467 ** a VFS implementation when the flags parameter to xOpen() has one or</span>
<span class="line-modified"> 3468 ** more of the [SQLITE_OPEN_URI] or [SQLITE_OPEN_MAIN_DB] bits set and</span>
<span class="line-removed"> 3469 ** P is the name of the query parameter, then</span>
 3470 ** sqlite3_uri_parameter(F,P) returns the value of the P
 3471 ** parameter if it exists or a NULL pointer if P does not appear as a
<span class="line-modified"> 3472 ** query parameter on F.  If P is a query parameter of F</span>
 3473 ** has no explicit value, then sqlite3_uri_parameter(F,P) returns
 3474 ** a pointer to an empty string.
 3475 **
 3476 ** The sqlite3_uri_boolean(F,P,B) routine assumes that P is a boolean
 3477 ** parameter and returns true (1) or false (0) according to the value
 3478 ** of P.  The sqlite3_uri_boolean(F,P,B) routine returns true (1) if the
 3479 ** value of query parameter P is one of &quot;yes&quot;, &quot;true&quot;, or &quot;on&quot; in any
 3480 ** case or if the value begins with a non-zero number.  The
 3481 ** sqlite3_uri_boolean(F,P,B) routines returns false (0) if the value of
 3482 ** query parameter P is one of &quot;no&quot;, &quot;false&quot;, or &quot;off&quot; in any case or
 3483 ** if the value begins with a numeric zero.  If P is not a query
<span class="line-modified"> 3484 ** parameter on F or if the value of P is does not match any of the</span>
 3485 ** above, then sqlite3_uri_boolean(F,P,B) returns (B!=0).
 3486 **
 3487 ** The sqlite3_uri_int64(F,P,D) routine converts the value of P into a
 3488 ** 64-bit signed integer and returns that integer, or D if P does not
 3489 ** exist.  If the value of P is something other than an integer, then
 3490 ** zero is returned.
 3491 **







 3492 ** If F is a NULL pointer, then sqlite3_uri_parameter(F,P) returns NULL and
 3493 ** sqlite3_uri_boolean(F,P,B) returns B.  If F is not a NULL pointer and
<span class="line-modified"> 3494 ** is not a database file pathname pointer that SQLite passed into the xOpen</span>
<span class="line-modified"> 3495 ** VFS method, then the behavior of this routine is undefined and probably</span>
<span class="line-modified"> 3496 ** undesirable.</span>








 3497 **
 3498 ** See the [URI filename] documentation for additional information.
 3499 */
 3500 SQLITE_API const char *sqlite3_uri_parameter(const char *zFilename, const char *zParam);
 3501 SQLITE_API int sqlite3_uri_boolean(const char *zFile, const char *zParam, int bDefault);
 3502 SQLITE_API sqlite3_int64 sqlite3_uri_int64(const char*, const char*, sqlite3_int64);
































 3503 
 3504 
 3505 /*
 3506 ** CAPI3REF: Error Codes And Messages
 3507 ** METHOD: sqlite3
 3508 **
 3509 ** ^If the most recent sqlite3_* API call associated with
 3510 ** [database connection] D failed, then the sqlite3_errcode(D) interface
 3511 ** returns the numeric [result code] or [extended result code] for that
 3512 ** API call.
 3513 ** ^The sqlite3_extended_errcode()
 3514 ** interface is the same except that it always returns the
 3515 ** [extended result code] even when extended result codes are
 3516 ** disabled.
 3517 **
 3518 ** The values returned by sqlite3_errcode() and/or
 3519 ** sqlite3_extended_errcode() might change with each API call.
 3520 ** Except, there are some interfaces that are guaranteed to never
 3521 ** change the value of the error code.  The error-code preserving
 3522 ** interfaces are:
</pre>
<hr />
<pre>
 3801 ** behave differently in three ways:
 3802 **
 3803 ** &lt;ol&gt;
 3804 ** &lt;li&gt;
 3805 ** ^If the database schema changes, instead of returning [SQLITE_SCHEMA] as it
 3806 ** always used to do, [sqlite3_step()] will automatically recompile the SQL
 3807 ** statement and try to run it again. As many as [SQLITE_MAX_SCHEMA_RETRY]
 3808 ** retries will occur before sqlite3_step() gives up and returns an error.
 3809 ** &lt;/li&gt;
 3810 **
 3811 ** &lt;li&gt;
 3812 ** ^When an error occurs, [sqlite3_step()] will return one of the detailed
 3813 ** [error codes] or [extended error codes].  ^The legacy behavior was that
 3814 ** [sqlite3_step()] would only return a generic [SQLITE_ERROR] result code
 3815 ** and the application would have to make a second call to [sqlite3_reset()]
 3816 ** in order to find the underlying cause of the problem. With the &quot;v2&quot; prepare
 3817 ** interfaces, the underlying reason for the error is returned immediately.
 3818 ** &lt;/li&gt;
 3819 **
 3820 ** &lt;li&gt;
<span class="line-modified"> 3821 ** ^If the specific value bound to [parameter | host parameter] in the</span>
 3822 ** WHERE clause might influence the choice of query plan for a statement,
 3823 ** then the statement will be automatically recompiled, as if there had been
<span class="line-modified"> 3824 ** a schema change, on the first  [sqlite3_step()] call following any change</span>
 3825 ** to the [sqlite3_bind_text | bindings] of that [parameter].
<span class="line-modified"> 3826 ** ^The specific value of WHERE-clause [parameter] might influence the</span>
 3827 ** choice of query plan if the parameter is the left-hand side of a [LIKE]
 3828 ** or [GLOB] operator or if the parameter is compared to an indexed column
 3829 ** and the [SQLITE_ENABLE_STAT4] compile-time option is enabled.
 3830 ** &lt;/li&gt;
 3831 ** &lt;/ol&gt;
 3832 **
 3833 ** &lt;p&gt;^sqlite3_prepare_v3() differs from sqlite3_prepare_v2() only in having
 3834 ** the extra prepFlags parameter, which is a bit array consisting of zero or
 3835 ** more of the [SQLITE_PREPARE_PERSISTENT|SQLITE_PREPARE_*] flags.  ^The
 3836 ** sqlite3_prepare_v2() interface works exactly the same as
 3837 ** sqlite3_prepare_v3() with a zero prepFlags parameter.
 3838 */
 3839 SQLITE_API int sqlite3_prepare(
 3840   sqlite3 *db,            /* Database handle */
 3841   const char *zSql,       /* SQL statement, UTF-8 encoded */
 3842   int nByte,              /* Maximum length of zSql in bytes. */
 3843   sqlite3_stmt **ppStmt,  /* OUT: Statement handle */
 3844   const char **pzTail     /* OUT: Pointer to unused portion of zSql */
 3845 );
 3846 SQLITE_API int sqlite3_prepare_v2(
</pre>
<hr />
<pre>
 4315 ** ^The name of the database or table or column can be returned as
 4316 ** either a UTF-8 or UTF-16 string.  ^The _database_ routines return
 4317 ** the database name, the _table_ routines return the table name, and
 4318 ** the origin_ routines return the column name.
 4319 ** ^The returned string is valid until the [prepared statement] is destroyed
 4320 ** using [sqlite3_finalize()] or until the statement is automatically
 4321 ** reprepared by the first call to [sqlite3_step()] for a particular run
 4322 ** or until the same information is requested
 4323 ** again in a different encoding.
 4324 **
 4325 ** ^The names returned are the original un-aliased names of the
 4326 ** database, table, and column.
 4327 **
 4328 ** ^The first argument to these interfaces is a [prepared statement].
 4329 ** ^These functions return information about the Nth result column returned by
 4330 ** the statement, where N is the second function argument.
 4331 ** ^The left-most column is column 0 for these routines.
 4332 **
 4333 ** ^If the Nth column returned by the statement is an expression or
 4334 ** subquery and is not a column value, then all of these functions return
<span class="line-modified"> 4335 ** NULL.  ^These routine might also return NULL if a memory allocation error</span>
 4336 ** occurs.  ^Otherwise, they return the name of the attached database, table,
 4337 ** or column that query result column was extracted from.
 4338 **
 4339 ** ^As with all other SQLite APIs, those whose names end with &quot;16&quot; return
 4340 ** UTF-16 encoded strings and the other functions return UTF-8.
 4341 **
 4342 ** ^These APIs are only available if the library was compiled with the
 4343 ** [SQLITE_ENABLE_COLUMN_METADATA] C-preprocessor symbol.
 4344 **
<span class="line-removed"> 4345 ** If two or more threads call one or more of these routines against the same</span>
<span class="line-removed"> 4346 ** prepared statement and column at the same time then the results are</span>
<span class="line-removed"> 4347 ** undefined.</span>
<span class="line-removed"> 4348 **</span>
 4349 ** If two or more threads call one or more
 4350 ** [sqlite3_column_database_name | column metadata interfaces]
 4351 ** for the same [prepared statement] and result column
 4352 ** at the same time then the results are undefined.
 4353 */
 4354 SQLITE_API const char *sqlite3_column_database_name(sqlite3_stmt*,int);
 4355 SQLITE_API const void *sqlite3_column_database_name16(sqlite3_stmt*,int);
 4356 SQLITE_API const char *sqlite3_column_table_name(sqlite3_stmt*,int);
 4357 SQLITE_API const void *sqlite3_column_table_name16(sqlite3_stmt*,int);
 4358 SQLITE_API const char *sqlite3_column_origin_name(sqlite3_stmt*,int);
 4359 SQLITE_API const void *sqlite3_column_origin_name16(sqlite3_stmt*,int);
 4360 
 4361 /*
 4362 ** CAPI3REF: Declared Datatype Of A Query Result
 4363 ** METHOD: sqlite3_stmt
 4364 **
 4365 ** ^(The first parameter is a [prepared statement].
 4366 ** If this statement is a [SELECT] statement and the Nth column of the
 4367 ** returned result set of that [SELECT] is a table column (not an
 4368 ** expression or subquery) then the declared type of the table
</pre>
<hr />
<pre>
 4465 ** error other than [SQLITE_BUSY] and [SQLITE_MISUSE].  You must call
 4466 ** [sqlite3_reset()] or [sqlite3_finalize()] in order to find one of the
 4467 ** specific [error codes] that better describes the error.
 4468 ** We admit that this is a goofy design.  The problem has been fixed
 4469 ** with the &quot;v2&quot; interface.  If you prepare all of your SQL statements
 4470 ** using [sqlite3_prepare_v3()] or [sqlite3_prepare_v2()]
 4471 ** or [sqlite3_prepare16_v2()] or [sqlite3_prepare16_v3()] instead
 4472 ** of the legacy [sqlite3_prepare()] and [sqlite3_prepare16()] interfaces,
 4473 ** then the more specific [error codes] are returned directly
 4474 ** by sqlite3_step().  The use of the &quot;vX&quot; interfaces is recommended.
 4475 */
 4476 SQLITE_API int sqlite3_step(sqlite3_stmt*);
 4477 
 4478 /*
 4479 ** CAPI3REF: Number of columns in a result set
 4480 ** METHOD: sqlite3_stmt
 4481 **
 4482 ** ^The sqlite3_data_count(P) interface returns the number of columns in the
 4483 ** current row of the result set of [prepared statement] P.
 4484 ** ^If prepared statement P does not have results ready to return
<span class="line-modified"> 4485 ** (via calls to the [sqlite3_column_int | sqlite3_column_*()] of</span>
 4486 ** interfaces) then sqlite3_data_count(P) returns 0.
 4487 ** ^The sqlite3_data_count(P) routine also returns 0 if P is a NULL pointer.
 4488 ** ^The sqlite3_data_count(P) routine returns 0 if the previous call to
 4489 ** [sqlite3_step](P) returned [SQLITE_DONE].  ^The sqlite3_data_count(P)
 4490 ** will return non-zero if previous call to [sqlite3_step](P) returned
 4491 ** [SQLITE_ROW], except in the case of the [PRAGMA incremental_vacuum]
 4492 ** where it always returns zero since each step of that multi-step
 4493 ** pragma returns 0 columns of data.
 4494 **
 4495 ** See also: [sqlite3_column_count()]
 4496 */
 4497 SQLITE_API int sqlite3_data_count(sqlite3_stmt *pStmt);
 4498 
 4499 /*
 4500 ** CAPI3REF: Fundamental Datatypes
 4501 ** KEYWORDS: SQLITE_TEXT
 4502 **
 4503 ** ^(Every value in SQLite has one of five fundamental datatypes:
 4504 **
 4505 ** &lt;ul&gt;
</pre>
<hr />
<pre>
 4789 ** ^The [sqlite3_reset(S)] interface resets the [prepared statement] S
 4790 ** back to the beginning of its program.
 4791 **
 4792 ** ^If the most recent call to [sqlite3_step(S)] for the
 4793 ** [prepared statement] S returned [SQLITE_ROW] or [SQLITE_DONE],
 4794 ** or if [sqlite3_step(S)] has never before been called on S,
 4795 ** then [sqlite3_reset(S)] returns [SQLITE_OK].
 4796 **
 4797 ** ^If the most recent call to [sqlite3_step(S)] for the
 4798 ** [prepared statement] S indicated an error, then
 4799 ** [sqlite3_reset(S)] returns an appropriate [error code].
 4800 **
 4801 ** ^The [sqlite3_reset(S)] interface does not change the values
 4802 ** of any [sqlite3_bind_blob|bindings] on the [prepared statement] S.
 4803 */
 4804 SQLITE_API int sqlite3_reset(sqlite3_stmt *pStmt);
 4805 
 4806 /*
 4807 ** CAPI3REF: Create Or Redefine SQL Functions
 4808 ** KEYWORDS: {function creation routines}
<span class="line-removed"> 4809 ** KEYWORDS: {application-defined SQL function}</span>
<span class="line-removed"> 4810 ** KEYWORDS: {application-defined SQL functions}</span>
 4811 ** METHOD: sqlite3
 4812 **
 4813 ** ^These functions (collectively known as &quot;function creation routines&quot;)
 4814 ** are used to add SQL functions or aggregates or to redefine the behavior
 4815 ** of existing SQL functions or aggregates. The only differences between
 4816 ** the three &quot;sqlite3_create_function*&quot; routines are the text encoding
 4817 ** expected for the second parameter (the name of the function being
 4818 ** created) and the presence or absence of a destructor callback for
 4819 ** the application data pointer. Function sqlite3_create_window_function()
 4820 ** is similar, but allows the user to supply the extra callback functions
 4821 ** needed by [aggregate window functions].
 4822 **
 4823 ** ^The first parameter is the [database connection] to which the SQL
 4824 ** function is to be added.  ^If an application uses more than one database
 4825 ** connection then application-defined SQL functions must be added
 4826 ** to each database connection separately.
 4827 **
 4828 ** ^The second parameter is the name of the SQL function to be created or
 4829 ** redefined.  ^The length of the name is limited to 255 bytes in a UTF-8
 4830 ** representation, exclusive of the zero-terminator.  ^Note that the name
</pre>
<hr />
<pre>
 4846 ** [SQLITE_UTF16LE] if the function implementation invokes
 4847 ** [sqlite3_value_text16le()] on an input, or [SQLITE_UTF16BE] if the
 4848 ** implementation invokes [sqlite3_value_text16be()] on an input, or
 4849 ** [SQLITE_UTF16] if [sqlite3_value_text16()] is used, or [SQLITE_UTF8]
 4850 ** otherwise.  ^The same SQL function may be registered multiple times using
 4851 ** different preferred text encodings, with different implementations for
 4852 ** each encoding.
 4853 ** ^When multiple implementations of the same function are available, SQLite
 4854 ** will pick the one that involves the least amount of data conversion.
 4855 **
 4856 ** ^The fourth parameter may optionally be ORed with [SQLITE_DETERMINISTIC]
 4857 ** to signal that the function will always return the same result given
 4858 ** the same inputs within a single SQL statement.  Most SQL functions are
 4859 ** deterministic.  The built-in [random()] SQL function is an example of a
 4860 ** function that is not deterministic.  The SQLite query planner is able to
 4861 ** perform additional optimizations on deterministic functions, so use
 4862 ** of the [SQLITE_DETERMINISTIC] flag is recommended where possible.
 4863 **
 4864 ** ^The fourth parameter may also optionally include the [SQLITE_DIRECTONLY]
 4865 ** flag, which if present prevents the function from being invoked from
<span class="line-modified"> 4866 ** within VIEWs or TRIGGERs.  For security reasons, the [SQLITE_DIRECTONLY]</span>
<span class="line-modified"> 4867 ** flag is recommended for any application-defined SQL function that has</span>
<span class="line-modified"> 4868 ** side-effects.</span>











 4869 **
 4870 ** ^(The fifth parameter is an arbitrary pointer.  The implementation of the
 4871 ** function can gain access to this pointer using [sqlite3_user_data()].)^
 4872 **
 4873 ** ^The sixth, seventh and eighth parameters passed to the three
 4874 ** &quot;sqlite3_create_function*&quot; functions, xFunc, xStep and xFinal, are
 4875 ** pointers to C-language functions that implement the SQL function or
 4876 ** aggregate. ^A scalar SQL function requires an implementation of the xFunc
 4877 ** callback only; NULL pointers must be passed as the xStep and xFinal
 4878 ** parameters. ^An aggregate SQL function requires an implementation of xStep
 4879 ** and xFinal and NULL pointer must be passed for xFunc. ^To delete an existing
 4880 ** SQL function or aggregate, pass NULL pointers for all three function
 4881 ** callbacks.
 4882 **
 4883 ** ^The sixth, seventh, eighth and ninth parameters (xStep, xFinal, xValue
 4884 ** and xInverse) passed to sqlite3_create_window_function are pointers to
 4885 ** C-language callbacks that implement the new function. xStep and xFinal
 4886 ** must both be non-NULL. xValue and xInverse may either both be NULL, in
 4887 ** which case a regular aggregate function is created, or must both be
 4888 ** non-NULL, in which case the new function may be used as either an aggregate
</pre>
<hr />
<pre>
 4967 ** CAPI3REF: Text Encodings
 4968 **
 4969 ** These constant define integer codes that represent the various
 4970 ** text encodings supported by SQLite.
 4971 */
 4972 #define SQLITE_UTF8           1    /* IMP: R-37514-35566 */
 4973 #define SQLITE_UTF16LE        2    /* IMP: R-03371-37637 */
 4974 #define SQLITE_UTF16BE        3    /* IMP: R-51971-34154 */
 4975 #define SQLITE_UTF16          4    /* Use native byte order */
 4976 #define SQLITE_ANY            5    /* Deprecated */
 4977 #define SQLITE_UTF16_ALIGNED  8    /* sqlite3_create_collation only */
 4978 
 4979 /*
 4980 ** CAPI3REF: Function Flags
 4981 **
 4982 ** These constants may be ORed together with the
 4983 ** [SQLITE_UTF8 | preferred text encoding] as the fourth argument
 4984 ** to [sqlite3_create_function()], [sqlite3_create_function16()], or
 4985 ** [sqlite3_create_function_v2()].
 4986 **
<span class="line-modified"> 4987 ** The SQLITE_DETERMINISTIC flag means that the new function will always</span>
<span class="line-modified"> 4988 ** maps the same inputs into the same output.  The abs() function is</span>
<span class="line-modified"> 4989 ** deterministic, for example, but randomblob() is not.</span>








 4990 **

 4991 ** The SQLITE_DIRECTONLY flag means that the function may only be invoked
<span class="line-modified"> 4992 ** from top-level SQL, and cannot be used in VIEWs or TRIGGERs.  This is</span>
<span class="line-modified"> 4993 ** a security feature which is recommended for all</span>
<span class="line-modified"> 4994 ** [application-defined SQL functions] that have side-effects.  This flag</span>
<span class="line-modified"> 4995 ** prevents an attacker from adding triggers and views to a schema then</span>
<span class="line-modified"> 4996 ** tricking a high-privilege application into causing unintended side-effects</span>
<span class="line-modified"> 4997 ** while performing ordinary queries.</span>

























 4998 **

 4999 ** The SQLITE_SUBTYPE flag indicates to SQLite that a function may call
 5000 ** [sqlite3_value_subtype()] to inspect the sub-types of its arguments.
 5001 ** Specifying this flag makes no difference for scalar or aggregate user
 5002 ** functions. However, if it is not specified for a user-defined window
 5003 ** function, then any sub-types belonging to arguments passed to the window
 5004 ** function may be discarded before the window function is called (i.e.
 5005 ** sqlite3_value_subtype() will always return 0).


 5006 */
 5007 #define SQLITE_DETERMINISTIC    0x000000800
 5008 #define SQLITE_DIRECTONLY       0x000080000
 5009 #define SQLITE_SUBTYPE          0x000100000

 5010 
 5011 /*
 5012 ** CAPI3REF: Deprecated Functions
 5013 ** DEPRECATED
 5014 **
 5015 ** These functions are [deprecated].  In order to maintain
 5016 ** backwards compatibility with older code, these functions continue
 5017 ** to be supported.  However, new applications should avoid
 5018 ** the use of these functions.  To encourage programmers to avoid
 5019 ** these functions, we will not explain what they do.
 5020 */
 5021 #ifndef SQLITE_OMIT_DEPRECATED
 5022 SQLITE_API SQLITE_DEPRECATED int sqlite3_aggregate_count(sqlite3_context*);
 5023 SQLITE_API SQLITE_DEPRECATED int sqlite3_expired(sqlite3_stmt*);
 5024 SQLITE_API SQLITE_DEPRECATED int sqlite3_transfer_bindings(sqlite3_stmt*, sqlite3_stmt*);
 5025 SQLITE_API SQLITE_DEPRECATED int sqlite3_global_recover(void);
 5026 SQLITE_API SQLITE_DEPRECATED void sqlite3_thread_cleanup(void);
 5027 SQLITE_API SQLITE_DEPRECATED int sqlite3_memory_alarm(void(*)(void*,sqlite3_int64,int),
 5028                       void*,sqlite3_int64);
 5029 #endif
</pre>
<hr />
<pre>
 5048 ** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_value_bytes&lt;/b&gt;&lt;td&gt;&amp;rarr;&lt;td&gt;Size of a BLOB
 5049 ** or a UTF-8 TEXT in bytes
 5050 ** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_value_bytes16&amp;nbsp;&amp;nbsp;&lt;/b&gt;
 5051 ** &lt;td&gt;&amp;rarr;&amp;nbsp;&amp;nbsp;&lt;td&gt;Size of UTF-16
 5052 ** TEXT in bytes
 5053 ** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_value_type&lt;/b&gt;&lt;td&gt;&amp;rarr;&lt;td&gt;Default
 5054 ** datatype of the value
 5055 ** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_value_numeric_type&amp;nbsp;&amp;nbsp;&lt;/b&gt;
 5056 ** &lt;td&gt;&amp;rarr;&amp;nbsp;&amp;nbsp;&lt;td&gt;Best numeric datatype of the value
 5057 ** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_value_nochange&amp;nbsp;&amp;nbsp;&lt;/b&gt;
 5058 ** &lt;td&gt;&amp;rarr;&amp;nbsp;&amp;nbsp;&lt;td&gt;True if the column is unchanged in an UPDATE
 5059 ** against a virtual table.
 5060 ** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_value_frombind&amp;nbsp;&amp;nbsp;&lt;/b&gt;
 5061 ** &lt;td&gt;&amp;rarr;&amp;nbsp;&amp;nbsp;&lt;td&gt;True if value originated from a [bound parameter]
 5062 ** &lt;/table&gt;&lt;/blockquote&gt;
 5063 **
 5064 ** &lt;b&gt;Details:&lt;/b&gt;
 5065 **
 5066 ** These routines extract type, size, and content information from
 5067 ** [protected sqlite3_value] objects.  Protected sqlite3_value objects
<span class="line-modified"> 5068 ** are used to pass parameter information into implementation of</span>
<span class="line-modified"> 5069 ** [application-defined SQL functions] and [virtual tables].</span>
 5070 **
 5071 ** These routines work only with [protected sqlite3_value] objects.
 5072 ** Any attempt to use these routines on an [unprotected sqlite3_value]
 5073 ** is not threadsafe.
 5074 **
 5075 ** ^These routines work just like the corresponding [column access functions]
 5076 ** except that these routines take a single [protected sqlite3_value] object
 5077 ** pointer instead of a [sqlite3_stmt*] pointer and an integer column number.
 5078 **
 5079 ** ^The sqlite3_value_text16() interface extracts a UTF-16 string
 5080 ** in the native byte-order of the host machine.  ^The
 5081 ** sqlite3_value_text16be() and sqlite3_value_text16le() interfaces
 5082 ** extract UTF-16 strings as big-endian and little-endian respectively.
 5083 **
 5084 ** ^If [sqlite3_value] object V was initialized
 5085 ** using [sqlite3_bind_pointer(S,I,P,X,D)] or [sqlite3_result_pointer(C,P,X,D)]
 5086 ** and if X and Y are strings that compare equal according to strcmp(X,Y),
 5087 ** then sqlite3_value_pointer(V,Y) will return the pointer P.  ^Otherwise,
 5088 ** sqlite3_value_pointer(V,Y) returns a NULL. The sqlite3_bind_pointer()
 5089 ** routine is part of the [pointer passing interface] added for SQLite 3.20.0.
</pre>
<hr />
<pre>
 5106 ** words, if the value is a string that looks like a number)
 5107 ** then the conversion is performed.  Otherwise no conversion occurs.
 5108 ** The [SQLITE_INTEGER | datatype] after conversion is returned.)^
 5109 **
 5110 ** ^Within the [xUpdate] method of a [virtual table], the
 5111 ** sqlite3_value_nochange(X) interface returns true if and only if
 5112 ** the column corresponding to X is unchanged by the UPDATE operation
 5113 ** that the xUpdate method call was invoked to implement and if
 5114 ** and the prior [xColumn] method call that was invoked to extracted
 5115 ** the value for that column returned without setting a result (probably
 5116 ** because it queried [sqlite3_vtab_nochange()] and found that the column
 5117 ** was unchanging).  ^Within an [xUpdate] method, any value for which
 5118 ** sqlite3_value_nochange(X) is true will in all other respects appear
 5119 ** to be a NULL value.  If sqlite3_value_nochange(X) is invoked anywhere other
 5120 ** than within an [xUpdate] method call for an UPDATE statement, then
 5121 ** the return value is arbitrary and meaningless.
 5122 **
 5123 ** ^The sqlite3_value_frombind(X) interface returns non-zero if the
 5124 ** value X originated from one of the [sqlite3_bind_int|sqlite3_bind()]
 5125 ** interfaces.  ^If X comes from an SQL literal value, or a table column,
<span class="line-modified"> 5126 ** and expression, then sqlite3_value_frombind(X) returns zero.</span>
 5127 **
 5128 ** Please pay particular attention to the fact that the pointer returned
 5129 ** from [sqlite3_value_blob()], [sqlite3_value_text()], or
 5130 ** [sqlite3_value_text16()] can be invalidated by a subsequent call to
 5131 ** [sqlite3_value_bytes()], [sqlite3_value_bytes16()], [sqlite3_value_text()],
 5132 ** or [sqlite3_value_text16()].
 5133 **
 5134 ** These routines must be called from the same thread as
 5135 ** the SQL function that supplied the [sqlite3_value*] parameters.
 5136 **
 5137 ** As long as the input parameter is correct, these routines can only
 5138 ** fail if an out-of-memory error occurs during a format conversion.
 5139 ** Only the following subset of interfaces are subject to out-of-memory
 5140 ** errors:
 5141 **
 5142 ** &lt;ul&gt;
 5143 ** &lt;li&gt; sqlite3_value_blob()
 5144 ** &lt;li&gt; sqlite3_value_text()
 5145 ** &lt;li&gt; sqlite3_value_text16()
 5146 ** &lt;li&gt; sqlite3_value_text16le()
</pre>
<hr />
<pre>
 5192 ** object D and returns a pointer to that copy.  ^The [sqlite3_value] returned
 5193 ** is a [protected sqlite3_value] object even if the input is not.
 5194 ** ^The sqlite3_value_dup(V) interface returns NULL if V is NULL or if a
 5195 ** memory allocation fails.
 5196 **
 5197 ** ^The sqlite3_value_free(V) interface frees an [sqlite3_value] object
 5198 ** previously obtained from [sqlite3_value_dup()].  ^If V is a NULL pointer
 5199 ** then sqlite3_value_free(V) is a harmless no-op.
 5200 */
 5201 SQLITE_API sqlite3_value *sqlite3_value_dup(const sqlite3_value*);
 5202 SQLITE_API void sqlite3_value_free(sqlite3_value*);
 5203 
 5204 /*
 5205 ** CAPI3REF: Obtain Aggregate Function Context
 5206 ** METHOD: sqlite3_context
 5207 **
 5208 ** Implementations of aggregate SQL functions use this
 5209 ** routine to allocate memory for storing their state.
 5210 **
 5211 ** ^The first time the sqlite3_aggregate_context(C,N) routine is called
<span class="line-modified"> 5212 ** for a particular aggregate function, SQLite</span>
<span class="line-modified"> 5213 ** allocates N of memory, zeroes out that memory, and returns a pointer</span>
 5214 ** to the new memory. ^On second and subsequent calls to
 5215 ** sqlite3_aggregate_context() for the same aggregate function instance,
 5216 ** the same buffer is returned.  Sqlite3_aggregate_context() is normally
 5217 ** called once for each invocation of the xStep callback and then one
 5218 ** last time when the xFinal callback is invoked.  ^(When no rows match
 5219 ** an aggregate query, the xStep() callback of the aggregate function
 5220 ** implementation is never called and xFinal() is called exactly once.
 5221 ** In those cases, sqlite3_aggregate_context() might be called for the
 5222 ** first time from within xFinal().)^
 5223 **
 5224 ** ^The sqlite3_aggregate_context(C,N) routine returns a NULL pointer
 5225 ** when first called if N is less than or equal to zero or if a memory
 5226 ** allocate error occurs.
 5227 **
 5228 ** ^(The amount of space allocated by sqlite3_aggregate_context(C,N) is
 5229 ** determined by the N parameter on first successful call.  Changing the
<span class="line-modified"> 5230 ** value of N in subsequent call to sqlite3_aggregate_context() within</span>
 5231 ** the same aggregate function instance will not resize the memory
 5232 ** allocation.)^  Within the xFinal callback, it is customary to set
 5233 ** N=0 in calls to sqlite3_aggregate_context(C,N) so that no
 5234 ** pointless memory allocations occur.
 5235 **
 5236 ** ^SQLite automatically frees the memory allocated by
 5237 ** sqlite3_aggregate_context() when the aggregate query concludes.
 5238 **
 5239 ** The first parameter must be a copy of the
 5240 ** [sqlite3_context | SQL function context] that is the first parameter
 5241 ** to the xStep or xFinal callback routine that implements the aggregate
 5242 ** function.
 5243 **
 5244 ** This routine must be called from the same thread in which
 5245 ** the aggregate SQL function is running.
 5246 */
 5247 SQLITE_API void *sqlite3_aggregate_context(sqlite3_context*, int nBytes);
 5248 
 5249 /*
 5250 ** CAPI3REF: User Data For Functions
</pre>
<hr />
<pre>
 5521 ** METHOD: sqlite3
 5522 **
 5523 ** ^These functions add, remove, or modify a [collation] associated
 5524 ** with the [database connection] specified as the first argument.
 5525 **
 5526 ** ^The name of the collation is a UTF-8 string
 5527 ** for sqlite3_create_collation() and sqlite3_create_collation_v2()
 5528 ** and a UTF-16 string in native byte order for sqlite3_create_collation16().
 5529 ** ^Collation names that compare equal according to [sqlite3_strnicmp()] are
 5530 ** considered to be the same name.
 5531 **
 5532 ** ^(The third argument (eTextRep) must be one of the constants:
 5533 ** &lt;ul&gt;
 5534 ** &lt;li&gt; [SQLITE_UTF8],
 5535 ** &lt;li&gt; [SQLITE_UTF16LE],
 5536 ** &lt;li&gt; [SQLITE_UTF16BE],
 5537 ** &lt;li&gt; [SQLITE_UTF16], or
 5538 ** &lt;li&gt; [SQLITE_UTF16_ALIGNED].
 5539 ** &lt;/ul&gt;)^
 5540 ** ^The eTextRep argument determines the encoding of strings passed
<span class="line-modified"> 5541 ** to the collating function callback, xCallback.</span>
 5542 ** ^The [SQLITE_UTF16] and [SQLITE_UTF16_ALIGNED] values for eTextRep
 5543 ** force strings to be UTF16 with native byte order.
 5544 ** ^The [SQLITE_UTF16_ALIGNED] value for eTextRep forces strings to begin
 5545 ** on an even byte address.
 5546 **
 5547 ** ^The fourth argument, pArg, is an application data pointer that is passed
 5548 ** through as the first argument to the collating function callback.
 5549 **
<span class="line-modified"> 5550 ** ^The fifth argument, xCallback, is a pointer to the collating function.</span>
 5551 ** ^Multiple collating functions can be registered using the same name but
 5552 ** with different eTextRep parameters and SQLite will use whichever
 5553 ** function requires the least amount of data transformation.
<span class="line-modified"> 5554 ** ^If the xCallback argument is NULL then the collating function is</span>
 5555 ** deleted.  ^When all collating functions having the same name are deleted,
 5556 ** that collation is no longer usable.
 5557 **
 5558 ** ^The collating function callback is invoked with a copy of the pArg
 5559 ** application data pointer and with two strings in the encoding specified
<span class="line-modified"> 5560 ** by the eTextRep argument.  The collating function must return an</span>
<span class="line-modified"> 5561 ** integer that is negative, zero, or positive</span>

 5562 ** if the first string is less than, equal to, or greater than the second,
 5563 ** respectively.  A collating function must always return the same answer
 5564 ** given the same inputs.  If two or more collating functions are registered
 5565 ** to the same collation name (using different eTextRep values) then all
 5566 ** must give an equivalent answer when invoked with equivalent strings.
 5567 ** The collating function must obey the following properties for all
 5568 ** strings A, B, and C:
 5569 **
 5570 ** &lt;ol&gt;
 5571 ** &lt;li&gt; If A==B then B==A.
 5572 ** &lt;li&gt; If A==B and B==C then A==C.
 5573 ** &lt;li&gt; If A&amp;lt;B THEN B&amp;gt;A.
 5574 ** &lt;li&gt; If A&amp;lt;B and B&amp;lt;C then A&amp;lt;C.
 5575 ** &lt;/ol&gt;
 5576 **
 5577 ** If a collating function fails any of the above constraints and that
<span class="line-modified"> 5578 ** collating function is  registered and used, then the behavior of SQLite</span>
 5579 ** is undefined.
 5580 **
 5581 ** ^The sqlite3_create_collation_v2() works like sqlite3_create_collation()
 5582 ** with the addition that the xDestroy callback is invoked on pArg when
 5583 ** the collating function is deleted.
 5584 ** ^Collating functions are deleted when they are overridden by later
 5585 ** calls to the collation creation functions or when the
 5586 ** [database connection] is closed using [sqlite3_close()].
 5587 **
 5588 ** ^The xDestroy callback is &lt;u&gt;not&lt;/u&gt; called if the
 5589 ** sqlite3_create_collation_v2() function fails.  Applications that invoke
 5590 ** sqlite3_create_collation_v2() with a non-NULL xDestroy argument should
 5591 ** check the return code and dispose of the application data pointer
 5592 ** themselves rather than expecting SQLite to deal with it for them.
 5593 ** This is different from every other SQLite interface.  The inconsistency
 5594 ** is unfortunate but cannot be changed without breaking backwards
 5595 ** compatibility.
 5596 **
 5597 ** See also:  [sqlite3_collation_needed()] and [sqlite3_collation_needed16()].
 5598 */
</pre>
<hr />
<pre>
 5885 */
 5886 SQLITE_API int sqlite3_get_autocommit(sqlite3*);
 5887 
 5888 /*
 5889 ** CAPI3REF: Find The Database Handle Of A Prepared Statement
 5890 ** METHOD: sqlite3_stmt
 5891 **
 5892 ** ^The sqlite3_db_handle interface returns the [database connection] handle
 5893 ** to which a [prepared statement] belongs.  ^The [database connection]
 5894 ** returned by sqlite3_db_handle is the same [database connection]
 5895 ** that was the first argument
 5896 ** to the [sqlite3_prepare_v2()] call (or its variants) that was used to
 5897 ** create the statement in the first place.
 5898 */
 5899 SQLITE_API sqlite3 *sqlite3_db_handle(sqlite3_stmt*);
 5900 
 5901 /*
 5902 ** CAPI3REF: Return The Filename For A Database Connection
 5903 ** METHOD: sqlite3
 5904 **
<span class="line-modified"> 5905 ** ^The sqlite3_db_filename(D,N) interface returns a pointer to a filename</span>
<span class="line-modified"> 5906 ** associated with database N of connection D.  ^The main database file</span>
<span class="line-modified"> 5907 ** has the name &quot;main&quot;.  If there is no attached database N on the database</span>
 5908 ** connection D, or if database N is a temporary or in-memory database, then
 5909 ** this function will return either a NULL pointer or an empty string.
 5910 **




 5911 ** ^The filename returned by this function is the output of the
 5912 ** xFullPathname method of the [VFS].  ^In other words, the filename
 5913 ** will be an absolute pathname, even if the filename used
 5914 ** to open the database originally was a URI or relative pathname.











 5915 */
 5916 SQLITE_API const char *sqlite3_db_filename(sqlite3 *db, const char *zDbName);
 5917 
 5918 /*
 5919 ** CAPI3REF: Determine if a database is read-only
 5920 ** METHOD: sqlite3
 5921 **
 5922 ** ^The sqlite3_db_readonly(D,N) interface returns 1 if the database N
 5923 ** of connection D is read-only, 0 if it is read/write, or -1 if N is not
 5924 ** the name of a database on connection D.
 5925 */
 5926 SQLITE_API int sqlite3_db_readonly(sqlite3 *db, const char *zDbName);
 5927 
 5928 /*
 5929 ** CAPI3REF: Find the next prepared statement
 5930 ** METHOD: sqlite3
 5931 **
 5932 ** ^This interface returns a pointer to the next [prepared statement] after
 5933 ** pStmt associated with the [database connection] pDb.  ^If pStmt is NULL
 5934 ** then this interface returns a pointer to the first prepared statement
</pre>
<hr />
<pre>
 6044   sqlite3*,
 6045   void(*)(void *,int ,char const *,char const *,sqlite3_int64),
 6046   void*
 6047 );
 6048 
 6049 /*
 6050 ** CAPI3REF: Enable Or Disable Shared Pager Cache
 6051 **
 6052 ** ^(This routine enables or disables the sharing of the database cache
 6053 ** and schema data structures between [database connection | connections]
 6054 ** to the same database. Sharing is enabled if the argument is true
 6055 ** and disabled if the argument is false.)^
 6056 **
 6057 ** ^Cache sharing is enabled and disabled for an entire process.
 6058 ** This is a change as of SQLite [version 3.5.0] ([dateof:3.5.0]).
 6059 ** In prior versions of SQLite,
 6060 ** sharing was enabled or disabled for each thread separately.
 6061 **
 6062 ** ^(The cache sharing mode set by this interface effects all subsequent
 6063 ** calls to [sqlite3_open()], [sqlite3_open_v2()], and [sqlite3_open16()].
<span class="line-modified"> 6064 ** Existing database connections continue use the sharing mode</span>
 6065 ** that was in effect at the time they were opened.)^
 6066 **
 6067 ** ^(This routine returns [SQLITE_OK] if shared cache was enabled or disabled
 6068 ** successfully.  An [error code] is returned otherwise.)^
 6069 **
<span class="line-modified"> 6070 ** ^Shared cache is disabled by default. But this might change in</span>
<span class="line-modified"> 6071 ** future releases of SQLite.  Applications that care about shared</span>
<span class="line-modified"> 6072 ** cache setting should set it explicitly.</span>




 6073 **
 6074 ** Note: This method is disabled on MacOS X 10.7 and iOS version 5.0
 6075 ** and will always return SQLITE_MISUSE. On those systems,
 6076 ** shared cache mode should be enabled per-database connection via
 6077 ** [sqlite3_open_v2()] with [SQLITE_OPEN_SHAREDCACHE].
 6078 **
 6079 ** This interface is threadsafe on processors where writing a
 6080 ** 32-bit integer is atomic.
 6081 **
 6082 ** See Also:  [SQLite Shared-Cache Mode]
 6083 */
 6084 SQLITE_API int sqlite3_enable_shared_cache(int);
 6085 
 6086 /*
 6087 ** CAPI3REF: Attempt To Free Heap Memory
 6088 **
 6089 ** ^The sqlite3_release_memory() interface attempts to free N bytes
 6090 ** of heap memory by deallocating non-essential memory allocations
 6091 ** held by the database library.   Memory used to cache database
 6092 ** pages to improve performance is an example of non-essential memory.
</pre>
<hr />
<pre>
 6099 */
 6100 SQLITE_API int sqlite3_release_memory(int);
 6101 
 6102 /*
 6103 ** CAPI3REF: Free Memory Used By A Database Connection
 6104 ** METHOD: sqlite3
 6105 **
 6106 ** ^The sqlite3_db_release_memory(D) interface attempts to free as much heap
 6107 ** memory as possible from database connection D. Unlike the
 6108 ** [sqlite3_release_memory()] interface, this interface is in effect even
 6109 ** when the [SQLITE_ENABLE_MEMORY_MANAGEMENT] compile-time option is
 6110 ** omitted.
 6111 **
 6112 ** See also: [sqlite3_release_memory()]
 6113 */
 6114 SQLITE_API int sqlite3_db_release_memory(sqlite3*);
 6115 
 6116 /*
 6117 ** CAPI3REF: Impose A Limit On Heap Size
 6118 **



 6119 ** ^The sqlite3_soft_heap_limit64() interface sets and/or queries the
 6120 ** soft limit on the amount of heap memory that may be allocated by SQLite.
 6121 ** ^SQLite strives to keep heap memory utilization below the soft heap
 6122 ** limit by reducing the number of pages held in the page cache
 6123 ** as heap memory usages approaches the limit.
 6124 ** ^The soft heap limit is &quot;soft&quot; because even though SQLite strives to stay
 6125 ** below the limit, it will exceed the limit rather than generate
 6126 ** an [SQLITE_NOMEM] error.  In other words, the soft heap limit
 6127 ** is advisory only.
 6128 **
<span class="line-modified"> 6129 ** ^The return value from sqlite3_soft_heap_limit64() is the size of</span>
<span class="line-modified"> 6130 ** the soft heap limit prior to the call, or negative in the case of an</span>
<span class="line-modified"> 6131 ** error.  ^If the argument N is negative</span>
<span class="line-modified"> 6132 ** then no change is made to the soft heap limit.  Hence, the current</span>
<span class="line-modified"> 6133 ** size of the soft heap limit can be determined by invoking</span>
<span class="line-removed"> 6134 ** sqlite3_soft_heap_limit64() with a negative argument.</span>
<span class="line-removed"> 6135 **</span>
<span class="line-removed"> 6136 ** ^If the argument N is zero then the soft heap limit is disabled.</span>
 6137 **
<span class="line-modified"> 6138 ** ^(The soft heap limit is not enforced in the current implementation</span>
























 6139 ** if one or more of following conditions are true:
 6140 **
 6141 ** &lt;ul&gt;
<span class="line-modified"> 6142 ** &lt;li&gt; The soft heap limit is set to zero.</span>
 6143 ** &lt;li&gt; Memory accounting is disabled using a combination of the
 6144 **      [sqlite3_config]([SQLITE_CONFIG_MEMSTATUS],...) start-time option and
 6145 **      the [SQLITE_DEFAULT_MEMSTATUS] compile-time option.
 6146 ** &lt;li&gt; An alternative page cache implementation is specified using
 6147 **      [sqlite3_config]([SQLITE_CONFIG_PCACHE2],...).
 6148 ** &lt;li&gt; The page cache allocates from its own memory pool supplied
 6149 **      by [sqlite3_config]([SQLITE_CONFIG_PAGECACHE],...) rather than
 6150 **      from the heap.
 6151 ** &lt;/ul&gt;)^
 6152 **
<span class="line-modified"> 6153 ** Beginning with SQLite [version 3.7.3] ([dateof:3.7.3]),</span>
<span class="line-removed"> 6154 ** the soft heap limit is enforced</span>
<span class="line-removed"> 6155 ** regardless of whether or not the [SQLITE_ENABLE_MEMORY_MANAGEMENT]</span>
<span class="line-removed"> 6156 ** compile-time option is invoked.  With [SQLITE_ENABLE_MEMORY_MANAGEMENT],</span>
<span class="line-removed"> 6157 ** the soft heap limit is enforced on every memory allocation.  Without</span>
<span class="line-removed"> 6158 ** [SQLITE_ENABLE_MEMORY_MANAGEMENT], the soft heap limit is only enforced</span>
<span class="line-removed"> 6159 ** when memory is allocated by the page cache.  Testing suggests that because</span>
<span class="line-removed"> 6160 ** the page cache is the predominate memory user in SQLite, most</span>
<span class="line-removed"> 6161 ** applications will achieve adequate soft heap limit enforcement without</span>
<span class="line-removed"> 6162 ** the use of [SQLITE_ENABLE_MEMORY_MANAGEMENT].</span>
<span class="line-removed"> 6163 **</span>
<span class="line-removed"> 6164 ** The circumstances under which SQLite will enforce the soft heap limit may</span>
 6165 ** changes in future releases of SQLite.
 6166 */
 6167 SQLITE_API sqlite3_int64 sqlite3_soft_heap_limit64(sqlite3_int64 N);

 6168 
 6169 /*
 6170 ** CAPI3REF: Deprecated Soft Heap Limit Interface
 6171 ** DEPRECATED
 6172 **
 6173 ** This is a deprecated version of the [sqlite3_soft_heap_limit64()]
 6174 ** interface.  This routine is provided for historical compatibility
 6175 ** only.  All new applications should use the
 6176 ** [sqlite3_soft_heap_limit64()] interface rather than this one.
 6177 */
 6178 SQLITE_API SQLITE_DEPRECATED void sqlite3_soft_heap_limit(int N);
 6179 
 6180 
 6181 /*
 6182 ** CAPI3REF: Extract Metadata About A Column Of A Table
 6183 ** METHOD: sqlite3
 6184 **
 6185 ** ^(The sqlite3_table_column_metadata(X,D,T,C,....) routine returns
 6186 ** information about column C of table T in database D
 6187 ** on [database connection] X.)^  ^The sqlite3_table_column_metadata()
 6188 ** interface returns SQLITE_OK and fills in the non-NULL pointers in
 6189 ** the final five arguments with appropriate values if the specified
 6190 ** column exists.  ^The sqlite3_table_column_metadata() interface returns
<span class="line-modified"> 6191 ** SQLITE_ERROR and if the specified column does not exist.</span>
 6192 ** ^If the column-name parameter to sqlite3_table_column_metadata() is a
 6193 ** NULL pointer, then this routine simply checks for the existence of the
 6194 ** table and returns SQLITE_OK if the table exists and SQLITE_ERROR if it
 6195 ** does not.  If the table name parameter T in a call to
 6196 ** sqlite3_table_column_metadata(X,D,T,C,...) is NULL then the result is
 6197 ** undefined behavior.
 6198 **
 6199 ** ^The column is identified by the second, third and fourth parameters to
 6200 ** this function. ^(The second parameter is either the name of the database
 6201 ** (i.e. &quot;main&quot;, &quot;temp&quot;, or an attached database) containing the specified
 6202 ** table or NULL.)^ ^If it is NULL, then all attached databases are searched
 6203 ** for the table using the same algorithm used by the database engine to
 6204 ** resolve unqualified table references.
 6205 **
 6206 ** ^The third and fourth parameters to this function are the table and column
 6207 ** name of the desired column, respectively.
 6208 **
 6209 ** ^Metadata is returned by writing to the memory locations passed as the 5th
 6210 ** and subsequent parameters to this function. ^Any of these arguments may be
 6211 ** NULL, in which case the corresponding element of metadata is omitted.
</pre>
<hr />
<pre>
 6313 /*
 6314 ** CAPI3REF: Enable Or Disable Extension Loading
 6315 ** METHOD: sqlite3
 6316 **
 6317 ** ^So as not to open security holes in older applications that are
 6318 ** unprepared to deal with [extension loading], and as a means of disabling
 6319 ** [extension loading] while evaluating user-entered SQL, the following API
 6320 ** is provided to turn the [sqlite3_load_extension()] mechanism on and off.
 6321 **
 6322 ** ^Extension loading is off by default.
 6323 ** ^Call the sqlite3_enable_load_extension() routine with onoff==1
 6324 ** to turn extension loading on and call it with onoff==0 to turn
 6325 ** it back off again.
 6326 **
 6327 ** ^This interface enables or disables both the C-API
 6328 ** [sqlite3_load_extension()] and the SQL function [load_extension()].
 6329 ** ^(Use [sqlite3_db_config](db,[SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION],..)
 6330 ** to enable or disable only the C-API.)^
 6331 **
 6332 ** &lt;b&gt;Security warning:&lt;/b&gt; It is recommended that extension loading
<span class="line-modified"> 6333 ** be disabled using the [SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION] method</span>
 6334 ** rather than this interface, so the [load_extension()] SQL function
 6335 ** remains disabled. This will prevent SQL injections from giving attackers
 6336 ** access to extension loading capabilities.
 6337 */
 6338 SQLITE_API int sqlite3_enable_load_extension(sqlite3 *db, int onoff);
 6339 
 6340 /*
 6341 ** CAPI3REF: Automatically Load Statically Linked Extensions
 6342 **
 6343 ** ^This interface causes the xEntryPoint() function to be invoked for
 6344 ** each new [database connection] that is created.  The idea here is that
 6345 ** xEntryPoint() is the entry point for a statically linked [SQLite extension]
 6346 ** that is to be automatically loaded into all new database connections.
 6347 **
 6348 ** ^(Even though the function prototype shows that xEntryPoint() takes
 6349 ** no arguments and returns void, SQLite invokes xEntryPoint() with three
 6350 ** arguments and expects an integer result as if the signature of the
 6351 ** entry point where as follows:
 6352 **
 6353 ** &lt;blockquote&gt;&lt;pre&gt;
</pre>
<hr />
<pre>
 6400 ** to be experimental.  The interface might change in incompatible ways.
 6401 ** If this is a problem for you, do not use the interface at this time.
 6402 **
 6403 ** When the virtual-table mechanism stabilizes, we will declare the
 6404 ** interface fixed, support it indefinitely, and remove this comment.
 6405 */
 6406 
 6407 /*
 6408 ** Structures used by the virtual table interface
 6409 */
 6410 typedef struct sqlite3_vtab sqlite3_vtab;
 6411 typedef struct sqlite3_index_info sqlite3_index_info;
 6412 typedef struct sqlite3_vtab_cursor sqlite3_vtab_cursor;
 6413 typedef struct sqlite3_module sqlite3_module;
 6414 
 6415 /*
 6416 ** CAPI3REF: Virtual Table Object
 6417 ** KEYWORDS: sqlite3_module {virtual table module}
 6418 **
 6419 ** This structure, sometimes called a &quot;virtual table module&quot;,
<span class="line-modified"> 6420 ** defines the implementation of a [virtual tables].</span>
 6421 ** This structure consists mostly of methods for the module.
 6422 **
 6423 ** ^A virtual table module is created by filling in a persistent
 6424 ** instance of this structure and passing a pointer to that instance
 6425 ** to [sqlite3_create_module()] or [sqlite3_create_module_v2()].
 6426 ** ^The registration remains valid until it is replaced by a different
 6427 ** module or until the [database connection] closes.  The content
 6428 ** of this structure must not change while it is registered with
 6429 ** any database connection.
 6430 */
 6431 struct sqlite3_module {
 6432   int iVersion;
 6433   int (*xCreate)(sqlite3*, void *pAux,
 6434                int argc, const char *const*argv,
 6435                sqlite3_vtab **ppVTab, char**);
 6436   int (*xConnect)(sqlite3*, void *pAux,
 6437                int argc, const char *const*argv,
 6438                sqlite3_vtab **ppVTab, char**);
 6439   int (*xBestIndex)(sqlite3_vtab *pVTab, sqlite3_index_info*);
 6440   int (*xDisconnect)(sqlite3_vtab *pVTab);
</pre>
<hr />
<pre>
 6497 **
 6498 ** ^Information about the ORDER BY clause is stored in aOrderBy[].
 6499 ** ^Each term of aOrderBy records a column of the ORDER BY clause.
 6500 **
 6501 ** The colUsed field indicates which columns of the virtual table may be
 6502 ** required by the current scan. Virtual table columns are numbered from
 6503 ** zero in the order in which they appear within the CREATE TABLE statement
 6504 ** passed to sqlite3_declare_vtab(). For the first 63 columns (columns 0-62),
 6505 ** the corresponding bit is set within the colUsed mask if the column may be
 6506 ** required by SQLite. If the table has at least 64 columns and any column
 6507 ** to the right of the first 63 is required, then bit 63 of colUsed is also
 6508 ** set. In other words, column iCol may be required if the expression
 6509 ** (colUsed &amp; ((sqlite3_uint64)1 &lt;&lt; (iCol&gt;=63 ? 63 : iCol))) evaluates to
 6510 ** non-zero.
 6511 **
 6512 ** The [xBestIndex] method must fill aConstraintUsage[] with information
 6513 ** about what parameters to pass to xFilter.  ^If argvIndex&gt;0 then
 6514 ** the right-hand side of the corresponding aConstraint[] is evaluated
 6515 ** and becomes the argvIndex-th entry in argv.  ^(If aConstraintUsage[].omit
 6516 ** is true, then the constraint is assumed to be fully handled by the
<span class="line-modified"> 6517 ** virtual table and is not checked again by SQLite.)^</span>






 6518 **
 6519 ** ^The idxNum and idxPtr values are recorded and passed into the
 6520 ** [xFilter] method.
 6521 ** ^[sqlite3_free()] is used to free idxPtr if and only if
 6522 ** needToFreeIdxPtr is true.
 6523 **
 6524 ** ^The orderByConsumed means that output from [xFilter]/[xNext] will occur in
 6525 ** the correct order to satisfy the ORDER BY clause so that no separate
 6526 ** sorting step is required.
 6527 **
 6528 ** ^The estimatedCost value is an estimate of the cost of a particular
 6529 ** strategy. A cost of N indicates that the cost of the strategy is similar
 6530 ** to a linear scan of an SQLite table with N rows. A cost of log(N)
 6531 ** indicates that the expense of the operation is similar to that of a
 6532 ** binary search on a unique indexed field of an SQLite table with N rows.
 6533 **
 6534 ** ^The estimatedRows value is an estimate of the number of rows that
 6535 ** will be returned by the strategy.
 6536 **
 6537 ** The xBestIndex method may optionally populate the idxFlags field with a
 6538 ** mask of SQLITE_INDEX_SCAN_* flags. Currently there is only one such flag -
 6539 ** SQLITE_INDEX_SCAN_UNIQUE. If the xBestIndex method sets this flag, SQLite
 6540 ** assumes that the strategy may visit at most one row.
 6541 **
 6542 ** Additionally, if xBestIndex sets the SQLITE_INDEX_SCAN_UNIQUE flag, then
 6543 ** SQLite also assumes that if a call to the xUpdate() method is made as
 6544 ** part of the same statement to delete or update a virtual table row and the
 6545 ** implementation returns SQLITE_CONSTRAINT, then there is no need to rollback
 6546 ** any database changes. In other words, if the xUpdate() returns
 6547 ** SQLITE_CONSTRAINT, the database contents must be exactly as they were
 6548 ** before xUpdate was called. By contrast, if SQLITE_INDEX_SCAN_UNIQUE is not
 6549 ** set and xUpdate returns SQLITE_CONSTRAINT, any database changes made by
 6550 ** the xUpdate method are automatically rolled back by SQLite.
 6551 **
 6552 ** IMPORTANT: The estimatedRows field was added to the sqlite3_index_info
 6553 ** structure for SQLite [version 3.8.2] ([dateof:3.8.2]).
 6554 ** If a virtual table extension is
 6555 ** used with an SQLite version earlier than 3.8.2, the results of attempting
 6556 ** to read or write the estimatedRows field are undefined (but are likely
<span class="line-modified"> 6557 ** to included crashing the application). The estimatedRows field should</span>
 6558 ** therefore only be used if [sqlite3_libversion_number()] returns a
 6559 ** value greater than or equal to 3008002. Similarly, the idxFlags field
 6560 ** was added for [version 3.9.0] ([dateof:3.9.0]).
 6561 ** It may therefore only be used if
 6562 ** sqlite3_libversion_number() returns a value greater than or equal to
 6563 ** 3009000.
 6564 */
 6565 struct sqlite3_index_info {
 6566   /* Inputs */
 6567   int nConstraint;           /* Number of entries in aConstraint */
 6568   struct sqlite3_index_constraint {
 6569      int iColumn;              /* Column constrained.  -1 for ROWID */
 6570      unsigned char op;         /* Constraint operator */
 6571      unsigned char usable;     /* True if this constraint is usable */
 6572      int iTermOffset;          /* Used internally - xBestIndex should ignore */
 6573   } *aConstraint;            /* Table of WHERE clause constraints */
 6574   int nOrderBy;              /* Number of terms in the ORDER BY clause */
 6575   struct sqlite3_index_orderby {
 6576      int iColumn;              /* Column number */
 6577      unsigned char desc;       /* True for DESC.  False for ASC. */
</pre>
<hr />
<pre>
 6589   /* Fields below are only available in SQLite 3.8.2 and later */
 6590   sqlite3_int64 estimatedRows;    /* Estimated number of rows returned */
 6591   /* Fields below are only available in SQLite 3.9.0 and later */
 6592   int idxFlags;              /* Mask of SQLITE_INDEX_SCAN_* flags */
 6593   /* Fields below are only available in SQLite 3.10.0 and later */
 6594   sqlite3_uint64 colUsed;    /* Input: Mask of columns used by statement */
 6595 };
 6596 
 6597 /*
 6598 ** CAPI3REF: Virtual Table Scan Flags
 6599 **
 6600 ** Virtual table implementations are allowed to set the
 6601 ** [sqlite3_index_info].idxFlags field to some combination of
 6602 ** these bits.
 6603 */
 6604 #define SQLITE_INDEX_SCAN_UNIQUE      1     /* Scan visits at most 1 row */
 6605 
 6606 /*
 6607 ** CAPI3REF: Virtual Table Constraint Operator Codes
 6608 **
<span class="line-modified"> 6609 ** These macros defined the allowed values for the</span>
 6610 ** [sqlite3_index_info].aConstraint[].op field.  Each value represents
 6611 ** an operator that is part of a constraint term in the wHERE clause of
 6612 ** a query that uses a [virtual table].
 6613 */
 6614 #define SQLITE_INDEX_CONSTRAINT_EQ         2
 6615 #define SQLITE_INDEX_CONSTRAINT_GT         4
 6616 #define SQLITE_INDEX_CONSTRAINT_LE         8
 6617 #define SQLITE_INDEX_CONSTRAINT_LT        16
 6618 #define SQLITE_INDEX_CONSTRAINT_GE        32
 6619 #define SQLITE_INDEX_CONSTRAINT_MATCH     64
 6620 #define SQLITE_INDEX_CONSTRAINT_LIKE      65
 6621 #define SQLITE_INDEX_CONSTRAINT_GLOB      66
 6622 #define SQLITE_INDEX_CONSTRAINT_REGEXP    67
 6623 #define SQLITE_INDEX_CONSTRAINT_NE        68
 6624 #define SQLITE_INDEX_CONSTRAINT_ISNOT     69
 6625 #define SQLITE_INDEX_CONSTRAINT_ISNOTNULL 70
 6626 #define SQLITE_INDEX_CONSTRAINT_ISNULL    71
 6627 #define SQLITE_INDEX_CONSTRAINT_IS        72
 6628 #define SQLITE_INDEX_CONSTRAINT_FUNCTION 150
 6629 
</pre>
<hr />
<pre>
 7199 ** those obtained by the xMutexInit method.  ^The xMutexEnd()
 7200 ** interface is invoked exactly once for each call to [sqlite3_shutdown()].
 7201 **
 7202 ** ^(The remaining seven methods defined by this structure (xMutexAlloc,
 7203 ** xMutexFree, xMutexEnter, xMutexTry, xMutexLeave, xMutexHeld and
 7204 ** xMutexNotheld) implement the following interfaces (respectively):
 7205 **
 7206 ** &lt;ul&gt;
 7207 **   &lt;li&gt;  [sqlite3_mutex_alloc()] &lt;/li&gt;
 7208 **   &lt;li&gt;  [sqlite3_mutex_free()] &lt;/li&gt;
 7209 **   &lt;li&gt;  [sqlite3_mutex_enter()] &lt;/li&gt;
 7210 **   &lt;li&gt;  [sqlite3_mutex_try()] &lt;/li&gt;
 7211 **   &lt;li&gt;  [sqlite3_mutex_leave()] &lt;/li&gt;
 7212 **   &lt;li&gt;  [sqlite3_mutex_held()] &lt;/li&gt;
 7213 **   &lt;li&gt;  [sqlite3_mutex_notheld()] &lt;/li&gt;
 7214 ** &lt;/ul&gt;)^
 7215 **
 7216 ** The only difference is that the public sqlite3_XXX functions enumerated
 7217 ** above silently ignore any invocations that pass a NULL pointer instead
 7218 ** of a valid mutex handle. The implementations of the methods defined
<span class="line-modified"> 7219 ** by this structure are not required to handle this case, the results</span>
 7220 ** of passing a NULL pointer instead of a valid mutex handle are undefined
 7221 ** (i.e. it is acceptable to provide an implementation that segfaults if
 7222 ** it is passed a NULL pointer).
 7223 **
 7224 ** The xMutexInit() method must be threadsafe.  It must be harmless to
 7225 ** invoke xMutexInit() multiple times within the same process and without
 7226 ** intervening calls to xMutexEnd().  Second and subsequent calls to
 7227 ** xMutexInit() must be no-ops.
 7228 **
 7229 ** xMutexInit() must not use SQLite memory allocation ([sqlite3_malloc()]
 7230 ** and its associates).  Similarly, xMutexAlloc() must not use SQLite memory
 7231 ** allocation for a static mutex.  ^However xMutexAlloc() may use SQLite
 7232 ** memory allocation for a fast or recursive mutex.
 7233 **
 7234 ** ^SQLite will invoke the xMutexEnd() method when [sqlite3_shutdown()] is
 7235 ** called, but only if the prior call to xMutexInit returned SQLITE_OK.
 7236 ** If xMutexInit fails in any way, it is expected to clean up after itself
 7237 ** prior to returning.
 7238 */
 7239 typedef struct sqlite3_mutex_methods sqlite3_mutex_methods;
</pre>
<hr />
<pre>
 7672 ** currently checked out.&lt;/dd&gt;)^
 7673 **
 7674 ** [[SQLITE_STATUS_PAGECACHE_USED]] ^(&lt;dt&gt;SQLITE_STATUS_PAGECACHE_USED&lt;/dt&gt;
 7675 ** &lt;dd&gt;This parameter returns the number of pages used out of the
 7676 ** [pagecache memory allocator] that was configured using
 7677 ** [SQLITE_CONFIG_PAGECACHE].  The
 7678 ** value returned is in pages, not in bytes.&lt;/dd&gt;)^
 7679 **
 7680 ** [[SQLITE_STATUS_PAGECACHE_OVERFLOW]]
 7681 ** ^(&lt;dt&gt;SQLITE_STATUS_PAGECACHE_OVERFLOW&lt;/dt&gt;
 7682 ** &lt;dd&gt;This parameter returns the number of bytes of page cache
 7683 ** allocation which could not be satisfied by the [SQLITE_CONFIG_PAGECACHE]
 7684 ** buffer and where forced to overflow to [sqlite3_malloc()].  The
 7685 ** returned value includes allocations that overflowed because they
 7686 ** where too large (they were larger than the &quot;sz&quot; parameter to
 7687 ** [SQLITE_CONFIG_PAGECACHE]) and allocations that overflowed because
 7688 ** no space was left in the page cache.&lt;/dd&gt;)^
 7689 **
 7690 ** [[SQLITE_STATUS_PAGECACHE_SIZE]] ^(&lt;dt&gt;SQLITE_STATUS_PAGECACHE_SIZE&lt;/dt&gt;
 7691 ** &lt;dd&gt;This parameter records the largest memory allocation request
<span class="line-modified"> 7692 ** handed to [pagecache memory allocator].  Only the value returned in the</span>
 7693 ** *pHighwater parameter to [sqlite3_status()] is of interest.
 7694 ** The value written into the *pCurrent parameter is undefined.&lt;/dd&gt;)^
 7695 **
 7696 ** [[SQLITE_STATUS_SCRATCH_USED]] &lt;dt&gt;SQLITE_STATUS_SCRATCH_USED&lt;/dt&gt;
 7697 ** &lt;dd&gt;No longer used.&lt;/dd&gt;
 7698 **
 7699 ** [[SQLITE_STATUS_SCRATCH_OVERFLOW]] ^(&lt;dt&gt;SQLITE_STATUS_SCRATCH_OVERFLOW&lt;/dt&gt;
 7700 ** &lt;dd&gt;No longer used.&lt;/dd&gt;
 7701 **
 7702 ** [[SQLITE_STATUS_SCRATCH_SIZE]] &lt;dt&gt;SQLITE_STATUS_SCRATCH_SIZE&lt;/dt&gt;
 7703 ** &lt;dd&gt;No longer used.&lt;/dd&gt;
 7704 **
 7705 ** [[SQLITE_STATUS_PARSER_STACK]] ^(&lt;dt&gt;SQLITE_STATUS_PARSER_STACK&lt;/dt&gt;
 7706 ** &lt;dd&gt;The *pHighwater parameter records the deepest parser stack.
 7707 ** The *pCurrent value is undefined.  The *pHighwater value is only
 7708 ** meaningful if SQLite is compiled with [YYTRACKMAXSTACKDEPTH].&lt;/dd&gt;)^
 7709 ** &lt;/dl&gt;
 7710 **
 7711 ** New status parameters may be added from time to time.
 7712 */
</pre>
<hr />
<pre>
 7748 
 7749 /*
 7750 ** CAPI3REF: Status Parameters for database connections
 7751 ** KEYWORDS: {SQLITE_DBSTATUS options}
 7752 **
 7753 ** These constants are the available integer &quot;verbs&quot; that can be passed as
 7754 ** the second argument to the [sqlite3_db_status()] interface.
 7755 **
 7756 ** New verbs may be added in future releases of SQLite. Existing verbs
 7757 ** might be discontinued. Applications should check the return code from
 7758 ** [sqlite3_db_status()] to make sure that the call worked.
 7759 ** The [sqlite3_db_status()] interface will return a non-zero error code
 7760 ** if a discontinued or unsupported verb is invoked.
 7761 **
 7762 ** &lt;dl&gt;
 7763 ** [[SQLITE_DBSTATUS_LOOKASIDE_USED]] ^(&lt;dt&gt;SQLITE_DBSTATUS_LOOKASIDE_USED&lt;/dt&gt;
 7764 ** &lt;dd&gt;This parameter returns the number of lookaside memory slots currently
 7765 ** checked out.&lt;/dd&gt;)^
 7766 **
 7767 ** [[SQLITE_DBSTATUS_LOOKASIDE_HIT]] ^(&lt;dt&gt;SQLITE_DBSTATUS_LOOKASIDE_HIT&lt;/dt&gt;
<span class="line-modified"> 7768 ** &lt;dd&gt;This parameter returns the number malloc attempts that were</span>
 7769 ** satisfied using lookaside memory. Only the high-water value is meaningful;
 7770 ** the current value is always zero.)^
 7771 **
 7772 ** [[SQLITE_DBSTATUS_LOOKASIDE_MISS_SIZE]]
 7773 ** ^(&lt;dt&gt;SQLITE_DBSTATUS_LOOKASIDE_MISS_SIZE&lt;/dt&gt;
 7774 ** &lt;dd&gt;This parameter returns the number malloc attempts that might have
 7775 ** been satisfied using lookaside memory but failed due to the amount of
 7776 ** memory requested being larger than the lookaside slot size.
 7777 ** Only the high-water value is meaningful;
 7778 ** the current value is always zero.)^
 7779 **
 7780 ** [[SQLITE_DBSTATUS_LOOKASIDE_MISS_FULL]]
 7781 ** ^(&lt;dt&gt;SQLITE_DBSTATUS_LOOKASIDE_MISS_FULL&lt;/dt&gt;
 7782 ** &lt;dd&gt;This parameter returns the number malloc attempts that might have
 7783 ** been satisfied using lookaside memory but failed due to all lookaside
 7784 ** memory already being in use.
 7785 ** Only the high-water value is meaningful;
 7786 ** the current value is always zero.)^
 7787 **
 7788 ** [[SQLITE_DBSTATUS_CACHE_USED]] ^(&lt;dt&gt;SQLITE_DBSTATUS_CACHE_USED&lt;/dt&gt;
</pre>
<hr />
<pre>
 7830 ** is always 0.
 7831 ** &lt;/dd&gt;
 7832 **
 7833 ** [[SQLITE_DBSTATUS_CACHE_WRITE]] ^(&lt;dt&gt;SQLITE_DBSTATUS_CACHE_WRITE&lt;/dt&gt;
 7834 ** &lt;dd&gt;This parameter returns the number of dirty cache entries that have
 7835 ** been written to disk. Specifically, the number of pages written to the
 7836 ** wal file in wal mode databases, or the number of pages written to the
 7837 ** database file in rollback mode databases. Any pages written as part of
 7838 ** transaction rollback or database recovery operations are not included.
 7839 ** If an IO or other error occurs while writing a page to disk, the effect
 7840 ** on subsequent SQLITE_DBSTATUS_CACHE_WRITE requests is undefined.)^ ^The
 7841 ** highwater mark associated with SQLITE_DBSTATUS_CACHE_WRITE is always 0.
 7842 ** &lt;/dd&gt;
 7843 **
 7844 ** [[SQLITE_DBSTATUS_CACHE_SPILL]] ^(&lt;dt&gt;SQLITE_DBSTATUS_CACHE_SPILL&lt;/dt&gt;
 7845 ** &lt;dd&gt;This parameter returns the number of dirty cache entries that have
 7846 ** been written to disk in the middle of a transaction due to the page
 7847 ** cache overflowing. Transactions are more efficient if they are written
 7848 ** to disk all at once. When pages spill mid-transaction, that introduces
 7849 ** additional overhead. This parameter can be used help identify
<span class="line-modified"> 7850 ** inefficiencies that can be resolve by increasing the cache size.</span>
 7851 ** &lt;/dd&gt;
 7852 **
 7853 ** [[SQLITE_DBSTATUS_DEFERRED_FKS]] ^(&lt;dt&gt;SQLITE_DBSTATUS_DEFERRED_FKS&lt;/dt&gt;
 7854 ** &lt;dd&gt;This parameter returns zero for the current value if and only if
 7855 ** all foreign key constraints (deferred or immediate) have been
 7856 ** resolved.)^  ^The highwater mark is always 0.
 7857 ** &lt;/dd&gt;
 7858 ** &lt;/dl&gt;
 7859 */
 7860 #define SQLITE_DBSTATUS_LOOKASIDE_USED       0
 7861 #define SQLITE_DBSTATUS_CACHE_USED           1
 7862 #define SQLITE_DBSTATUS_SCHEMA_USED          2
 7863 #define SQLITE_DBSTATUS_STMT_USED            3
 7864 #define SQLITE_DBSTATUS_LOOKASIDE_HIT        4
 7865 #define SQLITE_DBSTATUS_LOOKASIDE_MISS_SIZE  5
 7866 #define SQLITE_DBSTATUS_LOOKASIDE_MISS_FULL  6
 7867 #define SQLITE_DBSTATUS_CACHE_HIT            7
 7868 #define SQLITE_DBSTATUS_CACHE_MISS           8
 7869 #define SQLITE_DBSTATUS_CACHE_WRITE          9
 7870 #define SQLITE_DBSTATUS_DEFERRED_FKS        10
</pre>
<hr />
<pre>
 7919 ** A non-zero value in this counter may indicate an opportunity to
 7920 ** improvement performance through careful use of indices.&lt;/dd&gt;
 7921 **
 7922 ** [[SQLITE_STMTSTATUS_AUTOINDEX]] &lt;dt&gt;SQLITE_STMTSTATUS_AUTOINDEX&lt;/dt&gt;
 7923 ** &lt;dd&gt;^This is the number of rows inserted into transient indices that
 7924 ** were created automatically in order to help joins run faster.
 7925 ** A non-zero value in this counter may indicate an opportunity to
 7926 ** improvement performance by adding permanent indices that do not
 7927 ** need to be reinitialized each time the statement is run.&lt;/dd&gt;
 7928 **
 7929 ** [[SQLITE_STMTSTATUS_VM_STEP]] &lt;dt&gt;SQLITE_STMTSTATUS_VM_STEP&lt;/dt&gt;
 7930 ** &lt;dd&gt;^This is the number of virtual machine operations executed
 7931 ** by the prepared statement if that number is less than or equal
 7932 ** to 2147483647.  The number of virtual machine operations can be
 7933 ** used as a proxy for the total work done by the prepared statement.
 7934 ** If the number of virtual machine operations exceeds 2147483647
 7935 ** then the value returned by this statement status code is undefined.
 7936 **
 7937 ** [[SQLITE_STMTSTATUS_REPREPARE]] &lt;dt&gt;SQLITE_STMTSTATUS_REPREPARE&lt;/dt&gt;
 7938 ** &lt;dd&gt;^This is the number of times that the prepare statement has been
<span class="line-modified"> 7939 ** automatically regenerated due to schema changes or change to</span>
 7940 ** [bound parameters] that might affect the query plan.
 7941 **
 7942 ** [[SQLITE_STMTSTATUS_RUN]] &lt;dt&gt;SQLITE_STMTSTATUS_RUN&lt;/dt&gt;
 7943 ** &lt;dd&gt;^This is the number of times that the prepared statement has
 7944 ** been run.  A single &quot;run&quot; for the purposes of this counter is one
 7945 ** or more calls to [sqlite3_step()] followed by a call to [sqlite3_reset()].
 7946 ** The counter is incremented on the first [sqlite3_step()] call of each
 7947 ** cycle.
 7948 **
 7949 ** [[SQLITE_STMTSTATUS_MEMUSED]] &lt;dt&gt;SQLITE_STMTSTATUS_MEMUSED&lt;/dt&gt;
 7950 ** &lt;dd&gt;^This is the approximate number of bytes of heap memory
 7951 ** used to store the prepared statement.  ^This value is not actually
 7952 ** a counter, and so the resetFlg parameter to sqlite3_stmt_status()
 7953 ** is ignored when the opcode is SQLITE_STMTSTATUS_MEMUSED.
 7954 ** &lt;/dd&gt;
 7955 ** &lt;/dl&gt;
 7956 */
 7957 #define SQLITE_STMTSTATUS_FULLSCAN_STEP     1
 7958 #define SQLITE_STMTSTATUS_SORT              2
 7959 #define SQLITE_STMTSTATUS_AUTOINDEX         3
</pre>
<hr />
<pre>
 8090 ** is 1.  After it has been retrieved using xFetch, the page is considered
 8091 ** to be &quot;pinned&quot;.
 8092 **
 8093 ** If the requested page is already in the page cache, then the page cache
 8094 ** implementation must return a pointer to the page buffer with its content
 8095 ** intact.  If the requested page is not already in the cache, then the
 8096 ** cache implementation should use the value of the createFlag
 8097 ** parameter to help it determined what action to take:
 8098 **
 8099 ** &lt;table border=1 width=85% align=center&gt;
 8100 ** &lt;tr&gt;&lt;th&gt; createFlag &lt;th&gt; Behavior when page is not already in cache
 8101 ** &lt;tr&gt;&lt;td&gt; 0 &lt;td&gt; Do not allocate a new page.  Return NULL.
 8102 ** &lt;tr&gt;&lt;td&gt; 1 &lt;td&gt; Allocate a new page if it easy and convenient to do so.
 8103 **                 Otherwise return NULL.
 8104 ** &lt;tr&gt;&lt;td&gt; 2 &lt;td&gt; Make every effort to allocate a new page.  Only return
 8105 **                 NULL if allocating a new page is effectively impossible.
 8106 ** &lt;/table&gt;
 8107 **
 8108 ** ^(SQLite will normally invoke xFetch() with a createFlag of 0 or 1.  SQLite
 8109 ** will only use a createFlag of 2 after a prior call with a createFlag of 1
<span class="line-modified"> 8110 ** failed.)^  In between the to xFetch() calls, SQLite may</span>
 8111 ** attempt to unpin one or more cache pages by spilling the content of
 8112 ** pinned pages to disk and synching the operating system disk cache.
 8113 **
 8114 ** [[the xUnpin() page cache method]]
 8115 ** ^xUnpin() is called by SQLite with a pointer to a currently pinned page
 8116 ** as its second argument.  If the third parameter, discard, is non-zero,
 8117 ** then the page must be evicted from the cache.
 8118 ** ^If the discard parameter is
 8119 ** zero, then the page may be discarded or retained at the discretion of
 8120 ** page cache implementation. ^The page cache implementation
 8121 ** may choose to evict unpinned pages at any time.
 8122 **
 8123 ** The cache must not perform any reference counting. A single
 8124 ** call to xUnpin() unpins the page regardless of the number of prior calls
 8125 ** to xFetch().
 8126 **
 8127 ** [[the xRekey() page cache methods]]
 8128 ** The xRekey() method is used to change the key value associated with the
 8129 ** page passed as the second argument. If the cache
 8130 ** previously contains an entry associated with newKey, it must be
</pre>
<hr />
<pre>
 8408 ** [SQLite Shared-Cache Mode] for a description of shared-cache locking.
 8409 ** ^This API may be used to register a callback that SQLite will invoke
 8410 ** when the connection currently holding the required lock relinquishes it.
 8411 ** ^This API is only available if the library was compiled with the
 8412 ** [SQLITE_ENABLE_UNLOCK_NOTIFY] C-preprocessor symbol defined.
 8413 **
 8414 ** See Also: [Using the SQLite Unlock Notification Feature].
 8415 **
 8416 ** ^Shared-cache locks are released when a database connection concludes
 8417 ** its current transaction, either by committing it or rolling it back.
 8418 **
 8419 ** ^When a connection (known as the blocked connection) fails to obtain a
 8420 ** shared-cache lock and SQLITE_LOCKED is returned to the caller, the
 8421 ** identity of the database connection (the blocking connection) that
 8422 ** has locked the required resource is stored internally. ^After an
 8423 ** application receives an SQLITE_LOCKED error, it may call the
 8424 ** sqlite3_unlock_notify() method with the blocked connection handle as
 8425 ** the first argument to register for a callback that will be invoked
 8426 ** when the blocking connections current transaction is concluded. ^The
 8427 ** callback is invoked from within the [sqlite3_step] or [sqlite3_close]
<span class="line-modified"> 8428 ** call that concludes the blocking connections transaction.</span>
 8429 **
 8430 ** ^(If sqlite3_unlock_notify() is called in a multi-threaded application,
 8431 ** there is a chance that the blocking connection will have already
 8432 ** concluded its transaction by the time sqlite3_unlock_notify() is invoked.
 8433 ** If this happens, then the specified callback is invoked immediately,
 8434 ** from within the call to sqlite3_unlock_notify().)^
 8435 **
 8436 ** ^If the blocked connection is attempting to obtain a write-lock on a
 8437 ** shared-cache table, and more than one other connection currently holds
 8438 ** a read-lock on the same table, then SQLite arbitrarily selects one of
 8439 ** the other connections to use as the blocking connection.
 8440 **
 8441 ** ^(There may be at most one unlock-notify callback registered by a
 8442 ** blocked connection. If sqlite3_unlock_notify() is called when the
 8443 ** blocked connection already has a registered unlock-notify callback,
 8444 ** then the new callback replaces the old.)^ ^If sqlite3_unlock_notify() is
 8445 ** called with a NULL pointer as its second argument, then any existing
 8446 ** unlock-notify callback is canceled. ^The blocked connections
 8447 ** unlock-notify callback may also be canceled by closing the blocked
 8448 ** connection using [sqlite3_close()].
 8449 **
 8450 ** The unlock-notify callback is not reentrant. If an application invokes
 8451 ** any sqlite3_xxx API functions from within an unlock-notify callback, a
 8452 ** crash or deadlock may be the result.
 8453 **
 8454 ** ^Unless deadlock is detected (see below), sqlite3_unlock_notify() always
 8455 ** returns SQLITE_OK.
 8456 **
 8457 ** &lt;b&gt;Callback Invocation Details&lt;/b&gt;
 8458 **
 8459 ** When an unlock-notify callback is registered, the application provides a
 8460 ** single void* pointer that is passed to the callback when it is invoked.
 8461 ** However, the signature of the callback function allows SQLite to pass
 8462 ** it an array of void* context pointers. The first argument passed to
 8463 ** an unlock-notify callback is a pointer to an array of void* pointers,
 8464 ** and the second is the number of entries in the array.
 8465 **
<span class="line-modified"> 8466 ** When a blocking connections transaction is concluded, there may be</span>
 8467 ** more than one blocked connection that has registered for an unlock-notify
 8468 ** callback. ^If two or more such blocked connections have specified the
 8469 ** same callback function, then instead of invoking the callback function
 8470 ** multiple times, it is invoked once with the set of void* context pointers
 8471 ** specified by the blocked connections bundled together into an array.
 8472 ** This gives the application an opportunity to prioritize any actions
 8473 ** related to the set of unblocked database connections.
 8474 **
 8475 ** &lt;b&gt;Deadlock Detection&lt;/b&gt;
 8476 **
 8477 ** Assuming that after registering for an unlock-notify callback a
 8478 ** database waits for the callback to be issued before taking any further
 8479 ** action (a reasonable assumption), then using this API may cause the
 8480 ** application to deadlock. For example, if connection X is waiting for
 8481 ** connection Y&#39;s transaction to be concluded, and similarly connection
 8482 ** Y is waiting on connection X&#39;s transaction, then neither connection
 8483 ** will proceed and the system may remain deadlocked indefinitely.
 8484 **
 8485 ** To avoid this scenario, the sqlite3_unlock_notify() performs deadlock
 8486 ** detection. ^If a given call to sqlite3_unlock_notify() would put the
</pre>
<hr />
<pre>
 8794 ** These constants define all valid values for the &quot;checkpoint mode&quot; passed
 8795 ** as the third parameter to the [sqlite3_wal_checkpoint_v2()] interface.
 8796 ** See the [sqlite3_wal_checkpoint_v2()] documentation for details on the
 8797 ** meaning of each of these checkpoint modes.
 8798 */
 8799 #define SQLITE_CHECKPOINT_PASSIVE  0  /* Do as much as possible w/o blocking */
 8800 #define SQLITE_CHECKPOINT_FULL     1  /* Wait for writers, then checkpoint */
 8801 #define SQLITE_CHECKPOINT_RESTART  2  /* Like FULL but wait for for readers */
 8802 #define SQLITE_CHECKPOINT_TRUNCATE 3  /* Like RESTART but also truncate WAL */
 8803 
 8804 /*
 8805 ** CAPI3REF: Virtual Table Interface Configuration
 8806 **
 8807 ** This function may be called by either the [xConnect] or [xCreate] method
 8808 ** of a [virtual table] implementation to configure
 8809 ** various facets of the virtual table interface.
 8810 **
 8811 ** If this interface is invoked outside the context of an xConnect or
 8812 ** xCreate virtual table method then the behavior is undefined.
 8813 **
<span class="line-modified"> 8814 ** At present, there is only one option that may be configured using</span>
<span class="line-modified"> 8815 ** this function. (See [SQLITE_VTAB_CONSTRAINT_SUPPORT].)  Further options</span>
<span class="line-modified"> 8816 ** may be added in the future.</span>




 8817 */
 8818 SQLITE_API int sqlite3_vtab_config(sqlite3*, int op, ...);
 8819 
 8820 /*
 8821 ** CAPI3REF: Virtual Table Configuration Options


 8822 **
 8823 ** These macros define the various options to the
 8824 ** [sqlite3_vtab_config()] interface that [virtual table] implementations
 8825 ** can use to customize and optimize their behavior.
 8826 **
 8827 ** &lt;dl&gt;
 8828 ** [[SQLITE_VTAB_CONSTRAINT_SUPPORT]]
<span class="line-modified"> 8829 ** &lt;dt&gt;SQLITE_VTAB_CONSTRAINT_SUPPORT</span>
 8830 ** &lt;dd&gt;Calls of the form
 8831 ** [sqlite3_vtab_config](db,SQLITE_VTAB_CONSTRAINT_SUPPORT,X) are supported,
 8832 ** where X is an integer.  If X is zero, then the [virtual table] whose
 8833 ** [xCreate] or [xConnect] method invoked [sqlite3_vtab_config()] does not
 8834 ** support constraints.  In this configuration (which is the default) if
 8835 ** a call to the [xUpdate] method returns [SQLITE_CONSTRAINT], then the entire
 8836 ** statement is rolled back as if [ON CONFLICT | OR ABORT] had been
 8837 ** specified as part of the users SQL statement, regardless of the actual
 8838 ** ON CONFLICT mode specified.
 8839 **
 8840 ** If X is non-zero, then the virtual table implementation guarantees
 8841 ** that if [xUpdate] returns [SQLITE_CONSTRAINT], it will do so before
 8842 ** any modifications to internal or persistent data structures have been made.
 8843 ** If the [ON CONFLICT] mode is ABORT, FAIL, IGNORE or ROLLBACK, SQLite
 8844 ** is able to roll back a statement or database transaction, and abandon
 8845 ** or continue processing the current SQL statement as appropriate.
 8846 ** If the ON CONFLICT mode is REPLACE and the [xUpdate] method returns
 8847 ** [SQLITE_CONSTRAINT], SQLite handles this as if the ON CONFLICT mode
 8848 ** had been ABORT.
 8849 **
 8850 ** Virtual table implementations that are required to handle OR REPLACE
 8851 ** must do so within the [xUpdate] method. If a call to the
 8852 ** [sqlite3_vtab_on_conflict()] function indicates that the current ON
 8853 ** CONFLICT policy is REPLACE, the virtual table implementation should
 8854 ** silently replace the appropriate rows within the xUpdate callback and
 8855 ** return SQLITE_OK. Or, if this is not possible, it may return
 8856 ** SQLITE_CONSTRAINT, in which case SQLite falls back to OR ABORT
 8857 ** constraint handling.




















 8858 ** &lt;/dl&gt;
 8859 */
 8860 #define SQLITE_VTAB_CONSTRAINT_SUPPORT 1


 8861 
 8862 /*
 8863 ** CAPI3REF: Determine The Virtual Table Conflict Policy
 8864 **
 8865 ** This function may only be called from within a call to the [xUpdate] method
 8866 ** of a [virtual table] implementation for an INSERT or UPDATE operation. ^The
 8867 ** value returned is one of [SQLITE_ROLLBACK], [SQLITE_IGNORE], [SQLITE_FAIL],
 8868 ** [SQLITE_ABORT], or [SQLITE_REPLACE], according to the [ON CONFLICT] mode
 8869 ** of the SQL statement that triggered the call to the [xUpdate] method of the
 8870 ** [virtual table].
 8871 */
 8872 SQLITE_API int sqlite3_vtab_on_conflict(sqlite3 *);
 8873 
 8874 /*
 8875 ** CAPI3REF: Determine If Virtual Table Column Access Is For UPDATE
 8876 **
 8877 ** If the sqlite3_vtab_nochange(X) routine is called within the [xColumn]
 8878 ** method of a [virtual table], then it returns true if and only if the
 8879 ** column is being fetched as part of an UPDATE operation during which the
 8880 ** column value will not change.  Applications might use this to substitute
</pre>
<hr />
<pre>
 8920 #define SQLITE_ROLLBACK 1
 8921 /* #define SQLITE_IGNORE 2 // Also used by sqlite3_authorizer() callback */
 8922 #define SQLITE_FAIL     3
 8923 /* #define SQLITE_ABORT 4  // Also an error code */
 8924 #define SQLITE_REPLACE  5
 8925 
 8926 /*
 8927 ** CAPI3REF: Prepared Statement Scan Status Opcodes
 8928 ** KEYWORDS: {scanstatus options}
 8929 **
 8930 ** The following constants can be used for the T parameter to the
 8931 ** [sqlite3_stmt_scanstatus(S,X,T,V)] interface.  Each constant designates a
 8932 ** different metric for sqlite3_stmt_scanstatus() to return.
 8933 **
 8934 ** When the value returned to V is a string, space to hold that string is
 8935 ** managed by the prepared statement S and will be automatically freed when
 8936 ** S is finalized.
 8937 **
 8938 ** &lt;dl&gt;
 8939 ** [[SQLITE_SCANSTAT_NLOOP]] &lt;dt&gt;SQLITE_SCANSTAT_NLOOP&lt;/dt&gt;
<span class="line-modified"> 8940 ** &lt;dd&gt;^The [sqlite3_int64] variable pointed to by the T parameter will be</span>
 8941 ** set to the total number of times that the X-th loop has run.&lt;/dd&gt;
 8942 **
 8943 ** [[SQLITE_SCANSTAT_NVISIT]] &lt;dt&gt;SQLITE_SCANSTAT_NVISIT&lt;/dt&gt;
<span class="line-modified"> 8944 ** &lt;dd&gt;^The [sqlite3_int64] variable pointed to by the T parameter will be set</span>
 8945 ** to the total number of rows examined by all iterations of the X-th loop.&lt;/dd&gt;
 8946 **
 8947 ** [[SQLITE_SCANSTAT_EST]] &lt;dt&gt;SQLITE_SCANSTAT_EST&lt;/dt&gt;
<span class="line-modified"> 8948 ** &lt;dd&gt;^The &quot;double&quot; variable pointed to by the T parameter will be set to the</span>
 8949 ** query planner&#39;s estimate for the average number of rows output from each
 8950 ** iteration of the X-th loop.  If the query planner&#39;s estimates was accurate,
 8951 ** then this value will approximate the quotient NVISIT/NLOOP and the
 8952 ** product of this value for all prior loops with the same SELECTID will
 8953 ** be the NLOOP value for the current loop.
 8954 **
 8955 ** [[SQLITE_SCANSTAT_NAME]] &lt;dt&gt;SQLITE_SCANSTAT_NAME&lt;/dt&gt;
<span class="line-modified"> 8956 ** &lt;dd&gt;^The &quot;const char *&quot; variable pointed to by the T parameter will be set</span>
 8957 ** to a zero-terminated UTF-8 string containing the name of the index or table
 8958 ** used for the X-th loop.
 8959 **
 8960 ** [[SQLITE_SCANSTAT_EXPLAIN]] &lt;dt&gt;SQLITE_SCANSTAT_EXPLAIN&lt;/dt&gt;
<span class="line-modified"> 8961 ** &lt;dd&gt;^The &quot;const char *&quot; variable pointed to by the T parameter will be set</span>
 8962 ** to a zero-terminated UTF-8 string containing the [EXPLAIN QUERY PLAN]
 8963 ** description for the X-th loop.
 8964 **
 8965 ** [[SQLITE_SCANSTAT_SELECTID]] &lt;dt&gt;SQLITE_SCANSTAT_SELECT&lt;/dt&gt;
<span class="line-modified"> 8966 ** &lt;dd&gt;^The &quot;int&quot; variable pointed to by the T parameter will be set to the</span>
 8967 ** &quot;select-id&quot; for the X-th loop.  The select-id identifies which query or
 8968 ** subquery the loop is part of.  The main query has a select-id of zero.
 8969 ** The select-id is the same value as is output in the first column
 8970 ** of an [EXPLAIN QUERY PLAN] query.
 8971 ** &lt;/dl&gt;
 8972 */
 8973 #define SQLITE_SCANSTAT_NLOOP    0
 8974 #define SQLITE_SCANSTAT_NVISIT   1
 8975 #define SQLITE_SCANSTAT_EST      2
 8976 #define SQLITE_SCANSTAT_NAME     3
 8977 #define SQLITE_SCANSTAT_EXPLAIN  4
 8978 #define SQLITE_SCANSTAT_SELECTID 5
 8979 
 8980 /*
 8981 ** CAPI3REF: Prepared Statement Scan Status
 8982 ** METHOD: sqlite3_stmt
 8983 **
 8984 ** This interface returns information about the predicted and measured
 8985 ** performance for pStmt.  Advanced applications can use this
 8986 ** interface to compare the predicted and the measured performance and
</pre>
<hr />
<pre>
 9801 ** conflict-handler callback) then the X&#39;&#39; value is returned. The application
 9802 ** must translate X&#39;&#39; to NULL itself if required.
 9803 **
 9804 ** Legacy (older than 3.22.0) versions of the sessions module cannot capture
 9805 ** changes made to the sqlite_stat1 table. Legacy versions of the
 9806 ** sqlite3changeset_apply() function silently ignore any modifications to the
 9807 ** sqlite_stat1 table that are part of a changeset or patchset.
 9808 */
 9809 SQLITE_API int sqlite3session_attach(
 9810   sqlite3_session *pSession,      /* Session object */
 9811   const char *zTab                /* Table name */
 9812 );
 9813 
 9814 /*
 9815 ** CAPI3REF: Set a table filter on a Session Object.
 9816 ** METHOD: sqlite3_session
 9817 **
 9818 ** The second argument (xFilter) is the &quot;filter callback&quot;. For changes to rows
 9819 ** in tables that are not attached to the Session object, the filter is called
 9820 ** to determine whether changes to the table&#39;s rows should be tracked or not.
<span class="line-modified"> 9821 ** If xFilter returns 0, changes is not tracked. Note that once a table is</span>
 9822 ** attached, xFilter will not be called again.
 9823 */
 9824 SQLITE_API void sqlite3session_table_filter(
 9825   sqlite3_session *pSession,      /* Session object */
 9826   int(*xFilter)(
 9827     void *pCtx,                   /* Copy of third arg to _filter_table() */
 9828     const char *zTab              /* Table name */
 9829   ),
 9830   void *pCtx                      /* First argument passed to xFilter */
 9831 );
 9832 
 9833 /*
 9834 ** CAPI3REF: Generate A Changeset From A Session Object
 9835 ** METHOD: sqlite3_session
 9836 **
 9837 ** Obtain a changeset containing changes to the tables attached to the
 9838 ** session object passed as the first argument. If successful,
 9839 ** set *ppChangeset to point to a buffer containing the changeset
 9840 ** and *pnChangeset to the size of the changeset in bytes before returning
 9841 ** SQLITE_OK. If an error occurs, set both *ppChangeset and *pnChangeset to
</pre>
<hr />
<pre>
 9975 ** &lt;ul&gt;
 9976 **   &lt;li&gt; For each row (primary key) that exists in the to-table but not in
 9977 **     the from-table, an INSERT record is added to the session object.
 9978 **
 9979 **   &lt;li&gt; For each row (primary key) that exists in the to-table but not in
 9980 **     the from-table, a DELETE record is added to the session object.
 9981 **
 9982 **   &lt;li&gt; For each row (primary key) that exists in both tables, but features
 9983 **     different non-PK values in each, an UPDATE record is added to the
 9984 **     session.
 9985 ** &lt;/ul&gt;
 9986 **
 9987 ** To clarify, if this function is called and then a changeset constructed
 9988 ** using [sqlite3session_changeset()], then after applying that changeset to
 9989 ** database zFrom the contents of the two compatible tables would be
 9990 ** identical.
 9991 **
 9992 ** It an error if database zFrom does not exist or does not contain the
 9993 ** required compatible table.
 9994 **
<span class="line-modified"> 9995 ** If the operation successful, SQLITE_OK is returned. Otherwise, an SQLite</span>
 9996 ** error code. In this case, if argument pzErrMsg is not NULL, *pzErrMsg
 9997 ** may be set to point to a buffer containing an English language error
 9998 ** message. It is the responsibility of the caller to free this buffer using
 9999 ** sqlite3_free().
10000 */
10001 SQLITE_API int sqlite3session_diff(
10002   sqlite3_session *pSession,
10003   const char *zFromDb,
10004   const char *zTbl,
10005   char **pzErrMsg
10006 );
10007 
10008 
10009 /*
10010 ** CAPI3REF: Generate A Patchset From A Session Object
10011 ** METHOD: sqlite3_session
10012 **
10013 ** The differences between a patchset and a changeset are that:
10014 **
10015 ** &lt;ul&gt;
</pre>
<hr />
<pre>
10112 );
10113 
10114 /*
10115 ** CAPI3REF: Flags for sqlite3changeset_start_v2
10116 **
10117 ** The following flags may passed via the 4th parameter to
10118 ** [sqlite3changeset_start_v2] and [sqlite3changeset_start_v2_strm]:
10119 **
10120 ** &lt;dt&gt;SQLITE_CHANGESETAPPLY_INVERT &lt;dd&gt;
10121 **   Invert the changeset while iterating through it. This is equivalent to
10122 **   inverting a changeset using sqlite3changeset_invert() before applying it.
10123 **   It is an error to specify this flag with a patchset.
10124 */
10125 #define SQLITE_CHANGESETSTART_INVERT        0x0002
10126 
10127 
10128 /*
10129 ** CAPI3REF: Advance A Changeset Iterator
10130 ** METHOD: sqlite3_changeset_iter
10131 **
<span class="line-modified">10132 ** This function may only be used with iterators created by function</span>
10133 ** [sqlite3changeset_start()]. If it is called on an iterator passed to
10134 ** a conflict-handler callback by [sqlite3changeset_apply()], SQLITE_MISUSE
10135 ** is returned and the call has no effect.
10136 **
10137 ** Immediately after an iterator is created by sqlite3changeset_start(), it
10138 ** does not point to any change in the changeset. Assuming the changeset
10139 ** is not empty, the first call to this function advances the iterator to
10140 ** point to the first change in the changeset. Each subsequent call advances
10141 ** the iterator to point to the next change in the changeset (if any). If
10142 ** no error occurs and the iterator points to a valid change after a call
10143 ** to sqlite3changeset_next() has advanced it, SQLITE_ROW is returned.
10144 ** Otherwise, if all changes in the changeset have already been visited,
10145 ** SQLITE_DONE is returned.
10146 **
10147 ** If an error occurs, an SQLite error code is returned. Possible error
10148 ** codes include SQLITE_CORRUPT (if the changeset buffer is corrupt) or
10149 ** SQLITE_NOMEM.
10150 */
10151 SQLITE_API int sqlite3changeset_next(sqlite3_changeset_iter *pIter);
10152 
</pre>
<hr />
<pre>
10528 **       new change differ from those in the row deleted by the existing
10529 **       change, the existing DELETE is replaced by an UPDATE within the
10530 **       changegroup. Otherwise, if the inserted row is exactly the same
10531 **       as the deleted row, the existing DELETE is simply discarded.
10532 **   &lt;tr&gt;&lt;td&gt;DELETE &lt;td&gt;UPDATE &lt;td&gt;
10533 **       The new change is ignored. This case does not occur if the new
10534 **       changeset was recorded immediately after the changesets already
10535 **       added to the changegroup.
10536 **   &lt;tr&gt;&lt;td&gt;DELETE &lt;td&gt;DELETE &lt;td&gt;
10537 **       The new change is ignored. This case does not occur if the new
10538 **       changeset was recorded immediately after the changesets already
10539 **       added to the changegroup.
10540 ** &lt;/table&gt;
10541 **
10542 ** If the new changeset contains changes to a table that is already present
10543 ** in the changegroup, then the number of columns and the position of the
10544 ** primary key columns for the table must be consistent. If this is not the
10545 ** case, this function fails with SQLITE_SCHEMA. If the input changeset
10546 ** appears to be corrupt and the corruption is detected, SQLITE_CORRUPT is
10547 ** returned. Or, if an out-of-memory condition occurs during processing, this
<span class="line-modified">10548 ** function returns SQLITE_NOMEM. In all cases, if an error occurs the</span>
<span class="line-modified">10549 ** final contents of the changegroup is undefined.</span>
10550 **
10551 ** If no error occurs, SQLITE_OK is returned.
10552 */
10553 SQLITE_API int sqlite3changegroup_add(sqlite3_changegroup*, int nData, void *pData);
10554 
10555 /*
10556 ** CAPI3REF: Obtain A Composite Changeset From A Changegroup
10557 ** METHOD: sqlite3_changegroup
10558 **
10559 ** Obtain a buffer containing a changeset (or patchset) representing the
10560 ** current contents of the changegroup. If the inputs to the changegroup
10561 ** were themselves changesets, the output is a changeset. Or, if the
10562 ** inputs were patchsets, the output is also a patchset.
10563 **
10564 ** As with the output of the sqlite3session_changeset() and
10565 ** sqlite3session_patchset() functions, all changes related to a single
10566 ** table are grouped together in the output of this function. Tables appear
10567 ** in the same order as for the very first changeset added to the changegroup.
10568 ** If the second or subsequent changesets added to the changegroup contain
10569 ** changes for tables that do not appear in the first changeset, they are
</pre>
<hr />
<pre>
10704 **   original row value stored in the changeset, the conflict-handler function
10705 **   is invoked with [SQLITE_CHANGESET_DATA] as the second argument. Since
10706 **   UPDATE changes only contain values for non-primary key fields that are
10707 **   to be modified, only those fields need to match the original values to
10708 **   avoid the SQLITE_CHANGESET_DATA conflict-handler callback.
10709 **
10710 **   If no row with matching primary key values is found in the database,
10711 **   the conflict-handler function is invoked with [SQLITE_CHANGESET_NOTFOUND]
10712 **   passed as the second argument.
10713 **
10714 **   If the UPDATE operation is attempted, but SQLite returns
10715 **   SQLITE_CONSTRAINT, the conflict-handler function is invoked with
10716 **   [SQLITE_CHANGESET_CONSTRAINT] passed as the second argument.
10717 **   This includes the case where the UPDATE operation is attempted after
10718 **   an earlier call to the conflict handler function returned
10719 **   [SQLITE_CHANGESET_REPLACE].
10720 ** &lt;/dl&gt;
10721 **
10722 ** It is safe to execute SQL statements, including those that write to the
10723 ** table that the callback related to, from within the xConflict callback.
<span class="line-modified">10724 ** This can be used to further customize the applications conflict</span>
10725 ** resolution strategy.
10726 **
10727 ** All changes made by these functions are enclosed in a savepoint transaction.
10728 ** If any other error (aside from a constraint failure when attempting to
10729 ** write to the target database) occurs, then the savepoint transaction is
10730 ** rolled back, restoring the target database to its original state, and an
10731 ** SQLite error code returned.
10732 **
10733 ** If the output parameters (ppRebase) and (pnRebase) are non-NULL and
10734 ** the input is a changeset (not a patchset), then sqlite3changeset_apply_v2()
10735 ** may set (*ppRebase) to point to a &quot;rebase&quot; that may be used with the
10736 ** sqlite3_rebaser APIs buffer before returning. In this case (*pnRebase)
10737 ** is set to the size of the buffer in bytes. It is the responsibility of the
10738 ** caller to eventually free any such buffer using sqlite3_free(). The buffer
10739 ** is only allocated and populated if one or more conflicts were encountered
10740 ** while applying the patchset. See comments surrounding the sqlite3_rebaser
10741 ** APIs for further details.
10742 **
10743 ** The behavior of sqlite3changeset_apply_v2() and its streaming equivalent
10744 ** may be modified by passing a combination of
</pre>
<hr />
<pre>
11014 /*
11015 ** CAPI3REF: Configure a changeset rebaser object.
11016 ** EXPERIMENTAL
11017 **
11018 ** Configure the changeset rebaser object to rebase changesets according
11019 ** to the conflict resolutions described by buffer pRebase (size nRebase
11020 ** bytes), which must have been obtained from a previous call to
11021 ** sqlite3changeset_apply_v2().
11022 */
11023 SQLITE_API int sqlite3rebaser_configure(
11024   sqlite3_rebaser*,
11025   int nRebase, const void *pRebase
11026 );
11027 
11028 /*
11029 ** CAPI3REF: Rebase a changeset
11030 ** EXPERIMENTAL
11031 **
11032 ** Argument pIn must point to a buffer containing a changeset nIn bytes
11033 ** in size. This function allocates and populates a buffer with a copy
<span class="line-modified">11034 ** of the changeset rebased rebased according to the configuration of the</span>
11035 ** rebaser object passed as the first argument. If successful, (*ppOut)
11036 ** is set to point to the new buffer containing the rebased changeset and
11037 ** (*pnOut) to its size in bytes and SQLITE_OK returned. It is the
11038 ** responsibility of the caller to eventually free the new buffer using
11039 ** sqlite3_free(). Otherwise, if an error occurs, (*ppOut) and (*pnOut)
11040 ** are set to zero and an SQLite error code returned.
11041 */
11042 SQLITE_API int sqlite3rebaser_rebase(
11043   sqlite3_rebaser*,
11044   int nIn, const void *pIn,
11045   int *pnOut, void **ppOut
11046 );
11047 
11048 /*
11049 ** CAPI3REF: Delete a changeset rebaser object.
11050 ** EXPERIMENTAL
11051 **
11052 ** Delete the changeset rebaser object and all associated resources. There
11053 ** should be one call to this function for each successful invocation
11054 ** of sqlite3rebaser_create().
</pre>
<hr />
<pre>
11422 **   current query is executed. Any column filter that applies to
11423 **   phrase iPhrase of the current query is included in $p. For each
11424 **   row visited, the callback function passed as the fourth argument
11425 **   is invoked. The context and API objects passed to the callback
11426 **   function may be used to access the properties of each matched row.
11427 **   Invoking Api.xUserData() returns a copy of the pointer passed as
11428 **   the third argument to pUserData.
11429 **
11430 **   If the callback function returns any value other than SQLITE_OK, the
11431 **   query is abandoned and the xQueryPhrase function returns immediately.
11432 **   If the returned value is SQLITE_DONE, xQueryPhrase returns SQLITE_OK.
11433 **   Otherwise, the error code is propagated upwards.
11434 **
11435 **   If the query runs to completion without incident, SQLITE_OK is returned.
11436 **   Or, if some error occurs before the query completes or is aborted by
11437 **   the callback, an SQLite error code is returned.
11438 **
11439 **
11440 ** xSetAuxdata(pFts5, pAux, xDelete)
11441 **
<span class="line-modified">11442 **   Save the pointer passed as the second argument as the extension functions</span>
11443 **   &quot;auxiliary data&quot;. The pointer may then be retrieved by the current or any
11444 **   future invocation of the same fts5 extension function made as part of
11445 **   the same MATCH query using the xGetAuxdata() API.
11446 **
11447 **   Each extension function is allocated a single auxiliary data slot for
11448 **   each FTS query (MATCH expression). If the extension function is invoked
11449 **   more than once for a single FTS query, then all invocations share a
11450 **   single auxiliary data context.
11451 **
11452 **   If there is already an auxiliary data pointer when this function is
11453 **   invoked, then it is replaced by the new pointer. If an xDelete callback
11454 **   was specified along with the original pointer, it is invoked at this
11455 **   point.
11456 **
11457 **   The xDelete callback, if one is specified, is also invoked on the
11458 **   auxiliary data pointer after the FTS5 query has finished.
11459 **
11460 **   If an error (e.g. an OOM condition) occurs within this function,
11461 **   the auxiliary data is set to NULL and an error code returned. If the
11462 **   xDelete parameter was not NULL, it is invoked on the auxiliary data
</pre>
<hr />
<pre>
11664 **   If an xToken() callback returns any value other than SQLITE_OK, then
11665 **   the tokenization should be abandoned and the xTokenize() method should
11666 **   immediately return a copy of the xToken() return value. Or, if the
11667 **   input buffer is exhausted, xTokenize() should return SQLITE_OK. Finally,
11668 **   if an error occurs with the xTokenize() implementation itself, it
11669 **   may abandon the tokenization and return any error code other than
11670 **   SQLITE_OK or SQLITE_DONE.
11671 **
11672 ** SYNONYM SUPPORT
11673 **
11674 **   Custom tokenizers may also support synonyms. Consider a case in which a
11675 **   user wishes to query for a phrase such as &quot;first place&quot;. Using the
11676 **   built-in tokenizers, the FTS5 query &#39;first + place&#39; will match instances
11677 **   of &quot;first place&quot; within the document set, but not alternative forms
11678 **   such as &quot;1st place&quot;. In some applications, it would be better to match
11679 **   all instances of &quot;first place&quot; or &quot;1st place&quot; regardless of which form
11680 **   the user specified in the MATCH query text.
11681 **
11682 **   There are several ways to approach this in FTS5:
11683 **
<span class="line-modified">11684 **   &lt;ol&gt;&lt;li&gt; By mapping all synonyms to a single token. In this case, the</span>
<span class="line-modified">11685 **            In the above example, this means that the tokenizer returns the</span>
11686 **            same token for inputs &quot;first&quot; and &quot;1st&quot;. Say that token is in
11687 **            fact &quot;first&quot;, so that when the user inserts the document &quot;I won
11688 **            1st place&quot; entries are added to the index for tokens &quot;i&quot;, &quot;won&quot;,
11689 **            &quot;first&quot; and &quot;place&quot;. If the user then queries for &#39;1st + place&#39;,
11690 **            the tokenizer substitutes &quot;first&quot; for &quot;1st&quot; and the query works
11691 **            as expected.
11692 **
11693 **       &lt;li&gt; By querying the index for all synonyms of each query term
11694 **            separately. In this case, when tokenizing query text, the
11695 **            tokenizer may provide multiple synonyms for a single term
11696 **            within the document. FTS5 then queries the index for each
11697 **            synonym individually. For example, faced with the query:
11698 **
11699 **   &lt;codeblock&gt;
11700 **     ... MATCH &#39;first place&#39;&lt;/codeblock&gt;
11701 **
11702 **            the tokenizer offers both &quot;1st&quot; and &quot;first&quot; as synonyms for the
11703 **            first token in the MATCH query and FTS5 effectively runs a query
11704 **            similar to:
11705 **
</pre>
</td>
<td>
<hr />
<pre>
  106 ** The SQLITE_VERSION_NUMBER for any given release of SQLite will also
  107 ** be larger than the release from which it is derived.  Either Y will
  108 ** be held constant and Z will be incremented or else Y will be incremented
  109 ** and Z will be reset to zero.
  110 **
  111 ** Since [version 3.6.18] ([dateof:3.6.18]),
  112 ** SQLite source code has been stored in the
  113 ** &lt;a href=&quot;http://www.fossil-scm.org/&quot;&gt;Fossil configuration management
  114 ** system&lt;/a&gt;.  ^The SQLITE_SOURCE_ID macro evaluates to
  115 ** a string which identifies a particular check-in of SQLite
  116 ** within its configuration management system.  ^The SQLITE_SOURCE_ID
  117 ** string contains the date and time of the check-in (UTC) and a SHA1
  118 ** or SHA3-256 hash of the entire source tree.  If the source code has
  119 ** been edited in any way since it was last checked in, then the last
  120 ** four hexadecimal digits of the hash may be modified.
  121 **
  122 ** See also: [sqlite3_libversion()],
  123 ** [sqlite3_libversion_number()], [sqlite3_sourceid()],
  124 ** [sqlite_version()] and [sqlite_source_id()].
  125 */
<span class="line-modified">  126 #define SQLITE_VERSION        &quot;3.31.1&quot;</span>
<span class="line-modified">  127 #define SQLITE_VERSION_NUMBER 3031001</span>
<span class="line-modified">  128 #define SQLITE_SOURCE_ID      &quot;2020-01-27 19:55:54 3bfa9cc97da10598521b342961df8f5f68c7388fa117345eeb516eaa837bb4d6&quot;</span>
  129 
  130 /*
  131 ** CAPI3REF: Run-Time Library Version Numbers
  132 ** KEYWORDS: sqlite3_version sqlite3_sourceid
  133 **
  134 ** These interfaces provide the same information as the [SQLITE_VERSION],
  135 ** [SQLITE_VERSION_NUMBER], and [SQLITE_SOURCE_ID] C preprocessor macros
  136 ** but are associated with the library instead of the header file.  ^(Cautious
  137 ** programmers might include assert() statements in their application to
  138 ** verify that values returned by these interfaces match the macros in
  139 ** the header, and thus ensure that the application is
  140 ** compiled with matching library and header files.
  141 **
  142 ** &lt;blockquote&gt;&lt;pre&gt;
  143 ** assert( sqlite3_libversion_number()==SQLITE_VERSION_NUMBER );
  144 ** assert( strncmp(sqlite3_sourceid(),SQLITE_SOURCE_ID,80)==0 );
  145 ** assert( strcmp(sqlite3_libversion(),SQLITE_VERSION)==0 );
  146 ** &lt;/pre&gt;&lt;/blockquote&gt;)^
  147 **
  148 ** ^The sqlite3_version[] string constant contains the text of [SQLITE_VERSION]
</pre>
<hr />
<pre>
  499 #define SQLITE_IOERR_SHMMAP            (SQLITE_IOERR | (21&lt;&lt;8))
  500 #define SQLITE_IOERR_SEEK              (SQLITE_IOERR | (22&lt;&lt;8))
  501 #define SQLITE_IOERR_DELETE_NOENT      (SQLITE_IOERR | (23&lt;&lt;8))
  502 #define SQLITE_IOERR_MMAP              (SQLITE_IOERR | (24&lt;&lt;8))
  503 #define SQLITE_IOERR_GETTEMPPATH       (SQLITE_IOERR | (25&lt;&lt;8))
  504 #define SQLITE_IOERR_CONVPATH          (SQLITE_IOERR | (26&lt;&lt;8))
  505 #define SQLITE_IOERR_VNODE             (SQLITE_IOERR | (27&lt;&lt;8))
  506 #define SQLITE_IOERR_AUTH              (SQLITE_IOERR | (28&lt;&lt;8))
  507 #define SQLITE_IOERR_BEGIN_ATOMIC      (SQLITE_IOERR | (29&lt;&lt;8))
  508 #define SQLITE_IOERR_COMMIT_ATOMIC     (SQLITE_IOERR | (30&lt;&lt;8))
  509 #define SQLITE_IOERR_ROLLBACK_ATOMIC   (SQLITE_IOERR | (31&lt;&lt;8))
  510 #define SQLITE_LOCKED_SHAREDCACHE      (SQLITE_LOCKED |  (1&lt;&lt;8))
  511 #define SQLITE_LOCKED_VTAB             (SQLITE_LOCKED |  (2&lt;&lt;8))
  512 #define SQLITE_BUSY_RECOVERY           (SQLITE_BUSY   |  (1&lt;&lt;8))
  513 #define SQLITE_BUSY_SNAPSHOT           (SQLITE_BUSY   |  (2&lt;&lt;8))
  514 #define SQLITE_CANTOPEN_NOTEMPDIR      (SQLITE_CANTOPEN | (1&lt;&lt;8))
  515 #define SQLITE_CANTOPEN_ISDIR          (SQLITE_CANTOPEN | (2&lt;&lt;8))
  516 #define SQLITE_CANTOPEN_FULLPATH       (SQLITE_CANTOPEN | (3&lt;&lt;8))
  517 #define SQLITE_CANTOPEN_CONVPATH       (SQLITE_CANTOPEN | (4&lt;&lt;8))
  518 #define SQLITE_CANTOPEN_DIRTYWAL       (SQLITE_CANTOPEN | (5&lt;&lt;8)) /* Not Used */
<span class="line-added">  519 #define SQLITE_CANTOPEN_SYMLINK        (SQLITE_CANTOPEN | (6&lt;&lt;8))</span>
  520 #define SQLITE_CORRUPT_VTAB            (SQLITE_CORRUPT | (1&lt;&lt;8))
  521 #define SQLITE_CORRUPT_SEQUENCE        (SQLITE_CORRUPT | (2&lt;&lt;8))
  522 #define SQLITE_READONLY_RECOVERY       (SQLITE_READONLY | (1&lt;&lt;8))
  523 #define SQLITE_READONLY_CANTLOCK       (SQLITE_READONLY | (2&lt;&lt;8))
  524 #define SQLITE_READONLY_ROLLBACK       (SQLITE_READONLY | (3&lt;&lt;8))
  525 #define SQLITE_READONLY_DBMOVED        (SQLITE_READONLY | (4&lt;&lt;8))
  526 #define SQLITE_READONLY_CANTINIT       (SQLITE_READONLY | (5&lt;&lt;8))
  527 #define SQLITE_READONLY_DIRECTORY      (SQLITE_READONLY | (6&lt;&lt;8))
  528 #define SQLITE_ABORT_ROLLBACK          (SQLITE_ABORT | (2&lt;&lt;8))
  529 #define SQLITE_CONSTRAINT_CHECK        (SQLITE_CONSTRAINT | (1&lt;&lt;8))
  530 #define SQLITE_CONSTRAINT_COMMITHOOK   (SQLITE_CONSTRAINT | (2&lt;&lt;8))
  531 #define SQLITE_CONSTRAINT_FOREIGNKEY   (SQLITE_CONSTRAINT | (3&lt;&lt;8))
  532 #define SQLITE_CONSTRAINT_FUNCTION     (SQLITE_CONSTRAINT | (4&lt;&lt;8))
  533 #define SQLITE_CONSTRAINT_NOTNULL      (SQLITE_CONSTRAINT | (5&lt;&lt;8))
  534 #define SQLITE_CONSTRAINT_PRIMARYKEY   (SQLITE_CONSTRAINT | (6&lt;&lt;8))
  535 #define SQLITE_CONSTRAINT_TRIGGER      (SQLITE_CONSTRAINT | (7&lt;&lt;8))
  536 #define SQLITE_CONSTRAINT_UNIQUE       (SQLITE_CONSTRAINT | (8&lt;&lt;8))
  537 #define SQLITE_CONSTRAINT_VTAB         (SQLITE_CONSTRAINT | (9&lt;&lt;8))
  538 #define SQLITE_CONSTRAINT_ROWID        (SQLITE_CONSTRAINT |(10&lt;&lt;8))
<span class="line-added">  539 #define SQLITE_CONSTRAINT_PINNED       (SQLITE_CONSTRAINT |(11&lt;&lt;8))</span>
  540 #define SQLITE_NOTICE_RECOVER_WAL      (SQLITE_NOTICE | (1&lt;&lt;8))
  541 #define SQLITE_NOTICE_RECOVER_ROLLBACK (SQLITE_NOTICE | (2&lt;&lt;8))
  542 #define SQLITE_WARNING_AUTOINDEX       (SQLITE_WARNING | (1&lt;&lt;8))
  543 #define SQLITE_AUTH_USER               (SQLITE_AUTH | (1&lt;&lt;8))
  544 #define SQLITE_OK_LOAD_PERMANENTLY     (SQLITE_OK | (1&lt;&lt;8))
<span class="line-added">  545 #define SQLITE_OK_SYMLINK              (SQLITE_OK | (2&lt;&lt;8))</span>
  546 
  547 /*
  548 ** CAPI3REF: Flags For File Open Operations
  549 **
  550 ** These bit values are intended for use in the
  551 ** 3rd parameter to the [sqlite3_open_v2()] interface and
  552 ** in the 4th parameter to the [sqlite3_vfs.xOpen] method.
  553 */
  554 #define SQLITE_OPEN_READONLY         0x00000001  /* Ok for sqlite3_open_v2() */
  555 #define SQLITE_OPEN_READWRITE        0x00000002  /* Ok for sqlite3_open_v2() */
  556 #define SQLITE_OPEN_CREATE           0x00000004  /* Ok for sqlite3_open_v2() */
  557 #define SQLITE_OPEN_DELETEONCLOSE    0x00000008  /* VFS only */
  558 #define SQLITE_OPEN_EXCLUSIVE        0x00000010  /* VFS only */
  559 #define SQLITE_OPEN_AUTOPROXY        0x00000020  /* VFS only */
  560 #define SQLITE_OPEN_URI              0x00000040  /* Ok for sqlite3_open_v2() */
  561 #define SQLITE_OPEN_MEMORY           0x00000080  /* Ok for sqlite3_open_v2() */
  562 #define SQLITE_OPEN_MAIN_DB          0x00000100  /* VFS only */
  563 #define SQLITE_OPEN_TEMP_DB          0x00000200  /* VFS only */
  564 #define SQLITE_OPEN_TRANSIENT_DB     0x00000400  /* VFS only */
  565 #define SQLITE_OPEN_MAIN_JOURNAL     0x00000800  /* VFS only */
  566 #define SQLITE_OPEN_TEMP_JOURNAL     0x00001000  /* VFS only */
  567 #define SQLITE_OPEN_SUBJOURNAL       0x00002000  /* VFS only */
  568 #define SQLITE_OPEN_MASTER_JOURNAL   0x00004000  /* VFS only */
  569 #define SQLITE_OPEN_NOMUTEX          0x00008000  /* Ok for sqlite3_open_v2() */
  570 #define SQLITE_OPEN_FULLMUTEX        0x00010000  /* Ok for sqlite3_open_v2() */
  571 #define SQLITE_OPEN_SHAREDCACHE      0x00020000  /* Ok for sqlite3_open_v2() */
  572 #define SQLITE_OPEN_PRIVATECACHE     0x00040000  /* Ok for sqlite3_open_v2() */
  573 #define SQLITE_OPEN_WAL              0x00080000  /* VFS only */
<span class="line-added">  574 #define SQLITE_OPEN_NOFOLLOW         0x01000000  /* Ok for sqlite3_open_v2() */</span>
  575 
  576 /* Reserved:                         0x00F00000 */
  577 
  578 /*
  579 ** CAPI3REF: Device Characteristics
  580 **
  581 ** The xDeviceCharacteristics method of the [sqlite3_io_methods]
  582 ** object returns an integer which is a vector of these
  583 ** bit values expressing I/O characteristics of the mass storage
  584 ** device that holds the file that the [sqlite3_io_methods]
  585 ** refers to.
  586 **
  587 ** The SQLITE_IOCAP_ATOMIC property means that all writes of
  588 ** any size are atomic.  The SQLITE_IOCAP_ATOMICnnn values
  589 ** mean that writes of blocks that are nnn bytes in size and
  590 ** are aligned to an address which is an integer multiple of
  591 ** nnn are atomic.  The SQLITE_IOCAP_SAFE_APPEND value means
  592 ** that when data is appended to a file, the data is appended
  593 ** first then the size of the file is extended, never the other
  594 ** way around.  The SQLITE_IOCAP_SEQUENTIAL property means that
</pre>
<hr />
<pre>
  966 ** of the char** argument point to a string obtained from [sqlite3_mprintf()]
  967 ** or the equivalent and that string will become the result of the pragma or
  968 ** the error message if the pragma fails. ^If the
  969 ** [SQLITE_FCNTL_PRAGMA] file control returns [SQLITE_NOTFOUND], then normal
  970 ** [PRAGMA] processing continues.  ^If the [SQLITE_FCNTL_PRAGMA]
  971 ** file control returns [SQLITE_OK], then the parser assumes that the
  972 ** VFS has handled the PRAGMA itself and the parser generates a no-op
  973 ** prepared statement if result string is NULL, or that returns a copy
  974 ** of the result string if the string is non-NULL.
  975 ** ^If the [SQLITE_FCNTL_PRAGMA] file control returns
  976 ** any result code other than [SQLITE_OK] or [SQLITE_NOTFOUND], that means
  977 ** that the VFS encountered an error while handling the [PRAGMA] and the
  978 ** compilation of the PRAGMA fails with an error.  ^The [SQLITE_FCNTL_PRAGMA]
  979 ** file control occurs at the beginning of pragma statement analysis and so
  980 ** it is able to override built-in [PRAGMA] statements.
  981 **
  982 ** &lt;li&gt;[[SQLITE_FCNTL_BUSYHANDLER]]
  983 ** ^The [SQLITE_FCNTL_BUSYHANDLER]
  984 ** file-control may be invoked by SQLite on the database file handle
  985 ** shortly after it is opened in order to provide a custom VFS with access
<span class="line-modified">  986 ** to the connection&#39;s busy-handler callback. The argument is of type (void**)</span>
  987 ** - an array of two (void *) values. The first (void *) actually points
<span class="line-modified">  988 ** to a function of type (int (*)(void *)). In order to invoke the connection&#39;s</span>
  989 ** busy-handler, this function should be invoked with the second (void *) in
  990 ** the array as the only argument. If it returns non-zero, then the operation
  991 ** should be retried. If it returns zero, the custom VFS should abandon the
  992 ** current operation.
  993 **
  994 ** &lt;li&gt;[[SQLITE_FCNTL_TEMPFILENAME]]
<span class="line-modified">  995 ** ^Applications can invoke the [SQLITE_FCNTL_TEMPFILENAME] file-control</span>
  996 ** to have SQLite generate a
  997 ** temporary filename using the same algorithm that is followed to generate
  998 ** temporary filenames for TEMP tables and other internal uses.  The
  999 ** argument should be a char** which will be filled with the filename
 1000 ** written into memory obtained from [sqlite3_malloc()].  The caller should
 1001 ** invoke [sqlite3_free()] on the result to avoid a memory leak.
 1002 **
 1003 ** &lt;li&gt;[[SQLITE_FCNTL_MMAP_SIZE]]
 1004 ** The [SQLITE_FCNTL_MMAP_SIZE] file control is used to query or set the
 1005 ** maximum number of bytes that will be used for memory-mapped I/O.
 1006 ** The argument is a pointer to a value of type sqlite3_int64 that
 1007 ** is an advisory maximum number of bytes in the file to memory map.  The
 1008 ** pointer is overwritten with the old value.  The limit is not changed if
 1009 ** the value originally pointed to is negative, and so the current limit
 1010 ** can be queried by passing in a pointer to a negative number.  This
 1011 ** file-control is used internally to implement [PRAGMA mmap_size].
 1012 **
 1013 ** &lt;li&gt;[[SQLITE_FCNTL_TRACE]]
 1014 ** The [SQLITE_FCNTL_TRACE] file control provides advisory information
 1015 ** to the VFS about what the higher layers of the SQLite stack are doing.
</pre>
<hr />
<pre>
 1088 **
 1089 ** &lt;li&gt;[[SQLITE_FCNTL_LOCK_TIMEOUT]]
 1090 ** The [SQLITE_FCNTL_LOCK_TIMEOUT] opcode causes attempts to obtain
 1091 ** a file lock using the xLock or xShmLock methods of the VFS to wait
 1092 ** for up to M milliseconds before failing, where M is the single
 1093 ** unsigned integer parameter.
 1094 **
 1095 ** &lt;li&gt;[[SQLITE_FCNTL_DATA_VERSION]]
 1096 ** The [SQLITE_FCNTL_DATA_VERSION] opcode is used to detect changes to
 1097 ** a database file.  The argument is a pointer to a 32-bit unsigned integer.
 1098 ** The &quot;data version&quot; for the pager is written into the pointer.  The
 1099 ** &quot;data version&quot; changes whenever any change occurs to the corresponding
 1100 ** database file, either through SQL statements on the same database
 1101 ** connection or through transactions committed by separate database
 1102 ** connections possibly in other processes. The [sqlite3_total_changes()]
 1103 ** interface can be used to find if any database on the connection has changed,
 1104 ** but that interface responds to changes on TEMP as well as MAIN and does
 1105 ** not provide a mechanism to detect changes to MAIN only.  Also, the
 1106 ** [sqlite3_total_changes()] interface responds to internal changes only and
 1107 ** omits changes made by other database connections.  The
<span class="line-modified"> 1108 ** [PRAGMA data_version] command provides a mechanism to detect changes to</span>
 1109 ** a single attached database that occur due to other database connections,
 1110 ** but omits changes implemented by the database connection on which it is
 1111 ** called.  This file control is the only mechanism to detect changes that
 1112 ** happen either internally or externally and that are associated with
 1113 ** a particular attached database.
<span class="line-added"> 1114 **</span>
<span class="line-added"> 1115 ** &lt;li&gt;[[SQLITE_FCNTL_CKPT_DONE]]</span>
<span class="line-added"> 1116 ** The [SQLITE_FCNTL_CKPT_DONE] opcode is invoked from within a checkpoint</span>
<span class="line-added"> 1117 ** in wal mode after the client has finished copying pages from the wal</span>
<span class="line-added"> 1118 ** file to the database file, but before the *-shm file is updated to</span>
<span class="line-added"> 1119 ** record the fact that the pages have been checkpointed.</span>
 1120 ** &lt;/ul&gt;
 1121 */
 1122 #define SQLITE_FCNTL_LOCKSTATE               1
 1123 #define SQLITE_FCNTL_GET_LOCKPROXYFILE       2
 1124 #define SQLITE_FCNTL_SET_LOCKPROXYFILE       3
 1125 #define SQLITE_FCNTL_LAST_ERRNO              4
 1126 #define SQLITE_FCNTL_SIZE_HINT               5
 1127 #define SQLITE_FCNTL_CHUNK_SIZE              6
 1128 #define SQLITE_FCNTL_FILE_POINTER            7
 1129 #define SQLITE_FCNTL_SYNC_OMITTED            8
 1130 #define SQLITE_FCNTL_WIN32_AV_RETRY          9
 1131 #define SQLITE_FCNTL_PERSIST_WAL            10
 1132 #define SQLITE_FCNTL_OVERWRITE              11
 1133 #define SQLITE_FCNTL_VFSNAME                12
 1134 #define SQLITE_FCNTL_POWERSAFE_OVERWRITE    13
 1135 #define SQLITE_FCNTL_PRAGMA                 14
 1136 #define SQLITE_FCNTL_BUSYHANDLER            15
 1137 #define SQLITE_FCNTL_TEMPFILENAME           16
 1138 #define SQLITE_FCNTL_MMAP_SIZE              18
 1139 #define SQLITE_FCNTL_TRACE                  19
 1140 #define SQLITE_FCNTL_HAS_MOVED              20
 1141 #define SQLITE_FCNTL_SYNC                   21
 1142 #define SQLITE_FCNTL_COMMIT_PHASETWO        22
 1143 #define SQLITE_FCNTL_WIN32_SET_HANDLE       23
 1144 #define SQLITE_FCNTL_WAL_BLOCK              24
 1145 #define SQLITE_FCNTL_ZIPVFS                 25
 1146 #define SQLITE_FCNTL_RBU                    26
 1147 #define SQLITE_FCNTL_VFS_POINTER            27
 1148 #define SQLITE_FCNTL_JOURNAL_POINTER        28
 1149 #define SQLITE_FCNTL_WIN32_GET_HANDLE       29
 1150 #define SQLITE_FCNTL_PDB                    30
 1151 #define SQLITE_FCNTL_BEGIN_ATOMIC_WRITE     31
 1152 #define SQLITE_FCNTL_COMMIT_ATOMIC_WRITE    32
 1153 #define SQLITE_FCNTL_ROLLBACK_ATOMIC_WRITE  33
 1154 #define SQLITE_FCNTL_LOCK_TIMEOUT           34
 1155 #define SQLITE_FCNTL_DATA_VERSION           35
 1156 #define SQLITE_FCNTL_SIZE_LIMIT             36
<span class="line-added"> 1157 #define SQLITE_FCNTL_CKPT_DONE              37</span>
 1158 
 1159 /* deprecated names */
 1160 #define SQLITE_GET_LOCKPROXYFILE      SQLITE_FCNTL_GET_LOCKPROXYFILE
 1161 #define SQLITE_SET_LOCKPROXYFILE      SQLITE_FCNTL_SET_LOCKPROXYFILE
 1162 #define SQLITE_LAST_ERRNO             SQLITE_FCNTL_LAST_ERRNO
 1163 
 1164 
 1165 /*
 1166 ** CAPI3REF: Mutex Handle
 1167 **
 1168 ** The mutex module within SQLite defines [sqlite3_mutex] to be an
 1169 ** abstract type for a mutex object.  The SQLite core never looks
 1170 ** at the internal representation of an [sqlite3_mutex].  It only
 1171 ** deals with pointers to the [sqlite3_mutex] object.
 1172 **
 1173 ** Mutexes are created using [sqlite3_mutex_alloc()].
 1174 */
 1175 typedef struct sqlite3_mutex sqlite3_mutex;
 1176 
 1177 /*
</pre>
<hr />
<pre>
 1183 ** on some platforms.
 1184 */
 1185 typedef struct sqlite3_api_routines sqlite3_api_routines;
 1186 
 1187 /*
 1188 ** CAPI3REF: OS Interface Object
 1189 **
 1190 ** An instance of the sqlite3_vfs object defines the interface between
 1191 ** the SQLite core and the underlying operating system.  The &quot;vfs&quot;
 1192 ** in the name of the object stands for &quot;virtual file system&quot;.  See
 1193 ** the [VFS | VFS documentation] for further information.
 1194 **
 1195 ** The VFS interface is sometimes extended by adding new methods onto
 1196 ** the end.  Each time such an extension occurs, the iVersion field
 1197 ** is incremented.  The iVersion value started out as 1 in
 1198 ** SQLite [version 3.5.0] on [dateof:3.5.0], then increased to 2
 1199 ** with SQLite [version 3.7.0] on [dateof:3.7.0], and then increased
 1200 ** to 3 with SQLite [version 3.7.6] on [dateof:3.7.6].  Additional fields
 1201 ** may be appended to the sqlite3_vfs object and the iVersion value
 1202 ** may increase again in future versions of SQLite.
<span class="line-modified"> 1203 ** Note that due to an oversight, the structure</span>
<span class="line-modified"> 1204 ** of the sqlite3_vfs object changed in the transition from</span>
 1205 ** SQLite [version 3.5.9] to [version 3.6.0] on [dateof:3.6.0]
<span class="line-modified"> 1206 ** and yet the iVersion field was not increased.</span>
 1207 **
 1208 ** The szOsFile field is the size of the subclassed [sqlite3_file]
 1209 ** structure used by this VFS.  mxPathname is the maximum length of
 1210 ** a pathname in this VFS.
 1211 **
 1212 ** Registered sqlite3_vfs objects are kept on a linked list formed by
 1213 ** the pNext pointer.  The [sqlite3_vfs_register()]
 1214 ** and [sqlite3_vfs_unregister()] interfaces manage this list
 1215 ** in a thread-safe way.  The [sqlite3_vfs_find()] interface
 1216 ** searches the list.  Neither the application code nor the VFS
 1217 ** implementation should use the pNext pointer.
 1218 **
 1219 ** The pNext field is the only field in the sqlite3_vfs
 1220 ** structure that SQLite will ever modify.  SQLite will only access
 1221 ** or modify this field while holding a particular static mutex.
 1222 ** The application should never modify anything within the sqlite3_vfs
 1223 ** object once the object has been registered.
 1224 **
 1225 ** The zName field holds the name of the VFS module.  The name must
 1226 ** be unique across all VFS modules.
</pre>
<hr />
<pre>
 1277 ** &lt;ul&gt;
 1278 ** &lt;li&gt; [SQLITE_OPEN_DELETEONCLOSE]
 1279 ** &lt;li&gt; [SQLITE_OPEN_EXCLUSIVE]
 1280 ** &lt;/ul&gt;
 1281 **
 1282 ** The [SQLITE_OPEN_DELETEONCLOSE] flag means the file should be
 1283 ** deleted when it is closed.  ^The [SQLITE_OPEN_DELETEONCLOSE]
 1284 ** will be set for TEMP databases and their journals, transient
 1285 ** databases, and subjournals.
 1286 **
 1287 ** ^The [SQLITE_OPEN_EXCLUSIVE] flag is always used in conjunction
 1288 ** with the [SQLITE_OPEN_CREATE] flag, which are both directly
 1289 ** analogous to the O_EXCL and O_CREAT flags of the POSIX open()
 1290 ** API.  The SQLITE_OPEN_EXCLUSIVE flag, when paired with the
 1291 ** SQLITE_OPEN_CREATE, is used to indicate that file should always
 1292 ** be created, and that it is an error if it already exists.
 1293 ** It is &lt;i&gt;not&lt;/i&gt; used to indicate the file should be opened
 1294 ** for exclusive access.
 1295 **
 1296 ** ^At least szOsFile bytes of memory are allocated by SQLite
<span class="line-modified"> 1297 ** to hold the [sqlite3_file] structure passed as the third</span>
 1298 ** argument to xOpen.  The xOpen method does not have to
 1299 ** allocate the structure; it should just fill it in.  Note that
 1300 ** the xOpen method must set the sqlite3_file.pMethods to either
 1301 ** a valid [sqlite3_io_methods] object or to NULL.  xOpen must do
 1302 ** this even if the open fails.  SQLite expects that the sqlite3_file.pMethods
 1303 ** element will be valid after xOpen returns regardless of the success
 1304 ** or failure of the xOpen call.
 1305 **
 1306 ** [[sqlite3_vfs.xAccess]]
 1307 ** ^The flags argument to xAccess() may be [SQLITE_ACCESS_EXISTS]
 1308 ** to test for the existence of a file, or [SQLITE_ACCESS_READWRITE] to
 1309 ** test whether a file is readable and writable, or [SQLITE_ACCESS_READ]
 1310 ** to test whether a file is at least readable.  The SQLITE_ACCESS_READ
 1311 ** flag is never actually used and is not implemented in the built-in
 1312 ** VFSes of SQLite.  The file is named by the second argument and can be a
 1313 ** directory. The xAccess method returns [SQLITE_OK] on success or some
 1314 ** non-zero error code if there is an I/O error or if the name of
 1315 ** the file given in the second argument is illegal.  If SQLITE_OK
 1316 ** is returned, then non-zero or zero is written into *pResOut to indicate
 1317 ** whether or not the file is accessible.
</pre>
<hr />
<pre>
 1614 ** conditions.
 1615 **
 1616 ** The xMalloc, xRealloc, and xFree methods must work like the
 1617 ** malloc(), realloc() and free() functions from the standard C library.
 1618 ** ^SQLite guarantees that the second argument to
 1619 ** xRealloc is always a value returned by a prior call to xRoundup.
 1620 **
 1621 ** xSize should return the allocated size of a memory allocation
 1622 ** previously obtained from xMalloc or xRealloc.  The allocated size
 1623 ** is always at least as big as the requested size but may be larger.
 1624 **
 1625 ** The xRoundup method returns what would be the allocated size of
 1626 ** a memory allocation given a particular requested size.  Most memory
 1627 ** allocators round up memory allocations at least to the next multiple
 1628 ** of 8.  Some allocators round up to a larger multiple or to a power of 2.
 1629 ** Every memory allocation request coming in through [sqlite3_malloc()]
 1630 ** or [sqlite3_realloc()] first calls xRoundup.  If xRoundup returns 0,
 1631 ** that causes the corresponding memory allocation to fail.
 1632 **
 1633 ** The xInit method initializes the memory allocator.  For example,
<span class="line-modified"> 1634 ** it might allocate any required mutexes or initialize internal data</span>
 1635 ** structures.  The xShutdown method is invoked (indirectly) by
 1636 ** [sqlite3_shutdown()] and should deallocate any resources acquired
 1637 ** by xInit.  The pAppData pointer is used as the only parameter to
 1638 ** xInit and xShutdown.
 1639 **
 1640 ** SQLite holds the [SQLITE_MUTEX_STATIC_MASTER] mutex when it invokes
 1641 ** the xInit method, so the xInit method need not be threadsafe.  The
 1642 ** xShutdown method is only called from [sqlite3_shutdown()] so it does
 1643 ** not need to be threadsafe either.  For all other methods, SQLite
 1644 ** holds the [SQLITE_MUTEX_STATIC_MEM] mutex as long as the
 1645 ** [SQLITE_CONFIG_MEMSTATUS] configuration option is turned on (which
 1646 ** it is by default) and so the methods are automatically serialized.
 1647 ** However, if [SQLITE_CONFIG_MEMSTATUS] is disabled, then the other
 1648 ** methods must be threadsafe or else make their own arrangements for
 1649 ** serialization.
 1650 **
 1651 ** SQLite will never invoke xInit() more than once without an intervening
 1652 ** call to xShutdown().
 1653 */
 1654 typedef struct sqlite3_mem_methods sqlite3_mem_methods;
</pre>
<hr />
<pre>
 1736 ** This option can be used to overload the default memory allocation
 1737 ** routines with a wrapper that simulations memory allocation failure or
 1738 ** tracks memory usage, for example. &lt;/dd&gt;
 1739 **
 1740 ** [[SQLITE_CONFIG_SMALL_MALLOC]] &lt;dt&gt;SQLITE_CONFIG_SMALL_MALLOC&lt;/dt&gt;
 1741 ** &lt;dd&gt; ^The SQLITE_CONFIG_SMALL_MALLOC option takes single argument of
 1742 ** type int, interpreted as a boolean, which if true provides a hint to
 1743 ** SQLite that it should avoid large memory allocations if possible.
 1744 ** SQLite will run faster if it is free to make large memory allocations,
 1745 ** but some application might prefer to run slower in exchange for
 1746 ** guarantees about memory fragmentation that are possible if large
 1747 ** allocations are avoided.  This hint is normally off.
 1748 ** &lt;/dd&gt;
 1749 **
 1750 ** [[SQLITE_CONFIG_MEMSTATUS]] &lt;dt&gt;SQLITE_CONFIG_MEMSTATUS&lt;/dt&gt;
 1751 ** &lt;dd&gt; ^The SQLITE_CONFIG_MEMSTATUS option takes single argument of type int,
 1752 ** interpreted as a boolean, which enables or disables the collection of
 1753 ** memory allocation statistics. ^(When memory allocation statistics are
 1754 ** disabled, the following SQLite interfaces become non-operational:
 1755 **   &lt;ul&gt;
<span class="line-added"> 1756 **   &lt;li&gt; [sqlite3_hard_heap_limit64()]</span>
 1757 **   &lt;li&gt; [sqlite3_memory_used()]
 1758 **   &lt;li&gt; [sqlite3_memory_highwater()]
 1759 **   &lt;li&gt; [sqlite3_soft_heap_limit64()]
 1760 **   &lt;li&gt; [sqlite3_status64()]
 1761 **   &lt;/ul&gt;)^
 1762 ** ^Memory allocation statistics are enabled by default unless SQLite is
 1763 ** compiled with [SQLITE_DEFAULT_MEMSTATUS]=0 in which case memory
 1764 ** allocation statistics are disabled by default.
 1765 ** &lt;/dd&gt;
 1766 **
 1767 ** [[SQLITE_CONFIG_SCRATCH]] &lt;dt&gt;SQLITE_CONFIG_SCRATCH&lt;/dt&gt;
 1768 ** &lt;dd&gt; The SQLITE_CONFIG_SCRATCH option is no longer used.
 1769 ** &lt;/dd&gt;
 1770 **
 1771 ** [[SQLITE_CONFIG_PAGECACHE]] &lt;dt&gt;SQLITE_CONFIG_PAGECACHE&lt;/dt&gt;
 1772 ** &lt;dd&gt; ^The SQLITE_CONFIG_PAGECACHE option specifies a memory pool
 1773 ** that SQLite can use for the database page cache with the default page
 1774 ** cache implementation.
<span class="line-modified"> 1775 ** This configuration option is a no-op if an application-defined page</span>
 1776 ** cache implementation is loaded using the [SQLITE_CONFIG_PCACHE2].
 1777 ** ^There are three arguments to SQLITE_CONFIG_PAGECACHE: A pointer to
 1778 ** 8-byte aligned memory (pMem), the size of each page cache line (sz),
 1779 ** and the number of cache lines (N).
 1780 ** The sz argument should be the size of the largest database page
 1781 ** (a power of two between 512 and 65536) plus some extra bytes for each
 1782 ** page header.  ^The number of extra bytes needed by the page header
 1783 ** can be determined using [SQLITE_CONFIG_PCACHE_HDRSZ].
 1784 ** ^It is harmless, apart from the wasted memory,
 1785 ** for the sz parameter to be larger than necessary.  The pMem
 1786 ** argument must be either a NULL pointer or a pointer to an 8-byte
 1787 ** aligned block of memory of at least sz*N bytes, otherwise
 1788 ** subsequent behavior is undefined.
 1789 ** ^When pMem is not NULL, SQLite will strive to use the memory provided
 1790 ** to satisfy page cache needs, falling back to [sqlite3_malloc()] if
 1791 ** a page cache line is larger than sz bytes or if all of the pMem buffer
 1792 ** is exhausted.
 1793 ** ^If pMem is NULL and N is non-zero, then each database connection
 1794 ** does an initial bulk allocation for page cache memory
 1795 ** from [sqlite3_malloc()] sufficient for N cache lines if N is positive or
</pre>
<hr />
<pre>
 2240 ** The first argument to this setting is an integer which is 0 to disable
 2241 ** the writable_schema, positive to enable writable_schema, or negative to
 2242 ** leave the setting unchanged. The second parameter is a pointer to an
 2243 ** integer into which is written 0 or 1 to indicate whether the writable_schema
 2244 ** is enabled or disabled following this call.
 2245 ** &lt;/dd&gt;
 2246 **
 2247 ** [[SQLITE_DBCONFIG_LEGACY_ALTER_TABLE]]
 2248 ** &lt;dt&gt;SQLITE_DBCONFIG_LEGACY_ALTER_TABLE&lt;/dt&gt;
 2249 ** &lt;dd&gt;The SQLITE_DBCONFIG_LEGACY_ALTER_TABLE option activates or deactivates
 2250 ** the legacy behavior of the [ALTER TABLE RENAME] command such it
 2251 ** behaves as it did prior to [version 3.24.0] (2018-06-04).  See the
 2252 ** &quot;Compatibility Notice&quot; on the [ALTER TABLE RENAME documentation] for
 2253 ** additional information. This feature can also be turned on and off
 2254 ** using the [PRAGMA legacy_alter_table] statement.
 2255 ** &lt;/dd&gt;
 2256 **
 2257 ** [[SQLITE_DBCONFIG_DQS_DML]]
 2258 ** &lt;dt&gt;SQLITE_DBCONFIG_DQS_DML&lt;/td&gt;
 2259 ** &lt;dd&gt;The SQLITE_DBCONFIG_DQS_DML option activates or deactivates
<span class="line-modified"> 2260 ** the legacy [double-quoted string literal] misfeature for DML statements</span>
 2261 ** only, that is DELETE, INSERT, SELECT, and UPDATE statements. The
 2262 ** default value of this setting is determined by the [-DSQLITE_DQS]
 2263 ** compile-time option.
 2264 ** &lt;/dd&gt;
 2265 **
 2266 ** [[SQLITE_DBCONFIG_DQS_DDL]]
 2267 ** &lt;dt&gt;SQLITE_DBCONFIG_DQS_DDL&lt;/td&gt;
 2268 ** &lt;dd&gt;The SQLITE_DBCONFIG_DQS option activates or deactivates
 2269 ** the legacy [double-quoted string literal] misfeature for DDL statements,
 2270 ** such as CREATE TABLE and CREATE INDEX. The
 2271 ** default value of this setting is determined by the [-DSQLITE_DQS]
 2272 ** compile-time option.
 2273 ** &lt;/dd&gt;
<span class="line-added"> 2274 **</span>
<span class="line-added"> 2275 ** [[SQLITE_DBCONFIG_TRUSTED_SCHEMA]]</span>
<span class="line-added"> 2276 ** &lt;dt&gt;SQLITE_DBCONFIG_TRUSTED_SCHEMA&lt;/td&gt;</span>
<span class="line-added"> 2277 ** &lt;dd&gt;The SQLITE_DBCONFIG_TRUSTED_SCHEMA option tells SQLite to</span>
<span class="line-added"> 2278 ** assume that database schemas (the contents of the [sqlite_master] tables)</span>
<span class="line-added"> 2279 ** are untainted by malicious content.</span>
<span class="line-added"> 2280 ** When the SQLITE_DBCONFIG_TRUSTED_SCHEMA option is disabled, SQLite</span>
<span class="line-added"> 2281 ** takes additional defensive steps to protect the application from harm</span>
<span class="line-added"> 2282 ** including:</span>
<span class="line-added"> 2283 ** &lt;ul&gt;</span>
<span class="line-added"> 2284 ** &lt;li&gt; Prohibit the use of SQL functions inside triggers, views,</span>
<span class="line-added"> 2285 ** CHECK constraints, DEFAULT clauses, expression indexes,</span>
<span class="line-added"> 2286 ** partial indexes, or generated columns</span>
<span class="line-added"> 2287 ** unless those functions are tagged with [SQLITE_INNOCUOUS].</span>
<span class="line-added"> 2288 ** &lt;li&gt; Prohibit the use of virtual tables inside of triggers or views</span>
<span class="line-added"> 2289 ** unless those virtual tables are tagged with [SQLITE_VTAB_INNOCUOUS].</span>
<span class="line-added"> 2290 ** &lt;/ul&gt;</span>
<span class="line-added"> 2291 ** This setting defaults to &quot;on&quot; for legacy compatibility, however</span>
<span class="line-added"> 2292 ** all applications are advised to turn it off if possible. This setting</span>
<span class="line-added"> 2293 ** can also be controlled using the [PRAGMA trusted_schema] statement.</span>
<span class="line-added"> 2294 ** &lt;/dd&gt;</span>
<span class="line-added"> 2295 **</span>
<span class="line-added"> 2296 ** [[SQLITE_DBCONFIG_LEGACY_FILE_FORMAT]]</span>
<span class="line-added"> 2297 ** &lt;dt&gt;SQLITE_DBCONFIG_LEGACY_FILE_FORMAT&lt;/td&gt;</span>
<span class="line-added"> 2298 ** &lt;dd&gt;The SQLITE_DBCONFIG_LEGACY_FILE_FORMAT option activates or deactivates</span>
<span class="line-added"> 2299 ** the legacy file format flag.  When activated, this flag causes all newly</span>
<span class="line-added"> 2300 ** created database file to have a schema format version number (the 4-byte</span>
<span class="line-added"> 2301 ** integer found at offset 44 into the database header) of 1.  This in turn</span>
<span class="line-added"> 2302 ** means that the resulting database file will be readable and writable by</span>
<span class="line-added"> 2303 ** any SQLite version back to 3.0.0 ([dateof:3.0.0]).  Without this setting,</span>
<span class="line-added"> 2304 ** newly created databases are generally not understandable by SQLite versions</span>
<span class="line-added"> 2305 ** prior to 3.3.0 ([dateof:3.3.0]).  As these words are written, there</span>
<span class="line-added"> 2306 ** is now scarcely any need to generated database files that are compatible</span>
<span class="line-added"> 2307 ** all the way back to version 3.0.0, and so this setting is of little</span>
<span class="line-added"> 2308 ** practical use, but is provided so that SQLite can continue to claim the</span>
<span class="line-added"> 2309 ** ability to generate new database files that are compatible with  version</span>
<span class="line-added"> 2310 ** 3.0.0.</span>
<span class="line-added"> 2311 ** &lt;p&gt;Note that when the SQLITE_DBCONFIG_LEGACY_FILE_FORMAT setting is on,</span>
<span class="line-added"> 2312 ** the [VACUUM] command will fail with an obscure error when attempting to</span>
<span class="line-added"> 2313 ** process a table with generated columns and a descending index.  This is</span>
<span class="line-added"> 2314 ** not considered a bug since SQLite versions 3.3.0 and earlier do not support</span>
<span class="line-added"> 2315 ** either generated columns or decending indexes.</span>
<span class="line-added"> 2316 ** &lt;/dd&gt;</span>
 2317 ** &lt;/dl&gt;
 2318 */
 2319 #define SQLITE_DBCONFIG_MAINDBNAME            1000 /* const char* */
 2320 #define SQLITE_DBCONFIG_LOOKASIDE             1001 /* void* int int */
 2321 #define SQLITE_DBCONFIG_ENABLE_FKEY           1002 /* int int* */
 2322 #define SQLITE_DBCONFIG_ENABLE_TRIGGER        1003 /* int int* */
 2323 #define SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER 1004 /* int int* */
 2324 #define SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION 1005 /* int int* */
 2325 #define SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE      1006 /* int int* */
 2326 #define SQLITE_DBCONFIG_ENABLE_QPSG           1007 /* int int* */
 2327 #define SQLITE_DBCONFIG_TRIGGER_EQP           1008 /* int int* */
 2328 #define SQLITE_DBCONFIG_RESET_DATABASE        1009 /* int int* */
 2329 #define SQLITE_DBCONFIG_DEFENSIVE             1010 /* int int* */
 2330 #define SQLITE_DBCONFIG_WRITABLE_SCHEMA       1011 /* int int* */
 2331 #define SQLITE_DBCONFIG_LEGACY_ALTER_TABLE    1012 /* int int* */
 2332 #define SQLITE_DBCONFIG_DQS_DML               1013 /* int int* */
 2333 #define SQLITE_DBCONFIG_DQS_DDL               1014 /* int int* */
 2334 #define SQLITE_DBCONFIG_ENABLE_VIEW           1015 /* int int* */
<span class="line-modified"> 2335 #define SQLITE_DBCONFIG_LEGACY_FILE_FORMAT    1016 /* int int* */</span>
<span class="line-added"> 2336 #define SQLITE_DBCONFIG_TRUSTED_SCHEMA        1017 /* int int* */</span>
<span class="line-added"> 2337 #define SQLITE_DBCONFIG_MAX                   1017 /* Largest DBCONFIG */</span>
 2338 
 2339 /*
 2340 ** CAPI3REF: Enable Or Disable Extended Result Codes
 2341 ** METHOD: sqlite3
 2342 **
 2343 ** ^The sqlite3_extended_result_codes() routine enables or disables the
 2344 ** [extended result codes] feature of SQLite. ^The extended result
 2345 ** codes are disabled by default for historical compatibility.
 2346 */
 2347 SQLITE_API int sqlite3_extended_result_codes(sqlite3*, int onoff);
 2348 
 2349 /*
 2350 ** CAPI3REF: Last Insert Rowid
 2351 ** METHOD: sqlite3
 2352 **
 2353 ** ^Each entry in most SQLite tables (except for [WITHOUT ROWID] tables)
 2354 ** has a unique 64-bit signed
 2355 ** integer key called the [ROWID | &quot;rowid&quot;]. ^The rowid is always available
 2356 ** as an undeclared column named ROWID, OID, or _ROWID_ as long as those
 2357 ** names are not also used by explicitly declared columns. ^If
</pre>
<hr />
<pre>
 2523 ** or Ctrl-C where the user wants a long query operation to halt
 2524 ** immediately.
 2525 **
 2526 ** ^It is safe to call this routine from a thread different from the
 2527 ** thread that is currently running the database operation.  But it
 2528 ** is not safe to call this routine with a [database connection] that
 2529 ** is closed or might close before sqlite3_interrupt() returns.
 2530 **
 2531 ** ^If an SQL operation is very nearly finished at the time when
 2532 ** sqlite3_interrupt() is called, then it might not have an opportunity
 2533 ** to be interrupted and might continue to completion.
 2534 **
 2535 ** ^An SQL operation that is interrupted will return [SQLITE_INTERRUPT].
 2536 ** ^If the interrupted SQL operation is an INSERT, UPDATE, or DELETE
 2537 ** that is inside an explicit transaction, then the entire transaction
 2538 ** will be rolled back automatically.
 2539 **
 2540 ** ^The sqlite3_interrupt(D) call is in effect until all currently running
 2541 ** SQL statements on [database connection] D complete.  ^Any new SQL statements
 2542 ** that are started after the sqlite3_interrupt() call and before the
<span class="line-modified"> 2543 ** running statement count reaches zero are interrupted as if they had been</span>
 2544 ** running prior to the sqlite3_interrupt() call.  ^New SQL statements
 2545 ** that are started after the running statement count reaches zero are
 2546 ** not effected by the sqlite3_interrupt().
 2547 ** ^A call to sqlite3_interrupt(D) that occurs when there are no running
 2548 ** SQL statements is a no-op and has no effect on SQL statements
 2549 ** that are started after the sqlite3_interrupt() call returns.
 2550 */
 2551 SQLITE_API void sqlite3_interrupt(sqlite3*);
 2552 
 2553 /*
 2554 ** CAPI3REF: Determine If An SQL Statement Is Complete
 2555 **
 2556 ** These routines are useful during command-line input to determine if the
 2557 ** currently entered text seems to form a complete SQL statement or
 2558 ** if additional input is needed before sending the text into
 2559 ** SQLite for parsing.  ^These routines return 1 if the input string
 2560 ** appears to be a complete SQL statement.  ^A statement is judged to be
 2561 ** complete if it ends with a semicolon token and is not a prefix of a
 2562 ** well-formed CREATE TRIGGER statement.  ^Semicolons that are embedded within
 2563 ** string literals or quoted identifier names or comments are not
</pre>
<hr />
<pre>
 2691 ** to zero-terminated strings that  contain the names of the columns.
 2692 ** The remaining entries all point to query results.  NULL values result
 2693 ** in NULL pointers.  All other values are in their UTF-8 zero-terminated
 2694 ** string representation as returned by [sqlite3_column_text()].
 2695 **
 2696 ** A result table might consist of one or more memory allocations.
 2697 ** It is not safe to pass a result table directly to [sqlite3_free()].
 2698 ** A result table should be deallocated using [sqlite3_free_table()].
 2699 **
 2700 ** ^(As an example of the result table format, suppose a query result
 2701 ** is as follows:
 2702 **
 2703 ** &lt;blockquote&gt;&lt;pre&gt;
 2704 **        Name        | Age
 2705 **        -----------------------
 2706 **        Alice       | 43
 2707 **        Bob         | 28
 2708 **        Cindy       | 21
 2709 ** &lt;/pre&gt;&lt;/blockquote&gt;
 2710 **
<span class="line-modified"> 2711 ** There are two columns (M==2) and three rows (N==3).  Thus the</span>
 2712 ** result table has 8 entries.  Suppose the result table is stored
<span class="line-modified"> 2713 ** in an array named azResult.  Then azResult holds this content:</span>
 2714 **
 2715 ** &lt;blockquote&gt;&lt;pre&gt;
 2716 **        azResult&amp;#91;0] = &quot;Name&quot;;
 2717 **        azResult&amp;#91;1] = &quot;Age&quot;;
 2718 **        azResult&amp;#91;2] = &quot;Alice&quot;;
 2719 **        azResult&amp;#91;3] = &quot;43&quot;;
 2720 **        azResult&amp;#91;4] = &quot;Bob&quot;;
 2721 **        azResult&amp;#91;5] = &quot;28&quot;;
 2722 **        azResult&amp;#91;6] = &quot;Cindy&quot;;
 2723 **        azResult&amp;#91;7] = &quot;21&quot;;
 2724 ** &lt;/pre&gt;&lt;/blockquote&gt;)^
 2725 **
 2726 ** ^The sqlite3_get_table() function evaluates one or more
 2727 ** semicolon-separated SQL statements in the zero-terminated UTF-8
 2728 ** string of its 2nd parameter and returns a result table to the
 2729 ** pointer given in its 3rd parameter.
 2730 **
 2731 ** After the application has finished with the result from sqlite3_get_table(),
 2732 ** it must pass the result table pointer to sqlite3_free_table() in order to
 2733 ** release the memory that was malloced.  Because of the way the
</pre>
<hr />
<pre>
 2786 ** ^As long as the buffer size is greater than zero, sqlite3_snprintf()
 2787 ** guarantees that the buffer is always zero-terminated.  ^The first
 2788 ** parameter &quot;n&quot; is the total size of the buffer, including space for
 2789 ** the zero terminator.  So the longest string that can be completely
 2790 ** written will be n-1 characters.
 2791 **
 2792 ** ^The sqlite3_vsnprintf() routine is a varargs version of sqlite3_snprintf().
 2793 **
 2794 ** See also:  [built-in printf()], [printf() SQL function]
 2795 */
 2796 SQLITE_API char *sqlite3_mprintf(const char*,...);
 2797 SQLITE_API char *sqlite3_vmprintf(const char*, va_list);
 2798 SQLITE_API char *sqlite3_snprintf(int,char*,const char*, ...);
 2799 SQLITE_API char *sqlite3_vsnprintf(int,char*,const char*, va_list);
 2800 
 2801 /*
 2802 ** CAPI3REF: Memory Allocation Subsystem
 2803 **
 2804 ** The SQLite core uses these three routines for all of its own
 2805 ** internal memory allocation needs. &quot;Core&quot; in the previous sentence
<span class="line-modified"> 2806 ** does not include operating-system specific [VFS] implementation.  The</span>
 2807 ** Windows VFS uses native malloc() and free() for some operations.
 2808 **
 2809 ** ^The sqlite3_malloc() routine returns a pointer to a block
 2810 ** of memory at least N bytes in length, where N is the parameter.
 2811 ** ^If sqlite3_malloc() is unable to obtain sufficient free
 2812 ** memory, it returns a NULL pointer.  ^If the parameter N to
 2813 ** sqlite3_malloc() is zero or negative then sqlite3_malloc() returns
 2814 ** a NULL pointer.
 2815 **
 2816 ** ^The sqlite3_malloc64(N) routine works just like
 2817 ** sqlite3_malloc(N) except that N is an unsigned 64-bit integer instead
 2818 ** of a signed 32-bit integer.
 2819 **
 2820 ** ^Calling sqlite3_free() with a pointer previously returned
 2821 ** by sqlite3_malloc() or sqlite3_realloc() releases that memory so
 2822 ** that it might be reused.  ^The sqlite3_free() routine is
 2823 ** a no-op if is called with a NULL pointer.  Passing a NULL pointer
 2824 ** to sqlite3_free() is harmless.  After being freed, memory
 2825 ** should neither be read nor written.  Even reading previously freed
 2826 ** memory might result in a segmentation fault or other severe error.
</pre>
<hr />
<pre>
 2847 ** ^The sqlite3_realloc64(X,N) interfaces works the same as
 2848 ** sqlite3_realloc(X,N) except that N is a 64-bit unsigned integer instead
 2849 ** of a 32-bit signed integer.
 2850 **
 2851 ** ^If X is a memory allocation previously obtained from sqlite3_malloc(),
 2852 ** sqlite3_malloc64(), sqlite3_realloc(), or sqlite3_realloc64(), then
 2853 ** sqlite3_msize(X) returns the size of that memory allocation in bytes.
 2854 ** ^The value returned by sqlite3_msize(X) might be larger than the number
 2855 ** of bytes requested when X was allocated.  ^If X is a NULL pointer then
 2856 ** sqlite3_msize(X) returns zero.  If X points to something that is not
 2857 ** the beginning of memory allocation, or if it points to a formerly
 2858 ** valid memory allocation that has now been freed, then the behavior
 2859 ** of sqlite3_msize(X) is undefined and possibly harmful.
 2860 **
 2861 ** ^The memory returned by sqlite3_malloc(), sqlite3_realloc(),
 2862 ** sqlite3_malloc64(), and sqlite3_realloc64()
 2863 ** is always aligned to at least an 8 byte boundary, or to a
 2864 ** 4 byte boundary if the [SQLITE_4_BYTE_ALIGNED_MALLOC] compile-time
 2865 ** option is used.
 2866 **













 2867 ** The pointer arguments to [sqlite3_free()] and [sqlite3_realloc()]
 2868 ** must be either NULL or else pointers obtained from a prior
 2869 ** invocation of [sqlite3_malloc()] or [sqlite3_realloc()] that have
 2870 ** not yet been released.
 2871 **
 2872 ** The application must not read or write any part of
 2873 ** a block of memory after it has been released using
 2874 ** [sqlite3_free()] or [sqlite3_realloc()].
 2875 */
 2876 SQLITE_API void *sqlite3_malloc(int);
 2877 SQLITE_API void *sqlite3_malloc64(sqlite3_uint64);
 2878 SQLITE_API void *sqlite3_realloc(void*, int);
 2879 SQLITE_API void *sqlite3_realloc64(void*, sqlite3_uint64);
 2880 SQLITE_API void sqlite3_free(void*);
 2881 SQLITE_API sqlite3_uint64 sqlite3_msize(void*);
 2882 
 2883 /*
 2884 ** CAPI3REF: Memory Allocator Statistics
 2885 **
 2886 ** SQLite provides these two interfaces for reporting on the status
</pre>
<hr />
<pre>
 2895 ** [sqlite3_memory_highwater()] include any overhead
 2896 ** added by SQLite in its implementation of [sqlite3_malloc()],
 2897 ** but not overhead added by the any underlying system library
 2898 ** routines that [sqlite3_malloc()] may call.
 2899 **
 2900 ** ^The memory high-water mark is reset to the current value of
 2901 ** [sqlite3_memory_used()] if and only if the parameter to
 2902 ** [sqlite3_memory_highwater()] is true.  ^The value returned
 2903 ** by [sqlite3_memory_highwater(1)] is the high-water mark
 2904 ** prior to the reset.
 2905 */
 2906 SQLITE_API sqlite3_int64 sqlite3_memory_used(void);
 2907 SQLITE_API sqlite3_int64 sqlite3_memory_highwater(int resetFlag);
 2908 
 2909 /*
 2910 ** CAPI3REF: Pseudo-Random Number Generator
 2911 **
 2912 ** SQLite contains a high-quality pseudo-random number generator (PRNG) used to
 2913 ** select random [ROWID | ROWIDs] when inserting new records into a table that
 2914 ** already uses the largest possible [ROWID].  The PRNG is also used for
<span class="line-modified"> 2915 ** the built-in random() and randomblob() SQL functions.  This interface allows</span>
 2916 ** applications to access the same PRNG for other purposes.
 2917 **
 2918 ** ^A call to this routine stores N bytes of randomness into buffer P.
 2919 ** ^The P parameter can be a NULL pointer.
 2920 **
 2921 ** ^If this routine has not been previously called or if the previous
 2922 ** call had N less than one or a NULL pointer for P, then the PRNG is
 2923 ** seeded using randomness obtained from the xRandomness method of
 2924 ** the default [sqlite3_vfs] object.
 2925 ** ^If the previous call to this routine had an N of 1 or more and a
 2926 ** non-NULL P then the pseudo-randomness is generated
 2927 ** internally and without recourse to the [sqlite3_vfs] xRandomness
 2928 ** method.
 2929 */
 2930 SQLITE_API void sqlite3_randomness(int N, void *P);
 2931 
 2932 /*
 2933 ** CAPI3REF: Compile-Time Authorization Callbacks
 2934 ** METHOD: sqlite3
 2935 ** KEYWORDS: {authorizer callback}
</pre>
<hr />
<pre>
 3269 ** returned in *ppDb, even if an error occurs.  The only exception is that
 3270 ** if SQLite is unable to allocate memory to hold the [sqlite3] object,
 3271 ** a NULL will be written into *ppDb instead of a pointer to the [sqlite3]
 3272 ** object.)^ ^(If the database is opened (and/or created) successfully, then
 3273 ** [SQLITE_OK] is returned.  Otherwise an [error code] is returned.)^ ^The
 3274 ** [sqlite3_errmsg()] or [sqlite3_errmsg16()] routines can be used to obtain
 3275 ** an English language description of the error following a failure of any
 3276 ** of the sqlite3_open() routines.
 3277 **
 3278 ** ^The default encoding will be UTF-8 for databases created using
 3279 ** sqlite3_open() or sqlite3_open_v2().  ^The default encoding for databases
 3280 ** created using sqlite3_open16() will be UTF-16 in the native byte order.
 3281 **
 3282 ** Whether or not an error occurs when it is opened, resources
 3283 ** associated with the [database connection] handle should be released by
 3284 ** passing it to [sqlite3_close()] when it is no longer required.
 3285 **
 3286 ** The sqlite3_open_v2() interface works like sqlite3_open()
 3287 ** except that it accepts two additional parameters for additional control
 3288 ** over the new database connection.  ^(The flags parameter to
<span class="line-modified"> 3289 ** sqlite3_open_v2() must include, at a minimum, one of the following</span>
<span class="line-modified"> 3290 ** three flag combinations:)^</span>


 3291 **
 3292 ** &lt;dl&gt;
 3293 ** ^(&lt;dt&gt;[SQLITE_OPEN_READONLY]&lt;/dt&gt;
 3294 ** &lt;dd&gt;The database is opened in read-only mode.  If the database does not
 3295 ** already exist, an error is returned.&lt;/dd&gt;)^
 3296 **
 3297 ** ^(&lt;dt&gt;[SQLITE_OPEN_READWRITE]&lt;/dt&gt;
 3298 ** &lt;dd&gt;The database is opened for reading and writing if possible, or reading
 3299 ** only if the file is write protected by the operating system.  In either
 3300 ** case the database must already exist, otherwise an error is returned.&lt;/dd&gt;)^
 3301 **
 3302 ** ^(&lt;dt&gt;[SQLITE_OPEN_READWRITE] | [SQLITE_OPEN_CREATE]&lt;/dt&gt;
 3303 ** &lt;dd&gt;The database is opened for reading and writing, and is created if
 3304 ** it does not already exist. This is the behavior that is always used for
 3305 ** sqlite3_open() and sqlite3_open16().&lt;/dd&gt;)^
 3306 ** &lt;/dl&gt;
 3307 **
<span class="line-added"> 3308 ** In addition to the required flags, the following optional flags are</span>
<span class="line-added"> 3309 ** also supported:</span>
<span class="line-added"> 3310 **</span>
<span class="line-added"> 3311 ** &lt;dl&gt;</span>
<span class="line-added"> 3312 ** ^(&lt;dt&gt;[SQLITE_OPEN_URI]&lt;/dt&gt;</span>
<span class="line-added"> 3313 ** &lt;dd&gt;The filename can be interpreted as a URI if this flag is set.&lt;/dd&gt;)^</span>
<span class="line-added"> 3314 **</span>
<span class="line-added"> 3315 ** ^(&lt;dt&gt;[SQLITE_OPEN_MEMORY]&lt;/dt&gt;</span>
<span class="line-added"> 3316 ** &lt;dd&gt;The database will be opened as an in-memory database.  The database</span>
<span class="line-added"> 3317 ** is named by the &quot;filename&quot; argument for the purposes of cache-sharing,</span>
<span class="line-added"> 3318 ** if shared cache mode is enabled, but the &quot;filename&quot; is otherwise ignored.</span>
<span class="line-added"> 3319 ** &lt;/dd&gt;)^</span>
<span class="line-added"> 3320 **</span>
<span class="line-added"> 3321 ** ^(&lt;dt&gt;[SQLITE_OPEN_NOMUTEX]&lt;/dt&gt;</span>
<span class="line-added"> 3322 ** &lt;dd&gt;The new database connection will use the &quot;multi-thread&quot;</span>
<span class="line-added"> 3323 ** [threading mode].)^  This means that separate threads are allowed</span>
<span class="line-added"> 3324 ** to use SQLite at the same time, as long as each thread is using</span>
<span class="line-added"> 3325 ** a different [database connection].</span>
<span class="line-added"> 3326 **</span>
<span class="line-added"> 3327 ** ^(&lt;dt&gt;[SQLITE_OPEN_FULLMUTEX]&lt;/dt&gt;</span>
<span class="line-added"> 3328 ** &lt;dd&gt;The new database connection will use the &quot;serialized&quot;</span>
<span class="line-added"> 3329 ** [threading mode].)^  This means the multiple threads can safely</span>
<span class="line-added"> 3330 ** attempt to use the same database connection at the same time.</span>
<span class="line-added"> 3331 ** (Mutexes will block any actual concurrency, but in this mode</span>
<span class="line-added"> 3332 ** there is no harm in trying.)</span>
<span class="line-added"> 3333 **</span>
<span class="line-added"> 3334 ** ^(&lt;dt&gt;[SQLITE_OPEN_SHAREDCACHE]&lt;/dt&gt;</span>
<span class="line-added"> 3335 ** &lt;dd&gt;The database is opened [shared cache] enabled, overriding</span>
<span class="line-added"> 3336 ** the default shared cache setting provided by</span>
<span class="line-added"> 3337 ** [sqlite3_enable_shared_cache()].)^</span>
<span class="line-added"> 3338 **</span>
<span class="line-added"> 3339 ** ^(&lt;dt&gt;[SQLITE_OPEN_PRIVATECACHE]&lt;/dt&gt;</span>
<span class="line-added"> 3340 ** &lt;dd&gt;The database is opened [shared cache] disabled, overriding</span>
<span class="line-added"> 3341 ** the default shared cache setting provided by</span>
<span class="line-added"> 3342 ** [sqlite3_enable_shared_cache()].)^</span>
<span class="line-added"> 3343 **</span>
<span class="line-added"> 3344 ** [[OPEN_NOFOLLOW]] ^(&lt;dt&gt;[SQLITE_OPEN_NOFOLLOW]&lt;/dt&gt;</span>
<span class="line-added"> 3345 ** &lt;dd&gt;The database filename is not allowed to be a symbolic link&lt;/dd&gt;</span>
<span class="line-added"> 3346 ** &lt;/dl&gt;)^</span>
<span class="line-added"> 3347 **</span>
 3348 ** If the 3rd parameter to sqlite3_open_v2() is not one of the
<span class="line-modified"> 3349 ** required combinations shown above optionally combined with other</span>
 3350 ** [SQLITE_OPEN_READONLY | SQLITE_OPEN_* bits]
 3351 ** then the behavior is undefined.
 3352 **












 3353 ** ^The fourth parameter to sqlite3_open_v2() is the name of the
 3354 ** [sqlite3_vfs] object that defines the operating system interface that
 3355 ** the new database connection should use.  ^If the fourth parameter is
 3356 ** a NULL pointer then the default [sqlite3_vfs] object is used.
 3357 **
 3358 ** ^If the filename is &quot;:memory:&quot;, then a private, temporary in-memory database
 3359 ** is created for the connection.  ^This in-memory database will vanish when
 3360 ** the database connection is closed.  Future versions of SQLite might
 3361 ** make use of additional special filenames that begin with the &quot;:&quot; character.
 3362 ** It is recommended that when a database filename actually does begin with
 3363 ** a &quot;:&quot; character you should prefix the filename with a pathname such as
 3364 ** &quot;./&quot; to avoid ambiguity.
 3365 **
 3366 ** ^If the filename is an empty string, then a private, temporary
 3367 ** on-disk database will be created.  ^This private database will be
 3368 ** automatically deleted as soon as the database connection is closed.
 3369 **
 3370 ** [[URI filenames in sqlite3_open()]] &lt;h3&gt;URI Filenames&lt;/h3&gt;
 3371 **
 3372 ** ^If [URI filename] interpretation is enabled, and the filename argument
</pre>
<hr />
<pre>
 3512 ** See also: [sqlite3_temp_directory]
 3513 */
 3514 SQLITE_API int sqlite3_open(
 3515   const char *filename,   /* Database filename (UTF-8) */
 3516   sqlite3 **ppDb          /* OUT: SQLite db handle */
 3517 );
 3518 SQLITE_API int sqlite3_open16(
 3519   const void *filename,   /* Database filename (UTF-16) */
 3520   sqlite3 **ppDb          /* OUT: SQLite db handle */
 3521 );
 3522 SQLITE_API int sqlite3_open_v2(
 3523   const char *filename,   /* Database filename (UTF-8) */
 3524   sqlite3 **ppDb,         /* OUT: SQLite db handle */
 3525   int flags,              /* Flags */
 3526   const char *zVfs        /* Name of VFS module to use */
 3527 );
 3528 
 3529 /*
 3530 ** CAPI3REF: Obtain Values For URI Parameters
 3531 **
<span class="line-modified"> 3532 ** These are utility routines, useful to [VFS|custom VFS implementations],</span>
<span class="line-modified"> 3533 ** that check if a database file was a URI that contained a specific query</span>
 3534 ** parameter, and if so obtains the value of that query parameter.
 3535 **
 3536 ** If F is the database filename pointer passed into the xOpen() method of
<span class="line-modified"> 3537 ** a VFS implementation or it is the return value of [sqlite3_db_filename()]</span>
<span class="line-modified"> 3538 ** and if P is the name of the query parameter, then</span>

 3539 ** sqlite3_uri_parameter(F,P) returns the value of the P
 3540 ** parameter if it exists or a NULL pointer if P does not appear as a
<span class="line-modified"> 3541 ** query parameter on F.  If P is a query parameter of F and it</span>
 3542 ** has no explicit value, then sqlite3_uri_parameter(F,P) returns
 3543 ** a pointer to an empty string.
 3544 **
 3545 ** The sqlite3_uri_boolean(F,P,B) routine assumes that P is a boolean
 3546 ** parameter and returns true (1) or false (0) according to the value
 3547 ** of P.  The sqlite3_uri_boolean(F,P,B) routine returns true (1) if the
 3548 ** value of query parameter P is one of &quot;yes&quot;, &quot;true&quot;, or &quot;on&quot; in any
 3549 ** case or if the value begins with a non-zero number.  The
 3550 ** sqlite3_uri_boolean(F,P,B) routines returns false (0) if the value of
 3551 ** query parameter P is one of &quot;no&quot;, &quot;false&quot;, or &quot;off&quot; in any case or
 3552 ** if the value begins with a numeric zero.  If P is not a query
<span class="line-modified"> 3553 ** parameter on F or if the value of P does not match any of the</span>
 3554 ** above, then sqlite3_uri_boolean(F,P,B) returns (B!=0).
 3555 **
 3556 ** The sqlite3_uri_int64(F,P,D) routine converts the value of P into a
 3557 ** 64-bit signed integer and returns that integer, or D if P does not
 3558 ** exist.  If the value of P is something other than an integer, then
 3559 ** zero is returned.
 3560 **
<span class="line-added"> 3561 ** The sqlite3_uri_key(F,N) returns a pointer to the name (not</span>
<span class="line-added"> 3562 ** the value) of the N-th query parameter for filename F, or a NULL</span>
<span class="line-added"> 3563 ** pointer if N is less than zero or greater than the number of query</span>
<span class="line-added"> 3564 ** parameters minus 1.  The N value is zero-based so N should be 0 to obtain</span>
<span class="line-added"> 3565 ** the name of the first query parameter, 1 for the second parameter, and</span>
<span class="line-added"> 3566 ** so forth.</span>
<span class="line-added"> 3567 **</span>
 3568 ** If F is a NULL pointer, then sqlite3_uri_parameter(F,P) returns NULL and
 3569 ** sqlite3_uri_boolean(F,P,B) returns B.  If F is not a NULL pointer and
<span class="line-modified"> 3570 ** is not a database file pathname pointer that the SQLite core passed</span>
<span class="line-modified"> 3571 ** into the xOpen VFS method, then the behavior of this routine is undefined</span>
<span class="line-modified"> 3572 ** and probably undesirable.</span>
<span class="line-added"> 3573 **</span>
<span class="line-added"> 3574 ** Beginning with SQLite [version 3.31.0] ([dateof:3.31.0]) the input F</span>
<span class="line-added"> 3575 ** parameter can also be the name of a rollback journal file or WAL file</span>
<span class="line-added"> 3576 ** in addition to the main database file.  Prior to version 3.31.0, these</span>
<span class="line-added"> 3577 ** routines would only work if F was the name of the main database file.</span>
<span class="line-added"> 3578 ** When the F parameter is the name of the rollback journal or WAL file,</span>
<span class="line-added"> 3579 ** it has access to all the same query parameters as were found on the</span>
<span class="line-added"> 3580 ** main database file.</span>
 3581 **
 3582 ** See the [URI filename] documentation for additional information.
 3583 */
 3584 SQLITE_API const char *sqlite3_uri_parameter(const char *zFilename, const char *zParam);
 3585 SQLITE_API int sqlite3_uri_boolean(const char *zFile, const char *zParam, int bDefault);
 3586 SQLITE_API sqlite3_int64 sqlite3_uri_int64(const char*, const char*, sqlite3_int64);
<span class="line-added"> 3587 SQLITE_API const char *sqlite3_uri_key(const char *zFilename, int N);</span>
<span class="line-added"> 3588 </span>
<span class="line-added"> 3589 /*</span>
<span class="line-added"> 3590 ** CAPI3REF:  Translate filenames</span>
<span class="line-added"> 3591 **</span>
<span class="line-added"> 3592 ** These routines are available to [VFS|custom VFS implementations] for</span>
<span class="line-added"> 3593 ** translating filenames between the main database file, the journal file,</span>
<span class="line-added"> 3594 ** and the WAL file.</span>
<span class="line-added"> 3595 **</span>
<span class="line-added"> 3596 ** If F is the name of an sqlite database file, journal file, or WAL file</span>
<span class="line-added"> 3597 ** passed by the SQLite core into the VFS, then sqlite3_filename_database(F)</span>
<span class="line-added"> 3598 ** returns the name of the corresponding database file.</span>
<span class="line-added"> 3599 **</span>
<span class="line-added"> 3600 ** If F is the name of an sqlite database file, journal file, or WAL file</span>
<span class="line-added"> 3601 ** passed by the SQLite core into the VFS, or if F is a database filename</span>
<span class="line-added"> 3602 ** obtained from [sqlite3_db_filename()], then sqlite3_filename_journal(F)</span>
<span class="line-added"> 3603 ** returns the name of the corresponding rollback journal file.</span>
<span class="line-added"> 3604 **</span>
<span class="line-added"> 3605 ** If F is the name of an sqlite database file, journal file, or WAL file</span>
<span class="line-added"> 3606 ** that was passed by the SQLite core into the VFS, or if F is a database</span>
<span class="line-added"> 3607 ** filename obtained from [sqlite3_db_filename()], then</span>
<span class="line-added"> 3608 ** sqlite3_filename_wal(F) returns the name of the corresponding</span>
<span class="line-added"> 3609 ** WAL file.</span>
<span class="line-added"> 3610 **</span>
<span class="line-added"> 3611 ** In all of the above, if F is not the name of a database, journal or WAL</span>
<span class="line-added"> 3612 ** filename passed into the VFS from the SQLite core and F is not the</span>
<span class="line-added"> 3613 ** return value from [sqlite3_db_filename()], then the result is</span>
<span class="line-added"> 3614 ** undefined and is likely a memory access violation.</span>
<span class="line-added"> 3615 */</span>
<span class="line-added"> 3616 SQLITE_API const char *sqlite3_filename_database(const char*);</span>
<span class="line-added"> 3617 SQLITE_API const char *sqlite3_filename_journal(const char*);</span>
<span class="line-added"> 3618 SQLITE_API const char *sqlite3_filename_wal(const char*);</span>
 3619 
 3620 
 3621 /*
 3622 ** CAPI3REF: Error Codes And Messages
 3623 ** METHOD: sqlite3
 3624 **
 3625 ** ^If the most recent sqlite3_* API call associated with
 3626 ** [database connection] D failed, then the sqlite3_errcode(D) interface
 3627 ** returns the numeric [result code] or [extended result code] for that
 3628 ** API call.
 3629 ** ^The sqlite3_extended_errcode()
 3630 ** interface is the same except that it always returns the
 3631 ** [extended result code] even when extended result codes are
 3632 ** disabled.
 3633 **
 3634 ** The values returned by sqlite3_errcode() and/or
 3635 ** sqlite3_extended_errcode() might change with each API call.
 3636 ** Except, there are some interfaces that are guaranteed to never
 3637 ** change the value of the error code.  The error-code preserving
 3638 ** interfaces are:
</pre>
<hr />
<pre>
 3917 ** behave differently in three ways:
 3918 **
 3919 ** &lt;ol&gt;
 3920 ** &lt;li&gt;
 3921 ** ^If the database schema changes, instead of returning [SQLITE_SCHEMA] as it
 3922 ** always used to do, [sqlite3_step()] will automatically recompile the SQL
 3923 ** statement and try to run it again. As many as [SQLITE_MAX_SCHEMA_RETRY]
 3924 ** retries will occur before sqlite3_step() gives up and returns an error.
 3925 ** &lt;/li&gt;
 3926 **
 3927 ** &lt;li&gt;
 3928 ** ^When an error occurs, [sqlite3_step()] will return one of the detailed
 3929 ** [error codes] or [extended error codes].  ^The legacy behavior was that
 3930 ** [sqlite3_step()] would only return a generic [SQLITE_ERROR] result code
 3931 ** and the application would have to make a second call to [sqlite3_reset()]
 3932 ** in order to find the underlying cause of the problem. With the &quot;v2&quot; prepare
 3933 ** interfaces, the underlying reason for the error is returned immediately.
 3934 ** &lt;/li&gt;
 3935 **
 3936 ** &lt;li&gt;
<span class="line-modified"> 3937 ** ^If the specific value bound to a [parameter | host parameter] in the</span>
 3938 ** WHERE clause might influence the choice of query plan for a statement,
 3939 ** then the statement will be automatically recompiled, as if there had been
<span class="line-modified"> 3940 ** a schema change, on the first [sqlite3_step()] call following any change</span>
 3941 ** to the [sqlite3_bind_text | bindings] of that [parameter].
<span class="line-modified"> 3942 ** ^The specific value of a WHERE-clause [parameter] might influence the</span>
 3943 ** choice of query plan if the parameter is the left-hand side of a [LIKE]
 3944 ** or [GLOB] operator or if the parameter is compared to an indexed column
 3945 ** and the [SQLITE_ENABLE_STAT4] compile-time option is enabled.
 3946 ** &lt;/li&gt;
 3947 ** &lt;/ol&gt;
 3948 **
 3949 ** &lt;p&gt;^sqlite3_prepare_v3() differs from sqlite3_prepare_v2() only in having
 3950 ** the extra prepFlags parameter, which is a bit array consisting of zero or
 3951 ** more of the [SQLITE_PREPARE_PERSISTENT|SQLITE_PREPARE_*] flags.  ^The
 3952 ** sqlite3_prepare_v2() interface works exactly the same as
 3953 ** sqlite3_prepare_v3() with a zero prepFlags parameter.
 3954 */
 3955 SQLITE_API int sqlite3_prepare(
 3956   sqlite3 *db,            /* Database handle */
 3957   const char *zSql,       /* SQL statement, UTF-8 encoded */
 3958   int nByte,              /* Maximum length of zSql in bytes. */
 3959   sqlite3_stmt **ppStmt,  /* OUT: Statement handle */
 3960   const char **pzTail     /* OUT: Pointer to unused portion of zSql */
 3961 );
 3962 SQLITE_API int sqlite3_prepare_v2(
</pre>
<hr />
<pre>
 4431 ** ^The name of the database or table or column can be returned as
 4432 ** either a UTF-8 or UTF-16 string.  ^The _database_ routines return
 4433 ** the database name, the _table_ routines return the table name, and
 4434 ** the origin_ routines return the column name.
 4435 ** ^The returned string is valid until the [prepared statement] is destroyed
 4436 ** using [sqlite3_finalize()] or until the statement is automatically
 4437 ** reprepared by the first call to [sqlite3_step()] for a particular run
 4438 ** or until the same information is requested
 4439 ** again in a different encoding.
 4440 **
 4441 ** ^The names returned are the original un-aliased names of the
 4442 ** database, table, and column.
 4443 **
 4444 ** ^The first argument to these interfaces is a [prepared statement].
 4445 ** ^These functions return information about the Nth result column returned by
 4446 ** the statement, where N is the second function argument.
 4447 ** ^The left-most column is column 0 for these routines.
 4448 **
 4449 ** ^If the Nth column returned by the statement is an expression or
 4450 ** subquery and is not a column value, then all of these functions return
<span class="line-modified"> 4451 ** NULL.  ^These routines might also return NULL if a memory allocation error</span>
 4452 ** occurs.  ^Otherwise, they return the name of the attached database, table,
 4453 ** or column that query result column was extracted from.
 4454 **
 4455 ** ^As with all other SQLite APIs, those whose names end with &quot;16&quot; return
 4456 ** UTF-16 encoded strings and the other functions return UTF-8.
 4457 **
 4458 ** ^These APIs are only available if the library was compiled with the
 4459 ** [SQLITE_ENABLE_COLUMN_METADATA] C-preprocessor symbol.
 4460 **




 4461 ** If two or more threads call one or more
 4462 ** [sqlite3_column_database_name | column metadata interfaces]
 4463 ** for the same [prepared statement] and result column
 4464 ** at the same time then the results are undefined.
 4465 */
 4466 SQLITE_API const char *sqlite3_column_database_name(sqlite3_stmt*,int);
 4467 SQLITE_API const void *sqlite3_column_database_name16(sqlite3_stmt*,int);
 4468 SQLITE_API const char *sqlite3_column_table_name(sqlite3_stmt*,int);
 4469 SQLITE_API const void *sqlite3_column_table_name16(sqlite3_stmt*,int);
 4470 SQLITE_API const char *sqlite3_column_origin_name(sqlite3_stmt*,int);
 4471 SQLITE_API const void *sqlite3_column_origin_name16(sqlite3_stmt*,int);
 4472 
 4473 /*
 4474 ** CAPI3REF: Declared Datatype Of A Query Result
 4475 ** METHOD: sqlite3_stmt
 4476 **
 4477 ** ^(The first parameter is a [prepared statement].
 4478 ** If this statement is a [SELECT] statement and the Nth column of the
 4479 ** returned result set of that [SELECT] is a table column (not an
 4480 ** expression or subquery) then the declared type of the table
</pre>
<hr />
<pre>
 4577 ** error other than [SQLITE_BUSY] and [SQLITE_MISUSE].  You must call
 4578 ** [sqlite3_reset()] or [sqlite3_finalize()] in order to find one of the
 4579 ** specific [error codes] that better describes the error.
 4580 ** We admit that this is a goofy design.  The problem has been fixed
 4581 ** with the &quot;v2&quot; interface.  If you prepare all of your SQL statements
 4582 ** using [sqlite3_prepare_v3()] or [sqlite3_prepare_v2()]
 4583 ** or [sqlite3_prepare16_v2()] or [sqlite3_prepare16_v3()] instead
 4584 ** of the legacy [sqlite3_prepare()] and [sqlite3_prepare16()] interfaces,
 4585 ** then the more specific [error codes] are returned directly
 4586 ** by sqlite3_step().  The use of the &quot;vX&quot; interfaces is recommended.
 4587 */
 4588 SQLITE_API int sqlite3_step(sqlite3_stmt*);
 4589 
 4590 /*
 4591 ** CAPI3REF: Number of columns in a result set
 4592 ** METHOD: sqlite3_stmt
 4593 **
 4594 ** ^The sqlite3_data_count(P) interface returns the number of columns in the
 4595 ** current row of the result set of [prepared statement] P.
 4596 ** ^If prepared statement P does not have results ready to return
<span class="line-modified"> 4597 ** (via calls to the [sqlite3_column_int | sqlite3_column()] family of</span>
 4598 ** interfaces) then sqlite3_data_count(P) returns 0.
 4599 ** ^The sqlite3_data_count(P) routine also returns 0 if P is a NULL pointer.
 4600 ** ^The sqlite3_data_count(P) routine returns 0 if the previous call to
 4601 ** [sqlite3_step](P) returned [SQLITE_DONE].  ^The sqlite3_data_count(P)
 4602 ** will return non-zero if previous call to [sqlite3_step](P) returned
 4603 ** [SQLITE_ROW], except in the case of the [PRAGMA incremental_vacuum]
 4604 ** where it always returns zero since each step of that multi-step
 4605 ** pragma returns 0 columns of data.
 4606 **
 4607 ** See also: [sqlite3_column_count()]
 4608 */
 4609 SQLITE_API int sqlite3_data_count(sqlite3_stmt *pStmt);
 4610 
 4611 /*
 4612 ** CAPI3REF: Fundamental Datatypes
 4613 ** KEYWORDS: SQLITE_TEXT
 4614 **
 4615 ** ^(Every value in SQLite has one of five fundamental datatypes:
 4616 **
 4617 ** &lt;ul&gt;
</pre>
<hr />
<pre>
 4901 ** ^The [sqlite3_reset(S)] interface resets the [prepared statement] S
 4902 ** back to the beginning of its program.
 4903 **
 4904 ** ^If the most recent call to [sqlite3_step(S)] for the
 4905 ** [prepared statement] S returned [SQLITE_ROW] or [SQLITE_DONE],
 4906 ** or if [sqlite3_step(S)] has never before been called on S,
 4907 ** then [sqlite3_reset(S)] returns [SQLITE_OK].
 4908 **
 4909 ** ^If the most recent call to [sqlite3_step(S)] for the
 4910 ** [prepared statement] S indicated an error, then
 4911 ** [sqlite3_reset(S)] returns an appropriate [error code].
 4912 **
 4913 ** ^The [sqlite3_reset(S)] interface does not change the values
 4914 ** of any [sqlite3_bind_blob|bindings] on the [prepared statement] S.
 4915 */
 4916 SQLITE_API int sqlite3_reset(sqlite3_stmt *pStmt);
 4917 
 4918 /*
 4919 ** CAPI3REF: Create Or Redefine SQL Functions
 4920 ** KEYWORDS: {function creation routines}


 4921 ** METHOD: sqlite3
 4922 **
 4923 ** ^These functions (collectively known as &quot;function creation routines&quot;)
 4924 ** are used to add SQL functions or aggregates or to redefine the behavior
 4925 ** of existing SQL functions or aggregates. The only differences between
 4926 ** the three &quot;sqlite3_create_function*&quot; routines are the text encoding
 4927 ** expected for the second parameter (the name of the function being
 4928 ** created) and the presence or absence of a destructor callback for
 4929 ** the application data pointer. Function sqlite3_create_window_function()
 4930 ** is similar, but allows the user to supply the extra callback functions
 4931 ** needed by [aggregate window functions].
 4932 **
 4933 ** ^The first parameter is the [database connection] to which the SQL
 4934 ** function is to be added.  ^If an application uses more than one database
 4935 ** connection then application-defined SQL functions must be added
 4936 ** to each database connection separately.
 4937 **
 4938 ** ^The second parameter is the name of the SQL function to be created or
 4939 ** redefined.  ^The length of the name is limited to 255 bytes in a UTF-8
 4940 ** representation, exclusive of the zero-terminator.  ^Note that the name
</pre>
<hr />
<pre>
 4956 ** [SQLITE_UTF16LE] if the function implementation invokes
 4957 ** [sqlite3_value_text16le()] on an input, or [SQLITE_UTF16BE] if the
 4958 ** implementation invokes [sqlite3_value_text16be()] on an input, or
 4959 ** [SQLITE_UTF16] if [sqlite3_value_text16()] is used, or [SQLITE_UTF8]
 4960 ** otherwise.  ^The same SQL function may be registered multiple times using
 4961 ** different preferred text encodings, with different implementations for
 4962 ** each encoding.
 4963 ** ^When multiple implementations of the same function are available, SQLite
 4964 ** will pick the one that involves the least amount of data conversion.
 4965 **
 4966 ** ^The fourth parameter may optionally be ORed with [SQLITE_DETERMINISTIC]
 4967 ** to signal that the function will always return the same result given
 4968 ** the same inputs within a single SQL statement.  Most SQL functions are
 4969 ** deterministic.  The built-in [random()] SQL function is an example of a
 4970 ** function that is not deterministic.  The SQLite query planner is able to
 4971 ** perform additional optimizations on deterministic functions, so use
 4972 ** of the [SQLITE_DETERMINISTIC] flag is recommended where possible.
 4973 **
 4974 ** ^The fourth parameter may also optionally include the [SQLITE_DIRECTONLY]
 4975 ** flag, which if present prevents the function from being invoked from
<span class="line-modified"> 4976 ** within VIEWs, TRIGGERs, CHECK constraints, generated column expressions,</span>
<span class="line-modified"> 4977 ** index expressions, or the WHERE clause of partial indexes.</span>
<span class="line-modified"> 4978 **</span>
<span class="line-added"> 4979 ** &lt;span style=&quot;background-color:#ffff90;&quot;&gt;</span>
<span class="line-added"> 4980 ** For best security, the [SQLITE_DIRECTONLY] flag is recommended for</span>
<span class="line-added"> 4981 ** all application-defined SQL functions that do not need to be</span>
<span class="line-added"> 4982 ** used inside of triggers, view, CHECK constraints, or other elements of</span>
<span class="line-added"> 4983 ** the database schema.  This flags is especially recommended for SQL</span>
<span class="line-added"> 4984 ** functions that have side effects or reveal internal application state.</span>
<span class="line-added"> 4985 ** Without this flag, an attacker might be able to modify the schema of</span>
<span class="line-added"> 4986 ** a database file to include invocations of the function with parameters</span>
<span class="line-added"> 4987 ** chosen by the attacker, which the application will then execute when</span>
<span class="line-added"> 4988 ** the database file is opened and read.</span>
<span class="line-added"> 4989 ** &lt;/span&gt;</span>
 4990 **
 4991 ** ^(The fifth parameter is an arbitrary pointer.  The implementation of the
 4992 ** function can gain access to this pointer using [sqlite3_user_data()].)^
 4993 **
 4994 ** ^The sixth, seventh and eighth parameters passed to the three
 4995 ** &quot;sqlite3_create_function*&quot; functions, xFunc, xStep and xFinal, are
 4996 ** pointers to C-language functions that implement the SQL function or
 4997 ** aggregate. ^A scalar SQL function requires an implementation of the xFunc
 4998 ** callback only; NULL pointers must be passed as the xStep and xFinal
 4999 ** parameters. ^An aggregate SQL function requires an implementation of xStep
 5000 ** and xFinal and NULL pointer must be passed for xFunc. ^To delete an existing
 5001 ** SQL function or aggregate, pass NULL pointers for all three function
 5002 ** callbacks.
 5003 **
 5004 ** ^The sixth, seventh, eighth and ninth parameters (xStep, xFinal, xValue
 5005 ** and xInverse) passed to sqlite3_create_window_function are pointers to
 5006 ** C-language callbacks that implement the new function. xStep and xFinal
 5007 ** must both be non-NULL. xValue and xInverse may either both be NULL, in
 5008 ** which case a regular aggregate function is created, or must both be
 5009 ** non-NULL, in which case the new function may be used as either an aggregate
</pre>
<hr />
<pre>
 5088 ** CAPI3REF: Text Encodings
 5089 **
 5090 ** These constant define integer codes that represent the various
 5091 ** text encodings supported by SQLite.
 5092 */
 5093 #define SQLITE_UTF8           1    /* IMP: R-37514-35566 */
 5094 #define SQLITE_UTF16LE        2    /* IMP: R-03371-37637 */
 5095 #define SQLITE_UTF16BE        3    /* IMP: R-51971-34154 */
 5096 #define SQLITE_UTF16          4    /* Use native byte order */
 5097 #define SQLITE_ANY            5    /* Deprecated */
 5098 #define SQLITE_UTF16_ALIGNED  8    /* sqlite3_create_collation only */
 5099 
 5100 /*
 5101 ** CAPI3REF: Function Flags
 5102 **
 5103 ** These constants may be ORed together with the
 5104 ** [SQLITE_UTF8 | preferred text encoding] as the fourth argument
 5105 ** to [sqlite3_create_function()], [sqlite3_create_function16()], or
 5106 ** [sqlite3_create_function_v2()].
 5107 **
<span class="line-modified"> 5108 ** &lt;dl&gt;</span>
<span class="line-modified"> 5109 ** [[SQLITE_DETERMINISTIC]] &lt;dt&gt;SQLITE_DETERMINISTIC&lt;/dt&gt;&lt;dd&gt;</span>
<span class="line-modified"> 5110 ** The SQLITE_DETERMINISTIC flag means that the new function always gives</span>
<span class="line-added"> 5111 ** the same output when the input parameters are the same.</span>
<span class="line-added"> 5112 ** The [abs|abs() function] is deterministic, for example, but</span>
<span class="line-added"> 5113 ** [randomblob|randomblob()] is not.  Functions must</span>
<span class="line-added"> 5114 ** be deterministic in order to be used in certain contexts such as</span>
<span class="line-added"> 5115 ** with the WHERE clause of [partial indexes] or in [generated columns].</span>
<span class="line-added"> 5116 ** SQLite might also optimize deterministic functions by factoring them</span>
<span class="line-added"> 5117 ** out of inner loops.</span>
<span class="line-added"> 5118 ** &lt;/dd&gt;</span>
 5119 **
<span class="line-added"> 5120 ** [[SQLITE_DIRECTONLY]] &lt;dt&gt;SQLITE_DIRECTONLY&lt;/dt&gt;&lt;dd&gt;</span>
 5121 ** The SQLITE_DIRECTONLY flag means that the function may only be invoked
<span class="line-modified"> 5122 ** from top-level SQL, and cannot be used in VIEWs or TRIGGERs nor in</span>
<span class="line-modified"> 5123 ** schema structures such as [CHECK constraints], [DEFAULT clauses],</span>
<span class="line-modified"> 5124 ** [expression indexes], [partial indexes], or [generated columns].</span>
<span class="line-modified"> 5125 ** The SQLITE_DIRECTONLY flags is a security feature which is recommended</span>
<span class="line-modified"> 5126 ** for all [application-defined SQL functions], and especially for functions</span>
<span class="line-modified"> 5127 ** that have side-effects or that could potentially leak sensitive</span>
<span class="line-added"> 5128 ** information.</span>
<span class="line-added"> 5129 ** &lt;/dd&gt;</span>
<span class="line-added"> 5130 **</span>
<span class="line-added"> 5131 ** [[SQLITE_INNOCUOUS]] &lt;dt&gt;SQLITE_INNOCUOUS&lt;/dt&gt;&lt;dd&gt;</span>
<span class="line-added"> 5132 ** The SQLITE_INNOCUOUS flag means that the function is unlikely</span>
<span class="line-added"> 5133 ** to cause problems even if misused.  An innocuous function should have</span>
<span class="line-added"> 5134 ** no side effects and should not depend on any values other than its</span>
<span class="line-added"> 5135 ** input parameters. The [abs|abs() function] is an example of an</span>
<span class="line-added"> 5136 ** innocuous function.</span>
<span class="line-added"> 5137 ** The [load_extension() SQL function] is not innocuous because of its</span>
<span class="line-added"> 5138 ** side effects.</span>
<span class="line-added"> 5139 ** &lt;p&gt; SQLITE_INNOCUOUS is similar to SQLITE_DETERMINISTIC, but is not</span>
<span class="line-added"> 5140 ** exactly the same.  The [random|random() function] is an example of a</span>
<span class="line-added"> 5141 ** function that is innocuous but not deterministic.</span>
<span class="line-added"> 5142 ** &lt;p&gt;Some heightened security settings</span>
<span class="line-added"> 5143 ** ([SQLITE_DBCONFIG_TRUSTED_SCHEMA] and [PRAGMA trusted_schema=OFF])</span>
<span class="line-added"> 5144 ** disable the use of SQL functions inside views and triggers and in</span>
<span class="line-added"> 5145 ** schema structures such as [CHECK constraints], [DEFAULT clauses],</span>
<span class="line-added"> 5146 ** [expression indexes], [partial indexes], and [generated columns] unless</span>
<span class="line-added"> 5147 ** the function is tagged with SQLITE_INNOCUOUS.  Most built-in functions</span>
<span class="line-added"> 5148 ** are innocuous.  Developers are advised to avoid using the</span>
<span class="line-added"> 5149 ** SQLITE_INNOCUOUS flag for application-defined functions unless the</span>
<span class="line-added"> 5150 ** function has been carefully audited and found to be free of potentially</span>
<span class="line-added"> 5151 ** security-adverse side-effects and information-leaks.</span>
<span class="line-added"> 5152 ** &lt;/dd&gt;</span>
 5153 **
<span class="line-added"> 5154 ** [[SQLITE_SUBTYPE]] &lt;dt&gt;SQLITE_SUBTYPE&lt;/dt&gt;&lt;dd&gt;</span>
 5155 ** The SQLITE_SUBTYPE flag indicates to SQLite that a function may call
 5156 ** [sqlite3_value_subtype()] to inspect the sub-types of its arguments.
 5157 ** Specifying this flag makes no difference for scalar or aggregate user
 5158 ** functions. However, if it is not specified for a user-defined window
 5159 ** function, then any sub-types belonging to arguments passed to the window
 5160 ** function may be discarded before the window function is called (i.e.
 5161 ** sqlite3_value_subtype() will always return 0).
<span class="line-added"> 5162 ** &lt;/dd&gt;</span>
<span class="line-added"> 5163 ** &lt;/dl&gt;</span>
 5164 */
 5165 #define SQLITE_DETERMINISTIC    0x000000800
 5166 #define SQLITE_DIRECTONLY       0x000080000
 5167 #define SQLITE_SUBTYPE          0x000100000
<span class="line-added"> 5168 #define SQLITE_INNOCUOUS        0x000200000</span>
 5169 
 5170 /*
 5171 ** CAPI3REF: Deprecated Functions
 5172 ** DEPRECATED
 5173 **
 5174 ** These functions are [deprecated].  In order to maintain
 5175 ** backwards compatibility with older code, these functions continue
 5176 ** to be supported.  However, new applications should avoid
 5177 ** the use of these functions.  To encourage programmers to avoid
 5178 ** these functions, we will not explain what they do.
 5179 */
 5180 #ifndef SQLITE_OMIT_DEPRECATED
 5181 SQLITE_API SQLITE_DEPRECATED int sqlite3_aggregate_count(sqlite3_context*);
 5182 SQLITE_API SQLITE_DEPRECATED int sqlite3_expired(sqlite3_stmt*);
 5183 SQLITE_API SQLITE_DEPRECATED int sqlite3_transfer_bindings(sqlite3_stmt*, sqlite3_stmt*);
 5184 SQLITE_API SQLITE_DEPRECATED int sqlite3_global_recover(void);
 5185 SQLITE_API SQLITE_DEPRECATED void sqlite3_thread_cleanup(void);
 5186 SQLITE_API SQLITE_DEPRECATED int sqlite3_memory_alarm(void(*)(void*,sqlite3_int64,int),
 5187                       void*,sqlite3_int64);
 5188 #endif
</pre>
<hr />
<pre>
 5207 ** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_value_bytes&lt;/b&gt;&lt;td&gt;&amp;rarr;&lt;td&gt;Size of a BLOB
 5208 ** or a UTF-8 TEXT in bytes
 5209 ** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_value_bytes16&amp;nbsp;&amp;nbsp;&lt;/b&gt;
 5210 ** &lt;td&gt;&amp;rarr;&amp;nbsp;&amp;nbsp;&lt;td&gt;Size of UTF-16
 5211 ** TEXT in bytes
 5212 ** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_value_type&lt;/b&gt;&lt;td&gt;&amp;rarr;&lt;td&gt;Default
 5213 ** datatype of the value
 5214 ** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_value_numeric_type&amp;nbsp;&amp;nbsp;&lt;/b&gt;
 5215 ** &lt;td&gt;&amp;rarr;&amp;nbsp;&amp;nbsp;&lt;td&gt;Best numeric datatype of the value
 5216 ** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_value_nochange&amp;nbsp;&amp;nbsp;&lt;/b&gt;
 5217 ** &lt;td&gt;&amp;rarr;&amp;nbsp;&amp;nbsp;&lt;td&gt;True if the column is unchanged in an UPDATE
 5218 ** against a virtual table.
 5219 ** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_value_frombind&amp;nbsp;&amp;nbsp;&lt;/b&gt;
 5220 ** &lt;td&gt;&amp;rarr;&amp;nbsp;&amp;nbsp;&lt;td&gt;True if value originated from a [bound parameter]
 5221 ** &lt;/table&gt;&lt;/blockquote&gt;
 5222 **
 5223 ** &lt;b&gt;Details:&lt;/b&gt;
 5224 **
 5225 ** These routines extract type, size, and content information from
 5226 ** [protected sqlite3_value] objects.  Protected sqlite3_value objects
<span class="line-modified"> 5227 ** are used to pass parameter information into the functions that</span>
<span class="line-modified"> 5228 ** implement [application-defined SQL functions] and [virtual tables].</span>
 5229 **
 5230 ** These routines work only with [protected sqlite3_value] objects.
 5231 ** Any attempt to use these routines on an [unprotected sqlite3_value]
 5232 ** is not threadsafe.
 5233 **
 5234 ** ^These routines work just like the corresponding [column access functions]
 5235 ** except that these routines take a single [protected sqlite3_value] object
 5236 ** pointer instead of a [sqlite3_stmt*] pointer and an integer column number.
 5237 **
 5238 ** ^The sqlite3_value_text16() interface extracts a UTF-16 string
 5239 ** in the native byte-order of the host machine.  ^The
 5240 ** sqlite3_value_text16be() and sqlite3_value_text16le() interfaces
 5241 ** extract UTF-16 strings as big-endian and little-endian respectively.
 5242 **
 5243 ** ^If [sqlite3_value] object V was initialized
 5244 ** using [sqlite3_bind_pointer(S,I,P,X,D)] or [sqlite3_result_pointer(C,P,X,D)]
 5245 ** and if X and Y are strings that compare equal according to strcmp(X,Y),
 5246 ** then sqlite3_value_pointer(V,Y) will return the pointer P.  ^Otherwise,
 5247 ** sqlite3_value_pointer(V,Y) returns a NULL. The sqlite3_bind_pointer()
 5248 ** routine is part of the [pointer passing interface] added for SQLite 3.20.0.
</pre>
<hr />
<pre>
 5265 ** words, if the value is a string that looks like a number)
 5266 ** then the conversion is performed.  Otherwise no conversion occurs.
 5267 ** The [SQLITE_INTEGER | datatype] after conversion is returned.)^
 5268 **
 5269 ** ^Within the [xUpdate] method of a [virtual table], the
 5270 ** sqlite3_value_nochange(X) interface returns true if and only if
 5271 ** the column corresponding to X is unchanged by the UPDATE operation
 5272 ** that the xUpdate method call was invoked to implement and if
 5273 ** and the prior [xColumn] method call that was invoked to extracted
 5274 ** the value for that column returned without setting a result (probably
 5275 ** because it queried [sqlite3_vtab_nochange()] and found that the column
 5276 ** was unchanging).  ^Within an [xUpdate] method, any value for which
 5277 ** sqlite3_value_nochange(X) is true will in all other respects appear
 5278 ** to be a NULL value.  If sqlite3_value_nochange(X) is invoked anywhere other
 5279 ** than within an [xUpdate] method call for an UPDATE statement, then
 5280 ** the return value is arbitrary and meaningless.
 5281 **
 5282 ** ^The sqlite3_value_frombind(X) interface returns non-zero if the
 5283 ** value X originated from one of the [sqlite3_bind_int|sqlite3_bind()]
 5284 ** interfaces.  ^If X comes from an SQL literal value, or a table column,
<span class="line-modified"> 5285 ** or an expression, then sqlite3_value_frombind(X) returns zero.</span>
 5286 **
 5287 ** Please pay particular attention to the fact that the pointer returned
 5288 ** from [sqlite3_value_blob()], [sqlite3_value_text()], or
 5289 ** [sqlite3_value_text16()] can be invalidated by a subsequent call to
 5290 ** [sqlite3_value_bytes()], [sqlite3_value_bytes16()], [sqlite3_value_text()],
 5291 ** or [sqlite3_value_text16()].
 5292 **
 5293 ** These routines must be called from the same thread as
 5294 ** the SQL function that supplied the [sqlite3_value*] parameters.
 5295 **
 5296 ** As long as the input parameter is correct, these routines can only
 5297 ** fail if an out-of-memory error occurs during a format conversion.
 5298 ** Only the following subset of interfaces are subject to out-of-memory
 5299 ** errors:
 5300 **
 5301 ** &lt;ul&gt;
 5302 ** &lt;li&gt; sqlite3_value_blob()
 5303 ** &lt;li&gt; sqlite3_value_text()
 5304 ** &lt;li&gt; sqlite3_value_text16()
 5305 ** &lt;li&gt; sqlite3_value_text16le()
</pre>
<hr />
<pre>
 5351 ** object D and returns a pointer to that copy.  ^The [sqlite3_value] returned
 5352 ** is a [protected sqlite3_value] object even if the input is not.
 5353 ** ^The sqlite3_value_dup(V) interface returns NULL if V is NULL or if a
 5354 ** memory allocation fails.
 5355 **
 5356 ** ^The sqlite3_value_free(V) interface frees an [sqlite3_value] object
 5357 ** previously obtained from [sqlite3_value_dup()].  ^If V is a NULL pointer
 5358 ** then sqlite3_value_free(V) is a harmless no-op.
 5359 */
 5360 SQLITE_API sqlite3_value *sqlite3_value_dup(const sqlite3_value*);
 5361 SQLITE_API void sqlite3_value_free(sqlite3_value*);
 5362 
 5363 /*
 5364 ** CAPI3REF: Obtain Aggregate Function Context
 5365 ** METHOD: sqlite3_context
 5366 **
 5367 ** Implementations of aggregate SQL functions use this
 5368 ** routine to allocate memory for storing their state.
 5369 **
 5370 ** ^The first time the sqlite3_aggregate_context(C,N) routine is called
<span class="line-modified"> 5371 ** for a particular aggregate function, SQLite allocates</span>
<span class="line-modified"> 5372 ** N bytes of memory, zeroes out that memory, and returns a pointer</span>
 5373 ** to the new memory. ^On second and subsequent calls to
 5374 ** sqlite3_aggregate_context() for the same aggregate function instance,
 5375 ** the same buffer is returned.  Sqlite3_aggregate_context() is normally
 5376 ** called once for each invocation of the xStep callback and then one
 5377 ** last time when the xFinal callback is invoked.  ^(When no rows match
 5378 ** an aggregate query, the xStep() callback of the aggregate function
 5379 ** implementation is never called and xFinal() is called exactly once.
 5380 ** In those cases, sqlite3_aggregate_context() might be called for the
 5381 ** first time from within xFinal().)^
 5382 **
 5383 ** ^The sqlite3_aggregate_context(C,N) routine returns a NULL pointer
 5384 ** when first called if N is less than or equal to zero or if a memory
 5385 ** allocate error occurs.
 5386 **
 5387 ** ^(The amount of space allocated by sqlite3_aggregate_context(C,N) is
 5388 ** determined by the N parameter on first successful call.  Changing the
<span class="line-modified"> 5389 ** value of N in any subsequents call to sqlite3_aggregate_context() within</span>
 5390 ** the same aggregate function instance will not resize the memory
 5391 ** allocation.)^  Within the xFinal callback, it is customary to set
 5392 ** N=0 in calls to sqlite3_aggregate_context(C,N) so that no
 5393 ** pointless memory allocations occur.
 5394 **
 5395 ** ^SQLite automatically frees the memory allocated by
 5396 ** sqlite3_aggregate_context() when the aggregate query concludes.
 5397 **
 5398 ** The first parameter must be a copy of the
 5399 ** [sqlite3_context | SQL function context] that is the first parameter
 5400 ** to the xStep or xFinal callback routine that implements the aggregate
 5401 ** function.
 5402 **
 5403 ** This routine must be called from the same thread in which
 5404 ** the aggregate SQL function is running.
 5405 */
 5406 SQLITE_API void *sqlite3_aggregate_context(sqlite3_context*, int nBytes);
 5407 
 5408 /*
 5409 ** CAPI3REF: User Data For Functions
</pre>
<hr />
<pre>
 5680 ** METHOD: sqlite3
 5681 **
 5682 ** ^These functions add, remove, or modify a [collation] associated
 5683 ** with the [database connection] specified as the first argument.
 5684 **
 5685 ** ^The name of the collation is a UTF-8 string
 5686 ** for sqlite3_create_collation() and sqlite3_create_collation_v2()
 5687 ** and a UTF-16 string in native byte order for sqlite3_create_collation16().
 5688 ** ^Collation names that compare equal according to [sqlite3_strnicmp()] are
 5689 ** considered to be the same name.
 5690 **
 5691 ** ^(The third argument (eTextRep) must be one of the constants:
 5692 ** &lt;ul&gt;
 5693 ** &lt;li&gt; [SQLITE_UTF8],
 5694 ** &lt;li&gt; [SQLITE_UTF16LE],
 5695 ** &lt;li&gt; [SQLITE_UTF16BE],
 5696 ** &lt;li&gt; [SQLITE_UTF16], or
 5697 ** &lt;li&gt; [SQLITE_UTF16_ALIGNED].
 5698 ** &lt;/ul&gt;)^
 5699 ** ^The eTextRep argument determines the encoding of strings passed
<span class="line-modified"> 5700 ** to the collating function callback, xCompare.</span>
 5701 ** ^The [SQLITE_UTF16] and [SQLITE_UTF16_ALIGNED] values for eTextRep
 5702 ** force strings to be UTF16 with native byte order.
 5703 ** ^The [SQLITE_UTF16_ALIGNED] value for eTextRep forces strings to begin
 5704 ** on an even byte address.
 5705 **
 5706 ** ^The fourth argument, pArg, is an application data pointer that is passed
 5707 ** through as the first argument to the collating function callback.
 5708 **
<span class="line-modified"> 5709 ** ^The fifth argument, xCompare, is a pointer to the collating function.</span>
 5710 ** ^Multiple collating functions can be registered using the same name but
 5711 ** with different eTextRep parameters and SQLite will use whichever
 5712 ** function requires the least amount of data transformation.
<span class="line-modified"> 5713 ** ^If the xCompare argument is NULL then the collating function is</span>
 5714 ** deleted.  ^When all collating functions having the same name are deleted,
 5715 ** that collation is no longer usable.
 5716 **
 5717 ** ^The collating function callback is invoked with a copy of the pArg
 5718 ** application data pointer and with two strings in the encoding specified
<span class="line-modified"> 5719 ** by the eTextRep argument.  The two integer parameters to the collating</span>
<span class="line-modified"> 5720 ** function callback are the length of the two strings, in bytes. The collating</span>
<span class="line-added"> 5721 ** function must return an integer that is negative, zero, or positive</span>
 5722 ** if the first string is less than, equal to, or greater than the second,
 5723 ** respectively.  A collating function must always return the same answer
 5724 ** given the same inputs.  If two or more collating functions are registered
 5725 ** to the same collation name (using different eTextRep values) then all
 5726 ** must give an equivalent answer when invoked with equivalent strings.
 5727 ** The collating function must obey the following properties for all
 5728 ** strings A, B, and C:
 5729 **
 5730 ** &lt;ol&gt;
 5731 ** &lt;li&gt; If A==B then B==A.
 5732 ** &lt;li&gt; If A==B and B==C then A==C.
 5733 ** &lt;li&gt; If A&amp;lt;B THEN B&amp;gt;A.
 5734 ** &lt;li&gt; If A&amp;lt;B and B&amp;lt;C then A&amp;lt;C.
 5735 ** &lt;/ol&gt;
 5736 **
 5737 ** If a collating function fails any of the above constraints and that
<span class="line-modified"> 5738 ** collating function is registered and used, then the behavior of SQLite</span>
 5739 ** is undefined.
 5740 **
 5741 ** ^The sqlite3_create_collation_v2() works like sqlite3_create_collation()
 5742 ** with the addition that the xDestroy callback is invoked on pArg when
 5743 ** the collating function is deleted.
 5744 ** ^Collating functions are deleted when they are overridden by later
 5745 ** calls to the collation creation functions or when the
 5746 ** [database connection] is closed using [sqlite3_close()].
 5747 **
 5748 ** ^The xDestroy callback is &lt;u&gt;not&lt;/u&gt; called if the
 5749 ** sqlite3_create_collation_v2() function fails.  Applications that invoke
 5750 ** sqlite3_create_collation_v2() with a non-NULL xDestroy argument should
 5751 ** check the return code and dispose of the application data pointer
 5752 ** themselves rather than expecting SQLite to deal with it for them.
 5753 ** This is different from every other SQLite interface.  The inconsistency
 5754 ** is unfortunate but cannot be changed without breaking backwards
 5755 ** compatibility.
 5756 **
 5757 ** See also:  [sqlite3_collation_needed()] and [sqlite3_collation_needed16()].
 5758 */
</pre>
<hr />
<pre>
 6045 */
 6046 SQLITE_API int sqlite3_get_autocommit(sqlite3*);
 6047 
 6048 /*
 6049 ** CAPI3REF: Find The Database Handle Of A Prepared Statement
 6050 ** METHOD: sqlite3_stmt
 6051 **
 6052 ** ^The sqlite3_db_handle interface returns the [database connection] handle
 6053 ** to which a [prepared statement] belongs.  ^The [database connection]
 6054 ** returned by sqlite3_db_handle is the same [database connection]
 6055 ** that was the first argument
 6056 ** to the [sqlite3_prepare_v2()] call (or its variants) that was used to
 6057 ** create the statement in the first place.
 6058 */
 6059 SQLITE_API sqlite3 *sqlite3_db_handle(sqlite3_stmt*);
 6060 
 6061 /*
 6062 ** CAPI3REF: Return The Filename For A Database Connection
 6063 ** METHOD: sqlite3
 6064 **
<span class="line-modified"> 6065 ** ^The sqlite3_db_filename(D,N) interface returns a pointer to the filename</span>
<span class="line-modified"> 6066 ** associated with database N of connection D.</span>
<span class="line-modified"> 6067 ** ^If there is no attached database N on the database</span>
 6068 ** connection D, or if database N is a temporary or in-memory database, then
 6069 ** this function will return either a NULL pointer or an empty string.
 6070 **
<span class="line-added"> 6071 ** ^The string value returned by this routine is owned and managed by</span>
<span class="line-added"> 6072 ** the database connection.  ^The value will be valid until the database N</span>
<span class="line-added"> 6073 ** is [DETACH]-ed or until the database connection closes.</span>
<span class="line-added"> 6074 **</span>
 6075 ** ^The filename returned by this function is the output of the
 6076 ** xFullPathname method of the [VFS].  ^In other words, the filename
 6077 ** will be an absolute pathname, even if the filename used
 6078 ** to open the database originally was a URI or relative pathname.
<span class="line-added"> 6079 **</span>
<span class="line-added"> 6080 ** If the filename pointer returned by this routine is not NULL, then it</span>
<span class="line-added"> 6081 ** can be used as the filename input parameter to these routines:</span>
<span class="line-added"> 6082 ** &lt;ul&gt;</span>
<span class="line-added"> 6083 ** &lt;li&gt; [sqlite3_uri_parameter()]</span>
<span class="line-added"> 6084 ** &lt;li&gt; [sqlite3_uri_boolean()]</span>
<span class="line-added"> 6085 ** &lt;li&gt; [sqlite3_uri_int64()]</span>
<span class="line-added"> 6086 ** &lt;li&gt; [sqlite3_filename_database()]</span>
<span class="line-added"> 6087 ** &lt;li&gt; [sqlite3_filename_journal()]</span>
<span class="line-added"> 6088 ** &lt;li&gt; [sqlite3_filename_wal()]</span>
<span class="line-added"> 6089 ** &lt;/ul&gt;</span>
 6090 */
 6091 SQLITE_API const char *sqlite3_db_filename(sqlite3 *db, const char *zDbName);
 6092 
 6093 /*
 6094 ** CAPI3REF: Determine if a database is read-only
 6095 ** METHOD: sqlite3
 6096 **
 6097 ** ^The sqlite3_db_readonly(D,N) interface returns 1 if the database N
 6098 ** of connection D is read-only, 0 if it is read/write, or -1 if N is not
 6099 ** the name of a database on connection D.
 6100 */
 6101 SQLITE_API int sqlite3_db_readonly(sqlite3 *db, const char *zDbName);
 6102 
 6103 /*
 6104 ** CAPI3REF: Find the next prepared statement
 6105 ** METHOD: sqlite3
 6106 **
 6107 ** ^This interface returns a pointer to the next [prepared statement] after
 6108 ** pStmt associated with the [database connection] pDb.  ^If pStmt is NULL
 6109 ** then this interface returns a pointer to the first prepared statement
</pre>
<hr />
<pre>
 6219   sqlite3*,
 6220   void(*)(void *,int ,char const *,char const *,sqlite3_int64),
 6221   void*
 6222 );
 6223 
 6224 /*
 6225 ** CAPI3REF: Enable Or Disable Shared Pager Cache
 6226 **
 6227 ** ^(This routine enables or disables the sharing of the database cache
 6228 ** and schema data structures between [database connection | connections]
 6229 ** to the same database. Sharing is enabled if the argument is true
 6230 ** and disabled if the argument is false.)^
 6231 **
 6232 ** ^Cache sharing is enabled and disabled for an entire process.
 6233 ** This is a change as of SQLite [version 3.5.0] ([dateof:3.5.0]).
 6234 ** In prior versions of SQLite,
 6235 ** sharing was enabled or disabled for each thread separately.
 6236 **
 6237 ** ^(The cache sharing mode set by this interface effects all subsequent
 6238 ** calls to [sqlite3_open()], [sqlite3_open_v2()], and [sqlite3_open16()].
<span class="line-modified"> 6239 ** Existing database connections continue to use the sharing mode</span>
 6240 ** that was in effect at the time they were opened.)^
 6241 **
 6242 ** ^(This routine returns [SQLITE_OK] if shared cache was enabled or disabled
 6243 ** successfully.  An [error code] is returned otherwise.)^
 6244 **
<span class="line-modified"> 6245 ** ^Shared cache is disabled by default. It is recommended that it stay</span>
<span class="line-modified"> 6246 ** that way.  In other words, do not use this routine.  This interface</span>
<span class="line-modified"> 6247 ** continues to be provided for historical compatibility, but its use is</span>
<span class="line-added"> 6248 ** discouraged.  Any use of shared cache is discouraged.  If shared cache</span>
<span class="line-added"> 6249 ** must be used, it is recommended that shared cache only be enabled for</span>
<span class="line-added"> 6250 ** individual database connections using the [sqlite3_open_v2()] interface</span>
<span class="line-added"> 6251 ** with the [SQLITE_OPEN_SHAREDCACHE] flag.</span>
 6252 **
 6253 ** Note: This method is disabled on MacOS X 10.7 and iOS version 5.0
 6254 ** and will always return SQLITE_MISUSE. On those systems,
 6255 ** shared cache mode should be enabled per-database connection via
 6256 ** [sqlite3_open_v2()] with [SQLITE_OPEN_SHAREDCACHE].
 6257 **
 6258 ** This interface is threadsafe on processors where writing a
 6259 ** 32-bit integer is atomic.
 6260 **
 6261 ** See Also:  [SQLite Shared-Cache Mode]
 6262 */
 6263 SQLITE_API int sqlite3_enable_shared_cache(int);
 6264 
 6265 /*
 6266 ** CAPI3REF: Attempt To Free Heap Memory
 6267 **
 6268 ** ^The sqlite3_release_memory() interface attempts to free N bytes
 6269 ** of heap memory by deallocating non-essential memory allocations
 6270 ** held by the database library.   Memory used to cache database
 6271 ** pages to improve performance is an example of non-essential memory.
</pre>
<hr />
<pre>
 6278 */
 6279 SQLITE_API int sqlite3_release_memory(int);
 6280 
 6281 /*
 6282 ** CAPI3REF: Free Memory Used By A Database Connection
 6283 ** METHOD: sqlite3
 6284 **
 6285 ** ^The sqlite3_db_release_memory(D) interface attempts to free as much heap
 6286 ** memory as possible from database connection D. Unlike the
 6287 ** [sqlite3_release_memory()] interface, this interface is in effect even
 6288 ** when the [SQLITE_ENABLE_MEMORY_MANAGEMENT] compile-time option is
 6289 ** omitted.
 6290 **
 6291 ** See also: [sqlite3_release_memory()]
 6292 */
 6293 SQLITE_API int sqlite3_db_release_memory(sqlite3*);
 6294 
 6295 /*
 6296 ** CAPI3REF: Impose A Limit On Heap Size
 6297 **
<span class="line-added"> 6298 ** These interfaces impose limits on the amount of heap memory that will be</span>
<span class="line-added"> 6299 ** by all database connections within a single process.</span>
<span class="line-added"> 6300 **</span>
 6301 ** ^The sqlite3_soft_heap_limit64() interface sets and/or queries the
 6302 ** soft limit on the amount of heap memory that may be allocated by SQLite.
 6303 ** ^SQLite strives to keep heap memory utilization below the soft heap
 6304 ** limit by reducing the number of pages held in the page cache
 6305 ** as heap memory usages approaches the limit.
 6306 ** ^The soft heap limit is &quot;soft&quot; because even though SQLite strives to stay
 6307 ** below the limit, it will exceed the limit rather than generate
 6308 ** an [SQLITE_NOMEM] error.  In other words, the soft heap limit
 6309 ** is advisory only.
 6310 **
<span class="line-modified"> 6311 ** ^The sqlite3_hard_heap_limit64(N) interface sets a hard upper bound of</span>
<span class="line-modified"> 6312 ** N bytes on the amount of memory that will be allocated.  ^The</span>
<span class="line-modified"> 6313 ** sqlite3_hard_heap_limit64(N) interface is similar to</span>
<span class="line-modified"> 6314 ** sqlite3_soft_heap_limit64(N) except that memory allocations will fail</span>
<span class="line-modified"> 6315 ** when the hard heap limit is reached.</span>



 6316 **
<span class="line-modified"> 6317 ** ^The return value from both sqlite3_soft_heap_limit64() and</span>
<span class="line-added"> 6318 ** sqlite3_hard_heap_limit64() is the size of</span>
<span class="line-added"> 6319 ** the heap limit prior to the call, or negative in the case of an</span>
<span class="line-added"> 6320 ** error.  ^If the argument N is negative</span>
<span class="line-added"> 6321 ** then no change is made to the heap limit.  Hence, the current</span>
<span class="line-added"> 6322 ** size of heap limits can be determined by invoking</span>
<span class="line-added"> 6323 ** sqlite3_soft_heap_limit64(-1) or sqlite3_hard_heap_limit(-1).</span>
<span class="line-added"> 6324 **</span>
<span class="line-added"> 6325 ** ^Setting the heap limits to zero disables the heap limiter mechanism.</span>
<span class="line-added"> 6326 **</span>
<span class="line-added"> 6327 ** ^The soft heap limit may not be greater than the hard heap limit.</span>
<span class="line-added"> 6328 ** ^If the hard heap limit is enabled and if sqlite3_soft_heap_limit(N)</span>
<span class="line-added"> 6329 ** is invoked with a value of N that is greater than the hard heap limit,</span>
<span class="line-added"> 6330 ** the the soft heap limit is set to the value of the hard heap limit.</span>
<span class="line-added"> 6331 ** ^The soft heap limit is automatically enabled whenever the hard heap</span>
<span class="line-added"> 6332 ** limit is enabled. ^When sqlite3_hard_heap_limit64(N) is invoked and</span>
<span class="line-added"> 6333 ** the soft heap limit is outside the range of 1..N, then the soft heap</span>
<span class="line-added"> 6334 ** limit is set to N.  ^Invoking sqlite3_soft_heap_limit64(0) when the</span>
<span class="line-added"> 6335 ** hard heap limit is enabled makes the soft heap limit equal to the</span>
<span class="line-added"> 6336 ** hard heap limit.</span>
<span class="line-added"> 6337 **</span>
<span class="line-added"> 6338 ** The memory allocation limits can also be adjusted using</span>
<span class="line-added"> 6339 ** [PRAGMA soft_heap_limit] and [PRAGMA hard_heap_limit].</span>
<span class="line-added"> 6340 **</span>
<span class="line-added"> 6341 ** ^(The heap limits are not enforced in the current implementation</span>
 6342 ** if one or more of following conditions are true:
 6343 **
 6344 ** &lt;ul&gt;
<span class="line-modified"> 6345 ** &lt;li&gt; The limit value is set to zero.</span>
 6346 ** &lt;li&gt; Memory accounting is disabled using a combination of the
 6347 **      [sqlite3_config]([SQLITE_CONFIG_MEMSTATUS],...) start-time option and
 6348 **      the [SQLITE_DEFAULT_MEMSTATUS] compile-time option.
 6349 ** &lt;li&gt; An alternative page cache implementation is specified using
 6350 **      [sqlite3_config]([SQLITE_CONFIG_PCACHE2],...).
 6351 ** &lt;li&gt; The page cache allocates from its own memory pool supplied
 6352 **      by [sqlite3_config]([SQLITE_CONFIG_PAGECACHE],...) rather than
 6353 **      from the heap.
 6354 ** &lt;/ul&gt;)^
 6355 **
<span class="line-modified"> 6356 ** The circumstances under which SQLite will enforce the heap limits may</span>











 6357 ** changes in future releases of SQLite.
 6358 */
 6359 SQLITE_API sqlite3_int64 sqlite3_soft_heap_limit64(sqlite3_int64 N);
<span class="line-added"> 6360 SQLITE_API sqlite3_int64 sqlite3_hard_heap_limit64(sqlite3_int64 N);</span>
 6361 
 6362 /*
 6363 ** CAPI3REF: Deprecated Soft Heap Limit Interface
 6364 ** DEPRECATED
 6365 **
 6366 ** This is a deprecated version of the [sqlite3_soft_heap_limit64()]
 6367 ** interface.  This routine is provided for historical compatibility
 6368 ** only.  All new applications should use the
 6369 ** [sqlite3_soft_heap_limit64()] interface rather than this one.
 6370 */
 6371 SQLITE_API SQLITE_DEPRECATED void sqlite3_soft_heap_limit(int N);
 6372 
 6373 
 6374 /*
 6375 ** CAPI3REF: Extract Metadata About A Column Of A Table
 6376 ** METHOD: sqlite3
 6377 **
 6378 ** ^(The sqlite3_table_column_metadata(X,D,T,C,....) routine returns
 6379 ** information about column C of table T in database D
 6380 ** on [database connection] X.)^  ^The sqlite3_table_column_metadata()
 6381 ** interface returns SQLITE_OK and fills in the non-NULL pointers in
 6382 ** the final five arguments with appropriate values if the specified
 6383 ** column exists.  ^The sqlite3_table_column_metadata() interface returns
<span class="line-modified"> 6384 ** SQLITE_ERROR if the specified column does not exist.</span>
 6385 ** ^If the column-name parameter to sqlite3_table_column_metadata() is a
 6386 ** NULL pointer, then this routine simply checks for the existence of the
 6387 ** table and returns SQLITE_OK if the table exists and SQLITE_ERROR if it
 6388 ** does not.  If the table name parameter T in a call to
 6389 ** sqlite3_table_column_metadata(X,D,T,C,...) is NULL then the result is
 6390 ** undefined behavior.
 6391 **
 6392 ** ^The column is identified by the second, third and fourth parameters to
 6393 ** this function. ^(The second parameter is either the name of the database
 6394 ** (i.e. &quot;main&quot;, &quot;temp&quot;, or an attached database) containing the specified
 6395 ** table or NULL.)^ ^If it is NULL, then all attached databases are searched
 6396 ** for the table using the same algorithm used by the database engine to
 6397 ** resolve unqualified table references.
 6398 **
 6399 ** ^The third and fourth parameters to this function are the table and column
 6400 ** name of the desired column, respectively.
 6401 **
 6402 ** ^Metadata is returned by writing to the memory locations passed as the 5th
 6403 ** and subsequent parameters to this function. ^Any of these arguments may be
 6404 ** NULL, in which case the corresponding element of metadata is omitted.
</pre>
<hr />
<pre>
 6506 /*
 6507 ** CAPI3REF: Enable Or Disable Extension Loading
 6508 ** METHOD: sqlite3
 6509 **
 6510 ** ^So as not to open security holes in older applications that are
 6511 ** unprepared to deal with [extension loading], and as a means of disabling
 6512 ** [extension loading] while evaluating user-entered SQL, the following API
 6513 ** is provided to turn the [sqlite3_load_extension()] mechanism on and off.
 6514 **
 6515 ** ^Extension loading is off by default.
 6516 ** ^Call the sqlite3_enable_load_extension() routine with onoff==1
 6517 ** to turn extension loading on and call it with onoff==0 to turn
 6518 ** it back off again.
 6519 **
 6520 ** ^This interface enables or disables both the C-API
 6521 ** [sqlite3_load_extension()] and the SQL function [load_extension()].
 6522 ** ^(Use [sqlite3_db_config](db,[SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION],..)
 6523 ** to enable or disable only the C-API.)^
 6524 **
 6525 ** &lt;b&gt;Security warning:&lt;/b&gt; It is recommended that extension loading
<span class="line-modified"> 6526 ** be enabled using the [SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION] method</span>
 6527 ** rather than this interface, so the [load_extension()] SQL function
 6528 ** remains disabled. This will prevent SQL injections from giving attackers
 6529 ** access to extension loading capabilities.
 6530 */
 6531 SQLITE_API int sqlite3_enable_load_extension(sqlite3 *db, int onoff);
 6532 
 6533 /*
 6534 ** CAPI3REF: Automatically Load Statically Linked Extensions
 6535 **
 6536 ** ^This interface causes the xEntryPoint() function to be invoked for
 6537 ** each new [database connection] that is created.  The idea here is that
 6538 ** xEntryPoint() is the entry point for a statically linked [SQLite extension]
 6539 ** that is to be automatically loaded into all new database connections.
 6540 **
 6541 ** ^(Even though the function prototype shows that xEntryPoint() takes
 6542 ** no arguments and returns void, SQLite invokes xEntryPoint() with three
 6543 ** arguments and expects an integer result as if the signature of the
 6544 ** entry point where as follows:
 6545 **
 6546 ** &lt;blockquote&gt;&lt;pre&gt;
</pre>
<hr />
<pre>
 6593 ** to be experimental.  The interface might change in incompatible ways.
 6594 ** If this is a problem for you, do not use the interface at this time.
 6595 **
 6596 ** When the virtual-table mechanism stabilizes, we will declare the
 6597 ** interface fixed, support it indefinitely, and remove this comment.
 6598 */
 6599 
 6600 /*
 6601 ** Structures used by the virtual table interface
 6602 */
 6603 typedef struct sqlite3_vtab sqlite3_vtab;
 6604 typedef struct sqlite3_index_info sqlite3_index_info;
 6605 typedef struct sqlite3_vtab_cursor sqlite3_vtab_cursor;
 6606 typedef struct sqlite3_module sqlite3_module;
 6607 
 6608 /*
 6609 ** CAPI3REF: Virtual Table Object
 6610 ** KEYWORDS: sqlite3_module {virtual table module}
 6611 **
 6612 ** This structure, sometimes called a &quot;virtual table module&quot;,
<span class="line-modified"> 6613 ** defines the implementation of a [virtual table].</span>
 6614 ** This structure consists mostly of methods for the module.
 6615 **
 6616 ** ^A virtual table module is created by filling in a persistent
 6617 ** instance of this structure and passing a pointer to that instance
 6618 ** to [sqlite3_create_module()] or [sqlite3_create_module_v2()].
 6619 ** ^The registration remains valid until it is replaced by a different
 6620 ** module or until the [database connection] closes.  The content
 6621 ** of this structure must not change while it is registered with
 6622 ** any database connection.
 6623 */
 6624 struct sqlite3_module {
 6625   int iVersion;
 6626   int (*xCreate)(sqlite3*, void *pAux,
 6627                int argc, const char *const*argv,
 6628                sqlite3_vtab **ppVTab, char**);
 6629   int (*xConnect)(sqlite3*, void *pAux,
 6630                int argc, const char *const*argv,
 6631                sqlite3_vtab **ppVTab, char**);
 6632   int (*xBestIndex)(sqlite3_vtab *pVTab, sqlite3_index_info*);
 6633   int (*xDisconnect)(sqlite3_vtab *pVTab);
</pre>
<hr />
<pre>
 6690 **
 6691 ** ^Information about the ORDER BY clause is stored in aOrderBy[].
 6692 ** ^Each term of aOrderBy records a column of the ORDER BY clause.
 6693 **
 6694 ** The colUsed field indicates which columns of the virtual table may be
 6695 ** required by the current scan. Virtual table columns are numbered from
 6696 ** zero in the order in which they appear within the CREATE TABLE statement
 6697 ** passed to sqlite3_declare_vtab(). For the first 63 columns (columns 0-62),
 6698 ** the corresponding bit is set within the colUsed mask if the column may be
 6699 ** required by SQLite. If the table has at least 64 columns and any column
 6700 ** to the right of the first 63 is required, then bit 63 of colUsed is also
 6701 ** set. In other words, column iCol may be required if the expression
 6702 ** (colUsed &amp; ((sqlite3_uint64)1 &lt;&lt; (iCol&gt;=63 ? 63 : iCol))) evaluates to
 6703 ** non-zero.
 6704 **
 6705 ** The [xBestIndex] method must fill aConstraintUsage[] with information
 6706 ** about what parameters to pass to xFilter.  ^If argvIndex&gt;0 then
 6707 ** the right-hand side of the corresponding aConstraint[] is evaluated
 6708 ** and becomes the argvIndex-th entry in argv.  ^(If aConstraintUsage[].omit
 6709 ** is true, then the constraint is assumed to be fully handled by the
<span class="line-modified"> 6710 ** virtual table and might not be checked again by the byte code.)^ ^(The</span>
<span class="line-added"> 6711 ** aConstraintUsage[].omit flag is an optimization hint. When the omit flag</span>
<span class="line-added"> 6712 ** is left in its default setting of false, the constraint will always be</span>
<span class="line-added"> 6713 ** checked separately in byte code.  If the omit flag is change to true, then</span>
<span class="line-added"> 6714 ** the constraint may or may not be checked in byte code.  In other words,</span>
<span class="line-added"> 6715 ** when the omit flag is true there is no guarantee that the constraint will</span>
<span class="line-added"> 6716 ** not be checked again using byte code.)^</span>
 6717 **
 6718 ** ^The idxNum and idxPtr values are recorded and passed into the
 6719 ** [xFilter] method.
 6720 ** ^[sqlite3_free()] is used to free idxPtr if and only if
 6721 ** needToFreeIdxPtr is true.
 6722 **
 6723 ** ^The orderByConsumed means that output from [xFilter]/[xNext] will occur in
 6724 ** the correct order to satisfy the ORDER BY clause so that no separate
 6725 ** sorting step is required.
 6726 **
 6727 ** ^The estimatedCost value is an estimate of the cost of a particular
 6728 ** strategy. A cost of N indicates that the cost of the strategy is similar
 6729 ** to a linear scan of an SQLite table with N rows. A cost of log(N)
 6730 ** indicates that the expense of the operation is similar to that of a
 6731 ** binary search on a unique indexed field of an SQLite table with N rows.
 6732 **
 6733 ** ^The estimatedRows value is an estimate of the number of rows that
 6734 ** will be returned by the strategy.
 6735 **
 6736 ** The xBestIndex method may optionally populate the idxFlags field with a
 6737 ** mask of SQLITE_INDEX_SCAN_* flags. Currently there is only one such flag -
 6738 ** SQLITE_INDEX_SCAN_UNIQUE. If the xBestIndex method sets this flag, SQLite
 6739 ** assumes that the strategy may visit at most one row.
 6740 **
 6741 ** Additionally, if xBestIndex sets the SQLITE_INDEX_SCAN_UNIQUE flag, then
 6742 ** SQLite also assumes that if a call to the xUpdate() method is made as
 6743 ** part of the same statement to delete or update a virtual table row and the
 6744 ** implementation returns SQLITE_CONSTRAINT, then there is no need to rollback
 6745 ** any database changes. In other words, if the xUpdate() returns
 6746 ** SQLITE_CONSTRAINT, the database contents must be exactly as they were
 6747 ** before xUpdate was called. By contrast, if SQLITE_INDEX_SCAN_UNIQUE is not
 6748 ** set and xUpdate returns SQLITE_CONSTRAINT, any database changes made by
 6749 ** the xUpdate method are automatically rolled back by SQLite.
 6750 **
 6751 ** IMPORTANT: The estimatedRows field was added to the sqlite3_index_info
 6752 ** structure for SQLite [version 3.8.2] ([dateof:3.8.2]).
 6753 ** If a virtual table extension is
 6754 ** used with an SQLite version earlier than 3.8.2, the results of attempting
 6755 ** to read or write the estimatedRows field are undefined (but are likely
<span class="line-modified"> 6756 ** to include crashing the application). The estimatedRows field should</span>
 6757 ** therefore only be used if [sqlite3_libversion_number()] returns a
 6758 ** value greater than or equal to 3008002. Similarly, the idxFlags field
 6759 ** was added for [version 3.9.0] ([dateof:3.9.0]).
 6760 ** It may therefore only be used if
 6761 ** sqlite3_libversion_number() returns a value greater than or equal to
 6762 ** 3009000.
 6763 */
 6764 struct sqlite3_index_info {
 6765   /* Inputs */
 6766   int nConstraint;           /* Number of entries in aConstraint */
 6767   struct sqlite3_index_constraint {
 6768      int iColumn;              /* Column constrained.  -1 for ROWID */
 6769      unsigned char op;         /* Constraint operator */
 6770      unsigned char usable;     /* True if this constraint is usable */
 6771      int iTermOffset;          /* Used internally - xBestIndex should ignore */
 6772   } *aConstraint;            /* Table of WHERE clause constraints */
 6773   int nOrderBy;              /* Number of terms in the ORDER BY clause */
 6774   struct sqlite3_index_orderby {
 6775      int iColumn;              /* Column number */
 6776      unsigned char desc;       /* True for DESC.  False for ASC. */
</pre>
<hr />
<pre>
 6788   /* Fields below are only available in SQLite 3.8.2 and later */
 6789   sqlite3_int64 estimatedRows;    /* Estimated number of rows returned */
 6790   /* Fields below are only available in SQLite 3.9.0 and later */
 6791   int idxFlags;              /* Mask of SQLITE_INDEX_SCAN_* flags */
 6792   /* Fields below are only available in SQLite 3.10.0 and later */
 6793   sqlite3_uint64 colUsed;    /* Input: Mask of columns used by statement */
 6794 };
 6795 
 6796 /*
 6797 ** CAPI3REF: Virtual Table Scan Flags
 6798 **
 6799 ** Virtual table implementations are allowed to set the
 6800 ** [sqlite3_index_info].idxFlags field to some combination of
 6801 ** these bits.
 6802 */
 6803 #define SQLITE_INDEX_SCAN_UNIQUE      1     /* Scan visits at most 1 row */
 6804 
 6805 /*
 6806 ** CAPI3REF: Virtual Table Constraint Operator Codes
 6807 **
<span class="line-modified"> 6808 ** These macros define the allowed values for the</span>
 6809 ** [sqlite3_index_info].aConstraint[].op field.  Each value represents
 6810 ** an operator that is part of a constraint term in the wHERE clause of
 6811 ** a query that uses a [virtual table].
 6812 */
 6813 #define SQLITE_INDEX_CONSTRAINT_EQ         2
 6814 #define SQLITE_INDEX_CONSTRAINT_GT         4
 6815 #define SQLITE_INDEX_CONSTRAINT_LE         8
 6816 #define SQLITE_INDEX_CONSTRAINT_LT        16
 6817 #define SQLITE_INDEX_CONSTRAINT_GE        32
 6818 #define SQLITE_INDEX_CONSTRAINT_MATCH     64
 6819 #define SQLITE_INDEX_CONSTRAINT_LIKE      65
 6820 #define SQLITE_INDEX_CONSTRAINT_GLOB      66
 6821 #define SQLITE_INDEX_CONSTRAINT_REGEXP    67
 6822 #define SQLITE_INDEX_CONSTRAINT_NE        68
 6823 #define SQLITE_INDEX_CONSTRAINT_ISNOT     69
 6824 #define SQLITE_INDEX_CONSTRAINT_ISNOTNULL 70
 6825 #define SQLITE_INDEX_CONSTRAINT_ISNULL    71
 6826 #define SQLITE_INDEX_CONSTRAINT_IS        72
 6827 #define SQLITE_INDEX_CONSTRAINT_FUNCTION 150
 6828 
</pre>
<hr />
<pre>
 7398 ** those obtained by the xMutexInit method.  ^The xMutexEnd()
 7399 ** interface is invoked exactly once for each call to [sqlite3_shutdown()].
 7400 **
 7401 ** ^(The remaining seven methods defined by this structure (xMutexAlloc,
 7402 ** xMutexFree, xMutexEnter, xMutexTry, xMutexLeave, xMutexHeld and
 7403 ** xMutexNotheld) implement the following interfaces (respectively):
 7404 **
 7405 ** &lt;ul&gt;
 7406 **   &lt;li&gt;  [sqlite3_mutex_alloc()] &lt;/li&gt;
 7407 **   &lt;li&gt;  [sqlite3_mutex_free()] &lt;/li&gt;
 7408 **   &lt;li&gt;  [sqlite3_mutex_enter()] &lt;/li&gt;
 7409 **   &lt;li&gt;  [sqlite3_mutex_try()] &lt;/li&gt;
 7410 **   &lt;li&gt;  [sqlite3_mutex_leave()] &lt;/li&gt;
 7411 **   &lt;li&gt;  [sqlite3_mutex_held()] &lt;/li&gt;
 7412 **   &lt;li&gt;  [sqlite3_mutex_notheld()] &lt;/li&gt;
 7413 ** &lt;/ul&gt;)^
 7414 **
 7415 ** The only difference is that the public sqlite3_XXX functions enumerated
 7416 ** above silently ignore any invocations that pass a NULL pointer instead
 7417 ** of a valid mutex handle. The implementations of the methods defined
<span class="line-modified"> 7418 ** by this structure are not required to handle this case. The results</span>
 7419 ** of passing a NULL pointer instead of a valid mutex handle are undefined
 7420 ** (i.e. it is acceptable to provide an implementation that segfaults if
 7421 ** it is passed a NULL pointer).
 7422 **
 7423 ** The xMutexInit() method must be threadsafe.  It must be harmless to
 7424 ** invoke xMutexInit() multiple times within the same process and without
 7425 ** intervening calls to xMutexEnd().  Second and subsequent calls to
 7426 ** xMutexInit() must be no-ops.
 7427 **
 7428 ** xMutexInit() must not use SQLite memory allocation ([sqlite3_malloc()]
 7429 ** and its associates).  Similarly, xMutexAlloc() must not use SQLite memory
 7430 ** allocation for a static mutex.  ^However xMutexAlloc() may use SQLite
 7431 ** memory allocation for a fast or recursive mutex.
 7432 **
 7433 ** ^SQLite will invoke the xMutexEnd() method when [sqlite3_shutdown()] is
 7434 ** called, but only if the prior call to xMutexInit returned SQLITE_OK.
 7435 ** If xMutexInit fails in any way, it is expected to clean up after itself
 7436 ** prior to returning.
 7437 */
 7438 typedef struct sqlite3_mutex_methods sqlite3_mutex_methods;
</pre>
<hr />
<pre>
 7871 ** currently checked out.&lt;/dd&gt;)^
 7872 **
 7873 ** [[SQLITE_STATUS_PAGECACHE_USED]] ^(&lt;dt&gt;SQLITE_STATUS_PAGECACHE_USED&lt;/dt&gt;
 7874 ** &lt;dd&gt;This parameter returns the number of pages used out of the
 7875 ** [pagecache memory allocator] that was configured using
 7876 ** [SQLITE_CONFIG_PAGECACHE].  The
 7877 ** value returned is in pages, not in bytes.&lt;/dd&gt;)^
 7878 **
 7879 ** [[SQLITE_STATUS_PAGECACHE_OVERFLOW]]
 7880 ** ^(&lt;dt&gt;SQLITE_STATUS_PAGECACHE_OVERFLOW&lt;/dt&gt;
 7881 ** &lt;dd&gt;This parameter returns the number of bytes of page cache
 7882 ** allocation which could not be satisfied by the [SQLITE_CONFIG_PAGECACHE]
 7883 ** buffer and where forced to overflow to [sqlite3_malloc()].  The
 7884 ** returned value includes allocations that overflowed because they
 7885 ** where too large (they were larger than the &quot;sz&quot; parameter to
 7886 ** [SQLITE_CONFIG_PAGECACHE]) and allocations that overflowed because
 7887 ** no space was left in the page cache.&lt;/dd&gt;)^
 7888 **
 7889 ** [[SQLITE_STATUS_PAGECACHE_SIZE]] ^(&lt;dt&gt;SQLITE_STATUS_PAGECACHE_SIZE&lt;/dt&gt;
 7890 ** &lt;dd&gt;This parameter records the largest memory allocation request
<span class="line-modified"> 7891 ** handed to the [pagecache memory allocator].  Only the value returned in the</span>
 7892 ** *pHighwater parameter to [sqlite3_status()] is of interest.
 7893 ** The value written into the *pCurrent parameter is undefined.&lt;/dd&gt;)^
 7894 **
 7895 ** [[SQLITE_STATUS_SCRATCH_USED]] &lt;dt&gt;SQLITE_STATUS_SCRATCH_USED&lt;/dt&gt;
 7896 ** &lt;dd&gt;No longer used.&lt;/dd&gt;
 7897 **
 7898 ** [[SQLITE_STATUS_SCRATCH_OVERFLOW]] ^(&lt;dt&gt;SQLITE_STATUS_SCRATCH_OVERFLOW&lt;/dt&gt;
 7899 ** &lt;dd&gt;No longer used.&lt;/dd&gt;
 7900 **
 7901 ** [[SQLITE_STATUS_SCRATCH_SIZE]] &lt;dt&gt;SQLITE_STATUS_SCRATCH_SIZE&lt;/dt&gt;
 7902 ** &lt;dd&gt;No longer used.&lt;/dd&gt;
 7903 **
 7904 ** [[SQLITE_STATUS_PARSER_STACK]] ^(&lt;dt&gt;SQLITE_STATUS_PARSER_STACK&lt;/dt&gt;
 7905 ** &lt;dd&gt;The *pHighwater parameter records the deepest parser stack.
 7906 ** The *pCurrent value is undefined.  The *pHighwater value is only
 7907 ** meaningful if SQLite is compiled with [YYTRACKMAXSTACKDEPTH].&lt;/dd&gt;)^
 7908 ** &lt;/dl&gt;
 7909 **
 7910 ** New status parameters may be added from time to time.
 7911 */
</pre>
<hr />
<pre>
 7947 
 7948 /*
 7949 ** CAPI3REF: Status Parameters for database connections
 7950 ** KEYWORDS: {SQLITE_DBSTATUS options}
 7951 **
 7952 ** These constants are the available integer &quot;verbs&quot; that can be passed as
 7953 ** the second argument to the [sqlite3_db_status()] interface.
 7954 **
 7955 ** New verbs may be added in future releases of SQLite. Existing verbs
 7956 ** might be discontinued. Applications should check the return code from
 7957 ** [sqlite3_db_status()] to make sure that the call worked.
 7958 ** The [sqlite3_db_status()] interface will return a non-zero error code
 7959 ** if a discontinued or unsupported verb is invoked.
 7960 **
 7961 ** &lt;dl&gt;
 7962 ** [[SQLITE_DBSTATUS_LOOKASIDE_USED]] ^(&lt;dt&gt;SQLITE_DBSTATUS_LOOKASIDE_USED&lt;/dt&gt;
 7963 ** &lt;dd&gt;This parameter returns the number of lookaside memory slots currently
 7964 ** checked out.&lt;/dd&gt;)^
 7965 **
 7966 ** [[SQLITE_DBSTATUS_LOOKASIDE_HIT]] ^(&lt;dt&gt;SQLITE_DBSTATUS_LOOKASIDE_HIT&lt;/dt&gt;
<span class="line-modified"> 7967 ** &lt;dd&gt;This parameter returns the number of malloc attempts that were</span>
 7968 ** satisfied using lookaside memory. Only the high-water value is meaningful;
 7969 ** the current value is always zero.)^
 7970 **
 7971 ** [[SQLITE_DBSTATUS_LOOKASIDE_MISS_SIZE]]
 7972 ** ^(&lt;dt&gt;SQLITE_DBSTATUS_LOOKASIDE_MISS_SIZE&lt;/dt&gt;
 7973 ** &lt;dd&gt;This parameter returns the number malloc attempts that might have
 7974 ** been satisfied using lookaside memory but failed due to the amount of
 7975 ** memory requested being larger than the lookaside slot size.
 7976 ** Only the high-water value is meaningful;
 7977 ** the current value is always zero.)^
 7978 **
 7979 ** [[SQLITE_DBSTATUS_LOOKASIDE_MISS_FULL]]
 7980 ** ^(&lt;dt&gt;SQLITE_DBSTATUS_LOOKASIDE_MISS_FULL&lt;/dt&gt;
 7981 ** &lt;dd&gt;This parameter returns the number malloc attempts that might have
 7982 ** been satisfied using lookaside memory but failed due to all lookaside
 7983 ** memory already being in use.
 7984 ** Only the high-water value is meaningful;
 7985 ** the current value is always zero.)^
 7986 **
 7987 ** [[SQLITE_DBSTATUS_CACHE_USED]] ^(&lt;dt&gt;SQLITE_DBSTATUS_CACHE_USED&lt;/dt&gt;
</pre>
<hr />
<pre>
 8029 ** is always 0.
 8030 ** &lt;/dd&gt;
 8031 **
 8032 ** [[SQLITE_DBSTATUS_CACHE_WRITE]] ^(&lt;dt&gt;SQLITE_DBSTATUS_CACHE_WRITE&lt;/dt&gt;
 8033 ** &lt;dd&gt;This parameter returns the number of dirty cache entries that have
 8034 ** been written to disk. Specifically, the number of pages written to the
 8035 ** wal file in wal mode databases, or the number of pages written to the
 8036 ** database file in rollback mode databases. Any pages written as part of
 8037 ** transaction rollback or database recovery operations are not included.
 8038 ** If an IO or other error occurs while writing a page to disk, the effect
 8039 ** on subsequent SQLITE_DBSTATUS_CACHE_WRITE requests is undefined.)^ ^The
 8040 ** highwater mark associated with SQLITE_DBSTATUS_CACHE_WRITE is always 0.
 8041 ** &lt;/dd&gt;
 8042 **
 8043 ** [[SQLITE_DBSTATUS_CACHE_SPILL]] ^(&lt;dt&gt;SQLITE_DBSTATUS_CACHE_SPILL&lt;/dt&gt;
 8044 ** &lt;dd&gt;This parameter returns the number of dirty cache entries that have
 8045 ** been written to disk in the middle of a transaction due to the page
 8046 ** cache overflowing. Transactions are more efficient if they are written
 8047 ** to disk all at once. When pages spill mid-transaction, that introduces
 8048 ** additional overhead. This parameter can be used help identify
<span class="line-modified"> 8049 ** inefficiencies that can be resolved by increasing the cache size.</span>
 8050 ** &lt;/dd&gt;
 8051 **
 8052 ** [[SQLITE_DBSTATUS_DEFERRED_FKS]] ^(&lt;dt&gt;SQLITE_DBSTATUS_DEFERRED_FKS&lt;/dt&gt;
 8053 ** &lt;dd&gt;This parameter returns zero for the current value if and only if
 8054 ** all foreign key constraints (deferred or immediate) have been
 8055 ** resolved.)^  ^The highwater mark is always 0.
 8056 ** &lt;/dd&gt;
 8057 ** &lt;/dl&gt;
 8058 */
 8059 #define SQLITE_DBSTATUS_LOOKASIDE_USED       0
 8060 #define SQLITE_DBSTATUS_CACHE_USED           1
 8061 #define SQLITE_DBSTATUS_SCHEMA_USED          2
 8062 #define SQLITE_DBSTATUS_STMT_USED            3
 8063 #define SQLITE_DBSTATUS_LOOKASIDE_HIT        4
 8064 #define SQLITE_DBSTATUS_LOOKASIDE_MISS_SIZE  5
 8065 #define SQLITE_DBSTATUS_LOOKASIDE_MISS_FULL  6
 8066 #define SQLITE_DBSTATUS_CACHE_HIT            7
 8067 #define SQLITE_DBSTATUS_CACHE_MISS           8
 8068 #define SQLITE_DBSTATUS_CACHE_WRITE          9
 8069 #define SQLITE_DBSTATUS_DEFERRED_FKS        10
</pre>
<hr />
<pre>
 8118 ** A non-zero value in this counter may indicate an opportunity to
 8119 ** improvement performance through careful use of indices.&lt;/dd&gt;
 8120 **
 8121 ** [[SQLITE_STMTSTATUS_AUTOINDEX]] &lt;dt&gt;SQLITE_STMTSTATUS_AUTOINDEX&lt;/dt&gt;
 8122 ** &lt;dd&gt;^This is the number of rows inserted into transient indices that
 8123 ** were created automatically in order to help joins run faster.
 8124 ** A non-zero value in this counter may indicate an opportunity to
 8125 ** improvement performance by adding permanent indices that do not
 8126 ** need to be reinitialized each time the statement is run.&lt;/dd&gt;
 8127 **
 8128 ** [[SQLITE_STMTSTATUS_VM_STEP]] &lt;dt&gt;SQLITE_STMTSTATUS_VM_STEP&lt;/dt&gt;
 8129 ** &lt;dd&gt;^This is the number of virtual machine operations executed
 8130 ** by the prepared statement if that number is less than or equal
 8131 ** to 2147483647.  The number of virtual machine operations can be
 8132 ** used as a proxy for the total work done by the prepared statement.
 8133 ** If the number of virtual machine operations exceeds 2147483647
 8134 ** then the value returned by this statement status code is undefined.
 8135 **
 8136 ** [[SQLITE_STMTSTATUS_REPREPARE]] &lt;dt&gt;SQLITE_STMTSTATUS_REPREPARE&lt;/dt&gt;
 8137 ** &lt;dd&gt;^This is the number of times that the prepare statement has been
<span class="line-modified"> 8138 ** automatically regenerated due to schema changes or changes to</span>
 8139 ** [bound parameters] that might affect the query plan.
 8140 **
 8141 ** [[SQLITE_STMTSTATUS_RUN]] &lt;dt&gt;SQLITE_STMTSTATUS_RUN&lt;/dt&gt;
 8142 ** &lt;dd&gt;^This is the number of times that the prepared statement has
 8143 ** been run.  A single &quot;run&quot; for the purposes of this counter is one
 8144 ** or more calls to [sqlite3_step()] followed by a call to [sqlite3_reset()].
 8145 ** The counter is incremented on the first [sqlite3_step()] call of each
 8146 ** cycle.
 8147 **
 8148 ** [[SQLITE_STMTSTATUS_MEMUSED]] &lt;dt&gt;SQLITE_STMTSTATUS_MEMUSED&lt;/dt&gt;
 8149 ** &lt;dd&gt;^This is the approximate number of bytes of heap memory
 8150 ** used to store the prepared statement.  ^This value is not actually
 8151 ** a counter, and so the resetFlg parameter to sqlite3_stmt_status()
 8152 ** is ignored when the opcode is SQLITE_STMTSTATUS_MEMUSED.
 8153 ** &lt;/dd&gt;
 8154 ** &lt;/dl&gt;
 8155 */
 8156 #define SQLITE_STMTSTATUS_FULLSCAN_STEP     1
 8157 #define SQLITE_STMTSTATUS_SORT              2
 8158 #define SQLITE_STMTSTATUS_AUTOINDEX         3
</pre>
<hr />
<pre>
 8289 ** is 1.  After it has been retrieved using xFetch, the page is considered
 8290 ** to be &quot;pinned&quot;.
 8291 **
 8292 ** If the requested page is already in the page cache, then the page cache
 8293 ** implementation must return a pointer to the page buffer with its content
 8294 ** intact.  If the requested page is not already in the cache, then the
 8295 ** cache implementation should use the value of the createFlag
 8296 ** parameter to help it determined what action to take:
 8297 **
 8298 ** &lt;table border=1 width=85% align=center&gt;
 8299 ** &lt;tr&gt;&lt;th&gt; createFlag &lt;th&gt; Behavior when page is not already in cache
 8300 ** &lt;tr&gt;&lt;td&gt; 0 &lt;td&gt; Do not allocate a new page.  Return NULL.
 8301 ** &lt;tr&gt;&lt;td&gt; 1 &lt;td&gt; Allocate a new page if it easy and convenient to do so.
 8302 **                 Otherwise return NULL.
 8303 ** &lt;tr&gt;&lt;td&gt; 2 &lt;td&gt; Make every effort to allocate a new page.  Only return
 8304 **                 NULL if allocating a new page is effectively impossible.
 8305 ** &lt;/table&gt;
 8306 **
 8307 ** ^(SQLite will normally invoke xFetch() with a createFlag of 0 or 1.  SQLite
 8308 ** will only use a createFlag of 2 after a prior call with a createFlag of 1
<span class="line-modified"> 8309 ** failed.)^  In between the xFetch() calls, SQLite may</span>
 8310 ** attempt to unpin one or more cache pages by spilling the content of
 8311 ** pinned pages to disk and synching the operating system disk cache.
 8312 **
 8313 ** [[the xUnpin() page cache method]]
 8314 ** ^xUnpin() is called by SQLite with a pointer to a currently pinned page
 8315 ** as its second argument.  If the third parameter, discard, is non-zero,
 8316 ** then the page must be evicted from the cache.
 8317 ** ^If the discard parameter is
 8318 ** zero, then the page may be discarded or retained at the discretion of
 8319 ** page cache implementation. ^The page cache implementation
 8320 ** may choose to evict unpinned pages at any time.
 8321 **
 8322 ** The cache must not perform any reference counting. A single
 8323 ** call to xUnpin() unpins the page regardless of the number of prior calls
 8324 ** to xFetch().
 8325 **
 8326 ** [[the xRekey() page cache methods]]
 8327 ** The xRekey() method is used to change the key value associated with the
 8328 ** page passed as the second argument. If the cache
 8329 ** previously contains an entry associated with newKey, it must be
</pre>
<hr />
<pre>
 8607 ** [SQLite Shared-Cache Mode] for a description of shared-cache locking.
 8608 ** ^This API may be used to register a callback that SQLite will invoke
 8609 ** when the connection currently holding the required lock relinquishes it.
 8610 ** ^This API is only available if the library was compiled with the
 8611 ** [SQLITE_ENABLE_UNLOCK_NOTIFY] C-preprocessor symbol defined.
 8612 **
 8613 ** See Also: [Using the SQLite Unlock Notification Feature].
 8614 **
 8615 ** ^Shared-cache locks are released when a database connection concludes
 8616 ** its current transaction, either by committing it or rolling it back.
 8617 **
 8618 ** ^When a connection (known as the blocked connection) fails to obtain a
 8619 ** shared-cache lock and SQLITE_LOCKED is returned to the caller, the
 8620 ** identity of the database connection (the blocking connection) that
 8621 ** has locked the required resource is stored internally. ^After an
 8622 ** application receives an SQLITE_LOCKED error, it may call the
 8623 ** sqlite3_unlock_notify() method with the blocked connection handle as
 8624 ** the first argument to register for a callback that will be invoked
 8625 ** when the blocking connections current transaction is concluded. ^The
 8626 ** callback is invoked from within the [sqlite3_step] or [sqlite3_close]
<span class="line-modified"> 8627 ** call that concludes the blocking connection&#39;s transaction.</span>
 8628 **
 8629 ** ^(If sqlite3_unlock_notify() is called in a multi-threaded application,
 8630 ** there is a chance that the blocking connection will have already
 8631 ** concluded its transaction by the time sqlite3_unlock_notify() is invoked.
 8632 ** If this happens, then the specified callback is invoked immediately,
 8633 ** from within the call to sqlite3_unlock_notify().)^
 8634 **
 8635 ** ^If the blocked connection is attempting to obtain a write-lock on a
 8636 ** shared-cache table, and more than one other connection currently holds
 8637 ** a read-lock on the same table, then SQLite arbitrarily selects one of
 8638 ** the other connections to use as the blocking connection.
 8639 **
 8640 ** ^(There may be at most one unlock-notify callback registered by a
 8641 ** blocked connection. If sqlite3_unlock_notify() is called when the
 8642 ** blocked connection already has a registered unlock-notify callback,
 8643 ** then the new callback replaces the old.)^ ^If sqlite3_unlock_notify() is
 8644 ** called with a NULL pointer as its second argument, then any existing
 8645 ** unlock-notify callback is canceled. ^The blocked connections
 8646 ** unlock-notify callback may also be canceled by closing the blocked
 8647 ** connection using [sqlite3_close()].
 8648 **
 8649 ** The unlock-notify callback is not reentrant. If an application invokes
 8650 ** any sqlite3_xxx API functions from within an unlock-notify callback, a
 8651 ** crash or deadlock may be the result.
 8652 **
 8653 ** ^Unless deadlock is detected (see below), sqlite3_unlock_notify() always
 8654 ** returns SQLITE_OK.
 8655 **
 8656 ** &lt;b&gt;Callback Invocation Details&lt;/b&gt;
 8657 **
 8658 ** When an unlock-notify callback is registered, the application provides a
 8659 ** single void* pointer that is passed to the callback when it is invoked.
 8660 ** However, the signature of the callback function allows SQLite to pass
 8661 ** it an array of void* context pointers. The first argument passed to
 8662 ** an unlock-notify callback is a pointer to an array of void* pointers,
 8663 ** and the second is the number of entries in the array.
 8664 **
<span class="line-modified"> 8665 ** When a blocking connection&#39;s transaction is concluded, there may be</span>
 8666 ** more than one blocked connection that has registered for an unlock-notify
 8667 ** callback. ^If two or more such blocked connections have specified the
 8668 ** same callback function, then instead of invoking the callback function
 8669 ** multiple times, it is invoked once with the set of void* context pointers
 8670 ** specified by the blocked connections bundled together into an array.
 8671 ** This gives the application an opportunity to prioritize any actions
 8672 ** related to the set of unblocked database connections.
 8673 **
 8674 ** &lt;b&gt;Deadlock Detection&lt;/b&gt;
 8675 **
 8676 ** Assuming that after registering for an unlock-notify callback a
 8677 ** database waits for the callback to be issued before taking any further
 8678 ** action (a reasonable assumption), then using this API may cause the
 8679 ** application to deadlock. For example, if connection X is waiting for
 8680 ** connection Y&#39;s transaction to be concluded, and similarly connection
 8681 ** Y is waiting on connection X&#39;s transaction, then neither connection
 8682 ** will proceed and the system may remain deadlocked indefinitely.
 8683 **
 8684 ** To avoid this scenario, the sqlite3_unlock_notify() performs deadlock
 8685 ** detection. ^If a given call to sqlite3_unlock_notify() would put the
</pre>
<hr />
<pre>
 8993 ** These constants define all valid values for the &quot;checkpoint mode&quot; passed
 8994 ** as the third parameter to the [sqlite3_wal_checkpoint_v2()] interface.
 8995 ** See the [sqlite3_wal_checkpoint_v2()] documentation for details on the
 8996 ** meaning of each of these checkpoint modes.
 8997 */
 8998 #define SQLITE_CHECKPOINT_PASSIVE  0  /* Do as much as possible w/o blocking */
 8999 #define SQLITE_CHECKPOINT_FULL     1  /* Wait for writers, then checkpoint */
 9000 #define SQLITE_CHECKPOINT_RESTART  2  /* Like FULL but wait for for readers */
 9001 #define SQLITE_CHECKPOINT_TRUNCATE 3  /* Like RESTART but also truncate WAL */
 9002 
 9003 /*
 9004 ** CAPI3REF: Virtual Table Interface Configuration
 9005 **
 9006 ** This function may be called by either the [xConnect] or [xCreate] method
 9007 ** of a [virtual table] implementation to configure
 9008 ** various facets of the virtual table interface.
 9009 **
 9010 ** If this interface is invoked outside the context of an xConnect or
 9011 ** xCreate virtual table method then the behavior is undefined.
 9012 **
<span class="line-modified"> 9013 ** In the call sqlite3_vtab_config(D,C,...) the D parameter is the</span>
<span class="line-modified"> 9014 ** [database connection] in which the virtual table is being created and</span>
<span class="line-modified"> 9015 ** which is passed in as the first argument to the [xConnect] or [xCreate]</span>
<span class="line-added"> 9016 ** method that is invoking sqlite3_vtab_config().  The C parameter is one</span>
<span class="line-added"> 9017 ** of the [virtual table configuration options].  The presence and meaning</span>
<span class="line-added"> 9018 ** of parameters after C depend on which [virtual table configuration option]</span>
<span class="line-added"> 9019 ** is used.</span>
 9020 */
 9021 SQLITE_API int sqlite3_vtab_config(sqlite3*, int op, ...);
 9022 
 9023 /*
 9024 ** CAPI3REF: Virtual Table Configuration Options
<span class="line-added"> 9025 ** KEYWORDS: {virtual table configuration options}</span>
<span class="line-added"> 9026 ** KEYWORDS: {virtual table configuration option}</span>
 9027 **
 9028 ** These macros define the various options to the
 9029 ** [sqlite3_vtab_config()] interface that [virtual table] implementations
 9030 ** can use to customize and optimize their behavior.
 9031 **
 9032 ** &lt;dl&gt;
 9033 ** [[SQLITE_VTAB_CONSTRAINT_SUPPORT]]
<span class="line-modified"> 9034 ** &lt;dt&gt;SQLITE_VTAB_CONSTRAINT_SUPPORT&lt;/dt&gt;</span>
 9035 ** &lt;dd&gt;Calls of the form
 9036 ** [sqlite3_vtab_config](db,SQLITE_VTAB_CONSTRAINT_SUPPORT,X) are supported,
 9037 ** where X is an integer.  If X is zero, then the [virtual table] whose
 9038 ** [xCreate] or [xConnect] method invoked [sqlite3_vtab_config()] does not
 9039 ** support constraints.  In this configuration (which is the default) if
 9040 ** a call to the [xUpdate] method returns [SQLITE_CONSTRAINT], then the entire
 9041 ** statement is rolled back as if [ON CONFLICT | OR ABORT] had been
 9042 ** specified as part of the users SQL statement, regardless of the actual
 9043 ** ON CONFLICT mode specified.
 9044 **
 9045 ** If X is non-zero, then the virtual table implementation guarantees
 9046 ** that if [xUpdate] returns [SQLITE_CONSTRAINT], it will do so before
 9047 ** any modifications to internal or persistent data structures have been made.
 9048 ** If the [ON CONFLICT] mode is ABORT, FAIL, IGNORE or ROLLBACK, SQLite
 9049 ** is able to roll back a statement or database transaction, and abandon
 9050 ** or continue processing the current SQL statement as appropriate.
 9051 ** If the ON CONFLICT mode is REPLACE and the [xUpdate] method returns
 9052 ** [SQLITE_CONSTRAINT], SQLite handles this as if the ON CONFLICT mode
 9053 ** had been ABORT.
 9054 **
 9055 ** Virtual table implementations that are required to handle OR REPLACE
 9056 ** must do so within the [xUpdate] method. If a call to the
 9057 ** [sqlite3_vtab_on_conflict()] function indicates that the current ON
 9058 ** CONFLICT policy is REPLACE, the virtual table implementation should
 9059 ** silently replace the appropriate rows within the xUpdate callback and
 9060 ** return SQLITE_OK. Or, if this is not possible, it may return
 9061 ** SQLITE_CONSTRAINT, in which case SQLite falls back to OR ABORT
 9062 ** constraint handling.
<span class="line-added"> 9063 ** &lt;/dd&gt;</span>
<span class="line-added"> 9064 **</span>
<span class="line-added"> 9065 ** [[SQLITE_VTAB_DIRECTONLY]]&lt;dt&gt;SQLITE_VTAB_DIRECTONLY&lt;/dt&gt;</span>
<span class="line-added"> 9066 ** &lt;dd&gt;Calls of the form</span>
<span class="line-added"> 9067 ** [sqlite3_vtab_config](db,SQLITE_VTAB_DIRECTONLY) from within the</span>
<span class="line-added"> 9068 ** the [xConnect] or [xCreate] methods of a [virtual table] implmentation</span>
<span class="line-added"> 9069 ** prohibits that virtual table from being used from within triggers and</span>
<span class="line-added"> 9070 ** views.</span>
<span class="line-added"> 9071 ** &lt;/dd&gt;</span>
<span class="line-added"> 9072 **</span>
<span class="line-added"> 9073 ** [[SQLITE_VTAB_INNOCUOUS]]&lt;dt&gt;SQLITE_VTAB_INNOCUOUS&lt;/dt&gt;</span>
<span class="line-added"> 9074 ** &lt;dd&gt;Calls of the form</span>
<span class="line-added"> 9075 ** [sqlite3_vtab_config](db,SQLITE_VTAB_INNOCUOUS) from within the</span>
<span class="line-added"> 9076 ** the [xConnect] or [xCreate] methods of a [virtual table] implmentation</span>
<span class="line-added"> 9077 ** identify that virtual table as being safe to use from within triggers</span>
<span class="line-added"> 9078 ** and views.  Conceptually, the SQLITE_VTAB_INNOCUOUS tag means that the</span>
<span class="line-added"> 9079 ** virtual table can do no serious harm even if it is controlled by a</span>
<span class="line-added"> 9080 ** malicious hacker.  Developers should avoid setting the SQLITE_VTAB_INNOCUOUS</span>
<span class="line-added"> 9081 ** flag unless absolutely necessary.</span>
<span class="line-added"> 9082 ** &lt;/dd&gt;</span>
 9083 ** &lt;/dl&gt;
 9084 */
 9085 #define SQLITE_VTAB_CONSTRAINT_SUPPORT 1
<span class="line-added"> 9086 #define SQLITE_VTAB_INNOCUOUS          2</span>
<span class="line-added"> 9087 #define SQLITE_VTAB_DIRECTONLY         3</span>
 9088 
 9089 /*
 9090 ** CAPI3REF: Determine The Virtual Table Conflict Policy
 9091 **
 9092 ** This function may only be called from within a call to the [xUpdate] method
 9093 ** of a [virtual table] implementation for an INSERT or UPDATE operation. ^The
 9094 ** value returned is one of [SQLITE_ROLLBACK], [SQLITE_IGNORE], [SQLITE_FAIL],
 9095 ** [SQLITE_ABORT], or [SQLITE_REPLACE], according to the [ON CONFLICT] mode
 9096 ** of the SQL statement that triggered the call to the [xUpdate] method of the
 9097 ** [virtual table].
 9098 */
 9099 SQLITE_API int sqlite3_vtab_on_conflict(sqlite3 *);
 9100 
 9101 /*
 9102 ** CAPI3REF: Determine If Virtual Table Column Access Is For UPDATE
 9103 **
 9104 ** If the sqlite3_vtab_nochange(X) routine is called within the [xColumn]
 9105 ** method of a [virtual table], then it returns true if and only if the
 9106 ** column is being fetched as part of an UPDATE operation during which the
 9107 ** column value will not change.  Applications might use this to substitute
</pre>
<hr />
<pre>
 9147 #define SQLITE_ROLLBACK 1
 9148 /* #define SQLITE_IGNORE 2 // Also used by sqlite3_authorizer() callback */
 9149 #define SQLITE_FAIL     3
 9150 /* #define SQLITE_ABORT 4  // Also an error code */
 9151 #define SQLITE_REPLACE  5
 9152 
 9153 /*
 9154 ** CAPI3REF: Prepared Statement Scan Status Opcodes
 9155 ** KEYWORDS: {scanstatus options}
 9156 **
 9157 ** The following constants can be used for the T parameter to the
 9158 ** [sqlite3_stmt_scanstatus(S,X,T,V)] interface.  Each constant designates a
 9159 ** different metric for sqlite3_stmt_scanstatus() to return.
 9160 **
 9161 ** When the value returned to V is a string, space to hold that string is
 9162 ** managed by the prepared statement S and will be automatically freed when
 9163 ** S is finalized.
 9164 **
 9165 ** &lt;dl&gt;
 9166 ** [[SQLITE_SCANSTAT_NLOOP]] &lt;dt&gt;SQLITE_SCANSTAT_NLOOP&lt;/dt&gt;
<span class="line-modified"> 9167 ** &lt;dd&gt;^The [sqlite3_int64] variable pointed to by the V parameter will be</span>
 9168 ** set to the total number of times that the X-th loop has run.&lt;/dd&gt;
 9169 **
 9170 ** [[SQLITE_SCANSTAT_NVISIT]] &lt;dt&gt;SQLITE_SCANSTAT_NVISIT&lt;/dt&gt;
<span class="line-modified"> 9171 ** &lt;dd&gt;^The [sqlite3_int64] variable pointed to by the V parameter will be set</span>
 9172 ** to the total number of rows examined by all iterations of the X-th loop.&lt;/dd&gt;
 9173 **
 9174 ** [[SQLITE_SCANSTAT_EST]] &lt;dt&gt;SQLITE_SCANSTAT_EST&lt;/dt&gt;
<span class="line-modified"> 9175 ** &lt;dd&gt;^The &quot;double&quot; variable pointed to by the V parameter will be set to the</span>
 9176 ** query planner&#39;s estimate for the average number of rows output from each
 9177 ** iteration of the X-th loop.  If the query planner&#39;s estimates was accurate,
 9178 ** then this value will approximate the quotient NVISIT/NLOOP and the
 9179 ** product of this value for all prior loops with the same SELECTID will
 9180 ** be the NLOOP value for the current loop.
 9181 **
 9182 ** [[SQLITE_SCANSTAT_NAME]] &lt;dt&gt;SQLITE_SCANSTAT_NAME&lt;/dt&gt;
<span class="line-modified"> 9183 ** &lt;dd&gt;^The &quot;const char *&quot; variable pointed to by the V parameter will be set</span>
 9184 ** to a zero-terminated UTF-8 string containing the name of the index or table
 9185 ** used for the X-th loop.
 9186 **
 9187 ** [[SQLITE_SCANSTAT_EXPLAIN]] &lt;dt&gt;SQLITE_SCANSTAT_EXPLAIN&lt;/dt&gt;
<span class="line-modified"> 9188 ** &lt;dd&gt;^The &quot;const char *&quot; variable pointed to by the V parameter will be set</span>
 9189 ** to a zero-terminated UTF-8 string containing the [EXPLAIN QUERY PLAN]
 9190 ** description for the X-th loop.
 9191 **
 9192 ** [[SQLITE_SCANSTAT_SELECTID]] &lt;dt&gt;SQLITE_SCANSTAT_SELECT&lt;/dt&gt;
<span class="line-modified"> 9193 ** &lt;dd&gt;^The &quot;int&quot; variable pointed to by the V parameter will be set to the</span>
 9194 ** &quot;select-id&quot; for the X-th loop.  The select-id identifies which query or
 9195 ** subquery the loop is part of.  The main query has a select-id of zero.
 9196 ** The select-id is the same value as is output in the first column
 9197 ** of an [EXPLAIN QUERY PLAN] query.
 9198 ** &lt;/dl&gt;
 9199 */
 9200 #define SQLITE_SCANSTAT_NLOOP    0
 9201 #define SQLITE_SCANSTAT_NVISIT   1
 9202 #define SQLITE_SCANSTAT_EST      2
 9203 #define SQLITE_SCANSTAT_NAME     3
 9204 #define SQLITE_SCANSTAT_EXPLAIN  4
 9205 #define SQLITE_SCANSTAT_SELECTID 5
 9206 
 9207 /*
 9208 ** CAPI3REF: Prepared Statement Scan Status
 9209 ** METHOD: sqlite3_stmt
 9210 **
 9211 ** This interface returns information about the predicted and measured
 9212 ** performance for pStmt.  Advanced applications can use this
 9213 ** interface to compare the predicted and the measured performance and
</pre>
<hr />
<pre>
10028 ** conflict-handler callback) then the X&#39;&#39; value is returned. The application
10029 ** must translate X&#39;&#39; to NULL itself if required.
10030 **
10031 ** Legacy (older than 3.22.0) versions of the sessions module cannot capture
10032 ** changes made to the sqlite_stat1 table. Legacy versions of the
10033 ** sqlite3changeset_apply() function silently ignore any modifications to the
10034 ** sqlite_stat1 table that are part of a changeset or patchset.
10035 */
10036 SQLITE_API int sqlite3session_attach(
10037   sqlite3_session *pSession,      /* Session object */
10038   const char *zTab                /* Table name */
10039 );
10040 
10041 /*
10042 ** CAPI3REF: Set a table filter on a Session Object.
10043 ** METHOD: sqlite3_session
10044 **
10045 ** The second argument (xFilter) is the &quot;filter callback&quot;. For changes to rows
10046 ** in tables that are not attached to the Session object, the filter is called
10047 ** to determine whether changes to the table&#39;s rows should be tracked or not.
<span class="line-modified">10048 ** If xFilter returns 0, changes are not tracked. Note that once a table is</span>
10049 ** attached, xFilter will not be called again.
10050 */
10051 SQLITE_API void sqlite3session_table_filter(
10052   sqlite3_session *pSession,      /* Session object */
10053   int(*xFilter)(
10054     void *pCtx,                   /* Copy of third arg to _filter_table() */
10055     const char *zTab              /* Table name */
10056   ),
10057   void *pCtx                      /* First argument passed to xFilter */
10058 );
10059 
10060 /*
10061 ** CAPI3REF: Generate A Changeset From A Session Object
10062 ** METHOD: sqlite3_session
10063 **
10064 ** Obtain a changeset containing changes to the tables attached to the
10065 ** session object passed as the first argument. If successful,
10066 ** set *ppChangeset to point to a buffer containing the changeset
10067 ** and *pnChangeset to the size of the changeset in bytes before returning
10068 ** SQLITE_OK. If an error occurs, set both *ppChangeset and *pnChangeset to
</pre>
<hr />
<pre>
10202 ** &lt;ul&gt;
10203 **   &lt;li&gt; For each row (primary key) that exists in the to-table but not in
10204 **     the from-table, an INSERT record is added to the session object.
10205 **
10206 **   &lt;li&gt; For each row (primary key) that exists in the to-table but not in
10207 **     the from-table, a DELETE record is added to the session object.
10208 **
10209 **   &lt;li&gt; For each row (primary key) that exists in both tables, but features
10210 **     different non-PK values in each, an UPDATE record is added to the
10211 **     session.
10212 ** &lt;/ul&gt;
10213 **
10214 ** To clarify, if this function is called and then a changeset constructed
10215 ** using [sqlite3session_changeset()], then after applying that changeset to
10216 ** database zFrom the contents of the two compatible tables would be
10217 ** identical.
10218 **
10219 ** It an error if database zFrom does not exist or does not contain the
10220 ** required compatible table.
10221 **
<span class="line-modified">10222 ** If the operation is successful, SQLITE_OK is returned. Otherwise, an SQLite</span>
10223 ** error code. In this case, if argument pzErrMsg is not NULL, *pzErrMsg
10224 ** may be set to point to a buffer containing an English language error
10225 ** message. It is the responsibility of the caller to free this buffer using
10226 ** sqlite3_free().
10227 */
10228 SQLITE_API int sqlite3session_diff(
10229   sqlite3_session *pSession,
10230   const char *zFromDb,
10231   const char *zTbl,
10232   char **pzErrMsg
10233 );
10234 
10235 
10236 /*
10237 ** CAPI3REF: Generate A Patchset From A Session Object
10238 ** METHOD: sqlite3_session
10239 **
10240 ** The differences between a patchset and a changeset are that:
10241 **
10242 ** &lt;ul&gt;
</pre>
<hr />
<pre>
10339 );
10340 
10341 /*
10342 ** CAPI3REF: Flags for sqlite3changeset_start_v2
10343 **
10344 ** The following flags may passed via the 4th parameter to
10345 ** [sqlite3changeset_start_v2] and [sqlite3changeset_start_v2_strm]:
10346 **
10347 ** &lt;dt&gt;SQLITE_CHANGESETAPPLY_INVERT &lt;dd&gt;
10348 **   Invert the changeset while iterating through it. This is equivalent to
10349 **   inverting a changeset using sqlite3changeset_invert() before applying it.
10350 **   It is an error to specify this flag with a patchset.
10351 */
10352 #define SQLITE_CHANGESETSTART_INVERT        0x0002
10353 
10354 
10355 /*
10356 ** CAPI3REF: Advance A Changeset Iterator
10357 ** METHOD: sqlite3_changeset_iter
10358 **
<span class="line-modified">10359 ** This function may only be used with iterators created by the function</span>
10360 ** [sqlite3changeset_start()]. If it is called on an iterator passed to
10361 ** a conflict-handler callback by [sqlite3changeset_apply()], SQLITE_MISUSE
10362 ** is returned and the call has no effect.
10363 **
10364 ** Immediately after an iterator is created by sqlite3changeset_start(), it
10365 ** does not point to any change in the changeset. Assuming the changeset
10366 ** is not empty, the first call to this function advances the iterator to
10367 ** point to the first change in the changeset. Each subsequent call advances
10368 ** the iterator to point to the next change in the changeset (if any). If
10369 ** no error occurs and the iterator points to a valid change after a call
10370 ** to sqlite3changeset_next() has advanced it, SQLITE_ROW is returned.
10371 ** Otherwise, if all changes in the changeset have already been visited,
10372 ** SQLITE_DONE is returned.
10373 **
10374 ** If an error occurs, an SQLite error code is returned. Possible error
10375 ** codes include SQLITE_CORRUPT (if the changeset buffer is corrupt) or
10376 ** SQLITE_NOMEM.
10377 */
10378 SQLITE_API int sqlite3changeset_next(sqlite3_changeset_iter *pIter);
10379 
</pre>
<hr />
<pre>
10755 **       new change differ from those in the row deleted by the existing
10756 **       change, the existing DELETE is replaced by an UPDATE within the
10757 **       changegroup. Otherwise, if the inserted row is exactly the same
10758 **       as the deleted row, the existing DELETE is simply discarded.
10759 **   &lt;tr&gt;&lt;td&gt;DELETE &lt;td&gt;UPDATE &lt;td&gt;
10760 **       The new change is ignored. This case does not occur if the new
10761 **       changeset was recorded immediately after the changesets already
10762 **       added to the changegroup.
10763 **   &lt;tr&gt;&lt;td&gt;DELETE &lt;td&gt;DELETE &lt;td&gt;
10764 **       The new change is ignored. This case does not occur if the new
10765 **       changeset was recorded immediately after the changesets already
10766 **       added to the changegroup.
10767 ** &lt;/table&gt;
10768 **
10769 ** If the new changeset contains changes to a table that is already present
10770 ** in the changegroup, then the number of columns and the position of the
10771 ** primary key columns for the table must be consistent. If this is not the
10772 ** case, this function fails with SQLITE_SCHEMA. If the input changeset
10773 ** appears to be corrupt and the corruption is detected, SQLITE_CORRUPT is
10774 ** returned. Or, if an out-of-memory condition occurs during processing, this
<span class="line-modified">10775 ** function returns SQLITE_NOMEM. In all cases, if an error occurs the state</span>
<span class="line-modified">10776 ** of the final contents of the changegroup is undefined.</span>
10777 **
10778 ** If no error occurs, SQLITE_OK is returned.
10779 */
10780 SQLITE_API int sqlite3changegroup_add(sqlite3_changegroup*, int nData, void *pData);
10781 
10782 /*
10783 ** CAPI3REF: Obtain A Composite Changeset From A Changegroup
10784 ** METHOD: sqlite3_changegroup
10785 **
10786 ** Obtain a buffer containing a changeset (or patchset) representing the
10787 ** current contents of the changegroup. If the inputs to the changegroup
10788 ** were themselves changesets, the output is a changeset. Or, if the
10789 ** inputs were patchsets, the output is also a patchset.
10790 **
10791 ** As with the output of the sqlite3session_changeset() and
10792 ** sqlite3session_patchset() functions, all changes related to a single
10793 ** table are grouped together in the output of this function. Tables appear
10794 ** in the same order as for the very first changeset added to the changegroup.
10795 ** If the second or subsequent changesets added to the changegroup contain
10796 ** changes for tables that do not appear in the first changeset, they are
</pre>
<hr />
<pre>
10931 **   original row value stored in the changeset, the conflict-handler function
10932 **   is invoked with [SQLITE_CHANGESET_DATA] as the second argument. Since
10933 **   UPDATE changes only contain values for non-primary key fields that are
10934 **   to be modified, only those fields need to match the original values to
10935 **   avoid the SQLITE_CHANGESET_DATA conflict-handler callback.
10936 **
10937 **   If no row with matching primary key values is found in the database,
10938 **   the conflict-handler function is invoked with [SQLITE_CHANGESET_NOTFOUND]
10939 **   passed as the second argument.
10940 **
10941 **   If the UPDATE operation is attempted, but SQLite returns
10942 **   SQLITE_CONSTRAINT, the conflict-handler function is invoked with
10943 **   [SQLITE_CHANGESET_CONSTRAINT] passed as the second argument.
10944 **   This includes the case where the UPDATE operation is attempted after
10945 **   an earlier call to the conflict handler function returned
10946 **   [SQLITE_CHANGESET_REPLACE].
10947 ** &lt;/dl&gt;
10948 **
10949 ** It is safe to execute SQL statements, including those that write to the
10950 ** table that the callback related to, from within the xConflict callback.
<span class="line-modified">10951 ** This can be used to further customize the application&#39;s conflict</span>
10952 ** resolution strategy.
10953 **
10954 ** All changes made by these functions are enclosed in a savepoint transaction.
10955 ** If any other error (aside from a constraint failure when attempting to
10956 ** write to the target database) occurs, then the savepoint transaction is
10957 ** rolled back, restoring the target database to its original state, and an
10958 ** SQLite error code returned.
10959 **
10960 ** If the output parameters (ppRebase) and (pnRebase) are non-NULL and
10961 ** the input is a changeset (not a patchset), then sqlite3changeset_apply_v2()
10962 ** may set (*ppRebase) to point to a &quot;rebase&quot; that may be used with the
10963 ** sqlite3_rebaser APIs buffer before returning. In this case (*pnRebase)
10964 ** is set to the size of the buffer in bytes. It is the responsibility of the
10965 ** caller to eventually free any such buffer using sqlite3_free(). The buffer
10966 ** is only allocated and populated if one or more conflicts were encountered
10967 ** while applying the patchset. See comments surrounding the sqlite3_rebaser
10968 ** APIs for further details.
10969 **
10970 ** The behavior of sqlite3changeset_apply_v2() and its streaming equivalent
10971 ** may be modified by passing a combination of
</pre>
<hr />
<pre>
11241 /*
11242 ** CAPI3REF: Configure a changeset rebaser object.
11243 ** EXPERIMENTAL
11244 **
11245 ** Configure the changeset rebaser object to rebase changesets according
11246 ** to the conflict resolutions described by buffer pRebase (size nRebase
11247 ** bytes), which must have been obtained from a previous call to
11248 ** sqlite3changeset_apply_v2().
11249 */
11250 SQLITE_API int sqlite3rebaser_configure(
11251   sqlite3_rebaser*,
11252   int nRebase, const void *pRebase
11253 );
11254 
11255 /*
11256 ** CAPI3REF: Rebase a changeset
11257 ** EXPERIMENTAL
11258 **
11259 ** Argument pIn must point to a buffer containing a changeset nIn bytes
11260 ** in size. This function allocates and populates a buffer with a copy
<span class="line-modified">11261 ** of the changeset rebased according to the configuration of the</span>
11262 ** rebaser object passed as the first argument. If successful, (*ppOut)
11263 ** is set to point to the new buffer containing the rebased changeset and
11264 ** (*pnOut) to its size in bytes and SQLITE_OK returned. It is the
11265 ** responsibility of the caller to eventually free the new buffer using
11266 ** sqlite3_free(). Otherwise, if an error occurs, (*ppOut) and (*pnOut)
11267 ** are set to zero and an SQLite error code returned.
11268 */
11269 SQLITE_API int sqlite3rebaser_rebase(
11270   sqlite3_rebaser*,
11271   int nIn, const void *pIn,
11272   int *pnOut, void **ppOut
11273 );
11274 
11275 /*
11276 ** CAPI3REF: Delete a changeset rebaser object.
11277 ** EXPERIMENTAL
11278 **
11279 ** Delete the changeset rebaser object and all associated resources. There
11280 ** should be one call to this function for each successful invocation
11281 ** of sqlite3rebaser_create().
</pre>
<hr />
<pre>
11649 **   current query is executed. Any column filter that applies to
11650 **   phrase iPhrase of the current query is included in $p. For each
11651 **   row visited, the callback function passed as the fourth argument
11652 **   is invoked. The context and API objects passed to the callback
11653 **   function may be used to access the properties of each matched row.
11654 **   Invoking Api.xUserData() returns a copy of the pointer passed as
11655 **   the third argument to pUserData.
11656 **
11657 **   If the callback function returns any value other than SQLITE_OK, the
11658 **   query is abandoned and the xQueryPhrase function returns immediately.
11659 **   If the returned value is SQLITE_DONE, xQueryPhrase returns SQLITE_OK.
11660 **   Otherwise, the error code is propagated upwards.
11661 **
11662 **   If the query runs to completion without incident, SQLITE_OK is returned.
11663 **   Or, if some error occurs before the query completes or is aborted by
11664 **   the callback, an SQLite error code is returned.
11665 **
11666 **
11667 ** xSetAuxdata(pFts5, pAux, xDelete)
11668 **
<span class="line-modified">11669 **   Save the pointer passed as the second argument as the extension function&#39;s</span>
11670 **   &quot;auxiliary data&quot;. The pointer may then be retrieved by the current or any
11671 **   future invocation of the same fts5 extension function made as part of
11672 **   the same MATCH query using the xGetAuxdata() API.
11673 **
11674 **   Each extension function is allocated a single auxiliary data slot for
11675 **   each FTS query (MATCH expression). If the extension function is invoked
11676 **   more than once for a single FTS query, then all invocations share a
11677 **   single auxiliary data context.
11678 **
11679 **   If there is already an auxiliary data pointer when this function is
11680 **   invoked, then it is replaced by the new pointer. If an xDelete callback
11681 **   was specified along with the original pointer, it is invoked at this
11682 **   point.
11683 **
11684 **   The xDelete callback, if one is specified, is also invoked on the
11685 **   auxiliary data pointer after the FTS5 query has finished.
11686 **
11687 **   If an error (e.g. an OOM condition) occurs within this function,
11688 **   the auxiliary data is set to NULL and an error code returned. If the
11689 **   xDelete parameter was not NULL, it is invoked on the auxiliary data
</pre>
<hr />
<pre>
11891 **   If an xToken() callback returns any value other than SQLITE_OK, then
11892 **   the tokenization should be abandoned and the xTokenize() method should
11893 **   immediately return a copy of the xToken() return value. Or, if the
11894 **   input buffer is exhausted, xTokenize() should return SQLITE_OK. Finally,
11895 **   if an error occurs with the xTokenize() implementation itself, it
11896 **   may abandon the tokenization and return any error code other than
11897 **   SQLITE_OK or SQLITE_DONE.
11898 **
11899 ** SYNONYM SUPPORT
11900 **
11901 **   Custom tokenizers may also support synonyms. Consider a case in which a
11902 **   user wishes to query for a phrase such as &quot;first place&quot;. Using the
11903 **   built-in tokenizers, the FTS5 query &#39;first + place&#39; will match instances
11904 **   of &quot;first place&quot; within the document set, but not alternative forms
11905 **   such as &quot;1st place&quot;. In some applications, it would be better to match
11906 **   all instances of &quot;first place&quot; or &quot;1st place&quot; regardless of which form
11907 **   the user specified in the MATCH query text.
11908 **
11909 **   There are several ways to approach this in FTS5:
11910 **
<span class="line-modified">11911 **   &lt;ol&gt;&lt;li&gt; By mapping all synonyms to a single token. In this case, using</span>
<span class="line-modified">11912 **            the above example, this means that the tokenizer returns the</span>
11913 **            same token for inputs &quot;first&quot; and &quot;1st&quot;. Say that token is in
11914 **            fact &quot;first&quot;, so that when the user inserts the document &quot;I won
11915 **            1st place&quot; entries are added to the index for tokens &quot;i&quot;, &quot;won&quot;,
11916 **            &quot;first&quot; and &quot;place&quot;. If the user then queries for &#39;1st + place&#39;,
11917 **            the tokenizer substitutes &quot;first&quot; for &quot;1st&quot; and the query works
11918 **            as expected.
11919 **
11920 **       &lt;li&gt; By querying the index for all synonyms of each query term
11921 **            separately. In this case, when tokenizing query text, the
11922 **            tokenizer may provide multiple synonyms for a single term
11923 **            within the document. FTS5 then queries the index for each
11924 **            synonym individually. For example, faced with the query:
11925 **
11926 **   &lt;codeblock&gt;
11927 **     ... MATCH &#39;first place&#39;&lt;/codeblock&gt;
11928 **
11929 **            the tokenizer offers both &quot;1st&quot; and &quot;first&quot; as synonyms for the
11930 **            first token in the MATCH query and FTS5 effectively runs a query
11931 **            similar to:
11932 **
</pre>
</td>
</tr>
</table>
<center><a href="sqlite3.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="sqlite3ext.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>
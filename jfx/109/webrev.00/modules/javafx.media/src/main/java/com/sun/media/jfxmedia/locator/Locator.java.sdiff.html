<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.media/src/main/java/com/sun/media/jfxmedia/locator/Locator.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="../../jfxmediaimpl/platform/gstreamer/GSTPlatform.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.media/src/main/java/com/sun/media/jfxmedia/locator/Locator.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
400                                 locatorConnection = getConnection(uri, &quot;GET&quot;);
401                             }
402 
403                             if (locatorConnection != null &amp;&amp; locatorConnection.connection != null) {
404                                 isConnected = true;
405 
406                                 // Get content type.
407                                 contentType = locatorConnection.connection.getContentType();
408                                 contentLength = getContentLengthLong(locatorConnection.connection);
409 
410                                 // Disconnect.
411                                 closeConnection(locatorConnection.connection);
412                                 locatorConnection.connection = null;
413                             } else if (locatorConnection != null) {
414                                 if (locatorConnection.responseCode == HttpURLConnection.HTTP_NOT_FOUND) {
415                                     isMediaUnAvailable = true;
416                                 }
417                             }
418 
419                             // FIXME: get cache settings from server, honor them
<span class="line-modified">420                         } else if (scheme.equals(&quot;file&quot;) || scheme.equals(&quot;jar&quot;) || scheme.equals(&quot;jrt&quot;)) {</span>
421                             InputStream stream = getInputStream(uri);
422                             stream.close();
423                             isConnected = true;
424                             contentType = MediaUtils.filenameToContentType(uriString); // We need to provide at least something
425                         }
426 
427                         if (isConnected) {
428                             // Check whether content may be played.
429                             // For WAV use file signature, since it can detect audio format
430                             // and we can fail sooner, then doing it at runtime.
431                             // This is important for AudioClip.
432                             if (MediaUtils.CONTENT_TYPE_WAV.equals(contentType)) {
433                                 contentType = getContentTypeFromFileSignature(uri);
434                                 if (!MediaManager.canPlayContentType(contentType)) {
435                                     isMediaSupported = false;
436                                 }
437                             } else {
438                                 if (contentType == null || !MediaManager.canPlayContentType(contentType)) {
439                                     // Try content based on file name.
440                                     contentType = MediaUtils.filenameToContentType(uriString);
</pre>
</td>
<td>
<hr />
<pre>
400                                 locatorConnection = getConnection(uri, &quot;GET&quot;);
401                             }
402 
403                             if (locatorConnection != null &amp;&amp; locatorConnection.connection != null) {
404                                 isConnected = true;
405 
406                                 // Get content type.
407                                 contentType = locatorConnection.connection.getContentType();
408                                 contentLength = getContentLengthLong(locatorConnection.connection);
409 
410                                 // Disconnect.
411                                 closeConnection(locatorConnection.connection);
412                                 locatorConnection.connection = null;
413                             } else if (locatorConnection != null) {
414                                 if (locatorConnection.responseCode == HttpURLConnection.HTTP_NOT_FOUND) {
415                                     isMediaUnAvailable = true;
416                                 }
417                             }
418 
419                             // FIXME: get cache settings from server, honor them
<span class="line-modified">420                         } else if (scheme.equals(&quot;file&quot;) || scheme.equals(&quot;jar&quot;) || scheme.equals(&quot;jrt&quot;) || (scheme.equals(&quot;resource&quot;)) ) {</span>
421                             InputStream stream = getInputStream(uri);
422                             stream.close();
423                             isConnected = true;
424                             contentType = MediaUtils.filenameToContentType(uriString); // We need to provide at least something
425                         }
426 
427                         if (isConnected) {
428                             // Check whether content may be played.
429                             // For WAV use file signature, since it can detect audio format
430                             // and we can fail sooner, then doing it at runtime.
431                             // This is important for AudioClip.
432                             if (MediaUtils.CONTENT_TYPE_WAV.equals(contentType)) {
433                                 contentType = getContentTypeFromFileSignature(uri);
434                                 if (!MediaManager.canPlayContentType(contentType)) {
435                                     isMediaSupported = false;
436                                 }
437                             } else {
438                                 if (contentType == null || !MediaManager.canPlayContentType(contentType)) {
439                                     // Try content based on file name.
440                                     contentType = MediaUtils.filenameToContentType(uriString);
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="../../jfxmediaimpl/platform/gstreamer/GSTPlatform.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>
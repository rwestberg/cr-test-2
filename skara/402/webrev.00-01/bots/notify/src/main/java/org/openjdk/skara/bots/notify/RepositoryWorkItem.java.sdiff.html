<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff bots/notify/src/main/java/org/openjdk/skara/bots/notify/RepositoryWorkItem.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>bots/notify/src/main/java/org/openjdk/skara/bots/notify/RepositoryWorkItem.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
274 
275             var knownRefs = localRepo.remoteBranches(&quot;origin&quot;)
276                                      .stream()
277                                      .filter(ref -&gt; branches.matcher(ref.name()).matches())
278                                      .collect(Collectors.toList());
279             boolean hasBranchHistory = knownRefs.stream()
280                                                 .map(ref -&gt; history.branchHash(new Branch(ref.name())))
281                                                 .anyMatch(Optional::isPresent);
282             for (var ref : knownRefs) {
283                 if (!hasBranchHistory) {
284                     log.warning(&quot;No previous history found for any branch - resetting mark for &#39;&quot; + ref.name() + &quot;&#39;&quot;);
285                     history.setBranchHash(new Branch(ref.name()), ref.hash());
286                 } else {
287                     handleRef(localRepo, history, ref, knownRefs);
288                 }
289             }
290         } catch (IOException e) {
291             throw new UncheckedIOException(e);
292         }
293     }
<span class="line-removed">294 </span>
<span class="line-removed">295     @Override</span>
<span class="line-removed">296     public String toString() {</span>
<span class="line-removed">297         return &quot;RepositoryWorkItem{&quot; +</span>
<span class="line-removed">298                 &quot;repository=&quot; + repository +</span>
<span class="line-removed">299                 &quot;, storagePath=&quot; + storagePath +</span>
<span class="line-removed">300                 &quot;, branches=&quot; + branches +</span>
<span class="line-removed">301                 &quot;, tagStorageBuilder=&quot; + tagStorageBuilder +</span>
<span class="line-removed">302                 &quot;, branchStorageBuilder=&quot; + branchStorageBuilder +</span>
<span class="line-removed">303                 &quot;, updaters=&quot; + updaters +</span>
<span class="line-removed">304                 &#39;}&#39;;</span>
<span class="line-removed">305     }</span>
306 }
</pre>
</td>
<td>
<hr />
<pre>
274 
275             var knownRefs = localRepo.remoteBranches(&quot;origin&quot;)
276                                      .stream()
277                                      .filter(ref -&gt; branches.matcher(ref.name()).matches())
278                                      .collect(Collectors.toList());
279             boolean hasBranchHistory = knownRefs.stream()
280                                                 .map(ref -&gt; history.branchHash(new Branch(ref.name())))
281                                                 .anyMatch(Optional::isPresent);
282             for (var ref : knownRefs) {
283                 if (!hasBranchHistory) {
284                     log.warning(&quot;No previous history found for any branch - resetting mark for &#39;&quot; + ref.name() + &quot;&#39;&quot;);
285                     history.setBranchHash(new Branch(ref.name()), ref.hash());
286                 } else {
287                     handleRef(localRepo, history, ref, knownRefs);
288                 }
289             }
290         } catch (IOException e) {
291             throw new UncheckedIOException(e);
292         }
293     }












294 }
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff bots/mlbridge/src/test/java/org/openjdk/skara/bots/mlbridge/MailingListBridgeBotTests.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>bots/mlbridge/src/test/java/org/openjdk/skara/bots/mlbridge/MailingListBridgeBotTests.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1651,10 ***</span>
<span class="line-new-header">--- 1651,13 ---</span>
                  var elapsed = Duration.between(start, Instant.now());
                  if (elapsed.compareTo(cooldown) &lt; 0) {
                      break;
                  } else {
                      log.info(&quot;Didn&#39;t do the test in time - retrying (elapsed: &quot; + elapsed + &quot; required: &quot; + cooldown + &quot;)&quot;);
<span class="line-added">+                     // Make sure to run the bot once more after the cooldown has expired to reset the state</span>
<span class="line-added">+                     Thread.sleep(cooldown.toMillis());</span>
<span class="line-added">+                     TestBotRunner.runPeriodicItems(mlBot);</span>
                      listServer.processIncoming();
                      cooldown = cooldown.multipliedBy(2);
                      mlBot = mlBotBuilder.cooldown(cooldown).build();
                  }
              }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1731,10 ***</span>
<span class="line-new-header">--- 1734,13 ---</span>
                  var elapsed = Duration.between(start, Instant.now());
                  if (elapsed.compareTo(cooldown) &lt; 0) {
                      break;
                  } else {
                      log.info(&quot;Didn&#39;t do the test in time - retrying (elapsed: &quot; + elapsed + &quot; required: &quot; + cooldown + &quot;)&quot;);
<span class="line-added">+                     // Make sure to run the bot once more after the cooldown has expired to reset the state</span>
<span class="line-added">+                     Thread.sleep(cooldown.toMillis());</span>
<span class="line-added">+                     TestBotRunner.runPeriodicItems(mlBot);</span>
                      listServer.processIncoming();
                      cooldown = cooldown.multipliedBy(2);
                      mlBot = mlBotBuilder.cooldown(cooldown).build();
                  }
              }
</pre>
<center>&lt; prev <a href="../../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>